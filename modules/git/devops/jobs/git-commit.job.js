const a126_0x1c3bf6=a126_0x25dd;(function(_0x1dea6a,_0x4c606a){const _0x3c54e6=a126_0x25dd,_0x26a9f9=_0x1dea6a();while(!![]){try{const _0x16e363=-parseInt(_0x3c54e6(0xae))/0x1+-parseInt(_0x3c54e6(0x12b))/0x2*(-parseInt(_0x3c54e6(0x12e))/0x3)+parseInt(_0x3c54e6(0xaa))/0x4+parseInt(_0x3c54e6(0xf7))/0x5*(parseInt(_0x3c54e6(0x150))/0x6)+parseInt(_0x3c54e6(0x127))/0x7+-parseInt(_0x3c54e6(0x131))/0x8+-parseInt(_0x3c54e6(0x10c))/0x9*(parseInt(_0x3c54e6(0xd5))/0xa);if(_0x16e363===_0x4c606a)break;else _0x26a9f9['push'](_0x26a9f9['shift']());}catch(_0xb253be){_0x26a9f9['push'](_0x26a9f9['shift']());}}}(a126_0x46c1,0x61660));const a126_0xef2277=(function(){let _0x3196c6=!![];return function(_0x586d82,_0x31725c){const _0x3547d4=_0x3196c6?function(){if(_0x31725c){const _0x1b96dd=_0x31725c['apply'](_0x586d82,arguments);return _0x31725c=null,_0x1b96dd;}}:function(){};return _0x3196c6=![],_0x3547d4;};}()),a126_0x3f0381=a126_0xef2277(this,function(){const _0x5ae424=a126_0x25dd;return a126_0x3f0381['toString']()[_0x5ae424(0xed)](_0x5ae424(0x105))['toString']()[_0x5ae424(0xf2)](a126_0x3f0381)[_0x5ae424(0xed)]('(((.+)+)+)+$');});a126_0x3f0381();function a126_0x25dd(_0x595c80,_0x460cd9){const _0x409f6d=a126_0x46c1();return a126_0x25dd=function(_0x3f0381,_0xef2277){_0x3f0381=_0x3f0381-0xaa;let _0x46c1a5=_0x409f6d[_0x3f0381];return _0x46c1a5;},a126_0x25dd(_0x595c80,_0x460cd9);}'use strict';var __createBinding=this&&this[a126_0x1c3bf6(0x154)]||(Object[a126_0x1c3bf6(0xd8)]?function(_0x43ecc3,_0x5ee968,_0x5af970,_0x421262){const _0x38fd20=a126_0x1c3bf6;if(_0x421262===undefined)_0x421262=_0x5af970;var _0x56fc48=Object[_0x38fd20(0x159)](_0x5ee968,_0x5af970);(!_0x56fc48||('get'in _0x56fc48?!_0x5ee968['__esModule']:_0x56fc48['writable']||_0x56fc48[_0x38fd20(0x12c)]))&&(_0x56fc48={'enumerable':!![],'get':function(){return _0x5ee968[_0x5af970];}}),Object[_0x38fd20(0x111)](_0x43ecc3,_0x421262,_0x56fc48);}:function(_0x5ed727,_0xd89286,_0x258b6f,_0x5ecb56){if(_0x5ecb56===undefined)_0x5ecb56=_0x258b6f;_0x5ed727[_0x5ecb56]=_0xd89286[_0x258b6f];}),__setModuleDefault=this&&this[a126_0x1c3bf6(0xcb)]||(Object[a126_0x1c3bf6(0xd8)]?function(_0x3ee1e0,_0x129a30){const _0x24421a=a126_0x1c3bf6;Object[_0x24421a(0x111)](_0x3ee1e0,_0x24421a(0xc5),{'enumerable':!![],'value':_0x129a30});}:function(_0x2be76f,_0x4629b0){const _0x50aa21=a126_0x1c3bf6;_0x2be76f[_0x50aa21(0xc5)]=_0x4629b0;}),__decorate=this&&this[a126_0x1c3bf6(0x14c)]||function(_0x76251c,_0x1c3a72,_0x3f8fcc,_0x2d95fa){const _0x54a60a=a126_0x1c3bf6;var _0x406ddf=arguments[_0x54a60a(0x102)],_0x90d81a=_0x406ddf<0x3?_0x1c3a72:_0x2d95fa===null?_0x2d95fa=Object['getOwnPropertyDescriptor'](_0x1c3a72,_0x3f8fcc):_0x2d95fa,_0x239db;if(typeof Reflect===_0x54a60a(0xc8)&&typeof Reflect[_0x54a60a(0x13b)]===_0x54a60a(0xfc))_0x90d81a=Reflect[_0x54a60a(0x13b)](_0x76251c,_0x1c3a72,_0x3f8fcc,_0x2d95fa);else{for(var _0x5b9c40=_0x76251c['length']-0x1;_0x5b9c40>=0x0;_0x5b9c40--)if(_0x239db=_0x76251c[_0x5b9c40])_0x90d81a=(_0x406ddf<0x3?_0x239db(_0x90d81a):_0x406ddf>0x3?_0x239db(_0x1c3a72,_0x3f8fcc,_0x90d81a):_0x239db(_0x1c3a72,_0x3f8fcc))||_0x90d81a;}return _0x406ddf>0x3&&_0x90d81a&&Object[_0x54a60a(0x111)](_0x1c3a72,_0x3f8fcc,_0x90d81a),_0x90d81a;},__importStar=this&&this['__importStar']||function(_0x322f81){const _0x477f7d=a126_0x1c3bf6;if(_0x322f81&&_0x322f81[_0x477f7d(0x134)])return _0x322f81;var _0x5a7ffd={};if(_0x322f81!=null){for(var _0x3bf421 in _0x322f81)if(_0x3bf421!==_0x477f7d(0xc5)&&Object[_0x477f7d(0xeb)][_0x477f7d(0x10e)][_0x477f7d(0x14d)](_0x322f81,_0x3bf421))__createBinding(_0x5a7ffd,_0x322f81,_0x3bf421);}return __setModuleDefault(_0x5a7ffd,_0x322f81),_0x5a7ffd;},__metadata=this&&this['__metadata']||function(_0x27168d,_0x36e869){const _0x130863=a126_0x1c3bf6;if(typeof Reflect===_0x130863(0xc8)&&typeof Reflect[_0x130863(0xe4)]===_0x130863(0xfc))return Reflect[_0x130863(0xe4)](_0x27168d,_0x36e869);},GitCommitJob_1;Object['defineProperty'](exports,a126_0x1c3bf6(0x134),{'value':!![]}),exports[a126_0x1c3bf6(0xb9)]=void 0x0;const core_1=require(a126_0x1c3bf6(0xb8)),fs_internal_1=require(a126_0x1c3bf6(0xdf)),salesforce_logger_v3_service_1=require(a126_0x1c3bf6(0x101)),utils_1=require(a126_0x1c3bf6(0xd2)),path_1=require(a126_0x1c3bf6(0xf3)),typedi_1=__importStar(require(a126_0x1c3bf6(0x125))),constants_1=require('../../../../constants'),salesforce_commits_manager_service_1=require(a126_0x1c3bf6(0x161)),git_utils_1=require(a126_0x1c3bf6(0xe3)),mdapi_utils_1=require(a126_0x1c3bf6(0x110)),api_error_1=require('../../../../core/errors/api.error'),salesforce_error_1=require(a126_0x1c3bf6(0xfe)),git_commit_service_1=require(a126_0x1c3bf6(0x113)),flosum_commit_error_1=require(a126_0x1c3bf6(0xbb)),bitbucket_api_service_1=require(a126_0x1c3bf6(0x148)),git_provider_1=require(a126_0x1c3bf6(0x155)),sfdx_utils_1=require(a126_0x1c3bf6(0x15f)),utils_2=require('../../parsers/utils'),git_internal_1=require(a126_0x1c3bf6(0x106)),providers_tokens_1=require('../../providers/providers.tokens'),connection_1=require(a126_0x1c3bf6(0x142)),sf_logger_v3_types_1=require(a126_0x1c3bf6(0xdb)),path_utils_1=require(a126_0x1c3bf6(0x12d)),commit_to_flosum_completed_notification_1=require('../../notifications/commit-to-flosum-completed.notification'),commit_to_flosum_error_notification_1=require(a126_0x1c3bf6(0xb7));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x55a82a,_0x3dbced){const _0x2ef18b=a126_0x1c3bf6;this[_0x2ef18b(0x11b)]=_0x55a82a,this[_0x2ef18b(0xf4)]=_0x3dbced,this[_0x2ef18b(0x124)]=+(process[_0x2ef18b(0x153)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x2ef18b(0x144)]=new core_1[(_0x2ef18b(0x162))](GitCommitJob_1[_0x2ef18b(0x11a)]),this['commitId']='',this[_0x2ef18b(0x133)]={'removed':0x0,'modified':0x0,'added':0x0};}async['getRemote'](){const _0x274696=a126_0x1c3bf6,{repositoryGit:_0x1f8c3c}=this[_0x274696(0x135)],_0x5bbc44=typedi_1[_0x274696(0xc5)]['get'](providers_tokens_1[_0x274696(0x121)][_0x274696(0xb5)]);if(this[_0x274696(0x135)][_0x274696(0xce)]===git_provider_1[_0x274696(0xbf)][_0x274696(0xc1)]){const _0x29dcbf=typedi_1[_0x274696(0xc5)][_0x274696(0x140)](bitbucket_api_service_1[_0x274696(0x108)]);await _0x29dcbf[_0x274696(0x100)]();}return _0x1f8c3c[_0x274696(0xba)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x274696(0x139)])(_0x1f8c3c)+_0x274696(0x10b)+_0x5bbc44[_0x274696(0x128)]()+'@');}async[a126_0x1c3bf6(0xef)](_0x40b871,_0x106710,_0xcf09ae,_0x23146e){const _0x53652d=a126_0x1c3bf6;if(!this[_0x53652d(0x13e)][_0x53652d(0x141)]){this['logger'][_0x53652d(0x13c)](_0x53652d(0x143));return;}await new commit_to_flosum_completed_notification_1['CommitToFlosumCompletedNotification']({'emails':_0x40b871,'gitProvider':_0x106710,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x53652d(0xaf)][_0x53652d(0x11a)],'repositoryName':_0xcf09ae,'branchName':_0x23146e})[_0x53652d(0xee)]();}async[a126_0x1c3bf6(0xe5)](_0x27da72,_0x201835,_0xb592c2,_0x27baff){const _0x2631e5=a126_0x1c3bf6;if(!this[_0x2631e5(0x13e)][_0x2631e5(0x141)]){this[_0x2631e5(0x144)][_0x2631e5(0x13c)]('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_error_notification_1['CommitToFlosumErrorNotification']({'emails':_0x27da72,'gitProvider':_0x201835,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x2631e5(0x149)][_0x2631e5(0x11a)],'repositoryName':_0xb592c2,'branchName':_0x27baff})[_0x2631e5(0xee)]();}['resetStats'](){const _0x39395b=a126_0x1c3bf6;this[_0x39395b(0x133)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a126_0x1c3bf6(0xcd)](){const _0x207fe7=a126_0x1c3bf6,_0x5d1601=[...this[_0x207fe7(0x135)][_0x207fe7(0x10d)]];this[_0x207fe7(0x135)]['fileNames']=[];for(const _0x21c9ee of _0x5d1601){this[_0x207fe7(0x135)][_0x207fe7(0x10d)][_0x207fe7(0x107)](...await(0x0,utils_2['readFilesByFilename'])(_0x21c9ee,this[_0x207fe7(0xd1)][_0x207fe7(0x118)]));}}async[a126_0x1c3bf6(0xcc)](){const _0x40803b=a126_0x1c3bf6;if(this[_0x40803b(0x135)][_0x40803b(0x167)])return;const _0x2a5eb2=[];for(const _0x1bde03 of this['gitCommitData'][_0x40803b(0x166)]){const _0x38d32a=await this['gitUtils'][_0x40803b(0x12f)](_0x1bde03['id']);_0x1bde03[_0x40803b(0x160)]=_0x38d32a[_0x40803b(0x11c)],_0x1bde03['message']=_0x38d32a[_0x40803b(0xf6)],_0x1bde03[_0x40803b(0xac)]=_0x38d32a[_0x40803b(0xc3)],_0x1bde03['email']=_0x38d32a[_0x40803b(0xc7)];if(_0x1bde03[_0x40803b(0xc7)]===constants_1[_0x40803b(0x126)])throw new flosum_commit_error_1[(_0x40803b(0xf9))]();_0x2a5eb2[_0x40803b(0x107)](...Object[_0x40803b(0xcf)](_0x1bde03[_0x40803b(0xac)])['flat']());}this[_0x40803b(0x135)]['fileNames']=[...new Set(path_utils_1[_0x40803b(0x14f)][_0x40803b(0x119)](this['gitCommit']['recordType'],_0x2a5eb2,![]))];}async[a126_0x1c3bf6(0x120)](_0x48f889,_0x16da92,_0x490cff){const _0x37c6ac=a126_0x1c3bf6,_0x4aa597=_0x490cff[_0x37c6ac(0xbc)]((_0x5aae5a,_0x407eca)=>{const _0x2e6e25=_0x37c6ac;return _0x5aae5a['inserted'][_0x2e6e25(0x107)](..._0x407eca[_0x2e6e25(0xe0)]),_0x5aae5a['modified']['push'](..._0x407eca[_0x2e6e25(0xad)]),_0x5aae5a[_0x2e6e25(0xc4)]['push'](..._0x407eca[_0x2e6e25(0xc4)]),_0x5aae5a;},{'inserted':[],'modified':[],'removed':[]}),_0x2bdd22=new salesforce_commits_manager_service_1[(_0x37c6ac(0x15b))]({'recordTypes':this[_0x37c6ac(0x11b)]['getRecordTypes'](),'branchId':this[_0x37c6ac(0x11b)][_0x37c6ac(0xf5)](),'repositoryId':this[_0x37c6ac(0x11b)][_0x37c6ac(0x15e)](),'logger':this['sfLogger'],'commitId':this[_0x37c6ac(0x12a)]});await _0x2bdd22[_0x37c6ac(0xe8)]([{'author':_0x48f889,'message':_0x16da92,'inserted':_0x4aa597[_0x37c6ac(0xe0)],'modified':_0x4aa597[_0x37c6ac(0xad)],'removed':_0x4aa597[_0x37c6ac(0xc4)]}]);}async[a126_0x1c3bf6(0x14e)](_0x1633e2,_0x4b0664){const _0xae310a=a126_0x1c3bf6;await this[_0xae310a(0xfa)][_0xae310a(0xdc)](this[_0xae310a(0x11f)]+'\x20Download\x20components\x20metadata\x20from\x20Flosum.')['send'](),await this[_0xae310a(0x11b)][_0xae310a(0x11e)](_0x4b0664);const {added:_0xa64420,modified:_0x4edec2,removed:_0x5aeee3}=_0x1633e2[_0xae310a(0xac)];_0x4b0664&&_0x4edec2['push'](..._0x5aeee3['splice'](0x0));const _0x486a57=path_utils_1[_0xae310a(0x14f)]['prepareGitChangedPaths'](this['gitCommit'][_0xae310a(0x158)],[..._0xa64420,..._0x4edec2,..._0x5aeee3],_0x4b0664&&!this['gitCommitData']['force']),_0x34b291=(0x0,utils_2[_0xae310a(0x10f)])(_0x486a57);let _0x194013=0x0;const _0x240894=[];(_0xa64420['length']||_0x4edec2['length'])&&this[_0xae310a(0x11b)][_0xae310a(0x15e)]()&&(this[_0xae310a(0x12a)]=await this['gitCommit'][_0xae310a(0xe7)](_0x1633e2['message']));const _0x40210a=_0x34b291[_0xae310a(0x102)];let _0x4ea2a3=0x0;while(_0x34b291['length']){const _0x53b3c8=_0x34b291[_0xae310a(0x146)](),_0x142cba=await this[_0xae310a(0x11b)][_0xae310a(0x168)](_0x53b3c8,this[_0xae310a(0xd1)][_0xae310a(0x118)],_0x4b0664&&!this[_0xae310a(0x135)][_0xae310a(0x167)]);_0x194013+=_0x142cba[_0xae310a(0xe0)][_0xae310a(0x102)]+_0x142cba[_0xae310a(0xc4)][_0xae310a(0x102)]+_0x142cba[_0xae310a(0xad)][_0xae310a(0x102)],this[_0xae310a(0x133)][_0xae310a(0xbd)]+=_0x142cba['inserted'][_0xae310a(0x102)],this[_0xae310a(0x133)][_0xae310a(0xad)]+=_0x142cba[_0xae310a(0xad)]['length'],this[_0xae310a(0x133)][_0xae310a(0xc4)]+=_0x142cba[_0xae310a(0xc4)][_0xae310a(0x102)],_0x4ea2a3++,_0x4ea2a3%0x64===0x0&&this['logger'][_0xae310a(0xdc)](_0xae310a(0x11d),_0x4ea2a3,_0x40210a,_0x194013),_0x240894[_0xae310a(0x107)](_0x142cba),_0x194013>this[_0xae310a(0x124)]&&(await this['sendComponents'](_0x1633e2[_0xae310a(0x160)],_0x1633e2[_0xae310a(0xf6)],_0x240894),await this['sfLogger']['log'](this['prefix']+_0xae310a(0x129)+_0x194013+_0xae310a(0x115))[_0xae310a(0x163)](),_0x194013=0x0,_0x240894[_0xae310a(0xfb)](0x0));}_0x240894['length']&&(await this['sendComponents'](_0x1633e2[_0xae310a(0x160)],_0x1633e2[_0xae310a(0xf6)],_0x240894),await this['sfLogger'][_0xae310a(0xdc)](this['prefix']+_0xae310a(0x129)+_0x194013+'\x20components.')[_0xae310a(0x163)]());}async['proceedCommits'](_0x43403f){const _0x270781=a126_0x1c3bf6,_0x27641d=[...this['gitCommitData']['commits']],_0x566ab3=_0x27641d['length'];let _0x3d5622=0x0;while(_0x27641d[_0x270781(0x102)]){const _0x516df9=_0x27641d['shift']();!this[_0x270781(0x135)]['force']&&(this[_0x270781(0x11b)][_0x270781(0x15e)]()?(await this[_0x270781(0xab)][_0x270781(0xc0)](_0x516df9['id']),await this[_0x270781(0xd1)][_0x270781(0x165)](this['gitUtils'][_0x270781(0x118)])):(await this[_0x270781(0xab)][_0x270781(0xc0)](this[_0x270781(0x10a)]),await this[_0x270781(0xd1)][_0x270781(0x165)](this[_0x270781(0xab)][_0x270781(0x118)]))),await this[_0x270781(0x14e)](_0x516df9,_0x43403f),await this[_0x270781(0xd1)][_0x270781(0xb3)](),_0x3d5622+=0x1,await this['sfLogger'][_0x270781(0xdc)](this[_0x270781(0x11f)]+_0x270781(0x136)),await this[_0x270781(0xfa)]['log'](this[_0x270781(0x11f)]+_0x270781(0x15a)+this['stats'][_0x270781(0xbd)]+_0x270781(0xb2)),await this[_0x270781(0xfa)][_0x270781(0xdc)](this[_0x270781(0x11f)]+_0x270781(0xf8)+this[_0x270781(0x133)][_0x270781(0xad)]+_0x270781(0xb2)),await this[_0x270781(0xfa)][_0x270781(0xdc)](this[_0x270781(0x11f)]+_0x270781(0xf0)+this[_0x270781(0x133)]['removed']+_0x270781(0xb2)),await this['sfLogger']['log'](this['prefix']+_0x270781(0x16a)+_0x3d5622+'/'+_0x566ab3+_0x270781(0xb6))[_0x270781(0x163)](),this[_0x270781(0x138)]();}}async[a126_0x1c3bf6(0xda)](){const _0x1fec6d=a126_0x1c3bf6;this[_0x1fec6d(0xab)]&&await this['gitUtils']['removeDir']()['catch'](()=>void 0x0),this['mdapiUtils']&&await this[_0x1fec6d(0xd1)]['removeDir']()[_0x1fec6d(0x151)](()=>void 0x0);}async[a126_0x1c3bf6(0xe6)](_0x26c3f1){const _0x3c95d2=a126_0x1c3bf6;this[_0x3c95d2(0x135)]=_0x26c3f1,this[_0x3c95d2(0x11b)][_0x3c95d2(0xca)](this[_0x3c95d2(0x135)]),this['gitApiService']=typedi_1[_0x3c95d2(0xc5)]['get'](providers_tokens_1[_0x3c95d2(0x121)][_0x3c95d2(0x104)]),this[_0x3c95d2(0x13e)]=typedi_1[_0x3c95d2(0xc5)]['get'](providers_tokens_1[_0x3c95d2(0x121)][_0x3c95d2(0x13e)]),this[_0x3c95d2(0xfa)]=typedi_1[_0x3c95d2(0xc5)][_0x3c95d2(0x140)](providers_tokens_1['Tokens']['logger']),this['prefix']=_0x3c95d2(0x123)+_0x26c3f1[_0x3c95d2(0x117)]+_0x3c95d2(0xb4)+_0x26c3f1[_0x3c95d2(0x130)]+_0x3c95d2(0x116)+GitCommitJob_1[_0x3c95d2(0x11a)]+']',this['gitUtils']=new git_utils_1[(_0x3c95d2(0xd6))](await this[_0x3c95d2(0x114)]()),this[_0x3c95d2(0xd1)]=new mdapi_utils_1['MDApiUtils'](),this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](this[_0x3c95d2(0x11f)]+_0x3c95d2(0xd0));try{this['sfLogger']['log'](this[_0x3c95d2(0x11f)]+_0x3c95d2(0xec)),await this[_0x3c95d2(0x11b)]['fetchRepositoryOrBranchData'](),await this[_0x3c95d2(0x11b)][_0x3c95d2(0x15c)](_0x3c95d2(0x109)),this['sfLogger'][_0x3c95d2(0xdc)](this[_0x3c95d2(0x11f)]+_0x3c95d2(0x147)),this[_0x3c95d2(0x10a)]=await git_internal_1[_0x3c95d2(0xe9)][_0x3c95d2(0xfd)](await this[_0x3c95d2(0x114)](),this[_0x3c95d2(0x135)][_0x3c95d2(0x130)]),this[_0x3c95d2(0x144)]['log']('Last\x20git\x20repository\x20hash\x20is\x20%s.',this[_0x3c95d2(0x10a)]);const _0x43066c=await this[_0x3c95d2(0x11b)][_0x3c95d2(0x157)](this[_0x3c95d2(0x10a)]);if(_0x43066c){this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](_0x3c95d2(0x15d)),await this[_0x3c95d2(0x11b)]['updateStatus'](_0x3c95d2(0xde));return;}this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](this['prefix']+_0x3c95d2(0x13f)+this[_0x3c95d2(0x135)][_0x3c95d2(0x13d)]+'.'),await this[_0x3c95d2(0xab)][_0x3c95d2(0xd3)](this['gitCommitData'][_0x3c95d2(0x130)],this[_0x3c95d2(0x135)][_0x3c95d2(0x117)]),this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](this[_0x3c95d2(0x11f)]+_0x3c95d2(0xf1));const _0x53340b=await sfdx_utils_1[_0x3c95d2(0xea)][_0x3c95d2(0x122)](this[_0x3c95d2(0xab)][_0x3c95d2(0x118)]);await this[_0x3c95d2(0xcc)]();!this['sfLogger'][_0x3c95d2(0x145)]()&&this[_0x3c95d2(0xfa)][_0x3c95d2(0x132)](await salesforce_logger_v3_service_1['SalesforceLogger3'][_0x3c95d2(0xd9)](sf_logger_v3_types_1['LoggerTypes'][_0x3c95d2(0x112)]));await this['sfLogger'][_0x3c95d2(0x163)]();if(_0x26c3f1[_0x3c95d2(0x167)]){await this[_0x3c95d2(0xd1)]['prepareMdapi'](this['gitUtils'][_0x3c95d2(0x118)]),await this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](this['prefix']+_0x3c95d2(0xb1))['send']();const _0x3dd158=(await fs_internal_1['FS']['readDir'](this[_0x3c95d2(0xd1)]['dir'],!![]))[_0x3c95d2(0xd7)](_0x18cc31=>(0x0,path_1[_0x3c95d2(0x103)])(this[_0x3c95d2(0xd1)][_0x3c95d2(0x118)],_0x18cc31));this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](this['prefix']+_0x3c95d2(0xc9)+_0x3dd158[_0x3c95d2(0x102)]+_0x3c95d2(0xd4)),this['gitCommitData'][_0x3c95d2(0x10d)]=[],this[_0x3c95d2(0x135)]['commits']=[{'files':{'modified':_0x3dd158,'added':[],'removed':[]},'id':await this[_0x3c95d2(0xab)][_0x3c95d2(0xc6)](),'message':_0x3c95d2(0xbe),'username':constants_1[_0x3c95d2(0xe2)]}];}await this[_0x3c95d2(0x11b)][_0x3c95d2(0x152)]({[this['gitCommitData']['repositoryGit']]:{'lastCommit':this[_0x3c95d2(0x10a)]}}),await this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](this['prefix']+_0x3c95d2(0x156)+(_0x53340b?'YES':'NO')+_0x3c95d2(0x169))[_0x3c95d2(0x163)](),await this[_0x3c95d2(0xe8)](_0x53340b),await this[_0x3c95d2(0xfa)][_0x3c95d2(0xdc)](this[_0x3c95d2(0x11f)]+'\x20Job\x20done.')['send'](),await this[_0x3c95d2(0x11b)][_0x3c95d2(0x15c)](_0x3c95d2(0xde)),await this[_0x3c95d2(0xef)]([_0x26c3f1[_0x3c95d2(0xc7)]],this[_0x3c95d2(0x13e)][_0x3c95d2(0xff)],_0x26c3f1[_0x3c95d2(0x117)],_0x26c3f1['branch']);}catch(_0x548c7d){await this[_0x3c95d2(0xda)]();if(_0x548c7d instanceof flosum_commit_error_1[_0x3c95d2(0xf9)])await this['gitCommit'][_0x3c95d2(0x15c)]('Completed')['catch'](()=>void 0x0),this['logger'][_0x3c95d2(0xdc)](this['prefix']+_0x3c95d2(0x164));else{await this[_0x3c95d2(0x144)][_0x3c95d2(0xdd)](this[_0x3c95d2(0x11f)]+_0x3c95d2(0xc2)+(_0x548c7d instanceof api_error_1[_0x3c95d2(0x137)]||_0x548c7d instanceof salesforce_error_1[_0x3c95d2(0xb0)]?_0x548c7d['toString']():_0x548c7d)),await this[_0x3c95d2(0x11b)][_0x3c95d2(0x152)]({}),await this[_0x3c95d2(0x11b)][_0x3c95d2(0x15c)](_0x3c95d2(0xe1))[_0x3c95d2(0x151)](()=>void 0x0),await this['errorNotification']([_0x26c3f1[_0x3c95d2(0xc7)]],this[_0x3c95d2(0x13e)]['gitProvider'],_0x26c3f1[_0x3c95d2(0x117)],_0x26c3f1[_0x3c95d2(0x130)]);throw _0x548c7d;}}finally{await this[_0x3c95d2(0xda)](),await this[_0x3c95d2(0xfa)]['send']()[_0x3c95d2(0x151)](()=>void 0x0);}}};function a126_0x46c1(){const _0x773975=['\x20commits.','../../notifications/commit-to-flosum-error.notification','../../../../core','GitCommitJob','replace','../errors/flosum-commit.error','reduce','added','sync\x20components','GitProvider','checkoutTo','Bitbucket','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','changes','removed','default','getCurrentHash','email','object','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','setCommitDto','__setModuleDefault','fetchCommits','updateFileNamesForSFDXProject','provider','values','\x20Start\x20Git-commit\x20job.','mdapiUtils','../../../shared/utils','clone','\x20files\x20before\x20sync.','90rPpsGZ','GitUtils','map','create','createLoggerId','cleanUp','../../salesforce/types/sf-logger-v3-types','log','error','Completed','../../internal/fs.internal','inserted','Error','DEFAULT_GIT_USER_NAME','../utils/git.utils','metadata','errorNotification','run','createCommit','proceedCommits','Git','SFDX','prototype','\x20Fetch\x20salesforce\x20data.','search','execute','completeNotification','\x20Removed\x20','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','constructor','path','providersFactory','getBranchId','message','5bRHjmI','\x20Modified\x20','FlosumCommitError','sfLogger','splice','function','getRemoteHash','../../salesforce/errors/salesforce.error','gitProvider','isLoggedIn','../../salesforce/services/salesforce-logger-v3.service','length','relative','gitApiService','(((.+)+)+)+$','../../internal/git.internal','push','BitbucketApiService','In\x20Progress','lastCommitHash','://','372852eWIIFt','fileNames','hasOwnProperty','convertToCleanPaths','../utils/mdapi.utils','defineProperty','commit','../services/git-commit.service','getRemote','\x20components.',']\x20[','repository','dir','prepareGitChangedPaths','name','gitCommit','author','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','fetchComponentsMetadata','prefix','sendComponents','Tokens','isSFDXProject','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','MAX_COMPONENTS_PER_TICK','typedi','DEFAULT_GIT_USER_EMAIL','5228678kJftTq','getGitShellAuthorizationString','\x20Processed\x20','commitId','3622wtYBrj','configurable','../utils/path.utils','93VeeNka','describeCommit','branch','5403912AKjTXi','setLoggerId','stats','__esModule','gitCommitData','\x20Commit\x20Summary','ApiError','resetStats','getProtocol','GitCommitService','decorate','info','repositoryGit','config','\x20Cloning\x20git\x20repository\x20from\x20','get','isEmailNotificationsEnabled','../utils/connection','Email\x20notifications\x20are\x20disabled.','logger','getLoggerId','shift','\x20Fetch\x20remote\x20branch\x20hash.','../../providers/api/bitbucket-api.service','CommitToFlosumErrorNotification','Service','design:paramtypes','__decorate','call','handleCommit','PathUtils','2352654lghliJ','catch','updateRemoteState','env','__createBinding','../../providers/types/git-provider','\x20[SFDX:\x20','checkSyncStatus','recordType','getOwnPropertyDescriptor','\x20Added\x20','SalesforceCommitsManager','updateStatus','Branch\x20synchronized.\x20Skip.','getRepositoryId','../../salesforce/utils/sfdx.utils','username','../../salesforce/services/salesforce-commits-manager.service','Logger','send','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','prepareMdapi','commits','force','proceedFile',']\x20Start\x20proceeding\x20git\x20commits.\x20','\x20Proceeded\x20','1170300fvPyYh','gitUtils','files','modified','40494yqpGts','CommitToFlosumCompletedNotification','SalesforceError','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','\x20components','removeDir',']\x20[Branch:\x20','credentials'];a126_0x46c1=function(){return _0x773975;};return a126_0x46c1();}GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a126_0x1c3bf6(0x14a)])({'transient':!![]}),__metadata(a126_0x1c3bf6(0x14b),[git_commit_service_1[a126_0x1c3bf6(0x13a)],connection_1['ProvidersFactory']])],GitCommitJob),exports[a126_0x1c3bf6(0xb9)]=GitCommitJob;