const a126_0x246562=a126_0x2ee6;(function(_0x4d56e3,_0x1fd2c3){const _0x31530e=a126_0x2ee6,_0x41389b=_0x4d56e3();while(!![]){try{const _0x7e206c=-parseInt(_0x31530e(0x1b1))/0x1*(parseInt(_0x31530e(0x1f4))/0x2)+-parseInt(_0x31530e(0x21e))/0x3*(-parseInt(_0x31530e(0x1a4))/0x4)+-parseInt(_0x31530e(0x1d2))/0x5+parseInt(_0x31530e(0x1d4))/0x6+-parseInt(_0x31530e(0x184))/0x7*(parseInt(_0x31530e(0x1dc))/0x8)+parseInt(_0x31530e(0x1ef))/0x9*(parseInt(_0x31530e(0x222))/0xa)+-parseInt(_0x31530e(0x1fa))/0xb*(-parseInt(_0x31530e(0x1cf))/0xc);if(_0x7e206c===_0x1fd2c3)break;else _0x41389b['push'](_0x41389b['shift']());}catch(_0x28cfd0){_0x41389b['push'](_0x41389b['shift']());}}}(a126_0x77d7,0x766a5));const a126_0x2cc839=(function(){let _0x37dd39=!![];return function(_0x5667ad,_0x51e59b){const _0xe5bfef=_0x37dd39?function(){const _0x137650=a126_0x2ee6;if(_0x51e59b){const _0x30a6b2=_0x51e59b[_0x137650(0x1c8)](_0x5667ad,arguments);return _0x51e59b=null,_0x30a6b2;}}:function(){};return _0x37dd39=![],_0xe5bfef;};}()),a126_0x2398ae=a126_0x2cc839(this,function(){const _0x14c77a=a126_0x2ee6;return a126_0x2398ae[_0x14c77a(0x207)]()['search'](_0x14c77a(0x1c9))[_0x14c77a(0x207)]()[_0x14c77a(0x19a)](a126_0x2398ae)[_0x14c77a(0x1c5)](_0x14c77a(0x1c9));});a126_0x2398ae();function a126_0x77d7(){const _0x4134c9=['17813SZFWAV','recordType','run','Git','\x20Processed\x20','../../../shared/utils','clone','Tokens','map','\x20Added\x20','\x20[SFDX:\x20',']\x20Start\x20proceeding\x20git\x20commits.\x20','resetStats','../../providers/providers.tokens','\x20Fetch\x20salesforce\x20data.','\x20files\x20before\x20sync.','\x20Removed\x20','removed','\x20Commit\x20Summary','setLoggerId','search','defineProperty','cleanUp','apply','(((.+)+)+)+$','added','PathUtils','get','isSFDXProject','GitCommitService','19239684RPUXZu','sendComponents','ApiError','3710395BIzTKh','completeNotification','4026870TmvnVz','providersFactory','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','\x20components.','branch','commit','catch','execute','7093936mjNHkq','message','getCurrentHash','../../internal/git.internal','../../salesforce/services/salesforce-logger-v3.service','function','CommitToFlosumErrorNotification','LoggerTypes','MAX_COMPONENTS_PER_TICK','proceedCommits','\x20Download\x20components\x20metadata\x20from\x20Flosum.','dir','CommitToFlosumCompletedNotification','Logger','../../providers/types/git-provider','configurable','email','mdapiUtils','FlosumCommitError','1736343dzGXQv','\x20components','credentials','Completed','convertToCleanPaths','102NrOIbe','checkoutTo','modified','SalesforceLogger3','gitCommitData','removeDir','11rhcZaS','getRepositoryId','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','metadata','prepareMdapi','create','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','../../internal/fs.internal','../services/git-commit.service','send','repositoryGit','Email\x20notifications\x20are\x20disabled.','fetchRepositoryOrBranchData','toString','handleCommit','info','username','../../../../constants','\x20Modified\x20','__importStar','__esModule','log','name','../utils/path.utils','config','stats','../errors/flosum-commit.error',']\x20[Branch:\x20','default','createLoggerId','\x20Fetch\x20remote\x20branch\x20hash.','../../../../core','inserted','__setModuleDefault','fetchCommits','getGitShellAuthorizationString','1664802ZFCwRM','prefix','\x20Start\x20Git-commit\x20job.','design:paramtypes','10rBYxxQ','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','://','gitApiService','path','../../../../core/errors/api.error','DEFAULT_GIT_USER_EMAIL','Last\x20git\x20repository\x20hash\x20is\x20%s.','\x20Proceeded\x20','fetchComponentsMetadata','getRemote','values','../../notifications/commit-to-flosum-error.notification','push','gitProvider','errorNotification','DEFAULT_GIT_USER_NAME','call','../utils/connection','../../salesforce/utils/sfdx.utils','logger','isLoggedIn','../../providers/api/bitbucket-api.service','shift','__decorate','7SgySlb','error','GitProvider','getLoggerId','length','sfLogger','prototype','splice','commitId','env','updateFileNamesForSFDXProject','In\x20Progress','fileNames','readDir','updateRemoteState','getRemoteHash','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','../../salesforce/errors/salesforce.error','../utils/git.utils','gitUtils','force','../utils/mdapi.utils','constructor','prepareGitChangedPaths','SFDX','lastCommitHash','updateStatus','GitCommitJob','../../salesforce/services/salesforce-commits-manager.service','replace','commits','gitCommit','4wnTZOv','repository','isEmailNotificationsEnabled','MDApiUtils','getProtocol','getOwnPropertyDescriptor','__createBinding','Error','decorate','object','author','typedi','SalesforceCommitsManager'];a126_0x77d7=function(){return _0x4134c9;};return a126_0x77d7();}function a126_0x2ee6(_0x21c5a2,_0x5ae5ba){const _0x1daeb7=a126_0x77d7();return a126_0x2ee6=function(_0x2398ae,_0x2cc839){_0x2398ae=_0x2398ae-0x179;let _0x77d7b8=_0x1daeb7[_0x2398ae];return _0x77d7b8;},a126_0x2ee6(_0x21c5a2,_0x5ae5ba);}'use strict';var __createBinding=this&&this[a126_0x246562(0x1aa)]||(Object[a126_0x246562(0x1ff)]?function(_0x1b0806,_0x596f52,_0x3b004a,_0x1409d5){const _0x470614=a126_0x246562;if(_0x1409d5===undefined)_0x1409d5=_0x3b004a;var _0x55e401=Object[_0x470614(0x1a9)](_0x596f52,_0x3b004a);(!_0x55e401||(_0x470614(0x1cc)in _0x55e401?!_0x596f52[_0x470614(0x20e)]:_0x55e401['writable']||_0x55e401[_0x470614(0x1eb)]))&&(_0x55e401={'enumerable':!![],'get':function(){return _0x596f52[_0x3b004a];}}),Object[_0x470614(0x1c6)](_0x1b0806,_0x1409d5,_0x55e401);}:function(_0x5acb8d,_0xc33e73,_0x33b204,_0x3e8849){if(_0x3e8849===undefined)_0x3e8849=_0x33b204;_0x5acb8d[_0x3e8849]=_0xc33e73[_0x33b204];}),__setModuleDefault=this&&this[a126_0x246562(0x21b)]||(Object[a126_0x246562(0x1ff)]?function(_0x190e71,_0x378f88){const _0x752f18=a126_0x246562;Object['defineProperty'](_0x190e71,_0x752f18(0x216),{'enumerable':!![],'value':_0x378f88});}:function(_0x183a36,_0x444d06){const _0x4bb0a4=a126_0x246562;_0x183a36[_0x4bb0a4(0x216)]=_0x444d06;}),__decorate=this&&this[a126_0x246562(0x183)]||function(_0x3fe728,_0x46a716,_0x102071,_0xf6c3f1){const _0x41073b=a126_0x246562;var _0x2ad508=arguments[_0x41073b(0x188)],_0x4d8882=_0x2ad508<0x3?_0x46a716:_0xf6c3f1===null?_0xf6c3f1=Object['getOwnPropertyDescriptor'](_0x46a716,_0x102071):_0xf6c3f1,_0x48da39;if(typeof Reflect===_0x41073b(0x1ad)&&typeof Reflect['decorate']==='function')_0x4d8882=Reflect[_0x41073b(0x1ac)](_0x3fe728,_0x46a716,_0x102071,_0xf6c3f1);else{for(var _0x17286f=_0x3fe728['length']-0x1;_0x17286f>=0x0;_0x17286f--)if(_0x48da39=_0x3fe728[_0x17286f])_0x4d8882=(_0x2ad508<0x3?_0x48da39(_0x4d8882):_0x2ad508>0x3?_0x48da39(_0x46a716,_0x102071,_0x4d8882):_0x48da39(_0x46a716,_0x102071))||_0x4d8882;}return _0x2ad508>0x3&&_0x4d8882&&Object['defineProperty'](_0x46a716,_0x102071,_0x4d8882),_0x4d8882;},__importStar=this&&this[a126_0x246562(0x20d)]||function(_0x2baadf){const _0x1cb52b=a126_0x246562;if(_0x2baadf&&_0x2baadf['__esModule'])return _0x2baadf;var _0x296443={};if(_0x2baadf!=null){for(var _0x324cd8 in _0x2baadf)if(_0x324cd8!==_0x1cb52b(0x216)&&Object[_0x1cb52b(0x18a)]['hasOwnProperty'][_0x1cb52b(0x17c)](_0x2baadf,_0x324cd8))__createBinding(_0x296443,_0x2baadf,_0x324cd8);}return __setModuleDefault(_0x296443,_0x2baadf),_0x296443;},__metadata=this&&this['__metadata']||function(_0x3c349e,_0x392a83){const _0x31f21a=a126_0x246562;if(typeof Reflect===_0x31f21a(0x1ad)&&typeof Reflect[_0x31f21a(0x1fd)]===_0x31f21a(0x1e1))return Reflect[_0x31f21a(0x1fd)](_0x3c349e,_0x392a83);},GitCommitJob_1;Object[a126_0x246562(0x1c6)](exports,a126_0x246562(0x20e),{'value':!![]}),exports[a126_0x246562(0x19f)]=void 0x0;const core_1=require(a126_0x246562(0x219)),fs_internal_1=require(a126_0x246562(0x201)),salesforce_logger_v3_service_1=require(a126_0x246562(0x1e0)),utils_1=require(a126_0x246562(0x1b6)),path_1=require(a126_0x246562(0x226)),typedi_1=__importStar(require(a126_0x246562(0x1af))),constants_1=require(a126_0x246562(0x20b)),salesforce_commits_manager_service_1=require(a126_0x246562(0x1a0)),git_utils_1=require(a126_0x246562(0x196)),mdapi_utils_1=require(a126_0x246562(0x199)),api_error_1=require(a126_0x246562(0x227)),salesforce_error_1=require(a126_0x246562(0x195)),git_commit_service_1=require(a126_0x246562(0x202)),flosum_commit_error_1=require(a126_0x246562(0x214)),bitbucket_api_service_1=require(a126_0x246562(0x181)),git_provider_1=require(a126_0x246562(0x1ea)),sfdx_utils_1=require(a126_0x246562(0x17e)),utils_2=require('../../parsers/utils'),git_internal_1=require(a126_0x246562(0x1df)),providers_tokens_1=require(a126_0x246562(0x1be)),connection_1=require(a126_0x246562(0x17d)),sf_logger_v3_types_1=require('../../salesforce/types/sf-logger-v3-types'),path_utils_1=require(a126_0x246562(0x211)),commit_to_flosum_completed_notification_1=require('../../notifications/commit-to-flosum-completed.notification'),commit_to_flosum_error_notification_1=require(a126_0x246562(0x22e));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x2ff0dc,_0x2ff65e){const _0x1c73a8=a126_0x246562;this[_0x1c73a8(0x1a3)]=_0x2ff0dc,this[_0x1c73a8(0x1d5)]=_0x2ff65e,this['MAX_COMPONENTS_PER_TICK']=+(process[_0x1c73a8(0x18d)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x1c73a8(0x17f)]=new core_1[(_0x1c73a8(0x1e9))](GitCommitJob_1[_0x1c73a8(0x210)]),this[_0x1c73a8(0x18c)]='',this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async[a126_0x246562(0x22c)](){const _0x63c51a=a126_0x246562,{repositoryGit:_0x271f05}=this[_0x63c51a(0x1f8)],_0xecd023=typedi_1[_0x63c51a(0x216)][_0x63c51a(0x1cc)](providers_tokens_1[_0x63c51a(0x1b8)][_0x63c51a(0x1f1)]);if(this[_0x63c51a(0x1f8)]['provider']===git_provider_1[_0x63c51a(0x186)]['Bitbucket']){const _0x4c428d=typedi_1['default']['get'](bitbucket_api_service_1['BitbucketApiService']);await _0x4c428d[_0x63c51a(0x180)]();}return _0x271f05[_0x63c51a(0x1a1)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x63c51a(0x1a8)])(_0x271f05)+_0x63c51a(0x224)+_0xecd023[_0x63c51a(0x21d)]()+'@');}async[a126_0x246562(0x1d3)](_0x4ac886,_0x343dc6,_0x53baaf,_0x57007b){const _0x326c5a=a126_0x246562;if(!this[_0x326c5a(0x212)][_0x326c5a(0x1a6)]){this['logger'][_0x326c5a(0x209)]('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_completed_notification_1[(_0x326c5a(0x1e8))]({'emails':_0x4ac886,'gitProvider':_0x343dc6,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x326c5a(0x1e8)][_0x326c5a(0x210)],'repositoryName':_0x53baaf,'branchName':_0x57007b})[_0x326c5a(0x1db)]();}async['errorNotification'](_0x50f4ad,_0x43fc43,_0x414f60,_0x274d08){const _0x170747=a126_0x246562;if(!this[_0x170747(0x212)][_0x170747(0x1a6)]){this['logger'][_0x170747(0x209)](_0x170747(0x205));return;}await new commit_to_flosum_error_notification_1[(_0x170747(0x1e2))]({'emails':_0x50f4ad,'gitProvider':_0x43fc43,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x170747(0x1e2)][_0x170747(0x210)],'repositoryName':_0x414f60,'branchName':_0x274d08})['execute']();}[a126_0x246562(0x1bd)](){const _0x23e22=a126_0x246562;this[_0x23e22(0x213)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a126_0x246562(0x18e)](){const _0x3ea5ec=a126_0x246562,_0x39cdc2=[...this[_0x3ea5ec(0x1f8)][_0x3ea5ec(0x190)]];this[_0x3ea5ec(0x1f8)][_0x3ea5ec(0x190)]=[];for(const _0x4ce550 of _0x39cdc2){this['gitCommitData']['fileNames']['push'](...await(0x0,utils_2['readFilesByFilename'])(_0x4ce550,this[_0x3ea5ec(0x1ed)][_0x3ea5ec(0x1e7)]));}}async[a126_0x246562(0x21c)](){const _0x3cbc71=a126_0x246562;if(this[_0x3cbc71(0x1f8)][_0x3cbc71(0x198)])return;const _0x570dd3=[];for(const _0x20bf73 of this['gitCommitData'][_0x3cbc71(0x1a2)]){const _0x4af9e6=await this['gitUtils']['describeCommit'](_0x20bf73['id']);_0x20bf73['username']=_0x4af9e6[_0x3cbc71(0x1ae)],_0x20bf73[_0x3cbc71(0x1dd)]=_0x4af9e6[_0x3cbc71(0x1dd)],_0x20bf73['files']=_0x4af9e6['changes'],_0x20bf73[_0x3cbc71(0x1ec)]=_0x4af9e6['email'];if(_0x20bf73[_0x3cbc71(0x1ec)]===constants_1[_0x3cbc71(0x228)])throw new flosum_commit_error_1[(_0x3cbc71(0x1ee))]();_0x570dd3[_0x3cbc71(0x22f)](...Object[_0x3cbc71(0x22d)](_0x20bf73['files'])['flat']());}this[_0x3cbc71(0x1f8)][_0x3cbc71(0x190)]=[...new Set(path_utils_1[_0x3cbc71(0x1cb)][_0x3cbc71(0x19b)](this[_0x3cbc71(0x1a3)]['recordType'],_0x570dd3,![]))];}async[a126_0x246562(0x1d0)](_0x21335a,_0x3ab528,_0x2a1487){const _0x2993ca=a126_0x246562,_0x512da5=_0x2a1487['reduce']((_0xee993b,_0x322269)=>{const _0x3d3e1e=a126_0x2ee6;return _0xee993b[_0x3d3e1e(0x21a)][_0x3d3e1e(0x22f)](..._0x322269['inserted']),_0xee993b['modified'][_0x3d3e1e(0x22f)](..._0x322269['modified']),_0xee993b[_0x3d3e1e(0x1c2)]['push'](..._0x322269[_0x3d3e1e(0x1c2)]),_0xee993b;},{'inserted':[],'modified':[],'removed':[]}),_0x35605d=new salesforce_commits_manager_service_1[(_0x2993ca(0x1b0))]({'recordTypes':this[_0x2993ca(0x1a3)]['getRecordTypes'](),'branchId':this[_0x2993ca(0x1a3)]['getBranchId'](),'repositoryId':this[_0x2993ca(0x1a3)]['getRepositoryId'](),'logger':this['sfLogger'],'commitId':this[_0x2993ca(0x18c)]});await _0x35605d[_0x2993ca(0x1e5)]([{'author':_0x21335a,'message':_0x3ab528,'inserted':_0x512da5[_0x2993ca(0x21a)],'modified':_0x512da5['modified'],'removed':_0x512da5[_0x2993ca(0x1c2)]}]);}async['handleCommit'](_0x352879,_0x4d4b4a){const _0x33d535=a126_0x246562;await this['sfLogger'][_0x33d535(0x20f)](this[_0x33d535(0x21f)]+_0x33d535(0x1e6))[_0x33d535(0x203)](),await this[_0x33d535(0x1a3)][_0x33d535(0x22b)](_0x4d4b4a);const {added:_0x475cda,modified:_0x4f344e,removed:_0x5448aa}=_0x352879['files'];_0x4d4b4a&&_0x4f344e[_0x33d535(0x22f)](..._0x5448aa[_0x33d535(0x18b)](0x0));const _0x364ce1=path_utils_1[_0x33d535(0x1cb)][_0x33d535(0x19b)](this['gitCommit'][_0x33d535(0x1b2)],[..._0x475cda,..._0x4f344e,..._0x5448aa],_0x4d4b4a&&!this['gitCommitData'][_0x33d535(0x198)]),_0x39edb5=(0x0,utils_2[_0x33d535(0x1f3)])(_0x364ce1);let _0x424908=0x0;const _0x4485c0=[];(_0x475cda[_0x33d535(0x188)]||_0x4f344e[_0x33d535(0x188)])&&this[_0x33d535(0x1a3)][_0x33d535(0x1fb)]()&&(this[_0x33d535(0x18c)]=await this[_0x33d535(0x1a3)]['createCommit'](_0x352879[_0x33d535(0x1dd)]));const _0x19ef13=_0x39edb5[_0x33d535(0x188)];let _0x1dbd4e=0x0;while(_0x39edb5['length']){const _0x1c5606=_0x39edb5[_0x33d535(0x182)](),_0x3785f1=await this[_0x33d535(0x1a3)]['proceedFile'](_0x1c5606,this['mdapiUtils'][_0x33d535(0x1e7)],_0x4d4b4a&&!this[_0x33d535(0x1f8)]['force']);_0x424908+=_0x3785f1['inserted'][_0x33d535(0x188)]+_0x3785f1['removed'][_0x33d535(0x188)]+_0x3785f1[_0x33d535(0x1f6)]['length'],this['stats'][_0x33d535(0x1ca)]+=_0x3785f1[_0x33d535(0x21a)][_0x33d535(0x188)],this[_0x33d535(0x213)]['modified']+=_0x3785f1[_0x33d535(0x1f6)]['length'],this[_0x33d535(0x213)][_0x33d535(0x1c2)]+=_0x3785f1['removed'][_0x33d535(0x188)],_0x1dbd4e++,_0x1dbd4e%0x64===0x0&&this[_0x33d535(0x17f)]['log'](_0x33d535(0x194),_0x1dbd4e,_0x19ef13,_0x424908),_0x4485c0[_0x33d535(0x22f)](_0x3785f1),_0x424908>this[_0x33d535(0x1e4)]&&(await this['sendComponents'](_0x352879[_0x33d535(0x20a)],_0x352879[_0x33d535(0x1dd)],_0x4485c0),await this['sfLogger'][_0x33d535(0x20f)](this[_0x33d535(0x21f)]+'\x20Processed\x20'+_0x424908+_0x33d535(0x1d7))[_0x33d535(0x203)](),_0x424908=0x0,_0x4485c0[_0x33d535(0x18b)](0x0));}_0x4485c0[_0x33d535(0x188)]&&(await this[_0x33d535(0x1d0)](_0x352879[_0x33d535(0x20a)],_0x352879['message'],_0x4485c0),await this['sfLogger'][_0x33d535(0x20f)](this[_0x33d535(0x21f)]+_0x33d535(0x1b5)+_0x424908+_0x33d535(0x1d7))[_0x33d535(0x203)]());}async[a126_0x246562(0x1e5)](_0x30327b){const _0x4b9ca6=a126_0x246562,_0x5af960=[...this[_0x4b9ca6(0x1f8)]['commits']],_0x4e5b14=_0x5af960['length'];let _0x97bc19=0x0;while(_0x5af960[_0x4b9ca6(0x188)]){const _0x1485f9=_0x5af960[_0x4b9ca6(0x182)]();!this['gitCommitData'][_0x4b9ca6(0x198)]&&(this[_0x4b9ca6(0x1a3)][_0x4b9ca6(0x1fb)]()?(await this[_0x4b9ca6(0x197)][_0x4b9ca6(0x1f5)](_0x1485f9['id']),await this[_0x4b9ca6(0x1ed)]['prepareMdapi'](this[_0x4b9ca6(0x197)][_0x4b9ca6(0x1e7)])):(await this[_0x4b9ca6(0x197)][_0x4b9ca6(0x1f5)](this[_0x4b9ca6(0x19d)]),await this[_0x4b9ca6(0x1ed)]['prepareMdapi'](this['gitUtils'][_0x4b9ca6(0x1e7)]))),await this[_0x4b9ca6(0x208)](_0x1485f9,_0x30327b),await this['mdapiUtils'][_0x4b9ca6(0x1f9)](),_0x97bc19+=0x1,await this[_0x4b9ca6(0x189)]['log'](this[_0x4b9ca6(0x21f)]+_0x4b9ca6(0x1c3)),await this['sfLogger'][_0x4b9ca6(0x20f)](this[_0x4b9ca6(0x21f)]+_0x4b9ca6(0x1ba)+this[_0x4b9ca6(0x213)][_0x4b9ca6(0x1ca)]+'\x20components'),await this['sfLogger'][_0x4b9ca6(0x20f)](this['prefix']+_0x4b9ca6(0x20c)+this[_0x4b9ca6(0x213)]['modified']+_0x4b9ca6(0x1f0)),await this[_0x4b9ca6(0x189)][_0x4b9ca6(0x20f)](this['prefix']+_0x4b9ca6(0x1c1)+this['stats'][_0x4b9ca6(0x1c2)]+_0x4b9ca6(0x1f0)),await this[_0x4b9ca6(0x189)][_0x4b9ca6(0x20f)](this[_0x4b9ca6(0x21f)]+_0x4b9ca6(0x22a)+_0x97bc19+'/'+_0x4e5b14+'\x20commits.')[_0x4b9ca6(0x203)](),this[_0x4b9ca6(0x1bd)]();}}async[a126_0x246562(0x1c7)](){const _0x58ba2d=a126_0x246562;this[_0x58ba2d(0x197)]&&await this['gitUtils'][_0x58ba2d(0x1f9)]()[_0x58ba2d(0x1da)](()=>void 0x0),this['mdapiUtils']&&await this[_0x58ba2d(0x1ed)]['removeDir']()[_0x58ba2d(0x1da)](()=>void 0x0);}async[a126_0x246562(0x1b3)](_0x3aff8b){const _0x40f27f=a126_0x246562;this[_0x40f27f(0x1f8)]=_0x3aff8b,this['gitCommit']['setCommitDto'](this[_0x40f27f(0x1f8)]),this[_0x40f27f(0x225)]=typedi_1[_0x40f27f(0x216)][_0x40f27f(0x1cc)](providers_tokens_1[_0x40f27f(0x1b8)][_0x40f27f(0x225)]),this[_0x40f27f(0x212)]=typedi_1[_0x40f27f(0x216)]['get'](providers_tokens_1[_0x40f27f(0x1b8)]['config']),this[_0x40f27f(0x189)]=typedi_1[_0x40f27f(0x216)][_0x40f27f(0x1cc)](providers_tokens_1[_0x40f27f(0x1b8)][_0x40f27f(0x17f)]),this['prefix']='[GIT\x20->\x20FLOSUM]\x20[Repository:\x20'+_0x3aff8b[_0x40f27f(0x1a5)]+_0x40f27f(0x215)+_0x3aff8b['branch']+']\x20['+GitCommitJob_1[_0x40f27f(0x210)]+']',this[_0x40f27f(0x197)]=new git_utils_1['GitUtils'](await this['getRemote']()),this[_0x40f27f(0x1ed)]=new mdapi_utils_1[(_0x40f27f(0x1a7))](),this[_0x40f27f(0x189)][_0x40f27f(0x20f)](this['prefix']+_0x40f27f(0x220));try{this[_0x40f27f(0x189)][_0x40f27f(0x20f)](this['prefix']+_0x40f27f(0x1bf)),await this['gitCommit'][_0x40f27f(0x206)](),await this[_0x40f27f(0x1a3)][_0x40f27f(0x19e)](_0x40f27f(0x18f)),this[_0x40f27f(0x189)][_0x40f27f(0x20f)](this['prefix']+_0x40f27f(0x218)),this['lastCommitHash']=await git_internal_1[_0x40f27f(0x1b4)][_0x40f27f(0x193)](await this[_0x40f27f(0x22c)](),this[_0x40f27f(0x1f8)][_0x40f27f(0x1d8)]),this[_0x40f27f(0x17f)]['log'](_0x40f27f(0x229),this[_0x40f27f(0x19d)]);const _0x350abe=await this[_0x40f27f(0x1a3)]['checkSyncStatus'](this['lastCommitHash']);if(_0x350abe){this[_0x40f27f(0x189)][_0x40f27f(0x20f)]('Branch\x20synchronized.\x20Skip.'),await this[_0x40f27f(0x1a3)][_0x40f27f(0x19e)](_0x40f27f(0x1f2));return;}this['sfLogger'][_0x40f27f(0x20f)](this[_0x40f27f(0x21f)]+'\x20Cloning\x20git\x20repository\x20from\x20'+this[_0x40f27f(0x1f8)][_0x40f27f(0x204)]+'.'),await this['gitUtils'][_0x40f27f(0x1b7)](this['gitCommitData'][_0x40f27f(0x1d8)],this['gitCommitData'][_0x40f27f(0x1a5)]),this[_0x40f27f(0x189)][_0x40f27f(0x20f)](this[_0x40f27f(0x21f)]+_0x40f27f(0x200));const _0x5af7d0=await sfdx_utils_1[_0x40f27f(0x19c)][_0x40f27f(0x1cd)](this[_0x40f27f(0x197)][_0x40f27f(0x1e7)]);await this[_0x40f27f(0x21c)]();!this['sfLogger'][_0x40f27f(0x187)]()&&this['sfLogger'][_0x40f27f(0x1c4)](await salesforce_logger_v3_service_1[_0x40f27f(0x1f7)][_0x40f27f(0x217)](sf_logger_v3_types_1[_0x40f27f(0x1e3)][_0x40f27f(0x1d9)]));await this[_0x40f27f(0x189)][_0x40f27f(0x203)]();if(_0x3aff8b[_0x40f27f(0x198)]){await this[_0x40f27f(0x1ed)][_0x40f27f(0x1fe)](this[_0x40f27f(0x197)][_0x40f27f(0x1e7)]),await this[_0x40f27f(0x189)]['log'](this[_0x40f27f(0x21f)]+'\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository')['send']();const _0x426ea8=(await fs_internal_1['FS'][_0x40f27f(0x191)](this['mdapiUtils'][_0x40f27f(0x1e7)],!![]))[_0x40f27f(0x1b9)](_0x14e195=>(0x0,path_1['relative'])(this[_0x40f27f(0x1ed)][_0x40f27f(0x1e7)],_0x14e195));this[_0x40f27f(0x189)][_0x40f27f(0x20f)](this['prefix']+_0x40f27f(0x223)+_0x426ea8[_0x40f27f(0x188)]+_0x40f27f(0x1c0)),this[_0x40f27f(0x1f8)]['fileNames']=[],this[_0x40f27f(0x1f8)][_0x40f27f(0x1a2)]=[{'files':{'modified':_0x426ea8,'added':[],'removed':[]},'id':await this[_0x40f27f(0x197)][_0x40f27f(0x1de)](),'message':'sync\x20components','username':constants_1[_0x40f27f(0x17b)]}];}await this[_0x40f27f(0x1a3)][_0x40f27f(0x192)]({[this[_0x40f27f(0x1f8)][_0x40f27f(0x204)]]:{'lastCommit':this[_0x40f27f(0x19d)]}}),await this[_0x40f27f(0x189)]['log'](this[_0x40f27f(0x21f)]+_0x40f27f(0x1bb)+(_0x5af7d0?'YES':'NO')+_0x40f27f(0x1bc))[_0x40f27f(0x203)](),await this['proceedCommits'](_0x5af7d0),await this['sfLogger'][_0x40f27f(0x20f)](this[_0x40f27f(0x21f)]+'\x20Job\x20done.')[_0x40f27f(0x203)](),await this['gitCommit'][_0x40f27f(0x19e)](_0x40f27f(0x1f2)),await this[_0x40f27f(0x1d3)]([_0x3aff8b[_0x40f27f(0x1ec)]],this[_0x40f27f(0x212)]['gitProvider'],_0x3aff8b[_0x40f27f(0x1a5)],_0x3aff8b[_0x40f27f(0x1d8)]);}catch(_0x522cbb){await this[_0x40f27f(0x1c7)]();if(_0x522cbb instanceof flosum_commit_error_1[_0x40f27f(0x1ee)])await this[_0x40f27f(0x1a3)][_0x40f27f(0x19e)](_0x40f27f(0x1f2))[_0x40f27f(0x1da)](()=>void 0x0),this[_0x40f27f(0x17f)]['log'](this['prefix']+_0x40f27f(0x1fc));else{await this[_0x40f27f(0x17f)][_0x40f27f(0x185)](this[_0x40f27f(0x21f)]+_0x40f27f(0x1d6)+(_0x522cbb instanceof api_error_1[_0x40f27f(0x1d1)]||_0x522cbb instanceof salesforce_error_1['SalesforceError']?_0x522cbb['toString']():_0x522cbb)),await this['gitCommit'][_0x40f27f(0x192)]({}),await this[_0x40f27f(0x1a3)][_0x40f27f(0x19e)](_0x40f27f(0x1ab))[_0x40f27f(0x1da)](()=>void 0x0),await this[_0x40f27f(0x17a)]([_0x3aff8b['email']],this['config'][_0x40f27f(0x179)],_0x3aff8b[_0x40f27f(0x1a5)],_0x3aff8b[_0x40f27f(0x1d8)]);throw _0x522cbb;}}finally{await this[_0x40f27f(0x1c7)](),await this['sfLogger'][_0x40f27f(0x203)]()['catch'](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a126_0x246562(0x221),[git_commit_service_1[a126_0x246562(0x1ce)],connection_1['ProvidersFactory']])],GitCommitJob),exports[a126_0x246562(0x19f)]=GitCommitJob;