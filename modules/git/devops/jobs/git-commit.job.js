function a127_0x46c7(_0x11d250,_0x4beae4){const _0x29c9c2=a127_0x9ec8();return a127_0x46c7=function(_0x3ba19b,_0x15032c){_0x3ba19b=_0x3ba19b-0x118;let _0x9ec8ff=_0x29c9c2[_0x3ba19b];return _0x9ec8ff;},a127_0x46c7(_0x11d250,_0x4beae4);}const a127_0x5d7486=a127_0x46c7;(function(_0x41fde5,_0x2b5069){const _0x368ffc=a127_0x46c7,_0x446020=_0x41fde5();while(!![]){try{const _0x2a7a65=-parseInt(_0x368ffc(0x11b))/0x1+-parseInt(_0x368ffc(0x1bc))/0x2*(-parseInt(_0x368ffc(0x1b6))/0x3)+parseInt(_0x368ffc(0x12d))/0x4*(-parseInt(_0x368ffc(0x174))/0x5)+parseInt(_0x368ffc(0x162))/0x6+-parseInt(_0x368ffc(0x19e))/0x7+parseInt(_0x368ffc(0x1bf))/0x8*(parseInt(_0x368ffc(0x120))/0x9)+-parseInt(_0x368ffc(0x15b))/0xa*(-parseInt(_0x368ffc(0x18a))/0xb);if(_0x2a7a65===_0x2b5069)break;else _0x446020['push'](_0x446020['shift']());}catch(_0x11bcee){_0x446020['push'](_0x446020['shift']());}}}(a127_0x9ec8,0x70f91));const a127_0x15032c=(function(){let _0x9c0e02=!![];return function(_0x35adf5,_0xbf69c9){const _0x2685e8=_0x9c0e02?function(){const _0x3f8af7=a127_0x46c7;if(_0xbf69c9){const _0x5cda20=_0xbf69c9[_0x3f8af7(0x134)](_0x35adf5,arguments);return _0xbf69c9=null,_0x5cda20;}}:function(){};return _0x9c0e02=![],_0x2685e8;};}()),a127_0x3ba19b=a127_0x15032c(this,function(){const _0x265bba=a127_0x46c7;return a127_0x3ba19b['toString']()[_0x265bba(0x176)](_0x265bba(0x13c))[_0x265bba(0x156)]()[_0x265bba(0x198)](a127_0x3ba19b)['search'](_0x265bba(0x13c));});a127_0x3ba19b();'use strict';var __createBinding=this&&this[a127_0x5d7486(0x169)]||(Object[a127_0x5d7486(0x167)]?function(_0x3e4a3e,_0x18ed86,_0x464c29,_0x288cba){const _0x243931=a127_0x5d7486;if(_0x288cba===undefined)_0x288cba=_0x464c29;var _0x2bbd53=Object['getOwnPropertyDescriptor'](_0x18ed86,_0x464c29);(!_0x2bbd53||(_0x243931(0x1cc)in _0x2bbd53?!_0x18ed86[_0x243931(0x140)]:_0x2bbd53[_0x243931(0x139)]||_0x2bbd53[_0x243931(0x1c3)]))&&(_0x2bbd53={'enumerable':!![],'get':function(){return _0x18ed86[_0x464c29];}}),Object[_0x243931(0x13b)](_0x3e4a3e,_0x288cba,_0x2bbd53);}:function(_0x4cf5bc,_0x521885,_0x1bc6dd,_0x5768f7){if(_0x5768f7===undefined)_0x5768f7=_0x1bc6dd;_0x4cf5bc[_0x5768f7]=_0x521885[_0x1bc6dd];}),__setModuleDefault=this&&this[a127_0x5d7486(0x135)]||(Object[a127_0x5d7486(0x167)]?function(_0x4a8900,_0xc10e8a){const _0xdfbaa0=a127_0x5d7486;Object[_0xdfbaa0(0x13b)](_0x4a8900,_0xdfbaa0(0x179),{'enumerable':!![],'value':_0xc10e8a});}:function(_0x256044,_0x446c09){const _0xcbdaa3=a127_0x5d7486;_0x256044[_0xcbdaa3(0x179)]=_0x446c09;}),__decorate=this&&this[a127_0x5d7486(0x19a)]||function(_0x2783cb,_0xc978a2,_0x44d185,_0x54e018){const _0x44c68d=a127_0x5d7486;var _0x75a379=arguments[_0x44c68d(0x1d0)],_0x3358ef=_0x75a379<0x3?_0xc978a2:_0x54e018===null?_0x54e018=Object[_0x44c68d(0x180)](_0xc978a2,_0x44d185):_0x54e018,_0x3cbcca;if(typeof Reflect===_0x44c68d(0x16e)&&typeof Reflect[_0x44c68d(0x12f)]===_0x44c68d(0x186))_0x3358ef=Reflect[_0x44c68d(0x12f)](_0x2783cb,_0xc978a2,_0x44d185,_0x54e018);else{for(var _0x3a84e3=_0x2783cb[_0x44c68d(0x1d0)]-0x1;_0x3a84e3>=0x0;_0x3a84e3--)if(_0x3cbcca=_0x2783cb[_0x3a84e3])_0x3358ef=(_0x75a379<0x3?_0x3cbcca(_0x3358ef):_0x75a379>0x3?_0x3cbcca(_0xc978a2,_0x44d185,_0x3358ef):_0x3cbcca(_0xc978a2,_0x44d185))||_0x3358ef;}return _0x75a379>0x3&&_0x3358ef&&Object['defineProperty'](_0xc978a2,_0x44d185,_0x3358ef),_0x3358ef;},__importStar=this&&this[a127_0x5d7486(0x1bb)]||function(_0x441812){const _0x468cc1=a127_0x5d7486;if(_0x441812&&_0x441812[_0x468cc1(0x140)])return _0x441812;var _0x91f621={};if(_0x441812!=null){for(var _0x49b800 in _0x441812)if(_0x49b800!=='default'&&Object[_0x468cc1(0x144)]['hasOwnProperty'][_0x468cc1(0x178)](_0x441812,_0x49b800))__createBinding(_0x91f621,_0x441812,_0x49b800);}return __setModuleDefault(_0x91f621,_0x441812),_0x91f621;},__metadata=this&&this[a127_0x5d7486(0x137)]||function(_0x56bcec,_0x48f4ae){const _0xa2f0e7=a127_0x5d7486;if(typeof Reflect===_0xa2f0e7(0x16e)&&typeof Reflect['metadata']===_0xa2f0e7(0x186))return Reflect['metadata'](_0x56bcec,_0x48f4ae);},GitCommitJob_1;Object[a127_0x5d7486(0x13b)](exports,a127_0x5d7486(0x140),{'value':!![]}),exports[a127_0x5d7486(0x1b1)]=void 0x0;const core_1=require(a127_0x5d7486(0x122)),fs_internal_1=require(a127_0x5d7486(0x18c)),salesforce_logger_v3_service_1=require(a127_0x5d7486(0x182)),utils_1=require('../../../shared/utils'),path_1=require(a127_0x5d7486(0x17f)),typedi_1=__importStar(require(a127_0x5d7486(0x17e))),constants_1=require(a127_0x5d7486(0x1b2)),salesforce_commits_manager_service_1=require(a127_0x5d7486(0x1d3)),git_utils_1=require(a127_0x5d7486(0x1af)),mdapi_utils_1=require(a127_0x5d7486(0x1d4)),api_error_1=require(a127_0x5d7486(0x147)),salesforce_error_1=require(a127_0x5d7486(0x132)),git_commit_service_1=require(a127_0x5d7486(0x19c)),flosum_commit_error_1=require(a127_0x5d7486(0x17a)),bitbucket_api_service_1=require(a127_0x5d7486(0x189)),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require(a127_0x5d7486(0x1a5)),utils_2=require('../../parsers/utils'),git_internal_1=require(a127_0x5d7486(0x183)),providers_tokens_1=require(a127_0x5d7486(0x130)),connection_1=require(a127_0x5d7486(0x190)),sf_logger_v3_types_1=require(a127_0x5d7486(0x131)),path_utils_1=require(a127_0x5d7486(0x19d)),commit_to_flosum_completed_notification_1=require(a127_0x5d7486(0x1ac)),commit_to_flosum_error_notification_1=require(a127_0x5d7486(0x119));function a127_0x9ec8(){const _0x250c51=['prototype','clone','getProtocol','../../../../core/errors/api.error',']\x20[Branch:\x20','MAX_COMPONENTS_PER_TICK','repository','\x20components','inserted','logger','getRecordTypes','Completed','handleCommit','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','modified','://','\x20files\x20before\x20sync.','catch','toString','isLoggedIn','username','sfLogger','fileNames','10EMwWBY','getCurrentHash','\x20Fetch\x20remote\x20branch\x20hash.','gitProvider','send','readFilesByFilename','readDir','1553502wHPIoa','checkoutTo','SFDX','getGitShellAuthorizationString','convertToCleanPaths','create','fetchRepositoryOrBranchData','__createBinding','setLoggerId','commits','Git','branch','object','DEFAULT_GIT_USER_NAME','ProvidersFactory','\x20commits.','info','\x20Commit\x20Summary','6205npTsBE','isEmailNotificationsEnabled','search','Service','call','default','../errors/flosum-commit.error','\x20Added\x20','\x20[SFDX:\x20','shift','typedi','path','getOwnPropertyDescriptor','CommitToFlosumCompletedNotification','../../salesforce/services/salesforce-logger-v3.service','../../internal/git.internal','message','gitCommitData','function','credentials','completeNotification','../../providers/api/bitbucket-api.service','7222435raBPgl','describeCommit','../../internal/fs.internal','prepareGitChangedPaths','getRemoteHash','getLoggerId','../utils/connection','Email\x20notifications\x20are\x20disabled.','changes','execute','\x20Proceeded\x20','\x20Job\x20done.','env','prefix','constructor','map','__decorate','push','../services/git-commit.service','../utils/path.utils','5269334EfOYYC','createLoggerId','commitId','commit','YES','GitProvider','prepareMdapi','../../salesforce/utils/sfdx.utils','getBranchId','GitUtils','replace','CommitToFlosumErrorNotification','SalesforceCommitsManager','\x20Processed\x20','../../notifications/commit-to-flosum-completed.notification','relative','PathUtils','../utils/git.utils','In\x20Progress','GitCommitJob','../../../../constants','Error','SalesforceError','gitCommit','57KTvWjj','updateRemoteState','email','force','ApiError','__importStar','80386uGhpRQ','proceedCommits','flat','275592BkKUxt','updateFileNamesForSFDXProject','lastCommitHash','files','configurable',']\x20[','getRepositoryId','BitbucketApiService','log','gitUtils','fetchCommits','sendComponents','added','get','fetchComponentsMetadata','stats','errorNotification','length','name','removed','../../salesforce/services/salesforce-commits-manager.service','../utils/mdapi.utils','values','proceedFile','../../notifications/commit-to-flosum-error.notification','run','419338bCYPlO','Tokens','updateStatus','\x20components.','\x20Removed\x20','27zPKImv','sync\x20components','../../../../core','splice','GitCommitService',']\x20Start\x20proceeding\x20git\x20commits.\x20','Branch\x20synchronized.\x20Skip.','FlosumCommitError','error','checkSyncStatus','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','provider','gitApiService','476WFGaYh','getRemote','decorate','../../providers/providers.tokens','../../salesforce/types/sf-logger-v3-types','../../salesforce/errors/salesforce.error','providersFactory','apply','__setModuleDefault','author','__metadata','repositoryGit','writable','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','defineProperty','(((.+)+)+)+$','reduce','config','mdapiUtils','__esModule','removeDir','MDApiUtils','dir'];a127_0x9ec8=function(){return _0x250c51;};return a127_0x9ec8();}let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x2c0cca,_0x2b2655){const _0x5e75c9=a127_0x5d7486;this[_0x5e75c9(0x1b5)]=_0x2c0cca,this[_0x5e75c9(0x133)]=_0x2b2655,this[_0x5e75c9(0x149)]=+(process[_0x5e75c9(0x196)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x5e75c9(0x14d)]=new core_1['Logger'](GitCommitJob_1[_0x5e75c9(0x1d1)]),this['commitId']='',this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x5d7486(0x12e)](){const _0x2a913d=a127_0x5d7486,{repositoryGit:_0x6435e1}=this[_0x2a913d(0x185)],_0x4e9c9c=typedi_1[_0x2a913d(0x179)][_0x2a913d(0x1cc)](providers_tokens_1[_0x2a913d(0x11c)][_0x2a913d(0x187)]);if(this[_0x2a913d(0x185)][_0x2a913d(0x12b)]===git_provider_1[_0x2a913d(0x1a3)]['Bitbucket']){const _0x15a4f9=typedi_1[_0x2a913d(0x179)]['get'](bitbucket_api_service_1[_0x2a913d(0x1c6)]);await _0x15a4f9[_0x2a913d(0x157)]();}return _0x6435e1[_0x2a913d(0x1a8)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2a913d(0x146)])(_0x6435e1)+_0x2a913d(0x153)+_0x4e9c9c[_0x2a913d(0x165)]()+'@');}async[a127_0x5d7486(0x188)](_0xc8b935,_0xd5bc70,_0x474012,_0x10a989){const _0x1f224c=a127_0x5d7486;if(!this[_0x1f224c(0x13e)]['isEmailNotificationsEnabled']){this[_0x1f224c(0x14d)]['info'](_0x1f224c(0x191));return;}await new commit_to_flosum_completed_notification_1[(_0x1f224c(0x181))]({'emails':_0xc8b935,'gitProvider':_0xd5bc70,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x1f224c(0x181)]['name'],'repositoryName':_0x474012,'branchName':_0x10a989})['execute']();}async[a127_0x5d7486(0x1cf)](_0x656cb2,_0x403d89,_0x11deb9,_0xc908f4){const _0x42d45a=a127_0x5d7486;if(!this['config'][_0x42d45a(0x175)]){this[_0x42d45a(0x14d)][_0x42d45a(0x172)](_0x42d45a(0x191));return;}await new commit_to_flosum_error_notification_1[(_0x42d45a(0x1a9))]({'emails':_0x656cb2,'gitProvider':_0x403d89,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1['CommitToFlosumErrorNotification'][_0x42d45a(0x1d1)],'repositoryName':_0x11deb9,'branchName':_0xc908f4})[_0x42d45a(0x193)]();}['resetStats'](){const _0x477a48=a127_0x5d7486;this[_0x477a48(0x1ce)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x5d7486(0x1c0)](){const _0x385696=a127_0x5d7486,_0x5c986c=[...this['gitCommitData'][_0x385696(0x15a)]];this[_0x385696(0x185)][_0x385696(0x15a)]=[];for(const _0x2dc763 of _0x5c986c){this[_0x385696(0x185)][_0x385696(0x15a)][_0x385696(0x19b)](...await(0x0,utils_2[_0x385696(0x160)])(_0x2dc763,this[_0x385696(0x13f)][_0x385696(0x143)]));}}async[a127_0x5d7486(0x1c9)](){const _0x19174a=a127_0x5d7486;if(this[_0x19174a(0x185)][_0x19174a(0x1b9)])return;const _0x1c7e90=[];for(const _0x17dffa of this[_0x19174a(0x185)]['commits']){const _0x547eea=await this[_0x19174a(0x1c8)][_0x19174a(0x18b)](_0x17dffa['id']);_0x17dffa[_0x19174a(0x158)]=_0x547eea[_0x19174a(0x136)],_0x17dffa[_0x19174a(0x184)]=_0x547eea[_0x19174a(0x184)],_0x17dffa[_0x19174a(0x1c2)]=_0x547eea[_0x19174a(0x192)],_0x17dffa['email']=_0x547eea['email'];if(_0x17dffa[_0x19174a(0x1b8)]===constants_1['DEFAULT_GIT_USER_EMAIL'])throw new flosum_commit_error_1[(_0x19174a(0x127))]();_0x1c7e90[_0x19174a(0x19b)](...Object[_0x19174a(0x1d5)](_0x17dffa[_0x19174a(0x1c2)])[_0x19174a(0x1be)]());}this['gitCommitData'][_0x19174a(0x15a)]=[...new Set(path_utils_1[_0x19174a(0x1ae)][_0x19174a(0x18d)](this['gitCommit']['recordType'],_0x1c7e90,![]))];}async['sendComponents'](_0x31b7b7,_0x21983c,_0x5aabb6){const _0xb4cac4=a127_0x5d7486,_0x5a7c4e=_0x5aabb6[_0xb4cac4(0x13d)]((_0x5e53ec,_0x3edf46)=>{const _0x534b78=_0xb4cac4;return _0x5e53ec['inserted'][_0x534b78(0x19b)](..._0x3edf46[_0x534b78(0x14c)]),_0x5e53ec[_0x534b78(0x152)]['push'](..._0x3edf46[_0x534b78(0x152)]),_0x5e53ec['removed'][_0x534b78(0x19b)](..._0x3edf46[_0x534b78(0x1d2)]),_0x5e53ec;},{'inserted':[],'modified':[],'removed':[]}),_0x586fd6=new salesforce_commits_manager_service_1[(_0xb4cac4(0x1aa))]({'recordTypes':this[_0xb4cac4(0x1b5)][_0xb4cac4(0x14e)](),'branchId':this[_0xb4cac4(0x1b5)][_0xb4cac4(0x1a6)](),'repositoryId':this[_0xb4cac4(0x1b5)][_0xb4cac4(0x1c5)](),'logger':this['sfLogger'],'commitId':this[_0xb4cac4(0x1a0)]});await _0x586fd6[_0xb4cac4(0x1bd)]([{'author':_0x31b7b7,'message':_0x21983c,'inserted':_0x5a7c4e[_0xb4cac4(0x14c)],'modified':_0x5a7c4e['modified'],'removed':_0x5a7c4e[_0xb4cac4(0x1d2)]}]);}async[a127_0x5d7486(0x150)](_0x1f26f7,_0x92f142){const _0x1096da=a127_0x5d7486;await this['sfLogger'][_0x1096da(0x1c7)](this[_0x1096da(0x197)]+'\x20Download\x20components\x20metadata\x20from\x20Flosum.')[_0x1096da(0x15f)](),await this['gitCommit'][_0x1096da(0x1cd)](_0x92f142);const {added:_0x3ab474,modified:_0x2b372b,removed:_0xa879e7}=_0x1f26f7[_0x1096da(0x1c2)];_0x92f142&&_0x2b372b[_0x1096da(0x19b)](..._0xa879e7[_0x1096da(0x123)](0x0));const _0x3f9df5=path_utils_1[_0x1096da(0x1ae)][_0x1096da(0x18d)](this[_0x1096da(0x1b5)]['recordType'],[..._0x3ab474,..._0x2b372b,..._0xa879e7],_0x92f142&&!this[_0x1096da(0x185)][_0x1096da(0x1b9)]),_0x131f95=(0x0,utils_2[_0x1096da(0x166)])(_0x3f9df5);let _0x4da08f=0x0;const _0x5b37d7=[];(_0x3ab474[_0x1096da(0x1d0)]||_0x2b372b[_0x1096da(0x1d0)])&&this[_0x1096da(0x1b5)][_0x1096da(0x1c5)]()&&(this[_0x1096da(0x1a0)]=await this[_0x1096da(0x1b5)]['createCommit'](_0x1f26f7[_0x1096da(0x184)]));const _0x1ca484=_0x131f95[_0x1096da(0x1d0)];let _0x2cebb6=0x0;while(_0x131f95['length']){const _0x404066=_0x131f95[_0x1096da(0x17d)](),_0x6b6234=await this[_0x1096da(0x1b5)][_0x1096da(0x118)](_0x404066,this[_0x1096da(0x13f)][_0x1096da(0x143)],_0x92f142&&!this[_0x1096da(0x185)]['force']);_0x4da08f+=_0x6b6234[_0x1096da(0x14c)][_0x1096da(0x1d0)]+_0x6b6234[_0x1096da(0x1d2)][_0x1096da(0x1d0)]+_0x6b6234[_0x1096da(0x152)][_0x1096da(0x1d0)],this[_0x1096da(0x1ce)][_0x1096da(0x1cb)]+=_0x6b6234['inserted'][_0x1096da(0x1d0)],this[_0x1096da(0x1ce)][_0x1096da(0x152)]+=_0x6b6234['modified'][_0x1096da(0x1d0)],this[_0x1096da(0x1ce)][_0x1096da(0x1d2)]+=_0x6b6234[_0x1096da(0x1d2)][_0x1096da(0x1d0)],_0x2cebb6++,_0x2cebb6%0x64===0x0&&this[_0x1096da(0x14d)]['log']('proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',_0x2cebb6,_0x1ca484,_0x4da08f),_0x5b37d7[_0x1096da(0x19b)](_0x6b6234),_0x4da08f>this[_0x1096da(0x149)]&&(await this[_0x1096da(0x1ca)](_0x1f26f7[_0x1096da(0x158)],_0x1f26f7[_0x1096da(0x184)],_0x5b37d7),await this[_0x1096da(0x159)]['log'](this[_0x1096da(0x197)]+_0x1096da(0x1ab)+_0x4da08f+_0x1096da(0x11e))[_0x1096da(0x15f)](),_0x4da08f=0x0,_0x5b37d7[_0x1096da(0x123)](0x0));}_0x5b37d7[_0x1096da(0x1d0)]&&(await this['sendComponents'](_0x1f26f7[_0x1096da(0x158)],_0x1f26f7[_0x1096da(0x184)],_0x5b37d7),await this[_0x1096da(0x159)][_0x1096da(0x1c7)](this[_0x1096da(0x197)]+_0x1096da(0x1ab)+_0x4da08f+_0x1096da(0x11e))[_0x1096da(0x15f)]());}async[a127_0x5d7486(0x1bd)](_0x6a8749){const _0x38e2c3=a127_0x5d7486,_0x533af5=[...this[_0x38e2c3(0x185)]['commits']],_0x6c1f70=_0x533af5[_0x38e2c3(0x1d0)];let _0x5b847c=0x0;while(_0x533af5[_0x38e2c3(0x1d0)]){const _0x5e7c68=_0x533af5[_0x38e2c3(0x17d)]();!this[_0x38e2c3(0x185)]['force']&&(this[_0x38e2c3(0x1b5)][_0x38e2c3(0x1c5)]()?(await this[_0x38e2c3(0x1c8)]['checkoutTo'](_0x5e7c68['id']),await this[_0x38e2c3(0x13f)][_0x38e2c3(0x1a4)](this[_0x38e2c3(0x1c8)]['dir'])):(await this[_0x38e2c3(0x1c8)][_0x38e2c3(0x163)](this[_0x38e2c3(0x1c1)]),await this['mdapiUtils'][_0x38e2c3(0x1a4)](this[_0x38e2c3(0x1c8)][_0x38e2c3(0x143)]))),await this['handleCommit'](_0x5e7c68,_0x6a8749),await this[_0x38e2c3(0x13f)]['removeDir'](),_0x5b847c+=0x1,await this[_0x38e2c3(0x159)][_0x38e2c3(0x1c7)](this[_0x38e2c3(0x197)]+_0x38e2c3(0x173)),await this[_0x38e2c3(0x159)][_0x38e2c3(0x1c7)](this[_0x38e2c3(0x197)]+_0x38e2c3(0x17b)+this[_0x38e2c3(0x1ce)][_0x38e2c3(0x1cb)]+'\x20components'),await this[_0x38e2c3(0x159)][_0x38e2c3(0x1c7)](this[_0x38e2c3(0x197)]+'\x20Modified\x20'+this[_0x38e2c3(0x1ce)][_0x38e2c3(0x152)]+_0x38e2c3(0x14b)),await this['sfLogger'][_0x38e2c3(0x1c7)](this[_0x38e2c3(0x197)]+_0x38e2c3(0x11f)+this[_0x38e2c3(0x1ce)][_0x38e2c3(0x1d2)]+'\x20components'),await this['sfLogger'][_0x38e2c3(0x1c7)](this[_0x38e2c3(0x197)]+_0x38e2c3(0x194)+_0x5b847c+'/'+_0x6c1f70+_0x38e2c3(0x171))[_0x38e2c3(0x15f)](),this['resetStats']();}}async['cleanUp'](){const _0x39dc48=a127_0x5d7486;this[_0x39dc48(0x1c8)]&&await this[_0x39dc48(0x1c8)][_0x39dc48(0x141)]()[_0x39dc48(0x155)](()=>void 0x0),this[_0x39dc48(0x13f)]&&await this['mdapiUtils'][_0x39dc48(0x141)]()['catch'](()=>void 0x0);}async[a127_0x5d7486(0x11a)](_0x2e3c59){const _0x1dfe96=a127_0x5d7486;this[_0x1dfe96(0x185)]=_0x2e3c59,this[_0x1dfe96(0x1b5)]['setCommitDto'](this[_0x1dfe96(0x185)]),this[_0x1dfe96(0x12c)]=typedi_1[_0x1dfe96(0x179)][_0x1dfe96(0x1cc)](providers_tokens_1[_0x1dfe96(0x11c)]['gitApiService']),this[_0x1dfe96(0x13e)]=typedi_1['default'][_0x1dfe96(0x1cc)](providers_tokens_1[_0x1dfe96(0x11c)]['config']),this[_0x1dfe96(0x159)]=typedi_1[_0x1dfe96(0x179)][_0x1dfe96(0x1cc)](providers_tokens_1['Tokens'][_0x1dfe96(0x14d)]),this[_0x1dfe96(0x197)]=_0x1dfe96(0x12a)+_0x2e3c59['repository']+_0x1dfe96(0x148)+_0x2e3c59[_0x1dfe96(0x16d)]+_0x1dfe96(0x1c4)+GitCommitJob_1['name']+']',this['gitUtils']=new git_utils_1[(_0x1dfe96(0x1a7))](await this[_0x1dfe96(0x12e)]()),this[_0x1dfe96(0x13f)]=new mdapi_utils_1[(_0x1dfe96(0x142))](),this['sfLogger'][_0x1dfe96(0x1c7)](this[_0x1dfe96(0x197)]+'\x20Start\x20Git-commit\x20job.');try{this['sfLogger'][_0x1dfe96(0x1c7)](this[_0x1dfe96(0x197)]+'\x20Fetch\x20salesforce\x20data.'),await this[_0x1dfe96(0x1b5)][_0x1dfe96(0x168)](),await this['gitCommit'][_0x1dfe96(0x11d)](_0x1dfe96(0x1b0)),this[_0x1dfe96(0x159)][_0x1dfe96(0x1c7)](this['prefix']+_0x1dfe96(0x15d)),this[_0x1dfe96(0x1c1)]=await git_internal_1[_0x1dfe96(0x16c)][_0x1dfe96(0x18e)](await this[_0x1dfe96(0x12e)](),this[_0x1dfe96(0x185)]['branch']),this[_0x1dfe96(0x14d)]['log']('Last\x20git\x20repository\x20hash\x20is\x20%s.',this['lastCommitHash']);const _0x2c3f94=await this[_0x1dfe96(0x1b5)][_0x1dfe96(0x129)](this[_0x1dfe96(0x1c1)]);if(_0x2c3f94){this[_0x1dfe96(0x159)][_0x1dfe96(0x1c7)](_0x1dfe96(0x126)),await this[_0x1dfe96(0x1b5)][_0x1dfe96(0x11d)](_0x1dfe96(0x14f));return;}this[_0x1dfe96(0x159)]['log'](this['prefix']+'\x20Cloning\x20git\x20repository\x20from\x20'+this['gitCommitData'][_0x1dfe96(0x138)]+'.'),await this['gitUtils'][_0x1dfe96(0x145)](this[_0x1dfe96(0x185)][_0x1dfe96(0x16d)],this[_0x1dfe96(0x185)][_0x1dfe96(0x14a)]),this['sfLogger'][_0x1dfe96(0x1c7)](this[_0x1dfe96(0x197)]+_0x1dfe96(0x151));const _0x47e8a5=await sfdx_utils_1[_0x1dfe96(0x164)]['isSFDXProject'](this[_0x1dfe96(0x1c8)][_0x1dfe96(0x143)]);await this[_0x1dfe96(0x1c9)]();!this['sfLogger'][_0x1dfe96(0x18f)]()&&this['sfLogger'][_0x1dfe96(0x16a)](await salesforce_logger_v3_service_1['SalesforceLogger3'][_0x1dfe96(0x19f)](sf_logger_v3_types_1['LoggerTypes'][_0x1dfe96(0x1a1)]));await this[_0x1dfe96(0x159)]['send']();if(_0x2e3c59[_0x1dfe96(0x1b9)]){await this['mdapiUtils'][_0x1dfe96(0x1a4)](this[_0x1dfe96(0x1c8)][_0x1dfe96(0x143)]),await this['sfLogger'][_0x1dfe96(0x1c7)](this[_0x1dfe96(0x197)]+'\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository')[_0x1dfe96(0x15f)]();const _0x59ecf7=(await fs_internal_1['FS'][_0x1dfe96(0x161)](this[_0x1dfe96(0x13f)][_0x1dfe96(0x143)],!![]))[_0x1dfe96(0x199)](_0x102287=>(0x0,path_1[_0x1dfe96(0x1ad)])(this[_0x1dfe96(0x13f)][_0x1dfe96(0x143)],_0x102287));this[_0x1dfe96(0x159)]['log'](this[_0x1dfe96(0x197)]+'\x20Force\x20commit.\x20Have\x20to\x20parse\x20'+_0x59ecf7['length']+_0x1dfe96(0x154)),this[_0x1dfe96(0x185)][_0x1dfe96(0x15a)]=[],this[_0x1dfe96(0x185)][_0x1dfe96(0x16b)]=[{'files':{'modified':_0x59ecf7,'added':[],'removed':[]},'id':await this[_0x1dfe96(0x1c8)][_0x1dfe96(0x15c)](),'message':_0x1dfe96(0x121),'username':constants_1[_0x1dfe96(0x16f)]}];}await this[_0x1dfe96(0x1b5)][_0x1dfe96(0x1b7)]({[this[_0x1dfe96(0x185)]['repositoryGit']]:{'lastCommit':this[_0x1dfe96(0x1c1)]}}),await this['sfLogger'][_0x1dfe96(0x1c7)](this[_0x1dfe96(0x197)]+_0x1dfe96(0x17c)+(_0x47e8a5?_0x1dfe96(0x1a2):'NO')+_0x1dfe96(0x125))[_0x1dfe96(0x15f)](),await this[_0x1dfe96(0x1bd)](_0x47e8a5),await this['sfLogger']['log'](this[_0x1dfe96(0x197)]+_0x1dfe96(0x195))[_0x1dfe96(0x15f)](),await this[_0x1dfe96(0x1b5)][_0x1dfe96(0x11d)](_0x1dfe96(0x14f)),await this[_0x1dfe96(0x188)]([_0x2e3c59[_0x1dfe96(0x1b8)]],this[_0x1dfe96(0x13e)]['gitProvider'],_0x2e3c59[_0x1dfe96(0x14a)],_0x2e3c59[_0x1dfe96(0x16d)]);}catch(_0x4f510a){await this['cleanUp']();if(_0x4f510a instanceof flosum_commit_error_1[_0x1dfe96(0x127)])await this[_0x1dfe96(0x1b5)]['updateStatus'](_0x1dfe96(0x14f))['catch'](()=>void 0x0),this[_0x1dfe96(0x14d)][_0x1dfe96(0x1c7)](this[_0x1dfe96(0x197)]+_0x1dfe96(0x13a));else{await this[_0x1dfe96(0x14d)][_0x1dfe96(0x128)](this[_0x1dfe96(0x197)]+'\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20'+(_0x4f510a instanceof api_error_1[_0x1dfe96(0x1ba)]||_0x4f510a instanceof salesforce_error_1[_0x1dfe96(0x1b4)]?_0x4f510a[_0x1dfe96(0x156)]():_0x4f510a)),await this[_0x1dfe96(0x1b5)][_0x1dfe96(0x1b7)]({}),await this[_0x1dfe96(0x1b5)][_0x1dfe96(0x11d)](_0x1dfe96(0x1b3))['catch'](()=>void 0x0),await this[_0x1dfe96(0x1cf)]([_0x2e3c59[_0x1dfe96(0x1b8)]],this['config'][_0x1dfe96(0x15e)],_0x2e3c59['repository'],_0x2e3c59[_0x1dfe96(0x16d)]);throw _0x4f510a;}}finally{await this['cleanUp'](),await this[_0x1dfe96(0x159)][_0x1dfe96(0x15f)]()['catch'](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a127_0x5d7486(0x177)])({'transient':!![]}),__metadata('design:paramtypes',[git_commit_service_1[a127_0x5d7486(0x124)],connection_1[a127_0x5d7486(0x170)]])],GitCommitJob),exports['GitCommitJob']=GitCommitJob;