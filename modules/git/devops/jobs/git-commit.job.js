const a108_0x1cf52a=a108_0x4d3b;(function(_0x592591,_0x6d43a8){const _0x82b8a8=a108_0x4d3b,_0x1900f3=_0x592591();while(!![]){try{const _0x12ecf5=-parseInt(_0x82b8a8(0x1ba))/0x1*(-parseInt(_0x82b8a8(0x1c0))/0x2)+parseInt(_0x82b8a8(0x1a3))/0x3*(parseInt(_0x82b8a8(0x202))/0x4)+-parseInt(_0x82b8a8(0x1f8))/0x5+parseInt(_0x82b8a8(0x1e0))/0x6*(-parseInt(_0x82b8a8(0x1c3))/0x7)+-parseInt(_0x82b8a8(0x249))/0x8*(-parseInt(_0x82b8a8(0x20e))/0x9)+-parseInt(_0x82b8a8(0x1cb))/0xa*(parseInt(_0x82b8a8(0x1ab))/0xb)+parseInt(_0x82b8a8(0x247))/0xc*(-parseInt(_0x82b8a8(0x1de))/0xd);if(_0x12ecf5===_0x6d43a8)break;else _0x1900f3['push'](_0x1900f3['shift']());}catch(_0x4a988e){_0x1900f3['push'](_0x1900f3['shift']());}}}(a108_0x5401,0xb89b4));const a108_0x28fc81=(function(){let _0x3a932e=!![];return function(_0x2f483c,_0x18ed99){const _0x8c8da3=_0x3a932e?function(){const _0x3051a4=a108_0x4d3b;if(_0x18ed99){const _0x5ef4ae=_0x18ed99[_0x3051a4(0x23c)](_0x2f483c,arguments);return _0x18ed99=null,_0x5ef4ae;}}:function(){};return _0x3a932e=![],_0x8c8da3;};}()),a108_0x448327=a108_0x28fc81(this,function(){const _0x4954e8=a108_0x4d3b;return a108_0x448327['toString']()['search'](_0x4954e8(0x1ca))['toString']()[_0x4954e8(0x1b5)](a108_0x448327)[_0x4954e8(0x23e)](_0x4954e8(0x1ca));});a108_0x448327();'use strict';var __createBinding=this&&this[a108_0x1cf52a(0x208)]||(Object[a108_0x1cf52a(0x21b)]?function(_0x2f2170,_0x26082e,_0x15ef18,_0xf15e38){const _0x7372bf=a108_0x1cf52a;if(_0xf15e38===undefined)_0xf15e38=_0x15ef18;var _0x3931e7=Object[_0x7372bf(0x225)](_0x26082e,_0x15ef18);(!_0x3931e7||(_0x7372bf(0x21f)in _0x3931e7?!_0x26082e[_0x7372bf(0x201)]:_0x3931e7[_0x7372bf(0x1b3)]||_0x3931e7[_0x7372bf(0x227)]))&&(_0x3931e7={'enumerable':!![],'get':function(){return _0x26082e[_0x15ef18];}}),Object[_0x7372bf(0x243)](_0x2f2170,_0xf15e38,_0x3931e7);}:function(_0x592164,_0x3db584,_0x4a6e73,_0x11c83f){if(_0x11c83f===undefined)_0x11c83f=_0x4a6e73;_0x592164[_0x11c83f]=_0x3db584[_0x4a6e73];}),__setModuleDefault=this&&this[a108_0x1cf52a(0x20d)]||(Object['create']?function(_0x15bbfb,_0x1edad9){const _0x5bd9b3=a108_0x1cf52a;Object['defineProperty'](_0x15bbfb,_0x5bd9b3(0x1c9),{'enumerable':!![],'value':_0x1edad9});}:function(_0x2005c8,_0x2799d5){const _0x1230bb=a108_0x1cf52a;_0x2005c8[_0x1230bb(0x1c9)]=_0x2799d5;}),__decorate=this&&this[a108_0x1cf52a(0x1fa)]||function(_0x50308a,_0x3eaf0c,_0x5c58da,_0x2d9f2b){const _0x7b4d9b=a108_0x1cf52a;var _0x38f694=arguments['length'],_0x11ca93=_0x38f694<0x3?_0x3eaf0c:_0x2d9f2b===null?_0x2d9f2b=Object['getOwnPropertyDescriptor'](_0x3eaf0c,_0x5c58da):_0x2d9f2b,_0x57c391;if(typeof Reflect==='object'&&typeof Reflect[_0x7b4d9b(0x1a8)]===_0x7b4d9b(0x1cc))_0x11ca93=Reflect[_0x7b4d9b(0x1a8)](_0x50308a,_0x3eaf0c,_0x5c58da,_0x2d9f2b);else{for(var _0xf523f2=_0x50308a[_0x7b4d9b(0x213)]-0x1;_0xf523f2>=0x0;_0xf523f2--)if(_0x57c391=_0x50308a[_0xf523f2])_0x11ca93=(_0x38f694<0x3?_0x57c391(_0x11ca93):_0x38f694>0x3?_0x57c391(_0x3eaf0c,_0x5c58da,_0x11ca93):_0x57c391(_0x3eaf0c,_0x5c58da))||_0x11ca93;}return _0x38f694>0x3&&_0x11ca93&&Object['defineProperty'](_0x3eaf0c,_0x5c58da,_0x11ca93),_0x11ca93;},__importStar=this&&this[a108_0x1cf52a(0x1a4)]||function(_0x21e162){const _0x4de5ed=a108_0x1cf52a;if(_0x21e162&&_0x21e162[_0x4de5ed(0x201)])return _0x21e162;var _0x1de23c={};if(_0x21e162!=null){for(var _0x410507 in _0x21e162)if(_0x410507!==_0x4de5ed(0x1c9)&&Object[_0x4de5ed(0x1d4)]['hasOwnProperty'][_0x4de5ed(0x1b6)](_0x21e162,_0x410507))__createBinding(_0x1de23c,_0x21e162,_0x410507);}return __setModuleDefault(_0x1de23c,_0x21e162),_0x1de23c;},__metadata=this&&this[a108_0x1cf52a(0x1c4)]||function(_0x7538e1,_0x2f0d6a){const _0x3d5d0d=a108_0x1cf52a;if(typeof Reflect==='object'&&typeof Reflect[_0x3d5d0d(0x1fc)]==='function')return Reflect[_0x3d5d0d(0x1fc)](_0x7538e1,_0x2f0d6a);},GitCommitJob_1;Object[a108_0x1cf52a(0x243)](exports,a108_0x1cf52a(0x201),{'value':!![]}),exports['GitCommitJob']=void 0x0;function a108_0x4d3b(_0x19d489,_0xa3e4f8){const _0x136667=a108_0x5401();return a108_0x4d3b=function(_0x448327,_0x28fc81){_0x448327=_0x448327-0x1a3;let _0x540187=_0x136667[_0x448327];return _0x540187;},a108_0x4d3b(_0x19d489,_0xa3e4f8);}function a108_0x5401(){const _0x58c317=['\x20Job\x20done.','getCurrentHash','../../salesforce/utils/sfdx.utils','sfLogger','config','typedi','toString','fetchCommits','GitUtils','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','393770SfAmHV','../../salesforce/services/salesforce-logger-v3.service','__decorate','../../providers/api/bitbucket-api.service','metadata','updateStatus',']\x20Start\x20proceeding\x20git\x20commits.\x20','\x20Processed\x20','createCommit','__esModule','100eqkqXH','Branch\x20synchronized.\x20Skip.','stats','dir','modified','../../../../constants','__createBinding','\x20Fetch\x20remote\x20branch\x20hash.','\x20components','\x20commits.','updateFileNamesForSFDXProject','__setModuleDefault','442539QmMbno','inserted','gitCommit','readDir','fetchComponentsMetadata','length','fetchRepositoryOrBranchData','convertToCleanPaths','catch','providersFactory','FlosumCommitError','../../internal/git.internal','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','create','\x20Download\x20components\x20metadata\x20from\x20Flosum.','../../internal/fs.internal','reduce','get','gitUtils','prepareMdapi','getLoggerId','branch','Completed','getOwnPropertyDescriptor','values','configurable','recordType','\x20Cloning\x20git\x20repository\x20from\x20','map','repositoryGit','added','replace','createLoggerId','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','getRemoteHash','../../salesforce/errors/salesforce.error','\x20components.','describeCommit','gitApiService','SFDX','log','Last\x20git\x20repository\x20hash\x20is\x20%s.','logger','\x20Added\x20','setLoggerId','fileNames','apply','splice','search','credentials','../utils/path.utils','isLoggedIn','BitbucketApiService','defineProperty','Service','message','handleCommit','12PACCEZ','gitCommitData','104XvTlWj','getRecordTypes','prepareGitChangedPaths','Bitbucket','files','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','env','\x20Start\x20Git-commit\x20job.','../../parsers/utils',']\x20[Branch:\x20','getGitShellAuthorizationString','152211SwRsFo','__importStar','checkoutTo','getRepositoryId','\x20Commit\x20Summary','decorate','username','../utils/git.utils','11jDUGVB','../../../../core/errors/api.error','mdapiUtils','Git','commitId','MAX_COMPONENTS_PER_TICK','../services/git-commit.service','flat','writable','name','constructor','call','resetStats','YES','path','13uhmapQ','setCommitDto','\x20files\x20before\x20sync.','proceedCommits','MDApiUtils','DEFAULT_GIT_USER_EMAIL','33906TNMdDj','SalesforceError','\x20Modified\x20','466529OJxxHJ','__metadata','sendComponents','Tokens','lastCommitHash','removeDir','default','(((.+)+)+)+$','11496070oDYXdv','function','sync\x20components','commit','://','GitCommitService','provider','force','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','prototype','Logger','GitProvider','../../salesforce/types/sf-logger-v3-types','email','\x20[SFDX:\x20','commits','cleanUp','getRemote','repository','999453hQQBGM','removed','6gFkqdI','../errors/flosum-commit.error','LoggerTypes','SalesforceCommitsManager','error','DEFAULT_GIT_USER_NAME','GitCommitJob','push','send','../../providers/providers.tokens','run','../../../shared/utils','prefix','shift'];a108_0x5401=function(){return _0x58c317;};return a108_0x5401();}const core_1=require('../../../../core'),fs_internal_1=require(a108_0x1cf52a(0x21d)),salesforce_logger_v3_service_1=require(a108_0x1cf52a(0x1f9)),utils_1=require(a108_0x1cf52a(0x1eb)),path_1=require(a108_0x1cf52a(0x1b9)),typedi_1=__importStar(require(a108_0x1cf52a(0x1f3))),constants_1=require(a108_0x1cf52a(0x207)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_utils_1=require(a108_0x1cf52a(0x1aa)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require(a108_0x1cf52a(0x1ac)),salesforce_error_1=require(a108_0x1cf52a(0x231)),git_commit_service_1=require(a108_0x1cf52a(0x1b1)),flosum_commit_error_1=require(a108_0x1cf52a(0x1e1)),bitbucket_api_service_1=require(a108_0x1cf52a(0x1fb)),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require(a108_0x1cf52a(0x1f0)),utils_2=require(a108_0x1cf52a(0x251)),git_internal_1=require(a108_0x1cf52a(0x219)),providers_tokens_1=require(a108_0x1cf52a(0x1e9)),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require(a108_0x1cf52a(0x1d7)),path_utils_1=require(a108_0x1cf52a(0x240));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x4aeed,_0x41dd4e){const _0x516d20=a108_0x1cf52a;this['gitCommit']=_0x4aeed,this[_0x516d20(0x217)]=_0x41dd4e,this[_0x516d20(0x1b0)]=+(process[_0x516d20(0x24f)][_0x516d20(0x1b0)]||0xbb8),this[_0x516d20(0x238)]=new core_1[(_0x516d20(0x1d5))](GitCommitJob_1[_0x516d20(0x1b4)]),this[_0x516d20(0x1af)]='',this[_0x516d20(0x204)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a108_0x1cf52a(0x1dc)](){const _0x4f9d08=a108_0x1cf52a,{repositoryGit:_0x425d80}=this[_0x4f9d08(0x248)],_0x1e1abf=typedi_1[_0x4f9d08(0x1c9)][_0x4f9d08(0x21f)](providers_tokens_1['Tokens'][_0x4f9d08(0x23f)]);if(this['gitCommitData'][_0x4f9d08(0x1d1)]===git_provider_1[_0x4f9d08(0x1d6)][_0x4f9d08(0x24c)]){const _0xb132f4=typedi_1[_0x4f9d08(0x1c9)][_0x4f9d08(0x21f)](bitbucket_api_service_1[_0x4f9d08(0x242)]);await _0xb132f4[_0x4f9d08(0x241)]();}return _0x425d80[_0x4f9d08(0x22d)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x425d80)+_0x4f9d08(0x1cf)+_0x1e1abf[_0x4f9d08(0x253)]()+'@');}[a108_0x1cf52a(0x1b7)](){const _0xb89df7=a108_0x1cf52a;this[_0xb89df7(0x204)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a108_0x1cf52a(0x20c)](){const _0x32578e=a108_0x1cf52a,_0x173662=[...this[_0x32578e(0x248)][_0x32578e(0x23b)]];this['gitCommitData']['fileNames']=[];for(const _0x35248e of _0x173662){this[_0x32578e(0x248)][_0x32578e(0x23b)][_0x32578e(0x1e7)](...await(0x0,utils_2['readFilesByFilename'])(_0x35248e,this[_0x32578e(0x1ad)][_0x32578e(0x205)]));}}async[a108_0x1cf52a(0x1f5)](){const _0x5a2086=a108_0x1cf52a;if(this[_0x5a2086(0x248)][_0x5a2086(0x1d2)])return;const _0x4ba6fe=[];for(const _0x50fa96 of this[_0x5a2086(0x248)][_0x5a2086(0x1da)]){const _0x424594=await this['gitUtils'][_0x5a2086(0x233)](_0x50fa96['id']);_0x50fa96[_0x5a2086(0x1a9)]=_0x424594['author'],_0x50fa96[_0x5a2086(0x245)]=_0x424594[_0x5a2086(0x245)],_0x50fa96['files']=_0x424594['changes'],_0x50fa96[_0x5a2086(0x1d8)]=_0x424594['email'];if(_0x50fa96[_0x5a2086(0x1d8)]===constants_1[_0x5a2086(0x1bf)])throw new flosum_commit_error_1[(_0x5a2086(0x218))]();_0x4ba6fe[_0x5a2086(0x1e7)](...Object[_0x5a2086(0x226)](_0x50fa96[_0x5a2086(0x24d)])[_0x5a2086(0x1b2)]());}this[_0x5a2086(0x248)][_0x5a2086(0x23b)]=[...new Set(path_utils_1['PathUtils'][_0x5a2086(0x24b)](this[_0x5a2086(0x210)][_0x5a2086(0x228)],_0x4ba6fe,![]))];}async[a108_0x1cf52a(0x1c5)](_0x789860,_0x3d32a5,_0x2e8556){const _0x2753a7=a108_0x1cf52a,_0x36dfe8=_0x2e8556[_0x2753a7(0x21e)]((_0xc4deeb,_0x5c927c)=>{const _0x5dcc95=_0x2753a7;return _0xc4deeb[_0x5dcc95(0x20f)]['push'](..._0x5c927c[_0x5dcc95(0x20f)]),_0xc4deeb[_0x5dcc95(0x206)][_0x5dcc95(0x1e7)](..._0x5c927c[_0x5dcc95(0x206)]),_0xc4deeb[_0x5dcc95(0x1df)][_0x5dcc95(0x1e7)](..._0x5c927c['removed']),_0xc4deeb;},{'inserted':[],'modified':[],'removed':[]}),_0x1022b6=new salesforce_commits_manager_service_1[(_0x2753a7(0x1e3))]({'recordTypes':this['gitCommit'][_0x2753a7(0x24a)](),'branchId':this['gitCommit']['getBranchId'](),'repositoryId':this[_0x2753a7(0x210)][_0x2753a7(0x1a6)](),'logger':this[_0x2753a7(0x1f1)],'commitId':this['commitId']});await _0x1022b6[_0x2753a7(0x1bd)]([{'author':_0x789860,'message':_0x3d32a5,'inserted':_0x36dfe8[_0x2753a7(0x20f)],'modified':_0x36dfe8[_0x2753a7(0x206)],'removed':_0x36dfe8[_0x2753a7(0x1df)]}]);}async['handleCommit'](_0x5d8a71,_0x462ed0){const _0x55072f=a108_0x1cf52a;await this[_0x55072f(0x1f1)][_0x55072f(0x236)](this[_0x55072f(0x1ec)]+_0x55072f(0x21c))['send'](),await this['gitCommit'][_0x55072f(0x212)](_0x462ed0);const {added:_0x10c86a,modified:_0x37c0ec,removed:_0x5db58b}=_0x5d8a71[_0x55072f(0x24d)];_0x462ed0&&_0x37c0ec['push'](..._0x5db58b[_0x55072f(0x23d)](0x0));const _0x12cbb2=path_utils_1['PathUtils'][_0x55072f(0x24b)](this[_0x55072f(0x210)][_0x55072f(0x228)],[..._0x10c86a,..._0x37c0ec,..._0x5db58b],_0x462ed0&&!this[_0x55072f(0x248)]['force']),_0x2f3e35=(0x0,utils_2[_0x55072f(0x215)])(_0x12cbb2);let _0x1b71e4=0x0;const _0x3e4a8c=[];(_0x10c86a[_0x55072f(0x213)]||_0x37c0ec['length'])&&this[_0x55072f(0x210)]['getRepositoryId']()&&(this[_0x55072f(0x1af)]=await this[_0x55072f(0x210)][_0x55072f(0x200)](_0x5d8a71[_0x55072f(0x245)]));const _0x592a40=_0x2f3e35[_0x55072f(0x213)];let _0x56061d=0x0;while(_0x2f3e35[_0x55072f(0x213)]){const _0x4a13ab=_0x2f3e35[_0x55072f(0x1ed)](),_0x5d72a7=await this[_0x55072f(0x210)]['proceedFile'](_0x4a13ab,this[_0x55072f(0x1ad)][_0x55072f(0x205)],_0x462ed0&&!this[_0x55072f(0x248)]['force']);_0x1b71e4+=_0x5d72a7['inserted'][_0x55072f(0x213)]+_0x5d72a7[_0x55072f(0x1df)][_0x55072f(0x213)]+_0x5d72a7[_0x55072f(0x206)][_0x55072f(0x213)],this[_0x55072f(0x204)]['added']+=_0x5d72a7[_0x55072f(0x20f)]['length'],this[_0x55072f(0x204)][_0x55072f(0x206)]+=_0x5d72a7[_0x55072f(0x206)][_0x55072f(0x213)],this['stats']['removed']+=_0x5d72a7[_0x55072f(0x1df)][_0x55072f(0x213)],_0x56061d++,_0x56061d%0x64===0x0&&this[_0x55072f(0x238)][_0x55072f(0x236)]('proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',_0x56061d,_0x592a40,_0x1b71e4),_0x3e4a8c['push'](_0x5d72a7),_0x1b71e4>this['MAX_COMPONENTS_PER_TICK']&&(await this['sendComponents'](_0x5d8a71[_0x55072f(0x1a9)],_0x5d8a71[_0x55072f(0x245)],_0x3e4a8c),await this[_0x55072f(0x1f1)]['log'](this[_0x55072f(0x1ec)]+_0x55072f(0x1ff)+_0x1b71e4+_0x55072f(0x232))[_0x55072f(0x1e8)](),_0x1b71e4=0x0,_0x3e4a8c[_0x55072f(0x23d)](0x0));}_0x3e4a8c[_0x55072f(0x213)]&&(await this[_0x55072f(0x1c5)](_0x5d8a71[_0x55072f(0x1a9)],_0x5d8a71[_0x55072f(0x245)],_0x3e4a8c),await this[_0x55072f(0x1f1)][_0x55072f(0x236)](this[_0x55072f(0x1ec)]+'\x20Processed\x20'+_0x1b71e4+_0x55072f(0x232))[_0x55072f(0x1e8)]());}async['proceedCommits'](_0x4043d1){const _0x2083be=a108_0x1cf52a,_0x25ac07=[...this['gitCommitData'][_0x2083be(0x1da)]],_0x32947e=_0x25ac07[_0x2083be(0x213)];let _0x37e791=0x0;while(_0x25ac07[_0x2083be(0x213)]){const _0x114249=_0x25ac07[_0x2083be(0x1ed)]();!this['gitCommitData']['force']&&(this[_0x2083be(0x210)][_0x2083be(0x1a6)]()?(await this[_0x2083be(0x220)][_0x2083be(0x1a5)](_0x114249['id']),await this['mdapiUtils'][_0x2083be(0x221)](this['gitUtils'][_0x2083be(0x205)])):(await this[_0x2083be(0x220)][_0x2083be(0x1a5)](this[_0x2083be(0x1c7)]),await this[_0x2083be(0x1ad)]['prepareMdapi'](this[_0x2083be(0x220)][_0x2083be(0x205)]))),await this[_0x2083be(0x246)](_0x114249,_0x4043d1),await this[_0x2083be(0x1ad)][_0x2083be(0x1c8)](),_0x37e791+=0x1,await this[_0x2083be(0x1f1)][_0x2083be(0x236)](this['prefix']+_0x2083be(0x1a7)),await this[_0x2083be(0x1f1)]['log'](this[_0x2083be(0x1ec)]+_0x2083be(0x239)+this[_0x2083be(0x204)][_0x2083be(0x22c)]+_0x2083be(0x20a)),await this['sfLogger'][_0x2083be(0x236)](this[_0x2083be(0x1ec)]+_0x2083be(0x1c2)+this[_0x2083be(0x204)][_0x2083be(0x206)]+_0x2083be(0x20a)),await this[_0x2083be(0x1f1)][_0x2083be(0x236)](this[_0x2083be(0x1ec)]+'\x20Removed\x20'+this[_0x2083be(0x204)]['removed']+'\x20components'),await this['sfLogger'][_0x2083be(0x236)](this[_0x2083be(0x1ec)]+'\x20Proceeded\x20'+_0x37e791+'/'+_0x32947e+_0x2083be(0x20b))[_0x2083be(0x1e8)](),this['resetStats']();}}async[a108_0x1cf52a(0x1db)](){const _0x4b7991=a108_0x1cf52a;this[_0x4b7991(0x220)]&&await this[_0x4b7991(0x220)]['removeDir']()['catch'](()=>void 0x0),this['mdapiUtils']&&await this[_0x4b7991(0x1ad)]['removeDir']()[_0x4b7991(0x216)](()=>void 0x0);}async[a108_0x1cf52a(0x1ea)](_0x31c2a0){const _0x4c8b23=a108_0x1cf52a;this['gitCommitData']=_0x31c2a0,this[_0x4c8b23(0x210)][_0x4c8b23(0x1bb)](this[_0x4c8b23(0x248)]),this['gitApiService']=typedi_1[_0x4c8b23(0x1c9)]['get'](providers_tokens_1[_0x4c8b23(0x1c6)][_0x4c8b23(0x234)]),this[_0x4c8b23(0x1f2)]=typedi_1[_0x4c8b23(0x1c9)]['get'](providers_tokens_1['Tokens']['config']),this[_0x4c8b23(0x1f1)]=typedi_1[_0x4c8b23(0x1c9)][_0x4c8b23(0x21f)](providers_tokens_1[_0x4c8b23(0x1c6)][_0x4c8b23(0x238)]),this[_0x4c8b23(0x1ec)]=_0x4c8b23(0x22f)+_0x31c2a0[_0x4c8b23(0x1dd)]+_0x4c8b23(0x252)+_0x31c2a0['branch']+']\x20['+GitCommitJob_1[_0x4c8b23(0x1b4)]+']',this['gitUtils']=new git_utils_1[(_0x4c8b23(0x1f6))](await this[_0x4c8b23(0x1dc)]()),this['mdapiUtils']=new mdapi_utils_1[(_0x4c8b23(0x1be))](),this[_0x4c8b23(0x1f1)]['log'](this['prefix']+_0x4c8b23(0x250));try{this[_0x4c8b23(0x1f1)][_0x4c8b23(0x236)](this['prefix']+'\x20Fetch\x20salesforce\x20data.'),await this[_0x4c8b23(0x210)][_0x4c8b23(0x214)](),await this['gitCommit']['updateStatus']('In\x20Progress'),this[_0x4c8b23(0x1f1)][_0x4c8b23(0x236)](this['prefix']+_0x4c8b23(0x209)),this[_0x4c8b23(0x1c7)]=await git_internal_1[_0x4c8b23(0x1ae)][_0x4c8b23(0x230)](await this[_0x4c8b23(0x1dc)](),this[_0x4c8b23(0x248)][_0x4c8b23(0x223)]),this[_0x4c8b23(0x238)][_0x4c8b23(0x236)](_0x4c8b23(0x237),this['lastCommitHash']);const _0x143d1e=await this[_0x4c8b23(0x210)]['checkSyncStatus'](this[_0x4c8b23(0x1c7)]);if(_0x143d1e){this['sfLogger'][_0x4c8b23(0x236)](_0x4c8b23(0x203)),await this['gitCommit'][_0x4c8b23(0x1fd)]('Completed');return;}this[_0x4c8b23(0x1f1)]['log'](this[_0x4c8b23(0x1ec)]+_0x4c8b23(0x229)+this[_0x4c8b23(0x248)][_0x4c8b23(0x22b)]+'.'),await this[_0x4c8b23(0x220)]['clone'](this[_0x4c8b23(0x248)][_0x4c8b23(0x223)],this[_0x4c8b23(0x248)][_0x4c8b23(0x1dd)]),this[_0x4c8b23(0x1f1)][_0x4c8b23(0x236)](this[_0x4c8b23(0x1ec)]+_0x4c8b23(0x24e));const _0x2ee590=await sfdx_utils_1[_0x4c8b23(0x235)]['isSFDXProject'](this[_0x4c8b23(0x220)][_0x4c8b23(0x205)]);await this['fetchCommits']();!this[_0x4c8b23(0x1f1)][_0x4c8b23(0x222)]()&&this[_0x4c8b23(0x1f1)][_0x4c8b23(0x23a)](await salesforce_logger_v3_service_1['SalesforceLogger3'][_0x4c8b23(0x22e)](sf_logger_v3_types_1[_0x4c8b23(0x1e2)][_0x4c8b23(0x1ce)]));await this[_0x4c8b23(0x1f1)][_0x4c8b23(0x1e8)]();if(_0x31c2a0[_0x4c8b23(0x1d2)]){await this[_0x4c8b23(0x1ad)][_0x4c8b23(0x221)](this[_0x4c8b23(0x220)][_0x4c8b23(0x205)]),await this[_0x4c8b23(0x1f1)][_0x4c8b23(0x236)](this['prefix']+_0x4c8b23(0x21a))[_0x4c8b23(0x1e8)]();const _0x2b71d5=(await fs_internal_1['FS'][_0x4c8b23(0x211)](this['mdapiUtils'][_0x4c8b23(0x205)],!![]))[_0x4c8b23(0x22a)](_0x180c64=>(0x0,path_1['relative'])(this[_0x4c8b23(0x1ad)]['dir'],_0x180c64));this[_0x4c8b23(0x1f1)][_0x4c8b23(0x236)](this['prefix']+_0x4c8b23(0x1f7)+_0x2b71d5[_0x4c8b23(0x213)]+_0x4c8b23(0x1bc)),this[_0x4c8b23(0x248)][_0x4c8b23(0x23b)]=[],this[_0x4c8b23(0x248)][_0x4c8b23(0x1da)]=[{'files':{'modified':_0x2b71d5,'added':[],'removed':[]},'id':await this[_0x4c8b23(0x220)][_0x4c8b23(0x1ef)](),'message':_0x4c8b23(0x1cd),'username':constants_1[_0x4c8b23(0x1e5)]}];}await this[_0x4c8b23(0x210)]['updateRemoteState']({[this[_0x4c8b23(0x248)][_0x4c8b23(0x22b)]]:{'lastCommit':this[_0x4c8b23(0x1c7)]}}),await this[_0x4c8b23(0x1f1)][_0x4c8b23(0x236)](this[_0x4c8b23(0x1ec)]+_0x4c8b23(0x1d9)+(_0x2ee590?_0x4c8b23(0x1b8):'NO')+_0x4c8b23(0x1fe))['send'](),await this[_0x4c8b23(0x1bd)](_0x2ee590),await this[_0x4c8b23(0x1f1)]['log'](this[_0x4c8b23(0x1ec)]+_0x4c8b23(0x1ee))['send'](),await this['gitCommit'][_0x4c8b23(0x1fd)](_0x4c8b23(0x224));}catch(_0x450127){await this['cleanUp']();if(_0x450127 instanceof flosum_commit_error_1[_0x4c8b23(0x218)])await this['gitCommit'][_0x4c8b23(0x1fd)]('Completed')[_0x4c8b23(0x216)](()=>void 0x0),this[_0x4c8b23(0x238)][_0x4c8b23(0x236)](this[_0x4c8b23(0x1ec)]+_0x4c8b23(0x1d3));else{await this[_0x4c8b23(0x238)][_0x4c8b23(0x1e4)](this[_0x4c8b23(0x1ec)]+'\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20'+(_0x450127 instanceof api_error_1['ApiError']||_0x450127 instanceof salesforce_error_1[_0x4c8b23(0x1c1)]?_0x450127[_0x4c8b23(0x1f4)]():_0x450127)),await this['gitCommit']['updateRemoteState']({}),await this[_0x4c8b23(0x210)][_0x4c8b23(0x1fd)]('Error')[_0x4c8b23(0x216)](()=>void 0x0);throw _0x450127;}}finally{await this['cleanUp'](),await this[_0x4c8b23(0x1f1)]['send']()[_0x4c8b23(0x216)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a108_0x1cf52a(0x244)])({'transient':!![]}),__metadata('design:paramtypes',[git_commit_service_1[a108_0x1cf52a(0x1d0)],connection_1['ProvidersFactory']])],GitCommitJob),exports[a108_0x1cf52a(0x1e6)]=GitCommitJob;