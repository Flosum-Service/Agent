const a128_0x2a14d7=a128_0x30e8;function a128_0x30e8(_0x95b716,_0x4f3c02){const _0x4d828c=a128_0x1c55();return a128_0x30e8=function(_0xda2511,_0x1703d8){_0xda2511=_0xda2511-0xb9;let _0x1c550b=_0x4d828c[_0xda2511];return _0x1c550b;},a128_0x30e8(_0x95b716,_0x4f3c02);}(function(_0x1a1564,_0x574b64){const _0xe1c010=a128_0x30e8,_0x5c8213=_0x1a1564();while(!![]){try{const _0x3ef417=parseInt(_0xe1c010(0x168))/0x1*(-parseInt(_0xe1c010(0x114))/0x2)+-parseInt(_0xe1c010(0x132))/0x3*(parseInt(_0xe1c010(0x13e))/0x4)+parseInt(_0xe1c010(0x16f))/0x5+-parseInt(_0xe1c010(0x16d))/0x6+parseInt(_0xe1c010(0x154))/0x7+-parseInt(_0xe1c010(0xdb))/0x8+parseInt(_0xe1c010(0x147))/0x9;if(_0x3ef417===_0x574b64)break;else _0x5c8213['push'](_0x5c8213['shift']());}catch(_0x33bba9){_0x5c8213['push'](_0x5c8213['shift']());}}}(a128_0x1c55,0x62e4b));function a128_0x1c55(){const _0x50b4c3=['Completed','repositoryGit','sendComponents','apply','branch','getLoggerId','fetchCommits','(((.+)+)+)+$','../../salesforce/errors/salesforce.error','decorate','catch','flat','shift','getCurrentHash','message','search','execute','../../providers/providers.tokens','clone','prototype','function','getProtocol','Last\x20git\x20repository\x20hash\x20is\x20%s.','prepareMdapi','\x20Processed\x20','repository','log','../../../../core','Email\x20notifications\x20are\x20disabled.','setLoggerId','GitCommitJob','gitCommitData','updateFileNamesForSFDXProject','Logger','error','getGitShellAuthorizationString','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','changes','create','fetchComponentsMetadata','\x20Fetch\x20remote\x20branch\x20hash.','501502XKHCUr','readFilesByFilename','Tokens','getRemote','../../../../core/errors/api.error','info','design:paramtypes','proceedFile','sfLogger','defineProperty','handleCommit','gitUtils','getRecordTypes','../utils/path.utils','FlosumCommitError','createLoggerId','checkoutTo','fetchRepositoryOrBranchData','added','readDir','../../../../constants','../../salesforce/types/sf-logger-v3-types','../../internal/git.internal','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','username','config','SalesforceLogger3','removeDir','toString','name','442713NoRLto','../../../shared/utils','replace','relative','logger','getRepositoryId','length','\x20Cloning\x20git\x20repository\x20from\x20','files','BitbucketApiService','ApiError','mdapiUtils','12bNoEft','../utils/git.utils','push','gitCommit','describeCommit','SFDX','resetStats','\x20commits.','../errors/flosum-commit.error','6503607WukexI','__createBinding','\x20[SFDX:\x20','GitProvider','force','getOwnPropertyDescriptor','\x20Modified\x20','../../notifications/commit-to-flosum-error.notification','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','call','splice','errorNotification','path','4177656QqknNl','commits','fileNames','Service','../../providers/api/bitbucket-api.service','get','../../salesforce/utils/sfdx.utils','../utils/connection','providersFactory','../../salesforce/services/salesforce-commits-manager.service','author','removed','send','../services/git-commit.service','\x20components.','recordType','isLoggedIn','GitUtils','env','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','2kvweKH','getBranchId','isEmailNotificationsEnabled','provider',']\x20Start\x20proceeding\x20git\x20commits.\x20','1633014gBhAVB',']\x20[Branch:\x20','3852350YmpAVb','://','CommitToFlosumCompletedNotification','typedi','prepareGitChangedPaths','DEFAULT_GIT_USER_EMAIL','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','inserted','completeNotification','Git','YES','Bitbucket','\x20components','dir','stats','metadata','\x20Added\x20','CommitToFlosumErrorNotification','updateRemoteState','\x20Proceeded\x20','run','commitId','cleanUp','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','\x20Job\x20done.','commit','gitApiService','__esModule','modified','../../parsers/utils','prefix','constructor','lastCommitHash','values','MAX_COMPONENTS_PER_TICK','updateStatus','3747600SSkMeu','../../providers/types/git-provider','email','proceedCommits','__decorate','\x20Start\x20Git-commit\x20job.','sync\x20components','\x20Commit\x20Summary','default','object','PathUtils','../../salesforce/services/salesforce-logger-v3.service','MDApiUtils','SalesforceError','ProvidersFactory','writable'];a128_0x1c55=function(){return _0x50b4c3;};return a128_0x1c55();}const a128_0x1703d8=(function(){let _0x3eb39e=!![];return function(_0x3a2795,_0x4fd509){const _0x41bde4=_0x3eb39e?function(){const _0x3bd469=a128_0x30e8;if(_0x4fd509){const _0x56d301=_0x4fd509[_0x3bd469(0xee)](_0x3a2795,arguments);return _0x4fd509=null,_0x56d301;}}:function(){};return _0x3eb39e=![],_0x41bde4;};}()),a128_0xda2511=a128_0x1703d8(this,function(){const _0x5cac76=a128_0x30e8;return a128_0xda2511[_0x5cac76(0x130)]()['search'](_0x5cac76(0xf2))[_0x5cac76(0x130)]()[_0x5cac76(0xd6)](a128_0xda2511)[_0x5cac76(0xfa)](_0x5cac76(0xf2));});a128_0xda2511();'use strict';var __createBinding=this&&this[a128_0x2a14d7(0x148)]||(Object[a128_0x2a14d7(0x111)]?function(_0x5d6430,_0x4bb8d9,_0x3fe486,_0x302185){const _0x23731a=a128_0x2a14d7;if(_0x302185===undefined)_0x302185=_0x3fe486;var _0x3ff0cc=Object['getOwnPropertyDescriptor'](_0x4bb8d9,_0x3fe486);(!_0x3ff0cc||(_0x23731a(0x159)in _0x3ff0cc?!_0x4bb8d9[_0x23731a(0xd2)]:_0x3ff0cc[_0x23731a(0xea)]||_0x3ff0cc['configurable']))&&(_0x3ff0cc={'enumerable':!![],'get':function(){return _0x4bb8d9[_0x3fe486];}}),Object[_0x23731a(0x11d)](_0x5d6430,_0x302185,_0x3ff0cc);}:function(_0x39dd93,_0x36fb47,_0x1639d3,_0x63b8d1){if(_0x63b8d1===undefined)_0x63b8d1=_0x1639d3;_0x39dd93[_0x63b8d1]=_0x36fb47[_0x1639d3];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a128_0x2a14d7(0x111)]?function(_0x1b18cd,_0x2810ee){const _0x3a0ae3=a128_0x2a14d7;Object[_0x3a0ae3(0x11d)](_0x1b18cd,_0x3a0ae3(0xe3),{'enumerable':!![],'value':_0x2810ee});}:function(_0x355e31,_0x328247){const _0x454258=a128_0x2a14d7;_0x355e31[_0x454258(0xe3)]=_0x328247;}),__decorate=this&&this[a128_0x2a14d7(0xdf)]||function(_0xff30a8,_0x19dd67,_0xc2df50,_0x59d622){const _0x45d6c4=a128_0x2a14d7;var _0x512f34=arguments['length'],_0x2c9909=_0x512f34<0x3?_0x19dd67:_0x59d622===null?_0x59d622=Object[_0x45d6c4(0x14c)](_0x19dd67,_0xc2df50):_0x59d622,_0x256c90;if(typeof Reflect===_0x45d6c4(0xe4)&&typeof Reflect[_0x45d6c4(0xf4)]==='function')_0x2c9909=Reflect['decorate'](_0xff30a8,_0x19dd67,_0xc2df50,_0x59d622);else{for(var _0xa0f46b=_0xff30a8[_0x45d6c4(0x138)]-0x1;_0xa0f46b>=0x0;_0xa0f46b--)if(_0x256c90=_0xff30a8[_0xa0f46b])_0x2c9909=(_0x512f34<0x3?_0x256c90(_0x2c9909):_0x512f34>0x3?_0x256c90(_0x19dd67,_0xc2df50,_0x2c9909):_0x256c90(_0x19dd67,_0xc2df50))||_0x2c9909;}return _0x512f34>0x3&&_0x2c9909&&Object['defineProperty'](_0x19dd67,_0xc2df50,_0x2c9909),_0x2c9909;},__importStar=this&&this['__importStar']||function(_0xbfd7b9){const _0x523f46=a128_0x2a14d7;if(_0xbfd7b9&&_0xbfd7b9['__esModule'])return _0xbfd7b9;var _0x47b446={};if(_0xbfd7b9!=null){for(var _0x2d122d in _0xbfd7b9)if(_0x2d122d!=='default'&&Object[_0x523f46(0xfe)]['hasOwnProperty'][_0x523f46(0x150)](_0xbfd7b9,_0x2d122d))__createBinding(_0x47b446,_0xbfd7b9,_0x2d122d);}return __setModuleDefault(_0x47b446,_0xbfd7b9),_0x47b446;},__metadata=this&&this['__metadata']||function(_0x3e0d68,_0xa12c03){const _0xfd26d0=a128_0x2a14d7;if(typeof Reflect===_0xfd26d0(0xe4)&&typeof Reflect[_0xfd26d0(0xc6)]===_0xfd26d0(0xff))return Reflect[_0xfd26d0(0xc6)](_0x3e0d68,_0xa12c03);},GitCommitJob_1;Object[a128_0x2a14d7(0x11d)](exports,a128_0x2a14d7(0xd2),{'value':!![]}),exports[a128_0x2a14d7(0x109)]=void 0x0;const core_1=require(a128_0x2a14d7(0x106)),fs_internal_1=require('../../internal/fs.internal'),salesforce_logger_v3_service_1=require(a128_0x2a14d7(0xe6)),utils_1=require(a128_0x2a14d7(0x133)),path_1=require(a128_0x2a14d7(0x153)),typedi_1=__importStar(require(a128_0x2a14d7(0xba))),constants_1=require(a128_0x2a14d7(0x128)),salesforce_commits_manager_service_1=require(a128_0x2a14d7(0x15d)),git_utils_1=require(a128_0x2a14d7(0x13f)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require(a128_0x2a14d7(0x118)),salesforce_error_1=require(a128_0x2a14d7(0xf3)),git_commit_service_1=require(a128_0x2a14d7(0x161)),flosum_commit_error_1=require(a128_0x2a14d7(0x146)),bitbucket_api_service_1=require(a128_0x2a14d7(0x158)),git_provider_1=require(a128_0x2a14d7(0xdc)),sfdx_utils_1=require(a128_0x2a14d7(0x15a)),utils_2=require(a128_0x2a14d7(0xd4)),git_internal_1=require(a128_0x2a14d7(0x12a)),providers_tokens_1=require(a128_0x2a14d7(0xfc)),connection_1=require(a128_0x2a14d7(0x15b)),sf_logger_v3_types_1=require(a128_0x2a14d7(0x129)),path_utils_1=require(a128_0x2a14d7(0x121)),commit_to_flosum_completed_notification_1=require('../../notifications/commit-to-flosum-completed.notification'),commit_to_flosum_error_notification_1=require(a128_0x2a14d7(0x14e));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x474851,_0x53997a){const _0x5ac42b=a128_0x2a14d7;this[_0x5ac42b(0x141)]=_0x474851,this[_0x5ac42b(0x15c)]=_0x53997a,this[_0x5ac42b(0xd9)]=+(process[_0x5ac42b(0x166)][_0x5ac42b(0xd9)]||0xbb8),this[_0x5ac42b(0x136)]=new core_1[(_0x5ac42b(0x10c))](GitCommitJob_1['name']),this['commitId']='',this[_0x5ac42b(0xc5)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a128_0x2a14d7(0x117)](){const _0x4c5a15=a128_0x2a14d7,{repositoryGit:_0xa8f8ac}=this['gitCommitData'],_0x1d31e8=typedi_1[_0x4c5a15(0xe3)]['get'](providers_tokens_1[_0x4c5a15(0x116)]['credentials']);if(this[_0x4c5a15(0x10a)][_0x4c5a15(0x16b)]===git_provider_1[_0x4c5a15(0x14a)][_0x4c5a15(0xc2)]){const _0x553a9f=typedi_1[_0x4c5a15(0xe3)][_0x4c5a15(0x159)](bitbucket_api_service_1[_0x4c5a15(0x13b)]);await _0x553a9f[_0x4c5a15(0x164)]();}return _0xa8f8ac[_0x4c5a15(0x134)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4c5a15(0x100)])(_0xa8f8ac)+_0x4c5a15(0x170)+_0x1d31e8[_0x4c5a15(0x10e)]()+'@');}async[a128_0x2a14d7(0xbf)](_0x32aa64,_0x59c976,_0xd247ea,_0x2dbabf){const _0x2317a7=a128_0x2a14d7;if(!this[_0x2317a7(0x12d)][_0x2317a7(0x16a)]){this[_0x2317a7(0x136)][_0x2317a7(0x119)](_0x2317a7(0x107));return;}await new commit_to_flosum_completed_notification_1[(_0x2317a7(0xb9))]({'emails':_0x32aa64,'gitProvider':_0x59c976,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1['CommitToFlosumCompletedNotification'][_0x2317a7(0x131)],'repositoryName':_0xd247ea,'branchName':_0x2dbabf})[_0x2317a7(0xfb)]();}async[a128_0x2a14d7(0x152)](_0x29fb57,_0x155ae4,_0x51e02d,_0x267c06){const _0x561c41=a128_0x2a14d7;if(!this[_0x561c41(0x12d)][_0x561c41(0x16a)]){this[_0x561c41(0x136)][_0x561c41(0x119)](_0x561c41(0x107));return;}await new commit_to_flosum_error_notification_1[(_0x561c41(0xc8))]({'emails':_0x29fb57,'gitProvider':_0x155ae4,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x561c41(0xc8)][_0x561c41(0x131)],'repositoryName':_0x51e02d,'branchName':_0x267c06})[_0x561c41(0xfb)]();}[a128_0x2a14d7(0x144)](){const _0xda81ee=a128_0x2a14d7;this[_0xda81ee(0xc5)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a128_0x2a14d7(0x10b)](){const _0x3ef4fc=a128_0x2a14d7,_0x26e423=[...this['gitCommitData'][_0x3ef4fc(0x156)]];this[_0x3ef4fc(0x10a)][_0x3ef4fc(0x156)]=[];for(const _0x19214b of _0x26e423){this[_0x3ef4fc(0x10a)]['fileNames'][_0x3ef4fc(0x140)](...await(0x0,utils_2[_0x3ef4fc(0x115)])(_0x19214b,this[_0x3ef4fc(0x13d)][_0x3ef4fc(0xc4)]));}}async[a128_0x2a14d7(0xf1)](){const _0x2f400a=a128_0x2a14d7;if(this['gitCommitData'][_0x2f400a(0x14b)])return;const _0x5a8afa=[];for(const _0x29cedc of this[_0x2f400a(0x10a)][_0x2f400a(0x155)]){const _0x5b27f0=await this[_0x2f400a(0x11f)][_0x2f400a(0x142)](_0x29cedc['id']);_0x29cedc[_0x2f400a(0x12c)]=_0x5b27f0[_0x2f400a(0x15e)],_0x29cedc[_0x2f400a(0xf9)]=_0x5b27f0[_0x2f400a(0xf9)],_0x29cedc[_0x2f400a(0x13a)]=_0x5b27f0[_0x2f400a(0x110)],_0x29cedc[_0x2f400a(0xdd)]=_0x5b27f0['email'];if(_0x29cedc[_0x2f400a(0xdd)]===constants_1[_0x2f400a(0xbc)])throw new flosum_commit_error_1[(_0x2f400a(0x122))]();_0x5a8afa['push'](...Object[_0x2f400a(0xd8)](_0x29cedc['files'])[_0x2f400a(0xf6)]());}this[_0x2f400a(0x10a)][_0x2f400a(0x156)]=[...new Set(path_utils_1[_0x2f400a(0xe5)]['prepareGitChangedPaths'](this[_0x2f400a(0x141)][_0x2f400a(0x163)],_0x5a8afa,![]))];}async[a128_0x2a14d7(0xed)](_0x1f7435,_0x14883e,_0x2711ab){const _0x2fd8cd=a128_0x2a14d7,_0x431f86=_0x2711ab['reduce']((_0x3295ad,_0x2a7f5a)=>{const _0x1084ed=a128_0x30e8;return _0x3295ad[_0x1084ed(0xbe)]['push'](..._0x2a7f5a['inserted']),_0x3295ad[_0x1084ed(0xd3)][_0x1084ed(0x140)](..._0x2a7f5a[_0x1084ed(0xd3)]),_0x3295ad[_0x1084ed(0x15f)][_0x1084ed(0x140)](..._0x2a7f5a['removed']),_0x3295ad;},{'inserted':[],'modified':[],'removed':[]}),_0x20b230=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x2fd8cd(0x141)][_0x2fd8cd(0x120)](),'branchId':this[_0x2fd8cd(0x141)][_0x2fd8cd(0x169)](),'repositoryId':this[_0x2fd8cd(0x141)][_0x2fd8cd(0x137)](),'logger':this[_0x2fd8cd(0x11c)],'commitId':this['commitId']});await _0x20b230[_0x2fd8cd(0xde)]([{'author':_0x1f7435,'message':_0x14883e,'inserted':_0x431f86[_0x2fd8cd(0xbe)],'modified':_0x431f86['modified'],'removed':_0x431f86['removed']}]);}async['handleCommit'](_0x4c97c9,_0x581d49){const _0x53122f=a128_0x2a14d7;await this[_0x53122f(0x11c)][_0x53122f(0x105)](this[_0x53122f(0xd5)]+'\x20Download\x20components\x20metadata\x20from\x20Flosum.')[_0x53122f(0x160)](),await this[_0x53122f(0x141)][_0x53122f(0x112)](_0x581d49);const {added:_0x41335d,modified:_0x3eed05,removed:_0x5230ec}=_0x4c97c9[_0x53122f(0x13a)];_0x581d49&&_0x3eed05[_0x53122f(0x140)](..._0x5230ec['splice'](0x0));const _0x2ddeba=path_utils_1['PathUtils'][_0x53122f(0xbb)](this[_0x53122f(0x141)][_0x53122f(0x163)],[..._0x41335d,..._0x3eed05,..._0x5230ec],_0x581d49&&!this['gitCommitData'][_0x53122f(0x14b)]),_0xd0e2c6=(0x0,utils_2['convertToCleanPaths'])(_0x2ddeba);let _0x5a9d35=0x0;const _0x2c9c21=[];(_0x41335d[_0x53122f(0x138)]||_0x3eed05['length'])&&this[_0x53122f(0x141)][_0x53122f(0x137)]()&&(this[_0x53122f(0xcc)]=await this['gitCommit']['createCommit'](_0x4c97c9['message']));const _0x187e6e=_0xd0e2c6[_0x53122f(0x138)];let _0x2f24b3=0x0;while(_0xd0e2c6[_0x53122f(0x138)]){const _0xab1460=_0xd0e2c6[_0x53122f(0xf7)](),_0x10b435=await this[_0x53122f(0x141)][_0x53122f(0x11b)](_0xab1460,this[_0x53122f(0x13d)][_0x53122f(0xc4)],_0x581d49&&!this[_0x53122f(0x10a)][_0x53122f(0x14b)]);_0x5a9d35+=_0x10b435[_0x53122f(0xbe)][_0x53122f(0x138)]+_0x10b435['removed'][_0x53122f(0x138)]+_0x10b435['modified']['length'],this[_0x53122f(0xc5)][_0x53122f(0x126)]+=_0x10b435[_0x53122f(0xbe)][_0x53122f(0x138)],this[_0x53122f(0xc5)][_0x53122f(0xd3)]+=_0x10b435[_0x53122f(0xd3)][_0x53122f(0x138)],this['stats']['removed']+=_0x10b435[_0x53122f(0x15f)][_0x53122f(0x138)],_0x2f24b3++,_0x2f24b3%0x64===0x0&&this['logger'][_0x53122f(0x105)](_0x53122f(0x14f),_0x2f24b3,_0x187e6e,_0x5a9d35),_0x2c9c21[_0x53122f(0x140)](_0x10b435),_0x5a9d35>this[_0x53122f(0xd9)]&&(await this['sendComponents'](_0x4c97c9[_0x53122f(0x12c)],_0x4c97c9[_0x53122f(0xf9)],_0x2c9c21),await this[_0x53122f(0x11c)][_0x53122f(0x105)](this[_0x53122f(0xd5)]+'\x20Processed\x20'+_0x5a9d35+'\x20components.')[_0x53122f(0x160)](),_0x5a9d35=0x0,_0x2c9c21[_0x53122f(0x151)](0x0));}_0x2c9c21[_0x53122f(0x138)]&&(await this[_0x53122f(0xed)](_0x4c97c9['username'],_0x4c97c9[_0x53122f(0xf9)],_0x2c9c21),await this[_0x53122f(0x11c)]['log'](this[_0x53122f(0xd5)]+_0x53122f(0x103)+_0x5a9d35+_0x53122f(0x162))[_0x53122f(0x160)]());}async[a128_0x2a14d7(0xde)](_0x5e0bb4){const _0x47c488=a128_0x2a14d7,_0x1f5e02=[...this['gitCommitData'][_0x47c488(0x155)]],_0x4be141=_0x1f5e02['length'];let _0x57cb14=0x0;while(_0x1f5e02[_0x47c488(0x138)]){const _0x5e28a4=_0x1f5e02[_0x47c488(0xf7)]();!this[_0x47c488(0x10a)][_0x47c488(0x14b)]&&(this[_0x47c488(0x141)]['getRepositoryId']()?(await this[_0x47c488(0x11f)][_0x47c488(0x124)](_0x5e28a4['id']),await this[_0x47c488(0x13d)][_0x47c488(0x102)](this[_0x47c488(0x11f)][_0x47c488(0xc4)])):(await this[_0x47c488(0x11f)][_0x47c488(0x124)](this[_0x47c488(0xd7)]),await this[_0x47c488(0x13d)][_0x47c488(0x102)](this[_0x47c488(0x11f)]['dir']))),await this[_0x47c488(0x11e)](_0x5e28a4,_0x5e0bb4),await this[_0x47c488(0x13d)][_0x47c488(0x12f)](),_0x57cb14+=0x1,await this[_0x47c488(0x11c)][_0x47c488(0x105)](this[_0x47c488(0xd5)]+_0x47c488(0xe2)),await this['sfLogger'][_0x47c488(0x105)](this['prefix']+_0x47c488(0xc7)+this[_0x47c488(0xc5)][_0x47c488(0x126)]+_0x47c488(0xc3)),await this['sfLogger'][_0x47c488(0x105)](this['prefix']+_0x47c488(0x14d)+this[_0x47c488(0xc5)]['modified']+'\x20components'),await this[_0x47c488(0x11c)][_0x47c488(0x105)](this['prefix']+'\x20Removed\x20'+this[_0x47c488(0xc5)]['removed']+_0x47c488(0xc3)),await this[_0x47c488(0x11c)][_0x47c488(0x105)](this[_0x47c488(0xd5)]+_0x47c488(0xca)+_0x57cb14+'/'+_0x4be141+_0x47c488(0x145))[_0x47c488(0x160)](),this['resetStats']();}}async[a128_0x2a14d7(0xcd)](){const _0x432fad=a128_0x2a14d7;this[_0x432fad(0x11f)]&&await this[_0x432fad(0x11f)]['removeDir']()[_0x432fad(0xf5)](()=>void 0x0),this['mdapiUtils']&&await this['mdapiUtils']['removeDir']()['catch'](()=>void 0x0);}async[a128_0x2a14d7(0xcb)](_0xd2f58e){const _0x4b8d18=a128_0x2a14d7;this[_0x4b8d18(0x10a)]=_0xd2f58e,this[_0x4b8d18(0x141)]['setCommitDto'](this[_0x4b8d18(0x10a)]),this[_0x4b8d18(0xd1)]=typedi_1[_0x4b8d18(0xe3)]['get'](providers_tokens_1[_0x4b8d18(0x116)][_0x4b8d18(0xd1)]),this[_0x4b8d18(0x12d)]=typedi_1['default'][_0x4b8d18(0x159)](providers_tokens_1[_0x4b8d18(0x116)][_0x4b8d18(0x12d)]),this[_0x4b8d18(0x11c)]=typedi_1[_0x4b8d18(0xe3)][_0x4b8d18(0x159)](providers_tokens_1['Tokens'][_0x4b8d18(0x136)]),this[_0x4b8d18(0xd5)]=_0x4b8d18(0x167)+_0xd2f58e['repository']+_0x4b8d18(0x16e)+_0xd2f58e[_0x4b8d18(0xef)]+']\x20['+GitCommitJob_1['name']+']',this[_0x4b8d18(0x11f)]=new git_utils_1[(_0x4b8d18(0x165))](await this[_0x4b8d18(0x117)]()),this[_0x4b8d18(0x13d)]=new mdapi_utils_1[(_0x4b8d18(0xe7))](),this['sfLogger']['log'](this[_0x4b8d18(0xd5)]+_0x4b8d18(0xe0));try{this[_0x4b8d18(0x11c)][_0x4b8d18(0x105)](this[_0x4b8d18(0xd5)]+'\x20Fetch\x20salesforce\x20data.'),await this['gitCommit'][_0x4b8d18(0x125)](),await this[_0x4b8d18(0x141)][_0x4b8d18(0xda)]('In\x20Progress'),this[_0x4b8d18(0x11c)][_0x4b8d18(0x105)](this[_0x4b8d18(0xd5)]+_0x4b8d18(0x113)),this[_0x4b8d18(0xd7)]=await git_internal_1[_0x4b8d18(0xc0)]['getRemoteHash'](await this['getRemote'](),this[_0x4b8d18(0x10a)][_0x4b8d18(0xef)]),this[_0x4b8d18(0x136)][_0x4b8d18(0x105)](_0x4b8d18(0x101),this[_0x4b8d18(0xd7)]);const _0x2f770b=await this[_0x4b8d18(0x141)]['checkSyncStatus'](this['lastCommitHash']);if(_0x2f770b){this['sfLogger'][_0x4b8d18(0x105)]('Branch\x20synchronized.\x20Skip.'),await this[_0x4b8d18(0x141)][_0x4b8d18(0xda)]('Completed');return;}this[_0x4b8d18(0x11c)][_0x4b8d18(0x105)](this[_0x4b8d18(0xd5)]+_0x4b8d18(0x139)+this['gitCommitData']['repositoryGit']+'.'),await this[_0x4b8d18(0x11f)][_0x4b8d18(0xfd)](this[_0x4b8d18(0x10a)]['branch'],this[_0x4b8d18(0x10a)][_0x4b8d18(0x104)]),this[_0x4b8d18(0x11c)]['log'](this[_0x4b8d18(0xd5)]+_0x4b8d18(0xbd));const _0x3005c3=await sfdx_utils_1[_0x4b8d18(0x143)]['isSFDXProject'](this[_0x4b8d18(0x11f)][_0x4b8d18(0xc4)]);await this['fetchCommits']();!this['sfLogger'][_0x4b8d18(0xf0)]()&&this['sfLogger'][_0x4b8d18(0x108)](await salesforce_logger_v3_service_1[_0x4b8d18(0x12e)][_0x4b8d18(0x123)](sf_logger_v3_types_1['LoggerTypes'][_0x4b8d18(0xd0)]));await this['sfLogger'][_0x4b8d18(0x160)]();if(_0xd2f58e[_0x4b8d18(0x14b)]){await this[_0x4b8d18(0x13d)][_0x4b8d18(0x102)](this['gitUtils'][_0x4b8d18(0xc4)]),await this['sfLogger'][_0x4b8d18(0x105)](this[_0x4b8d18(0xd5)]+_0x4b8d18(0x10f))[_0x4b8d18(0x160)]();const _0x24cb37=(await fs_internal_1['FS'][_0x4b8d18(0x127)](this[_0x4b8d18(0x13d)][_0x4b8d18(0xc4)],!![]))['map'](_0x275493=>(0x0,path_1[_0x4b8d18(0x135)])(this[_0x4b8d18(0x13d)][_0x4b8d18(0xc4)],_0x275493));this[_0x4b8d18(0x11c)][_0x4b8d18(0x105)](this['prefix']+_0x4b8d18(0x12b)+_0x24cb37['length']+'\x20files\x20before\x20sync.'),this[_0x4b8d18(0x10a)][_0x4b8d18(0x156)]=[],this[_0x4b8d18(0x10a)]['commits']=[{'files':{'modified':_0x24cb37,'added':[],'removed':[]},'id':await this[_0x4b8d18(0x11f)][_0x4b8d18(0xf8)](),'message':_0x4b8d18(0xe1),'username':constants_1['DEFAULT_GIT_USER_NAME']}];}await this[_0x4b8d18(0x141)][_0x4b8d18(0xc9)]({[this[_0x4b8d18(0x10a)][_0x4b8d18(0xec)]]:{'lastCommit':this[_0x4b8d18(0xd7)]}}),await this[_0x4b8d18(0x11c)][_0x4b8d18(0x105)](this[_0x4b8d18(0xd5)]+_0x4b8d18(0x149)+(_0x3005c3?_0x4b8d18(0xc1):'NO')+_0x4b8d18(0x16c))[_0x4b8d18(0x160)](),await this[_0x4b8d18(0xde)](_0x3005c3),await this[_0x4b8d18(0x11c)][_0x4b8d18(0x105)](this[_0x4b8d18(0xd5)]+_0x4b8d18(0xcf))[_0x4b8d18(0x160)](),await this[_0x4b8d18(0x141)][_0x4b8d18(0xda)](_0x4b8d18(0xeb)),await this[_0x4b8d18(0xbf)]([_0xd2f58e['email']],this[_0x4b8d18(0x12d)]['gitProvider'],_0xd2f58e['repository'],_0xd2f58e[_0x4b8d18(0xef)]);}catch(_0x5f0ab2){await this[_0x4b8d18(0xcd)]();if(_0x5f0ab2 instanceof flosum_commit_error_1[_0x4b8d18(0x122)])await this[_0x4b8d18(0x141)][_0x4b8d18(0xda)]('Completed')[_0x4b8d18(0xf5)](()=>void 0x0),this[_0x4b8d18(0x136)][_0x4b8d18(0x105)](this['prefix']+'\x20Git\x20commits\x20not\x20have\x20a\x20changes.');else{await this['logger'][_0x4b8d18(0x10d)](this[_0x4b8d18(0xd5)]+_0x4b8d18(0xce)+(_0x5f0ab2 instanceof api_error_1[_0x4b8d18(0x13c)]||_0x5f0ab2 instanceof salesforce_error_1[_0x4b8d18(0xe8)]?_0x5f0ab2[_0x4b8d18(0x130)]():_0x5f0ab2)),await this[_0x4b8d18(0x141)]['updateRemoteState']({}),await this[_0x4b8d18(0x141)][_0x4b8d18(0xda)]('Error')[_0x4b8d18(0xf5)](()=>void 0x0),await this[_0x4b8d18(0x152)]([_0xd2f58e[_0x4b8d18(0xdd)]],this[_0x4b8d18(0x12d)]['gitProvider'],_0xd2f58e['repository'],_0xd2f58e['branch']);throw _0x5f0ab2;}}finally{await this[_0x4b8d18(0xcd)](),await this[_0x4b8d18(0x11c)][_0x4b8d18(0x160)]()['catch'](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a128_0x2a14d7(0x157)])({'transient':!![]}),__metadata(a128_0x2a14d7(0x11a),[git_commit_service_1['GitCommitService'],connection_1[a128_0x2a14d7(0xe9)]])],GitCommitJob),exports[a128_0x2a14d7(0x109)]=GitCommitJob;