const a107_0x52defe=a107_0x7d0e;(function(_0x466cb4,_0x1d40e8){const _0x32e6a8=a107_0x7d0e,_0x5e7be1=_0x466cb4();while(!![]){try{const _0x19e926=parseInt(_0x32e6a8(0x1eb))/0x1+-parseInt(_0x32e6a8(0x203))/0x2+parseInt(_0x32e6a8(0x1b1))/0x3*(-parseInt(_0x32e6a8(0x1f3))/0x4)+parseInt(_0x32e6a8(0x1be))/0x5*(parseInt(_0x32e6a8(0x22c))/0x6)+parseInt(_0x32e6a8(0x20a))/0x7+parseInt(_0x32e6a8(0x1bb))/0x8+-parseInt(_0x32e6a8(0x19d))/0x9;if(_0x19e926===_0x1d40e8)break;else _0x5e7be1['push'](_0x5e7be1['shift']());}catch(_0x53cc9c){_0x5e7be1['push'](_0x5e7be1['shift']());}}}(a107_0x359c,0xe6922));const a107_0x3e9e24=(function(){let _0x558f84=!![];return function(_0x363eb5,_0x467d7c){const _0x36622e=_0x558f84?function(){if(_0x467d7c){const _0x180b25=_0x467d7c['apply'](_0x363eb5,arguments);return _0x467d7c=null,_0x180b25;}}:function(){};return _0x558f84=![],_0x36622e;};}()),a107_0x18a885=a107_0x3e9e24(this,function(){const _0x33ab97=a107_0x7d0e;return a107_0x18a885[_0x33ab97(0x1a1)]()['search']('(((.+)+)+)+$')[_0x33ab97(0x1a1)]()[_0x33ab97(0x21b)](a107_0x18a885)['search'](_0x33ab97(0x1c5));});function a107_0x7d0e(_0x3a85a1,_0xc30758){const _0x11a66a=a107_0x359c();return a107_0x7d0e=function(_0x18a885,_0x3e9e24){_0x18a885=_0x18a885-0x19a;let _0x359c1f=_0x11a66a[_0x18a885];return _0x359c1f;},a107_0x7d0e(_0x3a85a1,_0xc30758);}a107_0x18a885();'use strict';var __createBinding=this&&this[a107_0x52defe(0x1f2)]||(Object['create']?function(_0x11eab8,_0x3ad3e7,_0x283eb2,_0x3aa6e6){const _0x45fac6=a107_0x52defe;if(_0x3aa6e6===undefined)_0x3aa6e6=_0x283eb2;var _0x52183e=Object[_0x45fac6(0x23d)](_0x3ad3e7,_0x283eb2);(!_0x52183e||('get'in _0x52183e?!_0x3ad3e7['__esModule']:_0x52183e[_0x45fac6(0x20f)]||_0x52183e['configurable']))&&(_0x52183e={'enumerable':!![],'get':function(){return _0x3ad3e7[_0x283eb2];}}),Object[_0x45fac6(0x1ba)](_0x11eab8,_0x3aa6e6,_0x52183e);}:function(_0x1e9e2f,_0x59fbc7,_0x753edf,_0x3f1b11){if(_0x3f1b11===undefined)_0x3f1b11=_0x753edf;_0x1e9e2f[_0x3f1b11]=_0x59fbc7[_0x753edf];}),__setModuleDefault=this&&this[a107_0x52defe(0x21d)]||(Object['create']?function(_0x34d988,_0x92bc8a){const _0x4cae57=a107_0x52defe;Object[_0x4cae57(0x1ba)](_0x34d988,_0x4cae57(0x1db),{'enumerable':!![],'value':_0x92bc8a});}:function(_0x299a76,_0x4c7c59){_0x299a76['default']=_0x4c7c59;}),__decorate=this&&this[a107_0x52defe(0x1fc)]||function(_0x1be641,_0x3e2a43,_0x4e641a,_0x3d9504){const _0x5ed6c0=a107_0x52defe;var _0x8e701f=arguments[_0x5ed6c0(0x209)],_0xecdfc6=_0x8e701f<0x3?_0x3e2a43:_0x3d9504===null?_0x3d9504=Object[_0x5ed6c0(0x23d)](_0x3e2a43,_0x4e641a):_0x3d9504,_0x1e3b61;if(typeof Reflect===_0x5ed6c0(0x23a)&&typeof Reflect[_0x5ed6c0(0x227)]===_0x5ed6c0(0x1a0))_0xecdfc6=Reflect['decorate'](_0x1be641,_0x3e2a43,_0x4e641a,_0x3d9504);else{for(var _0x1a133e=_0x1be641['length']-0x1;_0x1a133e>=0x0;_0x1a133e--)if(_0x1e3b61=_0x1be641[_0x1a133e])_0xecdfc6=(_0x8e701f<0x3?_0x1e3b61(_0xecdfc6):_0x8e701f>0x3?_0x1e3b61(_0x3e2a43,_0x4e641a,_0xecdfc6):_0x1e3b61(_0x3e2a43,_0x4e641a))||_0xecdfc6;}return _0x8e701f>0x3&&_0xecdfc6&&Object[_0x5ed6c0(0x1ba)](_0x3e2a43,_0x4e641a,_0xecdfc6),_0xecdfc6;},__importStar=this&&this['__importStar']||function(_0x38fe94){const _0x8e8f10=a107_0x52defe;if(_0x38fe94&&_0x38fe94[_0x8e8f10(0x1a3)])return _0x38fe94;var _0x5cc592={};if(_0x38fe94!=null){for(var _0x131a2d in _0x38fe94)if(_0x131a2d!=='default'&&Object[_0x8e8f10(0x23b)][_0x8e8f10(0x1ea)][_0x8e8f10(0x241)](_0x38fe94,_0x131a2d))__createBinding(_0x5cc592,_0x38fe94,_0x131a2d);}return __setModuleDefault(_0x5cc592,_0x38fe94),_0x5cc592;},__metadata=this&&this['__metadata']||function(_0x42945f,_0x238736){const _0x314769=a107_0x52defe;if(typeof Reflect===_0x314769(0x23a)&&typeof Reflect['metadata']===_0x314769(0x1a0))return Reflect[_0x314769(0x237)](_0x42945f,_0x238736);},GitCommitJob_1;Object[a107_0x52defe(0x1ba)](exports,a107_0x52defe(0x1a3),{'value':!![]}),exports[a107_0x52defe(0x1fd)]=void 0x0;const core_1=require(a107_0x52defe(0x247)),fs_internal_1=require(a107_0x52defe(0x19c)),salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),utils_1=require(a107_0x52defe(0x225)),path_1=require(a107_0x52defe(0x232)),typedi_1=__importStar(require('typedi')),constants_1=require(a107_0x52defe(0x239)),salesforce_commits_manager_service_1=require(a107_0x52defe(0x223)),git_commit_utils_1=require(a107_0x52defe(0x204)),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a107_0x52defe(0x19b)),api_error_1=require(a107_0x52defe(0x1e3)),salesforce_error_1=require(a107_0x52defe(0x1a6)),git_commit_service_1=require(a107_0x52defe(0x1bd)),flosum_commit_error_1=require(a107_0x52defe(0x201)),bitbucket_api_service_1=require(a107_0x52defe(0x242)),git_provider_1=require(a107_0x52defe(0x1ac)),sfdx_utils_1=require(a107_0x52defe(0x1ab)),utils_2=require(a107_0x52defe(0x1ef)),git_internal_1=require('../../internal/git.internal'),providers_tokens_1=require(a107_0x52defe(0x1c0)),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require('../../salesforce/types/sf-logger-v3-types');function a107_0x359c(){const _0xa1d0a4=['hasOwnProperty','305053geDXLV','provider','DEFAULT_GIT_USER_EMAIL','providersFactory','../../parsers/utils','sync\x20components','get','__createBinding','181756ejEnEt','stats','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','modified','\x20Fetch\x20remote\x20branch\x20hash.','proceedFile','removed','handleCommit','createCommit','__decorate','GitCommitJob','branch','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','fileNames','../errors/flosum-commit.error','Error','3136560fHmauG','../utils/git-commit.utils','design:paramtypes','cleanUp','setCommitDto','error','length','6334510ALiLgr','mdapiUtils','catch','\x20Fetch\x20salesforce\x20data.','inserted','writable',']\x20[Branch:\x20','relative','readDir','readFilesByFilename','env','gitUtils','Tokens','sfLogger','BitbucketApiService','Git','added','constructor','prepareGitChangedPaths','__setModuleDefault','prefix','\x20components','getProtocol','credentials',']\x20Start\x20proceeding\x20git\x20commits.\x20','../../salesforce/services/salesforce-commits-manager.service','commits','../../../shared/utils','LoggerTypes','decorate','ProvidersFactory','getGitShellAuthorizationString','force','reduce','122556QYQoGx','sendComponents','\x20Job\x20done.','GitCommitService','\x20[SFDX:\x20','\x20Processed\x20','path','isLoggedIn','updateRemoteState','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','\x20Cloning\x20git\x20repository\x20from\x20','metadata','send','../../../../constants','object','prototype','getBranchId','getOwnPropertyDescriptor','getRemote','repositoryGit','commitId','call','../../providers/api/bitbucket-api.service','Last\x20git\x20repository\x20hash\x20is\x20%s.','Bitbucket','MAX_COMPONENTS_PER_TICK','createLoggerId','../../../../core','checkSyncStatus','../utils/mdapi.utils','../../internal/fs.internal','7205859UAPTWS','shift','In\x20Progress','function','toString','GitProvider','__esModule','resetStats','\x20Removed\x20','../../salesforce/errors/salesforce.error','commit','gitCommitData','convertToCleanPaths','Completed','../../salesforce/utils/sfdx.utils','../../providers/types/git-provider','\x20Added\x20','FlosumCommitError','\x20components.','updateFileNamesForSFDXProject','9JnQJyt','\x20Start\x20Git-commit\x20job.','prepareMdapi','removeDir','getRecordTypes','fetchComponentsMetadata','gitCommit','Logger','splice','defineProperty','4191192UPjgJv','changes','../services/git-commit.service','420mHvFZK','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','../../providers/providers.tokens','clone','SalesforceLogger3','gitApiService','\x20commits.','(((.+)+)+)+$','://','checkoutTo','MDApiUtils','username','getRemoteHash','lastCommitHash','message','logger','fetchCommits','SalesforceError','dir','Branch\x20synchronized.\x20Skip.','getRepositoryId','getCurrentHash','replace','flat','Service','push','ApiError','repository','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','default','updateStatus','\x20Commit\x20Summary','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','run','name','YES','\x20files\x20before\x20sync.','../../../../core/errors/api.error','values','setLoggerId','proceedCommits','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','log','map'];a107_0x359c=function(){return _0xa1d0a4;};return a107_0x359c();}let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x568da0,_0x40668b){const _0x44a1dc=a107_0x52defe;this['gitCommit']=_0x568da0,this[_0x44a1dc(0x1ee)]=_0x40668b,this[_0x44a1dc(0x245)]=+(process[_0x44a1dc(0x214)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x44a1dc(0x1cd)]=new core_1[(_0x44a1dc(0x1b8))](GitCommitJob_1['name']),this['commitId']='',this[_0x44a1dc(0x1f4)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a107_0x52defe(0x23e)](){const _0x39181e=a107_0x52defe,{repositoryGit:_0x220b4}=this[_0x39181e(0x1a8)],_0x130fc8=typedi_1['default']['get'](providers_tokens_1['Tokens'][_0x39181e(0x221)]);if(this[_0x39181e(0x1a8)][_0x39181e(0x1ec)]===git_provider_1[_0x39181e(0x1a2)][_0x39181e(0x244)]){const _0x4f3b4b=typedi_1[_0x39181e(0x1db)]['get'](bitbucket_api_service_1[_0x39181e(0x218)]);await _0x4f3b4b[_0x39181e(0x233)]();}return _0x220b4[_0x39181e(0x1d4)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x39181e(0x220)])(_0x220b4)+_0x39181e(0x1c6)+_0x130fc8[_0x39181e(0x229)]()+'@');}[a107_0x52defe(0x1a4)](){const _0x3150cd=a107_0x52defe;this[_0x3150cd(0x1f4)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a107_0x52defe(0x1b0)](){const _0x1e89ec=a107_0x52defe,_0x3a2a11=[...this['gitCommitData'][_0x1e89ec(0x200)]];this['gitCommitData'][_0x1e89ec(0x200)]=[];for(const _0x49964f of _0x3a2a11){this[_0x1e89ec(0x1a8)]['fileNames'][_0x1e89ec(0x1d7)](...await(0x0,utils_2[_0x1e89ec(0x213)])(_0x49964f,this[_0x1e89ec(0x20b)][_0x1e89ec(0x1d0)]));}}async['fetchCommits'](){const _0x7aa3bd=a107_0x52defe;if(this[_0x7aa3bd(0x1a8)][_0x7aa3bd(0x22a)])return;const _0x11c82d=[];for(const _0x3f6e90 of this[_0x7aa3bd(0x1a8)][_0x7aa3bd(0x224)]){const _0x5d938b=await this[_0x7aa3bd(0x215)]['describeCommit'](_0x3f6e90['id']);_0x3f6e90['username']=_0x5d938b['author'],_0x3f6e90[_0x7aa3bd(0x1cc)]=_0x5d938b[_0x7aa3bd(0x1cc)],_0x3f6e90['files']=_0x5d938b[_0x7aa3bd(0x1bc)],_0x3f6e90['email']=_0x5d938b['email'];if(_0x3f6e90['email']===constants_1[_0x7aa3bd(0x1ed)])throw new flosum_commit_error_1['FlosumCommitError']();_0x11c82d['push'](...Object[_0x7aa3bd(0x1e4)](_0x3f6e90['files'])[_0x7aa3bd(0x1d5)]());}this[_0x7aa3bd(0x1a8)][_0x7aa3bd(0x200)]=[...new Set((0x0,git_commit_utils_1['prepareGitChangedPaths'])(_0x11c82d))];}async[a107_0x52defe(0x22d)](_0x26f0ae,_0x9e481,_0x4d39a1){const _0x3caf9d=a107_0x52defe,_0x14067f=_0x4d39a1[_0x3caf9d(0x22b)]((_0x516a1e,_0x604e15)=>{const _0x2fc7e4=_0x3caf9d;return _0x516a1e[_0x2fc7e4(0x20e)]['push'](..._0x604e15[_0x2fc7e4(0x20e)]),_0x516a1e['modified'][_0x2fc7e4(0x1d7)](..._0x604e15[_0x2fc7e4(0x1f6)]),_0x516a1e[_0x2fc7e4(0x1f9)][_0x2fc7e4(0x1d7)](..._0x604e15[_0x2fc7e4(0x1f9)]),_0x516a1e;},{'inserted':[],'modified':[],'removed':[]}),_0x42ed79=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x3caf9d(0x1b7)][_0x3caf9d(0x1b5)](),'branchId':this[_0x3caf9d(0x1b7)][_0x3caf9d(0x23c)](),'repositoryId':this[_0x3caf9d(0x1b7)][_0x3caf9d(0x1d2)](),'logger':this[_0x3caf9d(0x217)],'commitId':this['commitId']});await _0x42ed79[_0x3caf9d(0x1e6)]([{'author':_0x26f0ae,'message':_0x9e481,'inserted':_0x14067f[_0x3caf9d(0x20e)],'modified':_0x14067f[_0x3caf9d(0x1f6)],'removed':_0x14067f['removed']}]);}async['handleCommit'](_0x4f932a,_0xe03577){const _0x10ad70=a107_0x52defe;await this['sfLogger'][_0x10ad70(0x1e8)](this[_0x10ad70(0x21e)]+'\x20Download\x20components\x20metadata\x20from\x20Flosum.')['send'](),await this[_0x10ad70(0x1b7)][_0x10ad70(0x1b6)](_0xe03577);const {added:_0x39efa8,modified:_0x360798,removed:_0x4a1316}=_0x4f932a['files'];_0xe03577&&_0x360798[_0x10ad70(0x1d7)](..._0x4a1316['splice'](0x0));const _0x316610=(0x0,utils_2[_0x10ad70(0x1a9)])((0x0,git_commit_utils_1[_0x10ad70(0x21c)])([..._0x39efa8,..._0x360798,..._0x4a1316],_0xe03577&&!this[_0x10ad70(0x1a8)][_0x10ad70(0x22a)]));let _0x49585d=0x0;const _0x13275e=[];(_0x39efa8[_0x10ad70(0x209)]||_0x360798[_0x10ad70(0x209)])&&this[_0x10ad70(0x1b7)][_0x10ad70(0x1d2)]()&&(this[_0x10ad70(0x240)]=await this[_0x10ad70(0x1b7)][_0x10ad70(0x1fb)](_0x4f932a[_0x10ad70(0x1cc)]));const _0x4e9433=_0x316610[_0x10ad70(0x209)];let _0x41a035=0x0;while(_0x316610[_0x10ad70(0x209)]){const _0x10a241=_0x316610[_0x10ad70(0x19e)](),_0x82a657=await this[_0x10ad70(0x1b7)][_0x10ad70(0x1f8)](_0x10a241,this[_0x10ad70(0x20b)][_0x10ad70(0x1d0)],_0xe03577&&!this[_0x10ad70(0x1a8)][_0x10ad70(0x22a)]);_0x49585d+=_0x82a657[_0x10ad70(0x20e)][_0x10ad70(0x209)]+_0x82a657['removed'][_0x10ad70(0x209)]+_0x82a657[_0x10ad70(0x1f6)][_0x10ad70(0x209)],this[_0x10ad70(0x1f4)][_0x10ad70(0x21a)]+=_0x82a657[_0x10ad70(0x20e)][_0x10ad70(0x209)],this[_0x10ad70(0x1f4)]['modified']+=_0x82a657[_0x10ad70(0x1f6)][_0x10ad70(0x209)],this[_0x10ad70(0x1f4)]['removed']+=_0x82a657[_0x10ad70(0x1f9)][_0x10ad70(0x209)],_0x41a035++,_0x41a035%0x64===0x0&&this[_0x10ad70(0x1cd)][_0x10ad70(0x1e8)](_0x10ad70(0x1e7),_0x41a035,_0x4e9433,_0x49585d),_0x13275e[_0x10ad70(0x1d7)](_0x82a657),_0x49585d>this['MAX_COMPONENTS_PER_TICK']&&(await this[_0x10ad70(0x22d)](_0x4f932a[_0x10ad70(0x1c9)],_0x4f932a[_0x10ad70(0x1cc)],_0x13275e),await this[_0x10ad70(0x217)][_0x10ad70(0x1e8)](this[_0x10ad70(0x21e)]+_0x10ad70(0x231)+_0x49585d+_0x10ad70(0x1af))['send'](),_0x49585d=0x0,_0x13275e[_0x10ad70(0x1b9)](0x0));}_0x13275e[_0x10ad70(0x209)]&&(await this['sendComponents'](_0x4f932a[_0x10ad70(0x1c9)],_0x4f932a[_0x10ad70(0x1cc)],_0x13275e),await this[_0x10ad70(0x217)][_0x10ad70(0x1e8)](this['prefix']+_0x10ad70(0x231)+_0x49585d+_0x10ad70(0x1af))[_0x10ad70(0x238)]());}async[a107_0x52defe(0x1e6)](_0x253e66){const _0x56dd3c=a107_0x52defe,_0x32f92d=[...this[_0x56dd3c(0x1a8)][_0x56dd3c(0x224)]],_0x2264ff=_0x32f92d[_0x56dd3c(0x209)];let _0x4dd82f=0x0;while(_0x32f92d['length']){const _0x3249b4=_0x32f92d['shift']();!this[_0x56dd3c(0x1a8)][_0x56dd3c(0x22a)]&&(this[_0x56dd3c(0x1b7)][_0x56dd3c(0x1d2)]()?(await this[_0x56dd3c(0x215)][_0x56dd3c(0x1c7)](_0x3249b4['id']),await this[_0x56dd3c(0x20b)][_0x56dd3c(0x1b3)](this[_0x56dd3c(0x215)][_0x56dd3c(0x1d0)])):(await this[_0x56dd3c(0x215)][_0x56dd3c(0x1c7)](this[_0x56dd3c(0x1cb)]),await this['mdapiUtils'][_0x56dd3c(0x1b3)](this[_0x56dd3c(0x215)][_0x56dd3c(0x1d0)]))),await this[_0x56dd3c(0x1fa)](_0x3249b4,_0x253e66),await this['mdapiUtils']['removeDir'](),_0x4dd82f+=0x1,await this['sfLogger'][_0x56dd3c(0x1e8)](this[_0x56dd3c(0x21e)]+_0x56dd3c(0x1dd)),await this[_0x56dd3c(0x217)][_0x56dd3c(0x1e8)](this[_0x56dd3c(0x21e)]+_0x56dd3c(0x1ad)+this[_0x56dd3c(0x1f4)][_0x56dd3c(0x21a)]+_0x56dd3c(0x21f)),await this[_0x56dd3c(0x217)][_0x56dd3c(0x1e8)](this[_0x56dd3c(0x21e)]+'\x20Modified\x20'+this['stats'][_0x56dd3c(0x1f6)]+_0x56dd3c(0x21f)),await this['sfLogger'][_0x56dd3c(0x1e8)](this[_0x56dd3c(0x21e)]+_0x56dd3c(0x1a5)+this['stats'][_0x56dd3c(0x1f9)]+_0x56dd3c(0x21f)),await this['sfLogger'][_0x56dd3c(0x1e8)](this[_0x56dd3c(0x21e)]+'\x20Proceeded\x20'+_0x4dd82f+'/'+_0x2264ff+_0x56dd3c(0x1c4))[_0x56dd3c(0x238)](),this[_0x56dd3c(0x1a4)]();}}async['cleanUp'](){const _0x23aa69=a107_0x52defe;this[_0x23aa69(0x215)]&&await this[_0x23aa69(0x215)][_0x23aa69(0x1b4)]()[_0x23aa69(0x20c)](()=>void 0x0),this['mdapiUtils']&&await this[_0x23aa69(0x20b)][_0x23aa69(0x1b4)]()[_0x23aa69(0x20c)](()=>void 0x0);}async[a107_0x52defe(0x1df)](_0x2fa9af){const _0x1cb9a7=a107_0x52defe;this[_0x1cb9a7(0x1a8)]=_0x2fa9af,this['gitCommit'][_0x1cb9a7(0x207)](this[_0x1cb9a7(0x1a8)]),this[_0x1cb9a7(0x1c3)]=typedi_1['default'][_0x1cb9a7(0x1f1)](providers_tokens_1['Tokens'][_0x1cb9a7(0x1c3)]),this['config']=typedi_1[_0x1cb9a7(0x1db)][_0x1cb9a7(0x1f1)](providers_tokens_1[_0x1cb9a7(0x216)]['config']),this['sfLogger']=typedi_1[_0x1cb9a7(0x1db)][_0x1cb9a7(0x1f1)](providers_tokens_1[_0x1cb9a7(0x216)][_0x1cb9a7(0x1cd)]),this[_0x1cb9a7(0x21e)]=_0x1cb9a7(0x235)+_0x2fa9af[_0x1cb9a7(0x1d9)]+_0x1cb9a7(0x210)+_0x2fa9af[_0x1cb9a7(0x1fe)]+']\x20['+GitCommitJob_1[_0x1cb9a7(0x1e0)]+']',this['gitUtils']=new git_utils_1['GitUtils'](await this[_0x1cb9a7(0x23e)]()),this[_0x1cb9a7(0x20b)]=new mdapi_utils_1[(_0x1cb9a7(0x1c8))](),this['sfLogger'][_0x1cb9a7(0x1e8)](this['prefix']+_0x1cb9a7(0x1b2));try{this[_0x1cb9a7(0x217)]['log'](this[_0x1cb9a7(0x21e)]+_0x1cb9a7(0x20d)),await this[_0x1cb9a7(0x1b7)]['fetchRepositoryOrBranchData'](),await this[_0x1cb9a7(0x1b7)][_0x1cb9a7(0x1dc)](_0x1cb9a7(0x19f)),this[_0x1cb9a7(0x217)][_0x1cb9a7(0x1e8)](this['prefix']+_0x1cb9a7(0x1f7)),this['lastCommitHash']=await git_internal_1[_0x1cb9a7(0x219)][_0x1cb9a7(0x1ca)](await this[_0x1cb9a7(0x23e)](),this[_0x1cb9a7(0x1a8)][_0x1cb9a7(0x1fe)]),this[_0x1cb9a7(0x1cd)][_0x1cb9a7(0x1e8)](_0x1cb9a7(0x243),this[_0x1cb9a7(0x1cb)]);const _0x2ceb3e=await this['gitCommit'][_0x1cb9a7(0x19a)](this[_0x1cb9a7(0x1cb)]);if(_0x2ceb3e){this[_0x1cb9a7(0x217)][_0x1cb9a7(0x1e8)](_0x1cb9a7(0x1d1)),await this[_0x1cb9a7(0x1b7)]['updateStatus'](_0x1cb9a7(0x1aa));return;}this[_0x1cb9a7(0x217)][_0x1cb9a7(0x1e8)](this[_0x1cb9a7(0x21e)]+_0x1cb9a7(0x236)+this[_0x1cb9a7(0x1a8)][_0x1cb9a7(0x23f)]+'.'),await this[_0x1cb9a7(0x215)][_0x1cb9a7(0x1c1)](this[_0x1cb9a7(0x1a8)][_0x1cb9a7(0x1fe)],this[_0x1cb9a7(0x1a8)][_0x1cb9a7(0x1d9)]),this[_0x1cb9a7(0x217)]['log'](this['prefix']+_0x1cb9a7(0x1f5));const _0xaa4ea6=await sfdx_utils_1['SFDX']['isSFDXProject'](this[_0x1cb9a7(0x215)]['dir']);await this[_0x1cb9a7(0x1ce)]();!this['sfLogger']['getLoggerId']()&&this[_0x1cb9a7(0x217)][_0x1cb9a7(0x1e5)](await salesforce_logger_v3_service_1[_0x1cb9a7(0x1c2)][_0x1cb9a7(0x246)](sf_logger_v3_types_1[_0x1cb9a7(0x226)][_0x1cb9a7(0x1a7)]));await this[_0x1cb9a7(0x217)][_0x1cb9a7(0x238)]();if(_0x2fa9af[_0x1cb9a7(0x22a)]){await this[_0x1cb9a7(0x20b)][_0x1cb9a7(0x1b3)](this['gitUtils']['dir']),await this[_0x1cb9a7(0x217)][_0x1cb9a7(0x1e8)](this[_0x1cb9a7(0x21e)]+_0x1cb9a7(0x1de))['send']();const _0x415916=(await fs_internal_1['FS'][_0x1cb9a7(0x212)](this[_0x1cb9a7(0x20b)][_0x1cb9a7(0x1d0)],!![]))[_0x1cb9a7(0x1e9)](_0x622039=>(0x0,path_1[_0x1cb9a7(0x211)])(this['mdapiUtils'][_0x1cb9a7(0x1d0)],_0x622039));this['sfLogger']['log'](this['prefix']+_0x1cb9a7(0x1ff)+_0x415916[_0x1cb9a7(0x209)]+_0x1cb9a7(0x1e2)),this[_0x1cb9a7(0x1a8)][_0x1cb9a7(0x200)]=[],this[_0x1cb9a7(0x1a8)][_0x1cb9a7(0x224)]=[{'files':{'modified':_0x415916,'added':[],'removed':[]},'id':await this[_0x1cb9a7(0x215)][_0x1cb9a7(0x1d3)](),'message':_0x1cb9a7(0x1f0),'username':constants_1['DEFAULT_GIT_USER_NAME']}];}await this['gitCommit'][_0x1cb9a7(0x234)]({[this['gitCommitData'][_0x1cb9a7(0x23f)]]:{'lastCommit':this[_0x1cb9a7(0x1cb)]}}),await this[_0x1cb9a7(0x217)]['log'](this[_0x1cb9a7(0x21e)]+_0x1cb9a7(0x230)+(_0xaa4ea6?_0x1cb9a7(0x1e1):'NO')+_0x1cb9a7(0x222))['send'](),await this[_0x1cb9a7(0x1e6)](_0xaa4ea6),await this[_0x1cb9a7(0x217)][_0x1cb9a7(0x1e8)](this[_0x1cb9a7(0x21e)]+_0x1cb9a7(0x22e))['send'](),await this['gitCommit'][_0x1cb9a7(0x1dc)](_0x1cb9a7(0x1aa));}catch(_0x298043){await this['cleanUp']();if(_0x298043 instanceof flosum_commit_error_1[_0x1cb9a7(0x1ae)])await this[_0x1cb9a7(0x1b7)]['updateStatus']('Completed')[_0x1cb9a7(0x20c)](()=>void 0x0),this[_0x1cb9a7(0x1cd)]['log'](this[_0x1cb9a7(0x21e)]+_0x1cb9a7(0x1bf));else{await this[_0x1cb9a7(0x1cd)][_0x1cb9a7(0x208)](this[_0x1cb9a7(0x21e)]+_0x1cb9a7(0x1da)+(_0x298043 instanceof api_error_1[_0x1cb9a7(0x1d8)]||_0x298043 instanceof salesforce_error_1[_0x1cb9a7(0x1cf)]?_0x298043[_0x1cb9a7(0x1a1)]():_0x298043)),await this[_0x1cb9a7(0x1b7)][_0x1cb9a7(0x234)]({}),await this[_0x1cb9a7(0x1b7)][_0x1cb9a7(0x1dc)](_0x1cb9a7(0x202))['catch'](()=>void 0x0);throw _0x298043;}}finally{await this[_0x1cb9a7(0x206)](),await this[_0x1cb9a7(0x217)][_0x1cb9a7(0x238)]()[_0x1cb9a7(0x20c)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a107_0x52defe(0x1d6)])({'transient':!![]}),__metadata(a107_0x52defe(0x205),[git_commit_service_1[a107_0x52defe(0x22f)],connection_1[a107_0x52defe(0x228)]])],GitCommitJob),exports['GitCommitJob']=GitCommitJob;