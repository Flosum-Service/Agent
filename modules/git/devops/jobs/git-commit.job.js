function a127_0x5a0e(_0x1f8a57,_0x5e55a2){const _0x427192=a127_0x2d09();return a127_0x5a0e=function(_0x4e7c95,_0x2cbfe7){_0x4e7c95=_0x4e7c95-0x1c9;let _0x2d09f6=_0x427192[_0x4e7c95];return _0x2d09f6;},a127_0x5a0e(_0x1f8a57,_0x5e55a2);}const a127_0x3de871=a127_0x5a0e;(function(_0x31a894,_0x743f63){const _0x4d8239=a127_0x5a0e,_0x5f056d=_0x31a894();while(!![]){try{const _0x4724db=-parseInt(_0x4d8239(0x1fc))/0x1+parseInt(_0x4d8239(0x1e4))/0x2*(-parseInt(_0x4d8239(0x246))/0x3)+-parseInt(_0x4d8239(0x261))/0x4*(parseInt(_0x4d8239(0x24f))/0x5)+parseInt(_0x4d8239(0x1f2))/0x6*(-parseInt(_0x4d8239(0x27f))/0x7)+-parseInt(_0x4d8239(0x1fd))/0x8*(parseInt(_0x4d8239(0x250))/0x9)+parseInt(_0x4d8239(0x1f7))/0xa*(parseInt(_0x4d8239(0x26a))/0xb)+-parseInt(_0x4d8239(0x23e))/0xc*(-parseInt(_0x4d8239(0x25a))/0xd);if(_0x4724db===_0x743f63)break;else _0x5f056d['push'](_0x5f056d['shift']());}catch(_0x4d8796){_0x5f056d['push'](_0x5f056d['shift']());}}}(a127_0x2d09,0x5cb4b));const a127_0x2cbfe7=(function(){let _0x5c1901=!![];return function(_0x507e51,_0x45bc42){const _0x24a98d=_0x5c1901?function(){const _0x44abce=a127_0x5a0e;if(_0x45bc42){const _0x12d460=_0x45bc42[_0x44abce(0x236)](_0x507e51,arguments);return _0x45bc42=null,_0x12d460;}}:function(){};return _0x5c1901=![],_0x24a98d;};}()),a127_0x4e7c95=a127_0x2cbfe7(this,function(){const _0x24cdf9=a127_0x5a0e;return a127_0x4e7c95['toString']()[_0x24cdf9(0x244)](_0x24cdf9(0x21d))[_0x24cdf9(0x251)]()[_0x24cdf9(0x234)](a127_0x4e7c95)['search'](_0x24cdf9(0x21d));});a127_0x4e7c95();'use strict';var __createBinding=this&&this[a127_0x3de871(0x1cd)]||(Object['create']?function(_0xb31f53,_0x10b1ea,_0x5d6627,_0x1bb721){const _0x4ab9b8=a127_0x3de871;if(_0x1bb721===undefined)_0x1bb721=_0x5d6627;var _0x3885e5=Object[_0x4ab9b8(0x272)](_0x10b1ea,_0x5d6627);(!_0x3885e5||(_0x4ab9b8(0x27e)in _0x3885e5?!_0x10b1ea[_0x4ab9b8(0x1ff)]:_0x3885e5[_0x4ab9b8(0x269)]||_0x3885e5[_0x4ab9b8(0x277)]))&&(_0x3885e5={'enumerable':!![],'get':function(){return _0x10b1ea[_0x5d6627];}}),Object[_0x4ab9b8(0x243)](_0xb31f53,_0x1bb721,_0x3885e5);}:function(_0x191532,_0x29d837,_0x27892a,_0x2c074c){if(_0x2c074c===undefined)_0x2c074c=_0x27892a;_0x191532[_0x2c074c]=_0x29d837[_0x27892a];}),__setModuleDefault=this&&this[a127_0x3de871(0x1d8)]||(Object[a127_0x3de871(0x20c)]?function(_0x13d447,_0xcc58a8){const _0x336c82=a127_0x3de871;Object['defineProperty'](_0x13d447,_0x336c82(0x206),{'enumerable':!![],'value':_0xcc58a8});}:function(_0x1048f2,_0x26c865){const _0x3c1641=a127_0x3de871;_0x1048f2[_0x3c1641(0x206)]=_0x26c865;}),__decorate=this&&this[a127_0x3de871(0x1d9)]||function(_0x17bbe4,_0x232792,_0x119885,_0x504df7){const _0x1b6051=a127_0x3de871;var _0x260dcb=arguments[_0x1b6051(0x276)],_0x2922b6=_0x260dcb<0x3?_0x232792:_0x504df7===null?_0x504df7=Object['getOwnPropertyDescriptor'](_0x232792,_0x119885):_0x504df7,_0x2243ce;if(typeof Reflect===_0x1b6051(0x1e3)&&typeof Reflect[_0x1b6051(0x22e)]===_0x1b6051(0x259))_0x2922b6=Reflect[_0x1b6051(0x22e)](_0x17bbe4,_0x232792,_0x119885,_0x504df7);else{for(var _0x432f1f=_0x17bbe4['length']-0x1;_0x432f1f>=0x0;_0x432f1f--)if(_0x2243ce=_0x17bbe4[_0x432f1f])_0x2922b6=(_0x260dcb<0x3?_0x2243ce(_0x2922b6):_0x260dcb>0x3?_0x2243ce(_0x232792,_0x119885,_0x2922b6):_0x2243ce(_0x232792,_0x119885))||_0x2922b6;}return _0x260dcb>0x3&&_0x2922b6&&Object['defineProperty'](_0x232792,_0x119885,_0x2922b6),_0x2922b6;},__importStar=this&&this[a127_0x3de871(0x240)]||function(_0x3a631f){const _0x41290f=a127_0x3de871;if(_0x3a631f&&_0x3a631f[_0x41290f(0x1ff)])return _0x3a631f;var _0x3cafbc={};if(_0x3a631f!=null){for(var _0x311203 in _0x3a631f)if(_0x311203!==_0x41290f(0x206)&&Object[_0x41290f(0x22f)][_0x41290f(0x1e9)][_0x41290f(0x1ed)](_0x3a631f,_0x311203))__createBinding(_0x3cafbc,_0x3a631f,_0x311203);}return __setModuleDefault(_0x3cafbc,_0x3a631f),_0x3cafbc;},__metadata=this&&this['__metadata']||function(_0x4a521b,_0x4888f6){const _0x38a49d=a127_0x3de871;if(typeof Reflect==='object'&&typeof Reflect[_0x38a49d(0x204)]==='function')return Reflect[_0x38a49d(0x204)](_0x4a521b,_0x4888f6);},GitCommitJob_1;Object['defineProperty'](exports,a127_0x3de871(0x1ff),{'value':!![]}),exports[a127_0x3de871(0x1cc)]=void 0x0;function a127_0x2d09(){const _0xaf8306=['1208SpvWtG','config','__esModule','provider','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','getBranchId',']\x20[Branch:\x20','metadata','design:paramtypes','default','prefix','replace','CommitToFlosumCompletedNotification','../../providers/api/bitbucket-api.service','proceedCommits','create','\x20Commit\x20Summary','env','branch','\x20Start\x20Git-commit\x20job.','error','commits','../../../../constants','../../salesforce/types/sf-logger-v3-types','sendComponents','message','dir','send','../errors/flosum-commit.error','clone','CommitToFlosumErrorNotification','Service','(((.+)+)+)+$','added','Error','sfLogger','run','../../parsers/utils','\x20files\x20before\x20sync.','setCommitDto','gitUtils','inserted','handleCommit','catch','completeNotification','execute','setLoggerId','errorNotification','getRepositoryId','decorate','prototype','email','GitCommitService','name','updateStatus','constructor','typedi','apply','gitCommit','\x20Added\x20','\x20Removed\x20','getRecordTypes','DEFAULT_GIT_USER_NAME','PathUtils','\x20Proceeded\x20','240maiCwg','credentials','__importStar','flat','DEFAULT_GIT_USER_EMAIL','defineProperty','search','lastCommitHash','1842537osgdyY','isEmailNotificationsEnabled','stats','map','push','fetchCommits','username','fetchRepositoryOrBranchData','../../providers/providers.tokens','15wnFcOZ','37683AzBGeT','toString','commitId','resetStats','checkoutTo','GitProvider','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','files','function','1238198TShzms','repositoryGit','MDApiUtils','GitUtils','changes','../../salesforce/services/salesforce-logger-v3.service','fileNames','379580dmQQkK','../../salesforce/errors/salesforce.error','../../providers/types/git-provider','Completed',']\x20[','\x20[SFDX:\x20','shift','removed','writable','211750WkoovT','../utils/mdapi.utils','../utils/path.utils','logger','modified','values','gitCommitData',']\x20Start\x20proceeding\x20git\x20commits.\x20','getOwnPropertyDescriptor','log','gitApiService','info','length','configurable','prepareMdapi','getProtocol','Last\x20git\x20repository\x20hash\x20is\x20%s.','prepareGitChangedPaths','reduce','../../notifications/commit-to-flosum-completed.notification','get','3743852CdxEJx','Email\x20notifications\x20are\x20disabled.','MAX_COMPONENTS_PER_TICK','gitProvider','GitCommitJob','__createBinding','../../notifications/commit-to-flosum-error.notification','relative','://','\x20Modified\x20','FlosumCommitError','YES','convertToCleanPaths','Tokens','../../../shared/utils','Bitbucket','__setModuleDefault','__decorate','mdapiUtils','repository','createCommit','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','getLoggerId','author','In\x20Progress','force','../../../../core/errors/api.error','object','2CrbZww','removeDir','isSFDXProject','Logger','\x20Processed\x20','hasOwnProperty','\x20Download\x20components\x20metadata\x20from\x20Flosum.','SalesforceCommitsManager','getRemote','call','Git','recordType','ApiError','\x20Job\x20done.','6OnJyOl','../../internal/git.internal','proceedFile','\x20components','\x20Fetch\x20remote\x20branch\x20hash.','350wQYmyd','\x20components.','getGitShellAuthorizationString','cleanUp','../../../../core','133010ARypBf'];a127_0x2d09=function(){return _0xaf8306;};return a127_0x2d09();}const core_1=require(a127_0x3de871(0x1fb)),fs_internal_1=require('../../internal/fs.internal'),salesforce_logger_v3_service_1=require(a127_0x3de871(0x25f)),utils_1=require(a127_0x3de871(0x1d6)),path_1=require('path'),typedi_1=__importStar(require(a127_0x3de871(0x235))),constants_1=require(a127_0x3de871(0x213)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a127_0x3de871(0x26b)),api_error_1=require(a127_0x3de871(0x1e2)),salesforce_error_1=require(a127_0x3de871(0x262)),git_commit_service_1=require('../services/git-commit.service'),flosum_commit_error_1=require(a127_0x3de871(0x219)),bitbucket_api_service_1=require(a127_0x3de871(0x20a)),git_provider_1=require(a127_0x3de871(0x263)),sfdx_utils_1=require('../../salesforce/utils/sfdx.utils'),utils_2=require(a127_0x3de871(0x222)),git_internal_1=require(a127_0x3de871(0x1f3)),providers_tokens_1=require(a127_0x3de871(0x24e)),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require(a127_0x3de871(0x214)),path_utils_1=require(a127_0x3de871(0x26c)),commit_to_flosum_completed_notification_1=require(a127_0x3de871(0x27d)),commit_to_flosum_error_notification_1=require(a127_0x3de871(0x1ce));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x3ce827,_0x4faaa4){const _0x40ffe9=a127_0x3de871;this[_0x40ffe9(0x237)]=_0x3ce827,this['providersFactory']=_0x4faaa4,this[_0x40ffe9(0x1ca)]=+(process[_0x40ffe9(0x20e)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x40ffe9(0x26d)]=new core_1[(_0x40ffe9(0x1e7))](GitCommitJob_1[_0x40ffe9(0x232)]),this[_0x40ffe9(0x252)]='',this[_0x40ffe9(0x248)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x3de871(0x1ec)](){const _0x2199e2=a127_0x3de871,{repositoryGit:_0x1b15a5}=this[_0x2199e2(0x270)],_0x18e2d7=typedi_1['default'][_0x2199e2(0x27e)](providers_tokens_1[_0x2199e2(0x1d5)][_0x2199e2(0x23f)]);if(this[_0x2199e2(0x270)][_0x2199e2(0x200)]===git_provider_1[_0x2199e2(0x255)][_0x2199e2(0x1d7)]){const _0x17bae2=typedi_1[_0x2199e2(0x206)][_0x2199e2(0x27e)](bitbucket_api_service_1['BitbucketApiService']);await _0x17bae2['isLoggedIn']();}return _0x1b15a5[_0x2199e2(0x208)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2199e2(0x279)])(_0x1b15a5)+_0x2199e2(0x1d0)+_0x18e2d7[_0x2199e2(0x1f9)]()+'@');}async[a127_0x3de871(0x229)](_0x2e6d63,_0x187f90,_0x3520c2,_0x4bf2f8){const _0x58ddcf=a127_0x3de871;if(!this[_0x58ddcf(0x1fe)][_0x58ddcf(0x247)]){this[_0x58ddcf(0x26d)]['info'](_0x58ddcf(0x1c9));return;}await new commit_to_flosum_completed_notification_1['CommitToFlosumCompletedNotification']({'emails':_0x2e6d63,'gitProvider':_0x187f90,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x58ddcf(0x209)]['name'],'repositoryName':_0x3520c2,'branchName':_0x4bf2f8})[_0x58ddcf(0x22a)]();}async['errorNotification'](_0x5c900a,_0x1fe07d,_0x288e82,_0x52cc7e){const _0x4c8e67=a127_0x3de871;if(!this['config'][_0x4c8e67(0x247)]){this[_0x4c8e67(0x26d)][_0x4c8e67(0x275)](_0x4c8e67(0x1c9));return;}await new commit_to_flosum_error_notification_1['CommitToFlosumErrorNotification']({'emails':_0x5c900a,'gitProvider':_0x1fe07d,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x4c8e67(0x21b)][_0x4c8e67(0x232)],'repositoryName':_0x288e82,'branchName':_0x52cc7e})[_0x4c8e67(0x22a)]();}[a127_0x3de871(0x253)](){const _0x27d05d=a127_0x3de871;this[_0x27d05d(0x248)]={'removed':0x0,'modified':0x0,'added':0x0};}async['updateFileNamesForSFDXProject'](){const _0x4770cb=a127_0x3de871,_0x150f84=[...this[_0x4770cb(0x270)][_0x4770cb(0x260)]];this[_0x4770cb(0x270)][_0x4770cb(0x260)]=[];for(const _0x46d810 of _0x150f84){this[_0x4770cb(0x270)]['fileNames']['push'](...await(0x0,utils_2['readFilesByFilename'])(_0x46d810,this[_0x4770cb(0x1da)][_0x4770cb(0x217)]));}}async[a127_0x3de871(0x24b)](){const _0x295b33=a127_0x3de871;if(this[_0x295b33(0x270)][_0x295b33(0x1e1)])return;const _0x6f1354=[];for(const _0x52a2ac of this[_0x295b33(0x270)][_0x295b33(0x212)]){const _0x51eff0=await this[_0x295b33(0x225)]['describeCommit'](_0x52a2ac['id']);_0x52a2ac[_0x295b33(0x24c)]=_0x51eff0[_0x295b33(0x1df)],_0x52a2ac[_0x295b33(0x216)]=_0x51eff0[_0x295b33(0x216)],_0x52a2ac[_0x295b33(0x258)]=_0x51eff0[_0x295b33(0x25e)],_0x52a2ac['email']=_0x51eff0[_0x295b33(0x230)];if(_0x52a2ac[_0x295b33(0x230)]===constants_1[_0x295b33(0x242)])throw new flosum_commit_error_1[(_0x295b33(0x1d2))]();_0x6f1354[_0x295b33(0x24a)](...Object[_0x295b33(0x26f)](_0x52a2ac[_0x295b33(0x258)])[_0x295b33(0x241)]());}this[_0x295b33(0x270)]['fileNames']=[...new Set(path_utils_1[_0x295b33(0x23c)][_0x295b33(0x27b)](this['gitCommit']['recordType'],_0x6f1354,![]))];}async[a127_0x3de871(0x215)](_0x3caab9,_0x3783b1,_0x34d946){const _0xf50534=a127_0x3de871,_0x2b4b7b=_0x34d946[_0xf50534(0x27c)]((_0xa4b92e,_0x264b7d)=>{const _0x63f7e6=_0xf50534;return _0xa4b92e[_0x63f7e6(0x226)]['push'](..._0x264b7d[_0x63f7e6(0x226)]),_0xa4b92e[_0x63f7e6(0x26e)][_0x63f7e6(0x24a)](..._0x264b7d[_0x63f7e6(0x26e)]),_0xa4b92e[_0x63f7e6(0x268)][_0x63f7e6(0x24a)](..._0x264b7d[_0x63f7e6(0x268)]),_0xa4b92e;},{'inserted':[],'modified':[],'removed':[]}),_0x2a3f09=new salesforce_commits_manager_service_1[(_0xf50534(0x1eb))]({'recordTypes':this[_0xf50534(0x237)][_0xf50534(0x23a)](),'branchId':this[_0xf50534(0x237)][_0xf50534(0x202)](),'repositoryId':this[_0xf50534(0x237)][_0xf50534(0x22d)](),'logger':this[_0xf50534(0x220)],'commitId':this['commitId']});await _0x2a3f09[_0xf50534(0x20b)]([{'author':_0x3caab9,'message':_0x3783b1,'inserted':_0x2b4b7b[_0xf50534(0x226)],'modified':_0x2b4b7b[_0xf50534(0x26e)],'removed':_0x2b4b7b[_0xf50534(0x268)]}]);}async[a127_0x3de871(0x227)](_0x9330c,_0x188a66){const _0x1898bc=a127_0x3de871;await this[_0x1898bc(0x220)][_0x1898bc(0x273)](this[_0x1898bc(0x207)]+_0x1898bc(0x1ea))[_0x1898bc(0x218)](),await this[_0x1898bc(0x237)]['fetchComponentsMetadata'](_0x188a66);const {added:_0x1b07ce,modified:_0x5077f9,removed:_0x40c13c}=_0x9330c[_0x1898bc(0x258)];_0x188a66&&_0x5077f9[_0x1898bc(0x24a)](..._0x40c13c['splice'](0x0));const _0x17d898=path_utils_1[_0x1898bc(0x23c)][_0x1898bc(0x27b)](this[_0x1898bc(0x237)][_0x1898bc(0x1ef)],[..._0x1b07ce,..._0x5077f9,..._0x40c13c],_0x188a66&&!this['gitCommitData'][_0x1898bc(0x1e1)]),_0x103ca4=(0x0,utils_2[_0x1898bc(0x1d4)])(_0x17d898);let _0x51e658=0x0;const _0x14b252=[];(_0x1b07ce[_0x1898bc(0x276)]||_0x5077f9[_0x1898bc(0x276)])&&this[_0x1898bc(0x237)][_0x1898bc(0x22d)]()&&(this[_0x1898bc(0x252)]=await this[_0x1898bc(0x237)][_0x1898bc(0x1dc)](_0x9330c[_0x1898bc(0x216)]));const _0x31e7f1=_0x103ca4[_0x1898bc(0x276)];let _0x383761=0x0;while(_0x103ca4[_0x1898bc(0x276)]){const _0x4d7f49=_0x103ca4['shift'](),_0x417a69=await this[_0x1898bc(0x237)][_0x1898bc(0x1f4)](_0x4d7f49,this['mdapiUtils'][_0x1898bc(0x217)],_0x188a66&&!this[_0x1898bc(0x270)]['force']);_0x51e658+=_0x417a69[_0x1898bc(0x226)][_0x1898bc(0x276)]+_0x417a69[_0x1898bc(0x268)]['length']+_0x417a69[_0x1898bc(0x26e)][_0x1898bc(0x276)],this[_0x1898bc(0x248)][_0x1898bc(0x21e)]+=_0x417a69[_0x1898bc(0x226)][_0x1898bc(0x276)],this[_0x1898bc(0x248)][_0x1898bc(0x26e)]+=_0x417a69[_0x1898bc(0x26e)][_0x1898bc(0x276)],this['stats'][_0x1898bc(0x268)]+=_0x417a69[_0x1898bc(0x268)][_0x1898bc(0x276)],_0x383761++,_0x383761%0x64===0x0&&this[_0x1898bc(0x26d)][_0x1898bc(0x273)]('proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',_0x383761,_0x31e7f1,_0x51e658),_0x14b252[_0x1898bc(0x24a)](_0x417a69),_0x51e658>this[_0x1898bc(0x1ca)]&&(await this[_0x1898bc(0x215)](_0x9330c[_0x1898bc(0x24c)],_0x9330c[_0x1898bc(0x216)],_0x14b252),await this[_0x1898bc(0x220)][_0x1898bc(0x273)](this[_0x1898bc(0x207)]+_0x1898bc(0x1e8)+_0x51e658+'\x20components.')[_0x1898bc(0x218)](),_0x51e658=0x0,_0x14b252['splice'](0x0));}_0x14b252[_0x1898bc(0x276)]&&(await this['sendComponents'](_0x9330c[_0x1898bc(0x24c)],_0x9330c[_0x1898bc(0x216)],_0x14b252),await this[_0x1898bc(0x220)][_0x1898bc(0x273)](this[_0x1898bc(0x207)]+'\x20Processed\x20'+_0x51e658+_0x1898bc(0x1f8))[_0x1898bc(0x218)]());}async['proceedCommits'](_0x345b75){const _0x242920=a127_0x3de871,_0x5a256b=[...this['gitCommitData']['commits']],_0x4a0bea=_0x5a256b[_0x242920(0x276)];let _0x4902fd=0x0;while(_0x5a256b[_0x242920(0x276)]){const _0x4d2d46=_0x5a256b[_0x242920(0x267)]();!this[_0x242920(0x270)][_0x242920(0x1e1)]&&(this[_0x242920(0x237)][_0x242920(0x22d)]()?(await this[_0x242920(0x225)][_0x242920(0x254)](_0x4d2d46['id']),await this[_0x242920(0x1da)][_0x242920(0x278)](this[_0x242920(0x225)]['dir'])):(await this['gitUtils'][_0x242920(0x254)](this[_0x242920(0x245)]),await this[_0x242920(0x1da)][_0x242920(0x278)](this[_0x242920(0x225)][_0x242920(0x217)]))),await this[_0x242920(0x227)](_0x4d2d46,_0x345b75),await this[_0x242920(0x1da)]['removeDir'](),_0x4902fd+=0x1,await this[_0x242920(0x220)][_0x242920(0x273)](this[_0x242920(0x207)]+_0x242920(0x20d)),await this[_0x242920(0x220)][_0x242920(0x273)](this[_0x242920(0x207)]+_0x242920(0x238)+this[_0x242920(0x248)][_0x242920(0x21e)]+_0x242920(0x1f5)),await this[_0x242920(0x220)]['log'](this[_0x242920(0x207)]+_0x242920(0x1d1)+this[_0x242920(0x248)]['modified']+'\x20components'),await this['sfLogger'][_0x242920(0x273)](this[_0x242920(0x207)]+_0x242920(0x239)+this[_0x242920(0x248)][_0x242920(0x268)]+_0x242920(0x1f5)),await this['sfLogger']['log'](this[_0x242920(0x207)]+_0x242920(0x23d)+_0x4902fd+'/'+_0x4a0bea+'\x20commits.')[_0x242920(0x218)](),this[_0x242920(0x253)]();}}async[a127_0x3de871(0x1fa)](){const _0xf34142=a127_0x3de871;this['gitUtils']&&await this[_0xf34142(0x225)][_0xf34142(0x1e5)]()[_0xf34142(0x228)](()=>void 0x0),this[_0xf34142(0x1da)]&&await this[_0xf34142(0x1da)][_0xf34142(0x1e5)]()[_0xf34142(0x228)](()=>void 0x0);}async[a127_0x3de871(0x221)](_0x11f28b){const _0x293afd=a127_0x3de871;this[_0x293afd(0x270)]=_0x11f28b,this[_0x293afd(0x237)][_0x293afd(0x224)](this[_0x293afd(0x270)]),this[_0x293afd(0x274)]=typedi_1[_0x293afd(0x206)][_0x293afd(0x27e)](providers_tokens_1[_0x293afd(0x1d5)][_0x293afd(0x274)]),this[_0x293afd(0x1fe)]=typedi_1['default']['get'](providers_tokens_1[_0x293afd(0x1d5)][_0x293afd(0x1fe)]),this[_0x293afd(0x220)]=typedi_1[_0x293afd(0x206)]['get'](providers_tokens_1['Tokens'][_0x293afd(0x26d)]),this['prefix']='[GIT\x20->\x20FLOSUM]\x20[Repository:\x20'+_0x11f28b[_0x293afd(0x1db)]+_0x293afd(0x203)+_0x11f28b[_0x293afd(0x20f)]+_0x293afd(0x265)+GitCommitJob_1['name']+']',this[_0x293afd(0x225)]=new git_utils_1[(_0x293afd(0x25d))](await this[_0x293afd(0x1ec)]()),this[_0x293afd(0x1da)]=new mdapi_utils_1[(_0x293afd(0x25c))](),this[_0x293afd(0x220)][_0x293afd(0x273)](this[_0x293afd(0x207)]+_0x293afd(0x210));try{this[_0x293afd(0x220)][_0x293afd(0x273)](this[_0x293afd(0x207)]+'\x20Fetch\x20salesforce\x20data.'),await this[_0x293afd(0x237)][_0x293afd(0x24d)](),await this[_0x293afd(0x237)][_0x293afd(0x233)](_0x293afd(0x1e0)),this[_0x293afd(0x220)]['log'](this[_0x293afd(0x207)]+_0x293afd(0x1f6)),this['lastCommitHash']=await git_internal_1[_0x293afd(0x1ee)]['getRemoteHash'](await this[_0x293afd(0x1ec)](),this[_0x293afd(0x270)]['branch']),this['logger']['log'](_0x293afd(0x27a),this[_0x293afd(0x245)]);const _0x3836e0=await this[_0x293afd(0x237)]['checkSyncStatus'](this[_0x293afd(0x245)]);if(_0x3836e0){this['sfLogger']['log']('Branch\x20synchronized.\x20Skip.'),await this[_0x293afd(0x237)][_0x293afd(0x233)](_0x293afd(0x264));return;}this['sfLogger'][_0x293afd(0x273)](this['prefix']+'\x20Cloning\x20git\x20repository\x20from\x20'+this[_0x293afd(0x270)][_0x293afd(0x25b)]+'.'),await this[_0x293afd(0x225)][_0x293afd(0x21a)](this[_0x293afd(0x270)][_0x293afd(0x20f)],this[_0x293afd(0x270)][_0x293afd(0x1db)]),this[_0x293afd(0x220)]['log'](this['prefix']+_0x293afd(0x1dd));const _0x5d986b=await sfdx_utils_1['SFDX'][_0x293afd(0x1e6)](this[_0x293afd(0x225)][_0x293afd(0x217)]);await this[_0x293afd(0x24b)]();!this['sfLogger'][_0x293afd(0x1de)]()&&this[_0x293afd(0x220)][_0x293afd(0x22b)](await salesforce_logger_v3_service_1['SalesforceLogger3']['createLoggerId'](sf_logger_v3_types_1['LoggerTypes']['commit']));await this[_0x293afd(0x220)][_0x293afd(0x218)]();if(_0x11f28b[_0x293afd(0x1e1)]){await this[_0x293afd(0x1da)][_0x293afd(0x278)](this[_0x293afd(0x225)][_0x293afd(0x217)]),await this['sfLogger'][_0x293afd(0x273)](this['prefix']+_0x293afd(0x256))[_0x293afd(0x218)]();const _0x4c7edc=(await fs_internal_1['FS']['readDir'](this[_0x293afd(0x1da)][_0x293afd(0x217)],!![]))[_0x293afd(0x249)](_0x3c38a0=>(0x0,path_1[_0x293afd(0x1cf)])(this[_0x293afd(0x1da)][_0x293afd(0x217)],_0x3c38a0));this[_0x293afd(0x220)][_0x293afd(0x273)](this[_0x293afd(0x207)]+_0x293afd(0x257)+_0x4c7edc[_0x293afd(0x276)]+_0x293afd(0x223)),this[_0x293afd(0x270)]['fileNames']=[],this[_0x293afd(0x270)]['commits']=[{'files':{'modified':_0x4c7edc,'added':[],'removed':[]},'id':await this[_0x293afd(0x225)]['getCurrentHash'](),'message':'sync\x20components','username':constants_1[_0x293afd(0x23b)]}];}await this['gitCommit']['updateRemoteState']({[this['gitCommitData'][_0x293afd(0x25b)]]:{'lastCommit':this[_0x293afd(0x245)]}}),await this[_0x293afd(0x220)][_0x293afd(0x273)](this[_0x293afd(0x207)]+_0x293afd(0x266)+(_0x5d986b?_0x293afd(0x1d3):'NO')+_0x293afd(0x271))[_0x293afd(0x218)](),await this[_0x293afd(0x20b)](_0x5d986b),await this[_0x293afd(0x220)][_0x293afd(0x273)](this['prefix']+_0x293afd(0x1f1))[_0x293afd(0x218)](),await this['gitCommit'][_0x293afd(0x233)](_0x293afd(0x264)),await this[_0x293afd(0x229)]([_0x11f28b[_0x293afd(0x230)]],this[_0x293afd(0x1fe)][_0x293afd(0x1cb)],_0x11f28b[_0x293afd(0x1db)],_0x11f28b['branch']);}catch(_0x2f64fe){await this[_0x293afd(0x1fa)]();if(_0x2f64fe instanceof flosum_commit_error_1[_0x293afd(0x1d2)])await this[_0x293afd(0x237)][_0x293afd(0x233)]('Completed')['catch'](()=>void 0x0),this[_0x293afd(0x26d)][_0x293afd(0x273)](this[_0x293afd(0x207)]+_0x293afd(0x201));else{await this[_0x293afd(0x26d)][_0x293afd(0x211)](this[_0x293afd(0x207)]+'\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20'+(_0x2f64fe instanceof api_error_1[_0x293afd(0x1f0)]||_0x2f64fe instanceof salesforce_error_1['SalesforceError']?_0x2f64fe['toString']():_0x2f64fe)),await this[_0x293afd(0x237)]['updateRemoteState']({}),await this[_0x293afd(0x237)]['updateStatus'](_0x293afd(0x21f))['catch'](()=>void 0x0),await this[_0x293afd(0x22c)]([_0x11f28b[_0x293afd(0x230)]],this[_0x293afd(0x1fe)][_0x293afd(0x1cb)],_0x11f28b[_0x293afd(0x1db)],_0x11f28b[_0x293afd(0x20f)]);throw _0x2f64fe;}}finally{await this[_0x293afd(0x1fa)](),await this[_0x293afd(0x220)][_0x293afd(0x218)]()['catch'](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a127_0x3de871(0x21c)])({'transient':!![]}),__metadata(a127_0x3de871(0x205),[git_commit_service_1[a127_0x3de871(0x231)],connection_1['ProvidersFactory']])],GitCommitJob),exports[a127_0x3de871(0x1cc)]=GitCommitJob;