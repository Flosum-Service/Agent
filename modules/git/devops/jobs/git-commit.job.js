function a126_0x41e1(_0x1e6d13,_0x540b5a){const _0x108e15=a126_0x6593();return a126_0x41e1=function(_0x475741,_0x33a8ea){_0x475741=_0x475741-0x1ae;let _0x65938d=_0x108e15[_0x475741];return _0x65938d;},a126_0x41e1(_0x1e6d13,_0x540b5a);}const a126_0x55ce19=a126_0x41e1;(function(_0x2fe7f2,_0x38447e){const _0xb7511a=a126_0x41e1,_0x29b534=_0x2fe7f2();while(!![]){try{const _0x1b6b0f=-parseInt(_0xb7511a(0x1cd))/0x1+-parseInt(_0xb7511a(0x250))/0x2+parseInt(_0xb7511a(0x247))/0x3+parseInt(_0xb7511a(0x204))/0x4+parseInt(_0xb7511a(0x1e9))/0x5+parseInt(_0xb7511a(0x23f))/0x6*(-parseInt(_0xb7511a(0x233))/0x7)+-parseInt(_0xb7511a(0x24a))/0x8*(-parseInt(_0xb7511a(0x260))/0x9);if(_0x1b6b0f===_0x38447e)break;else _0x29b534['push'](_0x29b534['shift']());}catch(_0x1896e9){_0x29b534['push'](_0x29b534['shift']());}}}(a126_0x6593,0x58d9a));const a126_0x33a8ea=(function(){let _0x2802a0=!![];return function(_0x4961d0,_0x303797){const _0x114d28=_0x2802a0?function(){const _0x3763e3=a126_0x41e1;if(_0x303797){const _0x20f0bc=_0x303797[_0x3763e3(0x1da)](_0x4961d0,arguments);return _0x303797=null,_0x20f0bc;}}:function(){};return _0x2802a0=![],_0x114d28;};}()),a126_0x475741=a126_0x33a8ea(this,function(){const _0x35fe49=a126_0x41e1;return a126_0x475741['toString']()['search'](_0x35fe49(0x25a))[_0x35fe49(0x242)]()[_0x35fe49(0x21e)](a126_0x475741)[_0x35fe49(0x1fe)](_0x35fe49(0x25a));});a126_0x475741();'use strict';var __createBinding=this&&this[a126_0x55ce19(0x1bc)]||(Object[a126_0x55ce19(0x1f8)]?function(_0xca8f37,_0x16da01,_0x541366,_0x2ae0f9){const _0x5bc037=a126_0x55ce19;if(_0x2ae0f9===undefined)_0x2ae0f9=_0x541366;var _0x505c63=Object[_0x5bc037(0x1c4)](_0x16da01,_0x541366);(!_0x505c63||(_0x5bc037(0x1b4)in _0x505c63?!_0x16da01[_0x5bc037(0x238)]:_0x505c63[_0x5bc037(0x258)]||_0x505c63[_0x5bc037(0x20b)]))&&(_0x505c63={'enumerable':!![],'get':function(){return _0x16da01[_0x541366];}}),Object[_0x5bc037(0x20f)](_0xca8f37,_0x2ae0f9,_0x505c63);}:function(_0x3f0ead,_0x4cae02,_0x4c86c3,_0x13c4a5){if(_0x13c4a5===undefined)_0x13c4a5=_0x4c86c3;_0x3f0ead[_0x13c4a5]=_0x4cae02[_0x4c86c3];}),__setModuleDefault=this&&this[a126_0x55ce19(0x244)]||(Object[a126_0x55ce19(0x1f8)]?function(_0x35433a,_0x4c6bd5){const _0x6b58c1=a126_0x55ce19;Object[_0x6b58c1(0x20f)](_0x35433a,_0x6b58c1(0x232),{'enumerable':!![],'value':_0x4c6bd5});}:function(_0x49e269,_0xd54f6b){const _0x45dcf9=a126_0x55ce19;_0x49e269[_0x45dcf9(0x232)]=_0xd54f6b;}),__decorate=this&&this[a126_0x55ce19(0x22d)]||function(_0x40975e,_0x884567,_0x4ac179,_0x476ed7){const _0xc29ffd=a126_0x55ce19;var _0x579b12=arguments['length'],_0xe00ed1=_0x579b12<0x3?_0x884567:_0x476ed7===null?_0x476ed7=Object[_0xc29ffd(0x1c4)](_0x884567,_0x4ac179):_0x476ed7,_0x13919f;if(typeof Reflect===_0xc29ffd(0x1e4)&&typeof Reflect[_0xc29ffd(0x24c)]===_0xc29ffd(0x26a))_0xe00ed1=Reflect['decorate'](_0x40975e,_0x884567,_0x4ac179,_0x476ed7);else{for(var _0x2d3104=_0x40975e[_0xc29ffd(0x214)]-0x1;_0x2d3104>=0x0;_0x2d3104--)if(_0x13919f=_0x40975e[_0x2d3104])_0xe00ed1=(_0x579b12<0x3?_0x13919f(_0xe00ed1):_0x579b12>0x3?_0x13919f(_0x884567,_0x4ac179,_0xe00ed1):_0x13919f(_0x884567,_0x4ac179))||_0xe00ed1;}return _0x579b12>0x3&&_0xe00ed1&&Object[_0xc29ffd(0x20f)](_0x884567,_0x4ac179,_0xe00ed1),_0xe00ed1;},__importStar=this&&this[a126_0x55ce19(0x268)]||function(_0x36875b){const _0x553dd0=a126_0x55ce19;if(_0x36875b&&_0x36875b['__esModule'])return _0x36875b;var _0x2e86da={};if(_0x36875b!=null){for(var _0x22e60d in _0x36875b)if(_0x22e60d!=='default'&&Object[_0x553dd0(0x20d)][_0x553dd0(0x1b5)][_0x553dd0(0x248)](_0x36875b,_0x22e60d))__createBinding(_0x2e86da,_0x36875b,_0x22e60d);}return __setModuleDefault(_0x2e86da,_0x36875b),_0x2e86da;},__metadata=this&&this[a126_0x55ce19(0x24e)]||function(_0x5ad2a2,_0x1fdb61){const _0x4cb8ba=a126_0x55ce19;if(typeof Reflect===_0x4cb8ba(0x1e4)&&typeof Reflect['metadata']==='function')return Reflect[_0x4cb8ba(0x210)](_0x5ad2a2,_0x1fdb61);},GitCommitJob_1;Object[a126_0x55ce19(0x20f)](exports,a126_0x55ce19(0x238),{'value':!![]}),exports['GitCommitJob']=void 0x0;const core_1=require(a126_0x55ce19(0x256)),fs_internal_1=require(a126_0x55ce19(0x1fb)),salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),utils_1=require(a126_0x55ce19(0x25c)),path_1=require(a126_0x55ce19(0x229)),typedi_1=__importStar(require('typedi')),constants_1=require(a126_0x55ce19(0x228)),salesforce_commits_manager_service_1=require(a126_0x55ce19(0x21f)),git_utils_1=require(a126_0x55ce19(0x25b)),mdapi_utils_1=require(a126_0x55ce19(0x207)),api_error_1=require(a126_0x55ce19(0x1cb)),salesforce_error_1=require(a126_0x55ce19(0x266)),git_commit_service_1=require(a126_0x55ce19(0x219)),flosum_commit_error_1=require(a126_0x55ce19(0x1f3)),bitbucket_api_service_1=require(a126_0x55ce19(0x201)),git_provider_1=require(a126_0x55ce19(0x20a)),sfdx_utils_1=require('../../salesforce/utils/sfdx.utils'),utils_2=require('../../parsers/utils'),git_internal_1=require(a126_0x55ce19(0x1e8)),providers_tokens_1=require(a126_0x55ce19(0x1c8)),connection_1=require(a126_0x55ce19(0x1b7)),sf_logger_v3_types_1=require(a126_0x55ce19(0x1f9)),path_utils_1=require(a126_0x55ce19(0x24b)),commit_to_flosum_completed_notification_1=require(a126_0x55ce19(0x254)),commit_to_flosum_error_notification_1=require(a126_0x55ce19(0x213));function a126_0x6593(){const _0x3e3c4c=['../../salesforce/errors/salesforce.error','createLoggerId','__importStar','\x20Job\x20done.','function','message','stats','dir','lastCommitHash','getGitShellAuthorizationString','splice','username','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','branch','get','hasOwnProperty','relative','../utils/connection','\x20commits.','repositoryGit','DEFAULT_GIT_USER_NAME','\x20Added\x20','__createBinding','Last\x20git\x20repository\x20hash\x20is\x20%s.','push','CommitToFlosumCompletedNotification','commit','shift','GitProvider','MAX_COMPONENTS_PER_TICK','getOwnPropertyDescriptor','sync\x20components','removed','getRemote','../../providers/providers.tokens','FlosumCommitError','log','../../../../core/errors/api.error','credentials','118779BwyhYd','commits','\x20Fetch\x20remote\x20branch\x20hash.','name','\x20Removed\x20','proceedFile','gitCommitData','\x20files\x20before\x20sync.','describeCommit','PathUtils','updateStatus','\x20Download\x20components\x20metadata\x20from\x20Flosum.','gitProvider','apply','inserted','\x20Cloning\x20git\x20repository\x20from\x20','resetStats','author','mdapiUtils','DEFAULT_GIT_USER_EMAIL','\x20components','force','values','object','setCommitDto','convertToCleanPaths','GitUtils','../../internal/git.internal','735830iKOdpO','CommitToFlosumErrorNotification','\x20Start\x20Git-commit\x20job.','SalesforceCommitsManager','prepareGitChangedPaths','modified','replace','map','createCommit','changes','../errors/flosum-commit.error','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','gitApiService','removeDir','\x20Proceeded\x20','create','../../salesforce/types/sf-logger-v3-types','getLoggerId','../../internal/fs.internal','\x20Processed\x20','handleCommit','search','isLoggedIn','Service','../../providers/api/bitbucket-api.service','design:paramtypes','\x20Commit\x20Summary','2795704tctZxZ','email','Branch\x20synchronized.\x20Skip.','../utils/mdapi.utils','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','repository','../../providers/types/git-provider','configurable','commitId','prototype','gitCommit','defineProperty','metadata','clone','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','../../notifications/commit-to-flosum-error.notification','length','info','checkoutTo','isSFDXProject','getRemoteHash','../services/git-commit.service','completeNotification','\x20components.','Email\x20notifications\x20are\x20disabled.','getProtocol','constructor','../../salesforce/services/salesforce-commits-manager.service','setLoggerId','readDir','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','\x20[SFDX:\x20','Completed','SalesforceError','catch','In\x20Progress','../../../../constants','path','Tokens','BitbucketApiService','fetchCommits','__decorate','isEmailNotificationsEnabled','SalesforceLogger3','getRepositoryId','reduce','default','793429FaFHNK','fileNames','Error','error','errorNotification','__esModule','fetchRepositoryOrBranchData','logger','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','prefix','files','recordType','18qhhhUr','send','readFilesByFilename','toString','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','__setModuleDefault','execute','sendComponents','1008939ZTTWYF','call','getBranchId','60768VsyymK','../utils/path.utils','decorate','gitUtils','__metadata','://','1038342pIsyvy','added','SFDX','config','../../notifications/commit-to-flosum-completed.notification','run','../../../../core','prepareMdapi','writable','flat','(((.+)+)+)+$','../utils/git.utils','../../../shared/utils','updateRemoteState','cleanUp','provider','189BArKxJ','checkSyncStatus','Logger','sfLogger','env',']\x20[Branch:\x20'];a126_0x6593=function(){return _0x3e3c4c;};return a126_0x6593();}let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x44c067,_0x5d0c8d){const _0x5bbbd1=a126_0x55ce19;this[_0x5bbbd1(0x20e)]=_0x44c067,this['providersFactory']=_0x5d0c8d,this[_0x5bbbd1(0x1c3)]=+(process[_0x5bbbd1(0x264)][_0x5bbbd1(0x1c3)]||0xbb8),this['logger']=new core_1[(_0x5bbbd1(0x262))](GitCommitJob_1['name']),this[_0x5bbbd1(0x20c)]='',this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async[a126_0x55ce19(0x1c7)](){const _0x20865d=a126_0x55ce19,{repositoryGit:_0xb8d108}=this[_0x20865d(0x1d3)],_0x3a58c9=typedi_1[_0x20865d(0x232)][_0x20865d(0x1b4)](providers_tokens_1[_0x20865d(0x22a)][_0x20865d(0x1cc)]);if(this[_0x20865d(0x1d3)][_0x20865d(0x25f)]===git_provider_1[_0x20865d(0x1c2)]['Bitbucket']){const _0xa70f57=typedi_1[_0x20865d(0x232)][_0x20865d(0x1b4)](bitbucket_api_service_1[_0x20865d(0x22b)]);await _0xa70f57[_0x20865d(0x1ff)]();}return _0xb8d108[_0x20865d(0x1ef)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x20865d(0x21d)])(_0xb8d108)+_0x20865d(0x24f)+_0x3a58c9[_0x20865d(0x1af)]()+'@');}async[a126_0x55ce19(0x21a)](_0x218bdd,_0x56bcf3,_0x12f85f,_0x514e9e){const _0x5ae3e7=a126_0x55ce19;if(!this['config'][_0x5ae3e7(0x22e)]){this['logger']['info'](_0x5ae3e7(0x21c));return;}await new commit_to_flosum_completed_notification_1[(_0x5ae3e7(0x1bf))]({'emails':_0x218bdd,'gitProvider':_0x56bcf3,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x5ae3e7(0x1bf)][_0x5ae3e7(0x1d0)],'repositoryName':_0x12f85f,'branchName':_0x514e9e})[_0x5ae3e7(0x245)]();}async[a126_0x55ce19(0x237)](_0xc4ec58,_0x192c83,_0x38d7b5,_0x3b037e){const _0xef6fe6=a126_0x55ce19;if(!this[_0xef6fe6(0x253)][_0xef6fe6(0x22e)]){this[_0xef6fe6(0x23a)][_0xef6fe6(0x215)](_0xef6fe6(0x21c));return;}await new commit_to_flosum_error_notification_1[(_0xef6fe6(0x1ea))]({'emails':_0xc4ec58,'gitProvider':_0x192c83,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1['CommitToFlosumErrorNotification']['name'],'repositoryName':_0x38d7b5,'branchName':_0x3b037e})[_0xef6fe6(0x245)]();}[a126_0x55ce19(0x1dd)](){const _0x44df2b=a126_0x55ce19;this[_0x44df2b(0x26c)]={'removed':0x0,'modified':0x0,'added':0x0};}async['updateFileNamesForSFDXProject'](){const _0x5416cd=a126_0x55ce19,_0x489ef9=[...this[_0x5416cd(0x1d3)][_0x5416cd(0x234)]];this[_0x5416cd(0x1d3)][_0x5416cd(0x234)]=[];for(const _0x1d29b4 of _0x489ef9){this[_0x5416cd(0x1d3)][_0x5416cd(0x234)][_0x5416cd(0x1be)](...await(0x0,utils_2[_0x5416cd(0x241)])(_0x1d29b4,this[_0x5416cd(0x1df)][_0x5416cd(0x26d)]));}}async[a126_0x55ce19(0x22c)](){const _0x417d82=a126_0x55ce19;if(this[_0x417d82(0x1d3)]['force'])return;const _0x4dcc04=[];for(const _0x55d7af of this['gitCommitData'][_0x417d82(0x1ce)]){const _0x6fed86=await this['gitUtils'][_0x417d82(0x1d5)](_0x55d7af['id']);_0x55d7af[_0x417d82(0x1b1)]=_0x6fed86[_0x417d82(0x1de)],_0x55d7af['message']=_0x6fed86[_0x417d82(0x26b)],_0x55d7af['files']=_0x6fed86[_0x417d82(0x1f2)],_0x55d7af[_0x417d82(0x205)]=_0x6fed86[_0x417d82(0x205)];if(_0x55d7af[_0x417d82(0x205)]===constants_1[_0x417d82(0x1e0)])throw new flosum_commit_error_1[(_0x417d82(0x1c9))]();_0x4dcc04[_0x417d82(0x1be)](...Object[_0x417d82(0x1e3)](_0x55d7af[_0x417d82(0x23d)])[_0x417d82(0x259)]());}this['gitCommitData'][_0x417d82(0x234)]=[...new Set(path_utils_1[_0x417d82(0x1d6)][_0x417d82(0x1ed)](this[_0x417d82(0x20e)][_0x417d82(0x23e)],_0x4dcc04,![]))];}async[a126_0x55ce19(0x246)](_0x28b84b,_0x5953d6,_0x371e28){const _0x17c5c2=a126_0x55ce19,_0x487194=_0x371e28[_0x17c5c2(0x231)]((_0x491bb7,_0x339c71)=>{const _0x37bbfc=_0x17c5c2;return _0x491bb7[_0x37bbfc(0x1db)]['push'](..._0x339c71[_0x37bbfc(0x1db)]),_0x491bb7[_0x37bbfc(0x1ee)][_0x37bbfc(0x1be)](..._0x339c71[_0x37bbfc(0x1ee)]),_0x491bb7[_0x37bbfc(0x1c6)][_0x37bbfc(0x1be)](..._0x339c71[_0x37bbfc(0x1c6)]),_0x491bb7;},{'inserted':[],'modified':[],'removed':[]}),_0x1edbbf=new salesforce_commits_manager_service_1[(_0x17c5c2(0x1ec))]({'recordTypes':this[_0x17c5c2(0x20e)]['getRecordTypes'](),'branchId':this[_0x17c5c2(0x20e)][_0x17c5c2(0x249)](),'repositoryId':this[_0x17c5c2(0x20e)]['getRepositoryId'](),'logger':this['sfLogger'],'commitId':this['commitId']});await _0x1edbbf['proceedCommits']([{'author':_0x28b84b,'message':_0x5953d6,'inserted':_0x487194[_0x17c5c2(0x1db)],'modified':_0x487194[_0x17c5c2(0x1ee)],'removed':_0x487194[_0x17c5c2(0x1c6)]}]);}async[a126_0x55ce19(0x1fd)](_0x164d1c,_0x31a8be){const _0x525edb=a126_0x55ce19;await this['sfLogger'][_0x525edb(0x1ca)](this['prefix']+_0x525edb(0x1d8))[_0x525edb(0x240)](),await this[_0x525edb(0x20e)]['fetchComponentsMetadata'](_0x31a8be);const {added:_0x1269c9,modified:_0x3df595,removed:_0x479982}=_0x164d1c[_0x525edb(0x23d)];_0x31a8be&&_0x3df595[_0x525edb(0x1be)](..._0x479982[_0x525edb(0x1b0)](0x0));const _0x332282=path_utils_1['PathUtils']['prepareGitChangedPaths'](this[_0x525edb(0x20e)][_0x525edb(0x23e)],[..._0x1269c9,..._0x3df595,..._0x479982],_0x31a8be&&!this['gitCommitData'][_0x525edb(0x1e2)]),_0x119ca5=(0x0,utils_2[_0x525edb(0x1e6)])(_0x332282);let _0x3d0d64=0x0;const _0x120d54=[];(_0x1269c9[_0x525edb(0x214)]||_0x3df595[_0x525edb(0x214)])&&this[_0x525edb(0x20e)][_0x525edb(0x230)]()&&(this[_0x525edb(0x20c)]=await this[_0x525edb(0x20e)][_0x525edb(0x1f1)](_0x164d1c[_0x525edb(0x26b)]));const _0x3ce093=_0x119ca5[_0x525edb(0x214)];let _0x21c23e=0x0;while(_0x119ca5['length']){const _0x40b5de=_0x119ca5[_0x525edb(0x1c1)](),_0x3780f5=await this[_0x525edb(0x20e)][_0x525edb(0x1d2)](_0x40b5de,this[_0x525edb(0x1df)]['dir'],_0x31a8be&&!this['gitCommitData'][_0x525edb(0x1e2)]);_0x3d0d64+=_0x3780f5[_0x525edb(0x1db)][_0x525edb(0x214)]+_0x3780f5['removed'][_0x525edb(0x214)]+_0x3780f5[_0x525edb(0x1ee)]['length'],this[_0x525edb(0x26c)]['added']+=_0x3780f5[_0x525edb(0x1db)][_0x525edb(0x214)],this[_0x525edb(0x26c)][_0x525edb(0x1ee)]+=_0x3780f5['modified'][_0x525edb(0x214)],this['stats']['removed']+=_0x3780f5[_0x525edb(0x1c6)]['length'],_0x21c23e++,_0x21c23e%0x64===0x0&&this[_0x525edb(0x23a)][_0x525edb(0x1ca)](_0x525edb(0x1f4),_0x21c23e,_0x3ce093,_0x3d0d64),_0x120d54['push'](_0x3780f5),_0x3d0d64>this['MAX_COMPONENTS_PER_TICK']&&(await this[_0x525edb(0x246)](_0x164d1c[_0x525edb(0x1b1)],_0x164d1c['message'],_0x120d54),await this[_0x525edb(0x263)][_0x525edb(0x1ca)](this['prefix']+_0x525edb(0x1fc)+_0x3d0d64+'\x20components.')[_0x525edb(0x240)](),_0x3d0d64=0x0,_0x120d54[_0x525edb(0x1b0)](0x0));}_0x120d54[_0x525edb(0x214)]&&(await this[_0x525edb(0x246)](_0x164d1c[_0x525edb(0x1b1)],_0x164d1c[_0x525edb(0x26b)],_0x120d54),await this[_0x525edb(0x263)][_0x525edb(0x1ca)](this[_0x525edb(0x23c)]+'\x20Processed\x20'+_0x3d0d64+_0x525edb(0x21b))['send']());}async['proceedCommits'](_0x52469a){const _0x4f4565=a126_0x55ce19,_0x5adaef=[...this['gitCommitData'][_0x4f4565(0x1ce)]],_0x5bb526=_0x5adaef['length'];let _0x52cb1a=0x0;while(_0x5adaef[_0x4f4565(0x214)]){const _0x8f6ac7=_0x5adaef['shift']();!this[_0x4f4565(0x1d3)][_0x4f4565(0x1e2)]&&(this['gitCommit'][_0x4f4565(0x230)]()?(await this[_0x4f4565(0x24d)][_0x4f4565(0x216)](_0x8f6ac7['id']),await this[_0x4f4565(0x1df)][_0x4f4565(0x257)](this['gitUtils'][_0x4f4565(0x26d)])):(await this[_0x4f4565(0x24d)][_0x4f4565(0x216)](this[_0x4f4565(0x1ae)]),await this['mdapiUtils'][_0x4f4565(0x257)](this['gitUtils'][_0x4f4565(0x26d)]))),await this[_0x4f4565(0x1fd)](_0x8f6ac7,_0x52469a),await this[_0x4f4565(0x1df)][_0x4f4565(0x1f6)](),_0x52cb1a+=0x1,await this[_0x4f4565(0x263)][_0x4f4565(0x1ca)](this[_0x4f4565(0x23c)]+_0x4f4565(0x203)),await this[_0x4f4565(0x263)][_0x4f4565(0x1ca)](this[_0x4f4565(0x23c)]+_0x4f4565(0x1bb)+this['stats'][_0x4f4565(0x251)]+_0x4f4565(0x1e1)),await this[_0x4f4565(0x263)][_0x4f4565(0x1ca)](this[_0x4f4565(0x23c)]+'\x20Modified\x20'+this['stats']['modified']+_0x4f4565(0x1e1)),await this[_0x4f4565(0x263)][_0x4f4565(0x1ca)](this[_0x4f4565(0x23c)]+_0x4f4565(0x1d1)+this[_0x4f4565(0x26c)][_0x4f4565(0x1c6)]+_0x4f4565(0x1e1)),await this[_0x4f4565(0x263)][_0x4f4565(0x1ca)](this['prefix']+_0x4f4565(0x1f7)+_0x52cb1a+'/'+_0x5bb526+_0x4f4565(0x1b8))[_0x4f4565(0x240)](),this['resetStats']();}}async[a126_0x55ce19(0x25e)](){const _0x13f221=a126_0x55ce19;this[_0x13f221(0x24d)]&&await this[_0x13f221(0x24d)][_0x13f221(0x1f6)]()[_0x13f221(0x226)](()=>void 0x0),this[_0x13f221(0x1df)]&&await this[_0x13f221(0x1df)]['removeDir']()[_0x13f221(0x226)](()=>void 0x0);}async[a126_0x55ce19(0x255)](_0x50bc16){const _0x5158c3=a126_0x55ce19;this[_0x5158c3(0x1d3)]=_0x50bc16,this[_0x5158c3(0x20e)][_0x5158c3(0x1e5)](this['gitCommitData']),this[_0x5158c3(0x1f5)]=typedi_1[_0x5158c3(0x232)][_0x5158c3(0x1b4)](providers_tokens_1[_0x5158c3(0x22a)][_0x5158c3(0x1f5)]),this['config']=typedi_1[_0x5158c3(0x232)]['get'](providers_tokens_1['Tokens'][_0x5158c3(0x253)]),this[_0x5158c3(0x263)]=typedi_1[_0x5158c3(0x232)]['get'](providers_tokens_1[_0x5158c3(0x22a)][_0x5158c3(0x23a)]),this[_0x5158c3(0x23c)]=_0x5158c3(0x1b2)+_0x50bc16[_0x5158c3(0x209)]+_0x5158c3(0x265)+_0x50bc16[_0x5158c3(0x1b3)]+']\x20['+GitCommitJob_1['name']+']',this[_0x5158c3(0x24d)]=new git_utils_1[(_0x5158c3(0x1e7))](await this[_0x5158c3(0x1c7)]()),this[_0x5158c3(0x1df)]=new mdapi_utils_1['MDApiUtils'](),this[_0x5158c3(0x263)]['log'](this[_0x5158c3(0x23c)]+_0x5158c3(0x1eb));try{this['sfLogger'][_0x5158c3(0x1ca)](this[_0x5158c3(0x23c)]+'\x20Fetch\x20salesforce\x20data.'),await this[_0x5158c3(0x20e)][_0x5158c3(0x239)](),await this[_0x5158c3(0x20e)]['updateStatus'](_0x5158c3(0x227)),this[_0x5158c3(0x263)]['log'](this[_0x5158c3(0x23c)]+_0x5158c3(0x1cf)),this['lastCommitHash']=await git_internal_1['Git'][_0x5158c3(0x218)](await this[_0x5158c3(0x1c7)](),this[_0x5158c3(0x1d3)]['branch']),this[_0x5158c3(0x23a)]['log'](_0x5158c3(0x1bd),this[_0x5158c3(0x1ae)]);const _0xff477e=await this[_0x5158c3(0x20e)][_0x5158c3(0x261)](this[_0x5158c3(0x1ae)]);if(_0xff477e){this['sfLogger'][_0x5158c3(0x1ca)](_0x5158c3(0x206)),await this[_0x5158c3(0x20e)][_0x5158c3(0x1d7)](_0x5158c3(0x224));return;}this[_0x5158c3(0x263)]['log'](this[_0x5158c3(0x23c)]+_0x5158c3(0x1dc)+this[_0x5158c3(0x1d3)][_0x5158c3(0x1b9)]+'.'),await this['gitUtils'][_0x5158c3(0x211)](this[_0x5158c3(0x1d3)]['branch'],this[_0x5158c3(0x1d3)][_0x5158c3(0x209)]),this['sfLogger'][_0x5158c3(0x1ca)](this['prefix']+_0x5158c3(0x208));const _0x147b81=await sfdx_utils_1[_0x5158c3(0x252)][_0x5158c3(0x217)](this[_0x5158c3(0x24d)][_0x5158c3(0x26d)]);await this['fetchCommits']();!this[_0x5158c3(0x263)][_0x5158c3(0x1fa)]()&&this[_0x5158c3(0x263)][_0x5158c3(0x220)](await salesforce_logger_v3_service_1[_0x5158c3(0x22f)][_0x5158c3(0x267)](sf_logger_v3_types_1['LoggerTypes'][_0x5158c3(0x1c0)]));await this[_0x5158c3(0x263)][_0x5158c3(0x240)]();if(_0x50bc16[_0x5158c3(0x1e2)]){await this['mdapiUtils'][_0x5158c3(0x257)](this[_0x5158c3(0x24d)][_0x5158c3(0x26d)]),await this[_0x5158c3(0x263)]['log'](this[_0x5158c3(0x23c)]+_0x5158c3(0x243))['send']();const _0x246995=(await fs_internal_1['FS'][_0x5158c3(0x221)](this[_0x5158c3(0x1df)][_0x5158c3(0x26d)],!![]))[_0x5158c3(0x1f0)](_0x3e5dee=>(0x0,path_1[_0x5158c3(0x1b6)])(this[_0x5158c3(0x1df)][_0x5158c3(0x26d)],_0x3e5dee));this[_0x5158c3(0x263)][_0x5158c3(0x1ca)](this[_0x5158c3(0x23c)]+_0x5158c3(0x23b)+_0x246995[_0x5158c3(0x214)]+_0x5158c3(0x1d4)),this['gitCommitData'][_0x5158c3(0x234)]=[],this[_0x5158c3(0x1d3)]['commits']=[{'files':{'modified':_0x246995,'added':[],'removed':[]},'id':await this['gitUtils']['getCurrentHash'](),'message':_0x5158c3(0x1c5),'username':constants_1[_0x5158c3(0x1ba)]}];}await this[_0x5158c3(0x20e)][_0x5158c3(0x25d)]({[this[_0x5158c3(0x1d3)]['repositoryGit']]:{'lastCommit':this[_0x5158c3(0x1ae)]}}),await this[_0x5158c3(0x263)][_0x5158c3(0x1ca)](this[_0x5158c3(0x23c)]+_0x5158c3(0x223)+(_0x147b81?'YES':'NO')+']\x20Start\x20proceeding\x20git\x20commits.\x20')[_0x5158c3(0x240)](),await this['proceedCommits'](_0x147b81),await this[_0x5158c3(0x263)][_0x5158c3(0x1ca)](this[_0x5158c3(0x23c)]+_0x5158c3(0x269))['send'](),await this[_0x5158c3(0x20e)][_0x5158c3(0x1d7)](_0x5158c3(0x224)),await this[_0x5158c3(0x21a)]([_0x50bc16[_0x5158c3(0x205)]],this['config'][_0x5158c3(0x1d9)],_0x50bc16[_0x5158c3(0x209)],_0x50bc16[_0x5158c3(0x1b3)]);}catch(_0x57540b){await this[_0x5158c3(0x25e)]();if(_0x57540b instanceof flosum_commit_error_1['FlosumCommitError'])await this[_0x5158c3(0x20e)][_0x5158c3(0x1d7)](_0x5158c3(0x224))[_0x5158c3(0x226)](()=>void 0x0),this[_0x5158c3(0x23a)]['log'](this['prefix']+_0x5158c3(0x212));else{await this[_0x5158c3(0x23a)][_0x5158c3(0x236)](this['prefix']+_0x5158c3(0x222)+(_0x57540b instanceof api_error_1['ApiError']||_0x57540b instanceof salesforce_error_1[_0x5158c3(0x225)]?_0x57540b[_0x5158c3(0x242)]():_0x57540b)),await this[_0x5158c3(0x20e)]['updateRemoteState']({}),await this[_0x5158c3(0x20e)]['updateStatus'](_0x5158c3(0x235))['catch'](()=>void 0x0),await this[_0x5158c3(0x237)]([_0x50bc16['email']],this[_0x5158c3(0x253)]['gitProvider'],_0x50bc16['repository'],_0x50bc16[_0x5158c3(0x1b3)]);throw _0x57540b;}}finally{await this[_0x5158c3(0x25e)](),await this[_0x5158c3(0x263)][_0x5158c3(0x240)]()[_0x5158c3(0x226)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a126_0x55ce19(0x200)])({'transient':!![]}),__metadata(a126_0x55ce19(0x202),[git_commit_service_1['GitCommitService'],connection_1['ProvidersFactory']])],GitCommitJob),exports['GitCommitJob']=GitCommitJob;