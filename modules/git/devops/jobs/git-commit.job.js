const a107_0x22e1e1=a107_0x355e;(function(_0x347bf5,_0x362b6d){const _0x20d9cd=a107_0x355e,_0x379aeb=_0x347bf5();while(!![]){try{const _0x989449=parseInt(_0x20d9cd(0x22f))/0x1*(-parseInt(_0x20d9cd(0x1b3))/0x2)+-parseInt(_0x20d9cd(0x20b))/0x3+parseInt(_0x20d9cd(0x22e))/0x4+-parseInt(_0x20d9cd(0x1aa))/0x5+-parseInt(_0x20d9cd(0x1f5))/0x6+-parseInt(_0x20d9cd(0x20a))/0x7+parseInt(_0x20d9cd(0x214))/0x8;if(_0x989449===_0x362b6d)break;else _0x379aeb['push'](_0x379aeb['shift']());}catch(_0x10e144){_0x379aeb['push'](_0x379aeb['shift']());}}}(a107_0x5a05,0xd3a21));const a107_0x5f3031=(function(){let _0x4105c0=!![];return function(_0x54eb66,_0x1135fe){const _0x43f380=_0x4105c0?function(){const _0x299621=a107_0x355e;if(_0x1135fe){const _0x4ecd34=_0x1135fe[_0x299621(0x209)](_0x54eb66,arguments);return _0x1135fe=null,_0x4ecd34;}}:function(){};return _0x4105c0=![],_0x43f380;};}()),a107_0x151074=a107_0x5f3031(this,function(){const _0x5982ef=a107_0x355e;return a107_0x151074['toString']()['search'](_0x5982ef(0x218))['toString']()['constructor'](a107_0x151074)[_0x5982ef(0x1dc)](_0x5982ef(0x218));});function a107_0x5a05(){const _0x3c5313=['../../internal/fs.internal','map','../utils/connection','gitCommitData','../errors/flosum-commit.error','__importStar','37644856gNUmGO','config','name','commitId','(((.+)+)+)+$','__setModuleDefault','__createBinding','Logger','Branch\x20synchronized.\x20Skip.','files','getRemoteHash','ApiError','setLoggerId','catch','ProvidersFactory','setCommitDto','\x20commits.','length','cleanUp','../../salesforce/utils/sfdx.utils','\x20components.','SFDX',']\x20Start\x20proceeding\x20git\x20commits.\x20','convertToCleanPaths','proceedCommits','../services/git-commit.service','2464012nNUWLl','772847lTnGDy','GitProvider','\x20Commit\x20Summary','fetchRepositoryOrBranchData','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','\x20Added\x20','../../parsers/utils','prototype','clone','isSFDXProject','path','message','../../salesforce/services/salesforce-logger-v3.service','fetchCommits','splice','updateStatus','prepareMdapi','providersFactory','SalesforceError','lastCommitHash','fetchComponentsMetadata','\x20Start\x20Git-commit\x20job.','getGitShellAuthorizationString','updateRemoteState','checkSyncStatus','\x20components','describeCommit','../utils/git.utils','log','dir','../../providers/types/git-provider','resetStats','../../providers/api/bitbucket-api.service','gitCommit','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','://','object','__decorate','decorate','createLoggerId','sendComponents','credentials','4251195SkOkLU',']\x20[Branch:\x20','getProtocol','author','logger','stats','../../../shared/utils','sync\x20components',']\x20[','2STuVwC','writable','__esModule','DEFAULT_GIT_USER_NAME','../../../../constants','Git','readFilesByFilename','gitApiService','GitUtils','../../salesforce/errors/salesforce.error','reduce','modified','LoggerTypes','Tokens','getRemote','send','getLoggerId','GitCommitJob','fileNames','provider','\x20Job\x20done.','createCommit','In\x20Progress','get','username','added','repository','mdapiUtils','typedi','force','../../salesforce/services/salesforce-commits-manager.service','\x20Modified\x20','../utils/git-commit.utils','../../../../core/errors/api.error','MAX_COMPONENTS_PER_TICK','../../../../core','run','repositoryGit','prepareGitChangedPaths','removed','\x20Fetch\x20remote\x20branch\x20hash.','search','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','Completed','\x20files\x20before\x20sync.','create','metadata','configurable','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','function','design:paramtypes','checkoutTo','shift','replace','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','env','push','commits','../../salesforce/types/sf-logger-v3-types','getCurrentHash','sfLogger','proceedFile','hasOwnProperty','getRepositoryId','YES','\x20Processed\x20','9337830Wfjupq','handleCommit','\x20Cloning\x20git\x20repository\x20from\x20','\x20[SFDX:\x20','removeDir','values','email','prefix','default','branch','defineProperty','\x20Removed\x20','gitUtils','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','Error','Bitbucket','getRecordTypes','inserted','call','MDApiUtils','apply','2179982fRuxBF','2891832jIxYte','\x20Fetch\x20salesforce\x20data.','isLoggedIn'];a107_0x5a05=function(){return _0x3c5313;};return a107_0x5a05();}a107_0x151074();'use strict';var __createBinding=this&&this[a107_0x22e1e1(0x21a)]||(Object['create']?function(_0x17b302,_0x2cf799,_0x5115fc,_0x11fb08){const _0x1b0a08=a107_0x22e1e1;if(_0x11fb08===undefined)_0x11fb08=_0x5115fc;var _0x1d4507=Object['getOwnPropertyDescriptor'](_0x2cf799,_0x5115fc);(!_0x1d4507||(_0x1b0a08(0x1ca)in _0x1d4507?!_0x2cf799[_0x1b0a08(0x1b5)]:_0x1d4507[_0x1b0a08(0x1b4)]||_0x1d4507[_0x1b0a08(0x1e2)]))&&(_0x1d4507={'enumerable':!![],'get':function(){return _0x2cf799[_0x5115fc];}}),Object[_0x1b0a08(0x1ff)](_0x17b302,_0x11fb08,_0x1d4507);}:function(_0x35ebda,_0x2e9c64,_0x4ca1a0,_0x341c4d){if(_0x341c4d===undefined)_0x341c4d=_0x4ca1a0;_0x35ebda[_0x341c4d]=_0x2e9c64[_0x4ca1a0];}),__setModuleDefault=this&&this[a107_0x22e1e1(0x219)]||(Object[a107_0x22e1e1(0x1e0)]?function(_0x2d1879,_0x50b536){const _0x3e774b=a107_0x22e1e1;Object[_0x3e774b(0x1ff)](_0x2d1879,_0x3e774b(0x1fd),{'enumerable':!![],'value':_0x50b536});}:function(_0x40fdd9,_0x431069){_0x40fdd9['default']=_0x431069;}),__decorate=this&&this[a107_0x22e1e1(0x1a5)]||function(_0x5b82bf,_0x1416a1,_0x5a6655,_0x38475a){const _0x633cf3=a107_0x22e1e1;var _0x2a93c1=arguments[_0x633cf3(0x225)],_0x1ffad6=_0x2a93c1<0x3?_0x1416a1:_0x38475a===null?_0x38475a=Object['getOwnPropertyDescriptor'](_0x1416a1,_0x5a6655):_0x38475a,_0x3a87a9;if(typeof Reflect===_0x633cf3(0x1a4)&&typeof Reflect['decorate']==='function')_0x1ffad6=Reflect[_0x633cf3(0x1a6)](_0x5b82bf,_0x1416a1,_0x5a6655,_0x38475a);else{for(var _0x41ed1a=_0x5b82bf['length']-0x1;_0x41ed1a>=0x0;_0x41ed1a--)if(_0x3a87a9=_0x5b82bf[_0x41ed1a])_0x1ffad6=(_0x2a93c1<0x3?_0x3a87a9(_0x1ffad6):_0x2a93c1>0x3?_0x3a87a9(_0x1416a1,_0x5a6655,_0x1ffad6):_0x3a87a9(_0x1416a1,_0x5a6655))||_0x1ffad6;}return _0x2a93c1>0x3&&_0x1ffad6&&Object[_0x633cf3(0x1ff)](_0x1416a1,_0x5a6655,_0x1ffad6),_0x1ffad6;},__importStar=this&&this[a107_0x22e1e1(0x213)]||function(_0x1408cc){const _0x2505e4=a107_0x22e1e1;if(_0x1408cc&&_0x1408cc[_0x2505e4(0x1b5)])return _0x1408cc;var _0x1f722b={};if(_0x1408cc!=null){for(var _0x35078f in _0x1408cc)if(_0x35078f!==_0x2505e4(0x1fd)&&Object[_0x2505e4(0x187)][_0x2505e4(0x1f1)][_0x2505e4(0x207)](_0x1408cc,_0x35078f))__createBinding(_0x1f722b,_0x1408cc,_0x35078f);}return __setModuleDefault(_0x1f722b,_0x1408cc),_0x1f722b;},__metadata=this&&this['__metadata']||function(_0x51d31f,_0x3a89d7){const _0x3a06d1=a107_0x22e1e1;if(typeof Reflect==='object'&&typeof Reflect[_0x3a06d1(0x1e1)]===_0x3a06d1(0x1e4))return Reflect[_0x3a06d1(0x1e1)](_0x51d31f,_0x3a89d7);},GitCommitJob_1;Object[a107_0x22e1e1(0x1ff)](exports,a107_0x22e1e1(0x1b5),{'value':!![]}),exports['GitCommitJob']=void 0x0;const core_1=require(a107_0x22e1e1(0x1d6)),fs_internal_1=require(a107_0x22e1e1(0x20e)),salesforce_logger_v3_service_1=require(a107_0x22e1e1(0x18c)),utils_1=require(a107_0x22e1e1(0x1b0)),path_1=require(a107_0x22e1e1(0x18a)),typedi_1=__importStar(require(a107_0x22e1e1(0x1cf))),constants_1=require(a107_0x22e1e1(0x1b7)),salesforce_commits_manager_service_1=require(a107_0x22e1e1(0x1d1)),git_commit_utils_1=require(a107_0x22e1e1(0x1d3)),git_utils_1=require(a107_0x22e1e1(0x19b)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require(a107_0x22e1e1(0x1d4)),salesforce_error_1=require(a107_0x22e1e1(0x1bc)),git_commit_service_1=require(a107_0x22e1e1(0x22d)),flosum_commit_error_1=require(a107_0x22e1e1(0x212)),bitbucket_api_service_1=require(a107_0x22e1e1(0x1a0)),git_provider_1=require(a107_0x22e1e1(0x19e)),sfdx_utils_1=require(a107_0x22e1e1(0x227)),utils_2=require(a107_0x22e1e1(0x186)),git_internal_1=require('../../internal/git.internal'),providers_tokens_1=require('../../providers/providers.tokens'),connection_1=require(a107_0x22e1e1(0x210)),sf_logger_v3_types_1=require(a107_0x22e1e1(0x1ed));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x12f681,_0x138264){const _0x60072e=a107_0x22e1e1;this[_0x60072e(0x1a1)]=_0x12f681,this[_0x60072e(0x191)]=_0x138264,this['MAX_COMPONENTS_PER_TICK']=+(process[_0x60072e(0x1ea)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x60072e(0x1ae)]=new core_1[(_0x60072e(0x21b))](GitCommitJob_1[_0x60072e(0x216)]),this['commitId']='',this[_0x60072e(0x1af)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a107_0x22e1e1(0x1c1)](){const _0x42d17a=a107_0x22e1e1,{repositoryGit:_0x22e7c7}=this[_0x42d17a(0x211)],_0x5044c9=typedi_1[_0x42d17a(0x1fd)][_0x42d17a(0x1ca)](providers_tokens_1[_0x42d17a(0x1c0)][_0x42d17a(0x1a9)]);if(this[_0x42d17a(0x211)][_0x42d17a(0x1c6)]===git_provider_1[_0x42d17a(0x230)][_0x42d17a(0x204)]){const _0x7d80bc=typedi_1[_0x42d17a(0x1fd)][_0x42d17a(0x1ca)](bitbucket_api_service_1['BitbucketApiService']);await _0x7d80bc[_0x42d17a(0x20d)]();}return _0x22e7c7[_0x42d17a(0x1e8)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x42d17a(0x1ac)])(_0x22e7c7)+_0x42d17a(0x1a3)+_0x5044c9[_0x42d17a(0x196)]()+'@');}[a107_0x22e1e1(0x19f)](){const _0x50a33a=a107_0x22e1e1;this[_0x50a33a(0x1af)]={'removed':0x0,'modified':0x0,'added':0x0};}async['updateFileNamesForSFDXProject'](){const _0x2c1c03=a107_0x22e1e1,_0x2a6536=[...this[_0x2c1c03(0x211)][_0x2c1c03(0x1c5)]];this[_0x2c1c03(0x211)][_0x2c1c03(0x1c5)]=[];for(const _0x3c8904 of _0x2a6536){this['gitCommitData'][_0x2c1c03(0x1c5)][_0x2c1c03(0x1eb)](...await(0x0,utils_2[_0x2c1c03(0x1b9)])(_0x3c8904,this[_0x2c1c03(0x1ce)]['dir']));}}async[a107_0x22e1e1(0x18d)](){const _0x34ee56=a107_0x22e1e1;if(this[_0x34ee56(0x211)][_0x34ee56(0x1d0)])return;const _0x128f4c=[];for(const _0x18991b of this[_0x34ee56(0x211)][_0x34ee56(0x1ec)]){const _0x4e2362=await this['gitUtils'][_0x34ee56(0x19a)](_0x18991b['id']);_0x18991b['username']=_0x4e2362[_0x34ee56(0x1ad)],_0x18991b['message']=_0x4e2362[_0x34ee56(0x18b)],_0x18991b[_0x34ee56(0x21d)]=_0x4e2362['changes'],_0x18991b[_0x34ee56(0x1fb)]=_0x4e2362[_0x34ee56(0x1fb)];if(_0x18991b['email']===constants_1['DEFAULT_GIT_USER_EMAIL'])throw new flosum_commit_error_1['FlosumCommitError']();_0x128f4c[_0x34ee56(0x1eb)](...Object[_0x34ee56(0x1fa)](_0x18991b['files'])['flat']());}this[_0x34ee56(0x211)][_0x34ee56(0x1c5)]=[...new Set((0x0,git_commit_utils_1[_0x34ee56(0x1d9)])(_0x128f4c))];}async[a107_0x22e1e1(0x1a8)](_0x211c76,_0x5272b2,_0x3d9389){const _0x3f9ab3=a107_0x22e1e1,_0x3c808e=_0x3d9389[_0x3f9ab3(0x1bd)]((_0x1f54e5,_0x50b41f)=>{const _0x2e5d6=_0x3f9ab3;return _0x1f54e5['inserted'][_0x2e5d6(0x1eb)](..._0x50b41f[_0x2e5d6(0x206)]),_0x1f54e5[_0x2e5d6(0x1be)][_0x2e5d6(0x1eb)](..._0x50b41f['modified']),_0x1f54e5[_0x2e5d6(0x1da)][_0x2e5d6(0x1eb)](..._0x50b41f['removed']),_0x1f54e5;},{'inserted':[],'modified':[],'removed':[]}),_0x3bb8b8=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x3f9ab3(0x1a1)][_0x3f9ab3(0x205)](),'branchId':this[_0x3f9ab3(0x1a1)]['getBranchId'](),'repositoryId':this[_0x3f9ab3(0x1a1)][_0x3f9ab3(0x1f2)](),'logger':this[_0x3f9ab3(0x1ef)],'commitId':this[_0x3f9ab3(0x217)]});await _0x3bb8b8[_0x3f9ab3(0x22c)]([{'author':_0x211c76,'message':_0x5272b2,'inserted':_0x3c808e[_0x3f9ab3(0x206)],'modified':_0x3c808e['modified'],'removed':_0x3c808e[_0x3f9ab3(0x1da)]}]);}async[a107_0x22e1e1(0x1f6)](_0x2f29c3,_0x1de445){const _0xfe418f=a107_0x22e1e1;await this[_0xfe418f(0x1ef)][_0xfe418f(0x19c)](this['prefix']+'\x20Download\x20components\x20metadata\x20from\x20Flosum.')[_0xfe418f(0x1c2)](),await this[_0xfe418f(0x1a1)][_0xfe418f(0x194)](_0x1de445);const {added:_0x3cfb00,modified:_0x4763ca,removed:_0x14c8df}=_0x2f29c3[_0xfe418f(0x21d)];_0x1de445&&_0x4763ca[_0xfe418f(0x1eb)](..._0x14c8df[_0xfe418f(0x18e)](0x0));const _0x70ea3f=(0x0,utils_2[_0xfe418f(0x22b)])((0x0,git_commit_utils_1[_0xfe418f(0x1d9)])([..._0x3cfb00,..._0x4763ca,..._0x14c8df],_0x1de445&&!this['gitCommitData']['force']));let _0x37f6a3=0x0;const _0x2b0687=[];(_0x3cfb00['length']||_0x4763ca[_0xfe418f(0x225)])&&this['gitCommit'][_0xfe418f(0x1f2)]()&&(this[_0xfe418f(0x217)]=await this[_0xfe418f(0x1a1)][_0xfe418f(0x1c8)](_0x2f29c3[_0xfe418f(0x18b)]));const _0x2a9246=_0x70ea3f['length'];let _0x7024cc=0x0;while(_0x70ea3f[_0xfe418f(0x225)]){const _0x7e509d=_0x70ea3f['shift'](),_0x19bd78=await this[_0xfe418f(0x1a1)][_0xfe418f(0x1f0)](_0x7e509d,this[_0xfe418f(0x1ce)]['dir'],_0x1de445&&!this['gitCommitData'][_0xfe418f(0x1d0)]);_0x37f6a3+=_0x19bd78[_0xfe418f(0x206)]['length']+_0x19bd78[_0xfe418f(0x1da)][_0xfe418f(0x225)]+_0x19bd78[_0xfe418f(0x1be)]['length'],this['stats'][_0xfe418f(0x1cc)]+=_0x19bd78['inserted'][_0xfe418f(0x225)],this['stats']['modified']+=_0x19bd78[_0xfe418f(0x1be)]['length'],this['stats'][_0xfe418f(0x1da)]+=_0x19bd78['removed'][_0xfe418f(0x225)],_0x7024cc++,_0x7024cc%0x64===0x0&&this[_0xfe418f(0x1ae)][_0xfe418f(0x19c)]('proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',_0x7024cc,_0x2a9246,_0x37f6a3),_0x2b0687[_0xfe418f(0x1eb)](_0x19bd78),_0x37f6a3>this[_0xfe418f(0x1d5)]&&(await this[_0xfe418f(0x1a8)](_0x2f29c3['username'],_0x2f29c3[_0xfe418f(0x18b)],_0x2b0687),await this[_0xfe418f(0x1ef)]['log'](this['prefix']+_0xfe418f(0x1f4)+_0x37f6a3+'\x20components.')[_0xfe418f(0x1c2)](),_0x37f6a3=0x0,_0x2b0687[_0xfe418f(0x18e)](0x0));}_0x2b0687['length']&&(await this[_0xfe418f(0x1a8)](_0x2f29c3[_0xfe418f(0x1cb)],_0x2f29c3[_0xfe418f(0x18b)],_0x2b0687),await this[_0xfe418f(0x1ef)][_0xfe418f(0x19c)](this[_0xfe418f(0x1fc)]+_0xfe418f(0x1f4)+_0x37f6a3+_0xfe418f(0x228))['send']());}async['proceedCommits'](_0x44c621){const _0x1cebd5=a107_0x22e1e1,_0x186767=[...this[_0x1cebd5(0x211)][_0x1cebd5(0x1ec)]],_0x16a868=_0x186767[_0x1cebd5(0x225)];let _0x216f10=0x0;while(_0x186767['length']){const _0x159a44=_0x186767[_0x1cebd5(0x1e7)]();!this[_0x1cebd5(0x211)][_0x1cebd5(0x1d0)]&&(this['gitCommit'][_0x1cebd5(0x1f2)]()?(await this[_0x1cebd5(0x201)][_0x1cebd5(0x1e6)](_0x159a44['id']),await this[_0x1cebd5(0x1ce)][_0x1cebd5(0x190)](this['gitUtils'][_0x1cebd5(0x19d)])):(await this['gitUtils'][_0x1cebd5(0x1e6)](this[_0x1cebd5(0x193)]),await this[_0x1cebd5(0x1ce)][_0x1cebd5(0x190)](this[_0x1cebd5(0x201)]['dir']))),await this[_0x1cebd5(0x1f6)](_0x159a44,_0x44c621),await this['mdapiUtils'][_0x1cebd5(0x1f9)](),_0x216f10+=0x1,await this['sfLogger'][_0x1cebd5(0x19c)](this[_0x1cebd5(0x1fc)]+_0x1cebd5(0x231)),await this[_0x1cebd5(0x1ef)][_0x1cebd5(0x19c)](this[_0x1cebd5(0x1fc)]+_0x1cebd5(0x185)+this[_0x1cebd5(0x1af)]['added']+_0x1cebd5(0x199)),await this[_0x1cebd5(0x1ef)][_0x1cebd5(0x19c)](this[_0x1cebd5(0x1fc)]+_0x1cebd5(0x1d2)+this[_0x1cebd5(0x1af)][_0x1cebd5(0x1be)]+'\x20components'),await this[_0x1cebd5(0x1ef)][_0x1cebd5(0x19c)](this[_0x1cebd5(0x1fc)]+_0x1cebd5(0x200)+this[_0x1cebd5(0x1af)]['removed']+'\x20components'),await this[_0x1cebd5(0x1ef)]['log'](this[_0x1cebd5(0x1fc)]+'\x20Proceeded\x20'+_0x216f10+'/'+_0x16a868+_0x1cebd5(0x224))['send'](),this[_0x1cebd5(0x19f)]();}}async['cleanUp'](){const _0x5c3188=a107_0x22e1e1;this[_0x5c3188(0x201)]&&await this[_0x5c3188(0x201)][_0x5c3188(0x1f9)]()[_0x5c3188(0x221)](()=>void 0x0),this[_0x5c3188(0x1ce)]&&await this[_0x5c3188(0x1ce)][_0x5c3188(0x1f9)]()[_0x5c3188(0x221)](()=>void 0x0);}async[a107_0x22e1e1(0x1d7)](_0x3d8285){const _0x193130=a107_0x22e1e1;this['gitCommitData']=_0x3d8285,this[_0x193130(0x1a1)][_0x193130(0x223)](this[_0x193130(0x211)]),this[_0x193130(0x1ba)]=typedi_1[_0x193130(0x1fd)][_0x193130(0x1ca)](providers_tokens_1[_0x193130(0x1c0)][_0x193130(0x1ba)]),this[_0x193130(0x215)]=typedi_1[_0x193130(0x1fd)][_0x193130(0x1ca)](providers_tokens_1[_0x193130(0x1c0)][_0x193130(0x215)]),this[_0x193130(0x1ef)]=typedi_1[_0x193130(0x1fd)][_0x193130(0x1ca)](providers_tokens_1[_0x193130(0x1c0)][_0x193130(0x1ae)]),this['prefix']=_0x193130(0x1dd)+_0x3d8285[_0x193130(0x1cd)]+_0x193130(0x1ab)+_0x3d8285[_0x193130(0x1fe)]+_0x193130(0x1b2)+GitCommitJob_1[_0x193130(0x216)]+']',this['gitUtils']=new git_utils_1[(_0x193130(0x1bb))](await this[_0x193130(0x1c1)]()),this[_0x193130(0x1ce)]=new mdapi_utils_1[(_0x193130(0x208))](),this[_0x193130(0x1ef)][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x195));try{this[_0x193130(0x1ef)]['log'](this[_0x193130(0x1fc)]+_0x193130(0x20c)),await this[_0x193130(0x1a1)][_0x193130(0x183)](),await this[_0x193130(0x1a1)][_0x193130(0x18f)](_0x193130(0x1c9)),this['sfLogger'][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x1db)),this['lastCommitHash']=await git_internal_1[_0x193130(0x1b8)][_0x193130(0x21e)](await this[_0x193130(0x1c1)](),this['gitCommitData'][_0x193130(0x1fe)]),this['logger']['log']('Last\x20git\x20repository\x20hash\x20is\x20%s.',this[_0x193130(0x193)]);const _0x21813b=await this[_0x193130(0x1a1)][_0x193130(0x198)](this['lastCommitHash']);if(_0x21813b){this[_0x193130(0x1ef)]['log'](_0x193130(0x21c)),await this[_0x193130(0x1a1)][_0x193130(0x18f)]('Completed');return;}this[_0x193130(0x1ef)][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x1f7)+this['gitCommitData'][_0x193130(0x1d8)]+'.'),await this[_0x193130(0x201)][_0x193130(0x188)](this['gitCommitData'][_0x193130(0x1fe)],this['gitCommitData'][_0x193130(0x1cd)]),this['sfLogger'][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x1e9));const _0x499121=await sfdx_utils_1[_0x193130(0x229)][_0x193130(0x189)](this[_0x193130(0x201)]['dir']);await this['fetchCommits']();!this[_0x193130(0x1ef)][_0x193130(0x1c3)]()&&this[_0x193130(0x1ef)][_0x193130(0x220)](await salesforce_logger_v3_service_1['SalesforceLogger3'][_0x193130(0x1a7)](sf_logger_v3_types_1[_0x193130(0x1bf)]['commit']));await this['sfLogger'][_0x193130(0x1c2)]();if(_0x3d8285[_0x193130(0x1d0)]){await this['mdapiUtils'][_0x193130(0x190)](this[_0x193130(0x201)][_0x193130(0x19d)]),await this[_0x193130(0x1ef)][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x1a2))[_0x193130(0x1c2)]();const _0x3106ab=(await fs_internal_1['FS']['readDir'](this['mdapiUtils'][_0x193130(0x19d)],!![]))[_0x193130(0x20f)](_0x27b096=>(0x0,path_1['relative'])(this[_0x193130(0x1ce)][_0x193130(0x19d)],_0x27b096));this[_0x193130(0x1ef)][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x1e3)+_0x3106ab['length']+_0x193130(0x1df)),this[_0x193130(0x211)][_0x193130(0x1c5)]=[],this[_0x193130(0x211)][_0x193130(0x1ec)]=[{'files':{'modified':_0x3106ab,'added':[],'removed':[]},'id':await this[_0x193130(0x201)][_0x193130(0x1ee)](),'message':_0x193130(0x1b1),'username':constants_1[_0x193130(0x1b6)]}];}await this[_0x193130(0x1a1)][_0x193130(0x197)]({[this['gitCommitData']['repositoryGit']]:{'lastCommit':this['lastCommitHash']}}),await this[_0x193130(0x1ef)][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x1f8)+(_0x499121?_0x193130(0x1f3):'NO')+_0x193130(0x22a))[_0x193130(0x1c2)](),await this[_0x193130(0x22c)](_0x499121),await this[_0x193130(0x1ef)][_0x193130(0x19c)](this['prefix']+_0x193130(0x1c7))[_0x193130(0x1c2)](),await this[_0x193130(0x1a1)][_0x193130(0x18f)]('Completed');}catch(_0x4836ea){await this['cleanUp']();if(_0x4836ea instanceof flosum_commit_error_1['FlosumCommitError'])await this[_0x193130(0x1a1)][_0x193130(0x18f)](_0x193130(0x1de))[_0x193130(0x221)](()=>void 0x0),this[_0x193130(0x1ae)][_0x193130(0x19c)](this[_0x193130(0x1fc)]+_0x193130(0x202));else{await this[_0x193130(0x1ae)]['error'](this[_0x193130(0x1fc)]+_0x193130(0x184)+(_0x4836ea instanceof api_error_1[_0x193130(0x21f)]||_0x4836ea instanceof salesforce_error_1[_0x193130(0x192)]?_0x4836ea['toString']():_0x4836ea)),await this[_0x193130(0x1a1)][_0x193130(0x197)]({}),await this[_0x193130(0x1a1)][_0x193130(0x18f)](_0x193130(0x203))[_0x193130(0x221)](()=>void 0x0);throw _0x4836ea;}}finally{await this[_0x193130(0x226)](),await this[_0x193130(0x1ef)]['send']()['catch'](()=>void 0x0);}}};function a107_0x355e(_0x47260c,_0xd0e8cc){const _0x495353=a107_0x5a05();return a107_0x355e=function(_0x151074,_0x5f3031){_0x151074=_0x151074-0x183;let _0x5a0542=_0x495353[_0x151074];return _0x5a0542;},a107_0x355e(_0x47260c,_0xd0e8cc);}GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a107_0x22e1e1(0x1e5),[git_commit_service_1['GitCommitService'],connection_1[a107_0x22e1e1(0x222)]])],GitCommitJob),exports[a107_0x22e1e1(0x1c4)]=GitCommitJob;