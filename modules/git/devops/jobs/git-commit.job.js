const a128_0x2aa097=a128_0x23b5;(function(_0xe0e247,_0x2fac27){const _0x51ea9c=a128_0x23b5,_0x24b8d6=_0xe0e247();while(!![]){try{const _0x1f4d74=parseInt(_0x51ea9c(0x12a))/0x1+parseInt(_0x51ea9c(0x1b5))/0x2+-parseInt(_0x51ea9c(0x11c))/0x3+parseInt(_0x51ea9c(0x13e))/0x4*(-parseInt(_0x51ea9c(0x1c3))/0x5)+-parseInt(_0x51ea9c(0x121))/0x6+-parseInt(_0x51ea9c(0x192))/0x7+parseInt(_0x51ea9c(0x153))/0x8*(parseInt(_0x51ea9c(0x15a))/0x9);if(_0x1f4d74===_0x2fac27)break;else _0x24b8d6['push'](_0x24b8d6['shift']());}catch(_0x50eec4){_0x24b8d6['push'](_0x24b8d6['shift']());}}}(a128_0x46ad,0xb8227));const a128_0x88bd83=(function(){let _0x4a8330=!![];return function(_0x24fef1,_0x473daf){const _0x22c2a1=_0x4a8330?function(){const _0xd298f5=a128_0x23b5;if(_0x473daf){const _0x983129=_0x473daf[_0xd298f5(0x1b8)](_0x24fef1,arguments);return _0x473daf=null,_0x983129;}}:function(){};return _0x4a8330=![],_0x22c2a1;};}()),a128_0x34ae26=a128_0x88bd83(this,function(){const _0x124243=a128_0x23b5;return a128_0x34ae26[_0x124243(0x158)]()[_0x124243(0x191)]('(((.+)+)+)+$')['toString']()['constructor'](a128_0x34ae26)['search'](_0x124243(0x127));});function a128_0x46ad(){const _0x3b4931=['ProvidersFactory','gitApiService','ApiError','BitbucketApiService','handleCommit','updateRemoteState','GitCommitService','gitProvider','SalesforceCommitsManager','reduce','../../internal/fs.internal','\x20Fetch\x20remote\x20branch\x20hash.','default','DEFAULT_GIT_USER_NAME','send','splice','length','mdapiUtils','call','writable','\x20components','proceedFile','../../providers/api/bitbucket-api.service','search','8114890lnBmAX','In\x20Progress','Service','errorNotification','username','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','\x20Processed\x20','typedi','SalesforceError','decorate','catch','Error','proceedCommits','repositoryGit','providersFactory','files','recordType','sync\x20components','get','../../../../constants','../../notifications/commit-to-flosum-error.notification','Branch\x20synchronized.\x20Skip.','config','push','relative','provider','../errors/flosum-commit.error','sfLogger','setCommitDto','flat','../../salesforce/services/salesforce-commits-manager.service','branch','getLoggerId','clone','\x20Proceeded\x20','922812vimtol','getRecordTypes','\x20Download\x20components\x20metadata\x20from\x20Flosum.','apply','prefix','gitCommitData','Completed','values','force','execute','getRemote','fileNames','__createBinding',']\x20Start\x20proceeding\x20git\x20commits.\x20','64520qvVyms','env','../../providers/providers.tokens','getProtocol','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','Tokens','SalesforceLogger3','updateFileNamesForSFDXProject','cleanUp','CommitToFlosumErrorNotification','getGitShellAuthorizationString',']\x20[Branch:\x20','getBranchId','defineProperty','2874204TfheCE','YES','prepareGitChangedPaths','metadata','__esModule','7515144QQyoBz','../../../../core/errors/api.error','function','../../../../core','run','name','(((.+)+)+)+$','removed','stats','917716WMZAWF','prepareMdapi','gitUtils','fetchRepositoryOrBranchData','object','commit','../services/git-commit.service','MAX_COMPONENTS_PER_TICK','createLoggerId','lastCommitHash','author','repository','../../salesforce/utils/sfdx.utils','__metadata','isLoggedIn','MDApiUtils','commits',']\x20[','shift','\x20Commit\x20Summary','152EZyfSh','getRepositoryId','../../internal/git.internal','\x20Cloning\x20git\x20repository\x20from\x20','hasOwnProperty','fetchComponentsMetadata','removeDir','PathUtils','inserted','\x20components.','../../parsers/utils','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','describeCommit','log','isSFDXProject','create','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','dir','createCommit','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','LoggerTypes','1048nNNUNl','updateStatus','email','CommitToFlosumCompletedNotification','../utils/git.utils','toString','GitCommitJob','222273LgzZjt','getOwnPropertyDescriptor','\x20Start\x20Git-commit\x20job.','info','design:paramtypes','configurable','GitProvider','FlosumCommitError','SFDX','\x20Modified\x20','completeNotification','\x20commits.','added','checkSyncStatus','\x20Job\x20done.','readFilesByFilename','DEFAULT_GIT_USER_EMAIL','resetStats','prototype','isEmailNotificationsEnabled','message','checkoutTo','__setModuleDefault','Logger','sendComponents','commitId','modified','__importStar','gitCommit','Last\x20git\x20repository\x20hash\x20is\x20%s.','\x20[SFDX:\x20','logger'];a128_0x46ad=function(){return _0x3b4931;};return a128_0x46ad();}a128_0x34ae26();'use strict';var __createBinding=this&&this[a128_0x2aa097(0x1c1)]||(Object[a128_0x2aa097(0x14d)]?function(_0x54d14b,_0x5664f4,_0x42158d,_0xcd2386){const _0x1a040c=a128_0x2aa097;if(_0xcd2386===undefined)_0xcd2386=_0x42158d;var _0x370399=Object[_0x1a040c(0x15b)](_0x5664f4,_0x42158d);(!_0x370399||('get'in _0x370399?!_0x5664f4[_0x1a040c(0x120)]:_0x370399[_0x1a040c(0x18d)]||_0x370399[_0x1a040c(0x15f)]))&&(_0x370399={'enumerable':!![],'get':function(){return _0x5664f4[_0x42158d];}}),Object[_0x1a040c(0x11b)](_0x54d14b,_0xcd2386,_0x370399);}:function(_0x565c6d,_0x26a836,_0x132ba2,_0x26c82e){if(_0x26c82e===undefined)_0x26c82e=_0x132ba2;_0x565c6d[_0x26c82e]=_0x26a836[_0x132ba2];}),__setModuleDefault=this&&this[a128_0x2aa097(0x170)]||(Object[a128_0x2aa097(0x14d)]?function(_0x2024c0,_0x4fe52c){const _0x465094=a128_0x2aa097;Object[_0x465094(0x11b)](_0x2024c0,'default',{'enumerable':!![],'value':_0x4fe52c});}:function(_0x55aa34,_0x775ae6){const _0x3dd166=a128_0x2aa097;_0x55aa34[_0x3dd166(0x186)]=_0x775ae6;}),__decorate=this&&this['__decorate']||function(_0x3f361f,_0x282721,_0xdaa306,_0x3fc8e2){const _0x443523=a128_0x2aa097;var _0x2f8a46=arguments[_0x443523(0x18a)],_0x5bc29b=_0x2f8a46<0x3?_0x282721:_0x3fc8e2===null?_0x3fc8e2=Object[_0x443523(0x15b)](_0x282721,_0xdaa306):_0x3fc8e2,_0x5f380a;if(typeof Reflect===_0x443523(0x12e)&&typeof Reflect[_0x443523(0x19b)]===_0x443523(0x123))_0x5bc29b=Reflect['decorate'](_0x3f361f,_0x282721,_0xdaa306,_0x3fc8e2);else{for(var _0x5c94a0=_0x3f361f['length']-0x1;_0x5c94a0>=0x0;_0x5c94a0--)if(_0x5f380a=_0x3f361f[_0x5c94a0])_0x5bc29b=(_0x2f8a46<0x3?_0x5f380a(_0x5bc29b):_0x2f8a46>0x3?_0x5f380a(_0x282721,_0xdaa306,_0x5bc29b):_0x5f380a(_0x282721,_0xdaa306))||_0x5bc29b;}return _0x2f8a46>0x3&&_0x5bc29b&&Object[_0x443523(0x11b)](_0x282721,_0xdaa306,_0x5bc29b),_0x5bc29b;},__importStar=this&&this[a128_0x2aa097(0x175)]||function(_0x361542){const _0x2a3a19=a128_0x2aa097;if(_0x361542&&_0x361542['__esModule'])return _0x361542;var _0x5eb372={};if(_0x361542!=null){for(var _0x50d844 in _0x361542)if(_0x50d844!==_0x2a3a19(0x186)&&Object[_0x2a3a19(0x16c)][_0x2a3a19(0x142)][_0x2a3a19(0x18c)](_0x361542,_0x50d844))__createBinding(_0x5eb372,_0x361542,_0x50d844);}return __setModuleDefault(_0x5eb372,_0x361542),_0x5eb372;},__metadata=this&&this[a128_0x2aa097(0x137)]||function(_0x2979fc,_0x452f55){const _0x2fb3df=a128_0x2aa097;if(typeof Reflect==='object'&&typeof Reflect[_0x2fb3df(0x11f)]===_0x2fb3df(0x123))return Reflect['metadata'](_0x2979fc,_0x452f55);},GitCommitJob_1;Object[a128_0x2aa097(0x11b)](exports,a128_0x2aa097(0x120),{'value':!![]}),exports['GitCommitJob']=void 0x0;const core_1=require(a128_0x2aa097(0x124)),fs_internal_1=require(a128_0x2aa097(0x184)),salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),utils_1=require('../../../shared/utils'),path_1=require('path'),typedi_1=__importStar(require(a128_0x2aa097(0x199))),constants_1=require(a128_0x2aa097(0x1a5)),salesforce_commits_manager_service_1=require(a128_0x2aa097(0x1b0)),git_utils_1=require(a128_0x2aa097(0x157)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require(a128_0x2aa097(0x122)),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),git_commit_service_1=require(a128_0x2aa097(0x130)),flosum_commit_error_1=require(a128_0x2aa097(0x1ac)),bitbucket_api_service_1=require(a128_0x2aa097(0x190)),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require(a128_0x2aa097(0x136)),utils_2=require(a128_0x2aa097(0x148)),git_internal_1=require(a128_0x2aa097(0x140)),providers_tokens_1=require(a128_0x2aa097(0x1c5)),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require('../../salesforce/types/sf-logger-v3-types'),path_utils_1=require('../utils/path.utils'),commit_to_flosum_completed_notification_1=require('../../notifications/commit-to-flosum-completed.notification'),commit_to_flosum_error_notification_1=require(a128_0x2aa097(0x1a6));function a128_0x23b5(_0x229906,_0x52f6e4){const _0x840c18=a128_0x46ad();return a128_0x23b5=function(_0x34ae26,_0x88bd83){_0x34ae26=_0x34ae26-0x11a;let _0x46ad4b=_0x840c18[_0x34ae26];return _0x46ad4b;},a128_0x23b5(_0x229906,_0x52f6e4);}let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x2298c8,_0x39f0d2){const _0x4e547d=a128_0x2aa097;this[_0x4e547d(0x176)]=_0x2298c8,this[_0x4e547d(0x1a0)]=_0x39f0d2,this['MAX_COMPONENTS_PER_TICK']=+(process[_0x4e547d(0x1c4)][_0x4e547d(0x131)]||0xbb8),this[_0x4e547d(0x179)]=new core_1[(_0x4e547d(0x171))](GitCommitJob_1[_0x4e547d(0x126)]),this[_0x4e547d(0x173)]='',this[_0x4e547d(0x129)]={'removed':0x0,'modified':0x0,'added':0x0};}async['getRemote'](){const _0x4d04a9=a128_0x2aa097,{repositoryGit:_0x23c88b}=this[_0x4d04a9(0x1ba)],_0x2930ff=typedi_1[_0x4d04a9(0x186)]['get'](providers_tokens_1[_0x4d04a9(0x1c8)]['credentials']);if(this[_0x4d04a9(0x1ba)][_0x4d04a9(0x1ab)]===git_provider_1[_0x4d04a9(0x160)]['Bitbucket']){const _0x3b0010=typedi_1[_0x4d04a9(0x186)]['get'](bitbucket_api_service_1[_0x4d04a9(0x17d)]);await _0x3b0010[_0x4d04a9(0x138)]();}return _0x23c88b['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x4d04a9(0x1c6)])(_0x23c88b)+'://'+_0x2930ff[_0x4d04a9(0x1cd)]()+'@');}async[a128_0x2aa097(0x164)](_0x2a9649,_0x4f06f3,_0x412eaa,_0x3d3573){const _0x5c58ca=a128_0x2aa097;if(!this['config']['isEmailNotificationsEnabled']){this[_0x5c58ca(0x179)][_0x5c58ca(0x15d)]('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_completed_notification_1[(_0x5c58ca(0x156))]({'emails':_0x2a9649,'gitProvider':_0x4f06f3,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x5c58ca(0x156)]['name'],'repositoryName':_0x412eaa,'branchName':_0x3d3573})[_0x5c58ca(0x1be)]();}async[a128_0x2aa097(0x195)](_0x22120e,_0x18e7ee,_0xe99fd2,_0x48f6a0){const _0x68e5a7=a128_0x2aa097;if(!this[_0x68e5a7(0x1a8)][_0x68e5a7(0x16d)]){this[_0x68e5a7(0x179)][_0x68e5a7(0x15d)]('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_error_notification_1[(_0x68e5a7(0x1cc))]({'emails':_0x22120e,'gitProvider':_0x18e7ee,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x68e5a7(0x1cc)]['name'],'repositoryName':_0xe99fd2,'branchName':_0x48f6a0})[_0x68e5a7(0x1be)]();}[a128_0x2aa097(0x16b)](){const _0x4670c3=a128_0x2aa097;this[_0x4670c3(0x129)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a128_0x2aa097(0x1ca)](){const _0x29686d=a128_0x2aa097,_0x1c8e4a=[...this[_0x29686d(0x1ba)][_0x29686d(0x1c0)]];this[_0x29686d(0x1ba)][_0x29686d(0x1c0)]=[];for(const _0xd293f4 of _0x1c8e4a){this[_0x29686d(0x1ba)][_0x29686d(0x1c0)]['push'](...await(0x0,utils_2[_0x29686d(0x169)])(_0xd293f4,this[_0x29686d(0x18b)]['dir']));}}async['fetchCommits'](){const _0x1d8420=a128_0x2aa097;if(this[_0x1d8420(0x1ba)]['force'])return;const _0x5a8379=[];for(const _0x291b8a of this[_0x1d8420(0x1ba)][_0x1d8420(0x13a)]){const _0x456467=await this[_0x1d8420(0x12c)][_0x1d8420(0x14a)](_0x291b8a['id']);_0x291b8a['username']=_0x456467[_0x1d8420(0x134)],_0x291b8a[_0x1d8420(0x16e)]=_0x456467[_0x1d8420(0x16e)],_0x291b8a[_0x1d8420(0x1a1)]=_0x456467['changes'],_0x291b8a['email']=_0x456467[_0x1d8420(0x155)];if(_0x291b8a[_0x1d8420(0x155)]===constants_1[_0x1d8420(0x16a)])throw new flosum_commit_error_1['FlosumCommitError']();_0x5a8379[_0x1d8420(0x1a9)](...Object[_0x1d8420(0x1bc)](_0x291b8a[_0x1d8420(0x1a1)])[_0x1d8420(0x1af)]());}this['gitCommitData'][_0x1d8420(0x1c0)]=[...new Set(path_utils_1[_0x1d8420(0x145)]['prepareGitChangedPaths'](this[_0x1d8420(0x176)][_0x1d8420(0x1a2)],_0x5a8379,![]))];}async[a128_0x2aa097(0x172)](_0x3b7c73,_0x5e791c,_0x2c447e){const _0x3f8079=a128_0x2aa097,_0x485edc=_0x2c447e[_0x3f8079(0x183)]((_0x51184d,_0xfb40b5)=>{const _0x295320=_0x3f8079;return _0x51184d['inserted']['push'](..._0xfb40b5['inserted']),_0x51184d['modified'][_0x295320(0x1a9)](..._0xfb40b5['modified']),_0x51184d[_0x295320(0x128)]['push'](..._0xfb40b5[_0x295320(0x128)]),_0x51184d;},{'inserted':[],'modified':[],'removed':[]}),_0x2014e8=new salesforce_commits_manager_service_1[(_0x3f8079(0x182))]({'recordTypes':this[_0x3f8079(0x176)][_0x3f8079(0x1b6)](),'branchId':this[_0x3f8079(0x176)][_0x3f8079(0x11a)](),'repositoryId':this[_0x3f8079(0x176)]['getRepositoryId'](),'logger':this['sfLogger'],'commitId':this['commitId']});await _0x2014e8[_0x3f8079(0x19e)]([{'author':_0x3b7c73,'message':_0x5e791c,'inserted':_0x485edc[_0x3f8079(0x146)],'modified':_0x485edc[_0x3f8079(0x174)],'removed':_0x485edc[_0x3f8079(0x128)]}]);}async[a128_0x2aa097(0x17e)](_0x30a048,_0x74fa5f){const _0x22c2e4=a128_0x2aa097;await this['sfLogger'][_0x22c2e4(0x14b)](this[_0x22c2e4(0x1b9)]+_0x22c2e4(0x1b7))['send'](),await this['gitCommit'][_0x22c2e4(0x143)](_0x74fa5f);const {added:_0x421a87,modified:_0x496384,removed:_0x5b6d85}=_0x30a048['files'];_0x74fa5f&&_0x496384['push'](..._0x5b6d85[_0x22c2e4(0x189)](0x0));const _0x227c3c=path_utils_1[_0x22c2e4(0x145)][_0x22c2e4(0x11e)](this['gitCommit'][_0x22c2e4(0x1a2)],[..._0x421a87,..._0x496384,..._0x5b6d85],_0x74fa5f&&!this[_0x22c2e4(0x1ba)][_0x22c2e4(0x1bd)]),_0x4d84fb=(0x0,utils_2['convertToCleanPaths'])(_0x227c3c);let _0x14117e=0x0;const _0x37aa06=[];(_0x421a87['length']||_0x496384['length'])&&this['gitCommit'][_0x22c2e4(0x13f)]()&&(this['commitId']=await this[_0x22c2e4(0x176)][_0x22c2e4(0x150)](_0x30a048[_0x22c2e4(0x16e)]));const _0x308956=_0x4d84fb[_0x22c2e4(0x18a)];let _0x578d53=0x0;while(_0x4d84fb[_0x22c2e4(0x18a)]){const _0x335e49=_0x4d84fb[_0x22c2e4(0x13c)](),_0x54ca5c=await this['gitCommit'][_0x22c2e4(0x18f)](_0x335e49,this[_0x22c2e4(0x18b)][_0x22c2e4(0x14f)],_0x74fa5f&&!this['gitCommitData'][_0x22c2e4(0x1bd)]);_0x14117e+=_0x54ca5c[_0x22c2e4(0x146)][_0x22c2e4(0x18a)]+_0x54ca5c['removed'][_0x22c2e4(0x18a)]+_0x54ca5c['modified']['length'],this[_0x22c2e4(0x129)][_0x22c2e4(0x166)]+=_0x54ca5c['inserted'][_0x22c2e4(0x18a)],this[_0x22c2e4(0x129)][_0x22c2e4(0x174)]+=_0x54ca5c[_0x22c2e4(0x174)][_0x22c2e4(0x18a)],this[_0x22c2e4(0x129)][_0x22c2e4(0x128)]+=_0x54ca5c[_0x22c2e4(0x128)][_0x22c2e4(0x18a)],_0x578d53++,_0x578d53%0x64===0x0&&this[_0x22c2e4(0x179)][_0x22c2e4(0x14b)](_0x22c2e4(0x151),_0x578d53,_0x308956,_0x14117e),_0x37aa06[_0x22c2e4(0x1a9)](_0x54ca5c),_0x14117e>this[_0x22c2e4(0x131)]&&(await this[_0x22c2e4(0x172)](_0x30a048[_0x22c2e4(0x196)],_0x30a048['message'],_0x37aa06),await this['sfLogger'][_0x22c2e4(0x14b)](this[_0x22c2e4(0x1b9)]+_0x22c2e4(0x198)+_0x14117e+_0x22c2e4(0x147))[_0x22c2e4(0x188)](),_0x14117e=0x0,_0x37aa06[_0x22c2e4(0x189)](0x0));}_0x37aa06[_0x22c2e4(0x18a)]&&(await this[_0x22c2e4(0x172)](_0x30a048[_0x22c2e4(0x196)],_0x30a048[_0x22c2e4(0x16e)],_0x37aa06),await this[_0x22c2e4(0x1ad)]['log'](this[_0x22c2e4(0x1b9)]+_0x22c2e4(0x198)+_0x14117e+_0x22c2e4(0x147))[_0x22c2e4(0x188)]());}async[a128_0x2aa097(0x19e)](_0x345618){const _0x468c23=a128_0x2aa097,_0x126f6a=[...this['gitCommitData'][_0x468c23(0x13a)]],_0xfd9ebe=_0x126f6a[_0x468c23(0x18a)];let _0x536dc6=0x0;while(_0x126f6a[_0x468c23(0x18a)]){const _0x2a33b1=_0x126f6a['shift']();!this['gitCommitData'][_0x468c23(0x1bd)]&&(this[_0x468c23(0x176)][_0x468c23(0x13f)]()?(await this['gitUtils']['checkoutTo'](_0x2a33b1['id']),await this['mdapiUtils'][_0x468c23(0x12b)](this[_0x468c23(0x12c)]['dir'])):(await this['gitUtils'][_0x468c23(0x16f)](this['lastCommitHash']),await this[_0x468c23(0x18b)][_0x468c23(0x12b)](this[_0x468c23(0x12c)][_0x468c23(0x14f)]))),await this['handleCommit'](_0x2a33b1,_0x345618),await this[_0x468c23(0x18b)][_0x468c23(0x144)](),_0x536dc6+=0x1,await this[_0x468c23(0x1ad)][_0x468c23(0x14b)](this['prefix']+_0x468c23(0x13d)),await this[_0x468c23(0x1ad)]['log'](this[_0x468c23(0x1b9)]+'\x20Added\x20'+this[_0x468c23(0x129)][_0x468c23(0x166)]+'\x20components'),await this[_0x468c23(0x1ad)][_0x468c23(0x14b)](this['prefix']+_0x468c23(0x163)+this[_0x468c23(0x129)]['modified']+_0x468c23(0x18e)),await this[_0x468c23(0x1ad)][_0x468c23(0x14b)](this[_0x468c23(0x1b9)]+'\x20Removed\x20'+this[_0x468c23(0x129)][_0x468c23(0x128)]+_0x468c23(0x18e)),await this[_0x468c23(0x1ad)]['log'](this[_0x468c23(0x1b9)]+_0x468c23(0x1b4)+_0x536dc6+'/'+_0xfd9ebe+_0x468c23(0x165))['send'](),this[_0x468c23(0x16b)]();}}async['cleanUp'](){const _0x48ed1e=a128_0x2aa097;this[_0x48ed1e(0x12c)]&&await this[_0x48ed1e(0x12c)][_0x48ed1e(0x144)]()['catch'](()=>void 0x0),this[_0x48ed1e(0x18b)]&&await this['mdapiUtils'][_0x48ed1e(0x144)]()[_0x48ed1e(0x19c)](()=>void 0x0);}async[a128_0x2aa097(0x125)](_0x3fbdd6){const _0x16ce7d=a128_0x2aa097;this['gitCommitData']=_0x3fbdd6,this['gitCommit'][_0x16ce7d(0x1ae)](this[_0x16ce7d(0x1ba)]),this[_0x16ce7d(0x17b)]=typedi_1[_0x16ce7d(0x186)][_0x16ce7d(0x1a4)](providers_tokens_1[_0x16ce7d(0x1c8)][_0x16ce7d(0x17b)]),this['config']=typedi_1['default'][_0x16ce7d(0x1a4)](providers_tokens_1['Tokens']['config']),this['sfLogger']=typedi_1['default'][_0x16ce7d(0x1a4)](providers_tokens_1[_0x16ce7d(0x1c8)][_0x16ce7d(0x179)]),this[_0x16ce7d(0x1b9)]=_0x16ce7d(0x149)+_0x3fbdd6['repository']+_0x16ce7d(0x1ce)+_0x3fbdd6['branch']+_0x16ce7d(0x13b)+GitCommitJob_1['name']+']',this['gitUtils']=new git_utils_1['GitUtils'](await this[_0x16ce7d(0x1bf)]()),this[_0x16ce7d(0x18b)]=new mdapi_utils_1[(_0x16ce7d(0x139))](),this[_0x16ce7d(0x1ad)]['log'](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x15c));try{this[_0x16ce7d(0x1ad)][_0x16ce7d(0x14b)](this[_0x16ce7d(0x1b9)]+'\x20Fetch\x20salesforce\x20data.'),await this[_0x16ce7d(0x176)][_0x16ce7d(0x12d)](),await this['gitCommit'][_0x16ce7d(0x154)](_0x16ce7d(0x193)),this[_0x16ce7d(0x1ad)][_0x16ce7d(0x14b)](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x185)),this[_0x16ce7d(0x133)]=await git_internal_1['Git']['getRemoteHash'](await this[_0x16ce7d(0x1bf)](),this[_0x16ce7d(0x1ba)]['branch']),this[_0x16ce7d(0x179)][_0x16ce7d(0x14b)](_0x16ce7d(0x177),this[_0x16ce7d(0x133)]);const _0x4735da=await this[_0x16ce7d(0x176)][_0x16ce7d(0x167)](this['lastCommitHash']);if(_0x4735da){this[_0x16ce7d(0x1ad)][_0x16ce7d(0x14b)](_0x16ce7d(0x1a7)),await this[_0x16ce7d(0x176)][_0x16ce7d(0x154)](_0x16ce7d(0x1bb));return;}this['sfLogger'][_0x16ce7d(0x14b)](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x141)+this[_0x16ce7d(0x1ba)]['repositoryGit']+'.'),await this['gitUtils'][_0x16ce7d(0x1b3)](this[_0x16ce7d(0x1ba)][_0x16ce7d(0x1b1)],this['gitCommitData'][_0x16ce7d(0x135)]),this['sfLogger'][_0x16ce7d(0x14b)](this[_0x16ce7d(0x1b9)]+'\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.');const _0x563103=await sfdx_utils_1[_0x16ce7d(0x162)][_0x16ce7d(0x14c)](this[_0x16ce7d(0x12c)][_0x16ce7d(0x14f)]);await this['fetchCommits']();!this[_0x16ce7d(0x1ad)][_0x16ce7d(0x1b2)]()&&this[_0x16ce7d(0x1ad)]['setLoggerId'](await salesforce_logger_v3_service_1[_0x16ce7d(0x1c9)][_0x16ce7d(0x132)](sf_logger_v3_types_1[_0x16ce7d(0x152)][_0x16ce7d(0x12f)]));await this[_0x16ce7d(0x1ad)]['send']();if(_0x3fbdd6[_0x16ce7d(0x1bd)]){await this[_0x16ce7d(0x18b)][_0x16ce7d(0x12b)](this[_0x16ce7d(0x12c)]['dir']),await this[_0x16ce7d(0x1ad)]['log'](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x197))[_0x16ce7d(0x188)]();const _0x4f9e27=(await fs_internal_1['FS']['readDir'](this[_0x16ce7d(0x18b)][_0x16ce7d(0x14f)],!![]))['map'](_0x57fb52=>(0x0,path_1[_0x16ce7d(0x1aa)])(this[_0x16ce7d(0x18b)]['dir'],_0x57fb52));this[_0x16ce7d(0x1ad)][_0x16ce7d(0x14b)](this['prefix']+'\x20Force\x20commit.\x20Have\x20to\x20parse\x20'+_0x4f9e27[_0x16ce7d(0x18a)]+'\x20files\x20before\x20sync.'),this['gitCommitData'][_0x16ce7d(0x1c0)]=[],this[_0x16ce7d(0x1ba)][_0x16ce7d(0x13a)]=[{'files':{'modified':_0x4f9e27,'added':[],'removed':[]},'id':await this[_0x16ce7d(0x12c)]['getCurrentHash'](),'message':_0x16ce7d(0x1a3),'username':constants_1[_0x16ce7d(0x187)]}];}await this[_0x16ce7d(0x176)]['updateRemoteState']({[this[_0x16ce7d(0x1ba)][_0x16ce7d(0x19f)]]:{'lastCommit':this['lastCommitHash']}}),await this['sfLogger'][_0x16ce7d(0x14b)](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x178)+(_0x563103?_0x16ce7d(0x11d):'NO')+_0x16ce7d(0x1c2))[_0x16ce7d(0x188)](),await this[_0x16ce7d(0x19e)](_0x563103),await this[_0x16ce7d(0x1ad)]['log'](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x168))[_0x16ce7d(0x188)](),await this['gitCommit']['updateStatus'](_0x16ce7d(0x1bb)),await this[_0x16ce7d(0x164)]([_0x3fbdd6[_0x16ce7d(0x155)]],this[_0x16ce7d(0x1a8)][_0x16ce7d(0x181)],_0x3fbdd6['repository'],_0x3fbdd6[_0x16ce7d(0x1b1)]);}catch(_0x513a01){await this['cleanUp']();if(_0x513a01 instanceof flosum_commit_error_1[_0x16ce7d(0x161)])await this['gitCommit'][_0x16ce7d(0x154)](_0x16ce7d(0x1bb))[_0x16ce7d(0x19c)](()=>void 0x0),this[_0x16ce7d(0x179)][_0x16ce7d(0x14b)](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x1c7));else{await this[_0x16ce7d(0x179)]['error'](this[_0x16ce7d(0x1b9)]+_0x16ce7d(0x14e)+(_0x513a01 instanceof api_error_1[_0x16ce7d(0x17c)]||_0x513a01 instanceof salesforce_error_1[_0x16ce7d(0x19a)]?_0x513a01['toString']():_0x513a01)),await this[_0x16ce7d(0x176)][_0x16ce7d(0x17f)]({}),await this[_0x16ce7d(0x176)][_0x16ce7d(0x154)](_0x16ce7d(0x19d))['catch'](()=>void 0x0),await this[_0x16ce7d(0x195)]([_0x3fbdd6[_0x16ce7d(0x155)]],this[_0x16ce7d(0x1a8)][_0x16ce7d(0x181)],_0x3fbdd6[_0x16ce7d(0x135)],_0x3fbdd6[_0x16ce7d(0x1b1)]);throw _0x513a01;}}finally{await this[_0x16ce7d(0x1cb)](),await this[_0x16ce7d(0x1ad)]['send']()[_0x16ce7d(0x19c)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a128_0x2aa097(0x194)])({'transient':!![]}),__metadata(a128_0x2aa097(0x15e),[git_commit_service_1[a128_0x2aa097(0x180)],connection_1[a128_0x2aa097(0x17a)]])],GitCommitJob),exports[a128_0x2aa097(0x159)]=GitCommitJob;