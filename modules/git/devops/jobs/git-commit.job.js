const a126_0xedb65b=a126_0x1177;(function(_0x54da21,_0x282192){const _0x427684=a126_0x1177,_0x4b4650=_0x54da21();while(!![]){try{const _0x26265f=-parseInt(_0x427684(0xec))/0x1*(parseInt(_0x427684(0xb6))/0x2)+parseInt(_0x427684(0x78))/0x3*(-parseInt(_0x427684(0xde))/0x4)+parseInt(_0x427684(0xfd))/0x5*(-parseInt(_0x427684(0xf3))/0x6)+parseInt(_0x427684(0x11d))/0x7*(-parseInt(_0x427684(0xe0))/0x8)+parseInt(_0x427684(0xca))/0x9*(parseInt(_0x427684(0x8c))/0xa)+-parseInt(_0x427684(0xe4))/0xb*(-parseInt(_0x427684(0x11a))/0xc)+parseInt(_0x427684(0xd9))/0xd;if(_0x26265f===_0x282192)break;else _0x4b4650['push'](_0x4b4650['shift']());}catch(_0x1473ca){_0x4b4650['push'](_0x4b4650['shift']());}}}(a126_0x4db5,0x69328));const a126_0x1cab25=(function(){let _0x2513dc=!![];return function(_0xdee1b2,_0x2d7c2c){const _0x4eea73=_0x2513dc?function(){if(_0x2d7c2c){const _0x19280b=_0x2d7c2c['apply'](_0xdee1b2,arguments);return _0x2d7c2c=null,_0x19280b;}}:function(){};return _0x2513dc=![],_0x4eea73;};}()),a126_0x1264c9=a126_0x1cab25(this,function(){const _0x49f3e4=a126_0x1177;return a126_0x1264c9[_0x49f3e4(0x89)]()[_0x49f3e4(0xbf)](_0x49f3e4(0x97))[_0x49f3e4(0x89)]()[_0x49f3e4(0x11b)](a126_0x1264c9)[_0x49f3e4(0xbf)](_0x49f3e4(0x97));});a126_0x1264c9();'use strict';function a126_0x4db5(){const _0x2d0544=['../../../../constants','151568VfAkps','repository','setLoggerId','send','7909KZtYCq','SalesforceLogger3','info','removeDir','proceedCommits','removed','../../providers/api/bitbucket-api.service','splice','7RSFiFF','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','gitApiService','../../../../core','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','getBranchId','12vkFvtL','path','create','defineProperty','sfLogger','sync\x20components','shift','\x20Download\x20components\x20metadata\x20from\x20Flosum.','modified','\x20commits.','1119590wkVsXr','prototype','proceedFile','getProtocol','__setModuleDefault','logger','prepareGitChangedPaths','reduce','prefix','\x20Fetch\x20salesforce\x20data.','function','Branch\x20synchronized.\x20Skip.','../utils/mdapi.utils','GitCommitJob','\x20Processed\x20','author','gitProvider','credentials',']\x20[Branch:\x20','setCommitDto','force','added','../../parsers/utils','decorate',']\x20[','commit','\x20[SFDX:\x20','MAX_COMPONENTS_PER_TICK','typedi','5064AWivWV','constructor','YES','252TADodp','\x20files\x20before\x20sync.','DEFAULT_GIT_USER_EMAIL','getGitShellAuthorizationString','__metadata','../../salesforce/utils/sfdx.utils','GitProvider','config','convertToCleanPaths','isEmailNotificationsEnabled','Service','updateStatus','LoggerTypes','In\x20Progress','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','4041YSAtkh','prepareMdapi','\x20Removed\x20','getRemote','\x20Modified\x20','isLoggedIn','gitUtils','Logger','relative','getRepositoryId','fetchRepositoryOrBranchData','execute','getOwnPropertyDescriptor','readFilesByFilename','../../../shared/utils','changes','\x20components.','toString','CommitToFlosumCompletedNotification','gitCommit','5300PswRAl','checkSyncStatus','resetStats','length','providersFactory','describeCommit','name','Git','run','../../providers/types/git-provider','\x20Start\x20Git-commit\x20job.','(((.+)+)+)+$','flat','mdapiUtils','dir','push','log','getRecordTypes','../utils/connection','CommitToFlosumErrorNotification','\x20Job\x20done.','fetchComponentsMetadata','ProvidersFactory','commitId','username','handleCommit','://','../errors/flosum-commit.error','../../internal/fs.internal','object','Bitbucket','__importStar','recordType','fileNames','\x20Commit\x20Summary','get','files','../../notifications/commit-to-flosum-completed.notification','__esModule','getCurrentHash','map','catch','218134apOLua','Email\x20notifications\x20are\x20disabled.','\x20Cloning\x20git\x20repository\x20from\x20','../../providers/providers.tokens','branch','checkoutTo','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','SalesforceError','PathUtils','search','FlosumCommitError','message','sendComponents','errorNotification','\x20Proceeded\x20','\x20components','completeNotification','cleanUp','../utils/path.utils','commits','6651onxqlz','inserted','Tokens','stats','provider','email','__createBinding','GitCommitService','default','lastCommitHash','gitCommitData','createLoggerId','Completed','BitbucketApiService','../../internal/git.internal','21406736rpjtkU','Error','DEFAULT_GIT_USER_NAME','error','call','52OBPDUE'];a126_0x4db5=function(){return _0x2d0544;};return a126_0x4db5();}function a126_0x1177(_0x1a6f94,_0x43ae5c){const _0x2fff03=a126_0x4db5();return a126_0x1177=function(_0x1264c9,_0x1cab25){_0x1264c9=_0x1264c9-0x6e;let _0x4db564=_0x2fff03[_0x1264c9];return _0x4db564;},a126_0x1177(_0x1a6f94,_0x43ae5c);}var __createBinding=this&&this[a126_0xedb65b(0xd0)]||(Object[a126_0xedb65b(0xf5)]?function(_0x59ef6c,_0x295157,_0x1d406a,_0x375a49){const _0x138765=a126_0xedb65b;if(_0x375a49===undefined)_0x375a49=_0x1d406a;var _0x206988=Object['getOwnPropertyDescriptor'](_0x295157,_0x1d406a);(!_0x206988||('get'in _0x206988?!_0x295157[_0x138765(0xb2)]:_0x206988['writable']||_0x206988['configurable']))&&(_0x206988={'enumerable':!![],'get':function(){return _0x295157[_0x1d406a];}}),Object['defineProperty'](_0x59ef6c,_0x375a49,_0x206988);}:function(_0x2f860a,_0x25287b,_0x132ba2,_0x1ba847){if(_0x1ba847===undefined)_0x1ba847=_0x132ba2;_0x2f860a[_0x1ba847]=_0x25287b[_0x132ba2];}),__setModuleDefault=this&&this[a126_0xedb65b(0x101)]||(Object['create']?function(_0x6a9550,_0x206e7d){const _0x4a5a45=a126_0xedb65b;Object[_0x4a5a45(0xf6)](_0x6a9550,_0x4a5a45(0xd2),{'enumerable':!![],'value':_0x206e7d});}:function(_0x481450,_0x54982f){_0x481450['default']=_0x54982f;}),__decorate=this&&this['__decorate']||function(_0x500600,_0x3b0c4f,_0x2ef5c1,_0x5c3099){const _0x370553=a126_0xedb65b;var _0xe4ecc3=arguments['length'],_0xb5ba51=_0xe4ecc3<0x3?_0x3b0c4f:_0x5c3099===null?_0x5c3099=Object[_0x370553(0x84)](_0x3b0c4f,_0x2ef5c1):_0x5c3099,_0x5c430b;if(typeof Reflect===_0x370553(0xa9)&&typeof Reflect[_0x370553(0x114)]===_0x370553(0x107))_0xb5ba51=Reflect['decorate'](_0x500600,_0x3b0c4f,_0x2ef5c1,_0x5c3099);else{for(var _0x43e933=_0x500600['length']-0x1;_0x43e933>=0x0;_0x43e933--)if(_0x5c430b=_0x500600[_0x43e933])_0xb5ba51=(_0xe4ecc3<0x3?_0x5c430b(_0xb5ba51):_0xe4ecc3>0x3?_0x5c430b(_0x3b0c4f,_0x2ef5c1,_0xb5ba51):_0x5c430b(_0x3b0c4f,_0x2ef5c1))||_0xb5ba51;}return _0xe4ecc3>0x3&&_0xb5ba51&&Object[_0x370553(0xf6)](_0x3b0c4f,_0x2ef5c1,_0xb5ba51),_0xb5ba51;},__importStar=this&&this[a126_0xedb65b(0xab)]||function(_0x2193a9){const _0x6e447c=a126_0xedb65b;if(_0x2193a9&&_0x2193a9['__esModule'])return _0x2193a9;var _0xa0880={};if(_0x2193a9!=null){for(var _0x5ebbb1 in _0x2193a9)if(_0x5ebbb1!=='default'&&Object[_0x6e447c(0xfe)]['hasOwnProperty'][_0x6e447c(0xdd)](_0x2193a9,_0x5ebbb1))__createBinding(_0xa0880,_0x2193a9,_0x5ebbb1);}return __setModuleDefault(_0xa0880,_0x2193a9),_0xa0880;},__metadata=this&&this[a126_0xedb65b(0x121)]||function(_0x59e19f,_0x18766f){const _0x43a901=a126_0xedb65b;if(typeof Reflect===_0x43a901(0xa9)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x59e19f,_0x18766f);},GitCommitJob_1;Object[a126_0xedb65b(0xf6)](exports,a126_0xedb65b(0xb2),{'value':!![]}),exports[a126_0xedb65b(0x10a)]=void 0x0;const core_1=require(a126_0xedb65b(0xef)),fs_internal_1=require(a126_0xedb65b(0xa8)),salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),utils_1=require(a126_0xedb65b(0x86)),path_1=require(a126_0xedb65b(0xf4)),typedi_1=__importStar(require(a126_0xedb65b(0x119))),constants_1=require(a126_0xedb65b(0xdf)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a126_0xedb65b(0x109)),api_error_1=require('../../../../core/errors/api.error'),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),git_commit_service_1=require('../services/git-commit.service'),flosum_commit_error_1=require(a126_0xedb65b(0xa7)),bitbucket_api_service_1=require(a126_0xedb65b(0xea)),git_provider_1=require(a126_0xedb65b(0x95)),sfdx_utils_1=require(a126_0xedb65b(0x6e)),utils_2=require(a126_0xedb65b(0x113)),git_internal_1=require(a126_0xedb65b(0xd8)),providers_tokens_1=require(a126_0xedb65b(0xb9)),connection_1=require(a126_0xedb65b(0x9e)),sf_logger_v3_types_1=require('../../salesforce/types/sf-logger-v3-types'),path_utils_1=require(a126_0xedb65b(0xc8)),commit_to_flosum_completed_notification_1=require(a126_0xedb65b(0xb1)),commit_to_flosum_error_notification_1=require('../../notifications/commit-to-flosum-error.notification');let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x378653,_0x3b5687){const _0x3c1cb5=a126_0xedb65b;this['gitCommit']=_0x378653,this[_0x3c1cb5(0x90)]=_0x3b5687,this[_0x3c1cb5(0x118)]=+(process['env'][_0x3c1cb5(0x118)]||0xbb8),this[_0x3c1cb5(0x102)]=new core_1[(_0x3c1cb5(0x7f))](GitCommitJob_1[_0x3c1cb5(0x92)]),this[_0x3c1cb5(0xa3)]='',this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async[a126_0xedb65b(0x7b)](){const _0x1a1cda=a126_0xedb65b,{repositoryGit:_0x1ec95f}=this[_0x1a1cda(0xd4)],_0x186c77=typedi_1[_0x1a1cda(0xd2)][_0x1a1cda(0xaf)](providers_tokens_1[_0x1a1cda(0xcc)][_0x1a1cda(0x10e)]);if(this[_0x1a1cda(0xd4)][_0x1a1cda(0xce)]===git_provider_1[_0x1a1cda(0x6f)][_0x1a1cda(0xaa)]){const _0x3777c6=typedi_1[_0x1a1cda(0xd2)][_0x1a1cda(0xaf)](bitbucket_api_service_1[_0x1a1cda(0xd7)]);await _0x3777c6[_0x1a1cda(0x7d)]();}return _0x1ec95f['replace'](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x1a1cda(0x100)])(_0x1ec95f)+_0x1a1cda(0xa6)+_0x186c77[_0x1a1cda(0x120)]()+'@');}async[a126_0xedb65b(0xc6)](_0x5dfc37,_0x1907b5,_0x37d28a,_0x1a87eb){const _0x496236=a126_0xedb65b;if(!this[_0x496236(0x70)][_0x496236(0x72)]){this[_0x496236(0x102)]['info'](_0x496236(0xb7));return;}await new commit_to_flosum_completed_notification_1[(_0x496236(0x8a))]({'emails':_0x5dfc37,'gitProvider':_0x1907b5,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x496236(0x8a)][_0x496236(0x92)],'repositoryName':_0x37d28a,'branchName':_0x1a87eb})['execute']();}async[a126_0xedb65b(0xc3)](_0x674f37,_0x1154bf,_0x373bb3,_0xdfb3ff){const _0x59610b=a126_0xedb65b;if(!this[_0x59610b(0x70)][_0x59610b(0x72)]){this[_0x59610b(0x102)][_0x59610b(0xe6)]('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_error_notification_1[(_0x59610b(0x9f))]({'emails':_0x674f37,'gitProvider':_0x1154bf,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x59610b(0x9f)]['name'],'repositoryName':_0x373bb3,'branchName':_0xdfb3ff})[_0x59610b(0x83)]();}['resetStats'](){const _0x183952=a126_0xedb65b;this[_0x183952(0xcd)]={'removed':0x0,'modified':0x0,'added':0x0};}async['updateFileNamesForSFDXProject'](){const _0x1b88ce=a126_0xedb65b,_0x208fb0=[...this['gitCommitData']['fileNames']];this[_0x1b88ce(0xd4)]['fileNames']=[];for(const _0x3ce591 of _0x208fb0){this[_0x1b88ce(0xd4)][_0x1b88ce(0xad)][_0x1b88ce(0x9b)](...await(0x0,utils_2[_0x1b88ce(0x85)])(_0x3ce591,this[_0x1b88ce(0x99)][_0x1b88ce(0x9a)]));}}async['fetchCommits'](){const _0x399734=a126_0xedb65b;if(this[_0x399734(0xd4)]['force'])return;const _0x2a9a56=[];for(const _0x5e183e of this[_0x399734(0xd4)][_0x399734(0xc9)]){const _0x24e271=await this[_0x399734(0x7e)][_0x399734(0x91)](_0x5e183e['id']);_0x5e183e[_0x399734(0xa4)]=_0x24e271[_0x399734(0x10c)],_0x5e183e[_0x399734(0xc1)]=_0x24e271['message'],_0x5e183e[_0x399734(0xb0)]=_0x24e271[_0x399734(0x87)],_0x5e183e[_0x399734(0xcf)]=_0x24e271['email'];if(_0x5e183e['email']===constants_1[_0x399734(0x11f)])throw new flosum_commit_error_1[(_0x399734(0xc0))]();_0x2a9a56[_0x399734(0x9b)](...Object['values'](_0x5e183e['files'])[_0x399734(0x98)]());}this[_0x399734(0xd4)][_0x399734(0xad)]=[...new Set(path_utils_1[_0x399734(0xbe)][_0x399734(0x103)](this[_0x399734(0x8b)][_0x399734(0xac)],_0x2a9a56,![]))];}async['sendComponents'](_0x4cb4d7,_0x5089de,_0x4becc9){const _0x3d360=a126_0xedb65b,_0x4a9b58=_0x4becc9[_0x3d360(0x104)]((_0x3e32ba,_0x5ce4a9)=>{const _0x50ade7=_0x3d360;return _0x3e32ba['inserted'][_0x50ade7(0x9b)](..._0x5ce4a9['inserted']),_0x3e32ba[_0x50ade7(0xfb)]['push'](..._0x5ce4a9[_0x50ade7(0xfb)]),_0x3e32ba['removed'][_0x50ade7(0x9b)](..._0x5ce4a9[_0x50ade7(0xe9)]),_0x3e32ba;},{'inserted':[],'modified':[],'removed':[]}),_0x2637eb=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x3d360(0x8b)][_0x3d360(0x9d)](),'branchId':this[_0x3d360(0x8b)][_0x3d360(0xf2)](),'repositoryId':this[_0x3d360(0x8b)][_0x3d360(0x81)](),'logger':this[_0x3d360(0xf7)],'commitId':this[_0x3d360(0xa3)]});await _0x2637eb['proceedCommits']([{'author':_0x4cb4d7,'message':_0x5089de,'inserted':_0x4a9b58[_0x3d360(0xcb)],'modified':_0x4a9b58[_0x3d360(0xfb)],'removed':_0x4a9b58[_0x3d360(0xe9)]}]);}async[a126_0xedb65b(0xa5)](_0xc98e6b,_0x357ffa){const _0x2409e6=a126_0xedb65b;await this[_0x2409e6(0xf7)]['log'](this['prefix']+_0x2409e6(0xfa))[_0x2409e6(0xe3)](),await this[_0x2409e6(0x8b)][_0x2409e6(0xa1)](_0x357ffa);const {added:_0x460061,modified:_0x4874fd,removed:_0x504d5e}=_0xc98e6b[_0x2409e6(0xb0)];_0x357ffa&&_0x4874fd[_0x2409e6(0x9b)](..._0x504d5e[_0x2409e6(0xeb)](0x0));const _0x25592b=path_utils_1[_0x2409e6(0xbe)][_0x2409e6(0x103)](this[_0x2409e6(0x8b)][_0x2409e6(0xac)],[..._0x460061,..._0x4874fd,..._0x504d5e],_0x357ffa&&!this[_0x2409e6(0xd4)][_0x2409e6(0x111)]),_0x199b30=(0x0,utils_2[_0x2409e6(0x71)])(_0x25592b);let _0xa360f5=0x0;const _0x3375f8=[];(_0x460061[_0x2409e6(0x8f)]||_0x4874fd[_0x2409e6(0x8f)])&&this[_0x2409e6(0x8b)]['getRepositoryId']()&&(this['commitId']=await this['gitCommit']['createCommit'](_0xc98e6b[_0x2409e6(0xc1)]));const _0x5a2d72=_0x199b30[_0x2409e6(0x8f)];let _0x70c06e=0x0;while(_0x199b30[_0x2409e6(0x8f)]){const _0xec3e37=_0x199b30[_0x2409e6(0xf9)](),_0x233c96=await this[_0x2409e6(0x8b)][_0x2409e6(0xff)](_0xec3e37,this['mdapiUtils']['dir'],_0x357ffa&&!this[_0x2409e6(0xd4)][_0x2409e6(0x111)]);_0xa360f5+=_0x233c96['inserted'][_0x2409e6(0x8f)]+_0x233c96[_0x2409e6(0xe9)][_0x2409e6(0x8f)]+_0x233c96[_0x2409e6(0xfb)][_0x2409e6(0x8f)],this['stats']['added']+=_0x233c96[_0x2409e6(0xcb)][_0x2409e6(0x8f)],this[_0x2409e6(0xcd)][_0x2409e6(0xfb)]+=_0x233c96[_0x2409e6(0xfb)][_0x2409e6(0x8f)],this[_0x2409e6(0xcd)][_0x2409e6(0xe9)]+=_0x233c96[_0x2409e6(0xe9)][_0x2409e6(0x8f)],_0x70c06e++,_0x70c06e%0x64===0x0&&this['logger'][_0x2409e6(0x9c)]('proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',_0x70c06e,_0x5a2d72,_0xa360f5),_0x3375f8[_0x2409e6(0x9b)](_0x233c96),_0xa360f5>this['MAX_COMPONENTS_PER_TICK']&&(await this[_0x2409e6(0xc2)](_0xc98e6b[_0x2409e6(0xa4)],_0xc98e6b[_0x2409e6(0xc1)],_0x3375f8),await this[_0x2409e6(0xf7)][_0x2409e6(0x9c)](this[_0x2409e6(0x105)]+_0x2409e6(0x10b)+_0xa360f5+_0x2409e6(0x88))[_0x2409e6(0xe3)](),_0xa360f5=0x0,_0x3375f8[_0x2409e6(0xeb)](0x0));}_0x3375f8['length']&&(await this[_0x2409e6(0xc2)](_0xc98e6b[_0x2409e6(0xa4)],_0xc98e6b[_0x2409e6(0xc1)],_0x3375f8),await this['sfLogger'][_0x2409e6(0x9c)](this[_0x2409e6(0x105)]+_0x2409e6(0x10b)+_0xa360f5+_0x2409e6(0x88))[_0x2409e6(0xe3)]());}async[a126_0xedb65b(0xe8)](_0x290368){const _0x38690a=a126_0xedb65b,_0x134b31=[...this[_0x38690a(0xd4)][_0x38690a(0xc9)]],_0x4ed3a0=_0x134b31[_0x38690a(0x8f)];let _0x3a50cb=0x0;while(_0x134b31['length']){const _0x18436a=_0x134b31['shift']();!this[_0x38690a(0xd4)][_0x38690a(0x111)]&&(this[_0x38690a(0x8b)][_0x38690a(0x81)]()?(await this['gitUtils'][_0x38690a(0xbb)](_0x18436a['id']),await this[_0x38690a(0x99)][_0x38690a(0x79)](this['gitUtils'][_0x38690a(0x9a)])):(await this[_0x38690a(0x7e)][_0x38690a(0xbb)](this['lastCommitHash']),await this[_0x38690a(0x99)][_0x38690a(0x79)](this['gitUtils']['dir']))),await this[_0x38690a(0xa5)](_0x18436a,_0x290368),await this['mdapiUtils'][_0x38690a(0xe7)](),_0x3a50cb+=0x1,await this['sfLogger'][_0x38690a(0x9c)](this[_0x38690a(0x105)]+_0x38690a(0xae)),await this['sfLogger'][_0x38690a(0x9c)](this[_0x38690a(0x105)]+'\x20Added\x20'+this[_0x38690a(0xcd)][_0x38690a(0x112)]+_0x38690a(0xc5)),await this[_0x38690a(0xf7)][_0x38690a(0x9c)](this[_0x38690a(0x105)]+_0x38690a(0x7c)+this[_0x38690a(0xcd)][_0x38690a(0xfb)]+_0x38690a(0xc5)),await this[_0x38690a(0xf7)][_0x38690a(0x9c)](this[_0x38690a(0x105)]+_0x38690a(0x7a)+this[_0x38690a(0xcd)][_0x38690a(0xe9)]+'\x20components'),await this['sfLogger']['log'](this['prefix']+_0x38690a(0xc4)+_0x3a50cb+'/'+_0x4ed3a0+_0x38690a(0xfc))[_0x38690a(0xe3)](),this[_0x38690a(0x8e)]();}}async[a126_0xedb65b(0xc7)](){const _0x422bce=a126_0xedb65b;this[_0x422bce(0x7e)]&&await this[_0x422bce(0x7e)][_0x422bce(0xe7)]()[_0x422bce(0xb5)](()=>void 0x0),this['mdapiUtils']&&await this[_0x422bce(0x99)][_0x422bce(0xe7)]()['catch'](()=>void 0x0);}async[a126_0xedb65b(0x94)](_0x10eaad){const _0x16a801=a126_0xedb65b;this['gitCommitData']=_0x10eaad,this[_0x16a801(0x8b)][_0x16a801(0x110)](this[_0x16a801(0xd4)]),this[_0x16a801(0xee)]=typedi_1[_0x16a801(0xd2)][_0x16a801(0xaf)](providers_tokens_1['Tokens'][_0x16a801(0xee)]),this[_0x16a801(0x70)]=typedi_1[_0x16a801(0xd2)][_0x16a801(0xaf)](providers_tokens_1['Tokens'][_0x16a801(0x70)]),this[_0x16a801(0xf7)]=typedi_1[_0x16a801(0xd2)]['get'](providers_tokens_1[_0x16a801(0xcc)][_0x16a801(0x102)]),this[_0x16a801(0x105)]=_0x16a801(0x77)+_0x10eaad[_0x16a801(0xe1)]+_0x16a801(0x10f)+_0x10eaad['branch']+_0x16a801(0x115)+GitCommitJob_1[_0x16a801(0x92)]+']',this[_0x16a801(0x7e)]=new git_utils_1['GitUtils'](await this[_0x16a801(0x7b)]()),this[_0x16a801(0x99)]=new mdapi_utils_1['MDApiUtils'](),this['sfLogger']['log'](this[_0x16a801(0x105)]+_0x16a801(0x96));try{this[_0x16a801(0xf7)]['log'](this[_0x16a801(0x105)]+_0x16a801(0x106)),await this[_0x16a801(0x8b)][_0x16a801(0x82)](),await this[_0x16a801(0x8b)]['updateStatus'](_0x16a801(0x76)),this[_0x16a801(0xf7)]['log'](this[_0x16a801(0x105)]+'\x20Fetch\x20remote\x20branch\x20hash.'),this[_0x16a801(0xd3)]=await git_internal_1[_0x16a801(0x93)]['getRemoteHash'](await this[_0x16a801(0x7b)](),this['gitCommitData'][_0x16a801(0xba)]),this[_0x16a801(0x102)][_0x16a801(0x9c)]('Last\x20git\x20repository\x20hash\x20is\x20%s.',this[_0x16a801(0xd3)]);const _0x448809=await this[_0x16a801(0x8b)][_0x16a801(0x8d)](this[_0x16a801(0xd3)]);if(_0x448809){this[_0x16a801(0xf7)][_0x16a801(0x9c)](_0x16a801(0x108)),await this[_0x16a801(0x8b)]['updateStatus'](_0x16a801(0xd6));return;}this[_0x16a801(0xf7)][_0x16a801(0x9c)](this[_0x16a801(0x105)]+_0x16a801(0xb8)+this['gitCommitData']['repositoryGit']+'.'),await this[_0x16a801(0x7e)]['clone'](this[_0x16a801(0xd4)][_0x16a801(0xba)],this[_0x16a801(0xd4)][_0x16a801(0xe1)]),this['sfLogger']['log'](this[_0x16a801(0x105)]+_0x16a801(0xf0));const _0x244496=await sfdx_utils_1['SFDX']['isSFDXProject'](this[_0x16a801(0x7e)][_0x16a801(0x9a)]);await this['fetchCommits']();!this[_0x16a801(0xf7)]['getLoggerId']()&&this[_0x16a801(0xf7)][_0x16a801(0xe2)](await salesforce_logger_v3_service_1[_0x16a801(0xe5)][_0x16a801(0xd5)](sf_logger_v3_types_1[_0x16a801(0x75)][_0x16a801(0x116)]));await this[_0x16a801(0xf7)][_0x16a801(0xe3)]();if(_0x10eaad[_0x16a801(0x111)]){await this[_0x16a801(0x99)][_0x16a801(0x79)](this['gitUtils'][_0x16a801(0x9a)]),await this[_0x16a801(0xf7)][_0x16a801(0x9c)](this[_0x16a801(0x105)]+_0x16a801(0xed))[_0x16a801(0xe3)]();const _0x336e76=(await fs_internal_1['FS']['readDir'](this[_0x16a801(0x99)][_0x16a801(0x9a)],!![]))[_0x16a801(0xb4)](_0x1c10e7=>(0x0,path_1[_0x16a801(0x80)])(this[_0x16a801(0x99)][_0x16a801(0x9a)],_0x1c10e7));this[_0x16a801(0xf7)][_0x16a801(0x9c)](this[_0x16a801(0x105)]+_0x16a801(0xf1)+_0x336e76[_0x16a801(0x8f)]+_0x16a801(0x11e)),this[_0x16a801(0xd4)][_0x16a801(0xad)]=[],this[_0x16a801(0xd4)]['commits']=[{'files':{'modified':_0x336e76,'added':[],'removed':[]},'id':await this[_0x16a801(0x7e)][_0x16a801(0xb3)](),'message':_0x16a801(0xf8),'username':constants_1[_0x16a801(0xdb)]}];}await this[_0x16a801(0x8b)]['updateRemoteState']({[this['gitCommitData']['repositoryGit']]:{'lastCommit':this[_0x16a801(0xd3)]}}),await this[_0x16a801(0xf7)][_0x16a801(0x9c)](this[_0x16a801(0x105)]+_0x16a801(0x117)+(_0x244496?_0x16a801(0x11c):'NO')+']\x20Start\x20proceeding\x20git\x20commits.\x20')['send'](),await this[_0x16a801(0xe8)](_0x244496),await this[_0x16a801(0xf7)]['log'](this[_0x16a801(0x105)]+_0x16a801(0xa0))['send'](),await this[_0x16a801(0x8b)][_0x16a801(0x74)](_0x16a801(0xd6)),await this[_0x16a801(0xc6)]([_0x10eaad['email']],this[_0x16a801(0x70)][_0x16a801(0x10d)],_0x10eaad['repository'],_0x10eaad[_0x16a801(0xba)]);}catch(_0x226e55){await this[_0x16a801(0xc7)]();if(_0x226e55 instanceof flosum_commit_error_1[_0x16a801(0xc0)])await this['gitCommit']['updateStatus']('Completed')[_0x16a801(0xb5)](()=>void 0x0),this[_0x16a801(0x102)][_0x16a801(0x9c)](this[_0x16a801(0x105)]+_0x16a801(0xbc));else{await this[_0x16a801(0x102)][_0x16a801(0xdc)](this[_0x16a801(0x105)]+'\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20'+(_0x226e55 instanceof api_error_1['ApiError']||_0x226e55 instanceof salesforce_error_1[_0x16a801(0xbd)]?_0x226e55[_0x16a801(0x89)]():_0x226e55)),await this[_0x16a801(0x8b)]['updateRemoteState']({}),await this[_0x16a801(0x8b)][_0x16a801(0x74)](_0x16a801(0xda))[_0x16a801(0xb5)](()=>void 0x0),await this[_0x16a801(0xc3)]([_0x10eaad[_0x16a801(0xcf)]],this[_0x16a801(0x70)]['gitProvider'],_0x10eaad['repository'],_0x10eaad['branch']);throw _0x226e55;}}finally{await this[_0x16a801(0xc7)](),await this['sfLogger'][_0x16a801(0xe3)]()[_0x16a801(0xb5)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a126_0xedb65b(0x73)])({'transient':!![]}),__metadata('design:paramtypes',[git_commit_service_1[a126_0xedb65b(0xd1)],connection_1[a126_0xedb65b(0xa2)]])],GitCommitJob),exports[a126_0xedb65b(0x10a)]=GitCommitJob;