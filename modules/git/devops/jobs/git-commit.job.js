const a76_0x4e0826=a76_0x266e;(function(_0x403478,_0x2b201f){const _0x2d2ba1=a76_0x266e,_0xa24fac=_0x403478();while(!![]){try{const _0x4d69e0=-parseInt(_0x2d2ba1(0x262))/0x1*(-parseInt(_0x2d2ba1(0x202))/0x2)+parseInt(_0x2d2ba1(0x275))/0x3+-parseInt(_0x2d2ba1(0x22c))/0x4*(parseInt(_0x2d2ba1(0x21b))/0x5)+parseInt(_0x2d2ba1(0x22f))/0x6+parseInt(_0x2d2ba1(0x237))/0x7*(-parseInt(_0x2d2ba1(0x1d6))/0x8)+-parseInt(_0x2d2ba1(0x265))/0x9+parseInt(_0x2d2ba1(0x235))/0xa*(parseInt(_0x2d2ba1(0x233))/0xb);if(_0x4d69e0===_0x2b201f)break;else _0xa24fac['push'](_0xa24fac['shift']());}catch(_0x571657){_0xa24fac['push'](_0xa24fac['shift']());}}}(a76_0x4618,0xa2505));function a76_0x4618(){const _0x4f0246=['readFilesByFilename','\x20Modified\x20','MAX_COMPONENTS_PER_TICK','../utils/git.utils','6WEcPRx','\x20Download\x20components\x20metadata\x20from\x20Flosum.','gitCommitData','Git','email',']\x20[Branch:\x20','\x20Job\x20done.','design:paramtypes','\x20Proceeded\x20','../../providers/api/bitbucket-api.service','../../salesforce/errors/salesforce.error','flat','configurable','splice',']\x20Start\x20proceeding\x20git\x20commits.\x20','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','sendComponents','\x20Processed\x20','lastCommitHash','changes','Last\x20git\x20repository\x20hash\x20is\x20%s.','object','../../../shared/utils','updateStatus','updateRemoteState','23100emrjFP','apply','message','branch','toString','GitProvider','logger','removed','name','LoggerTypes','fetchComponentsMetadata','\x20components','Bitbucket','__importStar','env','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','values','796QUmWYp','push','prepareGitChangedPaths','7607028qyzeid','://','getRepositoryId','../utils/connection','825JDyqpt','provider','131900AdHZoa','readDir','17598blKJas','GitUtils','prefix','error','shift','commitId','../../internal/fs.internal','catch','__metadata','YES','GitCommitService','repository','\x20Cloning\x20git\x20repository\x20from\x20','resetStats','function',']\x20[','fileNames','Service','ProvidersFactory','removeDir','modified','getBranchId','gitApiService','credentials','__decorate','stats','default','../../salesforce/types/sf-logger-v3-types','replace','getCurrentHash','checkoutTo','defineProperty','send','GitCommitJob','checkSyncStatus','sync\x20components','cleanUp','log','fetchRepositoryOrBranchData','sfLogger','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','DEFAULT_GIT_USER_EMAIL','reduce','49667oNKYxV','username','\x20[SFDX:\x20','9494685snaold','describeCommit','constructor','gitCommit','SalesforceError','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','../utils/mdapi.utils','Tokens','In\x20Progress','getRecordTypes','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','DEFAULT_GIT_USER_NAME','\x20Fetch\x20salesforce\x20data.','prepareMdapi','handleCommit','fetchCommits','714363UGEFpd','SalesforceLogger3','\x20components.','decorate','added','writable','proceedFile','gitUtils','../../../../constants','../utils/git-commit.utils','BitbucketApiService','Branch\x20synchronized.\x20Skip.','inserted','16JvyeaY','setLoggerId','getGitShellAuthorizationString','proceedCommits','../../../../core/errors/api.error','files','__esModule','../../providers/providers.tokens','getOwnPropertyDescriptor','relative','providersFactory','\x20commits.','commit','ApiError','getLoggerId','../../salesforce/services/salesforce-logger-v3.service','\x20files\x20before\x20sync.','FlosumCommitError','../../internal/git.internal','create','\x20Removed\x20','author','repositoryGit','__setModuleDefault','getRemote','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','mdapiUtils','force','search','Completed','get','isLoggedIn','Error','dir','typedi','prototype','createCommit','createLoggerId','commits','length'];a76_0x4618=function(){return _0x4f0246;};return a76_0x4618();}function a76_0x266e(_0x5d8d3e,_0x375f3c){const _0x54c46d=a76_0x4618();return a76_0x266e=function(_0x13e620,_0x2804fd){_0x13e620=_0x13e620-0x1d4;let _0x4618dc=_0x54c46d[_0x13e620];return _0x4618dc;},a76_0x266e(_0x5d8d3e,_0x375f3c);}const a76_0x2804fd=(function(){let _0x541987=!![];return function(_0x4e6885,_0x379ef1){const _0x46e443=_0x541987?function(){const _0xbf5f51=a76_0x266e;if(_0x379ef1){const _0x59821e=_0x379ef1[_0xbf5f51(0x21c)](_0x4e6885,arguments);return _0x379ef1=null,_0x59821e;}}:function(){};return _0x541987=![],_0x46e443;};}()),a76_0x13e620=a76_0x2804fd(this,function(){const _0xbf4f7c=a76_0x266e;return a76_0x13e620[_0xbf4f7c(0x21f)]()[_0xbf4f7c(0x1f2)]('(((.+)+)+)+$')[_0xbf4f7c(0x21f)]()[_0xbf4f7c(0x267)](a76_0x13e620)['search']('(((.+)+)+)+$');});a76_0x13e620();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a76_0x4e0826(0x1e9)]?function(_0x77e350,_0x36529f,_0x5c938f,_0x339c0f){const _0x606c3b=a76_0x4e0826;if(_0x339c0f===undefined)_0x339c0f=_0x5c938f;var _0x15e0fb=Object[_0x606c3b(0x1de)](_0x36529f,_0x5c938f);(!_0x15e0fb||(_0x606c3b(0x1f4)in _0x15e0fb?!_0x36529f[_0x606c3b(0x1dc)]:_0x15e0fb[_0x606c3b(0x27a)]||_0x15e0fb[_0x606c3b(0x20e)]))&&(_0x15e0fb={'enumerable':!![],'get':function(){return _0x36529f[_0x5c938f];}}),Object[_0x606c3b(0x256)](_0x77e350,_0x339c0f,_0x15e0fb);}:function(_0xe321cc,_0x4e0943,_0x57f17d,_0x196090){if(_0x196090===undefined)_0x196090=_0x57f17d;_0xe321cc[_0x196090]=_0x4e0943[_0x57f17d];}),__setModuleDefault=this&&this[a76_0x4e0826(0x1ed)]||(Object[a76_0x4e0826(0x1e9)]?function(_0x4e6fc2,_0x5b0af3){const _0x2156d9=a76_0x4e0826;Object[_0x2156d9(0x256)](_0x4e6fc2,_0x2156d9(0x251),{'enumerable':!![],'value':_0x5b0af3});}:function(_0x4de5a8,_0x266762){_0x4de5a8['default']=_0x266762;}),__decorate=this&&this[a76_0x4e0826(0x24f)]||function(_0x32a66a,_0x323dbf,_0xdb1d2e,_0x54217f){const _0x3432e1=a76_0x4e0826;var _0x28cf4b=arguments[_0x3432e1(0x1fd)],_0x5de94c=_0x28cf4b<0x3?_0x323dbf:_0x54217f===null?_0x54217f=Object['getOwnPropertyDescriptor'](_0x323dbf,_0xdb1d2e):_0x54217f,_0x128e7f;if(typeof Reflect===_0x3432e1(0x217)&&typeof Reflect[_0x3432e1(0x278)]==='function')_0x5de94c=Reflect[_0x3432e1(0x278)](_0x32a66a,_0x323dbf,_0xdb1d2e,_0x54217f);else{for(var _0x53cb28=_0x32a66a['length']-0x1;_0x53cb28>=0x0;_0x53cb28--)if(_0x128e7f=_0x32a66a[_0x53cb28])_0x5de94c=(_0x28cf4b<0x3?_0x128e7f(_0x5de94c):_0x28cf4b>0x3?_0x128e7f(_0x323dbf,_0xdb1d2e,_0x5de94c):_0x128e7f(_0x323dbf,_0xdb1d2e))||_0x5de94c;}return _0x28cf4b>0x3&&_0x5de94c&&Object[_0x3432e1(0x256)](_0x323dbf,_0xdb1d2e,_0x5de94c),_0x5de94c;},__importStar=this&&this[a76_0x4e0826(0x228)]||function(_0x38d40e){const _0x45544b=a76_0x4e0826;if(_0x38d40e&&_0x38d40e[_0x45544b(0x1dc)])return _0x38d40e;var _0x1f6cb6={};if(_0x38d40e!=null){for(var _0x3fda23 in _0x38d40e)if(_0x3fda23!==_0x45544b(0x251)&&Object[_0x45544b(0x1f9)]['hasOwnProperty']['call'](_0x38d40e,_0x3fda23))__createBinding(_0x1f6cb6,_0x38d40e,_0x3fda23);}return __setModuleDefault(_0x1f6cb6,_0x38d40e),_0x1f6cb6;},__metadata=this&&this[a76_0x4e0826(0x23f)]||function(_0x5c8db4,_0x9873a4){const _0x4c20e0=a76_0x4e0826;if(typeof Reflect===_0x4c20e0(0x217)&&typeof Reflect['metadata']===_0x4c20e0(0x245))return Reflect['metadata'](_0x5c8db4,_0x9873a4);},GitCommitJob_1;Object[a76_0x4e0826(0x256)](exports,a76_0x4e0826(0x1dc),{'value':!![]}),exports[a76_0x4e0826(0x258)]=void 0x0;const core_1=require('../../../../core'),fs_internal_1=require(a76_0x4e0826(0x23d)),salesforce_logger_v3_service_1=require(a76_0x4e0826(0x1e5)),utils_1=require(a76_0x4e0826(0x218)),path_1=require('path'),typedi_1=__importStar(require(a76_0x4e0826(0x1f8))),constants_1=require(a76_0x4e0826(0x27d)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_commit_utils_1=require(a76_0x4e0826(0x27e)),git_utils_1=require(a76_0x4e0826(0x201)),mdapi_utils_1=require(a76_0x4e0826(0x26b)),api_error_1=require(a76_0x4e0826(0x1da)),salesforce_error_1=require(a76_0x4e0826(0x20c)),git_commit_service_1=require('../services/git-commit.service'),flosum_commit_error_1=require('../errors/flosum-commit.error'),bitbucket_api_service_1=require(a76_0x4e0826(0x20b)),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require('../../salesforce/utils/sfdx.utils'),utils_2=require('../../parsers/utils'),git_internal_1=require(a76_0x4e0826(0x1e8)),providers_tokens_1=require(a76_0x4e0826(0x1dd)),connection_1=require(a76_0x4e0826(0x232)),sf_logger_v3_types_1=require(a76_0x4e0826(0x252));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x508702,_0x8c2854){const _0x4ba540=a76_0x4e0826;this['gitCommit']=_0x508702,this[_0x4ba540(0x1e0)]=_0x8c2854,this[_0x4ba540(0x200)]=+(process[_0x4ba540(0x229)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x4ba540(0x221)]=new core_1['Logger'](GitCommitJob_1[_0x4ba540(0x223)]),this[_0x4ba540(0x23c)]='',this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async['getRemote'](){const _0x21f4ac=a76_0x4e0826,{repositoryGit:_0x5e1d2c}=this[_0x21f4ac(0x204)],_0x329922=typedi_1[_0x21f4ac(0x251)]['get'](providers_tokens_1[_0x21f4ac(0x26c)][_0x21f4ac(0x24e)]);if(this[_0x21f4ac(0x204)][_0x21f4ac(0x234)]===git_provider_1[_0x21f4ac(0x220)][_0x21f4ac(0x227)]){const _0x3aaa6f=typedi_1[_0x21f4ac(0x251)][_0x21f4ac(0x1f4)](bitbucket_api_service_1[_0x21f4ac(0x27f)]);await _0x3aaa6f[_0x21f4ac(0x1f5)]();}return _0x5e1d2c[_0x21f4ac(0x253)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x5e1d2c)+_0x21f4ac(0x230)+_0x329922[_0x21f4ac(0x1d8)]()+'@');}[a76_0x4e0826(0x244)](){const _0x3babe0=a76_0x4e0826;this[_0x3babe0(0x250)]={'removed':0x0,'modified':0x0,'added':0x0};}async['updateFileNamesForSFDXProject'](){const _0x26a135=a76_0x4e0826,_0x3ca49c=[...this[_0x26a135(0x204)][_0x26a135(0x247)]];this['gitCommitData']['fileNames']=[];for(const _0x4cb274 of _0x3ca49c){this[_0x26a135(0x204)][_0x26a135(0x247)][_0x26a135(0x22d)](...await(0x0,utils_2[_0x26a135(0x1fe)])(_0x4cb274,this['mdapiUtils'][_0x26a135(0x1f7)]));}}async[a76_0x4e0826(0x274)](){const _0x27d7c5=a76_0x4e0826;if(this[_0x27d7c5(0x204)][_0x27d7c5(0x1f1)])return;const _0x5d29ef=[];for(const _0xcdbd74 of this[_0x27d7c5(0x204)][_0x27d7c5(0x1fc)]){const _0x4fef00=await this[_0x27d7c5(0x27c)][_0x27d7c5(0x266)](_0xcdbd74['id']);_0xcdbd74['username']=_0x4fef00[_0x27d7c5(0x1eb)],_0xcdbd74[_0x27d7c5(0x21d)]=_0x4fef00[_0x27d7c5(0x21d)],_0xcdbd74[_0x27d7c5(0x1db)]=_0x4fef00[_0x27d7c5(0x215)],_0xcdbd74[_0x27d7c5(0x206)]=_0x4fef00['email'];if(_0xcdbd74[_0x27d7c5(0x206)]===constants_1[_0x27d7c5(0x260)])throw new flosum_commit_error_1[(_0x27d7c5(0x1e7))]();_0x5d29ef[_0x27d7c5(0x22d)](...Object[_0x27d7c5(0x22b)](_0xcdbd74[_0x27d7c5(0x1db)])[_0x27d7c5(0x20d)]());}this[_0x27d7c5(0x204)][_0x27d7c5(0x247)]=[...new Set((0x0,git_commit_utils_1[_0x27d7c5(0x22e)])(_0x5d29ef))];}async[a76_0x4e0826(0x212)](_0x270dfe,_0x144e62,_0x11951d){const _0x10a3ba=a76_0x4e0826,_0x1261a2=_0x11951d[_0x10a3ba(0x261)]((_0x65c718,_0x269216)=>{const _0x3a1669=_0x10a3ba;return _0x65c718[_0x3a1669(0x1d5)][_0x3a1669(0x22d)](..._0x269216['inserted']),_0x65c718[_0x3a1669(0x24b)][_0x3a1669(0x22d)](..._0x269216[_0x3a1669(0x24b)]),_0x65c718[_0x3a1669(0x222)][_0x3a1669(0x22d)](..._0x269216[_0x3a1669(0x222)]),_0x65c718;},{'inserted':[],'modified':[],'removed':[]}),_0x3f18cd=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x10a3ba(0x268)][_0x10a3ba(0x26e)](),'branchId':this[_0x10a3ba(0x268)][_0x10a3ba(0x24c)](),'repositoryId':this['gitCommit'][_0x10a3ba(0x231)](),'logger':this[_0x10a3ba(0x25e)],'commitId':this[_0x10a3ba(0x23c)]});await _0x3f18cd[_0x10a3ba(0x1d9)]([{'author':_0x270dfe,'message':_0x144e62,'inserted':_0x1261a2[_0x10a3ba(0x1d5)],'modified':_0x1261a2[_0x10a3ba(0x24b)],'removed':_0x1261a2['removed']}]);}async[a76_0x4e0826(0x273)](_0x32a52b,_0x3a4cae){const _0x2611bb=a76_0x4e0826;await this[_0x2611bb(0x25e)][_0x2611bb(0x25c)](this['prefix']+_0x2611bb(0x203))[_0x2611bb(0x257)](),await this[_0x2611bb(0x268)][_0x2611bb(0x225)](_0x3a4cae);const {added:_0x2717e1,modified:_0x360257,removed:_0x4037d1}=_0x32a52b[_0x2611bb(0x1db)];_0x3a4cae&&_0x360257['push'](..._0x4037d1[_0x2611bb(0x20f)](0x0));const _0x12a4e7=(0x0,utils_2['convertToCleanPaths'])((0x0,git_commit_utils_1['prepareGitChangedPaths'])([..._0x2717e1,..._0x360257,..._0x4037d1],_0x3a4cae&&!this[_0x2611bb(0x204)][_0x2611bb(0x1f1)]));let _0x4707fe=0x0;const _0x5aa02a=[];(_0x2717e1['length']||_0x360257[_0x2611bb(0x1fd)])&&this['gitCommit'][_0x2611bb(0x231)]()&&(this[_0x2611bb(0x23c)]=await this[_0x2611bb(0x268)][_0x2611bb(0x1fa)](_0x32a52b[_0x2611bb(0x21d)]));const _0x155efd=_0x12a4e7[_0x2611bb(0x1fd)];let _0x39fda6=0x0;while(_0x12a4e7[_0x2611bb(0x1fd)]){const _0x57b96f=_0x12a4e7[_0x2611bb(0x23b)](),_0x5d7eab=await this['gitCommit'][_0x2611bb(0x27b)](_0x57b96f,this[_0x2611bb(0x1f0)]['dir'],_0x3a4cae&&!this[_0x2611bb(0x204)]['force']);_0x4707fe+=_0x5d7eab[_0x2611bb(0x1d5)][_0x2611bb(0x1fd)]+_0x5d7eab['removed']['length']+_0x5d7eab['modified']['length'],this[_0x2611bb(0x250)]['added']+=_0x5d7eab['inserted']['length'],this[_0x2611bb(0x250)][_0x2611bb(0x24b)]+=_0x5d7eab[_0x2611bb(0x24b)][_0x2611bb(0x1fd)],this[_0x2611bb(0x250)][_0x2611bb(0x222)]+=_0x5d7eab[_0x2611bb(0x222)][_0x2611bb(0x1fd)],_0x39fda6++,_0x39fda6%0x64===0x0&&this['logger'][_0x2611bb(0x25c)](_0x2611bb(0x25f),_0x39fda6,_0x155efd,_0x4707fe),_0x5aa02a[_0x2611bb(0x22d)](_0x5d7eab),_0x4707fe>this[_0x2611bb(0x200)]&&(await this['sendComponents'](_0x32a52b[_0x2611bb(0x263)],_0x32a52b['message'],_0x5aa02a),await this['sfLogger'][_0x2611bb(0x25c)](this[_0x2611bb(0x239)]+_0x2611bb(0x213)+_0x4707fe+'\x20components.')['send'](),_0x4707fe=0x0,_0x5aa02a['splice'](0x0));}_0x5aa02a['length']&&(await this[_0x2611bb(0x212)](_0x32a52b[_0x2611bb(0x263)],_0x32a52b[_0x2611bb(0x21d)],_0x5aa02a),await this['sfLogger'][_0x2611bb(0x25c)](this['prefix']+_0x2611bb(0x213)+_0x4707fe+_0x2611bb(0x277))[_0x2611bb(0x257)]());}async['proceedCommits'](_0x3edfe3){const _0x189994=a76_0x4e0826,_0x54f769=[...this[_0x189994(0x204)]['commits']],_0x5243ce=_0x54f769[_0x189994(0x1fd)];let _0x37a3ed=0x0;while(_0x54f769[_0x189994(0x1fd)]){const _0x13643d=_0x54f769[_0x189994(0x23b)]();!this[_0x189994(0x204)][_0x189994(0x1f1)]&&(this[_0x189994(0x268)]['getRepositoryId']()?(await this['gitUtils'][_0x189994(0x255)](_0x13643d['id']),await this[_0x189994(0x1f0)][_0x189994(0x272)](this[_0x189994(0x27c)][_0x189994(0x1f7)])):(await this[_0x189994(0x27c)][_0x189994(0x255)](this[_0x189994(0x214)]),await this[_0x189994(0x1f0)][_0x189994(0x272)](this['gitUtils'][_0x189994(0x1f7)]))),await this['handleCommit'](_0x13643d,_0x3edfe3),await this[_0x189994(0x1f0)][_0x189994(0x24a)](),_0x37a3ed+=0x1,await this['sfLogger'][_0x189994(0x25c)](this[_0x189994(0x239)]+'\x20Commit\x20Summary'),await this[_0x189994(0x25e)][_0x189994(0x25c)](this['prefix']+'\x20Added\x20'+this[_0x189994(0x250)][_0x189994(0x279)]+_0x189994(0x226)),await this[_0x189994(0x25e)][_0x189994(0x25c)](this['prefix']+_0x189994(0x1ff)+this[_0x189994(0x250)]['modified']+_0x189994(0x226)),await this['sfLogger'][_0x189994(0x25c)](this['prefix']+_0x189994(0x1ea)+this[_0x189994(0x250)][_0x189994(0x222)]+'\x20components'),await this[_0x189994(0x25e)][_0x189994(0x25c)](this[_0x189994(0x239)]+_0x189994(0x20a)+_0x37a3ed+'/'+_0x5243ce+_0x189994(0x1e1))[_0x189994(0x257)](),this[_0x189994(0x244)]();}}async[a76_0x4e0826(0x25b)](){const _0x8cc360=a76_0x4e0826;this[_0x8cc360(0x27c)]&&await this[_0x8cc360(0x27c)][_0x8cc360(0x24a)]()[_0x8cc360(0x23e)](()=>void 0x0),this[_0x8cc360(0x1f0)]&&await this[_0x8cc360(0x1f0)]['removeDir']()[_0x8cc360(0x23e)](()=>void 0x0);}async['run'](_0x309d41){const _0xef47eb=a76_0x4e0826;this[_0xef47eb(0x204)]=_0x309d41,this[_0xef47eb(0x268)]['setCommitDto'](this[_0xef47eb(0x204)]),this['gitApiService']=typedi_1['default']['get'](providers_tokens_1['Tokens'][_0xef47eb(0x24d)]),this['config']=typedi_1[_0xef47eb(0x251)]['get'](providers_tokens_1[_0xef47eb(0x26c)]['config']),this[_0xef47eb(0x25e)]=typedi_1[_0xef47eb(0x251)][_0xef47eb(0x1f4)](providers_tokens_1[_0xef47eb(0x26c)][_0xef47eb(0x221)]),this['prefix']='[GIT\x20->\x20FLOSUM]\x20[Repository:\x20'+_0x309d41[_0xef47eb(0x242)]+_0xef47eb(0x207)+_0x309d41[_0xef47eb(0x21e)]+_0xef47eb(0x246)+GitCommitJob_1[_0xef47eb(0x223)]+']',this['gitUtils']=new git_utils_1[(_0xef47eb(0x238))](await this['getRemote']()),this[_0xef47eb(0x1f0)]=new mdapi_utils_1['MDApiUtils'](),this['sfLogger'][_0xef47eb(0x25c)](this['prefix']+'\x20Start\x20Git-commit\x20job.');try{this[_0xef47eb(0x25e)]['log'](this[_0xef47eb(0x239)]+_0xef47eb(0x271)),await this['gitCommit'][_0xef47eb(0x25d)](),await this[_0xef47eb(0x268)][_0xef47eb(0x219)](_0xef47eb(0x26d)),this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](this[_0xef47eb(0x239)]+'\x20Fetch\x20remote\x20branch\x20hash.'),this[_0xef47eb(0x214)]=await git_internal_1[_0xef47eb(0x205)]['getRemoteHash'](await this[_0xef47eb(0x1ee)](),this[_0xef47eb(0x204)]['branch']),this[_0xef47eb(0x221)][_0xef47eb(0x25c)](_0xef47eb(0x216),this[_0xef47eb(0x214)]);const _0x3baa82=await this[_0xef47eb(0x268)][_0xef47eb(0x259)](this[_0xef47eb(0x214)]);if(_0x3baa82){this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](_0xef47eb(0x1d4)),await this[_0xef47eb(0x268)][_0xef47eb(0x219)]('Completed');return;}this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](this['prefix']+_0xef47eb(0x243)+this[_0xef47eb(0x204)][_0xef47eb(0x1ec)]+'.'),await this['gitUtils']['clone'](this[_0xef47eb(0x204)][_0xef47eb(0x21e)],this[_0xef47eb(0x204)]['repository']),this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](this['prefix']+_0xef47eb(0x26a));const _0x3e8efd=await sfdx_utils_1['SFDX']['isSFDXProject'](this[_0xef47eb(0x27c)][_0xef47eb(0x1f7)]);await this[_0xef47eb(0x274)]();!this[_0xef47eb(0x25e)][_0xef47eb(0x1e4)]()&&this['sfLogger'][_0xef47eb(0x1d7)](await salesforce_logger_v3_service_1[_0xef47eb(0x276)][_0xef47eb(0x1fb)](sf_logger_v3_types_1[_0xef47eb(0x224)][_0xef47eb(0x1e2)]));await this['sfLogger']['send']();if(_0x309d41['force']){await this[_0xef47eb(0x1f0)][_0xef47eb(0x272)](this[_0xef47eb(0x27c)][_0xef47eb(0x1f7)]),await this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](this[_0xef47eb(0x239)]+_0xef47eb(0x211))[_0xef47eb(0x257)]();const _0x34b449=(await fs_internal_1['FS'][_0xef47eb(0x236)](this[_0xef47eb(0x1f0)][_0xef47eb(0x1f7)],!![]))['map'](_0x4dbbf2=>(0x0,path_1[_0xef47eb(0x1df)])(this[_0xef47eb(0x1f0)]['dir'],_0x4dbbf2));this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](this['prefix']+_0xef47eb(0x1ef)+_0x34b449['length']+_0xef47eb(0x1e6)),this[_0xef47eb(0x204)][_0xef47eb(0x247)]=[],this[_0xef47eb(0x204)][_0xef47eb(0x1fc)]=[{'files':{'modified':_0x34b449,'added':[],'removed':[]},'id':await this[_0xef47eb(0x27c)][_0xef47eb(0x254)](),'message':_0xef47eb(0x25a),'username':constants_1[_0xef47eb(0x270)]}];}await this[_0xef47eb(0x268)][_0xef47eb(0x21a)]({[this[_0xef47eb(0x204)][_0xef47eb(0x1ec)]]:{'lastCommit':this[_0xef47eb(0x214)]}}),await this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](this[_0xef47eb(0x239)]+_0xef47eb(0x264)+(_0x3e8efd?_0xef47eb(0x240):'NO')+_0xef47eb(0x210))['send'](),await this[_0xef47eb(0x1d9)](_0x3e8efd),await this[_0xef47eb(0x25e)][_0xef47eb(0x25c)](this['prefix']+_0xef47eb(0x208))[_0xef47eb(0x257)](),await this[_0xef47eb(0x268)][_0xef47eb(0x219)]('Completed');}catch(_0x67f0b6){await this[_0xef47eb(0x25b)]();if(_0x67f0b6 instanceof flosum_commit_error_1[_0xef47eb(0x1e7)])await this[_0xef47eb(0x268)][_0xef47eb(0x219)](_0xef47eb(0x1f3))[_0xef47eb(0x23e)](()=>void 0x0),this['logger'][_0xef47eb(0x25c)](this[_0xef47eb(0x239)]+_0xef47eb(0x26f));else{await this[_0xef47eb(0x221)][_0xef47eb(0x23a)](this['prefix']+_0xef47eb(0x22a)+(_0x67f0b6 instanceof api_error_1[_0xef47eb(0x1e3)]||_0x67f0b6 instanceof salesforce_error_1[_0xef47eb(0x269)]?_0x67f0b6[_0xef47eb(0x21f)]():_0x67f0b6)),await this[_0xef47eb(0x268)]['updateRemoteState']({}),await this[_0xef47eb(0x268)]['updateStatus'](_0xef47eb(0x1f6))[_0xef47eb(0x23e)](()=>void 0x0);throw _0x67f0b6;}}finally{await this[_0xef47eb(0x25b)](),await this['sfLogger']['send']()['catch'](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a76_0x4e0826(0x248)])({'transient':!![]}),__metadata(a76_0x4e0826(0x209),[git_commit_service_1[a76_0x4e0826(0x241)],connection_1[a76_0x4e0826(0x249)]])],GitCommitJob),exports['GitCommitJob']=GitCommitJob;