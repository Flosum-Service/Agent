const a127_0x2b1275=a127_0x1710;(function(_0x24e7e2,_0x21a959){const _0x27fa59=a127_0x1710,_0x3b26ab=_0x24e7e2();while(!![]){try{const _0x5b1dc8=parseInt(_0x27fa59(0x245))/0x1+parseInt(_0x27fa59(0x210))/0x2*(-parseInt(_0x27fa59(0x268))/0x3)+parseInt(_0x27fa59(0x1ce))/0x4+parseInt(_0x27fa59(0x1ff))/0x5+-parseInt(_0x27fa59(0x207))/0x6+parseInt(_0x27fa59(0x22b))/0x7*(parseInt(_0x27fa59(0x1cd))/0x8)+-parseInt(_0x27fa59(0x1ef))/0x9*(parseInt(_0x27fa59(0x1c6))/0xa);if(_0x5b1dc8===_0x21a959)break;else _0x3b26ab['push'](_0x3b26ab['shift']());}catch(_0x36feb5){_0x3b26ab['push'](_0x3b26ab['shift']());}}}(a127_0x4394,0x656d3));const a127_0x1cf635=(function(){let _0x45d371=!![];return function(_0x2ceab8,_0x4e2e5f){const _0x5e75ee=_0x45d371?function(){const _0x44c563=a127_0x1710;if(_0x4e2e5f){const _0x5c1653=_0x4e2e5f[_0x44c563(0x24f)](_0x2ceab8,arguments);return _0x4e2e5f=null,_0x5c1653;}}:function(){};return _0x45d371=![],_0x5e75ee;};}()),a127_0x39de08=a127_0x1cf635(this,function(){const _0x4d09ba=a127_0x1710;return a127_0x39de08[_0x4d09ba(0x20f)]()['search'](_0x4d09ba(0x244))['toString']()[_0x4d09ba(0x1dc)](a127_0x39de08)['search']('(((.+)+)+)+$');});function a127_0x1710(_0x6e9096,_0xe4a2bd){const _0xf82de2=a127_0x4394();return a127_0x1710=function(_0x39de08,_0x1cf635){_0x39de08=_0x39de08-0x1bb;let _0x439411=_0xf82de2[_0x39de08];return _0x439411;},a127_0x1710(_0x6e9096,_0xe4a2bd);}a127_0x39de08();'use strict';var __createBinding=this&&this[a127_0x2b1275(0x251)]||(Object[a127_0x2b1275(0x1d9)]?function(_0x1a45c9,_0x101b35,_0xaf843b,_0x10752f){const _0x1eb126=a127_0x2b1275;if(_0x10752f===undefined)_0x10752f=_0xaf843b;var _0x4230a3=Object[_0x1eb126(0x261)](_0x101b35,_0xaf843b);(!_0x4230a3||(_0x1eb126(0x24d)in _0x4230a3?!_0x101b35[_0x1eb126(0x1bb)]:_0x4230a3['writable']||_0x4230a3['configurable']))&&(_0x4230a3={'enumerable':!![],'get':function(){return _0x101b35[_0xaf843b];}}),Object[_0x1eb126(0x24b)](_0x1a45c9,_0x10752f,_0x4230a3);}:function(_0x4c35bf,_0x1baf3b,_0xac3e37,_0x56c800){if(_0x56c800===undefined)_0x56c800=_0xac3e37;_0x4c35bf[_0x56c800]=_0x1baf3b[_0xac3e37];}),__setModuleDefault=this&&this[a127_0x2b1275(0x256)]||(Object[a127_0x2b1275(0x1d9)]?function(_0x32da06,_0x49832d){const _0x2202a0=a127_0x2b1275;Object[_0x2202a0(0x24b)](_0x32da06,_0x2202a0(0x1cf),{'enumerable':!![],'value':_0x49832d});}:function(_0x327ba5,_0x545ab){_0x327ba5['default']=_0x545ab;}),__decorate=this&&this['__decorate']||function(_0x51913c,_0x33e9d2,_0x2d1927,_0x4b5bfc){const _0x11f473=a127_0x2b1275;var _0x4eb7d1=arguments[_0x11f473(0x1fc)],_0x188622=_0x4eb7d1<0x3?_0x33e9d2:_0x4b5bfc===null?_0x4b5bfc=Object[_0x11f473(0x261)](_0x33e9d2,_0x2d1927):_0x4b5bfc,_0x160704;if(typeof Reflect==='object'&&typeof Reflect[_0x11f473(0x1be)]===_0x11f473(0x20b))_0x188622=Reflect[_0x11f473(0x1be)](_0x51913c,_0x33e9d2,_0x2d1927,_0x4b5bfc);else{for(var _0x2ebdf1=_0x51913c[_0x11f473(0x1fc)]-0x1;_0x2ebdf1>=0x0;_0x2ebdf1--)if(_0x160704=_0x51913c[_0x2ebdf1])_0x188622=(_0x4eb7d1<0x3?_0x160704(_0x188622):_0x4eb7d1>0x3?_0x160704(_0x33e9d2,_0x2d1927,_0x188622):_0x160704(_0x33e9d2,_0x2d1927))||_0x188622;}return _0x4eb7d1>0x3&&_0x188622&&Object['defineProperty'](_0x33e9d2,_0x2d1927,_0x188622),_0x188622;},__importStar=this&&this[a127_0x2b1275(0x216)]||function(_0x100ae3){const _0x1aaf23=a127_0x2b1275;if(_0x100ae3&&_0x100ae3[_0x1aaf23(0x1bb)])return _0x100ae3;var _0x447a42={};if(_0x100ae3!=null){for(var _0x410b5b in _0x100ae3)if(_0x410b5b!=='default'&&Object[_0x1aaf23(0x231)][_0x1aaf23(0x205)][_0x1aaf23(0x1fd)](_0x100ae3,_0x410b5b))__createBinding(_0x447a42,_0x100ae3,_0x410b5b);}return __setModuleDefault(_0x447a42,_0x100ae3),_0x447a42;},__metadata=this&&this[a127_0x2b1275(0x1c5)]||function(_0x3912f7,_0x155aff){const _0x3a6642=a127_0x2b1275;if(typeof Reflect===_0x3a6642(0x26c)&&typeof Reflect[_0x3a6642(0x226)]==='function')return Reflect['metadata'](_0x3912f7,_0x155aff);},GitCommitJob_1;function a127_0x4394(){const _0x25595a=['../../salesforce/services/salesforce-commits-manager.service','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','updateStatus','message','Bitbucket','getProtocol','389241sxaMMR','checkoutTo','convertToCleanPaths','\x20components.','gitCommitData','\x20Cloning\x20git\x20repository\x20from\x20','\x20[SFDX:\x20','force','proceedCommits','handleCommit','\x20Proceeded\x20','commit','LoggerTypes','length','call','path','223720IqhENW','completeNotification','fetchRepositoryOrBranchData','modified','fileNames','username','hasOwnProperty','repositoryGit','611712IValUX','\x20Fetch\x20salesforce\x20data.','isEmailNotificationsEnabled','\x20components','function','getLoggerId','\x20Modified\x20','gitUtils','toString','284842FrFqEv','../../notifications/commit-to-flosum-error.notification','prefix','getBranchId','replace','sendComponents','__importStar','gitCommit','BitbucketApiService','shift','../../salesforce/errors/salesforce.error','checkSyncStatus','SalesforceLogger3','../errors/flosum-commit.error','author','Tokens','Branch\x20synchronized.\x20Skip.','repository','Git','Completed','inserted','execute','metadata','clone','setLoggerId','../utils/path.utils','\x20Download\x20components\x20metadata\x20from\x20Flosum.','2059988ntNzJd','error','provider','setCommitDto','CommitToFlosumCompletedNotification','prepareGitChangedPaths','prototype','FlosumCommitError','splice','credentials','readDir','mdapiUtils','YES','config','catch',']\x20[','log','\x20commits.','isLoggedIn','run','name','../../notifications/commit-to-flosum-completed.notification','\x20Added\x20','GitProvider','SalesforceError','(((.+)+)+)+$','196680XMVdhl','Last\x20git\x20repository\x20hash\x20is\x20%s.','commits','Service','\x20Start\x20Git-commit\x20job.','email','defineProperty','files','get','PathUtils','apply','branch','__createBinding','../../internal/fs.internal','design:paramtypes','GitUtils','../../providers/types/git-provider','__setModuleDefault','gitApiService','\x20files\x20before\x20sync.','send','MDApiUtils','cleanUp','MAX_COMPONENTS_PER_TICK','removed','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','\x20Processed\x20','env','getOwnPropertyDescriptor','../services/git-commit.service','gitProvider','ApiError','lastCommitHash','../../../../core','readFilesByFilename','6WuyZNI','../../salesforce/types/sf-logger-v3-types','GitCommitService','../utils/connection','object','resetStats','__esModule','getRepositoryId','Logger','decorate','../../providers/providers.tokens','isSFDXProject','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','../../internal/git.internal','getRemoteHash','CommitToFlosumErrorNotification','__metadata','10wfXrJB','errorNotification','SFDX','In\x20Progress','sync\x20components','../../parsers/utils','dir','8vBIGtM','1239112WcZsqX','default','getRemote','commitId','../utils/mdapi.utils',']\x20[Branch:\x20','://','../../../shared/utils',']\x20Start\x20proceeding\x20git\x20commits.\x20','prepareMdapi','getRecordTypes','create','Email\x20notifications\x20are\x20disabled.','../../../../constants','constructor','../../salesforce/utils/sfdx.utils','push','stats','updateRemoteState','sfLogger','describeCommit','logger','fetchCommits','updateFileNamesForSFDXProject','removeDir','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','reduce'];a127_0x4394=function(){return _0x25595a;};return a127_0x4394();}Object[a127_0x2b1275(0x24b)](exports,a127_0x2b1275(0x1bb),{'value':!![]}),exports['GitCommitJob']=void 0x0;const core_1=require(a127_0x2b1275(0x266)),fs_internal_1=require(a127_0x2b1275(0x252)),salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),utils_1=require(a127_0x2b1275(0x1d5)),path_1=require(a127_0x2b1275(0x1fe)),typedi_1=__importStar(require('typedi')),constants_1=require(a127_0x2b1275(0x1db)),salesforce_commits_manager_service_1=require(a127_0x2b1275(0x1e9)),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a127_0x2b1275(0x1d2)),api_error_1=require('../../../../core/errors/api.error'),salesforce_error_1=require(a127_0x2b1275(0x21a)),git_commit_service_1=require(a127_0x2b1275(0x262)),flosum_commit_error_1=require(a127_0x2b1275(0x21d)),bitbucket_api_service_1=require('../../providers/api/bitbucket-api.service'),git_provider_1=require(a127_0x2b1275(0x255)),sfdx_utils_1=require(a127_0x2b1275(0x1dd)),utils_2=require(a127_0x2b1275(0x1cb)),git_internal_1=require(a127_0x2b1275(0x1c2)),providers_tokens_1=require(a127_0x2b1275(0x1bf)),connection_1=require(a127_0x2b1275(0x26b)),sf_logger_v3_types_1=require(a127_0x2b1275(0x269)),path_utils_1=require(a127_0x2b1275(0x229)),commit_to_flosum_completed_notification_1=require(a127_0x2b1275(0x240)),commit_to_flosum_error_notification_1=require(a127_0x2b1275(0x211));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x3306d5,_0x5a62a2){const _0x84e44d=a127_0x2b1275;this['gitCommit']=_0x3306d5,this['providersFactory']=_0x5a62a2,this[_0x84e44d(0x25c)]=+(process[_0x84e44d(0x260)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x84e44d(0x1e3)]=new core_1[(_0x84e44d(0x1bd))](GitCommitJob_1[_0x84e44d(0x23f)]),this[_0x84e44d(0x1d1)]='',this[_0x84e44d(0x1df)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x2b1275(0x1d0)](){const _0x51c3b2=a127_0x2b1275,{repositoryGit:_0x1387f2}=this[_0x51c3b2(0x1f3)],_0x47ac37=typedi_1['default']['get'](providers_tokens_1[_0x51c3b2(0x21f)][_0x51c3b2(0x234)]);if(this[_0x51c3b2(0x1f3)][_0x51c3b2(0x22d)]===git_provider_1[_0x51c3b2(0x242)][_0x51c3b2(0x1ed)]){const _0x373092=typedi_1[_0x51c3b2(0x1cf)]['get'](bitbucket_api_service_1[_0x51c3b2(0x218)]);await _0x373092[_0x51c3b2(0x23d)]();}return _0x1387f2[_0x51c3b2(0x214)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x51c3b2(0x1ee)])(_0x1387f2)+_0x51c3b2(0x1d4)+_0x47ac37['getGitShellAuthorizationString']()+'@');}async[a127_0x2b1275(0x200)](_0x1cbbe2,_0x3d8ee9,_0x2d7d62,_0x13fded){const _0x454aeb=a127_0x2b1275;if(!this['config']['isEmailNotificationsEnabled']){this[_0x454aeb(0x1e3)]['info']('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_completed_notification_1[(_0x454aeb(0x22f))]({'emails':_0x1cbbe2,'gitProvider':_0x3d8ee9,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x454aeb(0x22f)][_0x454aeb(0x23f)],'repositoryName':_0x2d7d62,'branchName':_0x13fded})[_0x454aeb(0x225)]();}async[a127_0x2b1275(0x1c7)](_0x575fe9,_0x3a5d81,_0x10c36e,_0x5bef96){const _0x3213d0=a127_0x2b1275;if(!this[_0x3213d0(0x238)][_0x3213d0(0x209)]){this['logger']['info'](_0x3213d0(0x1da));return;}await new commit_to_flosum_error_notification_1['CommitToFlosumErrorNotification']({'emails':_0x575fe9,'gitProvider':_0x3a5d81,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x3213d0(0x1c4)][_0x3213d0(0x23f)],'repositoryName':_0x10c36e,'branchName':_0x5bef96})[_0x3213d0(0x225)]();}['resetStats'](){const _0x239d59=a127_0x2b1275;this[_0x239d59(0x1df)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x2b1275(0x1e5)](){const _0x19b18d=a127_0x2b1275,_0xbadc8f=[...this[_0x19b18d(0x1f3)][_0x19b18d(0x203)]];this[_0x19b18d(0x1f3)][_0x19b18d(0x203)]=[];for(const _0x2e5444 of _0xbadc8f){this['gitCommitData']['fileNames'][_0x19b18d(0x1de)](...await(0x0,utils_2[_0x19b18d(0x267)])(_0x2e5444,this[_0x19b18d(0x236)][_0x19b18d(0x1cc)]));}}async[a127_0x2b1275(0x1e4)](){const _0x52db56=a127_0x2b1275;if(this[_0x52db56(0x1f3)][_0x52db56(0x1f6)])return;const _0xc8bf84=[];for(const _0x4a2789 of this[_0x52db56(0x1f3)][_0x52db56(0x247)]){const _0x2dfd1d=await this[_0x52db56(0x20e)][_0x52db56(0x1e2)](_0x4a2789['id']);_0x4a2789['username']=_0x2dfd1d[_0x52db56(0x21e)],_0x4a2789[_0x52db56(0x1ec)]=_0x2dfd1d[_0x52db56(0x1ec)],_0x4a2789[_0x52db56(0x24c)]=_0x2dfd1d['changes'],_0x4a2789[_0x52db56(0x24a)]=_0x2dfd1d[_0x52db56(0x24a)];if(_0x4a2789[_0x52db56(0x24a)]===constants_1['DEFAULT_GIT_USER_EMAIL'])throw new flosum_commit_error_1[(_0x52db56(0x232))]();_0xc8bf84[_0x52db56(0x1de)](...Object['values'](_0x4a2789['files'])['flat']());}this[_0x52db56(0x1f3)]['fileNames']=[...new Set(path_utils_1[_0x52db56(0x24e)]['prepareGitChangedPaths'](this[_0x52db56(0x217)]['recordType'],_0xc8bf84,![]))];}async[a127_0x2b1275(0x215)](_0x505755,_0x1c10cc,_0x1ab51b){const _0x5619d0=a127_0x2b1275,_0x5f0e1b=_0x1ab51b[_0x5619d0(0x1e8)]((_0x113a85,_0x5d9bdf)=>{const _0x585b40=_0x5619d0;return _0x113a85['inserted'][_0x585b40(0x1de)](..._0x5d9bdf[_0x585b40(0x224)]),_0x113a85[_0x585b40(0x202)][_0x585b40(0x1de)](..._0x5d9bdf[_0x585b40(0x202)]),_0x113a85[_0x585b40(0x25d)][_0x585b40(0x1de)](..._0x5d9bdf[_0x585b40(0x25d)]),_0x113a85;},{'inserted':[],'modified':[],'removed':[]}),_0x4c01ff=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x5619d0(0x217)][_0x5619d0(0x1d8)](),'branchId':this[_0x5619d0(0x217)][_0x5619d0(0x213)](),'repositoryId':this[_0x5619d0(0x217)][_0x5619d0(0x1bc)](),'logger':this['sfLogger'],'commitId':this['commitId']});await _0x4c01ff['proceedCommits']([{'author':_0x505755,'message':_0x1c10cc,'inserted':_0x5f0e1b[_0x5619d0(0x224)],'modified':_0x5f0e1b['modified'],'removed':_0x5f0e1b[_0x5619d0(0x25d)]}]);}async[a127_0x2b1275(0x1f8)](_0x12a694,_0x119abd){const _0x121c88=a127_0x2b1275;await this[_0x121c88(0x1e1)][_0x121c88(0x23b)](this[_0x121c88(0x212)]+_0x121c88(0x22a))['send'](),await this[_0x121c88(0x217)]['fetchComponentsMetadata'](_0x119abd);const {added:_0x8a2d69,modified:_0x25bbc4,removed:_0xc44656}=_0x12a694['files'];_0x119abd&&_0x25bbc4[_0x121c88(0x1de)](..._0xc44656[_0x121c88(0x233)](0x0));const _0x33dc55=path_utils_1['PathUtils'][_0x121c88(0x230)](this[_0x121c88(0x217)]['recordType'],[..._0x8a2d69,..._0x25bbc4,..._0xc44656],_0x119abd&&!this[_0x121c88(0x1f3)]['force']),_0x5f00b9=(0x0,utils_2[_0x121c88(0x1f1)])(_0x33dc55);let _0x2f7bfe=0x0;const _0x3ad060=[];(_0x8a2d69[_0x121c88(0x1fc)]||_0x25bbc4[_0x121c88(0x1fc)])&&this[_0x121c88(0x217)][_0x121c88(0x1bc)]()&&(this[_0x121c88(0x1d1)]=await this[_0x121c88(0x217)]['createCommit'](_0x12a694[_0x121c88(0x1ec)]));const _0x29f5f6=_0x5f00b9[_0x121c88(0x1fc)];let _0x1abdef=0x0;while(_0x5f00b9[_0x121c88(0x1fc)]){const _0x3acea0=_0x5f00b9['shift'](),_0x1f8380=await this[_0x121c88(0x217)]['proceedFile'](_0x3acea0,this[_0x121c88(0x236)][_0x121c88(0x1cc)],_0x119abd&&!this[_0x121c88(0x1f3)]['force']);_0x2f7bfe+=_0x1f8380[_0x121c88(0x224)][_0x121c88(0x1fc)]+_0x1f8380[_0x121c88(0x25d)]['length']+_0x1f8380[_0x121c88(0x202)][_0x121c88(0x1fc)],this[_0x121c88(0x1df)]['added']+=_0x1f8380[_0x121c88(0x224)]['length'],this[_0x121c88(0x1df)][_0x121c88(0x202)]+=_0x1f8380[_0x121c88(0x202)][_0x121c88(0x1fc)],this[_0x121c88(0x1df)][_0x121c88(0x25d)]+=_0x1f8380['removed'][_0x121c88(0x1fc)],_0x1abdef++,_0x1abdef%0x64===0x0&&this['logger'][_0x121c88(0x23b)](_0x121c88(0x1e7),_0x1abdef,_0x29f5f6,_0x2f7bfe),_0x3ad060['push'](_0x1f8380),_0x2f7bfe>this[_0x121c88(0x25c)]&&(await this['sendComponents'](_0x12a694[_0x121c88(0x204)],_0x12a694[_0x121c88(0x1ec)],_0x3ad060),await this[_0x121c88(0x1e1)][_0x121c88(0x23b)](this[_0x121c88(0x212)]+_0x121c88(0x25f)+_0x2f7bfe+_0x121c88(0x1f2))[_0x121c88(0x259)](),_0x2f7bfe=0x0,_0x3ad060[_0x121c88(0x233)](0x0));}_0x3ad060['length']&&(await this[_0x121c88(0x215)](_0x12a694[_0x121c88(0x204)],_0x12a694['message'],_0x3ad060),await this[_0x121c88(0x1e1)][_0x121c88(0x23b)](this[_0x121c88(0x212)]+_0x121c88(0x25f)+_0x2f7bfe+_0x121c88(0x1f2))[_0x121c88(0x259)]());}async[a127_0x2b1275(0x1f7)](_0x3d5bfa){const _0x317d44=a127_0x2b1275,_0x202cdd=[...this[_0x317d44(0x1f3)][_0x317d44(0x247)]],_0x35de40=_0x202cdd[_0x317d44(0x1fc)];let _0x31ee56=0x0;while(_0x202cdd[_0x317d44(0x1fc)]){const _0x8b7f00=_0x202cdd[_0x317d44(0x219)]();!this[_0x317d44(0x1f3)][_0x317d44(0x1f6)]&&(this['gitCommit']['getRepositoryId']()?(await this[_0x317d44(0x20e)][_0x317d44(0x1f0)](_0x8b7f00['id']),await this[_0x317d44(0x236)][_0x317d44(0x1d7)](this[_0x317d44(0x20e)]['dir'])):(await this[_0x317d44(0x20e)][_0x317d44(0x1f0)](this[_0x317d44(0x265)]),await this[_0x317d44(0x236)][_0x317d44(0x1d7)](this[_0x317d44(0x20e)][_0x317d44(0x1cc)]))),await this[_0x317d44(0x1f8)](_0x8b7f00,_0x3d5bfa),await this[_0x317d44(0x236)][_0x317d44(0x1e6)](),_0x31ee56+=0x1,await this[_0x317d44(0x1e1)][_0x317d44(0x23b)](this[_0x317d44(0x212)]+'\x20Commit\x20Summary'),await this['sfLogger'][_0x317d44(0x23b)](this['prefix']+_0x317d44(0x241)+this[_0x317d44(0x1df)]['added']+'\x20components'),await this['sfLogger']['log'](this['prefix']+_0x317d44(0x20d)+this[_0x317d44(0x1df)][_0x317d44(0x202)]+_0x317d44(0x20a)),await this[_0x317d44(0x1e1)][_0x317d44(0x23b)](this[_0x317d44(0x212)]+'\x20Removed\x20'+this[_0x317d44(0x1df)][_0x317d44(0x25d)]+_0x317d44(0x20a)),await this[_0x317d44(0x1e1)][_0x317d44(0x23b)](this[_0x317d44(0x212)]+_0x317d44(0x1f9)+_0x31ee56+'/'+_0x35de40+_0x317d44(0x23c))[_0x317d44(0x259)](),this[_0x317d44(0x26d)]();}}async[a127_0x2b1275(0x25b)](){const _0x594647=a127_0x2b1275;this[_0x594647(0x20e)]&&await this[_0x594647(0x20e)][_0x594647(0x1e6)]()[_0x594647(0x239)](()=>void 0x0),this[_0x594647(0x236)]&&await this['mdapiUtils'][_0x594647(0x1e6)]()[_0x594647(0x239)](()=>void 0x0);}async[a127_0x2b1275(0x23e)](_0x15ad6e){const _0xd33a56=a127_0x2b1275;this['gitCommitData']=_0x15ad6e,this[_0xd33a56(0x217)][_0xd33a56(0x22e)](this[_0xd33a56(0x1f3)]),this['gitApiService']=typedi_1[_0xd33a56(0x1cf)][_0xd33a56(0x24d)](providers_tokens_1[_0xd33a56(0x21f)][_0xd33a56(0x257)]),this[_0xd33a56(0x238)]=typedi_1[_0xd33a56(0x1cf)][_0xd33a56(0x24d)](providers_tokens_1['Tokens'][_0xd33a56(0x238)]),this[_0xd33a56(0x1e1)]=typedi_1['default'][_0xd33a56(0x24d)](providers_tokens_1[_0xd33a56(0x21f)][_0xd33a56(0x1e3)]),this[_0xd33a56(0x212)]=_0xd33a56(0x1c1)+_0x15ad6e[_0xd33a56(0x221)]+_0xd33a56(0x1d3)+_0x15ad6e[_0xd33a56(0x250)]+_0xd33a56(0x23a)+GitCommitJob_1[_0xd33a56(0x23f)]+']',this['gitUtils']=new git_utils_1[(_0xd33a56(0x254))](await this[_0xd33a56(0x1d0)]()),this[_0xd33a56(0x236)]=new mdapi_utils_1[(_0xd33a56(0x25a))](),this['sfLogger']['log'](this['prefix']+_0xd33a56(0x249));try{this[_0xd33a56(0x1e1)][_0xd33a56(0x23b)](this[_0xd33a56(0x212)]+_0xd33a56(0x208)),await this['gitCommit'][_0xd33a56(0x201)](),await this[_0xd33a56(0x217)][_0xd33a56(0x1eb)](_0xd33a56(0x1c9)),this[_0xd33a56(0x1e1)][_0xd33a56(0x23b)](this[_0xd33a56(0x212)]+'\x20Fetch\x20remote\x20branch\x20hash.'),this[_0xd33a56(0x265)]=await git_internal_1[_0xd33a56(0x222)][_0xd33a56(0x1c3)](await this['getRemote'](),this['gitCommitData'][_0xd33a56(0x250)]),this[_0xd33a56(0x1e3)]['log'](_0xd33a56(0x246),this[_0xd33a56(0x265)]);const _0xafb451=await this[_0xd33a56(0x217)][_0xd33a56(0x21b)](this['lastCommitHash']);if(_0xafb451){this[_0xd33a56(0x1e1)][_0xd33a56(0x23b)](_0xd33a56(0x220)),await this[_0xd33a56(0x217)]['updateStatus'](_0xd33a56(0x223));return;}this[_0xd33a56(0x1e1)]['log'](this[_0xd33a56(0x212)]+_0xd33a56(0x1f4)+this[_0xd33a56(0x1f3)][_0xd33a56(0x206)]+'.'),await this['gitUtils'][_0xd33a56(0x227)](this[_0xd33a56(0x1f3)][_0xd33a56(0x250)],this[_0xd33a56(0x1f3)][_0xd33a56(0x221)]),this[_0xd33a56(0x1e1)][_0xd33a56(0x23b)](this[_0xd33a56(0x212)]+'\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.');const _0x1d619d=await sfdx_utils_1[_0xd33a56(0x1c8)][_0xd33a56(0x1c0)](this['gitUtils']['dir']);await this[_0xd33a56(0x1e4)]();!this[_0xd33a56(0x1e1)][_0xd33a56(0x20c)]()&&this[_0xd33a56(0x1e1)][_0xd33a56(0x228)](await salesforce_logger_v3_service_1[_0xd33a56(0x21c)]['createLoggerId'](sf_logger_v3_types_1[_0xd33a56(0x1fb)][_0xd33a56(0x1fa)]));await this[_0xd33a56(0x1e1)][_0xd33a56(0x259)]();if(_0x15ad6e[_0xd33a56(0x1f6)]){await this[_0xd33a56(0x236)][_0xd33a56(0x1d7)](this[_0xd33a56(0x20e)][_0xd33a56(0x1cc)]),await this[_0xd33a56(0x1e1)][_0xd33a56(0x23b)](this[_0xd33a56(0x212)]+'\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository')[_0xd33a56(0x259)]();const _0x274b69=(await fs_internal_1['FS'][_0xd33a56(0x235)](this[_0xd33a56(0x236)][_0xd33a56(0x1cc)],!![]))['map'](_0x32f34a=>(0x0,path_1['relative'])(this[_0xd33a56(0x236)][_0xd33a56(0x1cc)],_0x32f34a));this[_0xd33a56(0x1e1)][_0xd33a56(0x23b)](this['prefix']+'\x20Force\x20commit.\x20Have\x20to\x20parse\x20'+_0x274b69['length']+_0xd33a56(0x258)),this[_0xd33a56(0x1f3)][_0xd33a56(0x203)]=[],this[_0xd33a56(0x1f3)][_0xd33a56(0x247)]=[{'files':{'modified':_0x274b69,'added':[],'removed':[]},'id':await this['gitUtils']['getCurrentHash'](),'message':_0xd33a56(0x1ca),'username':constants_1['DEFAULT_GIT_USER_NAME']}];}await this[_0xd33a56(0x217)]['updateRemoteState']({[this[_0xd33a56(0x1f3)][_0xd33a56(0x206)]]:{'lastCommit':this['lastCommitHash']}}),await this[_0xd33a56(0x1e1)][_0xd33a56(0x23b)](this[_0xd33a56(0x212)]+_0xd33a56(0x1f5)+(_0x1d619d?_0xd33a56(0x237):'NO')+_0xd33a56(0x1d6))['send'](),await this['proceedCommits'](_0x1d619d),await this[_0xd33a56(0x1e1)]['log'](this[_0xd33a56(0x212)]+'\x20Job\x20done.')[_0xd33a56(0x259)](),await this[_0xd33a56(0x217)][_0xd33a56(0x1eb)](_0xd33a56(0x223)),await this[_0xd33a56(0x200)]([_0x15ad6e[_0xd33a56(0x24a)]],this['config'][_0xd33a56(0x263)],_0x15ad6e['repository'],_0x15ad6e[_0xd33a56(0x250)]);}catch(_0x300556){await this[_0xd33a56(0x25b)]();if(_0x300556 instanceof flosum_commit_error_1[_0xd33a56(0x232)])await this['gitCommit'][_0xd33a56(0x1eb)](_0xd33a56(0x223))[_0xd33a56(0x239)](()=>void 0x0),this['logger']['log'](this[_0xd33a56(0x212)]+_0xd33a56(0x1ea));else{await this['logger'][_0xd33a56(0x22c)](this[_0xd33a56(0x212)]+_0xd33a56(0x25e)+(_0x300556 instanceof api_error_1[_0xd33a56(0x264)]||_0x300556 instanceof salesforce_error_1[_0xd33a56(0x243)]?_0x300556['toString']():_0x300556)),await this['gitCommit'][_0xd33a56(0x1e0)]({}),await this['gitCommit'][_0xd33a56(0x1eb)]('Error')['catch'](()=>void 0x0),await this['errorNotification']([_0x15ad6e[_0xd33a56(0x24a)]],this[_0xd33a56(0x238)][_0xd33a56(0x263)],_0x15ad6e[_0xd33a56(0x221)],_0x15ad6e['branch']);throw _0x300556;}}finally{await this['cleanUp'](),await this['sfLogger'][_0xd33a56(0x259)]()[_0xd33a56(0x239)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a127_0x2b1275(0x248)])({'transient':!![]}),__metadata(a127_0x2b1275(0x253),[git_commit_service_1[a127_0x2b1275(0x26a)],connection_1['ProvidersFactory']])],GitCommitJob),exports['GitCommitJob']=GitCommitJob;