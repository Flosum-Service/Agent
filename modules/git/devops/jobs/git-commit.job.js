const a127_0x350b4b=a127_0x3df9;(function(_0x393aa5,_0x52dbb3){const _0x5e3e68=a127_0x3df9,_0x1c1dcc=_0x393aa5();while(!![]){try{const _0x42550f=-parseInt(_0x5e3e68(0x9e))/0x1*(parseInt(_0x5e3e68(0x129))/0x2)+parseInt(_0x5e3e68(0xf6))/0x3*(parseInt(_0x5e3e68(0x141))/0x4)+-parseInt(_0x5e3e68(0x10b))/0x5+parseInt(_0x5e3e68(0x144))/0x6+parseInt(_0x5e3e68(0xd3))/0x7+parseInt(_0x5e3e68(0xfb))/0x8+-parseInt(_0x5e3e68(0xc4))/0x9;if(_0x42550f===_0x52dbb3)break;else _0x1c1dcc['push'](_0x1c1dcc['shift']());}catch(_0x5b7cef){_0x1c1dcc['push'](_0x1c1dcc['shift']());}}}(a127_0x3bd4,0x40f85));const a127_0x34f3bc=(function(){let _0x38592e=!![];return function(_0x3dbea3,_0x31740d){const _0x5f1753=_0x38592e?function(){const _0x5cf1a1=a127_0x3df9;if(_0x31740d){const _0x9f5c1=_0x31740d[_0x5cf1a1(0x100)](_0x3dbea3,arguments);return _0x31740d=null,_0x9f5c1;}}:function(){};return _0x38592e=![],_0x5f1753;};}()),a127_0x208bcc=a127_0x34f3bc(this,function(){const _0x5ed201=a127_0x3df9;return a127_0x208bcc[_0x5ed201(0xb2)]()['search'](_0x5ed201(0x111))[_0x5ed201(0xb2)]()[_0x5ed201(0xee)](a127_0x208bcc)['search'](_0x5ed201(0x111));});function a127_0x3df9(_0x5e49e3,_0x401c5b){const _0x337957=a127_0x3bd4();return a127_0x3df9=function(_0x208bcc,_0x34f3bc){_0x208bcc=_0x208bcc-0x93;let _0x3bd4fb=_0x337957[_0x208bcc];return _0x3bd4fb;},a127_0x3df9(_0x5e49e3,_0x401c5b);}a127_0x208bcc();function a127_0x3bd4(){const _0x4146ca=['2209242gditry','push','map','../../salesforce/errors/salesforce.error','getRecordTypes','../utils/path.utils','checkoutTo','commits','\x20Start\x20Git-commit\x20job.','fetchCommits','CommitToFlosumCompletedNotification','Tokens','574Epwgeq','replace','completeNotification','force','FlosumCommitError','modified','../../internal/git.internal','\x20Fetch\x20remote\x20branch\x20hash.','flat','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','../../salesforce/services/salesforce-commits-manager.service','catch','createLoggerId','prefix','../../salesforce/services/salesforce-logger-v3.service','__esModule','cleanUp','getRemote','MDApiUtils','\x20[SFDX:\x20','toString','GitCommitJob','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','email','convertToCleanPaths','ProvidersFactory','../../providers/types/git-provider','PathUtils','getCurrentHash','GitProvider','sendComponents','prepareMdapi','../../../../core','fetchComponentsMetadata','send','writable','prepareGitChangedPaths','updateStatus','9416988OYzpFB','clone','../errors/flosum-commit.error','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','\x20Added\x20','reduce','credentials','\x20Download\x20components\x20metadata\x20from\x20Flosum.','GitCommitService','\x20Cloning\x20git\x20repository\x20from\x20','get','branch','__setModuleDefault','sfLogger','sync\x20components','1888271gbZQYX','repositoryGit','info','providersFactory','../../../../core/errors/api.error','removed','Email\x20notifications\x20are\x20disabled.','errorNotification','../../salesforce/types/sf-logger-v3-types','updateRemoteState','recordType','../../internal/fs.internal','getGitShellAuthorizationString','../../salesforce/utils/sfdx.utils','GitUtils','setLoggerId','\x20components.','hasOwnProperty','create','path','inserted','getOwnPropertyDescriptor','../../../../constants','Logger','proceedCommits','env','message','constructor','fileNames','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','../utils/git.utils','getRepositoryId','YES','proceedFile','gitCommitData','60AgWAvG','logger','__importStar','removeDir','BitbucketApiService','3898216OBelSf',']\x20[Branch:\x20','\x20Commit\x20Summary','length','\x20Proceeded\x20','apply','files','gitCommit','Git','gitApiService','username','getBranchId','\x20commits.','default','decorate','provider','315480SKRlxg','config','isSFDXProject','gitUtils',']\x20[','isEmailNotificationsEnabled','(((.+)+)+)+$','../services/git-commit.service','execute','metadata','commit','getProtocol','author','MAX_COMPONENTS_PER_TICK','repository','__decorate','SFDX','added','CommitToFlosumErrorNotification','__createBinding','log','../utils/mdapi.utils','describeCommit','shift','isLoggedIn','stats','gitProvider','\x20Processed\x20','Completed','../../providers/api/bitbucket-api.service','656ziPTfm','Error','values','function','object','\x20components','defineProperty','DEFAULT_GIT_USER_EMAIL','design:paramtypes','\x20Fetch\x20salesforce\x20data.','SalesforceLogger3','splice','DEFAULT_GIT_USER_NAME','handleCommit','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',']\x20Start\x20proceeding\x20git\x20commits.\x20','lastCommitHash','mdapiUtils','checkSyncStatus','commitId','resetStats','dir','name','typedi','87716UmuKYO','SalesforceError','\x20files\x20before\x20sync.'];a127_0x3bd4=function(){return _0x4146ca;};return a127_0x3bd4();}'use strict';var __createBinding=this&&this[a127_0x350b4b(0x11e)]||(Object[a127_0x350b4b(0xe5)]?function(_0x48db8d,_0x92305b,_0x545752,_0x1e4682){const _0x3d23bd=a127_0x350b4b;if(_0x1e4682===undefined)_0x1e4682=_0x545752;var _0x42fdaa=Object[_0x3d23bd(0xe8)](_0x92305b,_0x545752);(!_0x42fdaa||(_0x3d23bd(0xce)in _0x42fdaa?!_0x92305b[_0x3d23bd(0xad)]:_0x42fdaa[_0x3d23bd(0xc1)]||_0x42fdaa['configurable']))&&(_0x42fdaa={'enumerable':!![],'get':function(){return _0x92305b[_0x545752];}}),Object[_0x3d23bd(0x12f)](_0x48db8d,_0x1e4682,_0x42fdaa);}:function(_0x3f9ced,_0x1c88cc,_0x4bbcbd,_0x526b37){if(_0x526b37===undefined)_0x526b37=_0x4bbcbd;_0x3f9ced[_0x526b37]=_0x1c88cc[_0x4bbcbd];}),__setModuleDefault=this&&this[a127_0x350b4b(0xd0)]||(Object[a127_0x350b4b(0xe5)]?function(_0x544404,_0x52736e){const _0x22e25b=a127_0x350b4b;Object[_0x22e25b(0x12f)](_0x544404,_0x22e25b(0x108),{'enumerable':!![],'value':_0x52736e});}:function(_0x24e2c8,_0x2ac505){const _0x70d810=a127_0x350b4b;_0x24e2c8[_0x70d810(0x108)]=_0x2ac505;}),__decorate=this&&this[a127_0x350b4b(0x11a)]||function(_0x2d60d9,_0x5e0020,_0x26c4fd,_0x34bc7b){const _0x8df377=a127_0x350b4b;var _0x32c02a=arguments[_0x8df377(0xfe)],_0x5386b4=_0x32c02a<0x3?_0x5e0020:_0x34bc7b===null?_0x34bc7b=Object[_0x8df377(0xe8)](_0x5e0020,_0x26c4fd):_0x34bc7b,_0x46c132;if(typeof Reflect===_0x8df377(0x12d)&&typeof Reflect[_0x8df377(0x109)]==='function')_0x5386b4=Reflect[_0x8df377(0x109)](_0x2d60d9,_0x5e0020,_0x26c4fd,_0x34bc7b);else{for(var _0x1511e8=_0x2d60d9[_0x8df377(0xfe)]-0x1;_0x1511e8>=0x0;_0x1511e8--)if(_0x46c132=_0x2d60d9[_0x1511e8])_0x5386b4=(_0x32c02a<0x3?_0x46c132(_0x5386b4):_0x32c02a>0x3?_0x46c132(_0x5e0020,_0x26c4fd,_0x5386b4):_0x46c132(_0x5e0020,_0x26c4fd))||_0x5386b4;}return _0x32c02a>0x3&&_0x5386b4&&Object['defineProperty'](_0x5e0020,_0x26c4fd,_0x5386b4),_0x5386b4;},__importStar=this&&this[a127_0x350b4b(0xf8)]||function(_0x37420b){const _0x20d564=a127_0x350b4b;if(_0x37420b&&_0x37420b[_0x20d564(0xad)])return _0x37420b;var _0x39e078={};if(_0x37420b!=null){for(var _0xfdc7d3 in _0x37420b)if(_0xfdc7d3!=='default'&&Object['prototype'][_0x20d564(0xe4)]['call'](_0x37420b,_0xfdc7d3))__createBinding(_0x39e078,_0x37420b,_0xfdc7d3);}return __setModuleDefault(_0x39e078,_0x37420b),_0x39e078;},__metadata=this&&this['__metadata']||function(_0x79456e,_0x1a98e2){const _0x59bd70=a127_0x350b4b;if(typeof Reflect===_0x59bd70(0x12d)&&typeof Reflect['metadata']===_0x59bd70(0x12c))return Reflect[_0x59bd70(0x114)](_0x79456e,_0x1a98e2);},GitCommitJob_1;Object['defineProperty'](exports,a127_0x350b4b(0xad),{'value':!![]}),exports[a127_0x350b4b(0xb3)]=void 0x0;const core_1=require(a127_0x350b4b(0xbe)),fs_internal_1=require(a127_0x350b4b(0xde)),salesforce_logger_v3_service_1=require(a127_0x350b4b(0xac)),utils_1=require('../../../shared/utils'),path_1=require(a127_0x350b4b(0xe6)),typedi_1=__importStar(require(a127_0x350b4b(0x140))),constants_1=require(a127_0x350b4b(0xe9)),salesforce_commits_manager_service_1=require(a127_0x350b4b(0xa8)),git_utils_1=require(a127_0x350b4b(0xf1)),mdapi_utils_1=require(a127_0x350b4b(0x120)),api_error_1=require(a127_0x350b4b(0xd7)),salesforce_error_1=require(a127_0x350b4b(0x95)),git_commit_service_1=require(a127_0x350b4b(0x112)),flosum_commit_error_1=require(a127_0x350b4b(0xc6)),bitbucket_api_service_1=require(a127_0x350b4b(0x128)),git_provider_1=require(a127_0x350b4b(0xb8)),sfdx_utils_1=require(a127_0x350b4b(0xe0)),utils_2=require('../../parsers/utils'),git_internal_1=require(a127_0x350b4b(0xa4)),providers_tokens_1=require('../../providers/providers.tokens'),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require(a127_0x350b4b(0xdb)),path_utils_1=require(a127_0x350b4b(0x97)),commit_to_flosum_completed_notification_1=require('../../notifications/commit-to-flosum-completed.notification'),commit_to_flosum_error_notification_1=require('../../notifications/commit-to-flosum-error.notification');let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x20d40a,_0x318ede){const _0x535da7=a127_0x350b4b;this[_0x535da7(0x102)]=_0x20d40a,this[_0x535da7(0xd6)]=_0x318ede,this[_0x535da7(0x118)]=+(process[_0x535da7(0xec)][_0x535da7(0x118)]||0xbb8),this[_0x535da7(0xf7)]=new core_1[(_0x535da7(0xea))](GitCommitJob_1[_0x535da7(0x13f)]),this[_0x535da7(0x13c)]='',this[_0x535da7(0x124)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x350b4b(0xaf)](){const _0x3319d4=a127_0x350b4b,{repositoryGit:_0x3a922a}=this['gitCommitData'],_0x1a505f=typedi_1[_0x3319d4(0x108)][_0x3319d4(0xce)](providers_tokens_1[_0x3319d4(0x9d)][_0x3319d4(0xca)]);if(this[_0x3319d4(0xf5)][_0x3319d4(0x10a)]===git_provider_1[_0x3319d4(0xbb)]['Bitbucket']){const _0x587715=typedi_1['default'][_0x3319d4(0xce)](bitbucket_api_service_1[_0x3319d4(0xfa)]);await _0x587715[_0x3319d4(0x123)]();}return _0x3a922a[_0x3319d4(0x9f)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x3319d4(0x116)])(_0x3a922a)+'://'+_0x1a505f[_0x3319d4(0xdf)]()+'@');}async[a127_0x350b4b(0xa0)](_0x39763d,_0x4b4211,_0x10241a,_0x19a12c){const _0x1a5b38=a127_0x350b4b;if(!this[_0x1a5b38(0x10c)][_0x1a5b38(0x110)]){this[_0x1a5b38(0xf7)][_0x1a5b38(0xd5)](_0x1a5b38(0xd9));return;}await new commit_to_flosum_completed_notification_1[(_0x1a5b38(0x9c))]({'emails':_0x39763d,'gitProvider':_0x4b4211,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x1a5b38(0x9c)][_0x1a5b38(0x13f)],'repositoryName':_0x10241a,'branchName':_0x19a12c})['execute']();}async[a127_0x350b4b(0xda)](_0x3def1c,_0x2ba826,_0x4ab83c,_0x37bf2f){const _0x129933=a127_0x350b4b;if(!this[_0x129933(0x10c)][_0x129933(0x110)]){this[_0x129933(0xf7)][_0x129933(0xd5)](_0x129933(0xd9));return;}await new commit_to_flosum_error_notification_1[(_0x129933(0x11d))]({'emails':_0x3def1c,'gitProvider':_0x2ba826,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x129933(0x11d)]['name'],'repositoryName':_0x4ab83c,'branchName':_0x37bf2f})[_0x129933(0x113)]();}[a127_0x350b4b(0x13d)](){const _0x1f94cb=a127_0x350b4b;this[_0x1f94cb(0x124)]={'removed':0x0,'modified':0x0,'added':0x0};}async['updateFileNamesForSFDXProject'](){const _0x90d293=a127_0x350b4b,_0xca8a0=[...this[_0x90d293(0xf5)]['fileNames']];this[_0x90d293(0xf5)][_0x90d293(0xef)]=[];for(const _0x3016fc of _0xca8a0){this[_0x90d293(0xf5)][_0x90d293(0xef)]['push'](...await(0x0,utils_2['readFilesByFilename'])(_0x3016fc,this[_0x90d293(0x13a)][_0x90d293(0x13e)]));}}async[a127_0x350b4b(0x9b)](){const _0x25e050=a127_0x350b4b;if(this[_0x25e050(0xf5)]['force'])return;const _0x42baf6=[];for(const _0x469385 of this[_0x25e050(0xf5)][_0x25e050(0x99)]){const _0x15636b=await this['gitUtils'][_0x25e050(0x121)](_0x469385['id']);_0x469385['username']=_0x15636b[_0x25e050(0x117)],_0x469385[_0x25e050(0xed)]=_0x15636b[_0x25e050(0xed)],_0x469385[_0x25e050(0x101)]=_0x15636b['changes'],_0x469385[_0x25e050(0xb5)]=_0x15636b['email'];if(_0x469385[_0x25e050(0xb5)]===constants_1[_0x25e050(0x130)])throw new flosum_commit_error_1[(_0x25e050(0xa2))]();_0x42baf6[_0x25e050(0x93)](...Object[_0x25e050(0x12b)](_0x469385[_0x25e050(0x101)])[_0x25e050(0xa6)]());}this[_0x25e050(0xf5)][_0x25e050(0xef)]=[...new Set(path_utils_1['PathUtils'][_0x25e050(0xc2)](this[_0x25e050(0x102)][_0x25e050(0xdd)],_0x42baf6,![]))];}async['sendComponents'](_0x288d43,_0x4e9234,_0x59f193){const _0x4c4d78=a127_0x350b4b,_0x592685=_0x59f193[_0x4c4d78(0xc9)]((_0x362833,_0x40a750)=>{const _0x17a278=_0x4c4d78;return _0x362833[_0x17a278(0xe7)][_0x17a278(0x93)](..._0x40a750[_0x17a278(0xe7)]),_0x362833['modified']['push'](..._0x40a750[_0x17a278(0xa3)]),_0x362833[_0x17a278(0xd8)][_0x17a278(0x93)](..._0x40a750[_0x17a278(0xd8)]),_0x362833;},{'inserted':[],'modified':[],'removed':[]}),_0x36ed14=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x4c4d78(0x102)][_0x4c4d78(0x96)](),'branchId':this['gitCommit'][_0x4c4d78(0x106)](),'repositoryId':this['gitCommit']['getRepositoryId'](),'logger':this[_0x4c4d78(0xd1)],'commitId':this[_0x4c4d78(0x13c)]});await _0x36ed14[_0x4c4d78(0xeb)]([{'author':_0x288d43,'message':_0x4e9234,'inserted':_0x592685[_0x4c4d78(0xe7)],'modified':_0x592685[_0x4c4d78(0xa3)],'removed':_0x592685[_0x4c4d78(0xd8)]}]);}async[a127_0x350b4b(0x136)](_0x2d79ed,_0x584852){const _0x38cd84=a127_0x350b4b;await this[_0x38cd84(0xd1)]['log'](this[_0x38cd84(0xab)]+_0x38cd84(0xcb))[_0x38cd84(0xc0)](),await this[_0x38cd84(0x102)][_0x38cd84(0xbf)](_0x584852);const {added:_0x281357,modified:_0x135793,removed:_0x2d80e2}=_0x2d79ed['files'];_0x584852&&_0x135793[_0x38cd84(0x93)](..._0x2d80e2['splice'](0x0));const _0x1a8c52=path_utils_1[_0x38cd84(0xb9)][_0x38cd84(0xc2)](this[_0x38cd84(0x102)]['recordType'],[..._0x281357,..._0x135793,..._0x2d80e2],_0x584852&&!this['gitCommitData'][_0x38cd84(0xa1)]),_0x44283e=(0x0,utils_2[_0x38cd84(0xb6)])(_0x1a8c52);let _0x22f61b=0x0;const _0x30777a=[];(_0x281357[_0x38cd84(0xfe)]||_0x135793[_0x38cd84(0xfe)])&&this['gitCommit'][_0x38cd84(0xf2)]()&&(this[_0x38cd84(0x13c)]=await this[_0x38cd84(0x102)]['createCommit'](_0x2d79ed['message']));const _0x14dcf7=_0x44283e[_0x38cd84(0xfe)];let _0x2ac457=0x0;while(_0x44283e['length']){const _0x2a4ae2=_0x44283e[_0x38cd84(0x122)](),_0x5c1208=await this[_0x38cd84(0x102)][_0x38cd84(0xf4)](_0x2a4ae2,this[_0x38cd84(0x13a)]['dir'],_0x584852&&!this['gitCommitData'][_0x38cd84(0xa1)]);_0x22f61b+=_0x5c1208[_0x38cd84(0xe7)]['length']+_0x5c1208[_0x38cd84(0xd8)][_0x38cd84(0xfe)]+_0x5c1208[_0x38cd84(0xa3)][_0x38cd84(0xfe)],this[_0x38cd84(0x124)][_0x38cd84(0x11c)]+=_0x5c1208[_0x38cd84(0xe7)][_0x38cd84(0xfe)],this[_0x38cd84(0x124)]['modified']+=_0x5c1208['modified'][_0x38cd84(0xfe)],this[_0x38cd84(0x124)]['removed']+=_0x5c1208[_0x38cd84(0xd8)][_0x38cd84(0xfe)],_0x2ac457++,_0x2ac457%0x64===0x0&&this['logger']['log'](_0x38cd84(0x137),_0x2ac457,_0x14dcf7,_0x22f61b),_0x30777a[_0x38cd84(0x93)](_0x5c1208),_0x22f61b>this[_0x38cd84(0x118)]&&(await this[_0x38cd84(0xbc)](_0x2d79ed[_0x38cd84(0x105)],_0x2d79ed[_0x38cd84(0xed)],_0x30777a),await this[_0x38cd84(0xd1)]['log'](this[_0x38cd84(0xab)]+_0x38cd84(0x126)+_0x22f61b+_0x38cd84(0xe3))[_0x38cd84(0xc0)](),_0x22f61b=0x0,_0x30777a[_0x38cd84(0x134)](0x0));}_0x30777a['length']&&(await this[_0x38cd84(0xbc)](_0x2d79ed[_0x38cd84(0x105)],_0x2d79ed[_0x38cd84(0xed)],_0x30777a),await this['sfLogger'][_0x38cd84(0x11f)](this[_0x38cd84(0xab)]+_0x38cd84(0x126)+_0x22f61b+_0x38cd84(0xe3))[_0x38cd84(0xc0)]());}async[a127_0x350b4b(0xeb)](_0x21bf09){const _0xb8fc4b=a127_0x350b4b,_0x3421b9=[...this['gitCommitData'][_0xb8fc4b(0x99)]],_0x50f106=_0x3421b9[_0xb8fc4b(0xfe)];let _0x2db53e=0x0;while(_0x3421b9[_0xb8fc4b(0xfe)]){const _0x42f49e=_0x3421b9[_0xb8fc4b(0x122)]();!this[_0xb8fc4b(0xf5)]['force']&&(this[_0xb8fc4b(0x102)][_0xb8fc4b(0xf2)]()?(await this[_0xb8fc4b(0x10e)]['checkoutTo'](_0x42f49e['id']),await this[_0xb8fc4b(0x13a)][_0xb8fc4b(0xbd)](this[_0xb8fc4b(0x10e)][_0xb8fc4b(0x13e)])):(await this['gitUtils'][_0xb8fc4b(0x98)](this[_0xb8fc4b(0x139)]),await this[_0xb8fc4b(0x13a)][_0xb8fc4b(0xbd)](this[_0xb8fc4b(0x10e)]['dir']))),await this['handleCommit'](_0x42f49e,_0x21bf09),await this[_0xb8fc4b(0x13a)][_0xb8fc4b(0xf9)](),_0x2db53e+=0x1,await this[_0xb8fc4b(0xd1)][_0xb8fc4b(0x11f)](this['prefix']+_0xb8fc4b(0xfd)),await this[_0xb8fc4b(0xd1)]['log'](this[_0xb8fc4b(0xab)]+_0xb8fc4b(0xc8)+this[_0xb8fc4b(0x124)][_0xb8fc4b(0x11c)]+_0xb8fc4b(0x12e)),await this[_0xb8fc4b(0xd1)][_0xb8fc4b(0x11f)](this[_0xb8fc4b(0xab)]+'\x20Modified\x20'+this[_0xb8fc4b(0x124)]['modified']+_0xb8fc4b(0x12e)),await this[_0xb8fc4b(0xd1)][_0xb8fc4b(0x11f)](this[_0xb8fc4b(0xab)]+'\x20Removed\x20'+this['stats'][_0xb8fc4b(0xd8)]+_0xb8fc4b(0x12e)),await this[_0xb8fc4b(0xd1)][_0xb8fc4b(0x11f)](this[_0xb8fc4b(0xab)]+_0xb8fc4b(0xff)+_0x2db53e+'/'+_0x50f106+_0xb8fc4b(0x107))['send'](),this[_0xb8fc4b(0x13d)]();}}async[a127_0x350b4b(0xae)](){const _0x5e5c0c=a127_0x350b4b;this['gitUtils']&&await this[_0x5e5c0c(0x10e)][_0x5e5c0c(0xf9)]()[_0x5e5c0c(0xa9)](()=>void 0x0),this[_0x5e5c0c(0x13a)]&&await this['mdapiUtils'][_0x5e5c0c(0xf9)]()['catch'](()=>void 0x0);}async['run'](_0x6bf6f5){const _0x4a77b1=a127_0x350b4b;this[_0x4a77b1(0xf5)]=_0x6bf6f5,this[_0x4a77b1(0x102)]['setCommitDto'](this[_0x4a77b1(0xf5)]),this[_0x4a77b1(0x104)]=typedi_1[_0x4a77b1(0x108)][_0x4a77b1(0xce)](providers_tokens_1[_0x4a77b1(0x9d)]['gitApiService']),this[_0x4a77b1(0x10c)]=typedi_1['default'][_0x4a77b1(0xce)](providers_tokens_1[_0x4a77b1(0x9d)]['config']),this[_0x4a77b1(0xd1)]=typedi_1['default']['get'](providers_tokens_1[_0x4a77b1(0x9d)][_0x4a77b1(0xf7)]),this[_0x4a77b1(0xab)]=_0x4a77b1(0xb4)+_0x6bf6f5[_0x4a77b1(0x119)]+_0x4a77b1(0xfc)+_0x6bf6f5['branch']+_0x4a77b1(0x10f)+GitCommitJob_1[_0x4a77b1(0x13f)]+']',this[_0x4a77b1(0x10e)]=new git_utils_1[(_0x4a77b1(0xe1))](await this['getRemote']()),this[_0x4a77b1(0x13a)]=new mdapi_utils_1[(_0x4a77b1(0xb0))](),this[_0x4a77b1(0xd1)]['log'](this['prefix']+_0x4a77b1(0x9a));try{this[_0x4a77b1(0xd1)][_0x4a77b1(0x11f)](this['prefix']+_0x4a77b1(0x132)),await this[_0x4a77b1(0x102)]['fetchRepositoryOrBranchData'](),await this[_0x4a77b1(0x102)][_0x4a77b1(0xc3)]('In\x20Progress'),this['sfLogger'][_0x4a77b1(0x11f)](this['prefix']+_0x4a77b1(0xa5)),this[_0x4a77b1(0x139)]=await git_internal_1[_0x4a77b1(0x103)]['getRemoteHash'](await this['getRemote'](),this[_0x4a77b1(0xf5)][_0x4a77b1(0xcf)]),this['logger'][_0x4a77b1(0x11f)]('Last\x20git\x20repository\x20hash\x20is\x20%s.',this[_0x4a77b1(0x139)]);const _0x5c5f24=await this[_0x4a77b1(0x102)][_0x4a77b1(0x13b)](this['lastCommitHash']);if(_0x5c5f24){this[_0x4a77b1(0xd1)]['log']('Branch\x20synchronized.\x20Skip.'),await this[_0x4a77b1(0x102)][_0x4a77b1(0xc3)](_0x4a77b1(0x127));return;}this[_0x4a77b1(0xd1)][_0x4a77b1(0x11f)](this['prefix']+_0x4a77b1(0xcd)+this[_0x4a77b1(0xf5)][_0x4a77b1(0xd4)]+'.'),await this['gitUtils'][_0x4a77b1(0xc5)](this[_0x4a77b1(0xf5)][_0x4a77b1(0xcf)],this[_0x4a77b1(0xf5)]['repository']),this[_0x4a77b1(0xd1)]['log'](this[_0x4a77b1(0xab)]+_0x4a77b1(0xc7));const _0x2846f0=await sfdx_utils_1[_0x4a77b1(0x11b)][_0x4a77b1(0x10d)](this[_0x4a77b1(0x10e)][_0x4a77b1(0x13e)]);await this['fetchCommits']();!this[_0x4a77b1(0xd1)]['getLoggerId']()&&this[_0x4a77b1(0xd1)][_0x4a77b1(0xe2)](await salesforce_logger_v3_service_1[_0x4a77b1(0x133)][_0x4a77b1(0xaa)](sf_logger_v3_types_1['LoggerTypes'][_0x4a77b1(0x115)]));await this[_0x4a77b1(0xd1)][_0x4a77b1(0xc0)]();if(_0x6bf6f5[_0x4a77b1(0xa1)]){await this['mdapiUtils'][_0x4a77b1(0xbd)](this[_0x4a77b1(0x10e)][_0x4a77b1(0x13e)]),await this[_0x4a77b1(0xd1)]['log'](this[_0x4a77b1(0xab)]+_0x4a77b1(0xa7))['send']();const _0x115b75=(await fs_internal_1['FS']['readDir'](this[_0x4a77b1(0x13a)][_0x4a77b1(0x13e)],!![]))[_0x4a77b1(0x94)](_0x5c1966=>(0x0,path_1['relative'])(this['mdapiUtils']['dir'],_0x5c1966));this['sfLogger'][_0x4a77b1(0x11f)](this['prefix']+'\x20Force\x20commit.\x20Have\x20to\x20parse\x20'+_0x115b75[_0x4a77b1(0xfe)]+_0x4a77b1(0x143)),this[_0x4a77b1(0xf5)][_0x4a77b1(0xef)]=[],this[_0x4a77b1(0xf5)][_0x4a77b1(0x99)]=[{'files':{'modified':_0x115b75,'added':[],'removed':[]},'id':await this['gitUtils'][_0x4a77b1(0xba)](),'message':_0x4a77b1(0xd2),'username':constants_1[_0x4a77b1(0x135)]}];}await this[_0x4a77b1(0x102)]['updateRemoteState']({[this[_0x4a77b1(0xf5)][_0x4a77b1(0xd4)]]:{'lastCommit':this[_0x4a77b1(0x139)]}}),await this[_0x4a77b1(0xd1)][_0x4a77b1(0x11f)](this['prefix']+_0x4a77b1(0xb1)+(_0x2846f0?_0x4a77b1(0xf3):'NO')+_0x4a77b1(0x138))[_0x4a77b1(0xc0)](),await this[_0x4a77b1(0xeb)](_0x2846f0),await this[_0x4a77b1(0xd1)][_0x4a77b1(0x11f)](this['prefix']+'\x20Job\x20done.')[_0x4a77b1(0xc0)](),await this[_0x4a77b1(0x102)][_0x4a77b1(0xc3)](_0x4a77b1(0x127)),await this[_0x4a77b1(0xa0)]([_0x6bf6f5[_0x4a77b1(0xb5)]],this[_0x4a77b1(0x10c)][_0x4a77b1(0x125)],_0x6bf6f5[_0x4a77b1(0x119)],_0x6bf6f5['branch']);}catch(_0x3f07fd){await this['cleanUp']();if(_0x3f07fd instanceof flosum_commit_error_1['FlosumCommitError'])await this[_0x4a77b1(0x102)][_0x4a77b1(0xc3)](_0x4a77b1(0x127))[_0x4a77b1(0xa9)](()=>void 0x0),this[_0x4a77b1(0xf7)][_0x4a77b1(0x11f)](this[_0x4a77b1(0xab)]+_0x4a77b1(0xf0));else{await this['logger']['error'](this[_0x4a77b1(0xab)]+'\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20'+(_0x3f07fd instanceof api_error_1['ApiError']||_0x3f07fd instanceof salesforce_error_1[_0x4a77b1(0x142)]?_0x3f07fd[_0x4a77b1(0xb2)]():_0x3f07fd)),await this[_0x4a77b1(0x102)][_0x4a77b1(0xdc)]({}),await this['gitCommit']['updateStatus'](_0x4a77b1(0x12a))[_0x4a77b1(0xa9)](()=>void 0x0),await this[_0x4a77b1(0xda)]([_0x6bf6f5[_0x4a77b1(0xb5)]],this['config'][_0x4a77b1(0x125)],_0x6bf6f5['repository'],_0x6bf6f5[_0x4a77b1(0xcf)]);throw _0x3f07fd;}}finally{await this['cleanUp'](),await this['sfLogger']['send']()['catch'](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a127_0x350b4b(0x131),[git_commit_service_1[a127_0x350b4b(0xcc)],connection_1[a127_0x350b4b(0xb7)]])],GitCommitJob),exports[a127_0x350b4b(0xb3)]=GitCommitJob;