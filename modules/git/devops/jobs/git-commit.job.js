const a128_0x1dd861=a128_0x35c7;(function(_0x696e92,_0x18a6fa){const _0x5eebc4=a128_0x35c7,_0x260fe1=_0x696e92();while(!![]){try{const _0x226822=-parseInt(_0x5eebc4(0x122))/0x1+-parseInt(_0x5eebc4(0x13f))/0x2+parseInt(_0x5eebc4(0x1a8))/0x3*(parseInt(_0x5eebc4(0x151))/0x4)+-parseInt(_0x5eebc4(0x155))/0x5*(-parseInt(_0x5eebc4(0x1cd))/0x6)+-parseInt(_0x5eebc4(0x141))/0x7+-parseInt(_0x5eebc4(0x1b3))/0x8*(parseInt(_0x5eebc4(0x1cb))/0x9)+parseInt(_0x5eebc4(0x154))/0xa;if(_0x226822===_0x18a6fa)break;else _0x260fe1['push'](_0x260fe1['shift']());}catch(_0x1ed12d){_0x260fe1['push'](_0x260fe1['shift']());}}}(a128_0xc4d1,0xe2048));function a128_0xc4d1(){const _0x35397a=['../../salesforce/errors/salesforce.error','getCurrentHash','ProvidersFactory','toString','repositoryGit','decorate','../../../shared/utils','send','prepareMdapi','getGitShellAuthorizationString','metadata','createCommit','completeNotification','function','providersFactory','8304516DCcclp','author','233004jpmkmU','getRepositoryId','log','branch','recordType','configurable','DEFAULT_GIT_USER_EMAIL','gitCommit','gitUtils','../../internal/git.internal','1080000YBdpke','setLoggerId','SFDX','updateFileNamesForSFDXProject','FlosumCommitError','\x20Processed\x20','\x20Start\x20Git-commit\x20job.','proceedCommits','\x20Added\x20','changes','splice','\x20Commit\x20Summary','clone','getLoggerId','Logger','values','__setModuleDefault','inserted','ApiError','createLoggerId','checkoutTo','force','Bitbucket','Error','\x20components','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','../utils/mdapi.utils','../../parsers/utils','prefix','560134VAvDdQ','BitbucketApiService','3013668hLAdHI','setCommitDto',']\x20[','\x20Removed\x20','commit','../services/git-commit.service','removeDir','\x20files\x20before\x20sync.','sendComponents','stats','Git','GitCommitService','fileNames','repository','relative','cleanUp','12euGePv','../../salesforce/services/salesforce-logger-v3.service','../utils/path.utils','23993910mKZfEs','205uRwKsk','SalesforceError','shift','readFilesByFilename','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','../../providers/providers.tokens','getRecordTypes','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','apply','config','message','typedi','CommitToFlosumCompletedNotification','gitCommitData','search','fetchCommits','isSFDXProject','__metadata','\x20Proceeded\x20','\x20Job\x20done.','gitProvider','gitApiService','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','map','prototype','design:paramtypes','GitCommitJob','handleCommit','../../providers/types/git-provider','files','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','sync\x20components','modified','replace','checkSyncStatus','credentials','../../internal/fs.internal','writable','object','describeCommit','getRemote','getRemoteHash','PathUtils','MAX_COMPONENTS_PER_TICK','email','logger','constructor','../../salesforce/types/sf-logger-v3-types','__esModule','YES','push','../../providers/api/bitbucket-api.service','error','(((.+)+)+)+$','length','proceedFile','default','removed','SalesforceLogger3','../../salesforce/utils/sfdx.utils','__decorate','provider','fetchComponentsMetadata','isLoggedIn','MDApiUtils','\x20components.','get','\x20Fetch\x20remote\x20branch\x20hash.','name','errorNotification','getOwnPropertyDescriptor',']\x20[Branch:\x20','flat','defineProperty','Service','updateRemoteState','added','prepareGitChangedPaths','create','call','../../../../core','isEmailNotificationsEnabled','resetStats','570222fySzfK','commits','lastCommitHash','catch','dir','__importStar','username','CommitToFlosumErrorNotification','execute','convertToCleanPaths','In\x20Progress','16nHvKJp','Tokens','updateStatus','Completed','../../../../core/errors/api.error','sfLogger','../../notifications/commit-to-flosum-completed.notification','info','mdapiUtils'];a128_0xc4d1=function(){return _0x35397a;};return a128_0xc4d1();}function a128_0x35c7(_0x45e704,_0x595c96){const _0x216bb8=a128_0xc4d1();return a128_0x35c7=function(_0x4facd1,_0x6a6531){_0x4facd1=_0x4facd1-0x121;let _0xc4d1c4=_0x216bb8[_0x4facd1];return _0xc4d1c4;},a128_0x35c7(_0x45e704,_0x595c96);}const a128_0x6a6531=(function(){let _0x5cb10c=!![];return function(_0x13c2d0,_0x200ddf){const _0x36b670=_0x5cb10c?function(){const _0x488c12=a128_0x35c7;if(_0x200ddf){const _0xf9b218=_0x200ddf[_0x488c12(0x15d)](_0x13c2d0,arguments);return _0x200ddf=null,_0xf9b218;}}:function(){};return _0x5cb10c=![],_0x36b670;};}()),a128_0x4facd1=a128_0x6a6531(this,function(){const _0x6b9d3b=a128_0x35c7;return a128_0x4facd1[_0x6b9d3b(0x1bf)]()[_0x6b9d3b(0x163)](_0x6b9d3b(0x18a))[_0x6b9d3b(0x1bf)]()[_0x6b9d3b(0x183)](a128_0x4facd1)[_0x6b9d3b(0x163)](_0x6b9d3b(0x18a));});a128_0x4facd1();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x33636f,_0x44f9a5,_0x2a8403,_0x1f5b36){const _0x5f4f24=a128_0x35c7;if(_0x1f5b36===undefined)_0x1f5b36=_0x2a8403;var _0x3afc31=Object['getOwnPropertyDescriptor'](_0x44f9a5,_0x2a8403);(!_0x3afc31||(_0x5f4f24(0x197)in _0x3afc31?!_0x44f9a5[_0x5f4f24(0x185)]:_0x3afc31[_0x5f4f24(0x17a)]||_0x3afc31[_0x5f4f24(0x1d2)]))&&(_0x3afc31={'enumerable':!![],'get':function(){return _0x44f9a5[_0x2a8403];}}),Object[_0x5f4f24(0x19e)](_0x33636f,_0x1f5b36,_0x3afc31);}:function(_0x4a1b53,_0x47af8f,_0x28899e,_0x4662f1){if(_0x4662f1===undefined)_0x4662f1=_0x28899e;_0x4a1b53[_0x4662f1]=_0x47af8f[_0x28899e];}),__setModuleDefault=this&&this[a128_0x1dd861(0x132)]||(Object[a128_0x1dd861(0x1a3)]?function(_0x59df69,_0x3ee4f0){const _0x232d14=a128_0x1dd861;Object[_0x232d14(0x19e)](_0x59df69,_0x232d14(0x18d),{'enumerable':!![],'value':_0x3ee4f0});}:function(_0x5afaef,_0x2ac1ee){const _0x120f94=a128_0x1dd861;_0x5afaef[_0x120f94(0x18d)]=_0x2ac1ee;}),__decorate=this&&this[a128_0x1dd861(0x191)]||function(_0x37b527,_0x3fa14c,_0x53eb54,_0x385c84){const _0x50b0d8=a128_0x1dd861;var _0x1395d4=arguments[_0x50b0d8(0x18b)],_0x2ec6f7=_0x1395d4<0x3?_0x3fa14c:_0x385c84===null?_0x385c84=Object[_0x50b0d8(0x19b)](_0x3fa14c,_0x53eb54):_0x385c84,_0x5cf08d;if(typeof Reflect===_0x50b0d8(0x17b)&&typeof Reflect[_0x50b0d8(0x1c1)]===_0x50b0d8(0x1c9))_0x2ec6f7=Reflect[_0x50b0d8(0x1c1)](_0x37b527,_0x3fa14c,_0x53eb54,_0x385c84);else{for(var _0xc77571=_0x37b527[_0x50b0d8(0x18b)]-0x1;_0xc77571>=0x0;_0xc77571--)if(_0x5cf08d=_0x37b527[_0xc77571])_0x2ec6f7=(_0x1395d4<0x3?_0x5cf08d(_0x2ec6f7):_0x1395d4>0x3?_0x5cf08d(_0x3fa14c,_0x53eb54,_0x2ec6f7):_0x5cf08d(_0x3fa14c,_0x53eb54))||_0x2ec6f7;}return _0x1395d4>0x3&&_0x2ec6f7&&Object['defineProperty'](_0x3fa14c,_0x53eb54,_0x2ec6f7),_0x2ec6f7;},__importStar=this&&this[a128_0x1dd861(0x1ad)]||function(_0x5c068e){const _0xeeabf=a128_0x1dd861;if(_0x5c068e&&_0x5c068e[_0xeeabf(0x185)])return _0x5c068e;var _0x5c10aa={};if(_0x5c068e!=null){for(var _0x192c97 in _0x5c068e)if(_0x192c97!==_0xeeabf(0x18d)&&Object[_0xeeabf(0x16d)]['hasOwnProperty'][_0xeeabf(0x1a4)](_0x5c068e,_0x192c97))__createBinding(_0x5c10aa,_0x5c068e,_0x192c97);}return __setModuleDefault(_0x5c10aa,_0x5c068e),_0x5c10aa;},__metadata=this&&this[a128_0x1dd861(0x166)]||function(_0x4cf954,_0x4373f0){const _0x223a43=a128_0x1dd861;if(typeof Reflect===_0x223a43(0x17b)&&typeof Reflect[_0x223a43(0x1c6)]===_0x223a43(0x1c9))return Reflect[_0x223a43(0x1c6)](_0x4cf954,_0x4373f0);},GitCommitJob_1;Object[a128_0x1dd861(0x19e)](exports,a128_0x1dd861(0x185),{'value':!![]}),exports[a128_0x1dd861(0x16f)]=void 0x0;const core_1=require(a128_0x1dd861(0x1a5)),fs_internal_1=require(a128_0x1dd861(0x179)),salesforce_logger_v3_service_1=require(a128_0x1dd861(0x152)),utils_1=require(a128_0x1dd861(0x1c2)),path_1=require('path'),typedi_1=__importStar(require(a128_0x1dd861(0x160))),constants_1=require('../../../../constants'),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a128_0x1dd861(0x13c)),api_error_1=require(a128_0x1dd861(0x1b7)),salesforce_error_1=require(a128_0x1dd861(0x1bc)),git_commit_service_1=require(a128_0x1dd861(0x146)),flosum_commit_error_1=require('../errors/flosum-commit.error'),bitbucket_api_service_1=require(a128_0x1dd861(0x188)),git_provider_1=require(a128_0x1dd861(0x171)),sfdx_utils_1=require(a128_0x1dd861(0x190)),utils_2=require(a128_0x1dd861(0x13d)),git_internal_1=require(a128_0x1dd861(0x121)),providers_tokens_1=require(a128_0x1dd861(0x15a)),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require(a128_0x1dd861(0x184)),path_utils_1=require(a128_0x1dd861(0x153)),commit_to_flosum_completed_notification_1=require(a128_0x1dd861(0x1b9)),commit_to_flosum_error_notification_1=require('../../notifications/commit-to-flosum-error.notification');let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x1b7161,_0x53e3dd){const _0x4482fc=a128_0x1dd861;this[_0x4482fc(0x1d4)]=_0x1b7161,this[_0x4482fc(0x1ca)]=_0x53e3dd,this[_0x4482fc(0x180)]=+(process['env'][_0x4482fc(0x180)]||0xbb8),this['logger']=new core_1[(_0x4482fc(0x130))](GitCommitJob_1['name']),this['commitId']='',this['stats']={'removed':0x0,'modified':0x0,'added':0x0};}async[a128_0x1dd861(0x17d)](){const _0x498be1=a128_0x1dd861,{repositoryGit:_0x427700}=this[_0x498be1(0x162)],_0x1e6f5f=typedi_1[_0x498be1(0x18d)][_0x498be1(0x197)](providers_tokens_1[_0x498be1(0x1b4)][_0x498be1(0x178)]);if(this[_0x498be1(0x162)][_0x498be1(0x192)]===git_provider_1['GitProvider'][_0x498be1(0x138)]){const _0x38e29d=typedi_1[_0x498be1(0x18d)][_0x498be1(0x197)](bitbucket_api_service_1[_0x498be1(0x140)]);await _0x38e29d[_0x498be1(0x194)]();}return _0x427700[_0x498be1(0x176)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x427700)+'://'+_0x1e6f5f[_0x498be1(0x1c5)]()+'@');}async['completeNotification'](_0x3f805a,_0x5a4441,_0x4de32d,_0x11cb81){const _0x407277=a128_0x1dd861;if(!this[_0x407277(0x15e)]['isEmailNotificationsEnabled']){this[_0x407277(0x182)][_0x407277(0x1ba)]('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_completed_notification_1[(_0x407277(0x161))]({'emails':_0x3f805a,'gitProvider':_0x5a4441,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x407277(0x161)]['name'],'repositoryName':_0x4de32d,'branchName':_0x11cb81})[_0x407277(0x1b0)]();}async[a128_0x1dd861(0x19a)](_0x1bde6c,_0x5c6fce,_0x23c9df,_0x14ef01){const _0x47c4e7=a128_0x1dd861;if(!this[_0x47c4e7(0x15e)][_0x47c4e7(0x1a6)]){this[_0x47c4e7(0x182)]['info']('Email\x20notifications\x20are\x20disabled.');return;}await new commit_to_flosum_error_notification_1[(_0x47c4e7(0x1af))]({'emails':_0x1bde6c,'gitProvider':_0x5c6fce,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0x47c4e7(0x1af)][_0x47c4e7(0x199)],'repositoryName':_0x23c9df,'branchName':_0x14ef01})[_0x47c4e7(0x1b0)]();}['resetStats'](){const _0x8182e6=a128_0x1dd861;this[_0x8182e6(0x14a)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a128_0x1dd861(0x125)](){const _0x33dd97=a128_0x1dd861,_0x2a9426=[...this[_0x33dd97(0x162)][_0x33dd97(0x14d)]];this[_0x33dd97(0x162)]['fileNames']=[];for(const _0x3e2602 of _0x2a9426){this['gitCommitData'][_0x33dd97(0x14d)]['push'](...await(0x0,utils_2[_0x33dd97(0x158)])(_0x3e2602,this[_0x33dd97(0x1bb)][_0x33dd97(0x1ac)]));}}async[a128_0x1dd861(0x164)](){const _0x2e6465=a128_0x1dd861;if(this[_0x2e6465(0x162)]['force'])return;const _0x1e7c18=[];for(const _0x5e7112 of this['gitCommitData'][_0x2e6465(0x1a9)]){const _0x44de24=await this[_0x2e6465(0x1d5)][_0x2e6465(0x17c)](_0x5e7112['id']);_0x5e7112['username']=_0x44de24[_0x2e6465(0x1cc)],_0x5e7112[_0x2e6465(0x15f)]=_0x44de24[_0x2e6465(0x15f)],_0x5e7112[_0x2e6465(0x172)]=_0x44de24[_0x2e6465(0x12b)],_0x5e7112[_0x2e6465(0x181)]=_0x44de24[_0x2e6465(0x181)];if(_0x5e7112['email']===constants_1[_0x2e6465(0x1d3)])throw new flosum_commit_error_1[(_0x2e6465(0x126))]();_0x1e7c18[_0x2e6465(0x187)](...Object[_0x2e6465(0x131)](_0x5e7112[_0x2e6465(0x172)])[_0x2e6465(0x19d)]());}this[_0x2e6465(0x162)][_0x2e6465(0x14d)]=[...new Set(path_utils_1[_0x2e6465(0x17f)][_0x2e6465(0x1a2)](this[_0x2e6465(0x1d4)][_0x2e6465(0x1d1)],_0x1e7c18,![]))];}async[a128_0x1dd861(0x149)](_0x5e08cb,_0x56cefb,_0x177cdc){const _0x25e302=a128_0x1dd861,_0x17a7c0=_0x177cdc['reduce']((_0x1f97e2,_0x1b791a)=>{const _0x539f86=a128_0x35c7;return _0x1f97e2[_0x539f86(0x133)][_0x539f86(0x187)](..._0x1b791a['inserted']),_0x1f97e2['modified'][_0x539f86(0x187)](..._0x1b791a[_0x539f86(0x175)]),_0x1f97e2['removed'][_0x539f86(0x187)](..._0x1b791a[_0x539f86(0x18e)]),_0x1f97e2;},{'inserted':[],'modified':[],'removed':[]}),_0x55d676=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this[_0x25e302(0x1d4)][_0x25e302(0x15b)](),'branchId':this[_0x25e302(0x1d4)]['getBranchId'](),'repositoryId':this[_0x25e302(0x1d4)]['getRepositoryId'](),'logger':this[_0x25e302(0x1b8)],'commitId':this['commitId']});await _0x55d676[_0x25e302(0x129)]([{'author':_0x5e08cb,'message':_0x56cefb,'inserted':_0x17a7c0[_0x25e302(0x133)],'modified':_0x17a7c0[_0x25e302(0x175)],'removed':_0x17a7c0[_0x25e302(0x18e)]}]);}async[a128_0x1dd861(0x170)](_0x38eb8c,_0x45e6ce){const _0x477aac=a128_0x1dd861;await this['sfLogger'][_0x477aac(0x1cf)](this['prefix']+'\x20Download\x20components\x20metadata\x20from\x20Flosum.')[_0x477aac(0x1c3)](),await this['gitCommit'][_0x477aac(0x193)](_0x45e6ce);const {added:_0x50e380,modified:_0x518677,removed:_0x40887f}=_0x38eb8c[_0x477aac(0x172)];_0x45e6ce&&_0x518677[_0x477aac(0x187)](..._0x40887f[_0x477aac(0x12c)](0x0));const _0x3e4925=path_utils_1[_0x477aac(0x17f)][_0x477aac(0x1a2)](this[_0x477aac(0x1d4)][_0x477aac(0x1d1)],[..._0x50e380,..._0x518677,..._0x40887f],_0x45e6ce&&!this[_0x477aac(0x162)][_0x477aac(0x137)]),_0x2d5435=(0x0,utils_2[_0x477aac(0x1b1)])(_0x3e4925);let _0x11d19f=0x0;const _0x3b1931=[];(_0x50e380['length']||_0x518677[_0x477aac(0x18b)])&&this[_0x477aac(0x1d4)]['getRepositoryId']()&&(this['commitId']=await this[_0x477aac(0x1d4)][_0x477aac(0x1c7)](_0x38eb8c[_0x477aac(0x15f)]));const _0x1fa23c=_0x2d5435[_0x477aac(0x18b)];let _0x4f57b7=0x0;while(_0x2d5435[_0x477aac(0x18b)]){const _0x3471f3=_0x2d5435[_0x477aac(0x157)](),_0x520d51=await this['gitCommit'][_0x477aac(0x18c)](_0x3471f3,this[_0x477aac(0x1bb)]['dir'],_0x45e6ce&&!this['gitCommitData'][_0x477aac(0x137)]);_0x11d19f+=_0x520d51[_0x477aac(0x133)][_0x477aac(0x18b)]+_0x520d51['removed'][_0x477aac(0x18b)]+_0x520d51[_0x477aac(0x175)]['length'],this[_0x477aac(0x14a)]['added']+=_0x520d51[_0x477aac(0x133)][_0x477aac(0x18b)],this[_0x477aac(0x14a)][_0x477aac(0x175)]+=_0x520d51['modified'][_0x477aac(0x18b)],this[_0x477aac(0x14a)]['removed']+=_0x520d51[_0x477aac(0x18e)]['length'],_0x4f57b7++,_0x4f57b7%0x64===0x0&&this[_0x477aac(0x182)]['log']('proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',_0x4f57b7,_0x1fa23c,_0x11d19f),_0x3b1931[_0x477aac(0x187)](_0x520d51),_0x11d19f>this[_0x477aac(0x180)]&&(await this[_0x477aac(0x149)](_0x38eb8c['username'],_0x38eb8c[_0x477aac(0x15f)],_0x3b1931),await this['sfLogger'][_0x477aac(0x1cf)](this[_0x477aac(0x13e)]+'\x20Processed\x20'+_0x11d19f+_0x477aac(0x196))[_0x477aac(0x1c3)](),_0x11d19f=0x0,_0x3b1931[_0x477aac(0x12c)](0x0));}_0x3b1931[_0x477aac(0x18b)]&&(await this[_0x477aac(0x149)](_0x38eb8c[_0x477aac(0x1ae)],_0x38eb8c[_0x477aac(0x15f)],_0x3b1931),await this['sfLogger'][_0x477aac(0x1cf)](this[_0x477aac(0x13e)]+_0x477aac(0x127)+_0x11d19f+_0x477aac(0x196))[_0x477aac(0x1c3)]());}async[a128_0x1dd861(0x129)](_0x148fa9){const _0x5a4c27=a128_0x1dd861,_0x2725ec=[...this[_0x5a4c27(0x162)][_0x5a4c27(0x1a9)]],_0x2980c1=_0x2725ec[_0x5a4c27(0x18b)];let _0x2209e4=0x0;while(_0x2725ec[_0x5a4c27(0x18b)]){const _0x473668=_0x2725ec[_0x5a4c27(0x157)]();!this[_0x5a4c27(0x162)]['force']&&(this[_0x5a4c27(0x1d4)][_0x5a4c27(0x1ce)]()?(await this[_0x5a4c27(0x1d5)][_0x5a4c27(0x136)](_0x473668['id']),await this[_0x5a4c27(0x1bb)][_0x5a4c27(0x1c4)](this['gitUtils']['dir'])):(await this[_0x5a4c27(0x1d5)][_0x5a4c27(0x136)](this['lastCommitHash']),await this['mdapiUtils'][_0x5a4c27(0x1c4)](this[_0x5a4c27(0x1d5)][_0x5a4c27(0x1ac)]))),await this['handleCommit'](_0x473668,_0x148fa9),await this[_0x5a4c27(0x1bb)][_0x5a4c27(0x147)](),_0x2209e4+=0x1,await this[_0x5a4c27(0x1b8)][_0x5a4c27(0x1cf)](this['prefix']+_0x5a4c27(0x12d)),await this[_0x5a4c27(0x1b8)]['log'](this[_0x5a4c27(0x13e)]+_0x5a4c27(0x12a)+this[_0x5a4c27(0x14a)][_0x5a4c27(0x1a1)]+_0x5a4c27(0x13a)),await this[_0x5a4c27(0x1b8)][_0x5a4c27(0x1cf)](this[_0x5a4c27(0x13e)]+'\x20Modified\x20'+this[_0x5a4c27(0x14a)][_0x5a4c27(0x175)]+_0x5a4c27(0x13a)),await this[_0x5a4c27(0x1b8)][_0x5a4c27(0x1cf)](this[_0x5a4c27(0x13e)]+_0x5a4c27(0x144)+this[_0x5a4c27(0x14a)][_0x5a4c27(0x18e)]+'\x20components'),await this[_0x5a4c27(0x1b8)][_0x5a4c27(0x1cf)](this[_0x5a4c27(0x13e)]+_0x5a4c27(0x167)+_0x2209e4+'/'+_0x2980c1+'\x20commits.')['send'](),this[_0x5a4c27(0x1a7)]();}}async[a128_0x1dd861(0x150)](){const _0x20baec=a128_0x1dd861;this['gitUtils']&&await this[_0x20baec(0x1d5)][_0x20baec(0x147)]()[_0x20baec(0x1ab)](()=>void 0x0),this['mdapiUtils']&&await this[_0x20baec(0x1bb)]['removeDir']()[_0x20baec(0x1ab)](()=>void 0x0);}async['run'](_0x5161af){const _0x27117c=a128_0x1dd861;this[_0x27117c(0x162)]=_0x5161af,this[_0x27117c(0x1d4)][_0x27117c(0x142)](this[_0x27117c(0x162)]),this[_0x27117c(0x16a)]=typedi_1['default']['get'](providers_tokens_1[_0x27117c(0x1b4)][_0x27117c(0x16a)]),this[_0x27117c(0x15e)]=typedi_1[_0x27117c(0x18d)][_0x27117c(0x197)](providers_tokens_1[_0x27117c(0x1b4)][_0x27117c(0x15e)]),this['sfLogger']=typedi_1[_0x27117c(0x18d)][_0x27117c(0x197)](providers_tokens_1['Tokens']['logger']),this[_0x27117c(0x13e)]=_0x27117c(0x15c)+_0x5161af[_0x27117c(0x14e)]+_0x27117c(0x19c)+_0x5161af['branch']+_0x27117c(0x143)+GitCommitJob_1[_0x27117c(0x199)]+']',this[_0x27117c(0x1d5)]=new git_utils_1['GitUtils'](await this[_0x27117c(0x17d)]()),this[_0x27117c(0x1bb)]=new mdapi_utils_1[(_0x27117c(0x195))](),this[_0x27117c(0x1b8)][_0x27117c(0x1cf)](this[_0x27117c(0x13e)]+_0x27117c(0x128));try{this['sfLogger']['log'](this[_0x27117c(0x13e)]+'\x20Fetch\x20salesforce\x20data.'),await this[_0x27117c(0x1d4)]['fetchRepositoryOrBranchData'](),await this[_0x27117c(0x1d4)]['updateStatus'](_0x27117c(0x1b2)),this['sfLogger']['log'](this['prefix']+_0x27117c(0x198)),this[_0x27117c(0x1aa)]=await git_internal_1[_0x27117c(0x14b)][_0x27117c(0x17e)](await this[_0x27117c(0x17d)](),this[_0x27117c(0x162)][_0x27117c(0x1d0)]),this[_0x27117c(0x182)]['log']('Last\x20git\x20repository\x20hash\x20is\x20%s.',this['lastCommitHash']);const _0x584631=await this[_0x27117c(0x1d4)][_0x27117c(0x177)](this[_0x27117c(0x1aa)]);if(_0x584631){this[_0x27117c(0x1b8)]['log']('Branch\x20synchronized.\x20Skip.'),await this[_0x27117c(0x1d4)][_0x27117c(0x1b5)](_0x27117c(0x1b6));return;}this[_0x27117c(0x1b8)][_0x27117c(0x1cf)](this[_0x27117c(0x13e)]+'\x20Cloning\x20git\x20repository\x20from\x20'+this['gitCommitData'][_0x27117c(0x1c0)]+'.'),await this['gitUtils'][_0x27117c(0x12e)](this[_0x27117c(0x162)][_0x27117c(0x1d0)],this[_0x27117c(0x162)][_0x27117c(0x14e)]),this[_0x27117c(0x1b8)][_0x27117c(0x1cf)](this[_0x27117c(0x13e)]+_0x27117c(0x16b));const _0x2ff452=await sfdx_utils_1[_0x27117c(0x124)][_0x27117c(0x165)](this[_0x27117c(0x1d5)][_0x27117c(0x1ac)]);await this[_0x27117c(0x164)]();!this[_0x27117c(0x1b8)][_0x27117c(0x12f)]()&&this['sfLogger'][_0x27117c(0x123)](await salesforce_logger_v3_service_1[_0x27117c(0x18f)][_0x27117c(0x135)](sf_logger_v3_types_1['LoggerTypes'][_0x27117c(0x145)]));await this[_0x27117c(0x1b8)][_0x27117c(0x1c3)]();if(_0x5161af['force']){await this[_0x27117c(0x1bb)][_0x27117c(0x1c4)](this['gitUtils'][_0x27117c(0x1ac)]),await this[_0x27117c(0x1b8)][_0x27117c(0x1cf)](this[_0x27117c(0x13e)]+_0x27117c(0x13b))[_0x27117c(0x1c3)]();const _0x5bc301=(await fs_internal_1['FS']['readDir'](this[_0x27117c(0x1bb)]['dir'],!![]))[_0x27117c(0x16c)](_0x5abcd9=>(0x0,path_1[_0x27117c(0x14f)])(this[_0x27117c(0x1bb)][_0x27117c(0x1ac)],_0x5abcd9));this[_0x27117c(0x1b8)][_0x27117c(0x1cf)](this[_0x27117c(0x13e)]+_0x27117c(0x173)+_0x5bc301[_0x27117c(0x18b)]+_0x27117c(0x148)),this['gitCommitData'][_0x27117c(0x14d)]=[],this['gitCommitData']['commits']=[{'files':{'modified':_0x5bc301,'added':[],'removed':[]},'id':await this['gitUtils'][_0x27117c(0x1bd)](),'message':_0x27117c(0x174),'username':constants_1['DEFAULT_GIT_USER_NAME']}];}await this[_0x27117c(0x1d4)][_0x27117c(0x1a0)]({[this[_0x27117c(0x162)]['repositoryGit']]:{'lastCommit':this['lastCommitHash']}}),await this[_0x27117c(0x1b8)][_0x27117c(0x1cf)](this['prefix']+'\x20[SFDX:\x20'+(_0x2ff452?_0x27117c(0x186):'NO')+']\x20Start\x20proceeding\x20git\x20commits.\x20')[_0x27117c(0x1c3)](),await this[_0x27117c(0x129)](_0x2ff452),await this[_0x27117c(0x1b8)][_0x27117c(0x1cf)](this[_0x27117c(0x13e)]+_0x27117c(0x168))[_0x27117c(0x1c3)](),await this[_0x27117c(0x1d4)][_0x27117c(0x1b5)](_0x27117c(0x1b6)),await this[_0x27117c(0x1c8)]([_0x5161af['email']],this['config'][_0x27117c(0x169)],_0x5161af['repository'],_0x5161af[_0x27117c(0x1d0)]);}catch(_0x398de2){await this['cleanUp']();if(_0x398de2 instanceof flosum_commit_error_1[_0x27117c(0x126)])await this['gitCommit'][_0x27117c(0x1b5)]('Completed')[_0x27117c(0x1ab)](()=>void 0x0),this[_0x27117c(0x182)][_0x27117c(0x1cf)](this[_0x27117c(0x13e)]+_0x27117c(0x159));else{await this[_0x27117c(0x182)][_0x27117c(0x189)](this[_0x27117c(0x13e)]+'\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20'+(_0x398de2 instanceof api_error_1[_0x27117c(0x134)]||_0x398de2 instanceof salesforce_error_1[_0x27117c(0x156)]?_0x398de2['toString']():_0x398de2)),await this['gitCommit']['updateRemoteState']({}),await this[_0x27117c(0x1d4)]['updateStatus'](_0x27117c(0x139))['catch'](()=>void 0x0),await this[_0x27117c(0x19a)]([_0x5161af[_0x27117c(0x181)]],this[_0x27117c(0x15e)][_0x27117c(0x169)],_0x5161af[_0x27117c(0x14e)],_0x5161af['branch']);throw _0x398de2;}}finally{await this[_0x27117c(0x150)](),await this['sfLogger'][_0x27117c(0x1c3)]()[_0x27117c(0x1ab)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a128_0x1dd861(0x19f)])({'transient':!![]}),__metadata(a128_0x1dd861(0x16e),[git_commit_service_1[a128_0x1dd861(0x14c)],connection_1[a128_0x1dd861(0x1be)]])],GitCommitJob),exports[a128_0x1dd861(0x16f)]=GitCommitJob;