const a126_0x59d5ac=a126_0x2361;(function(_0x20b546,_0x15d6d6){const _0x57933b=a126_0x2361,_0x19c76f=_0x20b546();while(!![]){try{const _0x9361a2=parseInt(_0x57933b(0x1f7))/0x1*(parseInt(_0x57933b(0x1ae))/0x2)+-parseInt(_0x57933b(0x1f0))/0x3*(-parseInt(_0x57933b(0x213))/0x4)+parseInt(_0x57933b(0x1ee))/0x5+-parseInt(_0x57933b(0x1cd))/0x6+parseInt(_0x57933b(0x1f1))/0x7+parseInt(_0x57933b(0x1fc))/0x8*(-parseInt(_0x57933b(0x23d))/0x9)+parseInt(_0x57933b(0x21b))/0xa*(-parseInt(_0x57933b(0x1ea))/0xb);if(_0x9361a2===_0x15d6d6)break;else _0x19c76f['push'](_0x19c76f['shift']());}catch(_0xdff245){_0x19c76f['push'](_0x19c76f['shift']());}}}(a126_0x3450,0x2de76));const a126_0x5e47f5=(function(){let _0x261e86=!![];return function(_0x5b4df7,_0x1a752c){const _0xcf10a=_0x261e86?function(){const _0xaa35f4=a126_0x2361;if(_0x1a752c){const _0x5b974c=_0x1a752c[_0xaa35f4(0x1aa)](_0x5b4df7,arguments);return _0x1a752c=null,_0x5b974c;}}:function(){};return _0x261e86=![],_0xcf10a;};}()),a126_0x282c1d=a126_0x5e47f5(this,function(){const _0x42c2c2=a126_0x2361;return a126_0x282c1d[_0x42c2c2(0x190)]()['search'](_0x42c2c2(0x1cb))['toString']()[_0x42c2c2(0x1e0)](a126_0x282c1d)['search'](_0x42c2c2(0x1cb));});a126_0x282c1d();function a126_0x2361(_0x2cfdb2,_0x44531c){const _0xfb7d53=a126_0x3450();return a126_0x2361=function(_0x282c1d,_0x5e47f5){_0x282c1d=_0x282c1d-0x187;let _0x3450a5=_0xfb7d53[_0x282c1d];return _0x3450a5;},a126_0x2361(_0x2cfdb2,_0x44531c);}function a126_0x3450(){const _0x310611=['cleanUp','default','readDir','defineProperty','41GNedJk','proceedFile','added','__setModuleDefault','../../notifications/commit-to-flosum-error.notification','613864LCtGbL','create','updateRemoteState','prototype','send','branch','\x20components.','changes','../../salesforce/errors/salesforce.error','provider','sync\x20components','prepareMdapi','FlosumCommitError','errorNotification','SalesforceError','gitCommit','../../salesforce/types/sf-logger-v3-types','getProtocol','shift','files','error','length','removeDir','128ofIiqe','sendComponents','catch','\x20Processed\x20','reduce','getRemote','../../../../core/errors/api.error','__decorate','113930tmmoPy','SalesforceCommitsManager','In\x20Progress','\x20Modified\x20','\x20files\x20before\x20sync.','isLoggedIn','config','replace','MAX_COMPONENTS_PER_TICK','LoggerTypes','log','logger','isEmailNotificationsEnabled','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','BitbucketApiService','\x20Commit\x20Summary','../../providers/api/bitbucket-api.service','Tokens','\x20components','Service','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','repository','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','resetStats','name','MDApiUtils','\x20Job\x20done.','ApiError','commits','setLoggerId','splice','metadata','../../providers/types/git-provider','flat','18uMUpzM','setCommitDto','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','fetchComponentsMetadata','../../salesforce/utils/sfdx.utils','Completed','sfLogger','prefix','../utils/mdapi.utils','repositoryGit','force','SalesforceLogger3','toString','completeNotification','GitCommitService','writable','prepareGitChangedPaths','../../../../constants','typedi','path','username','Error','../../../../core','\x20commits.','info','relative','design:paramtypes','inserted','commitId','checkSyncStatus','env','gitProvider','author','Branch\x20synchronized.\x20Skip.','../services/git-commit.service','getGitShellAuthorizationString','__esModule','PathUtils','apply','hasOwnProperty','isSFDXProject','\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','12058rDPthv','describeCommit','../../salesforce/services/salesforce-logger-v3.service','\x20Download\x20components\x20metadata\x20from\x20Flosum.','CommitToFlosumCompletedNotification','fetchCommits','execute','SFDX','recordType','gitApiService','object','run','createCommit','lastCommitHash','handleCommit','commit','DEFAULT_GIT_USER_NAME','../../internal/fs.internal','dir','getRepositoryId','email','__importStar','GitCommitJob','updateStatus','get','../../internal/git.internal','CommitToFlosumErrorNotification','getRecordTypes','\x20Removed\x20','(((.+)+)+)+$','../utils/path.utils','202218utgjMR','getCurrentHash','proceedCommits','Git','\x20Start\x20Git-commit\x20job.','Logger','modified','getRemoteHash','\x20Fetch\x20remote\x20branch\x20hash.','../../salesforce/services/salesforce-commits-manager.service','Email\x20notifications\x20are\x20disabled.','function','removed','decorate','GitProvider','\x20Proceeded\x20','GitUtils','gitCommitData','mdapiUtils','constructor','checkoutTo','push','readFilesByFilename','__metadata','../utils/git.utils','fileNames','message',']\x20Start\x20proceeding\x20git\x20commits.\x20','stats','473PkQmYd','gitUtils','getLoggerId','fetchRepositoryOrBranchData','620545VeXTRc','updateFileNamesForSFDXProject','18654DNqPFi','2063712fviotP','call'];a126_0x3450=function(){return _0x310611;};return a126_0x3450();}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a126_0x59d5ac(0x1fd)]?function(_0x550422,_0x304aa9,_0x178666,_0x1c5642){const _0x490e05=a126_0x59d5ac;if(_0x1c5642===undefined)_0x1c5642=_0x178666;var _0x333feb=Object['getOwnPropertyDescriptor'](_0x304aa9,_0x178666);(!_0x333feb||(_0x490e05(0x1c6)in _0x333feb?!_0x304aa9[_0x490e05(0x1a8)]:_0x333feb[_0x490e05(0x193)]||_0x333feb['configurable']))&&(_0x333feb={'enumerable':!![],'get':function(){return _0x304aa9[_0x178666];}}),Object[_0x490e05(0x1f6)](_0x550422,_0x1c5642,_0x333feb);}:function(_0x16b746,_0x4f6eb5,_0x1e4f2f,_0x5bc471){if(_0x5bc471===undefined)_0x5bc471=_0x1e4f2f;_0x16b746[_0x5bc471]=_0x4f6eb5[_0x1e4f2f];}),__setModuleDefault=this&&this[a126_0x59d5ac(0x1fa)]||(Object['create']?function(_0x33f730,_0xbaa24a){const _0x1f0912=a126_0x59d5ac;Object[_0x1f0912(0x1f6)](_0x33f730,_0x1f0912(0x1f4),{'enumerable':!![],'value':_0xbaa24a});}:function(_0x54e42f,_0xca532b){const _0x279d58=a126_0x59d5ac;_0x54e42f[_0x279d58(0x1f4)]=_0xca532b;}),__decorate=this&&this[a126_0x59d5ac(0x21a)]||function(_0x420957,_0x38e9ee,_0x56c9e2,_0xf0df50){const _0x2f5349=a126_0x59d5ac;var _0x3f693b=arguments['length'],_0x5225aa=_0x3f693b<0x3?_0x38e9ee:_0xf0df50===null?_0xf0df50=Object['getOwnPropertyDescriptor'](_0x38e9ee,_0x56c9e2):_0xf0df50,_0x43569d;if(typeof Reflect===_0x2f5349(0x1b8)&&typeof Reflect['decorate']===_0x2f5349(0x1d8))_0x5225aa=Reflect[_0x2f5349(0x1da)](_0x420957,_0x38e9ee,_0x56c9e2,_0xf0df50);else{for(var _0x1f690b=_0x420957[_0x2f5349(0x211)]-0x1;_0x1f690b>=0x0;_0x1f690b--)if(_0x43569d=_0x420957[_0x1f690b])_0x5225aa=(_0x3f693b<0x3?_0x43569d(_0x5225aa):_0x3f693b>0x3?_0x43569d(_0x38e9ee,_0x56c9e2,_0x5225aa):_0x43569d(_0x38e9ee,_0x56c9e2))||_0x5225aa;}return _0x3f693b>0x3&&_0x5225aa&&Object[_0x2f5349(0x1f6)](_0x38e9ee,_0x56c9e2,_0x5225aa),_0x5225aa;},__importStar=this&&this[a126_0x59d5ac(0x1c3)]||function(_0x101786){const _0x29f4bc=a126_0x59d5ac;if(_0x101786&&_0x101786['__esModule'])return _0x101786;var _0x364c1d={};if(_0x101786!=null){for(var _0x79d2f5 in _0x101786)if(_0x79d2f5!==_0x29f4bc(0x1f4)&&Object[_0x29f4bc(0x1ff)][_0x29f4bc(0x1ab)][_0x29f4bc(0x1f2)](_0x101786,_0x79d2f5))__createBinding(_0x364c1d,_0x101786,_0x79d2f5);}return __setModuleDefault(_0x364c1d,_0x101786),_0x364c1d;},__metadata=this&&this[a126_0x59d5ac(0x1e4)]||function(_0x3f2762,_0x4a8126){const _0x519235=a126_0x59d5ac;if(typeof Reflect===_0x519235(0x1b8)&&typeof Reflect[_0x519235(0x23a)]===_0x519235(0x1d8))return Reflect['metadata'](_0x3f2762,_0x4a8126);},GitCommitJob_1;Object[a126_0x59d5ac(0x1f6)](exports,a126_0x59d5ac(0x1a8),{'value':!![]}),exports[a126_0x59d5ac(0x1c4)]=void 0x0;const core_1=require(a126_0x59d5ac(0x19a)),fs_internal_1=require(a126_0x59d5ac(0x1bf)),salesforce_logger_v3_service_1=require(a126_0x59d5ac(0x1b0)),utils_1=require('../../../shared/utils'),path_1=require(a126_0x59d5ac(0x197)),typedi_1=__importStar(require(a126_0x59d5ac(0x196))),constants_1=require(a126_0x59d5ac(0x195)),salesforce_commits_manager_service_1=require(a126_0x59d5ac(0x1d6)),git_utils_1=require(a126_0x59d5ac(0x1e5)),mdapi_utils_1=require(a126_0x59d5ac(0x18c)),api_error_1=require(a126_0x59d5ac(0x219)),salesforce_error_1=require(a126_0x59d5ac(0x204)),git_commit_service_1=require(a126_0x59d5ac(0x1a6)),flosum_commit_error_1=require('../errors/flosum-commit.error'),bitbucket_api_service_1=require(a126_0x59d5ac(0x22b)),git_provider_1=require(a126_0x59d5ac(0x23b)),sfdx_utils_1=require(a126_0x59d5ac(0x188)),utils_2=require('../../parsers/utils'),git_internal_1=require(a126_0x59d5ac(0x1c7)),providers_tokens_1=require('../../providers/providers.tokens'),connection_1=require('../utils/connection'),sf_logger_v3_types_1=require(a126_0x59d5ac(0x20c)),path_utils_1=require(a126_0x59d5ac(0x1cc)),commit_to_flosum_completed_notification_1=require('../../notifications/commit-to-flosum-completed.notification'),commit_to_flosum_error_notification_1=require(a126_0x59d5ac(0x1fb));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x1a08ce,_0xbecc3d){const _0x557390=a126_0x59d5ac;this['gitCommit']=_0x1a08ce,this['providersFactory']=_0xbecc3d,this[_0x557390(0x223)]=+(process[_0x557390(0x1a2)][_0x557390(0x223)]||0xbb8),this['logger']=new core_1[(_0x557390(0x1d2))](GitCommitJob_1[_0x557390(0x233)]),this['commitId']='',this[_0x557390(0x1e9)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a126_0x59d5ac(0x218)](){const _0x22ff33=a126_0x59d5ac,{repositoryGit:_0x15a3b1}=this[_0x22ff33(0x1de)],_0x3d92df=typedi_1[_0x22ff33(0x1f4)]['get'](providers_tokens_1[_0x22ff33(0x22c)]['credentials']);if(this[_0x22ff33(0x1de)][_0x22ff33(0x205)]===git_provider_1[_0x22ff33(0x1db)]['Bitbucket']){const _0x420de9=typedi_1[_0x22ff33(0x1f4)][_0x22ff33(0x1c6)](bitbucket_api_service_1[_0x22ff33(0x229)]);await _0x420de9[_0x22ff33(0x220)]();}return _0x15a3b1[_0x22ff33(0x222)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x22ff33(0x20d)])(_0x15a3b1)+'://'+_0x3d92df[_0x22ff33(0x1a7)]()+'@');}async[a126_0x59d5ac(0x191)](_0x160ba0,_0x162045,_0x4c02e0,_0x2c08f2){const _0x2f4e3c=a126_0x59d5ac;if(!this[_0x2f4e3c(0x221)][_0x2f4e3c(0x227)]){this[_0x2f4e3c(0x226)]['info'](_0x2f4e3c(0x1d7));return;}await new commit_to_flosum_completed_notification_1[(_0x2f4e3c(0x1b2))]({'emails':_0x160ba0,'gitProvider':_0x162045,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x2f4e3c(0x1b2)][_0x2f4e3c(0x233)],'repositoryName':_0x4c02e0,'branchName':_0x2c08f2})['execute']();}async[a126_0x59d5ac(0x209)](_0x5c33c6,_0xf436bc,_0x22a878,_0x1b02a3){const _0xb7e29a=a126_0x59d5ac;if(!this['config'][_0xb7e29a(0x227)]){this[_0xb7e29a(0x226)][_0xb7e29a(0x19c)](_0xb7e29a(0x1d7));return;}await new commit_to_flosum_error_notification_1[(_0xb7e29a(0x1c8))]({'emails':_0x5c33c6,'gitProvider':_0xf436bc,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1[_0xb7e29a(0x1c8)][_0xb7e29a(0x233)],'repositoryName':_0x22a878,'branchName':_0x1b02a3})[_0xb7e29a(0x1b4)]();}[a126_0x59d5ac(0x232)](){const _0x253394=a126_0x59d5ac;this[_0x253394(0x1e9)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a126_0x59d5ac(0x1ef)](){const _0x6fc5bd=a126_0x59d5ac,_0x43b8a1=[...this[_0x6fc5bd(0x1de)][_0x6fc5bd(0x1e6)]];this[_0x6fc5bd(0x1de)][_0x6fc5bd(0x1e6)]=[];for(const _0x2cbdf9 of _0x43b8a1){this[_0x6fc5bd(0x1de)]['fileNames']['push'](...await(0x0,utils_2[_0x6fc5bd(0x1e3)])(_0x2cbdf9,this[_0x6fc5bd(0x1df)][_0x6fc5bd(0x1c0)]));}}async[a126_0x59d5ac(0x1b3)](){const _0x4ca5dc=a126_0x59d5ac;if(this[_0x4ca5dc(0x1de)][_0x4ca5dc(0x18e)])return;const _0x1fbda4=[];for(const _0x389489 of this[_0x4ca5dc(0x1de)][_0x4ca5dc(0x237)]){const _0x46e3c8=await this[_0x4ca5dc(0x1eb)][_0x4ca5dc(0x1af)](_0x389489['id']);_0x389489[_0x4ca5dc(0x198)]=_0x46e3c8[_0x4ca5dc(0x1a4)],_0x389489[_0x4ca5dc(0x1e7)]=_0x46e3c8['message'],_0x389489[_0x4ca5dc(0x20f)]=_0x46e3c8[_0x4ca5dc(0x203)],_0x389489[_0x4ca5dc(0x1c2)]=_0x46e3c8[_0x4ca5dc(0x1c2)];if(_0x389489[_0x4ca5dc(0x1c2)]===constants_1['DEFAULT_GIT_USER_EMAIL'])throw new flosum_commit_error_1['FlosumCommitError']();_0x1fbda4[_0x4ca5dc(0x1e2)](...Object['values'](_0x389489[_0x4ca5dc(0x20f)])[_0x4ca5dc(0x23c)]());}this[_0x4ca5dc(0x1de)][_0x4ca5dc(0x1e6)]=[...new Set(path_utils_1[_0x4ca5dc(0x1a9)][_0x4ca5dc(0x194)](this['gitCommit']['recordType'],_0x1fbda4,![]))];}async[a126_0x59d5ac(0x214)](_0x1b66fd,_0x57666c,_0x3dd584){const _0x245463=a126_0x59d5ac,_0x5aa3ac=_0x3dd584[_0x245463(0x217)]((_0x1b3080,_0x25427b)=>{const _0x4425b2=_0x245463;return _0x1b3080[_0x4425b2(0x19f)][_0x4425b2(0x1e2)](..._0x25427b['inserted']),_0x1b3080[_0x4425b2(0x1d3)][_0x4425b2(0x1e2)](..._0x25427b[_0x4425b2(0x1d3)]),_0x1b3080[_0x4425b2(0x1d9)][_0x4425b2(0x1e2)](..._0x25427b['removed']),_0x1b3080;},{'inserted':[],'modified':[],'removed':[]}),_0x2ed713=new salesforce_commits_manager_service_1[(_0x245463(0x21c))]({'recordTypes':this[_0x245463(0x20b)][_0x245463(0x1c9)](),'branchId':this[_0x245463(0x20b)]['getBranchId'](),'repositoryId':this[_0x245463(0x20b)][_0x245463(0x1c1)](),'logger':this[_0x245463(0x18a)],'commitId':this[_0x245463(0x1a0)]});await _0x2ed713[_0x245463(0x1cf)]([{'author':_0x1b66fd,'message':_0x57666c,'inserted':_0x5aa3ac[_0x245463(0x19f)],'modified':_0x5aa3ac['modified'],'removed':_0x5aa3ac[_0x245463(0x1d9)]}]);}async[a126_0x59d5ac(0x1bc)](_0xbb25e7,_0x1c01e6){const _0xf904f=a126_0x59d5ac;await this[_0xf904f(0x18a)][_0xf904f(0x225)](this[_0xf904f(0x18b)]+_0xf904f(0x1b1))[_0xf904f(0x200)](),await this[_0xf904f(0x20b)][_0xf904f(0x187)](_0x1c01e6);const {added:_0x335f7d,modified:_0x243a04,removed:_0x241515}=_0xbb25e7['files'];_0x1c01e6&&_0x243a04[_0xf904f(0x1e2)](..._0x241515[_0xf904f(0x239)](0x0));const _0x3416dd=path_utils_1[_0xf904f(0x1a9)][_0xf904f(0x194)](this[_0xf904f(0x20b)][_0xf904f(0x1b6)],[..._0x335f7d,..._0x243a04,..._0x241515],_0x1c01e6&&!this[_0xf904f(0x1de)]['force']),_0x482860=(0x0,utils_2['convertToCleanPaths'])(_0x3416dd);let _0x144609=0x0;const _0x39268f=[];(_0x335f7d[_0xf904f(0x211)]||_0x243a04[_0xf904f(0x211)])&&this[_0xf904f(0x20b)]['getRepositoryId']()&&(this[_0xf904f(0x1a0)]=await this[_0xf904f(0x20b)][_0xf904f(0x1ba)](_0xbb25e7[_0xf904f(0x1e7)]));const _0x3cf455=_0x482860[_0xf904f(0x211)];let _0x2e5010=0x0;while(_0x482860[_0xf904f(0x211)]){const _0x1caf52=_0x482860[_0xf904f(0x20e)](),_0x178af7=await this[_0xf904f(0x20b)][_0xf904f(0x1f8)](_0x1caf52,this[_0xf904f(0x1df)][_0xf904f(0x1c0)],_0x1c01e6&&!this[_0xf904f(0x1de)][_0xf904f(0x18e)]);_0x144609+=_0x178af7['inserted']['length']+_0x178af7['removed'][_0xf904f(0x211)]+_0x178af7[_0xf904f(0x1d3)]['length'],this['stats'][_0xf904f(0x1f9)]+=_0x178af7[_0xf904f(0x19f)]['length'],this[_0xf904f(0x1e9)][_0xf904f(0x1d3)]+=_0x178af7[_0xf904f(0x1d3)][_0xf904f(0x211)],this[_0xf904f(0x1e9)][_0xf904f(0x1d9)]+=_0x178af7[_0xf904f(0x1d9)][_0xf904f(0x211)],_0x2e5010++,_0x2e5010%0x64===0x0&&this[_0xf904f(0x226)][_0xf904f(0x225)](_0xf904f(0x228),_0x2e5010,_0x3cf455,_0x144609),_0x39268f[_0xf904f(0x1e2)](_0x178af7),_0x144609>this[_0xf904f(0x223)]&&(await this[_0xf904f(0x214)](_0xbb25e7[_0xf904f(0x198)],_0xbb25e7['message'],_0x39268f),await this[_0xf904f(0x18a)][_0xf904f(0x225)](this[_0xf904f(0x18b)]+'\x20Processed\x20'+_0x144609+_0xf904f(0x202))[_0xf904f(0x200)](),_0x144609=0x0,_0x39268f[_0xf904f(0x239)](0x0));}_0x39268f[_0xf904f(0x211)]&&(await this[_0xf904f(0x214)](_0xbb25e7['username'],_0xbb25e7[_0xf904f(0x1e7)],_0x39268f),await this[_0xf904f(0x18a)]['log'](this[_0xf904f(0x18b)]+_0xf904f(0x216)+_0x144609+_0xf904f(0x202))[_0xf904f(0x200)]());}async['proceedCommits'](_0x55feef){const _0x531321=a126_0x59d5ac,_0x491e31=[...this[_0x531321(0x1de)][_0x531321(0x237)]],_0x353fdd=_0x491e31[_0x531321(0x211)];let _0x4be5ab=0x0;while(_0x491e31[_0x531321(0x211)]){const _0x1a6f73=_0x491e31[_0x531321(0x20e)]();!this[_0x531321(0x1de)][_0x531321(0x18e)]&&(this['gitCommit'][_0x531321(0x1c1)]()?(await this[_0x531321(0x1eb)][_0x531321(0x1e1)](_0x1a6f73['id']),await this[_0x531321(0x1df)][_0x531321(0x207)](this[_0x531321(0x1eb)][_0x531321(0x1c0)])):(await this['gitUtils']['checkoutTo'](this[_0x531321(0x1bb)]),await this[_0x531321(0x1df)]['prepareMdapi'](this[_0x531321(0x1eb)][_0x531321(0x1c0)]))),await this[_0x531321(0x1bc)](_0x1a6f73,_0x55feef),await this['mdapiUtils'][_0x531321(0x212)](),_0x4be5ab+=0x1,await this[_0x531321(0x18a)]['log'](this[_0x531321(0x18b)]+_0x531321(0x22a)),await this[_0x531321(0x18a)][_0x531321(0x225)](this[_0x531321(0x18b)]+'\x20Added\x20'+this[_0x531321(0x1e9)][_0x531321(0x1f9)]+_0x531321(0x22d)),await this[_0x531321(0x18a)][_0x531321(0x225)](this[_0x531321(0x18b)]+_0x531321(0x21e)+this['stats'][_0x531321(0x1d3)]+_0x531321(0x22d)),await this[_0x531321(0x18a)][_0x531321(0x225)](this[_0x531321(0x18b)]+_0x531321(0x1ca)+this[_0x531321(0x1e9)]['removed']+'\x20components'),await this[_0x531321(0x18a)][_0x531321(0x225)](this['prefix']+_0x531321(0x1dc)+_0x4be5ab+'/'+_0x353fdd+_0x531321(0x19b))[_0x531321(0x200)](),this['resetStats']();}}async['cleanUp'](){const _0x2e55fd=a126_0x59d5ac;this['gitUtils']&&await this[_0x2e55fd(0x1eb)]['removeDir']()[_0x2e55fd(0x215)](()=>void 0x0),this[_0x2e55fd(0x1df)]&&await this[_0x2e55fd(0x1df)][_0x2e55fd(0x212)]()[_0x2e55fd(0x215)](()=>void 0x0);}async[a126_0x59d5ac(0x1b9)](_0x2ad357){const _0x1a42d8=a126_0x59d5ac;this[_0x1a42d8(0x1de)]=_0x2ad357,this[_0x1a42d8(0x20b)][_0x1a42d8(0x23e)](this[_0x1a42d8(0x1de)]),this[_0x1a42d8(0x1b7)]=typedi_1[_0x1a42d8(0x1f4)][_0x1a42d8(0x1c6)](providers_tokens_1['Tokens'][_0x1a42d8(0x1b7)]),this[_0x1a42d8(0x221)]=typedi_1[_0x1a42d8(0x1f4)][_0x1a42d8(0x1c6)](providers_tokens_1[_0x1a42d8(0x22c)]['config']),this[_0x1a42d8(0x18a)]=typedi_1[_0x1a42d8(0x1f4)][_0x1a42d8(0x1c6)](providers_tokens_1[_0x1a42d8(0x22c)]['logger']),this[_0x1a42d8(0x18b)]=_0x1a42d8(0x22f)+_0x2ad357[_0x1a42d8(0x230)]+']\x20[Branch:\x20'+_0x2ad357[_0x1a42d8(0x201)]+']\x20['+GitCommitJob_1['name']+']',this['gitUtils']=new git_utils_1[(_0x1a42d8(0x1dd))](await this[_0x1a42d8(0x218)]()),this[_0x1a42d8(0x1df)]=new mdapi_utils_1[(_0x1a42d8(0x234))](),this[_0x1a42d8(0x18a)][_0x1a42d8(0x225)](this[_0x1a42d8(0x18b)]+_0x1a42d8(0x1d1));try{this[_0x1a42d8(0x18a)][_0x1a42d8(0x225)](this[_0x1a42d8(0x18b)]+'\x20Fetch\x20salesforce\x20data.'),await this[_0x1a42d8(0x20b)][_0x1a42d8(0x1ed)](),await this[_0x1a42d8(0x20b)][_0x1a42d8(0x1c5)](_0x1a42d8(0x21d)),this[_0x1a42d8(0x18a)][_0x1a42d8(0x225)](this[_0x1a42d8(0x18b)]+_0x1a42d8(0x1d5)),this[_0x1a42d8(0x1bb)]=await git_internal_1[_0x1a42d8(0x1d0)][_0x1a42d8(0x1d4)](await this['getRemote'](),this['gitCommitData'][_0x1a42d8(0x201)]),this[_0x1a42d8(0x226)][_0x1a42d8(0x225)]('Last\x20git\x20repository\x20hash\x20is\x20%s.',this[_0x1a42d8(0x1bb)]);const _0xbd7353=await this[_0x1a42d8(0x20b)][_0x1a42d8(0x1a1)](this[_0x1a42d8(0x1bb)]);if(_0xbd7353){this['sfLogger']['log'](_0x1a42d8(0x1a5)),await this[_0x1a42d8(0x20b)]['updateStatus'](_0x1a42d8(0x189));return;}this[_0x1a42d8(0x18a)][_0x1a42d8(0x225)](this[_0x1a42d8(0x18b)]+'\x20Cloning\x20git\x20repository\x20from\x20'+this[_0x1a42d8(0x1de)][_0x1a42d8(0x18d)]+'.'),await this['gitUtils']['clone'](this[_0x1a42d8(0x1de)][_0x1a42d8(0x201)],this['gitCommitData'][_0x1a42d8(0x230)]),this[_0x1a42d8(0x18a)]['log'](this['prefix']+_0x1a42d8(0x1ad));const _0x2dec81=await sfdx_utils_1[_0x1a42d8(0x1b5)][_0x1a42d8(0x1ac)](this['gitUtils'][_0x1a42d8(0x1c0)]);await this[_0x1a42d8(0x1b3)]();!this['sfLogger'][_0x1a42d8(0x1ec)]()&&this[_0x1a42d8(0x18a)][_0x1a42d8(0x238)](await salesforce_logger_v3_service_1[_0x1a42d8(0x18f)]['createLoggerId'](sf_logger_v3_types_1[_0x1a42d8(0x224)][_0x1a42d8(0x1bd)]));await this[_0x1a42d8(0x18a)][_0x1a42d8(0x200)]();if(_0x2ad357[_0x1a42d8(0x18e)]){await this[_0x1a42d8(0x1df)]['prepareMdapi'](this['gitUtils'][_0x1a42d8(0x1c0)]),await this[_0x1a42d8(0x18a)]['log'](this['prefix']+_0x1a42d8(0x231))['send']();const _0x1a9d63=(await fs_internal_1['FS'][_0x1a42d8(0x1f5)](this[_0x1a42d8(0x1df)][_0x1a42d8(0x1c0)],!![]))['map'](_0x478dac=>(0x0,path_1[_0x1a42d8(0x19d)])(this[_0x1a42d8(0x1df)][_0x1a42d8(0x1c0)],_0x478dac));this[_0x1a42d8(0x18a)][_0x1a42d8(0x225)](this[_0x1a42d8(0x18b)]+'\x20Force\x20commit.\x20Have\x20to\x20parse\x20'+_0x1a9d63[_0x1a42d8(0x211)]+_0x1a42d8(0x21f)),this['gitCommitData']['fileNames']=[],this[_0x1a42d8(0x1de)]['commits']=[{'files':{'modified':_0x1a9d63,'added':[],'removed':[]},'id':await this[_0x1a42d8(0x1eb)][_0x1a42d8(0x1ce)](),'message':_0x1a42d8(0x206),'username':constants_1[_0x1a42d8(0x1be)]}];}await this[_0x1a42d8(0x20b)][_0x1a42d8(0x1fe)]({[this[_0x1a42d8(0x1de)]['repositoryGit']]:{'lastCommit':this[_0x1a42d8(0x1bb)]}}),await this['sfLogger']['log'](this[_0x1a42d8(0x18b)]+'\x20[SFDX:\x20'+(_0x2dec81?'YES':'NO')+_0x1a42d8(0x1e8))[_0x1a42d8(0x200)](),await this[_0x1a42d8(0x1cf)](_0x2dec81),await this['sfLogger']['log'](this['prefix']+_0x1a42d8(0x235))[_0x1a42d8(0x200)](),await this[_0x1a42d8(0x20b)][_0x1a42d8(0x1c5)](_0x1a42d8(0x189)),await this[_0x1a42d8(0x191)]([_0x2ad357['email']],this['config']['gitProvider'],_0x2ad357['repository'],_0x2ad357[_0x1a42d8(0x201)]);}catch(_0x4fa884){await this[_0x1a42d8(0x1f3)]();if(_0x4fa884 instanceof flosum_commit_error_1[_0x1a42d8(0x208)])await this['gitCommit']['updateStatus']('Completed')['catch'](()=>void 0x0),this[_0x1a42d8(0x226)][_0x1a42d8(0x225)](this[_0x1a42d8(0x18b)]+'\x20Git\x20commits\x20not\x20have\x20a\x20changes.');else{await this[_0x1a42d8(0x226)][_0x1a42d8(0x210)](this['prefix']+_0x1a42d8(0x23f)+(_0x4fa884 instanceof api_error_1[_0x1a42d8(0x236)]||_0x4fa884 instanceof salesforce_error_1[_0x1a42d8(0x20a)]?_0x4fa884[_0x1a42d8(0x190)]():_0x4fa884)),await this[_0x1a42d8(0x20b)]['updateRemoteState']({}),await this[_0x1a42d8(0x20b)][_0x1a42d8(0x1c5)](_0x1a42d8(0x199))[_0x1a42d8(0x215)](()=>void 0x0),await this[_0x1a42d8(0x209)]([_0x2ad357[_0x1a42d8(0x1c2)]],this[_0x1a42d8(0x221)][_0x1a42d8(0x1a3)],_0x2ad357[_0x1a42d8(0x230)],_0x2ad357[_0x1a42d8(0x201)]);throw _0x4fa884;}}finally{await this[_0x1a42d8(0x1f3)](),await this[_0x1a42d8(0x18a)][_0x1a42d8(0x200)]()[_0x1a42d8(0x215)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a126_0x59d5ac(0x22e)])({'transient':!![]}),__metadata(a126_0x59d5ac(0x19e),[git_commit_service_1[a126_0x59d5ac(0x192)],connection_1['ProvidersFactory']])],GitCommitJob),exports[a126_0x59d5ac(0x1c4)]=GitCommitJob;