const a107_0x34ee70=a107_0x280a;(function(_0x2527fc,_0x8f006c){const _0x30fdab=a107_0x280a,_0x305773=_0x2527fc();while(!![]){try{const _0x51ff95=-parseInt(_0x30fdab(0x150))/0x1*(-parseInt(_0x30fdab(0x194))/0x2)+-parseInt(_0x30fdab(0x136))/0x3+-parseInt(_0x30fdab(0x19b))/0x4+parseInt(_0x30fdab(0x13a))/0x5+-parseInt(_0x30fdab(0x19a))/0x6+parseInt(_0x30fdab(0x164))/0x7+parseInt(_0x30fdab(0x167))/0x8*(parseInt(_0x30fdab(0x12c))/0x9);if(_0x51ff95===_0x8f006c)break;else _0x305773['push'](_0x305773['shift']());}catch(_0x1b0779){_0x305773['push'](_0x305773['shift']());}}}(a107_0x89bf,0x27ed9));function a107_0x89bf(){const _0x56db93=['../utils/git.utils','commitId','SalesforceLogger3','call','\x20Job\x20done.','gitApiService','Tokens','defineProperty','(((.+)+)+)+$','lastCommitHash','2177KhLiin','modified','\x20Fetch\x20salesforce\x20data.','../../../../constants','map','sync\x20components','__setModuleDefault','DEFAULT_GIT_USER_NAME','added','stats','flat','../../../../core/errors/api.error','../utils/connection','force','__importStar','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20','fetchComponentsMetadata','run','repository','Completed','234626LcxZwG','BitbucketApiService','branch','2736SMetfo','://','gitUtils','Last\x20git\x20repository\x20hash\x20is\x20%s.','object','GitCommitService','author','../../salesforce/types/sf-logger-v3-types','__decorate','\x20Download\x20components\x20metadata\x20from\x20Flosum.','message','checkSyncStatus','getRemote','error','proceedFile','\x20components','\x20Git\x20commits\x20not\x20have\x20a\x20changes.','MAX_COMPONENTS_PER_TICK','DEFAULT_GIT_USER_EMAIL','../../parsers/utils','sfLogger','prepareMdapi','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','SFDX','dir','updateStatus','config','cleanUp','shift','inserted','../../providers/providers.tokens','repositoryGit','email',']\x20[','\x20components.','writable','checkoutTo','\x20Start\x20Git-commit\x20job.','metadata',']\x20[Branch:\x20','function','../../internal/fs.internal','reduce','mdapiUtils','../services/git-commit.service','58EVGRld','prefix','gitCommitData','send','logger','getGitShellAuthorizationString','1062372VMxdkb','555860OPYbZI','createLoggerId','prepareGitChangedPaths','../../salesforce/utils/sfdx.utils','MDApiUtils','typedi','clone','ApiError','commit','__metadata','replace','isSFDXProject','files','\x20Processed\x20','__esModule','getRemoteHash','fileNames','\x20Removed\x20','\x20commits.','\x20[SFDX:\x20','In\x20Progress','catch','FlosumCommitError','username','Logger','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','toString','gitCommit','convertToCleanPaths','hasOwnProperty','getRecordTypes','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)',']\x20Start\x20proceeding\x20git\x20commits.\x20','../../providers/api/bitbucket-api.service','YES','Bitbucket','default','getRepositoryId','getOwnPropertyDescriptor','../../../shared/utils','log','resetStats','../../internal/git.internal','\x20Commit\x20Summary','removed','setLoggerId','apply','decorate','get','\x20Added\x20','../../salesforce/errors/salesforce.error','proceedCommits','LoggerTypes','GitCommitJob','removeDir','search','getLoggerId','getBranchId','ProvidersFactory','../errors/flosum-commit.error','\x20Cloning\x20git\x20repository\x20from\x20','9207XFDGDC','length','fetchCommits','\x20files\x20before\x20sync.','design:paramtypes','fetchRepositoryOrBranchData','../../salesforce/services/salesforce-logger-v3.service','handleCommit','values','updateFileNamesForSFDXProject','283413IbftVr','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','changes','sendComponents','637630WpQcdY','\x20Modified\x20','provider','splice','push','Branch\x20synchronized.\x20Skip.','commits','Service','updateRemoteState','isLoggedIn','create','\x20Proceeded\x20'];a107_0x89bf=function(){return _0x56db93;};return a107_0x89bf();}const a107_0x1b7d83=(function(){let _0x3f89d0=!![];return function(_0x46f451,_0x3fc2f8){const _0x50e836=_0x3f89d0?function(){const _0x405673=a107_0x280a;if(_0x3fc2f8){const _0x4f29f8=_0x3fc2f8[_0x405673(0x11d)](_0x46f451,arguments);return _0x3fc2f8=null,_0x4f29f8;}}:function(){};return _0x3f89d0=![],_0x50e836;};}()),a107_0x572211=a107_0x1b7d83(this,function(){const _0x54ad8c=a107_0x280a;return a107_0x572211['toString']()[_0x54ad8c(0x126)]('(((.+)+)+)+$')[_0x54ad8c(0x1b5)]()['constructor'](a107_0x572211)['search'](_0x54ad8c(0x14e));});a107_0x572211();function a107_0x280a(_0x36dcfb,_0x4d019e){const _0x15d096=a107_0x89bf();return a107_0x280a=function(_0x572211,_0x1b7d83){_0x572211=_0x572211-0x11c;let _0x89bf10=_0x15d096[_0x572211];return _0x89bf10;},a107_0x280a(_0x36dcfb,_0x4d019e);}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a107_0x34ee70(0x144)]?function(_0x16c579,_0x3c3f43,_0x474927,_0xf081f1){const _0x17225f=a107_0x34ee70;if(_0xf081f1===undefined)_0xf081f1=_0x474927;var _0x2c9fa9=Object[_0x17225f(0x1c1)](_0x3c3f43,_0x474927);(!_0x2c9fa9||(_0x17225f(0x11f)in _0x2c9fa9?!_0x3c3f43[_0x17225f(0x1a9)]:_0x2c9fa9[_0x17225f(0x18a)]||_0x2c9fa9['configurable']))&&(_0x2c9fa9={'enumerable':!![],'get':function(){return _0x3c3f43[_0x474927];}}),Object['defineProperty'](_0x16c579,_0xf081f1,_0x2c9fa9);}:function(_0x281d6a,_0xe92d25,_0x58c159,_0x2de82b){if(_0x2de82b===undefined)_0x2de82b=_0x58c159;_0x281d6a[_0x2de82b]=_0xe92d25[_0x58c159];}),__setModuleDefault=this&&this[a107_0x34ee70(0x156)]||(Object['create']?function(_0xe0bba0,_0x565c7b){Object['defineProperty'](_0xe0bba0,'default',{'enumerable':!![],'value':_0x565c7b});}:function(_0x298b21,_0x5b4d93){const _0x4c1133=a107_0x34ee70;_0x298b21[_0x4c1133(0x1bf)]=_0x5b4d93;}),__decorate=this&&this[a107_0x34ee70(0x16f)]||function(_0x437a5a,_0x40b877,_0x29e231,_0x4a27cc){const _0x248db0=a107_0x34ee70;var _0x186fcc=arguments['length'],_0x2794dd=_0x186fcc<0x3?_0x40b877:_0x4a27cc===null?_0x4a27cc=Object[_0x248db0(0x1c1)](_0x40b877,_0x29e231):_0x4a27cc,_0x4f67f9;if(typeof Reflect===_0x248db0(0x16b)&&typeof Reflect[_0x248db0(0x11e)]===_0x248db0(0x18f))_0x2794dd=Reflect['decorate'](_0x437a5a,_0x40b877,_0x29e231,_0x4a27cc);else{for(var _0x48e174=_0x437a5a[_0x248db0(0x12d)]-0x1;_0x48e174>=0x0;_0x48e174--)if(_0x4f67f9=_0x437a5a[_0x48e174])_0x2794dd=(_0x186fcc<0x3?_0x4f67f9(_0x2794dd):_0x186fcc>0x3?_0x4f67f9(_0x40b877,_0x29e231,_0x2794dd):_0x4f67f9(_0x40b877,_0x29e231))||_0x2794dd;}return _0x186fcc>0x3&&_0x2794dd&&Object[_0x248db0(0x14d)](_0x40b877,_0x29e231,_0x2794dd),_0x2794dd;},__importStar=this&&this[a107_0x34ee70(0x15e)]||function(_0x2c37c3){const _0x4544be=a107_0x34ee70;if(_0x2c37c3&&_0x2c37c3['__esModule'])return _0x2c37c3;var _0x419fc6={};if(_0x2c37c3!=null){for(var _0x478d89 in _0x2c37c3)if(_0x478d89!==_0x4544be(0x1bf)&&Object['prototype'][_0x4544be(0x1b8)][_0x4544be(0x149)](_0x2c37c3,_0x478d89))__createBinding(_0x419fc6,_0x2c37c3,_0x478d89);}return __setModuleDefault(_0x419fc6,_0x2c37c3),_0x419fc6;},__metadata=this&&this[a107_0x34ee70(0x1a4)]||function(_0x5d4375,_0x2e192c){const _0xab0c13=a107_0x34ee70;if(typeof Reflect===_0xab0c13(0x16b)&&typeof Reflect['metadata']===_0xab0c13(0x18f))return Reflect[_0xab0c13(0x18d)](_0x5d4375,_0x2e192c);},GitCommitJob_1;Object['defineProperty'](exports,a107_0x34ee70(0x1a9),{'value':!![]}),exports['GitCommitJob']=void 0x0;const core_1=require('../../../../core'),fs_internal_1=require(a107_0x34ee70(0x190)),salesforce_logger_v3_service_1=require(a107_0x34ee70(0x132)),utils_1=require(a107_0x34ee70(0x1c2)),path_1=require('path'),typedi_1=__importStar(require(a107_0x34ee70(0x1a0))),constants_1=require(a107_0x34ee70(0x153)),salesforce_commits_manager_service_1=require('../../salesforce/services/salesforce-commits-manager.service'),git_commit_utils_1=require('../utils/git-commit.utils'),git_utils_1=require(a107_0x34ee70(0x146)),mdapi_utils_1=require('../utils/mdapi.utils'),api_error_1=require(a107_0x34ee70(0x15b)),salesforce_error_1=require(a107_0x34ee70(0x121)),git_commit_service_1=require(a107_0x34ee70(0x193)),flosum_commit_error_1=require(a107_0x34ee70(0x12a)),bitbucket_api_service_1=require(a107_0x34ee70(0x1bc)),git_provider_1=require('../../providers/types/git-provider'),sfdx_utils_1=require(a107_0x34ee70(0x19e)),utils_2=require(a107_0x34ee70(0x17a)),git_internal_1=require(a107_0x34ee70(0x1c5)),providers_tokens_1=require(a107_0x34ee70(0x185)),connection_1=require(a107_0x34ee70(0x15c)),sf_logger_v3_types_1=require(a107_0x34ee70(0x16e));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0x275a39,_0xf3e77){const _0x473304=a107_0x34ee70;this[_0x473304(0x1b6)]=_0x275a39,this['providersFactory']=_0xf3e77,this['MAX_COMPONENTS_PER_TICK']=+(process['env']['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x473304(0x198)]=new core_1[(_0x473304(0x1b3))](GitCommitJob_1['name']),this[_0x473304(0x147)]='',this[_0x473304(0x159)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a107_0x34ee70(0x173)](){const _0x125315=a107_0x34ee70,{repositoryGit:_0x32c985}=this[_0x125315(0x196)],_0x19fb14=typedi_1[_0x125315(0x1bf)][_0x125315(0x11f)](providers_tokens_1[_0x125315(0x14c)]['credentials']);if(this[_0x125315(0x196)][_0x125315(0x13c)]===git_provider_1['GitProvider'][_0x125315(0x1be)]){const _0x5a780c=typedi_1[_0x125315(0x1bf)][_0x125315(0x11f)](bitbucket_api_service_1[_0x125315(0x165)]);await _0x5a780c[_0x125315(0x143)]();}return _0x32c985[_0x125315(0x1a5)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x32c985)+_0x125315(0x168)+_0x19fb14[_0x125315(0x199)]()+'@');}[a107_0x34ee70(0x1c4)](){const _0x23b4f3=a107_0x34ee70;this[_0x23b4f3(0x159)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a107_0x34ee70(0x135)](){const _0xbf1401=a107_0x34ee70,_0x292ff2=[...this['gitCommitData'][_0xbf1401(0x1ab)]];this[_0xbf1401(0x196)][_0xbf1401(0x1ab)]=[];for(const _0x2bf764 of _0x292ff2){this[_0xbf1401(0x196)]['fileNames'][_0xbf1401(0x13e)](...await(0x0,utils_2['readFilesByFilename'])(_0x2bf764,this[_0xbf1401(0x192)][_0xbf1401(0x17f)]));}}async[a107_0x34ee70(0x12e)](){const _0x2df3ce=a107_0x34ee70;if(this[_0x2df3ce(0x196)]['force'])return;const _0x388669=[];for(const _0x57d886 of this[_0x2df3ce(0x196)]['commits']){const _0x402013=await this[_0x2df3ce(0x169)]['describeCommit'](_0x57d886['id']);_0x57d886['username']=_0x402013[_0x2df3ce(0x16d)],_0x57d886[_0x2df3ce(0x171)]=_0x402013[_0x2df3ce(0x171)],_0x57d886[_0x2df3ce(0x1a7)]=_0x402013[_0x2df3ce(0x138)],_0x57d886[_0x2df3ce(0x187)]=_0x402013[_0x2df3ce(0x187)];if(_0x57d886[_0x2df3ce(0x187)]===constants_1[_0x2df3ce(0x179)])throw new flosum_commit_error_1[(_0x2df3ce(0x1b1))]();_0x388669['push'](...Object[_0x2df3ce(0x134)](_0x57d886['files'])[_0x2df3ce(0x15a)]());}this[_0x2df3ce(0x196)][_0x2df3ce(0x1ab)]=[...new Set((0x0,git_commit_utils_1['prepareGitChangedPaths'])(_0x388669))];}async[a107_0x34ee70(0x139)](_0x365c7c,_0x14fbac,_0x4f75b2){const _0x483f44=a107_0x34ee70,_0x35c0b1=_0x4f75b2[_0x483f44(0x191)]((_0x1d2323,_0x3dbe39)=>{const _0x5cb6dc=_0x483f44;return _0x1d2323[_0x5cb6dc(0x184)][_0x5cb6dc(0x13e)](..._0x3dbe39[_0x5cb6dc(0x184)]),_0x1d2323[_0x5cb6dc(0x151)][_0x5cb6dc(0x13e)](..._0x3dbe39['modified']),_0x1d2323[_0x5cb6dc(0x1c7)]['push'](..._0x3dbe39['removed']),_0x1d2323;},{'inserted':[],'modified':[],'removed':[]}),_0x3013f6=new salesforce_commits_manager_service_1['SalesforceCommitsManager']({'recordTypes':this['gitCommit'][_0x483f44(0x1b9)](),'branchId':this[_0x483f44(0x1b6)][_0x483f44(0x128)](),'repositoryId':this['gitCommit'][_0x483f44(0x1c0)](),'logger':this['sfLogger'],'commitId':this['commitId']});await _0x3013f6[_0x483f44(0x122)]([{'author':_0x365c7c,'message':_0x14fbac,'inserted':_0x35c0b1[_0x483f44(0x184)],'modified':_0x35c0b1[_0x483f44(0x151)],'removed':_0x35c0b1['removed']}]);}async[a107_0x34ee70(0x133)](_0x35e4bd,_0x4438bf){const _0x250268=a107_0x34ee70;await this[_0x250268(0x17b)][_0x250268(0x1c3)](this[_0x250268(0x195)]+_0x250268(0x170))[_0x250268(0x197)](),await this['gitCommit'][_0x250268(0x160)](_0x4438bf);const {added:_0x13d7b1,modified:_0x425eef,removed:_0x1deff6}=_0x35e4bd[_0x250268(0x1a7)];_0x4438bf&&_0x425eef[_0x250268(0x13e)](..._0x1deff6[_0x250268(0x13d)](0x0));const _0x5f061f=(0x0,utils_2[_0x250268(0x1b7)])((0x0,git_commit_utils_1[_0x250268(0x19d)])([..._0x13d7b1,..._0x425eef,..._0x1deff6],_0x4438bf&&!this['gitCommitData'][_0x250268(0x15d)]));let _0x7d70a4=0x0;const _0x141684=[];(_0x13d7b1[_0x250268(0x12d)]||_0x425eef[_0x250268(0x12d)])&&this[_0x250268(0x1b6)]['getRepositoryId']()&&(this[_0x250268(0x147)]=await this['gitCommit']['createCommit'](_0x35e4bd['message']));const _0x54a0a8=_0x5f061f['length'];let _0x50199b=0x0;while(_0x5f061f[_0x250268(0x12d)]){const _0x511f29=_0x5f061f['shift'](),_0x9b8047=await this['gitCommit'][_0x250268(0x175)](_0x511f29,this['mdapiUtils'][_0x250268(0x17f)],_0x4438bf&&!this[_0x250268(0x196)][_0x250268(0x15d)]);_0x7d70a4+=_0x9b8047[_0x250268(0x184)][_0x250268(0x12d)]+_0x9b8047['removed'][_0x250268(0x12d)]+_0x9b8047[_0x250268(0x151)][_0x250268(0x12d)],this[_0x250268(0x159)][_0x250268(0x158)]+=_0x9b8047['inserted'][_0x250268(0x12d)],this[_0x250268(0x159)]['modified']+=_0x9b8047['modified'][_0x250268(0x12d)],this['stats'][_0x250268(0x1c7)]+=_0x9b8047[_0x250268(0x1c7)][_0x250268(0x12d)],_0x50199b++,_0x50199b%0x64===0x0&&this[_0x250268(0x198)][_0x250268(0x1c3)](_0x250268(0x1ba),_0x50199b,_0x54a0a8,_0x7d70a4),_0x141684[_0x250268(0x13e)](_0x9b8047),_0x7d70a4>this[_0x250268(0x178)]&&(await this[_0x250268(0x139)](_0x35e4bd[_0x250268(0x1b2)],_0x35e4bd['message'],_0x141684),await this[_0x250268(0x17b)][_0x250268(0x1c3)](this[_0x250268(0x195)]+_0x250268(0x1a8)+_0x7d70a4+_0x250268(0x189))['send'](),_0x7d70a4=0x0,_0x141684[_0x250268(0x13d)](0x0));}_0x141684['length']&&(await this[_0x250268(0x139)](_0x35e4bd['username'],_0x35e4bd[_0x250268(0x171)],_0x141684),await this[_0x250268(0x17b)][_0x250268(0x1c3)](this[_0x250268(0x195)]+_0x250268(0x1a8)+_0x7d70a4+_0x250268(0x189))[_0x250268(0x197)]());}async['proceedCommits'](_0x7fabb6){const _0x18b59d=a107_0x34ee70,_0x1b6ca7=[...this[_0x18b59d(0x196)]['commits']],_0x25ce06=_0x1b6ca7[_0x18b59d(0x12d)];let _0x4ce3eb=0x0;while(_0x1b6ca7[_0x18b59d(0x12d)]){const _0x43e4d7=_0x1b6ca7[_0x18b59d(0x183)]();!this[_0x18b59d(0x196)][_0x18b59d(0x15d)]&&(this[_0x18b59d(0x1b6)]['getRepositoryId']()?(await this['gitUtils'][_0x18b59d(0x18b)](_0x43e4d7['id']),await this['mdapiUtils'][_0x18b59d(0x17c)](this['gitUtils'][_0x18b59d(0x17f)])):(await this['gitUtils']['checkoutTo'](this[_0x18b59d(0x14f)]),await this[_0x18b59d(0x192)]['prepareMdapi'](this['gitUtils'][_0x18b59d(0x17f)]))),await this['handleCommit'](_0x43e4d7,_0x7fabb6),await this[_0x18b59d(0x192)][_0x18b59d(0x125)](),_0x4ce3eb+=0x1,await this[_0x18b59d(0x17b)]['log'](this[_0x18b59d(0x195)]+_0x18b59d(0x1c6)),await this['sfLogger'][_0x18b59d(0x1c3)](this[_0x18b59d(0x195)]+_0x18b59d(0x120)+this[_0x18b59d(0x159)][_0x18b59d(0x158)]+'\x20components'),await this[_0x18b59d(0x17b)][_0x18b59d(0x1c3)](this[_0x18b59d(0x195)]+_0x18b59d(0x13b)+this[_0x18b59d(0x159)][_0x18b59d(0x151)]+_0x18b59d(0x176)),await this[_0x18b59d(0x17b)][_0x18b59d(0x1c3)](this[_0x18b59d(0x195)]+_0x18b59d(0x1ac)+this[_0x18b59d(0x159)]['removed']+_0x18b59d(0x176)),await this[_0x18b59d(0x17b)][_0x18b59d(0x1c3)](this[_0x18b59d(0x195)]+_0x18b59d(0x145)+_0x4ce3eb+'/'+_0x25ce06+_0x18b59d(0x1ad))[_0x18b59d(0x197)](),this[_0x18b59d(0x1c4)]();}}async[a107_0x34ee70(0x182)](){const _0xc7e569=a107_0x34ee70;this[_0xc7e569(0x169)]&&await this['gitUtils'][_0xc7e569(0x125)]()[_0xc7e569(0x1b0)](()=>void 0x0),this['mdapiUtils']&&await this[_0xc7e569(0x192)][_0xc7e569(0x125)]()[_0xc7e569(0x1b0)](()=>void 0x0);}async[a107_0x34ee70(0x161)](_0x7e3d06){const _0x2e70ae=a107_0x34ee70;this[_0x2e70ae(0x196)]=_0x7e3d06,this[_0x2e70ae(0x1b6)]['setCommitDto'](this['gitCommitData']),this[_0x2e70ae(0x14b)]=typedi_1[_0x2e70ae(0x1bf)][_0x2e70ae(0x11f)](providers_tokens_1[_0x2e70ae(0x14c)][_0x2e70ae(0x14b)]),this[_0x2e70ae(0x181)]=typedi_1[_0x2e70ae(0x1bf)]['get'](providers_tokens_1[_0x2e70ae(0x14c)]['config']),this['sfLogger']=typedi_1[_0x2e70ae(0x1bf)][_0x2e70ae(0x11f)](providers_tokens_1['Tokens'][_0x2e70ae(0x198)]),this[_0x2e70ae(0x195)]=_0x2e70ae(0x15f)+_0x7e3d06[_0x2e70ae(0x162)]+_0x2e70ae(0x18e)+_0x7e3d06[_0x2e70ae(0x166)]+_0x2e70ae(0x188)+GitCommitJob_1['name']+']',this[_0x2e70ae(0x169)]=new git_utils_1['GitUtils'](await this[_0x2e70ae(0x173)]()),this[_0x2e70ae(0x192)]=new mdapi_utils_1[(_0x2e70ae(0x19f))](),this['sfLogger'][_0x2e70ae(0x1c3)](this['prefix']+_0x2e70ae(0x18c));try{this[_0x2e70ae(0x17b)][_0x2e70ae(0x1c3)](this['prefix']+_0x2e70ae(0x152)),await this[_0x2e70ae(0x1b6)][_0x2e70ae(0x131)](),await this[_0x2e70ae(0x1b6)][_0x2e70ae(0x180)](_0x2e70ae(0x1af)),this[_0x2e70ae(0x17b)]['log'](this[_0x2e70ae(0x195)]+'\x20Fetch\x20remote\x20branch\x20hash.'),this[_0x2e70ae(0x14f)]=await git_internal_1['Git'][_0x2e70ae(0x1aa)](await this[_0x2e70ae(0x173)](),this['gitCommitData'][_0x2e70ae(0x166)]),this[_0x2e70ae(0x198)][_0x2e70ae(0x1c3)](_0x2e70ae(0x16a),this[_0x2e70ae(0x14f)]);const _0x4fb9af=await this[_0x2e70ae(0x1b6)][_0x2e70ae(0x172)](this[_0x2e70ae(0x14f)]);if(_0x4fb9af){this[_0x2e70ae(0x17b)][_0x2e70ae(0x1c3)](_0x2e70ae(0x13f)),await this[_0x2e70ae(0x1b6)]['updateStatus']('Completed');return;}this[_0x2e70ae(0x17b)][_0x2e70ae(0x1c3)](this['prefix']+_0x2e70ae(0x12b)+this[_0x2e70ae(0x196)]['repositoryGit']+'.'),await this[_0x2e70ae(0x169)][_0x2e70ae(0x1a1)](this['gitCommitData']['branch'],this[_0x2e70ae(0x196)][_0x2e70ae(0x162)]),this['sfLogger'][_0x2e70ae(0x1c3)](this[_0x2e70ae(0x195)]+'\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.');const _0x4029e3=await sfdx_utils_1[_0x2e70ae(0x17e)][_0x2e70ae(0x1a6)](this[_0x2e70ae(0x169)][_0x2e70ae(0x17f)]);await this[_0x2e70ae(0x12e)]();!this[_0x2e70ae(0x17b)][_0x2e70ae(0x127)]()&&this[_0x2e70ae(0x17b)][_0x2e70ae(0x11c)](await salesforce_logger_v3_service_1[_0x2e70ae(0x148)][_0x2e70ae(0x19c)](sf_logger_v3_types_1[_0x2e70ae(0x123)][_0x2e70ae(0x1a3)]));await this[_0x2e70ae(0x17b)][_0x2e70ae(0x197)]();if(_0x7e3d06[_0x2e70ae(0x15d)]){await this[_0x2e70ae(0x192)]['prepareMdapi'](this[_0x2e70ae(0x169)][_0x2e70ae(0x17f)]),await this[_0x2e70ae(0x17b)][_0x2e70ae(0x1c3)](this[_0x2e70ae(0x195)]+_0x2e70ae(0x137))[_0x2e70ae(0x197)]();const _0x1d92bb=(await fs_internal_1['FS']['readDir'](this[_0x2e70ae(0x192)][_0x2e70ae(0x17f)],!![]))[_0x2e70ae(0x154)](_0x57cd0e=>(0x0,path_1['relative'])(this[_0x2e70ae(0x192)][_0x2e70ae(0x17f)],_0x57cd0e));this[_0x2e70ae(0x17b)][_0x2e70ae(0x1c3)](this[_0x2e70ae(0x195)]+_0x2e70ae(0x1b4)+_0x1d92bb[_0x2e70ae(0x12d)]+_0x2e70ae(0x12f)),this[_0x2e70ae(0x196)][_0x2e70ae(0x1ab)]=[],this[_0x2e70ae(0x196)][_0x2e70ae(0x140)]=[{'files':{'modified':_0x1d92bb,'added':[],'removed':[]},'id':await this['gitUtils']['getCurrentHash'](),'message':_0x2e70ae(0x155),'username':constants_1[_0x2e70ae(0x157)]}];}await this[_0x2e70ae(0x1b6)][_0x2e70ae(0x142)]({[this[_0x2e70ae(0x196)][_0x2e70ae(0x186)]]:{'lastCommit':this[_0x2e70ae(0x14f)]}}),await this[_0x2e70ae(0x17b)][_0x2e70ae(0x1c3)](this[_0x2e70ae(0x195)]+_0x2e70ae(0x1ae)+(_0x4029e3?_0x2e70ae(0x1bd):'NO')+_0x2e70ae(0x1bb))[_0x2e70ae(0x197)](),await this[_0x2e70ae(0x122)](_0x4029e3),await this[_0x2e70ae(0x17b)][_0x2e70ae(0x1c3)](this[_0x2e70ae(0x195)]+_0x2e70ae(0x14a))[_0x2e70ae(0x197)](),await this[_0x2e70ae(0x1b6)][_0x2e70ae(0x180)](_0x2e70ae(0x163));}catch(_0x52eb67){await this[_0x2e70ae(0x182)]();if(_0x52eb67 instanceof flosum_commit_error_1['FlosumCommitError'])await this['gitCommit']['updateStatus'](_0x2e70ae(0x163))[_0x2e70ae(0x1b0)](()=>void 0x0),this[_0x2e70ae(0x198)]['log'](this[_0x2e70ae(0x195)]+_0x2e70ae(0x177));else{await this['logger'][_0x2e70ae(0x174)](this[_0x2e70ae(0x195)]+_0x2e70ae(0x17d)+(_0x52eb67 instanceof api_error_1[_0x2e70ae(0x1a2)]||_0x52eb67 instanceof salesforce_error_1['SalesforceError']?_0x52eb67[_0x2e70ae(0x1b5)]():_0x52eb67)),await this[_0x2e70ae(0x1b6)][_0x2e70ae(0x142)]({}),await this['gitCommit'][_0x2e70ae(0x180)]('Error')[_0x2e70ae(0x1b0)](()=>void 0x0);throw _0x52eb67;}}finally{await this[_0x2e70ae(0x182)](),await this[_0x2e70ae(0x17b)][_0x2e70ae(0x197)]()[_0x2e70ae(0x1b0)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1[a107_0x34ee70(0x141)])({'transient':!![]}),__metadata(a107_0x34ee70(0x130),[git_commit_service_1[a107_0x34ee70(0x16c)],connection_1[a107_0x34ee70(0x129)]])],GitCommitJob),exports[a107_0x34ee70(0x124)]=GitCommitJob;