const a127_0x4da8c7=a127_0x2efa;function a127_0x2efa(_0x1280a5,_0xe87cae){const _0x839bbf=a127_0x3e75();return a127_0x2efa=function(_0x2a488b,_0x3ee4b1){_0x2a488b=_0x2a488b-0x1a7;let _0x3e751c=_0x839bbf[_0x2a488b];return _0x3e751c;},a127_0x2efa(_0x1280a5,_0xe87cae);}(function(_0x8115e8,_0x2cca80){const _0x23dbc3=a127_0x2efa,_0x4836cf=_0x8115e8();while(!![]){try{const _0xc3b408=parseInt(_0x23dbc3(0x237))/0x1*(-parseInt(_0x23dbc3(0x229))/0x2)+-parseInt(_0x23dbc3(0x20f))/0x3+parseInt(_0x23dbc3(0x1bf))/0x4*(parseInt(_0x23dbc3(0x22e))/0x5)+-parseInt(_0x23dbc3(0x202))/0x6*(-parseInt(_0x23dbc3(0x1b9))/0x7)+-parseInt(_0x23dbc3(0x21f))/0x8+-parseInt(_0x23dbc3(0x226))/0x9+parseInt(_0x23dbc3(0x1f1))/0xa;if(_0xc3b408===_0x2cca80)break;else _0x4836cf['push'](_0x4836cf['shift']());}catch(_0x108c2b){_0x4836cf['push'](_0x4836cf['shift']());}}}(a127_0x3e75,0x7e1f5));const a127_0x3ee4b1=(function(){let _0x148ea7=!![];return function(_0xe769c0,_0x450147){const _0x1d1701=_0x148ea7?function(){if(_0x450147){const _0xbe389d=_0x450147['apply'](_0xe769c0,arguments);return _0x450147=null,_0xbe389d;}}:function(){};return _0x148ea7=![],_0x1d1701;};}()),a127_0x2a488b=a127_0x3ee4b1(this,function(){const _0x3a27df=a127_0x2efa;return a127_0x2a488b[_0x3a27df(0x1ac)]()[_0x3a27df(0x1e5)](_0x3a27df(0x1fb))[_0x3a27df(0x1ac)]()[_0x3a27df(0x223)](a127_0x2a488b)[_0x3a27df(0x1e5)](_0x3a27df(0x1fb));});a127_0x2a488b();'use strict';var __createBinding=this&&this[a127_0x4da8c7(0x238)]||(Object['create']?function(_0x226eb0,_0xf21541,_0x56b66d,_0x224b0a){const _0x143130=a127_0x4da8c7;if(_0x224b0a===undefined)_0x224b0a=_0x56b66d;var _0x9aeed7=Object['getOwnPropertyDescriptor'](_0xf21541,_0x56b66d);(!_0x9aeed7||(_0x143130(0x233)in _0x9aeed7?!_0xf21541[_0x143130(0x1be)]:_0x9aeed7[_0x143130(0x1b2)]||_0x9aeed7[_0x143130(0x20c)]))&&(_0x9aeed7={'enumerable':!![],'get':function(){return _0xf21541[_0x56b66d];}}),Object[_0x143130(0x249)](_0x226eb0,_0x224b0a,_0x9aeed7);}:function(_0x3eee7a,_0x34c554,_0x123049,_0x5348ef){if(_0x5348ef===undefined)_0x5348ef=_0x123049;_0x3eee7a[_0x5348ef]=_0x34c554[_0x123049];}),__setModuleDefault=this&&this[a127_0x4da8c7(0x1cd)]||(Object['create']?function(_0x20434f,_0x18f683){const _0x234d99=a127_0x4da8c7;Object['defineProperty'](_0x20434f,_0x234d99(0x220),{'enumerable':!![],'value':_0x18f683});}:function(_0x52324c,_0xdc505c){const _0xb59c80=a127_0x4da8c7;_0x52324c[_0xb59c80(0x220)]=_0xdc505c;}),__decorate=this&&this[a127_0x4da8c7(0x1b8)]||function(_0x509d12,_0x1ea3be,_0x15ae7f,_0x10f9f1){const _0x2c610a=a127_0x4da8c7;var _0x32a79d=arguments[_0x2c610a(0x248)],_0x37fde6=_0x32a79d<0x3?_0x1ea3be:_0x10f9f1===null?_0x10f9f1=Object[_0x2c610a(0x232)](_0x1ea3be,_0x15ae7f):_0x10f9f1,_0xe14529;if(typeof Reflect===_0x2c610a(0x245)&&typeof Reflect['decorate']==='function')_0x37fde6=Reflect[_0x2c610a(0x1d2)](_0x509d12,_0x1ea3be,_0x15ae7f,_0x10f9f1);else{for(var _0x2d56df=_0x509d12[_0x2c610a(0x248)]-0x1;_0x2d56df>=0x0;_0x2d56df--)if(_0xe14529=_0x509d12[_0x2d56df])_0x37fde6=(_0x32a79d<0x3?_0xe14529(_0x37fde6):_0x32a79d>0x3?_0xe14529(_0x1ea3be,_0x15ae7f,_0x37fde6):_0xe14529(_0x1ea3be,_0x15ae7f))||_0x37fde6;}return _0x32a79d>0x3&&_0x37fde6&&Object[_0x2c610a(0x249)](_0x1ea3be,_0x15ae7f,_0x37fde6),_0x37fde6;},__importStar=this&&this[a127_0x4da8c7(0x1d7)]||function(_0x4f9ed6){const _0x4c19d7=a127_0x4da8c7;if(_0x4f9ed6&&_0x4f9ed6['__esModule'])return _0x4f9ed6;var _0x1675bb={};if(_0x4f9ed6!=null){for(var _0x40325a in _0x4f9ed6)if(_0x40325a!==_0x4c19d7(0x220)&&Object[_0x4c19d7(0x251)][_0x4c19d7(0x1dd)]['call'](_0x4f9ed6,_0x40325a))__createBinding(_0x1675bb,_0x4f9ed6,_0x40325a);}return __setModuleDefault(_0x1675bb,_0x4f9ed6),_0x1675bb;},__metadata=this&&this[a127_0x4da8c7(0x224)]||function(_0x38defb,_0x2ac928){const _0xefe18=a127_0x4da8c7;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0xefe18(0x208))return Reflect['metadata'](_0x38defb,_0x2ac928);},GitCommitJob_1;function a127_0x3e75(){const _0x4ed2f3=['log','getRemoteHash','commitId','recordType','readFilesByFilename','30534000TezeqC','env','Tokens','\x20components.','lastCommitHash','isSFDXProject','providersFactory','../errors/flosum-commit.error','setCommitDto','\x20components','(((.+)+)+)+$','Logger','GitProvider','sfLogger','catch','BitbucketApiService','\x20Modified\x20','6TJUkta','cleanUp','PathUtils','\x20Error\x20has\x20occurred\x20when\x20commit\x20from\x20git\x20to\x20Flosum\x20-\x20','force','replace','function','../utils/path.utils','\x20Start\x20Git-commit\x20job.','provider','configurable','\x20Job\x20done.','push','1700865epImdP','setLoggerId','proceeded\x20files\x20%d/%d\x20(components\x20-\x20%d)','run','../../notifications/commit-to-flosum-completed.notification','error','author','Git','../../salesforce/services/salesforce-commits-manager.service','updateFileNamesForSFDXProject','added','flat','../utils/connection','updateStatus','FlosumCommitError','prepareMdapi','3637848UujtOB','default','../../../../core','://','constructor','__metadata','config','8542359RtIvFv','getCurrentHash','../../../../constants','18KTHEzR','../services/git-commit.service','../../salesforce/services/salesforce-logger-v3.service','getRemote','../../providers/providers.tokens','5hreGBB','getProtocol','SalesforceCommitsManager','getBranchId','getOwnPropertyDescriptor','get','CommitToFlosumErrorNotification','DEFAULT_GIT_USER_EMAIL','\x20Start\x20force\x20commit\x20job\x20to\x20sync\x20repository','75751MZVudR','__createBinding','gitCommit','getGitShellAuthorizationString','fetchCommits','GitCommitService','errorNotification','\x20Processed\x20','\x20Proceeded\x20','name','../utils/mdapi.utils','prepareGitChangedPaths','dir','checkoutTo','object','../../salesforce/utils/sfdx.utils','\x20Force\x20commit.\x20Have\x20to\x20parse\x20','length','defineProperty','../../../../core/errors/api.error','email','../../internal/fs.internal','YES','GitCommitJob','commits','checkSyncStatus','prototype','fileNames','modified','username','repositoryGit','../../parsers/utils','GitUtils','\x20commits.','ProvidersFactory','completeNotification','\x20files\x20before\x20sync.','send','toString',']\x20[','removeDir','logger','proceedFile','handleCommit','writable','MAX_COMPONENTS_PER_TICK','branch','gitProvider','relative','../../providers/types/git-provider','__decorate','641977mNnDiJ','files','updateRemoteState','shift','commit','__esModule','96328NJtQui','proceedCommits','mdapiUtils','\x20Added\x20','CommitToFlosumCompletedNotification','SalesforceLogger3','\x20Download\x20components\x20metadata\x20from\x20Flosum.','\x20[SFDX:\x20','changes','execute','\x20Fetch\x20remote\x20branch\x20hash.','../utils/git.utils','Error','path','__setModuleDefault','Branch\x20synchronized.\x20Skip.','sync\x20components','resetStats','gitApiService','decorate','Completed','Email\x20notifications\x20are\x20disabled.','message','fetchRepositoryOrBranchData','__importStar','removed',']\x20[Branch:\x20','sendComponents','getRepositoryId','gitCommitData','hasOwnProperty','inserted','repository','../../providers/api/bitbucket-api.service','../../notifications/commit-to-flosum-error.notification','splice','prefix',']\x20Start\x20proceeding\x20git\x20commits.\x20','search','\x20Removed\x20','../../../shared/utils','\x20Cloning\x20git\x20repository\x20from\x20','stats','getRecordTypes','gitUtils'];a127_0x3e75=function(){return _0x4ed2f3;};return a127_0x3e75();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['GitCommitJob']=void 0x0;const core_1=require(a127_0x4da8c7(0x221)),fs_internal_1=require(a127_0x4da8c7(0x24c)),salesforce_logger_v3_service_1=require(a127_0x4da8c7(0x22b)),utils_1=require(a127_0x4da8c7(0x1e7)),path_1=require(a127_0x4da8c7(0x1cc)),typedi_1=__importStar(require('typedi')),constants_1=require(a127_0x4da8c7(0x228)),salesforce_commits_manager_service_1=require(a127_0x4da8c7(0x217)),git_utils_1=require(a127_0x4da8c7(0x1ca)),mdapi_utils_1=require(a127_0x4da8c7(0x241)),api_error_1=require(a127_0x4da8c7(0x24a)),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),git_commit_service_1=require(a127_0x4da8c7(0x22a)),flosum_commit_error_1=require(a127_0x4da8c7(0x1f8)),bitbucket_api_service_1=require(a127_0x4da8c7(0x1e0)),git_provider_1=require(a127_0x4da8c7(0x1b7)),sfdx_utils_1=require(a127_0x4da8c7(0x246)),utils_2=require(a127_0x4da8c7(0x256)),git_internal_1=require('../../internal/git.internal'),providers_tokens_1=require(a127_0x4da8c7(0x22d)),connection_1=require(a127_0x4da8c7(0x21b)),sf_logger_v3_types_1=require('../../salesforce/types/sf-logger-v3-types'),path_utils_1=require(a127_0x4da8c7(0x209)),commit_to_flosum_completed_notification_1=require(a127_0x4da8c7(0x213)),commit_to_flosum_error_notification_1=require(a127_0x4da8c7(0x1e1));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0xed9763,_0x1bd0c4){const _0x5ae4f6=a127_0x4da8c7;this[_0x5ae4f6(0x239)]=_0xed9763,this[_0x5ae4f6(0x1f7)]=_0x1bd0c4,this[_0x5ae4f6(0x1b3)]=+(process[_0x5ae4f6(0x1f2)]['MAX_COMPONENTS_PER_TICK']||0xbb8),this[_0x5ae4f6(0x1af)]=new core_1[(_0x5ae4f6(0x1fc))](GitCommitJob_1['name']),this[_0x5ae4f6(0x1ee)]='',this[_0x5ae4f6(0x1e9)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x4da8c7(0x22c)](){const _0x2f7275=a127_0x4da8c7,{repositoryGit:_0x1cd30d}=this['gitCommitData'],_0x26289e=typedi_1[_0x2f7275(0x220)][_0x2f7275(0x233)](providers_tokens_1[_0x2f7275(0x1f3)]['credentials']);if(this['gitCommitData'][_0x2f7275(0x20b)]===git_provider_1[_0x2f7275(0x1fd)]['Bitbucket']){const _0x2c23c0=typedi_1[_0x2f7275(0x220)]['get'](bitbucket_api_service_1[_0x2f7275(0x200)]);await _0x2c23c0['isLoggedIn']();}return _0x1cd30d[_0x2f7275(0x207)](/http(s)?:\/\/(.+@)?/,(0x0,utils_1[_0x2f7275(0x22f)])(_0x1cd30d)+_0x2f7275(0x222)+_0x26289e[_0x2f7275(0x23a)]()+'@');}async['completeNotification'](_0x15432d,_0x3447e8,_0x4e2245,_0x4fbf2f){const _0x28b1d5=a127_0x4da8c7;if(!this['config']['isEmailNotificationsEnabled']){this['logger']['info'](_0x28b1d5(0x1d4));return;}await new commit_to_flosum_completed_notification_1[(_0x28b1d5(0x1c3))]({'emails':_0x15432d,'gitProvider':_0x3447e8,'completionTime':new Date(),'loggerName':commit_to_flosum_completed_notification_1[_0x28b1d5(0x1c3)][_0x28b1d5(0x240)],'repositoryName':_0x4e2245,'branchName':_0x4fbf2f})[_0x28b1d5(0x1c8)]();}async[a127_0x4da8c7(0x23d)](_0x49e0bd,_0x32328b,_0x42150a,_0x459f1f){const _0x5ec312=a127_0x4da8c7;if(!this[_0x5ec312(0x225)]['isEmailNotificationsEnabled']){this[_0x5ec312(0x1af)]['info'](_0x5ec312(0x1d4));return;}await new commit_to_flosum_error_notification_1[(_0x5ec312(0x234))]({'emails':_0x49e0bd,'gitProvider':_0x32328b,'completionTime':new Date(),'loggerName':commit_to_flosum_error_notification_1['CommitToFlosumErrorNotification'][_0x5ec312(0x240)],'repositoryName':_0x42150a,'branchName':_0x459f1f})['execute']();}[a127_0x4da8c7(0x1d0)](){const _0x5c51e6=a127_0x4da8c7;this[_0x5c51e6(0x1e9)]={'removed':0x0,'modified':0x0,'added':0x0};}async[a127_0x4da8c7(0x218)](){const _0xc0cc5f=a127_0x4da8c7,_0x3baf94=[...this[_0xc0cc5f(0x1dc)][_0xc0cc5f(0x252)]];this[_0xc0cc5f(0x1dc)][_0xc0cc5f(0x252)]=[];for(const _0x1e7dd0 of _0x3baf94){this[_0xc0cc5f(0x1dc)][_0xc0cc5f(0x252)][_0xc0cc5f(0x20e)](...await(0x0,utils_2[_0xc0cc5f(0x1f0)])(_0x1e7dd0,this[_0xc0cc5f(0x1c1)][_0xc0cc5f(0x243)]));}}async[a127_0x4da8c7(0x23b)](){const _0x2d806a=a127_0x4da8c7;if(this['gitCommitData']['force'])return;const _0x3a0cad=[];for(const _0x4e0fcc of this[_0x2d806a(0x1dc)][_0x2d806a(0x24f)]){const _0x1b07b0=await this['gitUtils']['describeCommit'](_0x4e0fcc['id']);_0x4e0fcc[_0x2d806a(0x254)]=_0x1b07b0[_0x2d806a(0x215)],_0x4e0fcc[_0x2d806a(0x1d5)]=_0x1b07b0['message'],_0x4e0fcc[_0x2d806a(0x1ba)]=_0x1b07b0[_0x2d806a(0x1c7)],_0x4e0fcc[_0x2d806a(0x24b)]=_0x1b07b0['email'];if(_0x4e0fcc[_0x2d806a(0x24b)]===constants_1[_0x2d806a(0x235)])throw new flosum_commit_error_1[(_0x2d806a(0x21d))]();_0x3a0cad[_0x2d806a(0x20e)](...Object['values'](_0x4e0fcc[_0x2d806a(0x1ba)])[_0x2d806a(0x21a)]());}this[_0x2d806a(0x1dc)][_0x2d806a(0x252)]=[...new Set(path_utils_1[_0x2d806a(0x204)][_0x2d806a(0x242)](this[_0x2d806a(0x239)][_0x2d806a(0x1ef)],_0x3a0cad,![]))];}async[a127_0x4da8c7(0x1da)](_0xbe38fa,_0x36cf76,_0x5ca0fe){const _0x15124b=a127_0x4da8c7,_0x1057c7=_0x5ca0fe['reduce']((_0x73042,_0x430ebb)=>{const _0x23194a=a127_0x2efa;return _0x73042[_0x23194a(0x1de)][_0x23194a(0x20e)](..._0x430ebb[_0x23194a(0x1de)]),_0x73042[_0x23194a(0x253)][_0x23194a(0x20e)](..._0x430ebb['modified']),_0x73042[_0x23194a(0x1d8)]['push'](..._0x430ebb[_0x23194a(0x1d8)]),_0x73042;},{'inserted':[],'modified':[],'removed':[]}),_0x365cb0=new salesforce_commits_manager_service_1[(_0x15124b(0x230))]({'recordTypes':this[_0x15124b(0x239)][_0x15124b(0x1ea)](),'branchId':this[_0x15124b(0x239)][_0x15124b(0x231)](),'repositoryId':this['gitCommit'][_0x15124b(0x1db)](),'logger':this[_0x15124b(0x1fe)],'commitId':this[_0x15124b(0x1ee)]});await _0x365cb0[_0x15124b(0x1c0)]([{'author':_0xbe38fa,'message':_0x36cf76,'inserted':_0x1057c7[_0x15124b(0x1de)],'modified':_0x1057c7['modified'],'removed':_0x1057c7[_0x15124b(0x1d8)]}]);}async['handleCommit'](_0x368ebe,_0xbdfb92){const _0x316a38=a127_0x4da8c7;await this[_0x316a38(0x1fe)][_0x316a38(0x1ec)](this[_0x316a38(0x1e3)]+_0x316a38(0x1c5))[_0x316a38(0x1ab)](),await this[_0x316a38(0x239)]['fetchComponentsMetadata'](_0xbdfb92);const {added:_0x3b0b9f,modified:_0x15c357,removed:_0x3591c6}=_0x368ebe[_0x316a38(0x1ba)];_0xbdfb92&&_0x15c357[_0x316a38(0x20e)](..._0x3591c6[_0x316a38(0x1e2)](0x0));const _0x46a357=path_utils_1['PathUtils'][_0x316a38(0x242)](this[_0x316a38(0x239)][_0x316a38(0x1ef)],[..._0x3b0b9f,..._0x15c357,..._0x3591c6],_0xbdfb92&&!this[_0x316a38(0x1dc)][_0x316a38(0x206)]),_0x220b09=(0x0,utils_2['convertToCleanPaths'])(_0x46a357);let _0x276e36=0x0;const _0x3ced57=[];(_0x3b0b9f[_0x316a38(0x248)]||_0x15c357[_0x316a38(0x248)])&&this[_0x316a38(0x239)][_0x316a38(0x1db)]()&&(this[_0x316a38(0x1ee)]=await this['gitCommit']['createCommit'](_0x368ebe[_0x316a38(0x1d5)]));const _0x362580=_0x220b09['length'];let _0x559ef2=0x0;while(_0x220b09[_0x316a38(0x248)]){const _0x5d77c3=_0x220b09[_0x316a38(0x1bc)](),_0x9db063=await this[_0x316a38(0x239)][_0x316a38(0x1b0)](_0x5d77c3,this[_0x316a38(0x1c1)][_0x316a38(0x243)],_0xbdfb92&&!this[_0x316a38(0x1dc)]['force']);_0x276e36+=_0x9db063['inserted']['length']+_0x9db063[_0x316a38(0x1d8)][_0x316a38(0x248)]+_0x9db063[_0x316a38(0x253)][_0x316a38(0x248)],this[_0x316a38(0x1e9)][_0x316a38(0x219)]+=_0x9db063[_0x316a38(0x1de)]['length'],this[_0x316a38(0x1e9)][_0x316a38(0x253)]+=_0x9db063[_0x316a38(0x253)][_0x316a38(0x248)],this[_0x316a38(0x1e9)][_0x316a38(0x1d8)]+=_0x9db063['removed'][_0x316a38(0x248)],_0x559ef2++,_0x559ef2%0x64===0x0&&this['logger'][_0x316a38(0x1ec)](_0x316a38(0x211),_0x559ef2,_0x362580,_0x276e36),_0x3ced57[_0x316a38(0x20e)](_0x9db063),_0x276e36>this[_0x316a38(0x1b3)]&&(await this[_0x316a38(0x1da)](_0x368ebe[_0x316a38(0x254)],_0x368ebe[_0x316a38(0x1d5)],_0x3ced57),await this[_0x316a38(0x1fe)][_0x316a38(0x1ec)](this[_0x316a38(0x1e3)]+_0x316a38(0x23e)+_0x276e36+_0x316a38(0x1f4))[_0x316a38(0x1ab)](),_0x276e36=0x0,_0x3ced57[_0x316a38(0x1e2)](0x0));}_0x3ced57[_0x316a38(0x248)]&&(await this[_0x316a38(0x1da)](_0x368ebe[_0x316a38(0x254)],_0x368ebe[_0x316a38(0x1d5)],_0x3ced57),await this[_0x316a38(0x1fe)]['log'](this[_0x316a38(0x1e3)]+'\x20Processed\x20'+_0x276e36+'\x20components.')[_0x316a38(0x1ab)]());}async[a127_0x4da8c7(0x1c0)](_0x3f9284){const _0x2aa164=a127_0x4da8c7,_0x2a3114=[...this[_0x2aa164(0x1dc)]['commits']],_0x2fa312=_0x2a3114['length'];let _0x12d2ee=0x0;while(_0x2a3114[_0x2aa164(0x248)]){const _0x5a12b1=_0x2a3114[_0x2aa164(0x1bc)]();!this[_0x2aa164(0x1dc)][_0x2aa164(0x206)]&&(this[_0x2aa164(0x239)][_0x2aa164(0x1db)]()?(await this[_0x2aa164(0x1eb)][_0x2aa164(0x244)](_0x5a12b1['id']),await this[_0x2aa164(0x1c1)]['prepareMdapi'](this[_0x2aa164(0x1eb)][_0x2aa164(0x243)])):(await this[_0x2aa164(0x1eb)][_0x2aa164(0x244)](this[_0x2aa164(0x1f5)]),await this[_0x2aa164(0x1c1)][_0x2aa164(0x21e)](this[_0x2aa164(0x1eb)][_0x2aa164(0x243)]))),await this[_0x2aa164(0x1b1)](_0x5a12b1,_0x3f9284),await this[_0x2aa164(0x1c1)][_0x2aa164(0x1ae)](),_0x12d2ee+=0x1,await this[_0x2aa164(0x1fe)][_0x2aa164(0x1ec)](this[_0x2aa164(0x1e3)]+'\x20Commit\x20Summary'),await this[_0x2aa164(0x1fe)][_0x2aa164(0x1ec)](this['prefix']+_0x2aa164(0x1c2)+this[_0x2aa164(0x1e9)][_0x2aa164(0x219)]+_0x2aa164(0x1fa)),await this['sfLogger'][_0x2aa164(0x1ec)](this[_0x2aa164(0x1e3)]+_0x2aa164(0x201)+this[_0x2aa164(0x1e9)][_0x2aa164(0x253)]+_0x2aa164(0x1fa)),await this[_0x2aa164(0x1fe)][_0x2aa164(0x1ec)](this[_0x2aa164(0x1e3)]+_0x2aa164(0x1e6)+this[_0x2aa164(0x1e9)][_0x2aa164(0x1d8)]+'\x20components'),await this['sfLogger'][_0x2aa164(0x1ec)](this[_0x2aa164(0x1e3)]+_0x2aa164(0x23f)+_0x12d2ee+'/'+_0x2fa312+_0x2aa164(0x1a7))[_0x2aa164(0x1ab)](),this['resetStats']();}}async['cleanUp'](){const _0x3d8df6=a127_0x4da8c7;this[_0x3d8df6(0x1eb)]&&await this[_0x3d8df6(0x1eb)][_0x3d8df6(0x1ae)]()[_0x3d8df6(0x1ff)](()=>void 0x0),this[_0x3d8df6(0x1c1)]&&await this['mdapiUtils'][_0x3d8df6(0x1ae)]()[_0x3d8df6(0x1ff)](()=>void 0x0);}async[a127_0x4da8c7(0x212)](_0x1333e1){const _0x3647e1=a127_0x4da8c7;this['gitCommitData']=_0x1333e1,this['gitCommit'][_0x3647e1(0x1f9)](this[_0x3647e1(0x1dc)]),this[_0x3647e1(0x1d1)]=typedi_1['default']['get'](providers_tokens_1[_0x3647e1(0x1f3)][_0x3647e1(0x1d1)]),this[_0x3647e1(0x225)]=typedi_1[_0x3647e1(0x220)][_0x3647e1(0x233)](providers_tokens_1['Tokens']['config']),this['sfLogger']=typedi_1[_0x3647e1(0x220)][_0x3647e1(0x233)](providers_tokens_1[_0x3647e1(0x1f3)][_0x3647e1(0x1af)]),this['prefix']='[GIT\x20->\x20FLOSUM]\x20[Repository:\x20'+_0x1333e1[_0x3647e1(0x1df)]+_0x3647e1(0x1d9)+_0x1333e1['branch']+_0x3647e1(0x1ad)+GitCommitJob_1[_0x3647e1(0x240)]+']',this['gitUtils']=new git_utils_1[(_0x3647e1(0x257))](await this[_0x3647e1(0x22c)]()),this[_0x3647e1(0x1c1)]=new mdapi_utils_1['MDApiUtils'](),this[_0x3647e1(0x1fe)][_0x3647e1(0x1ec)](this['prefix']+_0x3647e1(0x20a));try{this[_0x3647e1(0x1fe)][_0x3647e1(0x1ec)](this[_0x3647e1(0x1e3)]+'\x20Fetch\x20salesforce\x20data.'),await this[_0x3647e1(0x239)][_0x3647e1(0x1d6)](),await this['gitCommit'][_0x3647e1(0x21c)]('In\x20Progress'),this[_0x3647e1(0x1fe)]['log'](this[_0x3647e1(0x1e3)]+_0x3647e1(0x1c9)),this[_0x3647e1(0x1f5)]=await git_internal_1[_0x3647e1(0x216)][_0x3647e1(0x1ed)](await this[_0x3647e1(0x22c)](),this['gitCommitData'][_0x3647e1(0x1b4)]),this[_0x3647e1(0x1af)]['log']('Last\x20git\x20repository\x20hash\x20is\x20%s.',this[_0x3647e1(0x1f5)]);const _0x5a95fc=await this[_0x3647e1(0x239)][_0x3647e1(0x250)](this[_0x3647e1(0x1f5)]);if(_0x5a95fc){this[_0x3647e1(0x1fe)][_0x3647e1(0x1ec)](_0x3647e1(0x1ce)),await this[_0x3647e1(0x239)]['updateStatus'](_0x3647e1(0x1d3));return;}this['sfLogger'][_0x3647e1(0x1ec)](this[_0x3647e1(0x1e3)]+_0x3647e1(0x1e8)+this['gitCommitData'][_0x3647e1(0x255)]+'.'),await this[_0x3647e1(0x1eb)]['clone'](this[_0x3647e1(0x1dc)][_0x3647e1(0x1b4)],this[_0x3647e1(0x1dc)][_0x3647e1(0x1df)]),this[_0x3647e1(0x1fe)][_0x3647e1(0x1ec)](this[_0x3647e1(0x1e3)]+'\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.');const _0x3b5371=await sfdx_utils_1['SFDX'][_0x3647e1(0x1f6)](this['gitUtils'][_0x3647e1(0x243)]);await this[_0x3647e1(0x23b)]();!this[_0x3647e1(0x1fe)]['getLoggerId']()&&this[_0x3647e1(0x1fe)][_0x3647e1(0x210)](await salesforce_logger_v3_service_1[_0x3647e1(0x1c4)]['createLoggerId'](sf_logger_v3_types_1['LoggerTypes'][_0x3647e1(0x1bd)]));await this['sfLogger']['send']();if(_0x1333e1[_0x3647e1(0x206)]){await this['mdapiUtils'][_0x3647e1(0x21e)](this[_0x3647e1(0x1eb)][_0x3647e1(0x243)]),await this[_0x3647e1(0x1fe)][_0x3647e1(0x1ec)](this[_0x3647e1(0x1e3)]+_0x3647e1(0x236))[_0x3647e1(0x1ab)]();const _0x3cb524=(await fs_internal_1['FS']['readDir'](this[_0x3647e1(0x1c1)][_0x3647e1(0x243)],!![]))['map'](_0x567263=>(0x0,path_1[_0x3647e1(0x1b6)])(this[_0x3647e1(0x1c1)][_0x3647e1(0x243)],_0x567263));this[_0x3647e1(0x1fe)]['log'](this[_0x3647e1(0x1e3)]+_0x3647e1(0x247)+_0x3cb524[_0x3647e1(0x248)]+_0x3647e1(0x1aa)),this[_0x3647e1(0x1dc)][_0x3647e1(0x252)]=[],this[_0x3647e1(0x1dc)][_0x3647e1(0x24f)]=[{'files':{'modified':_0x3cb524,'added':[],'removed':[]},'id':await this[_0x3647e1(0x1eb)][_0x3647e1(0x227)](),'message':_0x3647e1(0x1cf),'username':constants_1['DEFAULT_GIT_USER_NAME']}];}await this[_0x3647e1(0x239)][_0x3647e1(0x1bb)]({[this['gitCommitData'][_0x3647e1(0x255)]]:{'lastCommit':this['lastCommitHash']}}),await this[_0x3647e1(0x1fe)][_0x3647e1(0x1ec)](this[_0x3647e1(0x1e3)]+_0x3647e1(0x1c6)+(_0x3b5371?_0x3647e1(0x24d):'NO')+_0x3647e1(0x1e4))['send'](),await this[_0x3647e1(0x1c0)](_0x3b5371),await this[_0x3647e1(0x1fe)][_0x3647e1(0x1ec)](this['prefix']+_0x3647e1(0x20d))[_0x3647e1(0x1ab)](),await this[_0x3647e1(0x239)][_0x3647e1(0x21c)](_0x3647e1(0x1d3)),await this[_0x3647e1(0x1a9)]([_0x1333e1[_0x3647e1(0x24b)]],this[_0x3647e1(0x225)][_0x3647e1(0x1b5)],_0x1333e1[_0x3647e1(0x1df)],_0x1333e1[_0x3647e1(0x1b4)]);}catch(_0x3921aa){await this[_0x3647e1(0x203)]();if(_0x3921aa instanceof flosum_commit_error_1['FlosumCommitError'])await this[_0x3647e1(0x239)][_0x3647e1(0x21c)](_0x3647e1(0x1d3))[_0x3647e1(0x1ff)](()=>void 0x0),this[_0x3647e1(0x1af)][_0x3647e1(0x1ec)](this[_0x3647e1(0x1e3)]+'\x20Git\x20commits\x20not\x20have\x20a\x20changes.');else{await this[_0x3647e1(0x1af)][_0x3647e1(0x214)](this[_0x3647e1(0x1e3)]+_0x3647e1(0x205)+(_0x3921aa instanceof api_error_1['ApiError']||_0x3921aa instanceof salesforce_error_1['SalesforceError']?_0x3921aa[_0x3647e1(0x1ac)]():_0x3921aa)),await this[_0x3647e1(0x239)][_0x3647e1(0x1bb)]({}),await this[_0x3647e1(0x239)]['updateStatus'](_0x3647e1(0x1cb))[_0x3647e1(0x1ff)](()=>void 0x0),await this['errorNotification']([_0x1333e1[_0x3647e1(0x24b)]],this['config'][_0x3647e1(0x1b5)],_0x1333e1[_0x3647e1(0x1df)],_0x1333e1[_0x3647e1(0x1b4)]);throw _0x3921aa;}}finally{await this[_0x3647e1(0x203)](),await this[_0x3647e1(0x1fe)][_0x3647e1(0x1ab)]()[_0x3647e1(0x1ff)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[git_commit_service_1[a127_0x4da8c7(0x23c)],connection_1[a127_0x4da8c7(0x1a8)]])],GitCommitJob),exports[a127_0x4da8c7(0x24e)]=GitCommitJob;