const a105_0x39cdbe=a105_0x5441;(function(_0x215b5f,_0xf8fe27){const _0x2454ec=a105_0x5441,_0xc8b3a6=_0x215b5f();while(!![]){try{const _0x57d357=-parseInt(_0x2454ec(0x1a9))/0x1+parseInt(_0x2454ec(0x1c4))/0x2*(-parseInt(_0x2454ec(0x1dd))/0x3)+parseInt(_0x2454ec(0x1bb))/0x4*(parseInt(_0x2454ec(0x1b4))/0x5)+-parseInt(_0x2454ec(0x1f3))/0x6+-parseInt(_0x2454ec(0x1ad))/0x7+parseInt(_0x2454ec(0x1af))/0x8*(parseInt(_0x2454ec(0x1cf))/0x9)+-parseInt(_0x2454ec(0x1f0))/0xa*(-parseInt(_0x2454ec(0x1df))/0xb);if(_0x57d357===_0xf8fe27)break;else _0xc8b3a6['push'](_0xc8b3a6['shift']());}catch(_0x14954b){_0xc8b3a6['push'](_0xc8b3a6['shift']());}}}(a105_0xe399,0x75d14));const a105_0x497c99=(function(){let _0x3c9615=!![];return function(_0xaf0008,_0x26669e){const _0x4083f6=_0x3c9615?function(){const _0x555386=a105_0x5441;if(_0x26669e){const _0x1c8a17=_0x26669e[_0x555386(0x1b2)](_0xaf0008,arguments);return _0x26669e=null,_0x1c8a17;}}:function(){};return _0x3c9615=![],_0x4083f6;};}()),a105_0x1db305=a105_0x497c99(this,function(){const _0xd6425e=a105_0x5441;return a105_0x1db305[_0xd6425e(0x1f1)]()[_0xd6425e(0x1ed)]('(((.+)+)+)+$')[_0xd6425e(0x1f1)]()[_0xd6425e(0x1b0)](a105_0x1db305)[_0xd6425e(0x1ed)](_0xd6425e(0x1e1));});a105_0x1db305();'use strict';var __decorate=this&&this[a105_0x39cdbe(0x1d8)]||function(_0x5b557f,_0x1749d9,_0x2ab18b,_0x720d61){const _0x1d8b11=a105_0x39cdbe;var _0x6504c0=arguments[_0x1d8b11(0x1de)],_0x30167e=_0x6504c0<0x3?_0x1749d9:_0x720d61===null?_0x720d61=Object[_0x1d8b11(0x1c1)](_0x1749d9,_0x2ab18b):_0x720d61,_0x187f05;if(typeof Reflect===_0x1d8b11(0x1b3)&&typeof Reflect['decorate']===_0x1d8b11(0x1b8))_0x30167e=Reflect[_0x1d8b11(0x1ac)](_0x5b557f,_0x1749d9,_0x2ab18b,_0x720d61);else{for(var _0x2ffbb7=_0x5b557f['length']-0x1;_0x2ffbb7>=0x0;_0x2ffbb7--)if(_0x187f05=_0x5b557f[_0x2ffbb7])_0x30167e=(_0x6504c0<0x3?_0x187f05(_0x30167e):_0x6504c0>0x3?_0x187f05(_0x1749d9,_0x2ab18b,_0x30167e):_0x187f05(_0x1749d9,_0x2ab18b))||_0x30167e;}return _0x6504c0>0x3&&_0x30167e&&Object[_0x1d8b11(0x1e9)](_0x1749d9,_0x2ab18b,_0x30167e),_0x30167e;},__metadata=this&&this[a105_0x39cdbe(0x1f2)]||function(_0x513cbf,_0x10d7fd){const _0x40cf4a=a105_0x39cdbe;if(typeof Reflect==='object'&&typeof Reflect[_0x40cf4a(0x1c9)]===_0x40cf4a(0x1b8))return Reflect[_0x40cf4a(0x1c9)](_0x513cbf,_0x10d7fd);};Object[a105_0x39cdbe(0x1e9)](exports,a105_0x39cdbe(0x1c3),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;function a105_0xe399(){const _0x3d5e2a=['repositoryName','611490VhEUny','log','branch','decorate','4219705XSqJTH','./commit-components.job','16TAwDcU','constructor','updateRemoteState','apply','object','378365dbHMUL','Service','gitUrl','salesforceService','function','../../salesforce/services/salesforce-retriever.service','commitJob','8NdGCNu','name','force','CommitComponentsDto','updateLastCommit','createBranchIfNotExists','getOwnPropertyDescriptor','then','__esModule','19916xsUoZv','getCommitDto','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','setStatus','\x20Flosum\x20sync\x20job\x20done.','metadata','getComponents','Completed','syncData','checkSyncStatus','getBranchComponents','734481ifyLtX','\x20Branch\x20synchronized.\x20Skip','prefix','../../salesforce/services/salesforce-sync.service','Sync\x20repository','DEFAULT_GIT_USER_NAME','get','design:paramtypes','getComponentIds','__decorate','SalesforceLogger3','repository','branchName','components','261ifAeYF','length','31757bMOzMG','SalesforceService','(((.+)+)+)+$','repo','run','branches','lastCommit','CommitComponentsJob','FlosumSyncJob','string','defineProperty','getRemoteStateAttachmentId','branchId','sfLogger','search',']\x20[Branch:\x20','../../../../constants','8090dXwXBa','toString','__metadata','521496SViBDn','\x20Checking\x20repository\x20on\x20Flosum\x20side.','../../salesforce/services/salesforce-logger-v3.service','../dto/commit-components.dto','send','getOne','provider','user','SalesforceSyncService','\x20Checking\x20sync\x20status.','message','salesforceSync'];a105_0xe399=function(){return _0x3d5e2a;};return a105_0xe399();}const salesforce_logger_v3_service_1=require(a105_0x39cdbe(0x19e)),typedi_1=require('typedi'),constants_1=require(a105_0x39cdbe(0x1ef)),salesforce_retriever_service_1=require(a105_0x39cdbe(0x1b9)),salesforce_sync_service_1=require(a105_0x39cdbe(0x1d2)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a105_0x39cdbe(0x19f)),commit_components_job_1=require(a105_0x39cdbe(0x1ae));let FlosumSyncJob=class FlosumSyncJob{constructor(_0xb7ed59,_0x134928,_0x274cea){const _0x4c99e0=a105_0x39cdbe;this[_0x4c99e0(0x1a7)]=_0xb7ed59,this[_0x4c99e0(0x1b7)]=_0x134928,this['commitJob']=_0x274cea;}async['createBranchIfNotExists'](){const _0x3cbf14=a105_0x39cdbe;let _0x4157c5=await this['repository']['branches']['getOne'](this[_0x3cbf14(0x1cc)][_0x3cbf14(0x1db)])['catch'](()=>null);!_0x4157c5&&(_0x4157c5=await this[_0x3cbf14(0x1da)]['branches']['create']({'name':this[_0x3cbf14(0x1cc)]['branchName']})),this[_0x3cbf14(0x1ab)]=_0x4157c5;}async['getComponentIds'](){const _0x1d9578=a105_0x39cdbe;return this[_0x1d9578(0x1cc)]['repositoryId']?this[_0x1d9578(0x1a7)]['getComponentsFromRepository'](this['syncData']['repositoryId']):this[_0x1d9578(0x1a7)][_0x1d9578(0x1ce)](this['syncData'][_0x1d9578(0x1eb)]);}async[a105_0x39cdbe(0x1ca)](){const _0x2cfb34=a105_0x39cdbe,_0x1dd084=await this[_0x2cfb34(0x1d7)](),_0x520b3c=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x2cfb34(0x1b7)]),_0x2aa0a7=await _0x520b3c[_0x2cfb34(0x1e3)](_0x1dd084);return _0x2aa0a7;}async[a105_0x39cdbe(0x1c5)](_0x44c97e){const _0x4b0572=a105_0x39cdbe,_0x290997=new commit_components_dto_1[(_0x4b0572(0x1be))]();return _0x290997[_0x4b0572(0x1a6)]=_0x4b0572(0x1d3),_0x290997[_0x4b0572(0x1a3)]={'name':constants_1[_0x4b0572(0x1d4)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x290997[_0x4b0572(0x1dc)]={'writed':await this[_0x4b0572(0x1ca)]()},_0x290997['convertToSFDX']=_0x44c97e,_0x290997[_0x4b0572(0x1e2)]=this[_0x4b0572(0x1da)],_0x290997[_0x4b0572(0x1ab)]=this[_0x4b0572(0x1ab)],_0x290997[_0x4b0572(0x1bd)]=!![],_0x290997[_0x4b0572(0x1a2)]=this[_0x4b0572(0x1a2)],_0x290997;}async[a105_0x39cdbe(0x1cd)](){const _0x2bfdf8=a105_0x39cdbe,_0x53be30=await this[_0x2bfdf8(0x1a7)][_0x2bfdf8(0x1ea)](this[_0x2bfdf8(0x1cc)]),_0x4fee19=await this[_0x2bfdf8(0x1b7)]['retrieveAttachment'](_0x53be30)[_0x2bfdf8(0x1c2)](_0x37b9e2=>typeof _0x37b9e2===_0x2bfdf8(0x1e8)?JSON['parse'](_0x37b9e2):_0x37b9e2)['catch'](()=>({}));if(_0x4fee19[this['repository'][_0x2bfdf8(0x1b6)]]){if(_0x4fee19[this['repository'][_0x2bfdf8(0x1b6)]][_0x2bfdf8(0x1e5)]===this[_0x2bfdf8(0x1ab)]['sha'])return!![];}return![];}async[a105_0x39cdbe(0x1bf)](){const _0x1dc93c=a105_0x39cdbe,_0x188219=await this[_0x1dc93c(0x1da)][_0x1dc93c(0x1e4)][_0x1dc93c(0x1a1)](this[_0x1dc93c(0x1ab)][_0x1dc93c(0x1bc)]);await this['sfLogger'][_0x1dc93c(0x1aa)](this[_0x1dc93c(0x1d1)]+'\x20Update\x20remote\x20state.');const _0x10c61f={[this[_0x1dc93c(0x1da)][_0x1dc93c(0x1b6)]]:{'lastCommit':_0x188219['sha']}};await this[_0x1dc93c(0x1a7)][_0x1dc93c(0x1b1)](this[_0x1dc93c(0x1cc)],_0x10c61f);}async[a105_0x39cdbe(0x1e3)]({syncRecord:_0x1edc82,repository:_0xd9fc2,convertToSFDX:_0x3216b7,provider:_0xeafa01}){const _0x45f912=a105_0x39cdbe;this[_0x45f912(0x1cc)]=_0x1edc82,this[_0x45f912(0x1a2)]=_0xeafa01,this[_0x45f912(0x1da)]=_0xd9fc2,this[_0x45f912(0x1ec)]=typedi_1['Container'][_0x45f912(0x1d5)](salesforce_logger_v3_service_1[_0x45f912(0x1d9)]),this[_0x45f912(0x1d1)]=_0x45f912(0x1c6)+this[_0x45f912(0x1cc)][_0x45f912(0x1a8)]+_0x45f912(0x1ee)+this['syncData'][_0x45f912(0x1db)]+']';try{await this[_0x45f912(0x1ec)][_0x45f912(0x1aa)](this[_0x45f912(0x1d1)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x45f912(0x1a0)](),await this[_0x45f912(0x1a7)][_0x45f912(0x1c7)](this['syncData'],'In\x20Progress'),this['sfLogger']['log'](this[_0x45f912(0x1d1)]+_0x45f912(0x19d)),await this[_0x45f912(0x1c0)](),await this['sfLogger'][_0x45f912(0x1aa)](this[_0x45f912(0x1d1)]+_0x45f912(0x1a5))[_0x45f912(0x1a0)]();const _0x2a3e31=await this[_0x45f912(0x1cd)]();this['sfLogger']['log'](this[_0x45f912(0x1d1)]+'\x20Sync\x20status\x20'+_0x2a3e31+'.');if(_0x2a3e31){await this[_0x45f912(0x1a7)]['setStatus'](this['syncData'],_0x45f912(0x1cb)),await this['sfLogger'][_0x45f912(0x1aa)](this['prefix']+_0x45f912(0x1d0))['send']();return;}const _0x161845=await this[_0x45f912(0x1c5)](_0x3216b7);await this[_0x45f912(0x1ba)][_0x45f912(0x1e3)](_0x161845,this[_0x45f912(0x1d1)]),await this['salesforceSync']['setStatus'](this[_0x45f912(0x1cc)],_0x45f912(0x1cb)),await this['updateLastCommit'](),this[_0x45f912(0x1ec)]['log'](this['prefix']+_0x45f912(0x1c8));}catch(_0x28672c){throw _0x28672c;}finally{await this[_0x45f912(0x1ec)][_0x45f912(0x1a0)]();}}};function a105_0x5441(_0x55dbe8,_0x36eca6){const _0x147d76=a105_0xe399();return a105_0x5441=function(_0x1db305,_0x497c99){_0x1db305=_0x1db305-0x19d;let _0xe399be=_0x147d76[_0x1db305];return _0xe399be;},a105_0x5441(_0x55dbe8,_0x36eca6);}FlosumSyncJob=__decorate([(0x0,typedi_1[a105_0x39cdbe(0x1b5)])({'transient':!![]}),__metadata(a105_0x39cdbe(0x1d6),[salesforce_sync_service_1[a105_0x39cdbe(0x1a4)],salesforce_service_1[a105_0x39cdbe(0x1e0)],commit_components_job_1[a105_0x39cdbe(0x1e6)]])],FlosumSyncJob),exports[a105_0x39cdbe(0x1e7)]=FlosumSyncJob;