const a106_0x655bb=a106_0x14c4;function a106_0x14c4(_0x43c839,_0x22ccbc){const _0xdca88b=a106_0x1afd();return a106_0x14c4=function(_0x21c979,_0x22d9bd){_0x21c979=_0x21c979-0x7c;let _0x1afd96=_0xdca88b[_0x21c979];return _0x1afd96;},a106_0x14c4(_0x43c839,_0x22ccbc);}(function(_0x37029f,_0x1b401a){const _0x25af69=a106_0x14c4,_0x101011=_0x37029f();while(!![]){try{const _0x50075e=-parseInt(_0x25af69(0x98))/0x1+-parseInt(_0x25af69(0x84))/0x2+-parseInt(_0x25af69(0x94))/0x3*(-parseInt(_0x25af69(0x8b))/0x4)+parseInt(_0x25af69(0xbb))/0x5*(parseInt(_0x25af69(0xaf))/0x6)+-parseInt(_0x25af69(0x7d))/0x7*(parseInt(_0x25af69(0xac))/0x8)+parseInt(_0x25af69(0x90))/0x9+-parseInt(_0x25af69(0x7c))/0xa*(parseInt(_0x25af69(0x9b))/0xb);if(_0x50075e===_0x1b401a)break;else _0x101011['push'](_0x101011['shift']());}catch(_0x4e0802){_0x101011['push'](_0x101011['shift']());}}}(a106_0x1afd,0x2d541));const a106_0x22d9bd=(function(){let _0x20fe24=!![];return function(_0x4c78c9,_0x59671d){const _0x1046c0=_0x20fe24?function(){const _0x57e948=a106_0x14c4;if(_0x59671d){const _0x2c708d=_0x59671d[_0x57e948(0xc1)](_0x4c78c9,arguments);return _0x59671d=null,_0x2c708d;}}:function(){};return _0x20fe24=![],_0x1046c0;};}()),a106_0x21c979=a106_0x22d9bd(this,function(){const _0x38dda3=a106_0x14c4;return a106_0x21c979['toString']()[_0x38dda3(0x80)](_0x38dda3(0xc5))['toString']()[_0x38dda3(0xa1)](a106_0x21c979)[_0x38dda3(0x80)](_0x38dda3(0xc5));});a106_0x21c979();'use strict';var __decorate=this&&this['__decorate']||function(_0x3b115c,_0xb90aab,_0x29bd44,_0x183800){const _0x284b11=a106_0x14c4;var _0x1fec8f=arguments['length'],_0x13e2b9=_0x1fec8f<0x3?_0xb90aab:_0x183800===null?_0x183800=Object['getOwnPropertyDescriptor'](_0xb90aab,_0x29bd44):_0x183800,_0x22f712;if(typeof Reflect===_0x284b11(0xa5)&&typeof Reflect[_0x284b11(0x9a)]==='function')_0x13e2b9=Reflect[_0x284b11(0x9a)](_0x3b115c,_0xb90aab,_0x29bd44,_0x183800);else{for(var _0x303841=_0x3b115c[_0x284b11(0x7f)]-0x1;_0x303841>=0x0;_0x303841--)if(_0x22f712=_0x3b115c[_0x303841])_0x13e2b9=(_0x1fec8f<0x3?_0x22f712(_0x13e2b9):_0x1fec8f>0x3?_0x22f712(_0xb90aab,_0x29bd44,_0x13e2b9):_0x22f712(_0xb90aab,_0x29bd44))||_0x13e2b9;}return _0x1fec8f>0x3&&_0x13e2b9&&Object[_0x284b11(0xb5)](_0xb90aab,_0x29bd44,_0x13e2b9),_0x13e2b9;},__metadata=this&&this[a106_0x655bb(0x8d)]||function(_0x292ab1,_0x3e6c20){const _0x53adf5=a106_0x655bb;if(typeof Reflect===_0x53adf5(0xa5)&&typeof Reflect['metadata']===_0x53adf5(0x8f))return Reflect['metadata'](_0x292ab1,_0x3e6c20);};Object[a106_0x655bb(0xb5)](exports,a106_0x655bb(0x88),{'value':!![]}),exports[a106_0x655bb(0xcc)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x655bb(0xc8)),typedi_1=require('typedi'),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a106_0x655bb(0xbe)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a106_0x655bb(0xce)),commit_components_dto_1=require(a106_0x655bb(0x93)),commit_components_job_1=require(a106_0x655bb(0xab));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x3aea24,_0x3c6112,_0x3b20eb){const _0x42bcb9=a106_0x655bb;this[_0x42bcb9(0xb9)]=_0x3aea24,this[_0x42bcb9(0x95)]=_0x3c6112,this[_0x42bcb9(0xb3)]=_0x3b20eb;}async[a106_0x655bb(0xb0)](){const _0x46a87d=a106_0x655bb;let _0x3ea813=await this['repository']['branches'][_0x46a87d(0xcd)](this['syncData']['branchName'])['catch'](()=>null);!_0x3ea813&&(_0x3ea813=await this[_0x46a87d(0xd1)][_0x46a87d(0xcf)][_0x46a87d(0xa7)]({'name':this['syncData'][_0x46a87d(0xca)]})),this[_0x46a87d(0x87)]=_0x3ea813;}async[a106_0x655bb(0xba)](){const _0x42d619=a106_0x655bb;return this[_0x42d619(0xa6)]['repositoryId']?this[_0x42d619(0xb9)][_0x42d619(0x9c)](this[_0x42d619(0xa6)][_0x42d619(0x8e)]):this[_0x42d619(0xb9)][_0x42d619(0xa2)](this[_0x42d619(0xa6)][_0x42d619(0xae)]);}async[a106_0x655bb(0x91)](){const _0x369005=a106_0x655bb,_0x23c769=await this[_0x369005(0xba)](),_0xf83f1a=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x369005(0x95)]),_0x3dd34a=await _0xf83f1a[_0x369005(0x86)](_0x23c769);return _0x3dd34a;}async[a106_0x655bb(0xa8)](_0x3c656c){const _0x9b1c92=a106_0x655bb,_0x492a00=new commit_components_dto_1[(_0x9b1c92(0x9d))]();return _0x492a00['message']=_0x9b1c92(0xc3),_0x492a00['user']={'name':constants_1[_0x9b1c92(0x96)],'email':constants_1[_0x9b1c92(0xc0)]},_0x492a00['components']={'writed':await this[_0x9b1c92(0x91)]()},_0x492a00[_0x9b1c92(0xb1)]=_0x3c656c,_0x492a00[_0x9b1c92(0x97)]=this['repository'],_0x492a00['branch']=this[_0x9b1c92(0x87)],_0x492a00[_0x9b1c92(0x85)]=!![],_0x492a00[_0x9b1c92(0x99)]=this['provider'],_0x492a00;}async['checkSyncStatus'](){const _0x198a8f=a106_0x655bb,_0x45e7bf=await this[_0x198a8f(0xb9)][_0x198a8f(0xbc)](this['syncData']),_0x17b022=await this[_0x198a8f(0x95)][_0x198a8f(0xbd)](_0x45e7bf)['then'](_0x214668=>typeof _0x214668===_0x198a8f(0xb2)?JSON[_0x198a8f(0x81)](_0x214668):_0x214668)[_0x198a8f(0xa9)](()=>({}));if(_0x17b022[this[_0x198a8f(0xd1)][_0x198a8f(0x83)]]){if(_0x17b022[this[_0x198a8f(0xd1)]['gitUrl']]['lastCommit']===this[_0x198a8f(0x87)][_0x198a8f(0xa3)])return!![];}return![];}async[a106_0x655bb(0xa0)](){const _0xeeeb05=a106_0x655bb,_0x4d932e=await this[_0xeeeb05(0xd1)][_0xeeeb05(0xcf)][_0xeeeb05(0xcd)](this['branch'][_0xeeeb05(0x92)]);await this[_0xeeeb05(0xb4)][_0xeeeb05(0xd0)](this['prefix']+_0xeeeb05(0xbf));const _0x1c75a8={[this[_0xeeeb05(0xd1)]['gitUrl']]:{'lastCommit':_0x4d932e[_0xeeeb05(0xa3)]}};await this['salesforceSync'][_0xeeeb05(0xcb)](this[_0xeeeb05(0xa6)],_0x1c75a8);}async[a106_0x655bb(0x86)]({syncRecord:_0xb93ebc,repository:_0x35b4c9,convertToSFDX:_0x15007a,provider:_0x148a05}){const _0x219995=a106_0x655bb;this[_0x219995(0xa6)]=_0xb93ebc,this[_0x219995(0x99)]=_0x148a05,this[_0x219995(0xd1)]=_0x35b4c9,this[_0x219995(0xb4)]=typedi_1[_0x219995(0x89)][_0x219995(0xa4)](salesforce_logger_v3_service_1[_0x219995(0xb8)]),this[_0x219995(0xc7)]=_0x219995(0x82)+this['syncData'][_0x219995(0x7e)]+']\x20[Branch:\x20'+this['syncData'][_0x219995(0xca)]+']';try{await this['sfLogger'][_0x219995(0xd0)](this[_0x219995(0xc7)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x219995(0x9f)](),await this[_0x219995(0xb9)][_0x219995(0xb7)](this[_0x219995(0xa6)],_0x219995(0xc2)),this[_0x219995(0xb4)][_0x219995(0xd0)](this[_0x219995(0xc7)]+_0x219995(0xaa)),await this[_0x219995(0xb0)](),await this[_0x219995(0xb4)][_0x219995(0xd0)](this[_0x219995(0xc7)]+_0x219995(0x9e))[_0x219995(0x9f)]();const _0x4247d1=await this[_0x219995(0x8c)]();this[_0x219995(0xb4)][_0x219995(0xd0)](this[_0x219995(0xc7)]+_0x219995(0xc4)+_0x4247d1+'.');if(_0x4247d1){await this[_0x219995(0xb9)]['setStatus'](this[_0x219995(0xa6)],'Completed'),await this[_0x219995(0xb4)]['log'](this[_0x219995(0xc7)]+'\x20Branch\x20synchronized.\x20Skip')[_0x219995(0x9f)]();return;}const _0x13e3ff=await this['getCommitDto'](_0x15007a);await this[_0x219995(0xb3)]['run'](_0x13e3ff,this[_0x219995(0xc7)]),await this['salesforceSync'][_0x219995(0xb7)](this[_0x219995(0xa6)],'Completed'),await this[_0x219995(0xa0)](),this[_0x219995(0xb4)][_0x219995(0xd0)](this[_0x219995(0xc7)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x584cc9){throw _0x584cc9;}finally{await this[_0x219995(0xb4)][_0x219995(0x9f)]();}}};function a106_0x1afd(){const _0x368991=['repositoryId','function','2892240edhxwv','getComponents','name','../dto/commit-components.dto','1527OpITGo','salesforceService','DEFAULT_GIT_USER_NAME','repo','28143rJhWsr','provider','decorate','605cMholl','getComponentsFromRepository','CommitComponentsDto','\x20Checking\x20sync\x20status.','send','updateLastCommit','constructor','getBranchComponents','sha','get','object','syncData','create','getCommitDto','catch','\x20Checking\x20repository\x20on\x20Flosum\x20side.','./commit-components.job','48ZQEflV','SalesforceService','branchId','6VzREOi','createBranchIfNotExists','convertToSFDX','string','commitJob','sfLogger','defineProperty','design:paramtypes','setStatus','SalesforceLogger3','salesforceSync','getComponentIds','1495295faxWVz','getRemoteStateAttachmentId','retrieveAttachment','../../salesforce/services/salesforce-retriever.service','\x20Update\x20remote\x20state.','DEFAULT_GIT_USER_EMAIL','apply','In\x20Progress','Sync\x20repository','\x20Sync\x20status\x20','(((.+)+)+)+$','SalesforceSyncService','prefix','../../salesforce/services/salesforce-logger-v3.service','CommitComponentsJob','branchName','updateRemoteState','FlosumSyncJob','getOne','../../salesforce/services/salesforce.service','branches','log','repository','18630EPYsWU','25522gKXlaE','repositoryName','length','search','parse','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','gitUrl','675502zUqznY','force','run','branch','__esModule','Container','Service','436Ovuoxf','checkSyncStatus','__metadata'];a106_0x1afd=function(){return _0x368991;};return a106_0x1afd();}FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x655bb(0x8a)])({'transient':!![]}),__metadata(a106_0x655bb(0xb6),[salesforce_sync_service_1[a106_0x655bb(0xc6)],salesforce_service_1[a106_0x655bb(0xad)],commit_components_job_1[a106_0x655bb(0xc9)]])],FlosumSyncJob),exports[a106_0x655bb(0xcc)]=FlosumSyncJob;