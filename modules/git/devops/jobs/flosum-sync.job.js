const a75_0x2a93e7=a75_0x2032;(function(_0x368177,_0x4763eb){const _0x2422de=a75_0x2032,_0x2bc842=_0x368177();while(!![]){try{const _0x52aef7=parseInt(_0x2422de(0x1d5))/0x1+parseInt(_0x2422de(0x1e6))/0x2+-parseInt(_0x2422de(0x20c))/0x3*(parseInt(_0x2422de(0x1c2))/0x4)+parseInt(_0x2422de(0x1c6))/0x5*(-parseInt(_0x2422de(0x201))/0x6)+parseInt(_0x2422de(0x1c8))/0x7*(-parseInt(_0x2422de(0x1ec))/0x8)+parseInt(_0x2422de(0x1cf))/0x9+-parseInt(_0x2422de(0x1f5))/0xa;if(_0x52aef7===_0x4763eb)break;else _0x2bc842['push'](_0x2bc842['shift']());}catch(_0x554521){_0x2bc842['push'](_0x2bc842['shift']());}}}(a75_0x2fb8,0xecd26));const a75_0x39ec59=(function(){let _0x5d620a=!![];return function(_0x2ebe55,_0x24e103){const _0x22a82b=_0x5d620a?function(){const _0x4a8988=a75_0x2032;if(_0x24e103){const _0x4f99f0=_0x24e103[_0x4a8988(0x1db)](_0x2ebe55,arguments);return _0x24e103=null,_0x4f99f0;}}:function(){};return _0x5d620a=![],_0x22a82b;};}()),a75_0x30ad4f=a75_0x39ec59(this,function(){const _0x4db882=a75_0x2032;return a75_0x30ad4f[_0x4db882(0x1fc)]()[_0x4db882(0x20a)](_0x4db882(0x1f8))[_0x4db882(0x1fc)]()[_0x4db882(0x1bb)](a75_0x30ad4f)[_0x4db882(0x20a)](_0x4db882(0x1f8));});a75_0x30ad4f();'use strict';function a75_0x2fb8(){const _0x180ee6=['salesforceService','salesforceSync','name','getBranchComponents','364623CAGaAP','catch','../../salesforce/services/salesforce.service','FlosumSyncJob','branchId','getComponents','apply',']\x20[Branch:\x20','repository','user','checkSyncStatus','commitJob','\x20Start\x20Flosum\x20sync\x20job','updateRemoteState','\x20Update\x20remote\x20state.','repo','function','3614620TNDTzO','message','syncData','send','../../../../constants','SalesforceService','14412808gDxgfW','repositoryId','\x20Checking\x20repository\x20on\x20Flosum\x20side.','\x20Flosum\x20sync\x20job\x20done.','get','\x20Sync\x20status\x20','updateLastCommit','SalesforceLogger3','../../salesforce/services/salesforce-retriever.service','3436250YzHEqz','retrieveAttachment','create','(((.+)+)+)+$','sfLogger','getComponentsFromRepository','branch','toString','CommitComponentsDto','repositoryName','design:paramtypes','sha','927204voukCN','provider','branches','getOne','\x20Checking\x20sync\x20status.','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','__metadata','convertToSFDX','lastCommit','search','prefix','114wsCxHp','run','setStatus','DEFAULT_GIT_USER_NAME','metadata','getOwnPropertyDescriptor','constructor','Sync\x20repository','getCommitDto','getComponentIds','DEFAULT_GIT_USER_EMAIL','Container','defineProperty','45284LMuvsj','../dto/commit-components.dto','../../salesforce/services/salesforce-sync.service','length','15Gbvnqh','decorate','7SxooSs','gitUrl','Completed','object','branchName','log','__decorate','16534035TQnurL','createBranchIfNotExists'];a75_0x2fb8=function(){return _0x180ee6;};return a75_0x2fb8();}function a75_0x2032(_0x46eb07,_0x10e430){const _0x264df7=a75_0x2fb8();return a75_0x2032=function(_0x30ad4f,_0x39ec59){_0x30ad4f=_0x30ad4f-0x1b7;let _0x2fb850=_0x264df7[_0x30ad4f];return _0x2fb850;},a75_0x2032(_0x46eb07,_0x10e430);}var __decorate=this&&this[a75_0x2a93e7(0x1ce)]||function(_0x4d44fa,_0x5c2192,_0x1eddba,_0x486704){const _0x7a2cc8=a75_0x2a93e7;var _0x22b0bd=arguments[_0x7a2cc8(0x1c5)],_0x5a3670=_0x22b0bd<0x3?_0x5c2192:_0x486704===null?_0x486704=Object[_0x7a2cc8(0x1ba)](_0x5c2192,_0x1eddba):_0x486704,_0xfa3aec;if(typeof Reflect===_0x7a2cc8(0x1cb)&&typeof Reflect[_0x7a2cc8(0x1c7)]===_0x7a2cc8(0x1e5))_0x5a3670=Reflect[_0x7a2cc8(0x1c7)](_0x4d44fa,_0x5c2192,_0x1eddba,_0x486704);else{for(var _0x13ea10=_0x4d44fa[_0x7a2cc8(0x1c5)]-0x1;_0x13ea10>=0x0;_0x13ea10--)if(_0xfa3aec=_0x4d44fa[_0x13ea10])_0x5a3670=(_0x22b0bd<0x3?_0xfa3aec(_0x5a3670):_0x22b0bd>0x3?_0xfa3aec(_0x5c2192,_0x1eddba,_0x5a3670):_0xfa3aec(_0x5c2192,_0x1eddba))||_0x5a3670;}return _0x22b0bd>0x3&&_0x5a3670&&Object[_0x7a2cc8(0x1c1)](_0x5c2192,_0x1eddba,_0x5a3670),_0x5a3670;},__metadata=this&&this[a75_0x2a93e7(0x207)]||function(_0x46aad2,_0x21f3d4){const _0x1e7f7d=a75_0x2a93e7;if(typeof Reflect==='object'&&typeof Reflect[_0x1e7f7d(0x1b9)]===_0x1e7f7d(0x1e5))return Reflect[_0x1e7f7d(0x1b9)](_0x46aad2,_0x21f3d4);};Object[a75_0x2a93e7(0x1c1)](exports,'__esModule',{'value':!![]}),exports[a75_0x2a93e7(0x1d8)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require('typedi'),constants_1=require(a75_0x2a93e7(0x1ea)),salesforce_retriever_service_1=require(a75_0x2a93e7(0x1f4)),salesforce_sync_service_1=require(a75_0x2a93e7(0x1c4)),salesforce_service_1=require(a75_0x2a93e7(0x1d7)),commit_components_dto_1=require(a75_0x2a93e7(0x1c3)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x3edc00,_0x4ddbbd,_0x1c6b96){const _0x2e5d31=a75_0x2a93e7;this[_0x2e5d31(0x1d2)]=_0x3edc00,this[_0x2e5d31(0x1d1)]=_0x4ddbbd,this[_0x2e5d31(0x1e0)]=_0x1c6b96;}async['createBranchIfNotExists'](){const _0x3c9ba4=a75_0x2a93e7;let _0x515fbf=await this[_0x3c9ba4(0x1dd)][_0x3c9ba4(0x203)][_0x3c9ba4(0x204)](this['syncData'][_0x3c9ba4(0x1cc)])[_0x3c9ba4(0x1d6)](()=>null);!_0x515fbf&&(_0x515fbf=await this[_0x3c9ba4(0x1dd)][_0x3c9ba4(0x203)][_0x3c9ba4(0x1f7)]({'name':this[_0x3c9ba4(0x1e8)][_0x3c9ba4(0x1cc)]})),this[_0x3c9ba4(0x1fb)]=_0x515fbf;}async[a75_0x2a93e7(0x1be)](){const _0x38beca=a75_0x2a93e7;return this[_0x38beca(0x1e8)][_0x38beca(0x1ed)]?this[_0x38beca(0x1d2)][_0x38beca(0x1fa)](this[_0x38beca(0x1e8)][_0x38beca(0x1ed)]):this['salesforceSync'][_0x38beca(0x1d4)](this[_0x38beca(0x1e8)][_0x38beca(0x1d9)]);}async[a75_0x2a93e7(0x1da)](){const _0x55e678=a75_0x2a93e7,_0x394fc1=await this[_0x55e678(0x1be)](),_0x3cdad4=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x55e678(0x1d1)]),_0x1da046=await _0x3cdad4[_0x55e678(0x20d)](_0x394fc1);return _0x1da046;}async[a75_0x2a93e7(0x1bd)](_0x790cf5){const _0x1d7c93=a75_0x2a93e7,_0x59ee76=new commit_components_dto_1[(_0x1d7c93(0x1fd))]();return _0x59ee76[_0x1d7c93(0x1e7)]=_0x1d7c93(0x1bc),_0x59ee76[_0x1d7c93(0x1de)]={'name':constants_1[_0x1d7c93(0x1b8)],'email':constants_1[_0x1d7c93(0x1bf)]},_0x59ee76['components']={'writed':await this[_0x1d7c93(0x1da)]()},_0x59ee76[_0x1d7c93(0x208)]=_0x790cf5,_0x59ee76[_0x1d7c93(0x1e4)]=this['repository'],_0x59ee76[_0x1d7c93(0x1fb)]=this['branch'],_0x59ee76['force']=!![],_0x59ee76[_0x1d7c93(0x202)]=this[_0x1d7c93(0x202)],_0x59ee76;}async[a75_0x2a93e7(0x1df)](){const _0x1e5d4b=a75_0x2a93e7,_0x5ee5f3=await this[_0x1e5d4b(0x1d2)]['getRemoteStateAttachmentId'](this[_0x1e5d4b(0x1e8)]),_0x4f695f=await this[_0x1e5d4b(0x1d1)][_0x1e5d4b(0x1f6)](_0x5ee5f3)['then'](_0x234953=>typeof _0x234953==='string'?JSON['parse'](_0x234953):_0x234953)[_0x1e5d4b(0x1d6)](()=>({}));if(_0x4f695f[this[_0x1e5d4b(0x1dd)][_0x1e5d4b(0x1c9)]]){if(_0x4f695f[this['repository'][_0x1e5d4b(0x1c9)]][_0x1e5d4b(0x209)]===this['branch'][_0x1e5d4b(0x200)])return!![];}return![];}async[a75_0x2a93e7(0x1f2)](){const _0x3bfbe5=a75_0x2a93e7,_0x150427=await this[_0x3bfbe5(0x1dd)][_0x3bfbe5(0x203)][_0x3bfbe5(0x204)](this['branch'][_0x3bfbe5(0x1d3)]);await this['sfLogger'][_0x3bfbe5(0x1cd)](this[_0x3bfbe5(0x20b)]+_0x3bfbe5(0x1e3));const _0x49179e={[this['repository'][_0x3bfbe5(0x1c9)]]:{'lastCommit':_0x150427[_0x3bfbe5(0x200)]}};await this['salesforceSync'][_0x3bfbe5(0x1e2)](this[_0x3bfbe5(0x1e8)],_0x49179e);}async[a75_0x2a93e7(0x20d)]({syncRecord:_0x12b0ac,repository:_0x232c41,convertToSFDX:_0x2095c2,provider:_0x46a51e}){const _0x53c429=a75_0x2a93e7;this[_0x53c429(0x1e8)]=_0x12b0ac,this['provider']=_0x46a51e,this[_0x53c429(0x1dd)]=_0x232c41,this['sfLogger']=typedi_1[_0x53c429(0x1c0)][_0x53c429(0x1f0)](salesforce_logger_v3_service_1[_0x53c429(0x1f3)]),this['prefix']=_0x53c429(0x206)+this[_0x53c429(0x1e8)][_0x53c429(0x1fe)]+_0x53c429(0x1dc)+this[_0x53c429(0x1e8)]['branchName']+']';try{await this[_0x53c429(0x1f9)][_0x53c429(0x1cd)](this[_0x53c429(0x20b)]+_0x53c429(0x1e1))[_0x53c429(0x1e9)](),await this[_0x53c429(0x1d2)][_0x53c429(0x1b7)](this[_0x53c429(0x1e8)],'In\x20Progress'),this[_0x53c429(0x1f9)][_0x53c429(0x1cd)](this['prefix']+_0x53c429(0x1ee)),await this[_0x53c429(0x1d0)](),await this[_0x53c429(0x1f9)][_0x53c429(0x1cd)](this[_0x53c429(0x20b)]+_0x53c429(0x205))[_0x53c429(0x1e9)]();const _0x326026=await this['checkSyncStatus']();this[_0x53c429(0x1f9)][_0x53c429(0x1cd)](this[_0x53c429(0x20b)]+_0x53c429(0x1f1)+_0x326026+'.');if(_0x326026){await this[_0x53c429(0x1d2)]['setStatus'](this['syncData'],_0x53c429(0x1ca)),await this[_0x53c429(0x1f9)]['log'](this[_0x53c429(0x20b)]+'\x20Branch\x20synchronized.\x20Skip')[_0x53c429(0x1e9)]();return;}const _0x3b27a1=await this['getCommitDto'](_0x2095c2);await this[_0x53c429(0x1e0)][_0x53c429(0x20d)](_0x3b27a1,this[_0x53c429(0x20b)]),await this[_0x53c429(0x1d2)][_0x53c429(0x1b7)](this[_0x53c429(0x1e8)],_0x53c429(0x1ca)),await this[_0x53c429(0x1f2)](),this['sfLogger'][_0x53c429(0x1cd)](this[_0x53c429(0x20b)]+_0x53c429(0x1ef));}catch(_0x472145){throw _0x472145;}finally{await this[_0x53c429(0x1f9)][_0x53c429(0x1e9)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a75_0x2a93e7(0x1ff),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a75_0x2a93e7(0x1eb)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a75_0x2a93e7(0x1d8)]=FlosumSyncJob;