const a107_0xb950b6=a107_0x149d;(function(_0x4d3a6d,_0x455aeb){const _0x482662=a107_0x149d,_0x43a07d=_0x4d3a6d();while(!![]){try{const _0x15ba6b=-parseInt(_0x482662(0x216))/0x1*(parseInt(_0x482662(0x227))/0x2)+-parseInt(_0x482662(0x243))/0x3*(parseInt(_0x482662(0x236))/0x4)+-parseInt(_0x482662(0x229))/0x5*(-parseInt(_0x482662(0x221))/0x6)+parseInt(_0x482662(0x24a))/0x7*(parseInt(_0x482662(0x206))/0x8)+parseInt(_0x482662(0x21a))/0x9*(-parseInt(_0x482662(0x20e))/0xa)+parseInt(_0x482662(0x204))/0xb+parseInt(_0x482662(0x235))/0xc*(parseInt(_0x482662(0x248))/0xd);if(_0x15ba6b===_0x455aeb)break;else _0x43a07d['push'](_0x43a07d['shift']());}catch(_0x16cb2b){_0x43a07d['push'](_0x43a07d['shift']());}}}(a107_0x48b6,0xc3c78));const a107_0x741568=(function(){let _0x29148b=!![];return function(_0x43fad1,_0x5e1d84){const _0x5b7f23=_0x29148b?function(){const _0x554685=a107_0x149d;if(_0x5e1d84){const _0x5d654c=_0x5e1d84[_0x554685(0x220)](_0x43fad1,arguments);return _0x5e1d84=null,_0x5d654c;}}:function(){};return _0x29148b=![],_0x5b7f23;};}()),a107_0x1bebe3=a107_0x741568(this,function(){const _0x2b0fc8=a107_0x149d;return a107_0x1bebe3[_0x2b0fc8(0x215)]()[_0x2b0fc8(0x228)](_0x2b0fc8(0x20c))[_0x2b0fc8(0x215)]()['constructor'](a107_0x1bebe3)[_0x2b0fc8(0x228)]('(((.+)+)+)+$');});a107_0x1bebe3();'use strict';var __decorate=this&&this[a107_0xb950b6(0x23b)]||function(_0x27dbed,_0x33c449,_0x3f80cf,_0x53ebc4){const _0x2e5fac=a107_0xb950b6;var _0x45f095=arguments[_0x2e5fac(0x20a)],_0x44f97a=_0x45f095<0x3?_0x33c449:_0x53ebc4===null?_0x53ebc4=Object['getOwnPropertyDescriptor'](_0x33c449,_0x3f80cf):_0x53ebc4,_0x13ab6;if(typeof Reflect===_0x2e5fac(0x211)&&typeof Reflect[_0x2e5fac(0x1fe)]===_0x2e5fac(0x208))_0x44f97a=Reflect[_0x2e5fac(0x1fe)](_0x27dbed,_0x33c449,_0x3f80cf,_0x53ebc4);else{for(var _0x3be276=_0x27dbed[_0x2e5fac(0x20a)]-0x1;_0x3be276>=0x0;_0x3be276--)if(_0x13ab6=_0x27dbed[_0x3be276])_0x44f97a=(_0x45f095<0x3?_0x13ab6(_0x44f97a):_0x45f095>0x3?_0x13ab6(_0x33c449,_0x3f80cf,_0x44f97a):_0x13ab6(_0x33c449,_0x3f80cf))||_0x44f97a;}return _0x45f095>0x3&&_0x44f97a&&Object[_0x2e5fac(0x21b)](_0x33c449,_0x3f80cf,_0x44f97a),_0x44f97a;},__metadata=this&&this[a107_0xb950b6(0x22f)]||function(_0x41ec32,_0x105b94){const _0x4d6925=a107_0xb950b6;if(typeof Reflect===_0x4d6925(0x211)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x41ec32,_0x105b94);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a107_0xb950b6(0x209)]=void 0x0;function a107_0x48b6(){const _0x528c2c=['run','sfLogger','salesforceService','__metadata','Completed','SalesforceRetrieverService','../dto/commit-components.dto','\x20Start\x20Flosum\x20sync\x20job','parse','3072204JNEqEC','85444Hnxrho','name','SalesforceService','\x20Sync\x20status\x20','SalesforceSyncService','__decorate','branchName','create','then','string','DEFAULT_GIT_USER_EMAIL','getBranchComponents',']\x20[Branch:\x20','171bAlDzV','getOne','setStatus','components','syncData','39WgRCmM','branch','21GjAMIm','\x20Branch\x20synchronized.\x20Skip','getCommitDto','createBranchIfNotExists','send','../../salesforce/services/salesforce.service','Service','checkSyncStatus','prefix','updateRemoteState','repositoryId','branchId','getComponentIds','get','getComponentsFromRepository','decorate','repositoryName','repo','salesforceSync','Container','\x20Flosum\x20sync\x20job\x20done.','7596820FPPmoc','commitJob','2936568axixQI','CommitComponentsDto','function','FlosumSyncJob','length','recordType','(((.+)+)+)+$','provider','16460CvhoYs','repository','sha','object','DEFAULT_GIT_USER_NAME','retrieveAttachment','gitUrl','toString','818177WWJEzR','CommitComponentsJob','recordTypeName','../../../../constants','855YkycYE','defineProperty','getComponents','branches','updateLastCommit','message','apply','2604912fSnZqW','log','../../salesforce/services/salesforce-retriever.service','design:paramtypes','\x20Update\x20remote\x20state.','Sync\x20repository','2sUrcpd','search','5aqGJbe','getRemoteStateAttachmentId','catch'];a107_0x48b6=function(){return _0x528c2c;};return a107_0x48b6();}const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require('typedi'),constants_1=require(a107_0xb950b6(0x219)),salesforce_retriever_service_1=require(a107_0xb950b6(0x223)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a107_0xb950b6(0x1f4)),commit_components_dto_1=require(a107_0xb950b6(0x232)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x59b803,_0x1fb1bc,_0x530925){const _0x11fed2=a107_0xb950b6;this[_0x11fed2(0x201)]=_0x59b803,this['salesforceService']=_0x1fb1bc,this[_0x11fed2(0x205)]=_0x530925;}async[a107_0xb950b6(0x24d)](){const _0x1649f3=a107_0xb950b6;let _0x56fd83=await this[_0x1649f3(0x20f)]['branches'][_0x1649f3(0x244)](this['syncData'][_0x1649f3(0x23c)])['catch'](()=>null);!_0x56fd83&&(_0x56fd83=await this[_0x1649f3(0x20f)][_0x1649f3(0x21d)][_0x1649f3(0x23d)]({'name':this[_0x1649f3(0x247)][_0x1649f3(0x23c)]})),this[_0x1649f3(0x249)]=_0x56fd83;}async[a107_0xb950b6(0x1fb)](){const _0x28451f=a107_0xb950b6;return this['syncData'][_0x28451f(0x1f9)]?this['salesforceSync'][_0x28451f(0x1fd)](this[_0x28451f(0x247)][_0x28451f(0x1f9)]):this[_0x28451f(0x201)][_0x28451f(0x241)](this[_0x28451f(0x247)][_0x28451f(0x1fa)]);}async[a107_0xb950b6(0x21c)](){const _0x4cce9d=a107_0xb950b6,_0x2f3eef=await this[_0x4cce9d(0x1fb)](),_0x271cd9=new salesforce_retriever_service_1[(_0x4cce9d(0x231))](this[_0x4cce9d(0x22e)]),_0x27bb5a=await _0x271cd9[_0x4cce9d(0x22c)](_0x2f3eef);return _0x27bb5a;}async[a107_0xb950b6(0x24c)](_0x57f32f){const _0x5eeb2f=a107_0xb950b6,_0x472611=new commit_components_dto_1[(_0x5eeb2f(0x207))]();return _0x472611[_0x5eeb2f(0x21f)]=_0x5eeb2f(0x226),_0x472611['user']={'name':constants_1[_0x5eeb2f(0x212)],'email':constants_1[_0x5eeb2f(0x240)]},_0x472611[_0x5eeb2f(0x246)]={'writed':await this[_0x5eeb2f(0x21c)]()},_0x472611['convertToSFDX']=_0x57f32f,_0x472611[_0x5eeb2f(0x200)]=this['repository'],_0x472611['branch']=this[_0x5eeb2f(0x249)],_0x472611['force']=!![],_0x472611['provider']=this[_0x5eeb2f(0x20d)],_0x472611[_0x5eeb2f(0x20b)]=this[_0x5eeb2f(0x247)][_0x5eeb2f(0x218)],_0x472611;}async[a107_0xb950b6(0x1f6)](){const _0x337f56=a107_0xb950b6,_0x30d13a=await this['salesforceSync'][_0x337f56(0x22a)](this[_0x337f56(0x247)]),_0xb25388=await this[_0x337f56(0x22e)][_0x337f56(0x213)](_0x30d13a)[_0x337f56(0x23e)](_0x12979a=>typeof _0x12979a===_0x337f56(0x23f)?JSON[_0x337f56(0x234)](_0x12979a):_0x12979a)[_0x337f56(0x22b)](()=>({}));if(_0xb25388[this['repository'][_0x337f56(0x214)]]){if(_0xb25388[this[_0x337f56(0x20f)][_0x337f56(0x214)]]['lastCommit']===this[_0x337f56(0x249)][_0x337f56(0x210)])return!![];}return![];}async['updateLastCommit'](){const _0x2b1c3c=a107_0xb950b6,_0x215f5a=await this[_0x2b1c3c(0x20f)][_0x2b1c3c(0x21d)][_0x2b1c3c(0x244)](this[_0x2b1c3c(0x249)][_0x2b1c3c(0x237)]);await this[_0x2b1c3c(0x22d)]['log'](this[_0x2b1c3c(0x1f7)]+_0x2b1c3c(0x225));const _0x547f0c={[this[_0x2b1c3c(0x20f)][_0x2b1c3c(0x214)]]:{'lastCommit':_0x215f5a['sha']}};await this[_0x2b1c3c(0x201)][_0x2b1c3c(0x1f8)](this['syncData'],_0x547f0c);}async['run']({syncRecord:_0x20c425,repository:_0x2a7f1f,convertToSFDX:_0x345ce0,provider:_0x210c56}){const _0x446a9d=a107_0xb950b6;this['syncData']=_0x20c425,this['provider']=_0x210c56,this['repository']=_0x2a7f1f,this[_0x446a9d(0x22d)]=typedi_1[_0x446a9d(0x202)][_0x446a9d(0x1fc)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x446a9d(0x1f7)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x446a9d(0x247)][_0x446a9d(0x1ff)]+_0x446a9d(0x242)+this['syncData']['branchName']+']';try{await this[_0x446a9d(0x22d)][_0x446a9d(0x222)](this[_0x446a9d(0x1f7)]+_0x446a9d(0x233))['send'](),await this[_0x446a9d(0x201)][_0x446a9d(0x245)](this['syncData'],'In\x20Progress'),this[_0x446a9d(0x22d)][_0x446a9d(0x222)](this[_0x446a9d(0x1f7)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x446a9d(0x24d)](),await this[_0x446a9d(0x22d)][_0x446a9d(0x222)](this[_0x446a9d(0x1f7)]+'\x20Checking\x20sync\x20status.')[_0x446a9d(0x1f3)]();const _0xc9b262=await this[_0x446a9d(0x1f6)]();this[_0x446a9d(0x22d)][_0x446a9d(0x222)](this['prefix']+_0x446a9d(0x239)+_0xc9b262+'.');if(_0xc9b262){await this['salesforceSync'][_0x446a9d(0x245)](this[_0x446a9d(0x247)],'Completed'),await this[_0x446a9d(0x22d)][_0x446a9d(0x222)](this[_0x446a9d(0x1f7)]+_0x446a9d(0x24b))[_0x446a9d(0x1f3)]();return;}const _0x3cd55a=await this['getCommitDto'](_0x345ce0);await this[_0x446a9d(0x205)]['run'](_0x3cd55a,this[_0x446a9d(0x1f7)]),await this[_0x446a9d(0x201)][_0x446a9d(0x245)](this[_0x446a9d(0x247)],_0x446a9d(0x230)),await this[_0x446a9d(0x21e)](),this[_0x446a9d(0x22d)][_0x446a9d(0x222)](this[_0x446a9d(0x1f7)]+_0x446a9d(0x203));}catch(_0xd23571){throw _0xd23571;}finally{await this[_0x446a9d(0x22d)][_0x446a9d(0x1f3)]();}}};function a107_0x149d(_0x104c4c,_0x470366){const _0x46c3d7=a107_0x48b6();return a107_0x149d=function(_0x1bebe3,_0x741568){_0x1bebe3=_0x1bebe3-0x1f3;let _0x48b648=_0x46c3d7[_0x1bebe3];return _0x48b648;},a107_0x149d(_0x104c4c,_0x470366);}FlosumSyncJob=__decorate([(0x0,typedi_1[a107_0xb950b6(0x1f5)])({'transient':!![]}),__metadata(a107_0xb950b6(0x224),[salesforce_sync_service_1[a107_0xb950b6(0x23a)],salesforce_service_1[a107_0xb950b6(0x238)],commit_components_job_1[a107_0xb950b6(0x217)]])],FlosumSyncJob),exports[a107_0xb950b6(0x209)]=FlosumSyncJob;