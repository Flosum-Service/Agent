const a106_0x473c5c=a106_0x3f0f;(function(_0x40b56d,_0x16450c){const _0x4f2e6a=a106_0x3f0f,_0x39c813=_0x40b56d();while(!![]){try{const _0xdad9b9=-parseInt(_0x4f2e6a(0x7a))/0x1+-parseInt(_0x4f2e6a(0xa3))/0x2+-parseInt(_0x4f2e6a(0xb4))/0x3+-parseInt(_0x4f2e6a(0xba))/0x4+parseInt(_0x4f2e6a(0x6d))/0x5*(-parseInt(_0x4f2e6a(0x91))/0x6)+-parseInt(_0x4f2e6a(0xad))/0x7*(-parseInt(_0x4f2e6a(0x9f))/0x8)+parseInt(_0x4f2e6a(0x8c))/0x9;if(_0xdad9b9===_0x16450c)break;else _0x39c813['push'](_0x39c813['shift']());}catch(_0x3346cb){_0x39c813['push'](_0x39c813['shift']());}}}(a106_0x4d59,0xa964e));const a106_0x5950bb=(function(){let _0x137e9c=!![];return function(_0x59e134,_0x21f6a){const _0x58200f=_0x137e9c?function(){const _0x278269=a106_0x3f0f;if(_0x21f6a){const _0x43e91c=_0x21f6a[_0x278269(0x72)](_0x59e134,arguments);return _0x21f6a=null,_0x43e91c;}}:function(){};return _0x137e9c=![],_0x58200f;};}()),a106_0x19f994=a106_0x5950bb(this,function(){const _0x300e59=a106_0x3f0f;return a106_0x19f994[_0x300e59(0xa8)]()[_0x300e59(0x84)](_0x300e59(0xac))[_0x300e59(0xa8)]()['constructor'](a106_0x19f994)[_0x300e59(0x84)](_0x300e59(0xac));});a106_0x19f994();'use strict';var __decorate=this&&this[a106_0x473c5c(0xbd)]||function(_0x7e6088,_0x220cbf,_0xaa437a,_0x42bf68){const _0x3798c4=a106_0x473c5c;var _0x474ad5=arguments[_0x3798c4(0x92)],_0x32c256=_0x474ad5<0x3?_0x220cbf:_0x42bf68===null?_0x42bf68=Object[_0x3798c4(0xaa)](_0x220cbf,_0xaa437a):_0x42bf68,_0x9436bd;if(typeof Reflect==='object'&&typeof Reflect[_0x3798c4(0x70)]===_0x3798c4(0x6e))_0x32c256=Reflect[_0x3798c4(0x70)](_0x7e6088,_0x220cbf,_0xaa437a,_0x42bf68);else{for(var _0x422e0b=_0x7e6088[_0x3798c4(0x92)]-0x1;_0x422e0b>=0x0;_0x422e0b--)if(_0x9436bd=_0x7e6088[_0x422e0b])_0x32c256=(_0x474ad5<0x3?_0x9436bd(_0x32c256):_0x474ad5>0x3?_0x9436bd(_0x220cbf,_0xaa437a,_0x32c256):_0x9436bd(_0x220cbf,_0xaa437a))||_0x32c256;}return _0x474ad5>0x3&&_0x32c256&&Object[_0x3798c4(0xc2)](_0x220cbf,_0xaa437a,_0x32c256),_0x32c256;},__metadata=this&&this[a106_0x473c5c(0xbb)]||function(_0x2b777b,_0x54c13b){const _0x27e353=a106_0x473c5c;if(typeof Reflect===_0x27e353(0x78)&&typeof Reflect[_0x27e353(0x8a)]==='function')return Reflect[_0x27e353(0x8a)](_0x2b777b,_0x54c13b);};Object[a106_0x473c5c(0xc2)](exports,'__esModule',{'value':!![]}),exports[a106_0x473c5c(0x86)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a106_0x473c5c(0xa9)),constants_1=require(a106_0x473c5c(0x9a)),salesforce_retriever_service_1=require(a106_0x473c5c(0x77)),salesforce_sync_service_1=require(a106_0x473c5c(0xa5)),salesforce_service_1=require(a106_0x473c5c(0xb5)),commit_components_dto_1=require(a106_0x473c5c(0xa6)),commit_components_job_1=require(a106_0x473c5c(0x6f));function a106_0x3f0f(_0x1d7520,_0x163ff7){const _0x42ad3f=a106_0x4d59();return a106_0x3f0f=function(_0x19f994,_0x5950bb){_0x19f994=_0x19f994-0x6c;let _0x4d5914=_0x42ad3f[_0x19f994];return _0x4d5914;},a106_0x3f0f(_0x1d7520,_0x163ff7);}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1a6d9f,_0x475524,_0x221985){const _0x17e7b5=a106_0x473c5c;this[_0x17e7b5(0xa4)]=_0x1a6d9f,this[_0x17e7b5(0x8e)]=_0x475524,this[_0x17e7b5(0x82)]=_0x221985;}async[a106_0x473c5c(0x99)](){const _0x5515d3=a106_0x473c5c;let _0x3ce5b6=await this[_0x5515d3(0x83)][_0x5515d3(0xb8)][_0x5515d3(0x97)](this[_0x5515d3(0x81)][_0x5515d3(0x80)])['catch'](()=>null);!_0x3ce5b6&&(_0x3ce5b6=await this[_0x5515d3(0x83)][_0x5515d3(0xb8)]['create']({'name':this[_0x5515d3(0x81)][_0x5515d3(0x80)]})),this['branch']=_0x3ce5b6;}async[a106_0x473c5c(0x89)](){const _0x2f0c52=a106_0x473c5c;return this[_0x2f0c52(0x81)][_0x2f0c52(0x76)]?this[_0x2f0c52(0xa4)][_0x2f0c52(0x9c)](this[_0x2f0c52(0x81)]['repositoryId']):this[_0x2f0c52(0xa4)]['getBranchComponents'](this['syncData'][_0x2f0c52(0xa2)]);}async[a106_0x473c5c(0x9e)](){const _0x1daa04=a106_0x473c5c,_0xf5efcd=await this[_0x1daa04(0x89)](),_0x4c7f51=new salesforce_retriever_service_1[(_0x1daa04(0xae))](this[_0x1daa04(0x8e)]),_0x403869=await _0x4c7f51[_0x1daa04(0x79)](_0xf5efcd);return _0x403869;}async[a106_0x473c5c(0xb9)](_0x185ed1){const _0x4771eb=a106_0x473c5c,_0x57cee6=new commit_components_dto_1['CommitComponentsDto']();return _0x57cee6[_0x4771eb(0x7c)]='Sync\x20repository',_0x57cee6[_0x4771eb(0x73)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x4771eb(0x9b)]},_0x57cee6[_0x4771eb(0x8f)]={'writed':await this[_0x4771eb(0x9e)]()},_0x57cee6[_0x4771eb(0xb3)]=_0x185ed1,_0x57cee6[_0x4771eb(0x7e)]=this['repository'],_0x57cee6[_0x4771eb(0x7d)]=this[_0x4771eb(0x7d)],_0x57cee6[_0x4771eb(0x8d)]=!![],_0x57cee6[_0x4771eb(0x75)]=this[_0x4771eb(0x75)],_0x57cee6;}async[a106_0x473c5c(0x93)](){const _0x387be7=a106_0x473c5c,_0x11e655=await this[_0x387be7(0xa4)][_0x387be7(0x6c)](this[_0x387be7(0x81)]),_0x5675a2=await this['salesforceService']['retrieveAttachment'](_0x11e655)[_0x387be7(0xb7)](_0x230b19=>typeof _0x230b19===_0x387be7(0xbe)?JSON[_0x387be7(0xa7)](_0x230b19):_0x230b19)[_0x387be7(0x7f)](()=>({}));if(_0x5675a2[this[_0x387be7(0x83)]['gitUrl']]){if(_0x5675a2[this['repository']['gitUrl']][_0x387be7(0x9d)]===this[_0x387be7(0x7d)][_0x387be7(0xbc)])return!![];}return![];}async[a106_0x473c5c(0x7b)](){const _0x40c781=a106_0x473c5c,_0x556531=await this[_0x40c781(0x83)][_0x40c781(0xb8)][_0x40c781(0x97)](this[_0x40c781(0x7d)][_0x40c781(0x94)]);await this[_0x40c781(0xab)][_0x40c781(0x95)](this[_0x40c781(0xc1)]+_0x40c781(0xb1));const _0x4e4638={[this[_0x40c781(0x83)]['gitUrl']]:{'lastCommit':_0x556531[_0x40c781(0xbc)]}};await this[_0x40c781(0xa4)][_0x40c781(0xb0)](this[_0x40c781(0x81)],_0x4e4638);}async['run']({syncRecord:_0x4ca709,repository:_0x572417,convertToSFDX:_0x9c1bf1,provider:_0xc19998}){const _0x178d8f=a106_0x473c5c;this[_0x178d8f(0x81)]=_0x4ca709,this[_0x178d8f(0x75)]=_0xc19998,this[_0x178d8f(0x83)]=_0x572417,this[_0x178d8f(0xab)]=typedi_1[_0x178d8f(0x85)][_0x178d8f(0xb2)](salesforce_logger_v3_service_1[_0x178d8f(0xa1)]),this[_0x178d8f(0xc1)]=_0x178d8f(0xb6)+this['syncData']['repositoryName']+_0x178d8f(0x96)+this[_0x178d8f(0x81)][_0x178d8f(0x80)]+']';try{await this[_0x178d8f(0xab)][_0x178d8f(0x95)](this[_0x178d8f(0xc1)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x178d8f(0x90)](),await this['salesforceSync'][_0x178d8f(0x8b)](this[_0x178d8f(0x81)],_0x178d8f(0x74)),this[_0x178d8f(0xab)][_0x178d8f(0x95)](this[_0x178d8f(0xc1)]+_0x178d8f(0x98)),await this['createBranchIfNotExists'](),await this[_0x178d8f(0xab)][_0x178d8f(0x95)](this[_0x178d8f(0xc1)]+'\x20Checking\x20sync\x20status.')[_0x178d8f(0x90)]();const _0x339c17=await this[_0x178d8f(0x93)]();this[_0x178d8f(0xab)][_0x178d8f(0x95)](this[_0x178d8f(0xc1)]+_0x178d8f(0x88)+_0x339c17+'.');if(_0x339c17){await this[_0x178d8f(0xa4)][_0x178d8f(0x8b)](this['syncData'],_0x178d8f(0xaf)),await this[_0x178d8f(0xab)][_0x178d8f(0x95)](this['prefix']+'\x20Branch\x20synchronized.\x20Skip')[_0x178d8f(0x90)]();return;}const _0x105781=await this[_0x178d8f(0xb9)](_0x9c1bf1);await this['commitJob'][_0x178d8f(0x79)](_0x105781,this[_0x178d8f(0xc1)]),await this[_0x178d8f(0xa4)][_0x178d8f(0x8b)](this[_0x178d8f(0x81)],_0x178d8f(0xaf)),await this[_0x178d8f(0x7b)](),this['sfLogger'][_0x178d8f(0x95)](this[_0x178d8f(0xc1)]+_0x178d8f(0xbf));}catch(_0x32e3f8){throw _0x32e3f8;}finally{await this[_0x178d8f(0xab)]['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a106_0x473c5c(0xa0),[salesforce_sync_service_1[a106_0x473c5c(0xc0)],salesforce_service_1[a106_0x473c5c(0x71)],commit_components_job_1[a106_0x473c5c(0x87)]])],FlosumSyncJob),exports[a106_0x473c5c(0x86)]=FlosumSyncJob;function a106_0x4d59(){const _0x484fb8=['salesforceService','components','send','7344iwCqKr','length','checkSyncStatus','name','log',']\x20[Branch:\x20','getOne','\x20Checking\x20repository\x20on\x20Flosum\x20side.','createBranchIfNotExists','../../../../constants','DEFAULT_GIT_USER_EMAIL','getComponentsFromRepository','lastCommit','getComponents','40hkRCQR','design:paramtypes','SalesforceLogger3','branchId','13520afaBFt','salesforceSync','../../salesforce/services/salesforce-sync.service','../dto/commit-components.dto','parse','toString','typedi','getOwnPropertyDescriptor','sfLogger','(((.+)+)+)+$','1643341vrxRms','SalesforceRetrieverService','Completed','updateRemoteState','\x20Update\x20remote\x20state.','get','convertToSFDX','3848220ZscsUk','../../salesforce/services/salesforce.service','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','then','branches','getCommitDto','5466160RhsBzt','__metadata','sha','__decorate','string','\x20Flosum\x20sync\x20job\x20done.','SalesforceSyncService','prefix','defineProperty','getRemoteStateAttachmentId','1660ERxQhq','function','./commit-components.job','decorate','SalesforceService','apply','user','In\x20Progress','provider','repositoryId','../../salesforce/services/salesforce-retriever.service','object','run','1182580UhGGyG','updateLastCommit','message','branch','repo','catch','branchName','syncData','commitJob','repository','search','Container','FlosumSyncJob','CommitComponentsJob','\x20Sync\x20status\x20','getComponentIds','metadata','setStatus','33885099VFforc','force'];a106_0x4d59=function(){return _0x484fb8;};return a106_0x4d59();}