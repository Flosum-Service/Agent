const a125_0xc0f4ec=a125_0x5d8f;(function(_0x259941,_0xc19e12){const _0x2f0772=a125_0x5d8f,_0x59bfd0=_0x259941();while(!![]){try{const _0x2aa0cb=-parseInt(_0x2f0772(0x1e5))/0x1+-parseInt(_0x2f0772(0x1ea))/0x2*(-parseInt(_0x2f0772(0x221))/0x3)+-parseInt(_0x2f0772(0x1d9))/0x4*(-parseInt(_0x2f0772(0x1e6))/0x5)+parseInt(_0x2f0772(0x1f8))/0x6*(parseInt(_0x2f0772(0x214))/0x7)+-parseInt(_0x2f0772(0x1f1))/0x8*(-parseInt(_0x2f0772(0x200))/0x9)+-parseInt(_0x2f0772(0x1db))/0xa+-parseInt(_0x2f0772(0x205))/0xb;if(_0x2aa0cb===_0xc19e12)break;else _0x59bfd0['push'](_0x59bfd0['shift']());}catch(_0x5cf6a0){_0x59bfd0['push'](_0x59bfd0['shift']());}}}(a125_0x315c,0xb3c94));function a125_0x5d8f(_0x53045d,_0x1443ea){const _0x37e798=a125_0x315c();return a125_0x5d8f=function(_0x48b06b,_0x16ba01){_0x48b06b=_0x48b06b-0x1ca;let _0x315cb0=_0x37e798[_0x48b06b];return _0x315cb0;},a125_0x5d8f(_0x53045d,_0x1443ea);}const a125_0x16ba01=(function(){let _0x40cfd9=!![];return function(_0x27ece6,_0x55d24d){const _0x3bf717=_0x40cfd9?function(){if(_0x55d24d){const _0x5d5b64=_0x55d24d['apply'](_0x27ece6,arguments);return _0x55d24d=null,_0x5d5b64;}}:function(){};return _0x40cfd9=![],_0x3bf717;};}()),a125_0x48b06b=a125_0x16ba01(this,function(){const _0xbeb9bc=a125_0x5d8f;return a125_0x48b06b[_0xbeb9bc(0x1ec)]()[_0xbeb9bc(0x20c)](_0xbeb9bc(0x1fd))[_0xbeb9bc(0x1ec)]()[_0xbeb9bc(0x1f0)](a125_0x48b06b)['search'](_0xbeb9bc(0x1fd));});a125_0x48b06b();'use strict';var __decorate=this&&this[a125_0xc0f4ec(0x1ed)]||function(_0x1e4ec5,_0x51d71f,_0x5d6cff,_0xa59ef8){const _0x33eb98=a125_0xc0f4ec;var _0x51be17=arguments[_0x33eb98(0x1fa)],_0x431f02=_0x51be17<0x3?_0x51d71f:_0xa59ef8===null?_0xa59ef8=Object['getOwnPropertyDescriptor'](_0x51d71f,_0x5d6cff):_0xa59ef8,_0x4cfa8f;if(typeof Reflect===_0x33eb98(0x1fb)&&typeof Reflect[_0x33eb98(0x21c)]===_0x33eb98(0x218))_0x431f02=Reflect[_0x33eb98(0x21c)](_0x1e4ec5,_0x51d71f,_0x5d6cff,_0xa59ef8);else{for(var _0x68d3cf=_0x1e4ec5[_0x33eb98(0x1fa)]-0x1;_0x68d3cf>=0x0;_0x68d3cf--)if(_0x4cfa8f=_0x1e4ec5[_0x68d3cf])_0x431f02=(_0x51be17<0x3?_0x4cfa8f(_0x431f02):_0x51be17>0x3?_0x4cfa8f(_0x51d71f,_0x5d6cff,_0x431f02):_0x4cfa8f(_0x51d71f,_0x5d6cff))||_0x431f02;}return _0x51be17>0x3&&_0x431f02&&Object[_0x33eb98(0x1e2)](_0x51d71f,_0x5d6cff,_0x431f02),_0x431f02;},__metadata=this&&this[a125_0xc0f4ec(0x1ef)]||function(_0x245ae6,_0x4e8122){const _0x4cccd8=a125_0xc0f4ec;if(typeof Reflect===_0x4cccd8(0x1fb)&&typeof Reflect[_0x4cccd8(0x1f7)]===_0x4cccd8(0x218))return Reflect[_0x4cccd8(0x1f7)](_0x245ae6,_0x4e8122);};Object[a125_0xc0f4ec(0x1e2)](exports,a125_0xc0f4ec(0x21e),{'value':!![]}),exports[a125_0xc0f4ec(0x20a)]=void 0x0;function a125_0x315c(){const _0x5dd0d2=['function','salesforceSync','branches','SalesforceService','decorate','components','__esModule','convertToSFDX','user','573cesZeD','Container','../../salesforce/services/salesforce.service','getComponentIds','design:paramtypes','../../../../constants','\x20Checking\x20repository\x20on\x20Flosum\x20side.','branch','branchId','sfLogger','getBranchComponents','gitUrl','prefix','\x20Branch\x20synchronized.\x20Skip','provider','createBranchIfNotExists','25708KPkcxt','create','6871190uJkPvm','SalesforceSyncService','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','\x20Start\x20Flosum\x20sync\x20job','message','parse','repository','defineProperty','sha','salesforceService','753092caWzzU','940hFVCvh','run','setStatus','CommitComponentsJob','2936PaZXSi','\x20Checking\x20sync\x20status.','toString','__decorate','catch','__metadata','constructor','5490296YUpwgP','send','force','\x20Sync\x20status\x20','DEFAULT_GIT_USER_EMAIL','updateLastCommit','metadata','486iueLsP','../../salesforce/services/salesforce-sync.service','length','object','recordType','(((.+)+)+)+$','checkSyncStatus','updateRemoteState','9iDSQOl','Completed','getCommitDto','typedi','getRemoteStateAttachmentId','1301267lUzzWb','../dto/commit-components.dto','repositoryName','SalesforceRetrieverService','name','FlosumSyncJob','syncData','search','CommitComponentsDto','commitJob','\x20Update\x20remote\x20state.','../../salesforce/services/salesforce-retriever.service','lastCommit','repo','getComponents','10367XqoNxF','../../salesforce/services/salesforce-logger-v3.service','branchName','log'];a125_0x315c=function(){return _0x5dd0d2;};return a125_0x315c();}const salesforce_logger_v3_service_1=require(a125_0xc0f4ec(0x215)),typedi_1=require(a125_0xc0f4ec(0x203)),constants_1=require(a125_0xc0f4ec(0x1ce)),salesforce_retriever_service_1=require(a125_0xc0f4ec(0x210)),salesforce_sync_service_1=require(a125_0xc0f4ec(0x1f9)),salesforce_service_1=require(a125_0xc0f4ec(0x1cb)),commit_components_dto_1=require(a125_0xc0f4ec(0x206)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x21a119,_0x282966,_0x3fa8f2){const _0x248ceb=a125_0xc0f4ec;this[_0x248ceb(0x219)]=_0x21a119,this['salesforceService']=_0x282966,this[_0x248ceb(0x20e)]=_0x3fa8f2;}async[a125_0xc0f4ec(0x1d8)](){const _0x1d39b3=a125_0xc0f4ec;let _0xfcc60d=await this[_0x1d39b3(0x1e1)][_0x1d39b3(0x21a)]['getOne'](this[_0x1d39b3(0x20b)][_0x1d39b3(0x216)])[_0x1d39b3(0x1ee)](()=>null);!_0xfcc60d&&(_0xfcc60d=await this[_0x1d39b3(0x1e1)]['branches'][_0x1d39b3(0x1da)]({'name':this[_0x1d39b3(0x20b)]['branchName']})),this['branch']=_0xfcc60d;}async['getComponentIds'](){const _0x2148d6=a125_0xc0f4ec;return this[_0x2148d6(0x20b)]['repositoryId']?this[_0x2148d6(0x219)]['getComponentsFromRepository'](this['syncData']['repositoryId']):this[_0x2148d6(0x219)][_0x2148d6(0x1d3)](this[_0x2148d6(0x20b)][_0x2148d6(0x1d1)]);}async[a125_0xc0f4ec(0x213)](){const _0x343d1e=a125_0xc0f4ec,_0x20149e=await this[_0x343d1e(0x1cc)](),_0x54b13d=new salesforce_retriever_service_1[(_0x343d1e(0x208))](this[_0x343d1e(0x1e4)]),_0x16be5c=await _0x54b13d[_0x343d1e(0x1e7)](_0x20149e);return _0x16be5c;}async[a125_0xc0f4ec(0x202)](_0x386a12){const _0x5c731d=a125_0xc0f4ec,_0x1b908f=new commit_components_dto_1[(_0x5c731d(0x20d))]();return _0x1b908f[_0x5c731d(0x1df)]='Sync\x20repository',_0x1b908f[_0x5c731d(0x220)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x5c731d(0x1f5)]},_0x1b908f[_0x5c731d(0x21d)]={'writed':await this[_0x5c731d(0x213)]()},_0x1b908f[_0x5c731d(0x21f)]=_0x386a12,_0x1b908f[_0x5c731d(0x212)]=this[_0x5c731d(0x1e1)],_0x1b908f['branch']=this[_0x5c731d(0x1d0)],_0x1b908f[_0x5c731d(0x1f3)]=!![],_0x1b908f['provider']=this[_0x5c731d(0x1d7)],_0x1b908f[_0x5c731d(0x1fc)]=this[_0x5c731d(0x20b)]['recordTypeName'],_0x1b908f;}async[a125_0xc0f4ec(0x1fe)](){const _0x26de61=a125_0xc0f4ec,_0x58fbba=await this['salesforceSync'][_0x26de61(0x204)](this[_0x26de61(0x20b)]),_0x5e0729=await this[_0x26de61(0x1e4)]['retrieveAttachment'](_0x58fbba)['then'](_0x55e7a4=>typeof _0x55e7a4==='string'?JSON[_0x26de61(0x1e0)](_0x55e7a4):_0x55e7a4)['catch'](()=>({}));if(_0x5e0729[this[_0x26de61(0x1e1)][_0x26de61(0x1d4)]]){if(_0x5e0729[this[_0x26de61(0x1e1)][_0x26de61(0x1d4)]][_0x26de61(0x211)]===this[_0x26de61(0x1d0)][_0x26de61(0x1e3)])return!![];}return![];}async[a125_0xc0f4ec(0x1f6)](){const _0x4a626f=a125_0xc0f4ec,_0x34d01e=await this[_0x4a626f(0x1e1)][_0x4a626f(0x21a)]['getOne'](this['branch'][_0x4a626f(0x209)]);await this[_0x4a626f(0x1d2)][_0x4a626f(0x217)](this['prefix']+_0x4a626f(0x20f));const _0x4b8cf4={[this[_0x4a626f(0x1e1)][_0x4a626f(0x1d4)]]:{'lastCommit':_0x34d01e[_0x4a626f(0x1e3)]}};await this[_0x4a626f(0x219)][_0x4a626f(0x1ff)](this[_0x4a626f(0x20b)],_0x4b8cf4);}async[a125_0xc0f4ec(0x1e7)]({syncRecord:_0x38d3cf,repository:_0x2abe03,convertToSFDX:_0x4f1ab1,provider:_0x2a5ef3}){const _0x32c39b=a125_0xc0f4ec;this[_0x32c39b(0x20b)]=_0x38d3cf,this[_0x32c39b(0x1d7)]=_0x2a5ef3,this['repository']=_0x2abe03,this[_0x32c39b(0x1d2)]=typedi_1[_0x32c39b(0x1ca)]['get'](salesforce_logger_v3_service_1['SalesforceLogger3']),this['prefix']=_0x32c39b(0x1dd)+this[_0x32c39b(0x20b)][_0x32c39b(0x207)]+']\x20[Branch:\x20'+this['syncData'][_0x32c39b(0x216)]+']';try{await this[_0x32c39b(0x1d2)][_0x32c39b(0x217)](this[_0x32c39b(0x1d5)]+_0x32c39b(0x1de))[_0x32c39b(0x1f2)](),await this[_0x32c39b(0x219)][_0x32c39b(0x1e8)](this[_0x32c39b(0x20b)],'In\x20Progress'),this[_0x32c39b(0x1d2)][_0x32c39b(0x217)](this[_0x32c39b(0x1d5)]+_0x32c39b(0x1cf)),await this[_0x32c39b(0x1d8)](),await this['sfLogger'][_0x32c39b(0x217)](this[_0x32c39b(0x1d5)]+_0x32c39b(0x1eb))[_0x32c39b(0x1f2)]();const _0x420084=await this[_0x32c39b(0x1fe)]();this[_0x32c39b(0x1d2)]['log'](this[_0x32c39b(0x1d5)]+_0x32c39b(0x1f4)+_0x420084+'.');if(_0x420084){await this[_0x32c39b(0x219)][_0x32c39b(0x1e8)](this[_0x32c39b(0x20b)],_0x32c39b(0x201)),await this[_0x32c39b(0x1d2)][_0x32c39b(0x217)](this[_0x32c39b(0x1d5)]+_0x32c39b(0x1d6))[_0x32c39b(0x1f2)]();return;}const _0x1aff73=await this[_0x32c39b(0x202)](_0x4f1ab1);await this[_0x32c39b(0x20e)][_0x32c39b(0x1e7)](_0x1aff73,this['prefix']),await this[_0x32c39b(0x219)][_0x32c39b(0x1e8)](this[_0x32c39b(0x20b)],_0x32c39b(0x201)),await this[_0x32c39b(0x1f6)](),this[_0x32c39b(0x1d2)][_0x32c39b(0x217)](this[_0x32c39b(0x1d5)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x20f913){throw _0x20f913;}finally{await this[_0x32c39b(0x1d2)][_0x32c39b(0x1f2)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a125_0xc0f4ec(0x1cd),[salesforce_sync_service_1[a125_0xc0f4ec(0x1dc)],salesforce_service_1[a125_0xc0f4ec(0x21b)],commit_components_job_1[a125_0xc0f4ec(0x1e9)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;