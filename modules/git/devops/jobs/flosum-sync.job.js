const a106_0x3c479e=a106_0x512d;(function(_0x3e0532,_0x364006){const _0x2a80bc=a106_0x512d,_0x31669d=_0x3e0532();while(!![]){try{const _0x30b24c=parseInt(_0x2a80bc(0x1c9))/0x1+-parseInt(_0x2a80bc(0x1af))/0x2+-parseInt(_0x2a80bc(0x1e1))/0x3+-parseInt(_0x2a80bc(0x1a5))/0x4+-parseInt(_0x2a80bc(0x1bc))/0x5+parseInt(_0x2a80bc(0x1a9))/0x6*(-parseInt(_0x2a80bc(0x1b9))/0x7)+parseInt(_0x2a80bc(0x19b))/0x8;if(_0x30b24c===_0x364006)break;else _0x31669d['push'](_0x31669d['shift']());}catch(_0x54dff7){_0x31669d['push'](_0x31669d['shift']());}}}(a106_0x2aa7,0x8d42f));const a106_0xff681=(function(){let _0x418c4d=!![];return function(_0xd9b9ce,_0x403db0){const _0x283b6a=_0x418c4d?function(){const _0x453da7=a106_0x512d;if(_0x403db0){const _0x225d70=_0x403db0[_0x453da7(0x1ca)](_0xd9b9ce,arguments);return _0x403db0=null,_0x225d70;}}:function(){};return _0x418c4d=![],_0x283b6a;};}()),a106_0x377dcb=a106_0xff681(this,function(){const _0x4cc37a=a106_0x512d;return a106_0x377dcb[_0x4cc37a(0x1dc)]()[_0x4cc37a(0x1cb)](_0x4cc37a(0x1b5))[_0x4cc37a(0x1dc)]()[_0x4cc37a(0x1de)](a106_0x377dcb)[_0x4cc37a(0x1cb)](_0x4cc37a(0x1b5));});function a106_0x512d(_0x9d0918,_0x16fb24){const _0x2840b8=a106_0x2aa7();return a106_0x512d=function(_0x377dcb,_0xff681){_0x377dcb=_0x377dcb-0x196;let _0x2aa79a=_0x2840b8[_0x377dcb];return _0x2aa79a;},a106_0x512d(_0x9d0918,_0x16fb24);}a106_0x377dcb();function a106_0x2aa7(){const _0x3637d9=['constructor','syncData','SalesforceService','1569216iAEQnE','updateLastCommit','__metadata','branchName','commitJob','length','DEFAULT_GIT_USER_EMAIL','SalesforceLogger3',']\x20[Branch:\x20','repository','retrieveAttachment','getOne','getComponents','28095608MUxqxB','create','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','FlosumSyncJob','user','checkSyncStatus','getCommitDto','Completed','message','../../salesforce/services/salesforce-logger-v3.service','2120312cgAGtt','../../salesforce/services/salesforce-sync.service','object','sfLogger','6177618yAHUZi','repo','branch','get','send','\x20Checking\x20sync\x20status.','1364148xyYNVT','then','log','typedi','defineProperty','Service','(((.+)+)+)+$','getBranchComponents','setStatus','\x20Checking\x20repository\x20on\x20Flosum\x20side.','7SeaKEE','../../../../constants','createBranchIfNotExists','4028375JfIGPY','sha','repositoryName','metadata','gitUrl','provider','salesforceService','branchId','Sync\x20repository','repositoryId','decorate','getComponentsFromRepository','Container','637158xFxsJz','apply','search','run','salesforceSync','\x20Sync\x20status\x20','lastCommit','__decorate','getRemoteStateAttachmentId','parse','../../salesforce/services/salesforce.service','SalesforceSyncService','\x20Flosum\x20sync\x20job\x20done.','prefix','\x20Start\x20Flosum\x20sync\x20job','./commit-components.job','branches','getComponentIds','catch','toString','In\x20Progress'];a106_0x2aa7=function(){return _0x3637d9;};return a106_0x2aa7();}'use strict';var __decorate=this&&this[a106_0x3c479e(0x1d0)]||function(_0x55a463,_0x4b79a5,_0x179cc6,_0xa9cd1e){const _0x530a34=a106_0x3c479e;var _0x734405=arguments[_0x530a34(0x1e6)],_0x22e967=_0x734405<0x3?_0x4b79a5:_0xa9cd1e===null?_0xa9cd1e=Object['getOwnPropertyDescriptor'](_0x4b79a5,_0x179cc6):_0xa9cd1e,_0x564b76;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x22e967=Reflect[_0x530a34(0x1c6)](_0x55a463,_0x4b79a5,_0x179cc6,_0xa9cd1e);else{for(var _0x316f32=_0x55a463['length']-0x1;_0x316f32>=0x0;_0x316f32--)if(_0x564b76=_0x55a463[_0x316f32])_0x22e967=(_0x734405<0x3?_0x564b76(_0x22e967):_0x734405>0x3?_0x564b76(_0x4b79a5,_0x179cc6,_0x22e967):_0x564b76(_0x4b79a5,_0x179cc6))||_0x22e967;}return _0x734405>0x3&&_0x22e967&&Object[_0x530a34(0x1b3)](_0x4b79a5,_0x179cc6,_0x22e967),_0x22e967;},__metadata=this&&this[a106_0x3c479e(0x1e3)]||function(_0x2193b3,_0x53ae41){const _0x267617=a106_0x3c479e;if(typeof Reflect===_0x267617(0x1a7)&&typeof Reflect[_0x267617(0x1bf)]==='function')return Reflect['metadata'](_0x2193b3,_0x53ae41);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a106_0x3c479e(0x19e)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x3c479e(0x1a4)),typedi_1=require(a106_0x3c479e(0x1b2)),constants_1=require(a106_0x3c479e(0x1ba)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a106_0x3c479e(0x1a6)),salesforce_service_1=require(a106_0x3c479e(0x1d3)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a106_0x3c479e(0x1d8));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x30fff5,_0x4a8b0e,_0x18bcb0){const _0xf96032=a106_0x3c479e;this[_0xf96032(0x1cd)]=_0x30fff5,this[_0xf96032(0x1c2)]=_0x4a8b0e,this[_0xf96032(0x1e5)]=_0x18bcb0;}async[a106_0x3c479e(0x1bb)](){const _0x5e46a1=a106_0x3c479e;let _0x219056=await this[_0x5e46a1(0x197)][_0x5e46a1(0x1d9)]['getOne'](this[_0x5e46a1(0x1df)][_0x5e46a1(0x1e4)])[_0x5e46a1(0x1db)](()=>null);!_0x219056&&(_0x219056=await this[_0x5e46a1(0x197)][_0x5e46a1(0x1d9)][_0x5e46a1(0x19c)]({'name':this[_0x5e46a1(0x1df)][_0x5e46a1(0x1e4)]})),this[_0x5e46a1(0x1ab)]=_0x219056;}async[a106_0x3c479e(0x1da)](){const _0x290f49=a106_0x3c479e;return this[_0x290f49(0x1df)][_0x290f49(0x1c5)]?this[_0x290f49(0x1cd)][_0x290f49(0x1c7)](this['syncData']['repositoryId']):this['salesforceSync'][_0x290f49(0x1b6)](this[_0x290f49(0x1df)][_0x290f49(0x1c3)]);}async[a106_0x3c479e(0x19a)](){const _0x2234c5=a106_0x3c479e,_0x2bc47f=await this[_0x2234c5(0x1da)](),_0x3c169a=new salesforce_retriever_service_1['SalesforceRetrieverService'](this['salesforceService']),_0x478b58=await _0x3c169a['run'](_0x2bc47f);return _0x478b58;}async['getCommitDto'](_0x3f879c){const _0x3d2230=a106_0x3c479e,_0x472a09=new commit_components_dto_1['CommitComponentsDto']();return _0x472a09[_0x3d2230(0x1a3)]=_0x3d2230(0x1c4),_0x472a09[_0x3d2230(0x19f)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x3d2230(0x1e7)]},_0x472a09['components']={'writed':await this[_0x3d2230(0x19a)]()},_0x472a09['convertToSFDX']=_0x3f879c,_0x472a09[_0x3d2230(0x1aa)]=this[_0x3d2230(0x197)],_0x472a09[_0x3d2230(0x1ab)]=this['branch'],_0x472a09['force']=!![],_0x472a09['provider']=this[_0x3d2230(0x1c1)],_0x472a09;}async['checkSyncStatus'](){const _0x5aafcd=a106_0x3c479e,_0x15a299=await this[_0x5aafcd(0x1cd)][_0x5aafcd(0x1d1)](this[_0x5aafcd(0x1df)]),_0x32d9bb=await this['salesforceService'][_0x5aafcd(0x198)](_0x15a299)[_0x5aafcd(0x1b0)](_0x29c3a8=>typeof _0x29c3a8==='string'?JSON[_0x5aafcd(0x1d2)](_0x29c3a8):_0x29c3a8)[_0x5aafcd(0x1db)](()=>({}));if(_0x32d9bb[this[_0x5aafcd(0x197)][_0x5aafcd(0x1c0)]]){if(_0x32d9bb[this[_0x5aafcd(0x197)]['gitUrl']][_0x5aafcd(0x1cf)]===this[_0x5aafcd(0x1ab)][_0x5aafcd(0x1bd)])return!![];}return![];}async[a106_0x3c479e(0x1e2)](){const _0x206c68=a106_0x3c479e,_0x554993=await this[_0x206c68(0x197)][_0x206c68(0x1d9)][_0x206c68(0x199)](this[_0x206c68(0x1ab)]['name']);await this[_0x206c68(0x1a8)][_0x206c68(0x1b1)](this[_0x206c68(0x1d6)]+'\x20Update\x20remote\x20state.');const _0x12c520={[this[_0x206c68(0x197)][_0x206c68(0x1c0)]]:{'lastCommit':_0x554993[_0x206c68(0x1bd)]}};await this[_0x206c68(0x1cd)]['updateRemoteState'](this[_0x206c68(0x1df)],_0x12c520);}async[a106_0x3c479e(0x1cc)]({syncRecord:_0x4977a2,repository:_0x29ab8d,convertToSFDX:_0x36dd2c,provider:_0x3c12a7}){const _0x4bb7be=a106_0x3c479e;this['syncData']=_0x4977a2,this[_0x4bb7be(0x1c1)]=_0x3c12a7,this['repository']=_0x29ab8d,this[_0x4bb7be(0x1a8)]=typedi_1[_0x4bb7be(0x1c8)][_0x4bb7be(0x1ac)](salesforce_logger_v3_service_1[_0x4bb7be(0x1e8)]),this[_0x4bb7be(0x1d6)]=_0x4bb7be(0x19d)+this['syncData'][_0x4bb7be(0x1be)]+_0x4bb7be(0x196)+this[_0x4bb7be(0x1df)]['branchName']+']';try{await this[_0x4bb7be(0x1a8)][_0x4bb7be(0x1b1)](this[_0x4bb7be(0x1d6)]+_0x4bb7be(0x1d7))[_0x4bb7be(0x1ad)](),await this[_0x4bb7be(0x1cd)]['setStatus'](this[_0x4bb7be(0x1df)],_0x4bb7be(0x1dd)),this[_0x4bb7be(0x1a8)][_0x4bb7be(0x1b1)](this['prefix']+_0x4bb7be(0x1b8)),await this[_0x4bb7be(0x1bb)](),await this['sfLogger']['log'](this[_0x4bb7be(0x1d6)]+_0x4bb7be(0x1ae))['send']();const _0x472318=await this[_0x4bb7be(0x1a0)]();this[_0x4bb7be(0x1a8)][_0x4bb7be(0x1b1)](this[_0x4bb7be(0x1d6)]+_0x4bb7be(0x1ce)+_0x472318+'.');if(_0x472318){await this[_0x4bb7be(0x1cd)][_0x4bb7be(0x1b7)](this['syncData'],_0x4bb7be(0x1a2)),await this['sfLogger'][_0x4bb7be(0x1b1)](this[_0x4bb7be(0x1d6)]+'\x20Branch\x20synchronized.\x20Skip')[_0x4bb7be(0x1ad)]();return;}const _0x5db965=await this[_0x4bb7be(0x1a1)](_0x36dd2c);await this['commitJob']['run'](_0x5db965,this['prefix']),await this['salesforceSync'][_0x4bb7be(0x1b7)](this[_0x4bb7be(0x1df)],_0x4bb7be(0x1a2)),await this[_0x4bb7be(0x1e2)](),this[_0x4bb7be(0x1a8)][_0x4bb7be(0x1b1)](this['prefix']+_0x4bb7be(0x1d5));}catch(_0x6871b){throw _0x6871b;}finally{await this[_0x4bb7be(0x1a8)][_0x4bb7be(0x1ad)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x3c479e(0x1b4)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a106_0x3c479e(0x1d4)],salesforce_service_1[a106_0x3c479e(0x1e0)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a106_0x3c479e(0x19e)]=FlosumSyncJob;