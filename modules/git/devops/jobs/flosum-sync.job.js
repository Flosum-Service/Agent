const a105_0x394619=a105_0x4388;(function(_0x534283,_0x1b17b9){const _0x491233=a105_0x4388,_0x1803a6=_0x534283();while(!![]){try{const _0x5b21b2=parseInt(_0x491233(0xb7))/0x1+-parseInt(_0x491233(0xcd))/0x2*(parseInt(_0x491233(0xc3))/0x3)+-parseInt(_0x491233(0xc1))/0x4+-parseInt(_0x491233(0x93))/0x5*(-parseInt(_0x491233(0xe6))/0x6)+-parseInt(_0x491233(0xba))/0x7*(parseInt(_0x491233(0x98))/0x8)+-parseInt(_0x491233(0xb5))/0x9+-parseInt(_0x491233(0x97))/0xa*(-parseInt(_0x491233(0xa5))/0xb);if(_0x5b21b2===_0x1b17b9)break;else _0x1803a6['push'](_0x1803a6['shift']());}catch(_0xd54121){_0x1803a6['push'](_0x1803a6['shift']());}}}(a105_0x56a3,0xdeb5b));const a105_0x3599f2=(function(){let _0x152948=!![];return function(_0x5cb59b,_0x5ecadf){const _0x5314b4=_0x152948?function(){const _0x1153bb=a105_0x4388;if(_0x5ecadf){const _0x2dad54=_0x5ecadf[_0x1153bb(0xdc)](_0x5cb59b,arguments);return _0x5ecadf=null,_0x2dad54;}}:function(){};return _0x152948=![],_0x5314b4;};}()),a105_0x1a363d=a105_0x3599f2(this,function(){const _0x1da52b=a105_0x4388;return a105_0x1a363d[_0x1da52b(0xe3)]()[_0x1da52b(0xdd)](_0x1da52b(0xc9))[_0x1da52b(0xe3)]()[_0x1da52b(0xd4)](a105_0x1a363d)[_0x1da52b(0xdd)](_0x1da52b(0xc9));});a105_0x1a363d();'use strict';var __decorate=this&&this['__decorate']||function(_0x6c6f7c,_0x52c7f4,_0x2f135f,_0x3aa0a2){const _0x11a179=a105_0x4388;var _0x363c06=arguments['length'],_0x40e61e=_0x363c06<0x3?_0x52c7f4:_0x3aa0a2===null?_0x3aa0a2=Object['getOwnPropertyDescriptor'](_0x52c7f4,_0x2f135f):_0x3aa0a2,_0x351fc3;if(typeof Reflect===_0x11a179(0xb9)&&typeof Reflect[_0x11a179(0xe4)]==='function')_0x40e61e=Reflect['decorate'](_0x6c6f7c,_0x52c7f4,_0x2f135f,_0x3aa0a2);else{for(var _0x28792d=_0x6c6f7c[_0x11a179(0xde)]-0x1;_0x28792d>=0x0;_0x28792d--)if(_0x351fc3=_0x6c6f7c[_0x28792d])_0x40e61e=(_0x363c06<0x3?_0x351fc3(_0x40e61e):_0x363c06>0x3?_0x351fc3(_0x52c7f4,_0x2f135f,_0x40e61e):_0x351fc3(_0x52c7f4,_0x2f135f))||_0x40e61e;}return _0x363c06>0x3&&_0x40e61e&&Object[_0x11a179(0xbc)](_0x52c7f4,_0x2f135f,_0x40e61e),_0x40e61e;},__metadata=this&&this[a105_0x394619(0xa3)]||function(_0x5daa86,_0x4a1eb8){const _0x322bc5=a105_0x394619;if(typeof Reflect===_0x322bc5(0xb9)&&typeof Reflect[_0x322bc5(0xd0)]===_0x322bc5(0xb4))return Reflect[_0x322bc5(0xd0)](_0x5daa86,_0x4a1eb8);};Object[a105_0x394619(0xbc)](exports,'__esModule',{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require(a105_0x394619(0xb3)),typedi_1=require(a105_0x394619(0xb8)),constants_1=require(a105_0x394619(0xbe)),salesforce_retriever_service_1=require(a105_0x394619(0xd6)),salesforce_sync_service_1=require(a105_0x394619(0x9e)),salesforce_service_1=require(a105_0x394619(0xab)),commit_components_dto_1=require(a105_0x394619(0xd2)),commit_components_job_1=require(a105_0x394619(0xd5));function a105_0x56a3(){const _0x1ac970=['provider','121750pxIWpI','43944ddMOvM','In\x20Progress','repo','\x20Checking\x20sync\x20status.','catch','message','../../salesforce/services/salesforce-sync.service','getComponents','SalesforceService','Service','prefix','__metadata','components','3586XdjQGu','salesforceSync','Completed','getBranchComponents','repository','SalesforceLogger3','../../salesforce/services/salesforce.service','DEFAULT_GIT_USER_EMAIL','commitJob','repositoryName','DEFAULT_GIT_USER_NAME','repositoryId','string','run','../../salesforce/services/salesforce-logger-v3.service','function','5604561VDMRER','SalesforceSyncService','269985wUltBO','typedi','object','2058cchAgC','salesforceService','defineProperty','setStatus','../../../../constants','log','updateLastCommit','5730884SUcPJc','\x20Branch\x20synchronized.\x20Skip','9cNNHbq','branches','branch','getOne','send','branchName','(((.+)+)+)+$','\x20Checking\x20repository\x20on\x20Flosum\x20side.','\x20Start\x20Flosum\x20sync\x20job','then','358822IfdjPV','design:paramtypes','\x20Update\x20remote\x20state.','metadata','gitUrl','../dto/commit-components.dto','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','constructor','./commit-components.job','../../salesforce/services/salesforce-retriever.service','sfLogger','sha','getComponentsFromRepository','createBranchIfNotExists','checkSyncStatus','apply','search','length','syncData','retrieveAttachment','lastCommit','Sync\x20repository','toString','decorate','force','6cIrnFc','create','getComponentIds','getRemoteStateAttachmentId','4409045BnPPen','getCommitDto','updateRemoteState'];a105_0x56a3=function(){return _0x1ac970;};return a105_0x56a3();}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x576c45,_0x191eeb,_0x29b1d0){const _0xe3e3c0=a105_0x394619;this[_0xe3e3c0(0xa6)]=_0x576c45,this[_0xe3e3c0(0xbb)]=_0x191eeb,this[_0xe3e3c0(0xad)]=_0x29b1d0;}async[a105_0x394619(0xda)](){const _0x5a9797=a105_0x394619;let _0xdfc274=await this[_0x5a9797(0xa9)][_0x5a9797(0xc4)]['getOne'](this[_0x5a9797(0xdf)][_0x5a9797(0xc8)])['catch'](()=>null);!_0xdfc274&&(_0xdfc274=await this[_0x5a9797(0xa9)][_0x5a9797(0xc4)][_0x5a9797(0xe7)]({'name':this[_0x5a9797(0xdf)][_0x5a9797(0xc8)]})),this[_0x5a9797(0xc5)]=_0xdfc274;}async[a105_0x394619(0xe8)](){const _0xfe2e97=a105_0x394619;return this[_0xfe2e97(0xdf)][_0xfe2e97(0xb0)]?this['salesforceSync'][_0xfe2e97(0xd9)](this[_0xfe2e97(0xdf)][_0xfe2e97(0xb0)]):this[_0xfe2e97(0xa6)][_0xfe2e97(0xa8)](this[_0xfe2e97(0xdf)]['branchId']);}async[a105_0x394619(0x9f)](){const _0x266d89=a105_0x394619,_0x13645f=await this[_0x266d89(0xe8)](),_0x4b1eab=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x266d89(0xbb)]),_0x21bb35=await _0x4b1eab[_0x266d89(0xb2)](_0x13645f);return _0x21bb35;}async[a105_0x394619(0x94)](_0x29eab7){const _0x13edf5=a105_0x394619,_0x4ddcc5=new commit_components_dto_1['CommitComponentsDto']();return _0x4ddcc5[_0x13edf5(0x9d)]=_0x13edf5(0xe2),_0x4ddcc5['user']={'name':constants_1[_0x13edf5(0xaf)],'email':constants_1[_0x13edf5(0xac)]},_0x4ddcc5[_0x13edf5(0xa4)]={'writed':await this[_0x13edf5(0x9f)]()},_0x4ddcc5['convertToSFDX']=_0x29eab7,_0x4ddcc5[_0x13edf5(0x9a)]=this[_0x13edf5(0xa9)],_0x4ddcc5[_0x13edf5(0xc5)]=this['branch'],_0x4ddcc5[_0x13edf5(0xe5)]=!![],_0x4ddcc5[_0x13edf5(0x96)]=this[_0x13edf5(0x96)],_0x4ddcc5;}async['checkSyncStatus'](){const _0x17dccb=a105_0x394619,_0x4c0eb8=await this[_0x17dccb(0xa6)][_0x17dccb(0x92)](this[_0x17dccb(0xdf)]),_0x1d7d84=await this[_0x17dccb(0xbb)][_0x17dccb(0xe0)](_0x4c0eb8)[_0x17dccb(0xcc)](_0x11a326=>typeof _0x11a326===_0x17dccb(0xb1)?JSON['parse'](_0x11a326):_0x11a326)[_0x17dccb(0x9c)](()=>({}));if(_0x1d7d84[this[_0x17dccb(0xa9)][_0x17dccb(0xd1)]]){if(_0x1d7d84[this[_0x17dccb(0xa9)][_0x17dccb(0xd1)]][_0x17dccb(0xe1)]===this[_0x17dccb(0xc5)][_0x17dccb(0xd8)])return!![];}return![];}async['updateLastCommit'](){const _0x2911e3=a105_0x394619,_0x180282=await this[_0x2911e3(0xa9)][_0x2911e3(0xc4)][_0x2911e3(0xc6)](this[_0x2911e3(0xc5)]['name']);await this[_0x2911e3(0xd7)][_0x2911e3(0xbf)](this[_0x2911e3(0xa2)]+_0x2911e3(0xcf));const _0x38ecad={[this['repository']['gitUrl']]:{'lastCommit':_0x180282['sha']}};await this['salesforceSync'][_0x2911e3(0x95)](this[_0x2911e3(0xdf)],_0x38ecad);}async[a105_0x394619(0xb2)]({syncRecord:_0x40f695,repository:_0x3a553d,convertToSFDX:_0x30ab85,provider:_0xf952f8}){const _0x417f5a=a105_0x394619;this[_0x417f5a(0xdf)]=_0x40f695,this['provider']=_0xf952f8,this[_0x417f5a(0xa9)]=_0x3a553d,this['sfLogger']=typedi_1['Container']['get'](salesforce_logger_v3_service_1[_0x417f5a(0xaa)]),this[_0x417f5a(0xa2)]=_0x417f5a(0xd3)+this[_0x417f5a(0xdf)][_0x417f5a(0xae)]+']\x20[Branch:\x20'+this[_0x417f5a(0xdf)][_0x417f5a(0xc8)]+']';try{await this[_0x417f5a(0xd7)][_0x417f5a(0xbf)](this['prefix']+_0x417f5a(0xcb))[_0x417f5a(0xc7)](),await this['salesforceSync'][_0x417f5a(0xbd)](this[_0x417f5a(0xdf)],_0x417f5a(0x99)),this['sfLogger'][_0x417f5a(0xbf)](this['prefix']+_0x417f5a(0xca)),await this[_0x417f5a(0xda)](),await this[_0x417f5a(0xd7)]['log'](this[_0x417f5a(0xa2)]+_0x417f5a(0x9b))[_0x417f5a(0xc7)]();const _0x5279cf=await this[_0x417f5a(0xdb)]();this['sfLogger'][_0x417f5a(0xbf)](this[_0x417f5a(0xa2)]+'\x20Sync\x20status\x20'+_0x5279cf+'.');if(_0x5279cf){await this[_0x417f5a(0xa6)][_0x417f5a(0xbd)](this[_0x417f5a(0xdf)],_0x417f5a(0xa7)),await this[_0x417f5a(0xd7)][_0x417f5a(0xbf)](this[_0x417f5a(0xa2)]+_0x417f5a(0xc2))['send']();return;}const _0x513b3=await this[_0x417f5a(0x94)](_0x30ab85);await this[_0x417f5a(0xad)][_0x417f5a(0xb2)](_0x513b3,this[_0x417f5a(0xa2)]),await this[_0x417f5a(0xa6)][_0x417f5a(0xbd)](this[_0x417f5a(0xdf)],_0x417f5a(0xa7)),await this[_0x417f5a(0xc0)](),this[_0x417f5a(0xd7)][_0x417f5a(0xbf)](this[_0x417f5a(0xa2)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x433be6){throw _0x433be6;}finally{await this['sfLogger']['send']();}}};function a105_0x4388(_0x1f533b,_0x2a3059){const _0x4888a1=a105_0x56a3();return a105_0x4388=function(_0x1a363d,_0x3599f2){_0x1a363d=_0x1a363d-0x92;let _0x56a3df=_0x4888a1[_0x1a363d];return _0x56a3df;},a105_0x4388(_0x1f533b,_0x2a3059);}FlosumSyncJob=__decorate([(0x0,typedi_1[a105_0x394619(0xa1)])({'transient':!![]}),__metadata(a105_0x394619(0xce),[salesforce_sync_service_1[a105_0x394619(0xb6)],salesforce_service_1[a105_0x394619(0xa0)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;