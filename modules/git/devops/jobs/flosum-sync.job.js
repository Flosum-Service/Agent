const a106_0x562fd7=a106_0x435a;(function(_0x508fa4,_0x7df514){const _0x1f3389=a106_0x435a,_0x3d87d3=_0x508fa4();while(!![]){try{const _0x883b38=parseInt(_0x1f3389(0x1f7))/0x1+parseInt(_0x1f3389(0x1b9))/0x2+-parseInt(_0x1f3389(0x1bb))/0x3+parseInt(_0x1f3389(0x1db))/0x4+-parseInt(_0x1f3389(0x1b7))/0x5+-parseInt(_0x1f3389(0x1fe))/0x6+-parseInt(_0x1f3389(0x200))/0x7*(-parseInt(_0x1f3389(0x1fa))/0x8);if(_0x883b38===_0x7df514)break;else _0x3d87d3['push'](_0x3d87d3['shift']());}catch(_0x2d22c3){_0x3d87d3['push'](_0x3d87d3['shift']());}}}(a106_0x4c7e,0x5ea97));const a106_0x5b4a7d=(function(){let _0x59dbd7=!![];return function(_0x4805a4,_0x4b706a){const _0x3d93f7=_0x59dbd7?function(){if(_0x4b706a){const _0x570990=_0x4b706a['apply'](_0x4805a4,arguments);return _0x4b706a=null,_0x570990;}}:function(){};return _0x59dbd7=![],_0x3d93f7;};}()),a106_0x5c036a=a106_0x5b4a7d(this,function(){const _0x310c21=a106_0x435a;return a106_0x5c036a[_0x310c21(0x1f8)]()[_0x310c21(0x1c6)](_0x310c21(0x1c7))[_0x310c21(0x1f8)]()[_0x310c21(0x1cc)](a106_0x5c036a)['search']('(((.+)+)+)+$');});function a106_0x4c7e(){const _0x25bfd4=['\x20Flosum\x20sync\x20job\x20done.','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','create','SalesforceLogger3','../../salesforce/services/salesforce-logger-v3.service','commitJob','log','branches','getOne','SalesforceSyncService','../../salesforce/services/salesforce-sync.service','1064650kVcYKh','repo','183388jmCIDF','user','514992nPmVrt','branchName','salesforceSync','SalesforceService','sfLogger','In\x20Progress','Sync\x20repository','gitUrl','updateRemoteState','\x20Checking\x20sync\x20status.','__metadata','search','(((.+)+)+)+$','\x20Start\x20Flosum\x20sync\x20job','Completed','get','DEFAULT_GIT_USER_EMAIL','constructor','force','convertToSFDX','../dto/commit-components.dto','getComponentIds','provider','__decorate','retrieveAttachment','getOwnPropertyDescriptor','repositoryName','getComponents','../../salesforce/services/salesforce.service','object','\x20Checking\x20repository\x20on\x20Flosum\x20side.','getCommitDto','2761024Lbycha','decorate','CommitComponentsJob','defineProperty','salesforceService','components','prefix','function','send','branch','setStatus','catch','branchId','FlosumSyncJob','sha','checkSyncStatus','updateLastCommit','message','createBranchIfNotExists','typedi','getComponentsFromRepository','DEFAULT_GIT_USER_NAME','syncData','\x20Sync\x20status\x20','repository','name','run','getRemoteStateAttachmentId','319067rkACmv','toString','CommitComponentsDto','20872OfEXol','getBranchComponents','design:paramtypes','string','4617654ZUjKcA','metadata','1183JXSFjM'];a106_0x4c7e=function(){return _0x25bfd4;};return a106_0x4c7e();}a106_0x5c036a();'use strict';var __decorate=this&&this[a106_0x562fd7(0x1d2)]||function(_0x23e737,_0x444328,_0x5150ba,_0xd96de7){const _0x5aa83b=a106_0x562fd7;var _0x432d10=arguments['length'],_0x3c6dce=_0x432d10<0x3?_0x444328:_0xd96de7===null?_0xd96de7=Object[_0x5aa83b(0x1d4)](_0x444328,_0x5150ba):_0xd96de7,_0x36afc6;if(typeof Reflect===_0x5aa83b(0x1d8)&&typeof Reflect[_0x5aa83b(0x1dc)]==='function')_0x3c6dce=Reflect[_0x5aa83b(0x1dc)](_0x23e737,_0x444328,_0x5150ba,_0xd96de7);else{for(var _0x1ff66a=_0x23e737['length']-0x1;_0x1ff66a>=0x0;_0x1ff66a--)if(_0x36afc6=_0x23e737[_0x1ff66a])_0x3c6dce=(_0x432d10<0x3?_0x36afc6(_0x3c6dce):_0x432d10>0x3?_0x36afc6(_0x444328,_0x5150ba,_0x3c6dce):_0x36afc6(_0x444328,_0x5150ba))||_0x3c6dce;}return _0x432d10>0x3&&_0x3c6dce&&Object[_0x5aa83b(0x1de)](_0x444328,_0x5150ba,_0x3c6dce),_0x3c6dce;},__metadata=this&&this[a106_0x562fd7(0x1c5)]||function(_0x475758,_0x3d2dc5){const _0x183bcd=a106_0x562fd7;if(typeof Reflect===_0x183bcd(0x1d8)&&typeof Reflect['metadata']===_0x183bcd(0x1e2))return Reflect[_0x183bcd(0x1ff)](_0x475758,_0x3d2dc5);};Object[a106_0x562fd7(0x1de)](exports,'__esModule',{'value':!![]}),exports[a106_0x562fd7(0x1e8)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x562fd7(0x205)),typedi_1=require(a106_0x562fd7(0x1ee)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a106_0x562fd7(0x1b6)),salesforce_service_1=require(a106_0x562fd7(0x1d7)),commit_components_dto_1=require(a106_0x562fd7(0x1cf)),commit_components_job_1=require('./commit-components.job');function a106_0x435a(_0xdd847f,_0x2b9096){const _0x566549=a106_0x4c7e();return a106_0x435a=function(_0x5c036a,_0x5b4a7d){_0x5c036a=_0x5c036a-0x1b1;let _0x4c7e87=_0x566549[_0x5c036a];return _0x4c7e87;},a106_0x435a(_0xdd847f,_0x2b9096);}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x30f253,_0x296a0c,_0x36a854){const _0x39bfd1=a106_0x562fd7;this[_0x39bfd1(0x1bd)]=_0x30f253,this[_0x39bfd1(0x1df)]=_0x296a0c,this[_0x39bfd1(0x1b1)]=_0x36a854;}async[a106_0x562fd7(0x1ed)](){const _0x4a0476=a106_0x562fd7;let _0x511754=await this[_0x4a0476(0x1f3)][_0x4a0476(0x1b3)]['getOne'](this['syncData'][_0x4a0476(0x1bc)])[_0x4a0476(0x1e6)](()=>null);!_0x511754&&(_0x511754=await this[_0x4a0476(0x1f3)][_0x4a0476(0x1b3)][_0x4a0476(0x203)]({'name':this['syncData'][_0x4a0476(0x1bc)]})),this[_0x4a0476(0x1e4)]=_0x511754;}async['getComponentIds'](){const _0x3d2fc0=a106_0x562fd7;return this[_0x3d2fc0(0x1f1)]['repositoryId']?this[_0x3d2fc0(0x1bd)][_0x3d2fc0(0x1ef)](this[_0x3d2fc0(0x1f1)]['repositoryId']):this[_0x3d2fc0(0x1bd)][_0x3d2fc0(0x1fb)](this[_0x3d2fc0(0x1f1)][_0x3d2fc0(0x1e7)]);}async['getComponents'](){const _0xfb2177=a106_0x562fd7,_0x3efda9=await this[_0xfb2177(0x1d0)](),_0x34b085=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0xfb2177(0x1df)]),_0x2e81c0=await _0x34b085[_0xfb2177(0x1f5)](_0x3efda9);return _0x2e81c0;}async[a106_0x562fd7(0x1da)](_0x430db9){const _0x1b9077=a106_0x562fd7,_0x3f2332=new commit_components_dto_1[(_0x1b9077(0x1f9))]();return _0x3f2332[_0x1b9077(0x1ec)]=_0x1b9077(0x1c1),_0x3f2332[_0x1b9077(0x1ba)]={'name':constants_1[_0x1b9077(0x1f0)],'email':constants_1[_0x1b9077(0x1cb)]},_0x3f2332[_0x1b9077(0x1e0)]={'writed':await this[_0x1b9077(0x1d6)]()},_0x3f2332[_0x1b9077(0x1ce)]=_0x430db9,_0x3f2332[_0x1b9077(0x1b8)]=this[_0x1b9077(0x1f3)],_0x3f2332[_0x1b9077(0x1e4)]=this[_0x1b9077(0x1e4)],_0x3f2332[_0x1b9077(0x1cd)]=!![],_0x3f2332[_0x1b9077(0x1d1)]=this[_0x1b9077(0x1d1)],_0x3f2332;}async['checkSyncStatus'](){const _0x7c0032=a106_0x562fd7,_0x2f4359=await this[_0x7c0032(0x1bd)][_0x7c0032(0x1f6)](this[_0x7c0032(0x1f1)]),_0x55d0cc=await this[_0x7c0032(0x1df)][_0x7c0032(0x1d3)](_0x2f4359)['then'](_0x352364=>typeof _0x352364===_0x7c0032(0x1fd)?JSON['parse'](_0x352364):_0x352364)[_0x7c0032(0x1e6)](()=>({}));if(_0x55d0cc[this[_0x7c0032(0x1f3)][_0x7c0032(0x1c2)]]){if(_0x55d0cc[this['repository'][_0x7c0032(0x1c2)]]['lastCommit']===this[_0x7c0032(0x1e4)][_0x7c0032(0x1e9)])return!![];}return![];}async['updateLastCommit'](){const _0x5e08db=a106_0x562fd7,_0x4d8f82=await this[_0x5e08db(0x1f3)]['branches'][_0x5e08db(0x1b4)](this[_0x5e08db(0x1e4)][_0x5e08db(0x1f4)]);await this[_0x5e08db(0x1bf)][_0x5e08db(0x1b2)](this['prefix']+'\x20Update\x20remote\x20state.');const _0x371f80={[this['repository'][_0x5e08db(0x1c2)]]:{'lastCommit':_0x4d8f82[_0x5e08db(0x1e9)]}};await this['salesforceSync'][_0x5e08db(0x1c3)](this[_0x5e08db(0x1f1)],_0x371f80);}async[a106_0x562fd7(0x1f5)]({syncRecord:_0x3b9bd2,repository:_0x112701,convertToSFDX:_0x507171,provider:_0x27fd52}){const _0x56629b=a106_0x562fd7;this[_0x56629b(0x1f1)]=_0x3b9bd2,this[_0x56629b(0x1d1)]=_0x27fd52,this[_0x56629b(0x1f3)]=_0x112701,this[_0x56629b(0x1bf)]=typedi_1['Container'][_0x56629b(0x1ca)](salesforce_logger_v3_service_1[_0x56629b(0x204)]),this['prefix']=_0x56629b(0x202)+this[_0x56629b(0x1f1)][_0x56629b(0x1d5)]+']\x20[Branch:\x20'+this[_0x56629b(0x1f1)][_0x56629b(0x1bc)]+']';try{await this[_0x56629b(0x1bf)][_0x56629b(0x1b2)](this[_0x56629b(0x1e1)]+_0x56629b(0x1c8))[_0x56629b(0x1e3)](),await this[_0x56629b(0x1bd)][_0x56629b(0x1e5)](this[_0x56629b(0x1f1)],_0x56629b(0x1c0)),this[_0x56629b(0x1bf)][_0x56629b(0x1b2)](this[_0x56629b(0x1e1)]+_0x56629b(0x1d9)),await this['createBranchIfNotExists'](),await this[_0x56629b(0x1bf)][_0x56629b(0x1b2)](this[_0x56629b(0x1e1)]+_0x56629b(0x1c4))[_0x56629b(0x1e3)]();const _0x106e08=await this[_0x56629b(0x1ea)]();this[_0x56629b(0x1bf)][_0x56629b(0x1b2)](this[_0x56629b(0x1e1)]+_0x56629b(0x1f2)+_0x106e08+'.');if(_0x106e08){await this[_0x56629b(0x1bd)][_0x56629b(0x1e5)](this[_0x56629b(0x1f1)],_0x56629b(0x1c9)),await this[_0x56629b(0x1bf)][_0x56629b(0x1b2)](this[_0x56629b(0x1e1)]+'\x20Branch\x20synchronized.\x20Skip')[_0x56629b(0x1e3)]();return;}const _0x4b015a=await this[_0x56629b(0x1da)](_0x507171);await this[_0x56629b(0x1b1)]['run'](_0x4b015a,this['prefix']),await this[_0x56629b(0x1bd)][_0x56629b(0x1e5)](this['syncData'],_0x56629b(0x1c9)),await this[_0x56629b(0x1eb)](),this[_0x56629b(0x1bf)][_0x56629b(0x1b2)](this[_0x56629b(0x1e1)]+_0x56629b(0x201));}catch(_0x43789b){throw _0x43789b;}finally{await this[_0x56629b(0x1bf)][_0x56629b(0x1e3)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a106_0x562fd7(0x1fc),[salesforce_sync_service_1[a106_0x562fd7(0x1b5)],salesforce_service_1[a106_0x562fd7(0x1be)],commit_components_job_1[a106_0x562fd7(0x1dd)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;