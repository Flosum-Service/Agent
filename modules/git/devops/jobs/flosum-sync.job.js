const a75_0x302c3b=a75_0x3ea8;(function(_0xab06d8,_0x4b00ea){const _0x32f644=a75_0x3ea8,_0x1d4983=_0xab06d8();while(!![]){try{const _0x297f79=parseInt(_0x32f644(0x18e))/0x1+-parseInt(_0x32f644(0x1b1))/0x2+parseInt(_0x32f644(0x18a))/0x3+-parseInt(_0x32f644(0x1b6))/0x4*(-parseInt(_0x32f644(0x174))/0x5)+parseInt(_0x32f644(0x195))/0x6+parseInt(_0x32f644(0x19f))/0x7+-parseInt(_0x32f644(0x190))/0x8;if(_0x297f79===_0x4b00ea)break;else _0x1d4983['push'](_0x1d4983['shift']());}catch(_0xc3fa94){_0x1d4983['push'](_0x1d4983['shift']());}}}(a75_0x58ac,0xa540a));const a75_0x2353fb=(function(){let _0x4ba2d3=!![];return function(_0x21ca75,_0x1f9a6f){const _0x4257d8=_0x4ba2d3?function(){const _0x3429f6=a75_0x3ea8;if(_0x1f9a6f){const _0x370112=_0x1f9a6f[_0x3429f6(0x19e)](_0x21ca75,arguments);return _0x1f9a6f=null,_0x370112;}}:function(){};return _0x4ba2d3=![],_0x4257d8;};}()),a75_0x4ac2bf=a75_0x2353fb(this,function(){const _0x480da4=a75_0x3ea8;return a75_0x4ac2bf[_0x480da4(0x1c9)]()[_0x480da4(0x177)](_0x480da4(0x1af))[_0x480da4(0x1c9)]()[_0x480da4(0x18d)](a75_0x4ac2bf)[_0x480da4(0x177)]('(((.+)+)+)+$');});function a75_0x58ac(){const _0x4b04ee=['branchId','commitJob','repo','design:paramtypes','getOwnPropertyDescriptor','repositoryId','checkSyncStatus','CommitComponentsDto','provider','parse','get','lastCommit','createBranchIfNotExists','getComponentIds','toString','getOne','SalesforceRetrieverService','message','SalesforceLogger3','prefix','defineProperty','31555gHXBJr','FlosumSyncJob','DEFAULT_GIT_USER_NAME','search','salesforceSync','gitUrl','Completed','../dto/commit-components.dto','../../../../constants','SalesforceSyncService','length','create','CommitComponentsJob','\x20Flosum\x20sync\x20job\x20done.','branchName','convertToSFDX','sha',']\x20[Branch:\x20','../../salesforce/services/salesforce.service','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','function','DEFAULT_GIT_USER_EMAIL','2717760XJIvMh','Container','../../salesforce/services/salesforce-retriever.service','constructor','391252FVLLhO','repository','17480344NfSgdo','updateLastCommit','catch','log','../../salesforce/services/salesforce-sync.service','5126958idnorq','__metadata','syncData','\x20Checking\x20repository\x20on\x20Flosum\x20side.','typedi','object','sfLogger','updateRemoteState','branch','apply','3782170uWuhcR','SalesforceService','metadata','In\x20Progress','branches','salesforceService','__esModule','run','getComponents','getCommitDto','force','../../salesforce/services/salesforce-logger-v3.service','components','Sync\x20repository','send','\x20Branch\x20synchronized.\x20Skip','(((.+)+)+)+$','setStatus','1187378HjAsQE','user','\x20Checking\x20sync\x20status.','\x20Start\x20Flosum\x20sync\x20job','then','484EFqtAU','decorate','getComponentsFromRepository','__decorate','\x20Sync\x20status\x20'];a75_0x58ac=function(){return _0x4b04ee;};return a75_0x58ac();}a75_0x4ac2bf();'use strict';var __decorate=this&&this[a75_0x302c3b(0x1b9)]||function(_0x41ed17,_0xb1bb5d,_0x12fc5d,_0x1741b5){const _0x3a554d=a75_0x302c3b;var _0x1406f1=arguments[_0x3a554d(0x17e)],_0xa1d556=_0x1406f1<0x3?_0xb1bb5d:_0x1741b5===null?_0x1741b5=Object[_0x3a554d(0x1bf)](_0xb1bb5d,_0x12fc5d):_0x1741b5,_0x4cdb89;if(typeof Reflect===_0x3a554d(0x19a)&&typeof Reflect[_0x3a554d(0x1b7)]===_0x3a554d(0x188))_0xa1d556=Reflect[_0x3a554d(0x1b7)](_0x41ed17,_0xb1bb5d,_0x12fc5d,_0x1741b5);else{for(var _0x36af97=_0x41ed17['length']-0x1;_0x36af97>=0x0;_0x36af97--)if(_0x4cdb89=_0x41ed17[_0x36af97])_0xa1d556=(_0x1406f1<0x3?_0x4cdb89(_0xa1d556):_0x1406f1>0x3?_0x4cdb89(_0xb1bb5d,_0x12fc5d,_0xa1d556):_0x4cdb89(_0xb1bb5d,_0x12fc5d))||_0xa1d556;}return _0x1406f1>0x3&&_0xa1d556&&Object[_0x3a554d(0x173)](_0xb1bb5d,_0x12fc5d,_0xa1d556),_0xa1d556;},__metadata=this&&this[a75_0x302c3b(0x196)]||function(_0x20e6ab,_0x3dd7f4){const _0xc28323=a75_0x302c3b;if(typeof Reflect===_0xc28323(0x19a)&&typeof Reflect[_0xc28323(0x1a1)]==='function')return Reflect['metadata'](_0x20e6ab,_0x3dd7f4);};Object[a75_0x302c3b(0x173)](exports,a75_0x302c3b(0x1a5),{'value':!![]}),exports[a75_0x302c3b(0x175)]=void 0x0;function a75_0x3ea8(_0x5854e7,_0x3d2e5f){const _0xae9f70=a75_0x58ac();return a75_0x3ea8=function(_0x4ac2bf,_0x2353fb){_0x4ac2bf=_0x4ac2bf-0x170;let _0x58ac3b=_0xae9f70[_0x4ac2bf];return _0x58ac3b;},a75_0x3ea8(_0x5854e7,_0x3d2e5f);}const salesforce_logger_v3_service_1=require(a75_0x302c3b(0x1aa)),typedi_1=require(a75_0x302c3b(0x199)),constants_1=require(a75_0x302c3b(0x17c)),salesforce_retriever_service_1=require(a75_0x302c3b(0x18c)),salesforce_sync_service_1=require(a75_0x302c3b(0x194)),salesforce_service_1=require(a75_0x302c3b(0x186)),commit_components_dto_1=require(a75_0x302c3b(0x17b)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x145726,_0x5805a0,_0xe1ff85){const _0x5d05b0=a75_0x302c3b;this[_0x5d05b0(0x178)]=_0x145726,this[_0x5d05b0(0x1a4)]=_0x5805a0,this[_0x5d05b0(0x1bc)]=_0xe1ff85;}async[a75_0x302c3b(0x1c7)](){const _0x44fccf=a75_0x302c3b;let _0x5c45ac=await this[_0x44fccf(0x18f)][_0x44fccf(0x1a3)][_0x44fccf(0x1ca)](this[_0x44fccf(0x197)][_0x44fccf(0x182)])['catch'](()=>null);!_0x5c45ac&&(_0x5c45ac=await this['repository']['branches'][_0x44fccf(0x17f)]({'name':this[_0x44fccf(0x197)][_0x44fccf(0x182)]})),this[_0x44fccf(0x19d)]=_0x5c45ac;}async[a75_0x302c3b(0x1c8)](){const _0x1e9513=a75_0x302c3b;return this['syncData'][_0x1e9513(0x1c0)]?this[_0x1e9513(0x178)][_0x1e9513(0x1b8)](this[_0x1e9513(0x197)][_0x1e9513(0x1c0)]):this['salesforceSync']['getBranchComponents'](this['syncData'][_0x1e9513(0x1bb)]);}async[a75_0x302c3b(0x1a7)](){const _0x47737a=a75_0x302c3b,_0x384064=await this['getComponentIds'](),_0x8d603b=new salesforce_retriever_service_1[(_0x47737a(0x1cb))](this[_0x47737a(0x1a4)]),_0x5a0ed5=await _0x8d603b[_0x47737a(0x1a6)](_0x384064);return _0x5a0ed5;}async[a75_0x302c3b(0x1a8)](_0x1cd480){const _0x1f0118=a75_0x302c3b,_0x10c187=new commit_components_dto_1[(_0x1f0118(0x1c2))]();return _0x10c187[_0x1f0118(0x170)]=_0x1f0118(0x1ac),_0x10c187[_0x1f0118(0x1b2)]={'name':constants_1[_0x1f0118(0x176)],'email':constants_1[_0x1f0118(0x189)]},_0x10c187[_0x1f0118(0x1ab)]={'writed':await this[_0x1f0118(0x1a7)]()},_0x10c187[_0x1f0118(0x183)]=_0x1cd480,_0x10c187[_0x1f0118(0x1bd)]=this[_0x1f0118(0x18f)],_0x10c187[_0x1f0118(0x19d)]=this['branch'],_0x10c187[_0x1f0118(0x1a9)]=!![],_0x10c187[_0x1f0118(0x1c3)]=this[_0x1f0118(0x1c3)],_0x10c187;}async['checkSyncStatus'](){const _0x8ba536=a75_0x302c3b,_0x48147c=await this[_0x8ba536(0x178)]['getRemoteStateAttachmentId'](this['syncData']),_0x5cee33=await this[_0x8ba536(0x1a4)]['retrieveAttachment'](_0x48147c)[_0x8ba536(0x1b5)](_0x3acdb5=>typeof _0x3acdb5==='string'?JSON[_0x8ba536(0x1c4)](_0x3acdb5):_0x3acdb5)[_0x8ba536(0x192)](()=>({}));if(_0x5cee33[this[_0x8ba536(0x18f)][_0x8ba536(0x179)]]){if(_0x5cee33[this[_0x8ba536(0x18f)][_0x8ba536(0x179)]][_0x8ba536(0x1c6)]===this[_0x8ba536(0x19d)]['sha'])return!![];}return![];}async[a75_0x302c3b(0x191)](){const _0x1524d2=a75_0x302c3b,_0x1301a3=await this['repository'][_0x1524d2(0x1a3)][_0x1524d2(0x1ca)](this['branch']['name']);await this[_0x1524d2(0x19b)][_0x1524d2(0x193)](this[_0x1524d2(0x172)]+'\x20Update\x20remote\x20state.');const _0x1352ef={[this[_0x1524d2(0x18f)][_0x1524d2(0x179)]]:{'lastCommit':_0x1301a3[_0x1524d2(0x184)]}};await this[_0x1524d2(0x178)][_0x1524d2(0x19c)](this[_0x1524d2(0x197)],_0x1352ef);}async[a75_0x302c3b(0x1a6)]({syncRecord:_0x44cf03,repository:_0x491399,convertToSFDX:_0x55d746,provider:_0x3703fd}){const _0x5dd019=a75_0x302c3b;this[_0x5dd019(0x197)]=_0x44cf03,this[_0x5dd019(0x1c3)]=_0x3703fd,this[_0x5dd019(0x18f)]=_0x491399,this[_0x5dd019(0x19b)]=typedi_1[_0x5dd019(0x18b)][_0x5dd019(0x1c5)](salesforce_logger_v3_service_1[_0x5dd019(0x171)]),this[_0x5dd019(0x172)]=_0x5dd019(0x187)+this[_0x5dd019(0x197)]['repositoryName']+_0x5dd019(0x185)+this[_0x5dd019(0x197)]['branchName']+']';try{await this['sfLogger'][_0x5dd019(0x193)](this['prefix']+_0x5dd019(0x1b4))[_0x5dd019(0x1ad)](),await this[_0x5dd019(0x178)]['setStatus'](this[_0x5dd019(0x197)],_0x5dd019(0x1a2)),this[_0x5dd019(0x19b)]['log'](this['prefix']+_0x5dd019(0x198)),await this['createBranchIfNotExists'](),await this['sfLogger'][_0x5dd019(0x193)](this['prefix']+_0x5dd019(0x1b3))['send']();const _0x7b1ebb=await this[_0x5dd019(0x1c1)]();this[_0x5dd019(0x19b)][_0x5dd019(0x193)](this[_0x5dd019(0x172)]+_0x5dd019(0x1ba)+_0x7b1ebb+'.');if(_0x7b1ebb){await this['salesforceSync'][_0x5dd019(0x1b0)](this['syncData'],'Completed'),await this[_0x5dd019(0x19b)][_0x5dd019(0x193)](this['prefix']+_0x5dd019(0x1ae))[_0x5dd019(0x1ad)]();return;}const _0x207835=await this['getCommitDto'](_0x55d746);await this['commitJob'][_0x5dd019(0x1a6)](_0x207835,this[_0x5dd019(0x172)]),await this['salesforceSync'][_0x5dd019(0x1b0)](this[_0x5dd019(0x197)],_0x5dd019(0x17a)),await this['updateLastCommit'](),this[_0x5dd019(0x19b)][_0x5dd019(0x193)](this['prefix']+_0x5dd019(0x181));}catch(_0x3b1ea7){throw _0x3b1ea7;}finally{await this[_0x5dd019(0x19b)][_0x5dd019(0x1ad)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a75_0x302c3b(0x1be),[salesforce_sync_service_1[a75_0x302c3b(0x17d)],salesforce_service_1[a75_0x302c3b(0x1a0)],commit_components_job_1[a75_0x302c3b(0x180)]])],FlosumSyncJob),exports[a75_0x302c3b(0x175)]=FlosumSyncJob;