const a125_0x1a13f6=a125_0x5c53;(function(_0x4f8d49,_0x4c79e5){const _0x3ba1dd=a125_0x5c53,_0x4e948a=_0x4f8d49();while(!![]){try{const _0x426e6a=parseInt(_0x3ba1dd(0xaa))/0x1+parseInt(_0x3ba1dd(0xad))/0x2+-parseInt(_0x3ba1dd(0xc6))/0x3+parseInt(_0x3ba1dd(0xa9))/0x4*(-parseInt(_0x3ba1dd(0x80))/0x5)+-parseInt(_0x3ba1dd(0xa5))/0x6+parseInt(_0x3ba1dd(0xa3))/0x7*(-parseInt(_0x3ba1dd(0xb4))/0x8)+parseInt(_0x3ba1dd(0xc2))/0x9*(parseInt(_0x3ba1dd(0x84))/0xa);if(_0x426e6a===_0x4c79e5)break;else _0x4e948a['push'](_0x4e948a['shift']());}catch(_0x2408d0){_0x4e948a['push'](_0x4e948a['shift']());}}}(a125_0x5dd5,0x8ab8e));function a125_0x5c53(_0x996427,_0x534020){const _0x4f9ef3=a125_0x5dd5();return a125_0x5c53=function(_0x1466cf,_0xd9eb2c){_0x1466cf=_0x1466cf-0x73;let _0x5dd5a6=_0x4f9ef3[_0x1466cf];return _0x5dd5a6;},a125_0x5c53(_0x996427,_0x534020);}const a125_0xd9eb2c=(function(){let _0x2fcb16=!![];return function(_0x16e7e4,_0x31e9da){const _0x2dc43c=_0x2fcb16?function(){const _0x33b863=a125_0x5c53;if(_0x31e9da){const _0x1c478d=_0x31e9da[_0x33b863(0xc7)](_0x16e7e4,arguments);return _0x31e9da=null,_0x1c478d;}}:function(){};return _0x2fcb16=![],_0x2dc43c;};}()),a125_0x1466cf=a125_0xd9eb2c(this,function(){const _0x41b77b=a125_0x5c53;return a125_0x1466cf[_0x41b77b(0xc4)]()[_0x41b77b(0x97)](_0x41b77b(0xb8))[_0x41b77b(0xc4)]()[_0x41b77b(0x74)](a125_0x1466cf)[_0x41b77b(0x97)](_0x41b77b(0xb8));});a125_0x1466cf();'use strict';function a125_0x5dd5(){const _0x48bc05=['__metadata','getOwnPropertyDescriptor','run','SalesforceService','56lMkqGr','lastCommit','decorate','branches','(((.+)+)+)+$','message','log','Completed','recordTypeName','syncData','branchName',']\x20[Branch:\x20','catch','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','36ePwHtH','defineProperty','toString','getCommitDto','2640756GvmYmh','apply','branch','createBranchIfNotExists','user','constructor','\x20Start\x20Flosum\x20sync\x20job','Service','\x20Update\x20remote\x20state.','create','recordType','\x20Checking\x20repository\x20on\x20Flosum\x20side.','SalesforceSyncService','object','name','../../salesforce/services/salesforce-logger-v3.service','getRemoteStateAttachmentId','45pUYjWs','provider','SalesforceRetrieverService','__decorate','3633610bpqKLD','../dto/commit-components.dto','parse','repositoryName','prefix','\x20Checking\x20sync\x20status.','salesforceService','getOne','FlosumSyncJob','getComponentIds','\x20Sync\x20status\x20','Container','DEFAULT_GIT_USER_NAME','string','repo','updateLastCommit','commitJob','function','force','search','getComponents','CommitComponentsDto','convertToSFDX','setStatus','typedi','CommitComponentsJob','repositoryId','salesforceSync','SalesforceLogger3','DEFAULT_GIT_USER_EMAIL','send','428407KZZNnu','./commit-components.job','3205446hfzFJI','gitUrl','sfLogger','../../../../constants','68364hFbfkJ','667413UpPBHm','components','repository','888136kEBhlH','sha','checkSyncStatus'];a125_0x5dd5=function(){return _0x48bc05;};return a125_0x5dd5();}var __decorate=this&&this[a125_0x1a13f6(0x83)]||function(_0x3d0119,_0x8d6ec2,_0x47639f,_0x11a1cb){const _0x14f5a5=a125_0x1a13f6;var _0x272751=arguments['length'],_0x2cb357=_0x272751<0x3?_0x8d6ec2:_0x11a1cb===null?_0x11a1cb=Object[_0x14f5a5(0xb1)](_0x8d6ec2,_0x47639f):_0x11a1cb,_0x3cd41e;if(typeof Reflect===_0x14f5a5(0x7c)&&typeof Reflect[_0x14f5a5(0xb6)]===_0x14f5a5(0x95))_0x2cb357=Reflect[_0x14f5a5(0xb6)](_0x3d0119,_0x8d6ec2,_0x47639f,_0x11a1cb);else{for(var _0x2daf26=_0x3d0119['length']-0x1;_0x2daf26>=0x0;_0x2daf26--)if(_0x3cd41e=_0x3d0119[_0x2daf26])_0x2cb357=(_0x272751<0x3?_0x3cd41e(_0x2cb357):_0x272751>0x3?_0x3cd41e(_0x8d6ec2,_0x47639f,_0x2cb357):_0x3cd41e(_0x8d6ec2,_0x47639f))||_0x2cb357;}return _0x272751>0x3&&_0x2cb357&&Object['defineProperty'](_0x8d6ec2,_0x47639f,_0x2cb357),_0x2cb357;},__metadata=this&&this[a125_0x1a13f6(0xb0)]||function(_0x2f8b53,_0x3a0c56){const _0x43b705=a125_0x1a13f6;if(typeof Reflect===_0x43b705(0x7c)&&typeof Reflect['metadata']===_0x43b705(0x95))return Reflect['metadata'](_0x2f8b53,_0x3a0c56);};Object[a125_0x1a13f6(0xc3)](exports,'__esModule',{'value':!![]}),exports[a125_0x1a13f6(0x8c)]=void 0x0;const salesforce_logger_v3_service_1=require(a125_0x1a13f6(0x7e)),typedi_1=require(a125_0x1a13f6(0x9c)),constants_1=require(a125_0x1a13f6(0xa8)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a125_0x1a13f6(0x85)),commit_components_job_1=require(a125_0x1a13f6(0xa4));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x3acbbe,_0x3e3a53,_0x5c7eb0){const _0x37870e=a125_0x1a13f6;this[_0x37870e(0x9f)]=_0x3acbbe,this[_0x37870e(0x8a)]=_0x3e3a53,this['commitJob']=_0x5c7eb0;}async[a125_0x1a13f6(0xc9)](){const _0x13547d=a125_0x1a13f6;let _0x3557fe=await this[_0x13547d(0xac)][_0x13547d(0xb7)][_0x13547d(0x8b)](this[_0x13547d(0xbd)][_0x13547d(0xbe)])[_0x13547d(0xc0)](()=>null);!_0x3557fe&&(_0x3557fe=await this[_0x13547d(0xac)][_0x13547d(0xb7)][_0x13547d(0x78)]({'name':this[_0x13547d(0xbd)]['branchName']})),this[_0x13547d(0xc8)]=_0x3557fe;}async[a125_0x1a13f6(0x8d)](){const _0x5add97=a125_0x1a13f6;return this[_0x5add97(0xbd)][_0x5add97(0x9e)]?this['salesforceSync']['getComponentsFromRepository'](this[_0x5add97(0xbd)][_0x5add97(0x9e)]):this[_0x5add97(0x9f)]['getBranchComponents'](this[_0x5add97(0xbd)]['branchId']);}async['getComponents'](){const _0x5309fb=a125_0x1a13f6,_0x232395=await this[_0x5309fb(0x8d)](),_0x989c5=new salesforce_retriever_service_1[(_0x5309fb(0x82))](this[_0x5309fb(0x8a)]),_0x525ba5=await _0x989c5[_0x5309fb(0xb2)](_0x232395);return _0x525ba5;}async[a125_0x1a13f6(0xc5)](_0x3af0ca){const _0x464623=a125_0x1a13f6,_0x33708f=new commit_components_dto_1[(_0x464623(0x99))]();return _0x33708f[_0x464623(0xb9)]='Sync\x20repository',_0x33708f[_0x464623(0x73)]={'name':constants_1[_0x464623(0x90)],'email':constants_1[_0x464623(0xa1)]},_0x33708f[_0x464623(0xab)]={'writed':await this[_0x464623(0x98)]()},_0x33708f[_0x464623(0x9a)]=_0x3af0ca,_0x33708f[_0x464623(0x92)]=this[_0x464623(0xac)],_0x33708f['branch']=this[_0x464623(0xc8)],_0x33708f[_0x464623(0x96)]=!![],_0x33708f[_0x464623(0x81)]=this[_0x464623(0x81)],_0x33708f[_0x464623(0x79)]=this[_0x464623(0xbd)][_0x464623(0xbc)],_0x33708f;}async[a125_0x1a13f6(0xaf)](){const _0x47b0b9=a125_0x1a13f6,_0x58f9e4=await this[_0x47b0b9(0x9f)][_0x47b0b9(0x7f)](this[_0x47b0b9(0xbd)]),_0x1d0663=await this[_0x47b0b9(0x8a)]['retrieveAttachment'](_0x58f9e4)['then'](_0x57ef67=>typeof _0x57ef67===_0x47b0b9(0x91)?JSON[_0x47b0b9(0x86)](_0x57ef67):_0x57ef67)['catch'](()=>({}));if(_0x1d0663[this['repository'][_0x47b0b9(0xa6)]]){if(_0x1d0663[this[_0x47b0b9(0xac)]['gitUrl']][_0x47b0b9(0xb5)]===this[_0x47b0b9(0xc8)][_0x47b0b9(0xae)])return!![];}return![];}async[a125_0x1a13f6(0x93)](){const _0x16cd03=a125_0x1a13f6,_0x27e7bd=await this[_0x16cd03(0xac)]['branches'][_0x16cd03(0x8b)](this['branch'][_0x16cd03(0x7d)]);await this[_0x16cd03(0xa7)][_0x16cd03(0xba)](this[_0x16cd03(0x88)]+_0x16cd03(0x77));const _0x2f6083={[this[_0x16cd03(0xac)][_0x16cd03(0xa6)]]:{'lastCommit':_0x27e7bd['sha']}};await this[_0x16cd03(0x9f)]['updateRemoteState'](this[_0x16cd03(0xbd)],_0x2f6083);}async['run']({syncRecord:_0x20cc5e,repository:_0x4bb516,convertToSFDX:_0x144249,provider:_0x1921c8}){const _0x82ff4e=a125_0x1a13f6;this['syncData']=_0x20cc5e,this[_0x82ff4e(0x81)]=_0x1921c8,this['repository']=_0x4bb516,this[_0x82ff4e(0xa7)]=typedi_1[_0x82ff4e(0x8f)]['get'](salesforce_logger_v3_service_1[_0x82ff4e(0xa0)]),this[_0x82ff4e(0x88)]=_0x82ff4e(0xc1)+this[_0x82ff4e(0xbd)][_0x82ff4e(0x87)]+_0x82ff4e(0xbf)+this[_0x82ff4e(0xbd)][_0x82ff4e(0xbe)]+']';try{await this[_0x82ff4e(0xa7)]['log'](this['prefix']+_0x82ff4e(0x75))['send'](),await this[_0x82ff4e(0x9f)][_0x82ff4e(0x9b)](this['syncData'],'In\x20Progress'),this[_0x82ff4e(0xa7)]['log'](this[_0x82ff4e(0x88)]+_0x82ff4e(0x7a)),await this[_0x82ff4e(0xc9)](),await this[_0x82ff4e(0xa7)][_0x82ff4e(0xba)](this[_0x82ff4e(0x88)]+_0x82ff4e(0x89))[_0x82ff4e(0xa2)]();const _0x3ecc3a=await this['checkSyncStatus']();this[_0x82ff4e(0xa7)][_0x82ff4e(0xba)](this['prefix']+_0x82ff4e(0x8e)+_0x3ecc3a+'.');if(_0x3ecc3a){await this[_0x82ff4e(0x9f)][_0x82ff4e(0x9b)](this[_0x82ff4e(0xbd)],_0x82ff4e(0xbb)),await this[_0x82ff4e(0xa7)][_0x82ff4e(0xba)](this[_0x82ff4e(0x88)]+'\x20Branch\x20synchronized.\x20Skip')[_0x82ff4e(0xa2)]();return;}const _0x1d5416=await this[_0x82ff4e(0xc5)](_0x144249);await this[_0x82ff4e(0x94)][_0x82ff4e(0xb2)](_0x1d5416,this[_0x82ff4e(0x88)]),await this[_0x82ff4e(0x9f)][_0x82ff4e(0x9b)](this[_0x82ff4e(0xbd)],_0x82ff4e(0xbb)),await this[_0x82ff4e(0x93)](),this[_0x82ff4e(0xa7)]['log'](this[_0x82ff4e(0x88)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0xc68313){throw _0xc68313;}finally{await this[_0x82ff4e(0xa7)][_0x82ff4e(0xa2)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a125_0x1a13f6(0x76)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a125_0x1a13f6(0x7b)],salesforce_service_1[a125_0x1a13f6(0xb3)],commit_components_job_1[a125_0x1a13f6(0x9d)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;