const a126_0x27e0f3=a126_0x4116;function a126_0x4831(){const _0x179235=['53178gWGWbd','search','__metadata','run','161EpDNri','lastCommit','../dto/commit-components.dto','syncData','364164bEROKt','length','updateRemoteState','decorate','defineProperty','createBranchIfNotExists','branchName','DEFAULT_GIT_USER_EMAIL','branches','7735608yYbirc','5430192fnkvXe','name','getComponentsFromRepository','recordType','retrieveAttachment','getBranchComponents','metadata','force','commitJob','object','\x20Update\x20remote\x20state.','getComponentIds','get','\x20Sync\x20status\x20','repo','\x20Flosum\x20sync\x20job\x20done.','1925820wnPnNQ','constructor','../../salesforce/services/salesforce.service','convertToSFDX','__decorate','prefix','FlosumSyncJob','salesforceSync','\x20Checking\x20repository\x20on\x20Flosum\x20side.','salesforceService','setStatus','../../../../constants','Sync\x20repository','Container','getComponents','8hwEwiH','../../salesforce/services/salesforce-logger-v3.service','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','send','sha','checkSyncStatus','CommitComponentsDto','getOwnPropertyDescriptor','provider','catch','DEFAULT_GIT_USER_NAME','user','gitUrl','updateLastCommit','repositoryId','1622841HgusMf','repository','apply','2749528GGnLCC','Completed','design:paramtypes','getOne','string','recordTypeName','In\x20Progress','getRemoteStateAttachmentId','function','../../salesforce/services/salesforce-retriever.service','(((.+)+)+)+$','SalesforceSyncService','components','CommitComponentsJob','./commit-components.job','Service','branchId','branch','SalesforceRetrieverService','log','sfLogger','getCommitDto','__esModule'];a126_0x4831=function(){return _0x179235;};return a126_0x4831();}(function(_0x181c4b,_0x67e48e){const _0x439612=a126_0x4116,_0x3597f8=_0x181c4b();while(!![]){try{const _0x2a7573=parseInt(_0x439612(0x1f7))/0x1+-parseInt(_0x439612(0x1fa))/0x2+-parseInt(_0x439612(0x219))/0x3+-parseInt(_0x439612(0x1e8))/0x4*(-parseInt(_0x439612(0x1d9))/0x5)+parseInt(_0x439612(0x211))/0x6*(-parseInt(_0x439612(0x215))/0x7)+-parseInt(_0x439612(0x223))/0x8+parseInt(_0x439612(0x222))/0x9;if(_0x2a7573===_0x67e48e)break;else _0x3597f8['push'](_0x3597f8['shift']());}catch(_0x1a785b){_0x3597f8['push'](_0x3597f8['shift']());}}}(a126_0x4831,0xd55b2));const a126_0x1f6420=(function(){let _0x49eb98=!![];return function(_0x1ed1ca,_0x21280d){const _0x5566bf=_0x49eb98?function(){const _0x535798=a126_0x4116;if(_0x21280d){const _0x5074df=_0x21280d[_0x535798(0x1f9)](_0x1ed1ca,arguments);return _0x21280d=null,_0x5074df;}}:function(){};return _0x49eb98=![],_0x5566bf;};}()),a126_0x54316d=a126_0x1f6420(this,function(){const _0x2c7efa=a126_0x4116;return a126_0x54316d['toString']()[_0x2c7efa(0x212)](_0x2c7efa(0x204))['toString']()[_0x2c7efa(0x1da)](a126_0x54316d)[_0x2c7efa(0x212)](_0x2c7efa(0x204));});a126_0x54316d();'use strict';var __decorate=this&&this[a126_0x27e0f3(0x1dd)]||function(_0x3d5339,_0x29f03b,_0x52570f,_0x726988){const _0x5c565d=a126_0x27e0f3;var _0x2dae36=arguments[_0x5c565d(0x21a)],_0x3b479e=_0x2dae36<0x3?_0x29f03b:_0x726988===null?_0x726988=Object[_0x5c565d(0x1ef)](_0x29f03b,_0x52570f):_0x726988,_0x414537;if(typeof Reflect===_0x5c565d(0x1d2)&&typeof Reflect[_0x5c565d(0x21c)]===_0x5c565d(0x202))_0x3b479e=Reflect[_0x5c565d(0x21c)](_0x3d5339,_0x29f03b,_0x52570f,_0x726988);else{for(var _0xfeed13=_0x3d5339[_0x5c565d(0x21a)]-0x1;_0xfeed13>=0x0;_0xfeed13--)if(_0x414537=_0x3d5339[_0xfeed13])_0x3b479e=(_0x2dae36<0x3?_0x414537(_0x3b479e):_0x2dae36>0x3?_0x414537(_0x29f03b,_0x52570f,_0x3b479e):_0x414537(_0x29f03b,_0x52570f))||_0x3b479e;}return _0x2dae36>0x3&&_0x3b479e&&Object[_0x5c565d(0x21d)](_0x29f03b,_0x52570f,_0x3b479e),_0x3b479e;},__metadata=this&&this[a126_0x27e0f3(0x213)]||function(_0x5034af,_0x21ac5b){const _0x15b3fd=a126_0x27e0f3;if(typeof Reflect===_0x15b3fd(0x1d2)&&typeof Reflect[_0x15b3fd(0x1cf)]===_0x15b3fd(0x202))return Reflect[_0x15b3fd(0x1cf)](_0x5034af,_0x21ac5b);};Object[a126_0x27e0f3(0x21d)](exports,a126_0x27e0f3(0x210),{'value':!![]}),exports[a126_0x27e0f3(0x1df)]=void 0x0;const salesforce_logger_v3_service_1=require(a126_0x27e0f3(0x1e9)),typedi_1=require('typedi'),constants_1=require(a126_0x27e0f3(0x1e4)),salesforce_retriever_service_1=require(a126_0x27e0f3(0x203)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a126_0x27e0f3(0x1db)),commit_components_dto_1=require(a126_0x27e0f3(0x217)),commit_components_job_1=require(a126_0x27e0f3(0x208));function a126_0x4116(_0x49ec24,_0x2c7e24){const _0x5cfa6c=a126_0x4831();return a126_0x4116=function(_0x54316d,_0x1f6420){_0x54316d=_0x54316d-0x1cd;let _0x483142=_0x5cfa6c[_0x54316d];return _0x483142;},a126_0x4116(_0x49ec24,_0x2c7e24);}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x6cc42f,_0x22bbb7,_0x4833b9){const _0x15bc1f=a126_0x27e0f3;this[_0x15bc1f(0x1e0)]=_0x6cc42f,this[_0x15bc1f(0x1e2)]=_0x22bbb7,this[_0x15bc1f(0x1d1)]=_0x4833b9;}async[a126_0x27e0f3(0x21e)](){const _0x35e371=a126_0x27e0f3;let _0x4c762b=await this['repository'][_0x35e371(0x221)][_0x35e371(0x1fd)](this[_0x35e371(0x218)]['branchName'])[_0x35e371(0x1f1)](()=>null);!_0x4c762b&&(_0x4c762b=await this[_0x35e371(0x1f8)][_0x35e371(0x221)]['create']({'name':this[_0x35e371(0x218)][_0x35e371(0x21f)]})),this[_0x35e371(0x20b)]=_0x4c762b;}async[a126_0x27e0f3(0x1d4)](){const _0x18222d=a126_0x27e0f3;return this[_0x18222d(0x218)][_0x18222d(0x1f6)]?this['salesforceSync'][_0x18222d(0x225)](this['syncData'][_0x18222d(0x1f6)]):this[_0x18222d(0x1e0)][_0x18222d(0x1ce)](this['syncData'][_0x18222d(0x20a)]);}async[a126_0x27e0f3(0x1e7)](){const _0x32b3c8=a126_0x27e0f3,_0x182f28=await this[_0x32b3c8(0x1d4)](),_0x20b17c=new salesforce_retriever_service_1[(_0x32b3c8(0x20c))](this[_0x32b3c8(0x1e2)]),_0x566d89=await _0x20b17c[_0x32b3c8(0x214)](_0x182f28);return _0x566d89;}async[a126_0x27e0f3(0x20f)](_0x2970b9){const _0x3f15fa=a126_0x27e0f3,_0x535cc8=new commit_components_dto_1[(_0x3f15fa(0x1ee))]();return _0x535cc8['message']=_0x3f15fa(0x1e5),_0x535cc8[_0x3f15fa(0x1f3)]={'name':constants_1[_0x3f15fa(0x1f2)],'email':constants_1[_0x3f15fa(0x220)]},_0x535cc8[_0x3f15fa(0x206)]={'writed':await this[_0x3f15fa(0x1e7)]()},_0x535cc8[_0x3f15fa(0x1dc)]=_0x2970b9,_0x535cc8[_0x3f15fa(0x1d7)]=this[_0x3f15fa(0x1f8)],_0x535cc8[_0x3f15fa(0x20b)]=this[_0x3f15fa(0x20b)],_0x535cc8[_0x3f15fa(0x1d0)]=!![],_0x535cc8[_0x3f15fa(0x1f0)]=this[_0x3f15fa(0x1f0)],_0x535cc8[_0x3f15fa(0x226)]=this['syncData'][_0x3f15fa(0x1ff)],_0x535cc8;}async[a126_0x27e0f3(0x1ed)](){const _0xf92608=a126_0x27e0f3,_0x4ca52d=await this[_0xf92608(0x1e0)][_0xf92608(0x201)](this[_0xf92608(0x218)]),_0x310685=await this[_0xf92608(0x1e2)][_0xf92608(0x1cd)](_0x4ca52d)['then'](_0x120a17=>typeof _0x120a17===_0xf92608(0x1fe)?JSON['parse'](_0x120a17):_0x120a17)[_0xf92608(0x1f1)](()=>({}));if(_0x310685[this[_0xf92608(0x1f8)][_0xf92608(0x1f4)]]){if(_0x310685[this[_0xf92608(0x1f8)][_0xf92608(0x1f4)]][_0xf92608(0x216)]===this['branch'][_0xf92608(0x1ec)])return!![];}return![];}async[a126_0x27e0f3(0x1f5)](){const _0x58c937=a126_0x27e0f3,_0x2dc3da=await this[_0x58c937(0x1f8)]['branches'][_0x58c937(0x1fd)](this[_0x58c937(0x20b)][_0x58c937(0x224)]);await this[_0x58c937(0x20e)]['log'](this['prefix']+_0x58c937(0x1d3));const _0x41082d={[this[_0x58c937(0x1f8)][_0x58c937(0x1f4)]]:{'lastCommit':_0x2dc3da[_0x58c937(0x1ec)]}};await this[_0x58c937(0x1e0)][_0x58c937(0x21b)](this[_0x58c937(0x218)],_0x41082d);}async[a126_0x27e0f3(0x214)]({syncRecord:_0xac0990,repository:_0x24d2bb,convertToSFDX:_0x1b35d9,provider:_0xa7c15}){const _0x355a1f=a126_0x27e0f3;this[_0x355a1f(0x218)]=_0xac0990,this['provider']=_0xa7c15,this[_0x355a1f(0x1f8)]=_0x24d2bb,this[_0x355a1f(0x20e)]=typedi_1[_0x355a1f(0x1e6)][_0x355a1f(0x1d5)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x355a1f(0x1de)]=_0x355a1f(0x1ea)+this['syncData']['repositoryName']+']\x20[Branch:\x20'+this['syncData'][_0x355a1f(0x21f)]+']';try{await this['sfLogger'][_0x355a1f(0x20d)](this[_0x355a1f(0x1de)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x355a1f(0x1eb)](),await this[_0x355a1f(0x1e0)][_0x355a1f(0x1e3)](this['syncData'],_0x355a1f(0x200)),this[_0x355a1f(0x20e)][_0x355a1f(0x20d)](this['prefix']+_0x355a1f(0x1e1)),await this['createBranchIfNotExists'](),await this[_0x355a1f(0x20e)][_0x355a1f(0x20d)](this['prefix']+'\x20Checking\x20sync\x20status.')['send']();const _0x308f00=await this[_0x355a1f(0x1ed)]();this['sfLogger']['log'](this['prefix']+_0x355a1f(0x1d6)+_0x308f00+'.');if(_0x308f00){await this['salesforceSync'][_0x355a1f(0x1e3)](this[_0x355a1f(0x218)],_0x355a1f(0x1fb)),await this[_0x355a1f(0x20e)][_0x355a1f(0x20d)](this['prefix']+'\x20Branch\x20synchronized.\x20Skip')[_0x355a1f(0x1eb)]();return;}const _0x5670f6=await this[_0x355a1f(0x20f)](_0x1b35d9);await this[_0x355a1f(0x1d1)][_0x355a1f(0x214)](_0x5670f6,this[_0x355a1f(0x1de)]),await this[_0x355a1f(0x1e0)][_0x355a1f(0x1e3)](this[_0x355a1f(0x218)],'Completed'),await this['updateLastCommit'](),this[_0x355a1f(0x20e)][_0x355a1f(0x20d)](this[_0x355a1f(0x1de)]+_0x355a1f(0x1d8));}catch(_0x3d9d49){throw _0x3d9d49;}finally{await this[_0x355a1f(0x20e)][_0x355a1f(0x1eb)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a126_0x27e0f3(0x209)])({'transient':!![]}),__metadata(a126_0x27e0f3(0x1fc),[salesforce_sync_service_1[a126_0x27e0f3(0x205)],salesforce_service_1['SalesforceService'],commit_components_job_1[a126_0x27e0f3(0x207)]])],FlosumSyncJob),exports[a126_0x27e0f3(0x1df)]=FlosumSyncJob;