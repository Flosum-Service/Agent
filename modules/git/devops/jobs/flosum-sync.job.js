const a123_0x85998e=a123_0x53f9;function a123_0x50f4(){const _0x50f8a4=['getComponents','In\x20Progress','metadata','\x20Sync\x20status\x20','\x20Start\x20Flosum\x20sync\x20job','./commit-components.job','../dto/commit-components.dto','branchName','branch','salesforceService','object','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','\x20Branch\x20synchronized.\x20Skip','checkSyncStatus','getOwnPropertyDescriptor','createBranchIfNotExists','getComponentsFromRepository','toString','410Ubyemz','create','string','retrieveAttachment','apply','prefix','Completed','recordTypeName','function','repositoryName','Service','branches','../../../../constants','../../salesforce/services/salesforce.service','Container','3400qMTinD','4178430gPxGkv','design:paramtypes','parse','run','getCommitDto','101106PAOkyQ','getComponentIds','constructor','DEFAULT_GIT_USER_EMAIL','recordType','1062276cjroYP','sfLogger','get','14BEwdIS','updateRemoteState','__esModule','1743bEZBnc','SalesforceSyncService','__decorate','updateLastCommit','setStatus','sha','force','log','../../salesforce/services/salesforce-retriever.service','repository','defineProperty','salesforceSync','2679464UzEWVW','FlosumSyncJob','SalesforceRetrieverService','789867VyGjZl','getRemoteStateAttachmentId','repositoryId','commitJob','repo','\x20Update\x20remote\x20state.','catch','components','(((.+)+)+)+$','send','branchId','provider','DEFAULT_GIT_USER_NAME','\x20Checking\x20repository\x20on\x20Flosum\x20side.','search','\x20Flosum\x20sync\x20job\x20done.','3070362GPtYIa','gitUrl','user','syncData','length','convertToSFDX','message','../../salesforce/services/salesforce-sync.service','getOne','SalesforceService','name','lastCommit','Sync\x20repository','typedi','decorate'];a123_0x50f4=function(){return _0x50f8a4;};return a123_0x50f4();}(function(_0x49e0ae,_0xe24de5){const _0x5256da=a123_0x53f9,_0x42ec44=_0x49e0ae();while(!![]){try{const _0x194f09=-parseInt(_0x5256da(0x139))/0x1+parseInt(_0x5256da(0x184))/0x2+parseInt(_0x5256da(0x18a))/0x3*(parseInt(_0x5256da(0x179))/0x4)+parseInt(_0x5256da(0x17a))/0x5+parseInt(_0x5256da(0x149))/0x6+parseInt(_0x5256da(0x187))/0x7*(-parseInt(_0x5256da(0x196))/0x8)+parseInt(_0x5256da(0x17f))/0x9*(-parseInt(_0x5256da(0x16a))/0xa);if(_0x194f09===_0xe24de5)break;else _0x42ec44['push'](_0x42ec44['shift']());}catch(_0x1628b8){_0x42ec44['push'](_0x42ec44['shift']());}}}(a123_0x50f4,0x6e5ea));const a123_0x4f890a=(function(){let _0xc22b0a=!![];return function(_0x3c8223,_0x16f9d9){const _0x218548=_0xc22b0a?function(){const _0x1a5e81=a123_0x53f9;if(_0x16f9d9){const _0xc04b55=_0x16f9d9[_0x1a5e81(0x16e)](_0x3c8223,arguments);return _0x16f9d9=null,_0xc04b55;}}:function(){};return _0xc22b0a=![],_0x218548;};}()),a123_0x39f1b3=a123_0x4f890a(this,function(){const _0x44d240=a123_0x53f9;return a123_0x39f1b3[_0x44d240(0x169)]()[_0x44d240(0x147)](_0x44d240(0x141))[_0x44d240(0x169)]()[_0x44d240(0x181)](a123_0x39f1b3)[_0x44d240(0x147)]('(((.+)+)+)+$');});a123_0x39f1b3();'use strict';function a123_0x53f9(_0x3cfee9,_0x22fe35){const _0xae113b=a123_0x50f4();return a123_0x53f9=function(_0x39f1b3,_0x4f890a){_0x39f1b3=_0x39f1b3-0x137;let _0x50f40a=_0xae113b[_0x39f1b3];return _0x50f40a;},a123_0x53f9(_0x3cfee9,_0x22fe35);}var __decorate=this&&this[a123_0x85998e(0x18c)]||function(_0x465649,_0x571316,_0x33ac21,_0x15b050){const _0x17f4eb=a123_0x85998e;var _0xc9f44a=arguments[_0x17f4eb(0x14d)],_0x24429f=_0xc9f44a<0x3?_0x571316:_0x15b050===null?_0x15b050=Object[_0x17f4eb(0x166)](_0x571316,_0x33ac21):_0x15b050,_0x3f30f4;if(typeof Reflect==='object'&&typeof Reflect[_0x17f4eb(0x157)]===_0x17f4eb(0x172))_0x24429f=Reflect[_0x17f4eb(0x157)](_0x465649,_0x571316,_0x33ac21,_0x15b050);else{for(var _0x5f1c8d=_0x465649[_0x17f4eb(0x14d)]-0x1;_0x5f1c8d>=0x0;_0x5f1c8d--)if(_0x3f30f4=_0x465649[_0x5f1c8d])_0x24429f=(_0xc9f44a<0x3?_0x3f30f4(_0x24429f):_0xc9f44a>0x3?_0x3f30f4(_0x571316,_0x33ac21,_0x24429f):_0x3f30f4(_0x571316,_0x33ac21))||_0x24429f;}return _0xc9f44a>0x3&&_0x24429f&&Object['defineProperty'](_0x571316,_0x33ac21,_0x24429f),_0x24429f;},__metadata=this&&this['__metadata']||function(_0x3f6dbd,_0x1942aa){const _0x2b75a3=a123_0x85998e;if(typeof Reflect===_0x2b75a3(0x162)&&typeof Reflect[_0x2b75a3(0x15a)]===_0x2b75a3(0x172))return Reflect[_0x2b75a3(0x15a)](_0x3f6dbd,_0x1942aa);};Object[a123_0x85998e(0x194)](exports,a123_0x85998e(0x189),{'value':!![]}),exports[a123_0x85998e(0x137)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a123_0x85998e(0x156)),constants_1=require(a123_0x85998e(0x176)),salesforce_retriever_service_1=require(a123_0x85998e(0x192)),salesforce_sync_service_1=require(a123_0x85998e(0x150)),salesforce_service_1=require(a123_0x85998e(0x177)),commit_components_dto_1=require(a123_0x85998e(0x15e)),commit_components_job_1=require(a123_0x85998e(0x15d));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x3d91a7,_0x301667,_0x17e012){const _0x4fac3b=a123_0x85998e;this['salesforceSync']=_0x3d91a7,this[_0x4fac3b(0x161)]=_0x301667,this['commitJob']=_0x17e012;}async[a123_0x85998e(0x167)](){const _0x35f3ef=a123_0x85998e;let _0x5bdcee=await this[_0x35f3ef(0x193)][_0x35f3ef(0x175)][_0x35f3ef(0x151)](this[_0x35f3ef(0x14c)]['branchName'])[_0x35f3ef(0x13f)](()=>null);!_0x5bdcee&&(_0x5bdcee=await this['repository']['branches'][_0x35f3ef(0x16b)]({'name':this[_0x35f3ef(0x14c)][_0x35f3ef(0x15f)]})),this['branch']=_0x5bdcee;}async[a123_0x85998e(0x180)](){const _0x4be1c2=a123_0x85998e;return this['syncData'][_0x4be1c2(0x13b)]?this[_0x4be1c2(0x195)][_0x4be1c2(0x168)](this['syncData'][_0x4be1c2(0x13b)]):this['salesforceSync']['getBranchComponents'](this[_0x4be1c2(0x14c)][_0x4be1c2(0x143)]);}async[a123_0x85998e(0x158)](){const _0x58d839=a123_0x85998e,_0x6aff1d=await this[_0x58d839(0x180)](),_0x18edd4=new salesforce_retriever_service_1[(_0x58d839(0x138))](this[_0x58d839(0x161)]),_0x418a06=await _0x18edd4['run'](_0x6aff1d);return _0x418a06;}async[a123_0x85998e(0x17e)](_0x1f5e64){const _0x5069d5=a123_0x85998e,_0x5532f9=new commit_components_dto_1['CommitComponentsDto']();return _0x5532f9[_0x5069d5(0x14f)]=_0x5069d5(0x155),_0x5532f9[_0x5069d5(0x14b)]={'name':constants_1[_0x5069d5(0x145)],'email':constants_1[_0x5069d5(0x182)]},_0x5532f9[_0x5069d5(0x140)]={'writed':await this[_0x5069d5(0x158)]()},_0x5532f9[_0x5069d5(0x14e)]=_0x1f5e64,_0x5532f9[_0x5069d5(0x13d)]=this['repository'],_0x5532f9[_0x5069d5(0x160)]=this[_0x5069d5(0x160)],_0x5532f9[_0x5069d5(0x190)]=!![],_0x5532f9[_0x5069d5(0x144)]=this[_0x5069d5(0x144)],_0x5532f9[_0x5069d5(0x183)]=this[_0x5069d5(0x14c)][_0x5069d5(0x171)],_0x5532f9;}async[a123_0x85998e(0x165)](){const _0x145cd6=a123_0x85998e,_0xb9de60=await this[_0x145cd6(0x195)][_0x145cd6(0x13a)](this[_0x145cd6(0x14c)]),_0x9d5e36=await this['salesforceService'][_0x145cd6(0x16d)](_0xb9de60)['then'](_0x191724=>typeof _0x191724===_0x145cd6(0x16c)?JSON[_0x145cd6(0x17c)](_0x191724):_0x191724)['catch'](()=>({}));if(_0x9d5e36[this[_0x145cd6(0x193)][_0x145cd6(0x14a)]]){if(_0x9d5e36[this['repository'][_0x145cd6(0x14a)]][_0x145cd6(0x154)]===this[_0x145cd6(0x160)][_0x145cd6(0x18f)])return!![];}return![];}async[a123_0x85998e(0x18d)](){const _0xc5b842=a123_0x85998e,_0x3f9dc2=await this[_0xc5b842(0x193)][_0xc5b842(0x175)][_0xc5b842(0x151)](this[_0xc5b842(0x160)][_0xc5b842(0x153)]);await this[_0xc5b842(0x185)]['log'](this[_0xc5b842(0x16f)]+_0xc5b842(0x13e));const _0x56685c={[this[_0xc5b842(0x193)][_0xc5b842(0x14a)]]:{'lastCommit':_0x3f9dc2['sha']}};await this['salesforceSync'][_0xc5b842(0x188)](this[_0xc5b842(0x14c)],_0x56685c);}async[a123_0x85998e(0x17d)]({syncRecord:_0xcf7ed5,repository:_0x4ebb07,convertToSFDX:_0x23f607,provider:_0x3b31e7}){const _0x348130=a123_0x85998e;this[_0x348130(0x14c)]=_0xcf7ed5,this['provider']=_0x3b31e7,this[_0x348130(0x193)]=_0x4ebb07,this[_0x348130(0x185)]=typedi_1[_0x348130(0x178)][_0x348130(0x186)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x348130(0x16f)]=_0x348130(0x163)+this[_0x348130(0x14c)][_0x348130(0x173)]+']\x20[Branch:\x20'+this[_0x348130(0x14c)]['branchName']+']';try{await this[_0x348130(0x185)]['log'](this['prefix']+_0x348130(0x15c))['send'](),await this[_0x348130(0x195)][_0x348130(0x18e)](this[_0x348130(0x14c)],_0x348130(0x159)),this[_0x348130(0x185)][_0x348130(0x191)](this[_0x348130(0x16f)]+_0x348130(0x146)),await this[_0x348130(0x167)](),await this['sfLogger'][_0x348130(0x191)](this[_0x348130(0x16f)]+'\x20Checking\x20sync\x20status.')['send']();const _0x4d67c7=await this['checkSyncStatus']();this[_0x348130(0x185)][_0x348130(0x191)](this[_0x348130(0x16f)]+_0x348130(0x15b)+_0x4d67c7+'.');if(_0x4d67c7){await this['salesforceSync'][_0x348130(0x18e)](this[_0x348130(0x14c)],_0x348130(0x170)),await this[_0x348130(0x185)]['log'](this[_0x348130(0x16f)]+_0x348130(0x164))[_0x348130(0x142)]();return;}const _0x3ffaca=await this[_0x348130(0x17e)](_0x23f607);await this[_0x348130(0x13c)]['run'](_0x3ffaca,this[_0x348130(0x16f)]),await this[_0x348130(0x195)]['setStatus'](this['syncData'],_0x348130(0x170)),await this[_0x348130(0x18d)](),this[_0x348130(0x185)][_0x348130(0x191)](this[_0x348130(0x16f)]+_0x348130(0x148));}catch(_0x3e1350){throw _0x3e1350;}finally{await this[_0x348130(0x185)][_0x348130(0x142)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a123_0x85998e(0x174)])({'transient':!![]}),__metadata(a123_0x85998e(0x17b),[salesforce_sync_service_1[a123_0x85998e(0x18b)],salesforce_service_1[a123_0x85998e(0x152)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a123_0x85998e(0x137)]=FlosumSyncJob;