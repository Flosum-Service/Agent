const a106_0xcd6483=a106_0x19ba;(function(_0x2f70b9,_0x506c7d){const _0x7944d6=a106_0x19ba,_0x62b9b0=_0x2f70b9();while(!![]){try{const _0x1c4174=parseInt(_0x7944d6(0x110))/0x1+parseInt(_0x7944d6(0x130))/0x2+parseInt(_0x7944d6(0x141))/0x3*(parseInt(_0x7944d6(0x135))/0x4)+-parseInt(_0x7944d6(0x103))/0x5*(parseInt(_0x7944d6(0x142))/0x6)+-parseInt(_0x7944d6(0x11c))/0x7+parseInt(_0x7944d6(0x101))/0x8+-parseInt(_0x7944d6(0xfc))/0x9*(-parseInt(_0x7944d6(0x10f))/0xa);if(_0x1c4174===_0x506c7d)break;else _0x62b9b0['push'](_0x62b9b0['shift']());}catch(_0x29693a){_0x62b9b0['push'](_0x62b9b0['shift']());}}}(a106_0x5bad,0x61175));const a106_0x43303b=(function(){let _0x85f5cd=!![];return function(_0x3e9aca,_0x4786ce){const _0x366747=_0x85f5cd?function(){const _0x4e45d4=a106_0x19ba;if(_0x4786ce){const _0x5662ba=_0x4786ce[_0x4e45d4(0x122)](_0x3e9aca,arguments);return _0x4786ce=null,_0x5662ba;}}:function(){};return _0x85f5cd=![],_0x366747;};}()),a106_0x130cd3=a106_0x43303b(this,function(){const _0x478fa2=a106_0x19ba;return a106_0x130cd3['toString']()[_0x478fa2(0x11b)]('(((.+)+)+)+$')[_0x478fa2(0x12f)]()[_0x478fa2(0x140)](a106_0x130cd3)[_0x478fa2(0x11b)]('(((.+)+)+)+$');});a106_0x130cd3();'use strict';var __decorate=this&&this[a106_0xcd6483(0x13d)]||function(_0x26e43f,_0x40be63,_0x1ef250,_0x1d270f){const _0x90e177=a106_0xcd6483;var _0x3e7c91=arguments[_0x90e177(0x114)],_0x93805d=_0x3e7c91<0x3?_0x40be63:_0x1d270f===null?_0x1d270f=Object[_0x90e177(0x133)](_0x40be63,_0x1ef250):_0x1d270f,_0x57a318;if(typeof Reflect===_0x90e177(0x14f)&&typeof Reflect['decorate']==='function')_0x93805d=Reflect['decorate'](_0x26e43f,_0x40be63,_0x1ef250,_0x1d270f);else{for(var _0x489dbf=_0x26e43f[_0x90e177(0x114)]-0x1;_0x489dbf>=0x0;_0x489dbf--)if(_0x57a318=_0x26e43f[_0x489dbf])_0x93805d=(_0x3e7c91<0x3?_0x57a318(_0x93805d):_0x3e7c91>0x3?_0x57a318(_0x40be63,_0x1ef250,_0x93805d):_0x57a318(_0x40be63,_0x1ef250))||_0x93805d;}return _0x3e7c91>0x3&&_0x93805d&&Object[_0x90e177(0x117)](_0x40be63,_0x1ef250,_0x93805d),_0x93805d;},__metadata=this&&this[a106_0xcd6483(0x147)]||function(_0x310f24,_0x3317c6){const _0x3bb3ea=a106_0xcd6483;if(typeof Reflect===_0x3bb3ea(0x14f)&&typeof Reflect['metadata']==='function')return Reflect[_0x3bb3ea(0x13f)](_0x310f24,_0x3317c6);};Object[a106_0xcd6483(0x117)](exports,'__esModule',{'value':!![]}),exports[a106_0xcd6483(0xfe)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a106_0xcd6483(0x151)),constants_1=require(a106_0xcd6483(0xfd)),salesforce_retriever_service_1=require(a106_0xcd6483(0x146)),salesforce_sync_service_1=require(a106_0xcd6483(0x129)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a106_0xcd6483(0x113)),commit_components_job_1=require(a106_0xcd6483(0x125));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x5af046,_0x5083cf,_0x459e03){const _0x574ffe=a106_0xcd6483;this['salesforceSync']=_0x5af046,this[_0x574ffe(0x14a)]=_0x5083cf,this[_0x574ffe(0x13e)]=_0x459e03;}async['createBranchIfNotExists'](){const _0x18a36d=a106_0xcd6483;let _0x5106de=await this['repository'][_0x18a36d(0x11f)]['getOne'](this['syncData'][_0x18a36d(0x12c)])['catch'](()=>null);!_0x5106de&&(_0x5106de=await this[_0x18a36d(0x124)][_0x18a36d(0x11f)][_0x18a36d(0x14c)]({'name':this[_0x18a36d(0x13c)][_0x18a36d(0x12c)]})),this[_0x18a36d(0x131)]=_0x5106de;}async[a106_0xcd6483(0x119)](){const _0x447493=a106_0xcd6483;return this[_0x447493(0x13c)][_0x447493(0x121)]?this[_0x447493(0x138)][_0x447493(0x120)](this['syncData'][_0x447493(0x121)]):this['salesforceSync'][_0x447493(0x126)](this['syncData'][_0x447493(0x11a)]);}async[a106_0xcd6483(0x111)](){const _0x225e40=a106_0xcd6483,_0x5c270a=await this[_0x225e40(0x119)](),_0x4df000=new salesforce_retriever_service_1[(_0x225e40(0x112))](this[_0x225e40(0x14a)]),_0x5d3bc4=await _0x4df000[_0x225e40(0x144)](_0x5c270a);return _0x5d3bc4;}async[a106_0xcd6483(0x127)](_0x5efe09){const _0x30d340=a106_0xcd6483,_0x39fc22=new commit_components_dto_1[(_0x30d340(0x13a))]();return _0x39fc22[_0x30d340(0x14d)]='Sync\x20repository',_0x39fc22[_0x30d340(0x12d)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x30d340(0x108)]},_0x39fc22[_0x30d340(0x150)]={'writed':await this[_0x30d340(0x111)]()},_0x39fc22['convertToSFDX']=_0x5efe09,_0x39fc22['repo']=this[_0x30d340(0x124)],_0x39fc22[_0x30d340(0x131)]=this['branch'],_0x39fc22['force']=!![],_0x39fc22[_0x30d340(0x12b)]=this[_0x30d340(0x12b)],_0x39fc22;}async['checkSyncStatus'](){const _0x271abd=a106_0xcd6483,_0xb0bd14=await this[_0x271abd(0x138)][_0x271abd(0x109)](this[_0x271abd(0x13c)]),_0x10812a=await this[_0x271abd(0x14a)][_0x271abd(0x12a)](_0xb0bd14)[_0x271abd(0x118)](_0x3efc26=>typeof _0x3efc26===_0x271abd(0x104)?JSON[_0x271abd(0x106)](_0x3efc26):_0x3efc26)[_0x271abd(0x107)](()=>({}));if(_0x10812a[this[_0x271abd(0x124)][_0x271abd(0x11d)]]){if(_0x10812a[this[_0x271abd(0x124)][_0x271abd(0x11d)]][_0x271abd(0x149)]===this[_0x271abd(0x131)][_0x271abd(0x102)])return!![];}return![];}async['updateLastCommit'](){const _0x536c3e=a106_0xcd6483,_0xffce9e=await this[_0x536c3e(0x124)][_0x536c3e(0x11f)]['getOne'](this['branch'][_0x536c3e(0x134)]);await this['sfLogger']['log'](this[_0x536c3e(0x152)]+_0x536c3e(0x14e));const _0x467b54={[this['repository'][_0x536c3e(0x11d)]]:{'lastCommit':_0xffce9e[_0x536c3e(0x102)]}};await this[_0x536c3e(0x138)][_0x536c3e(0x115)](this[_0x536c3e(0x13c)],_0x467b54);}async[a106_0xcd6483(0x144)]({syncRecord:_0x41b766,repository:_0x195d8a,convertToSFDX:_0x937eb7,provider:_0x2389f8}){const _0x201979=a106_0xcd6483;this[_0x201979(0x13c)]=_0x41b766,this[_0x201979(0x12b)]=_0x2389f8,this['repository']=_0x195d8a,this[_0x201979(0x128)]=typedi_1[_0x201979(0x148)][_0x201979(0x123)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x201979(0x152)]=_0x201979(0x137)+this[_0x201979(0x13c)][_0x201979(0x10c)]+_0x201979(0x132)+this[_0x201979(0x13c)][_0x201979(0x12c)]+']';try{await this['sfLogger']['log'](this[_0x201979(0x152)]+_0x201979(0x12e))[_0x201979(0xfb)](),await this[_0x201979(0x138)][_0x201979(0x136)](this[_0x201979(0x13c)],_0x201979(0x14b)),this[_0x201979(0x128)][_0x201979(0x11e)](this['prefix']+_0x201979(0x145)),await this[_0x201979(0x10e)](),await this[_0x201979(0x128)]['log'](this['prefix']+_0x201979(0x139))['send']();const _0x1a365b=await this[_0x201979(0x10b)]();this[_0x201979(0x128)][_0x201979(0x11e)](this[_0x201979(0x152)]+_0x201979(0x13b)+_0x1a365b+'.');if(_0x1a365b){await this[_0x201979(0x138)][_0x201979(0x136)](this[_0x201979(0x13c)],_0x201979(0x10a)),await this[_0x201979(0x128)][_0x201979(0x11e)](this['prefix']+_0x201979(0x116))[_0x201979(0xfb)]();return;}const _0x134380=await this[_0x201979(0x127)](_0x937eb7);await this[_0x201979(0x13e)][_0x201979(0x144)](_0x134380,this[_0x201979(0x152)]),await this[_0x201979(0x138)]['setStatus'](this['syncData'],_0x201979(0x10a)),await this['updateLastCommit'](),this[_0x201979(0x128)][_0x201979(0x11e)](this[_0x201979(0x152)]+_0x201979(0x10d));}catch(_0x166278){throw _0x166278;}finally{await this[_0x201979(0x128)][_0x201979(0xfb)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0xcd6483(0x105)])({'transient':!![]}),__metadata(a106_0xcd6483(0x143),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a106_0xcd6483(0xff)],commit_components_job_1[a106_0xcd6483(0x100)]])],FlosumSyncJob),exports[a106_0xcd6483(0xfe)]=FlosumSyncJob;function a106_0x19ba(_0x1287f3,_0x100f6e){const _0x454a87=a106_0x5bad();return a106_0x19ba=function(_0x130cd3,_0x43303b){_0x130cd3=_0x130cd3-0xfb;let _0x5bad8d=_0x454a87[_0x130cd3];return _0x5bad8d;},a106_0x19ba(_0x1287f3,_0x100f6e);}function a106_0x5bad(){const _0x2d32ee=['updateRemoteState','\x20Branch\x20synchronized.\x20Skip','defineProperty','then','getComponentIds','branchId','search','5180434coGWcU','gitUrl','log','branches','getComponentsFromRepository','repositoryId','apply','get','repository','./commit-components.job','getBranchComponents','getCommitDto','sfLogger','../../salesforce/services/salesforce-sync.service','retrieveAttachment','provider','branchName','user','\x20Start\x20Flosum\x20sync\x20job','toString','1313312rvRduB','branch',']\x20[Branch:\x20','getOwnPropertyDescriptor','name','8nxAEUI','setStatus','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','salesforceSync','\x20Checking\x20sync\x20status.','CommitComponentsDto','\x20Sync\x20status\x20','syncData','__decorate','commitJob','metadata','constructor','278892rcqzaZ','186kYHDCz','design:paramtypes','run','\x20Checking\x20repository\x20on\x20Flosum\x20side.','../../salesforce/services/salesforce-retriever.service','__metadata','Container','lastCommit','salesforceService','In\x20Progress','create','message','\x20Update\x20remote\x20state.','object','components','typedi','prefix','send','9pEfceC','../../../../constants','FlosumSyncJob','SalesforceService','CommitComponentsJob','913000pzMHKw','sha','79735dKJXLO','string','Service','parse','catch','DEFAULT_GIT_USER_EMAIL','getRemoteStateAttachmentId','Completed','checkSyncStatus','repositoryName','\x20Flosum\x20sync\x20job\x20done.','createBranchIfNotExists','4532830VODVMN','222112EmWDzv','getComponents','SalesforceRetrieverService','../dto/commit-components.dto','length'];a106_0x5bad=function(){return _0x2d32ee;};return a106_0x5bad();}