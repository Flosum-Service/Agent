const a127_0x3985f7=a127_0x1aff;(function(_0x5c01c5,_0x20da9c){const _0x4116c8=a127_0x1aff,_0x8df019=_0x5c01c5();while(!![]){try{const _0x1efb3e=parseInt(_0x4116c8(0x201))/0x1+parseInt(_0x4116c8(0x219))/0x2+-parseInt(_0x4116c8(0x206))/0x3+parseInt(_0x4116c8(0x20e))/0x4+parseInt(_0x4116c8(0x213))/0x5+-parseInt(_0x4116c8(0x20a))/0x6*(-parseInt(_0x4116c8(0x1e3))/0x7)+-parseInt(_0x4116c8(0x1fe))/0x8*(parseInt(_0x4116c8(0x211))/0x9);if(_0x1efb3e===_0x20da9c)break;else _0x8df019['push'](_0x8df019['shift']());}catch(_0xc274e6){_0x8df019['push'](_0x8df019['shift']());}}}(a127_0x5ef2,0x6d6ce));const a127_0x53d43a=(function(){let _0x1ad1ac=!![];return function(_0x1f777a,_0x32ffc0){const _0x3c7cec=_0x1ad1ac?function(){const _0x2bdd84=a127_0x1aff;if(_0x32ffc0){const _0x3a5107=_0x32ffc0[_0x2bdd84(0x1da)](_0x1f777a,arguments);return _0x32ffc0=null,_0x3a5107;}}:function(){};return _0x1ad1ac=![],_0x3c7cec;};}()),a127_0x2b0beb=a127_0x53d43a(this,function(){const _0x1ad2fb=a127_0x1aff;return a127_0x2b0beb['toString']()[_0x1ad2fb(0x228)](_0x1ad2fb(0x1d7))[_0x1ad2fb(0x1f3)]()['constructor'](a127_0x2b0beb)[_0x1ad2fb(0x228)](_0x1ad2fb(0x1d7));});a127_0x2b0beb();'use strict';var __decorate=this&&this['__decorate']||function(_0x405075,_0x289327,_0x5d8e65,_0x4d7c09){const _0x354819=a127_0x1aff;var _0x191740=arguments[_0x354819(0x1d8)],_0x4bb084=_0x191740<0x3?_0x289327:_0x4d7c09===null?_0x4d7c09=Object[_0x354819(0x202)](_0x289327,_0x5d8e65):_0x4d7c09,_0x597a21;if(typeof Reflect===_0x354819(0x226)&&typeof Reflect[_0x354819(0x1fa)]===_0x354819(0x227))_0x4bb084=Reflect['decorate'](_0x405075,_0x289327,_0x5d8e65,_0x4d7c09);else{for(var _0x4eb7d3=_0x405075['length']-0x1;_0x4eb7d3>=0x0;_0x4eb7d3--)if(_0x597a21=_0x405075[_0x4eb7d3])_0x4bb084=(_0x191740<0x3?_0x597a21(_0x4bb084):_0x191740>0x3?_0x597a21(_0x289327,_0x5d8e65,_0x4bb084):_0x597a21(_0x289327,_0x5d8e65))||_0x4bb084;}return _0x191740>0x3&&_0x4bb084&&Object[_0x354819(0x220)](_0x289327,_0x5d8e65,_0x4bb084),_0x4bb084;},__metadata=this&&this[a127_0x3985f7(0x1ef)]||function(_0x1ae998,_0x5e02fc){const _0x39899c=a127_0x3985f7;if(typeof Reflect===_0x39899c(0x226)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x1ae998,_0x5e02fc);};Object['defineProperty'](exports,a127_0x3985f7(0x1ff),{'value':!![]}),exports[a127_0x3985f7(0x224)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a127_0x3985f7(0x1dd)),constants_1=require(a127_0x3985f7(0x20c)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a127_0x3985f7(0x223)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a127_0x3985f7(0x21d)),commit_components_job_1=require('./commit-components.job');function a127_0x1aff(_0x4afa93,_0xc52f89){const _0x2f0edb=a127_0x5ef2();return a127_0x1aff=function(_0x2b0beb,_0x53d43a){_0x2b0beb=_0x2b0beb-0x1d7;let _0x5ef288=_0x2f0edb[_0x2b0beb];return _0x5ef288;},a127_0x1aff(_0x4afa93,_0xc52f89);}function a127_0x5ef2(){const _0x321ada=['\x20Update\x20remote\x20state.','createBranchIfNotExists','lastCommit','decorate','gitUrl','\x20Sync\x20status\x20','getRemoteStateAttachmentId','1052008MOWcaC','__esModule','create','328259UofXru','getOwnPropertyDescriptor','updateRemoteState','salesforceSync','SalesforceRetrieverService','981882LaWeuG','sha','getCommitDto','send','24RIflvM','Service','../../../../constants','updateLastCommit','3020668RHidFt','Completed','SalesforceService','54bwcnlh','getOne','984005iJWwJx','convertToSFDX','run','DEFAULT_GIT_USER_NAME','get','Container','540374vpMsbS','message','catch','user','../dto/commit-components.dto','getComponentsFromRepository','CommitComponentsDto','defineProperty','userName','sfLogger','../../salesforce/services/salesforce-sync.service','FlosumSyncJob','getBranchComponents','object','function','search','repository','userEmail','log','(((.+)+)+)+$','length','branchId','apply','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','commitJob','typedi','parse','\x20Branch\x20synchronized.\x20Skip','string','recordTypeName','branches','24661vlstIa','branchName','\x20Checking\x20repository\x20on\x20Flosum\x20side.','repositoryName','syncData','design:paramtypes','components','DEFAULT_GIT_USER_EMAIL','salesforceService','branch','setStatus',']\x20[Branch:\x20','__metadata','provider','prefix','repositoryId','toString','retrieveAttachment','checkSyncStatus','\x20Flosum\x20sync\x20job\x20done.'];a127_0x5ef2=function(){return _0x321ada;};return a127_0x5ef2();}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x185219,_0x1bbfa5,_0x37815e){const _0x2ea620=a127_0x3985f7;this[_0x2ea620(0x204)]=_0x185219,this[_0x2ea620(0x1eb)]=_0x1bbfa5,this['commitJob']=_0x37815e;}async[a127_0x3985f7(0x1f8)](){const _0x2141a9=a127_0x3985f7;let _0x30e485=await this[_0x2141a9(0x229)]['branches'][_0x2141a9(0x212)](this['syncData']['branchName'])[_0x2141a9(0x21b)](()=>null);!_0x30e485&&(_0x30e485=await this[_0x2141a9(0x229)][_0x2141a9(0x1e2)][_0x2141a9(0x200)]({'name':this[_0x2141a9(0x1e7)][_0x2141a9(0x1e4)],'user':{'name':this[_0x2141a9(0x1e7)][_0x2141a9(0x221)],'email':this[_0x2141a9(0x1e7)][_0x2141a9(0x22a)]}})),this[_0x2141a9(0x1ec)]=_0x30e485;}async['getComponentIds'](){const _0x5c909e=a127_0x3985f7;return this['syncData'][_0x5c909e(0x1f2)]?this['salesforceSync'][_0x5c909e(0x21e)](this[_0x5c909e(0x1e7)]['repositoryId']):this[_0x5c909e(0x204)][_0x5c909e(0x225)](this[_0x5c909e(0x1e7)][_0x5c909e(0x1d9)]);}async['getComponents'](){const _0x1a7bb6=a127_0x3985f7,_0x7f86ae=await this['getComponentIds'](),_0x493a8b=new salesforce_retriever_service_1[(_0x1a7bb6(0x205))](this[_0x1a7bb6(0x1eb)]),_0x12ca9c=await _0x493a8b['run'](_0x7f86ae);return _0x12ca9c;}async[a127_0x3985f7(0x208)](_0x459102){const _0x387eb9=a127_0x3985f7,_0x12c3c9=new commit_components_dto_1[(_0x387eb9(0x21f))]();return _0x12c3c9[_0x387eb9(0x21a)]='Sync\x20repository',_0x12c3c9[_0x387eb9(0x21c)]={'name':constants_1[_0x387eb9(0x216)],'email':constants_1[_0x387eb9(0x1ea)]},_0x12c3c9[_0x387eb9(0x1e9)]={'writed':await this['getComponents']()},_0x12c3c9[_0x387eb9(0x214)]=_0x459102,_0x12c3c9['repo']=this[_0x387eb9(0x229)],_0x12c3c9[_0x387eb9(0x1ec)]=this[_0x387eb9(0x1ec)],_0x12c3c9['force']=!![],_0x12c3c9['provider']=this[_0x387eb9(0x1f0)],_0x12c3c9['recordType']=this['syncData'][_0x387eb9(0x1e1)],_0x12c3c9;}async[a127_0x3985f7(0x1f5)](){const _0x16d532=a127_0x3985f7,_0x32655e=await this[_0x16d532(0x204)][_0x16d532(0x1fd)](this[_0x16d532(0x1e7)]),_0x52a0be=await this[_0x16d532(0x1eb)][_0x16d532(0x1f4)](_0x32655e)['then'](_0x46594c=>typeof _0x46594c===_0x16d532(0x1e0)?JSON[_0x16d532(0x1de)](_0x46594c):_0x46594c)[_0x16d532(0x21b)](()=>({}));if(_0x52a0be[this[_0x16d532(0x229)][_0x16d532(0x1fb)]]){if(_0x52a0be[this['repository'][_0x16d532(0x1fb)]][_0x16d532(0x1f9)]===this[_0x16d532(0x1ec)]['sha'])return!![];}return![];}async[a127_0x3985f7(0x20d)](){const _0x5c067a=a127_0x3985f7,_0x14583e=await this['repository'][_0x5c067a(0x1e2)][_0x5c067a(0x212)](this[_0x5c067a(0x1ec)]['name']);await this[_0x5c067a(0x222)][_0x5c067a(0x22b)](this[_0x5c067a(0x1f1)]+_0x5c067a(0x1f7));const _0x42d417={[this[_0x5c067a(0x229)]['gitUrl']]:{'lastCommit':_0x14583e[_0x5c067a(0x207)]}};await this[_0x5c067a(0x204)][_0x5c067a(0x203)](this['syncData'],_0x42d417);}async[a127_0x3985f7(0x215)]({syncRecord:_0x2f413d,repository:_0x2a719c,convertToSFDX:_0x1de970,provider:_0x24528c}){const _0x6e7df7=a127_0x3985f7;this['syncData']=_0x2f413d,this[_0x6e7df7(0x1f0)]=_0x24528c,this[_0x6e7df7(0x229)]=_0x2a719c,this[_0x6e7df7(0x222)]=typedi_1[_0x6e7df7(0x218)][_0x6e7df7(0x217)](salesforce_logger_v3_service_1['SalesforceLogger3']),this['prefix']=_0x6e7df7(0x1db)+this[_0x6e7df7(0x1e7)][_0x6e7df7(0x1e6)]+_0x6e7df7(0x1ee)+this[_0x6e7df7(0x1e7)][_0x6e7df7(0x1e4)]+']';try{await this[_0x6e7df7(0x222)][_0x6e7df7(0x22b)](this[_0x6e7df7(0x1f1)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x6e7df7(0x209)](),await this[_0x6e7df7(0x204)][_0x6e7df7(0x1ed)](this[_0x6e7df7(0x1e7)],'In\x20Progress'),this[_0x6e7df7(0x222)][_0x6e7df7(0x22b)](this[_0x6e7df7(0x1f1)]+_0x6e7df7(0x1e5)),await this[_0x6e7df7(0x1f8)](),await this[_0x6e7df7(0x222)]['log'](this[_0x6e7df7(0x1f1)]+'\x20Checking\x20sync\x20status.')['send']();const _0x2cc5cf=await this[_0x6e7df7(0x1f5)]();this[_0x6e7df7(0x222)][_0x6e7df7(0x22b)](this[_0x6e7df7(0x1f1)]+_0x6e7df7(0x1fc)+_0x2cc5cf+'.');if(_0x2cc5cf){await this[_0x6e7df7(0x204)][_0x6e7df7(0x1ed)](this['syncData'],'Completed'),await this[_0x6e7df7(0x222)][_0x6e7df7(0x22b)](this[_0x6e7df7(0x1f1)]+_0x6e7df7(0x1df))[_0x6e7df7(0x209)]();return;}const _0xb4f0dd=await this['getCommitDto'](_0x1de970);await this[_0x6e7df7(0x1dc)][_0x6e7df7(0x215)](_0xb4f0dd,this[_0x6e7df7(0x1f1)]),await this['salesforceSync'][_0x6e7df7(0x1ed)](this['syncData'],_0x6e7df7(0x20f)),await this[_0x6e7df7(0x20d)](),this['sfLogger'][_0x6e7df7(0x22b)](this[_0x6e7df7(0x1f1)]+_0x6e7df7(0x1f6));}catch(_0x441297){throw _0x441297;}finally{await this[_0x6e7df7(0x222)][_0x6e7df7(0x209)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a127_0x3985f7(0x20b)])({'transient':!![]}),__metadata(a127_0x3985f7(0x1e8),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a127_0x3985f7(0x210)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;