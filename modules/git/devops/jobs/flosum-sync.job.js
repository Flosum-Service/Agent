const a123_0x30464=a123_0x5551;(function(_0x544f47,_0x11f37e){const _0x5dfafd=a123_0x5551,_0x3f5a20=_0x544f47();while(!![]){try{const _0x2a1cee=-parseInt(_0x5dfafd(0x12b))/0x1+parseInt(_0x5dfafd(0xef))/0x2*(-parseInt(_0x5dfafd(0x105))/0x3)+parseInt(_0x5dfafd(0x101))/0x4*(-parseInt(_0x5dfafd(0x110))/0x5)+parseInt(_0x5dfafd(0x119))/0x6*(parseInt(_0x5dfafd(0xed))/0x7)+parseInt(_0x5dfafd(0x11f))/0x8+parseInt(_0x5dfafd(0xfa))/0x9*(-parseInt(_0x5dfafd(0xe5))/0xa)+parseInt(_0x5dfafd(0x116))/0xb;if(_0x2a1cee===_0x11f37e)break;else _0x3f5a20['push'](_0x3f5a20['shift']());}catch(_0x341729){_0x3f5a20['push'](_0x3f5a20['shift']());}}}(a123_0x2c35,0xeaddf));const a123_0x7542db=(function(){let _0x5bbeec=!![];return function(_0x1dbbd1,_0x4c124c){const _0x5d4441=_0x5bbeec?function(){if(_0x4c124c){const _0x288b50=_0x4c124c['apply'](_0x1dbbd1,arguments);return _0x4c124c=null,_0x288b50;}}:function(){};return _0x5bbeec=![],_0x5d4441;};}()),a123_0x3749c6=a123_0x7542db(this,function(){const _0x48f2e8=a123_0x5551;return a123_0x3749c6['toString']()[_0x48f2e8(0xf6)](_0x48f2e8(0xe2))[_0x48f2e8(0xe8)]()['constructor'](a123_0x3749c6)[_0x48f2e8(0xf6)](_0x48f2e8(0xe2));});function a123_0x2c35(){const _0x5ae4bd=[']\x20[Branch:\x20','prefix','SalesforceService','getRemoteStateAttachmentId','catch','SalesforceLogger3','convertToSFDX','repo','branch','78094wpmCRX','\x20Sync\x20status\x20','getOne','get','\x20Update\x20remote\x20state.','object','getOwnPropertyDescriptor','\x20Checking\x20repository\x20on\x20Flosum\x20side.','defineProperty','provider','SalesforceSyncService','updateRemoteState','length','(((.+)+)+)+$','branches','syncData','6270070OIZafo','metadata','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','toString','../../salesforce/services/salesforce-retriever.service','\x20Flosum\x20sync\x20job\x20done.','commitJob','force','10146479IGAEuR','sha','2YzdAtl','repository','salesforceSync','DEFAULT_GIT_USER_EMAIL','Completed','run','./commit-components.job','search','repositoryId','then','FlosumSyncJob','9gPnmsR','typedi','CommitComponentsDto','DEFAULT_GIT_USER_NAME','design:paramtypes','../dto/commit-components.dto','send','4YBmvFX','recordType','salesforceService','recordTypeName','4085247cRPOyl','log','updateLastCommit','__decorate','checkSyncStatus','gitUrl','getComponents','function','\x20Start\x20Flosum\x20sync\x20job','user','sfLogger','5488545ZSxjjU','__esModule','setStatus','lastCommit','name','CommitComponentsJob','25011822PEhsiL','branchName','getComponentIds','6QBqZtR','decorate','createBranchIfNotExists','getCommitDto','Sync\x20repository','SalesforceRetrieverService','3226200lwdhqs','../../salesforce/services/salesforce-logger-v3.service','../../../../constants'];a123_0x2c35=function(){return _0x5ae4bd;};return a123_0x2c35();}function a123_0x5551(_0x5b5cb3,_0x1a05e5){const _0x58a612=a123_0x2c35();return a123_0x5551=function(_0x3749c6,_0x7542db){_0x3749c6=_0x3749c6-0xd8;let _0x2c35b2=_0x58a612[_0x3749c6];return _0x2c35b2;},a123_0x5551(_0x5b5cb3,_0x1a05e5);}a123_0x3749c6();'use strict';var __decorate=this&&this[a123_0x30464(0x108)]||function(_0x147a68,_0x207f71,_0x171a03,_0x5c5e2c){const _0x1ab879=a123_0x30464;var _0x30daba=arguments[_0x1ab879(0xe1)],_0x4b6712=_0x30daba<0x3?_0x207f71:_0x5c5e2c===null?_0x5c5e2c=Object[_0x1ab879(0xdb)](_0x207f71,_0x171a03):_0x5c5e2c,_0x374ac4;if(typeof Reflect===_0x1ab879(0xda)&&typeof Reflect[_0x1ab879(0x11a)]===_0x1ab879(0x10c))_0x4b6712=Reflect['decorate'](_0x147a68,_0x207f71,_0x171a03,_0x5c5e2c);else{for(var _0x49d9fc=_0x147a68[_0x1ab879(0xe1)]-0x1;_0x49d9fc>=0x0;_0x49d9fc--)if(_0x374ac4=_0x147a68[_0x49d9fc])_0x4b6712=(_0x30daba<0x3?_0x374ac4(_0x4b6712):_0x30daba>0x3?_0x374ac4(_0x207f71,_0x171a03,_0x4b6712):_0x374ac4(_0x207f71,_0x171a03))||_0x4b6712;}return _0x30daba>0x3&&_0x4b6712&&Object[_0x1ab879(0xdd)](_0x207f71,_0x171a03,_0x4b6712),_0x4b6712;},__metadata=this&&this['__metadata']||function(_0x1794b2,_0x22826a){const _0x487f63=a123_0x30464;if(typeof Reflect===_0x487f63(0xda)&&typeof Reflect[_0x487f63(0xe6)]==='function')return Reflect[_0x487f63(0xe6)](_0x1794b2,_0x22826a);};Object['defineProperty'](exports,a123_0x30464(0x111),{'value':!![]}),exports[a123_0x30464(0xf9)]=void 0x0;const salesforce_logger_v3_service_1=require(a123_0x30464(0x120)),typedi_1=require(a123_0x30464(0xfb)),constants_1=require(a123_0x30464(0x121)),salesforce_retriever_service_1=require(a123_0x30464(0xe9)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a123_0x30464(0xff)),commit_components_job_1=require(a123_0x30464(0xf5));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1f768e,_0xbb34b9,_0x5aa74f){const _0x21b251=a123_0x30464;this['salesforceSync']=_0x1f768e,this[_0x21b251(0x103)]=_0xbb34b9,this[_0x21b251(0xeb)]=_0x5aa74f;}async['createBranchIfNotExists'](){const _0x536c72=a123_0x30464;let _0x3972f1=await this[_0x536c72(0xf0)][_0x536c72(0xe3)][_0x536c72(0x12d)](this[_0x536c72(0xe4)][_0x536c72(0x117)])[_0x536c72(0x126)](()=>null);!_0x3972f1&&(_0x3972f1=await this[_0x536c72(0xf0)]['branches']['create']({'name':this[_0x536c72(0xe4)][_0x536c72(0x117)]})),this[_0x536c72(0x12a)]=_0x3972f1;}async['getComponentIds'](){const _0x3733d6=a123_0x30464;return this['syncData'][_0x3733d6(0xf7)]?this[_0x3733d6(0xf1)]['getComponentsFromRepository'](this[_0x3733d6(0xe4)][_0x3733d6(0xf7)]):this[_0x3733d6(0xf1)]['getBranchComponents'](this[_0x3733d6(0xe4)]['branchId']);}async[a123_0x30464(0x10b)](){const _0x5b7dde=a123_0x30464,_0x4a7ce7=await this[_0x5b7dde(0x118)](),_0xfb507a=new salesforce_retriever_service_1[(_0x5b7dde(0x11e))](this[_0x5b7dde(0x103)]),_0x567af8=await _0xfb507a['run'](_0x4a7ce7);return _0x567af8;}async[a123_0x30464(0x11c)](_0x1b86d4){const _0x39ec1b=a123_0x30464,_0x330d95=new commit_components_dto_1[(_0x39ec1b(0xfc))]();return _0x330d95['message']=_0x39ec1b(0x11d),_0x330d95[_0x39ec1b(0x10e)]={'name':constants_1[_0x39ec1b(0xfd)],'email':constants_1[_0x39ec1b(0xf2)]},_0x330d95['components']={'writed':await this[_0x39ec1b(0x10b)]()},_0x330d95[_0x39ec1b(0x128)]=_0x1b86d4,_0x330d95[_0x39ec1b(0x129)]=this[_0x39ec1b(0xf0)],_0x330d95['branch']=this[_0x39ec1b(0x12a)],_0x330d95[_0x39ec1b(0xec)]=!![],_0x330d95[_0x39ec1b(0xde)]=this['provider'],_0x330d95[_0x39ec1b(0x102)]=this[_0x39ec1b(0xe4)][_0x39ec1b(0x104)],_0x330d95;}async[a123_0x30464(0x109)](){const _0x14611e=a123_0x30464,_0x3b98a1=await this['salesforceSync'][_0x14611e(0x125)](this[_0x14611e(0xe4)]),_0x581782=await this['salesforceService']['retrieveAttachment'](_0x3b98a1)[_0x14611e(0xf8)](_0x4435f6=>typeof _0x4435f6==='string'?JSON['parse'](_0x4435f6):_0x4435f6)[_0x14611e(0x126)](()=>({}));if(_0x581782[this[_0x14611e(0xf0)][_0x14611e(0x10a)]]){if(_0x581782[this[_0x14611e(0xf0)][_0x14611e(0x10a)]][_0x14611e(0x113)]===this[_0x14611e(0x12a)][_0x14611e(0xee)])return!![];}return![];}async['updateLastCommit'](){const _0x4abdc1=a123_0x30464,_0x511020=await this[_0x4abdc1(0xf0)][_0x4abdc1(0xe3)][_0x4abdc1(0x12d)](this[_0x4abdc1(0x12a)][_0x4abdc1(0x114)]);await this['sfLogger'][_0x4abdc1(0x106)](this[_0x4abdc1(0x123)]+_0x4abdc1(0xd9));const _0x13630e={[this[_0x4abdc1(0xf0)][_0x4abdc1(0x10a)]]:{'lastCommit':_0x511020[_0x4abdc1(0xee)]}};await this[_0x4abdc1(0xf1)][_0x4abdc1(0xe0)](this['syncData'],_0x13630e);}async['run']({syncRecord:_0x28a324,repository:_0x252ede,convertToSFDX:_0x4eada2,provider:_0x244495}){const _0x583156=a123_0x30464;this['syncData']=_0x28a324,this[_0x583156(0xde)]=_0x244495,this[_0x583156(0xf0)]=_0x252ede,this[_0x583156(0x10f)]=typedi_1['Container'][_0x583156(0xd8)](salesforce_logger_v3_service_1[_0x583156(0x127)]),this['prefix']=_0x583156(0xe7)+this[_0x583156(0xe4)]['repositoryName']+_0x583156(0x122)+this[_0x583156(0xe4)][_0x583156(0x117)]+']';try{await this[_0x583156(0x10f)]['log'](this[_0x583156(0x123)]+_0x583156(0x10d))[_0x583156(0x100)](),await this[_0x583156(0xf1)][_0x583156(0x112)](this[_0x583156(0xe4)],'In\x20Progress'),this[_0x583156(0x10f)][_0x583156(0x106)](this[_0x583156(0x123)]+_0x583156(0xdc)),await this[_0x583156(0x11b)](),await this[_0x583156(0x10f)]['log'](this['prefix']+'\x20Checking\x20sync\x20status.')[_0x583156(0x100)]();const _0x20b81b=await this[_0x583156(0x109)]();this[_0x583156(0x10f)][_0x583156(0x106)](this[_0x583156(0x123)]+_0x583156(0x12c)+_0x20b81b+'.');if(_0x20b81b){await this['salesforceSync'][_0x583156(0x112)](this['syncData'],_0x583156(0xf3)),await this[_0x583156(0x10f)][_0x583156(0x106)](this[_0x583156(0x123)]+'\x20Branch\x20synchronized.\x20Skip')[_0x583156(0x100)]();return;}const _0xd81293=await this[_0x583156(0x11c)](_0x4eada2);await this[_0x583156(0xeb)][_0x583156(0xf4)](_0xd81293,this['prefix']),await this['salesforceSync'][_0x583156(0x112)](this[_0x583156(0xe4)],_0x583156(0xf3)),await this[_0x583156(0x107)](),this[_0x583156(0x10f)][_0x583156(0x106)](this[_0x583156(0x123)]+_0x583156(0xea));}catch(_0x3ed3af){throw _0x3ed3af;}finally{await this[_0x583156(0x10f)][_0x583156(0x100)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a123_0x30464(0xfe),[salesforce_sync_service_1[a123_0x30464(0xdf)],salesforce_service_1[a123_0x30464(0x124)],commit_components_job_1[a123_0x30464(0x115)]])],FlosumSyncJob),exports[a123_0x30464(0xf9)]=FlosumSyncJob;