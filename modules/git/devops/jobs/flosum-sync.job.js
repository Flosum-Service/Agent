const a106_0x4d52d8=a106_0x4fac;(function(_0x338318,_0x3fdb02){const _0xada4d4=a106_0x4fac,_0x472f07=_0x338318();while(!![]){try{const _0x535e7a=-parseInt(_0xada4d4(0x1b6))/0x1+parseInt(_0xada4d4(0x1b3))/0x2+-parseInt(_0xada4d4(0x19d))/0x3+-parseInt(_0xada4d4(0x18e))/0x4*(-parseInt(_0xada4d4(0x17a))/0x5)+-parseInt(_0xada4d4(0x1ba))/0x6+-parseInt(_0xada4d4(0x175))/0x7+-parseInt(_0xada4d4(0x177))/0x8*(-parseInt(_0xada4d4(0x16b))/0x9);if(_0x535e7a===_0x3fdb02)break;else _0x472f07['push'](_0x472f07['shift']());}catch(_0x32bde1){_0x472f07['push'](_0x472f07['shift']());}}}(a106_0x1e54,0x55e4b));const a106_0x5e8096=(function(){let _0x1a3d98=!![];return function(_0x6f1c91,_0xd02cd4){const _0x24c73c=_0x1a3d98?function(){if(_0xd02cd4){const _0x181ee1=_0xd02cd4['apply'](_0x6f1c91,arguments);return _0xd02cd4=null,_0x181ee1;}}:function(){};return _0x1a3d98=![],_0x24c73c;};}()),a106_0x1d1908=a106_0x5e8096(this,function(){const _0x170a95=a106_0x4fac;return a106_0x1d1908['toString']()[_0x170a95(0x1b0)]('(((.+)+)+)+$')[_0x170a95(0x168)]()[_0x170a95(0x198)](a106_0x1d1908)[_0x170a95(0x1b0)](_0x170a95(0x19a));});a106_0x1d1908();'use strict';var __decorate=this&&this[a106_0x4d52d8(0x1bd)]||function(_0x3bcffd,_0x4bfc9a,_0x3d60e3,_0x4cfb2b){const _0x1a6a26=a106_0x4d52d8;var _0x44db88=arguments['length'],_0xd9f647=_0x44db88<0x3?_0x4bfc9a:_0x4cfb2b===null?_0x4cfb2b=Object[_0x1a6a26(0x180)](_0x4bfc9a,_0x3d60e3):_0x4cfb2b,_0x47394f;if(typeof Reflect==='object'&&typeof Reflect[_0x1a6a26(0x179)]==='function')_0xd9f647=Reflect[_0x1a6a26(0x179)](_0x3bcffd,_0x4bfc9a,_0x3d60e3,_0x4cfb2b);else{for(var _0x2d8b97=_0x3bcffd[_0x1a6a26(0x1ad)]-0x1;_0x2d8b97>=0x0;_0x2d8b97--)if(_0x47394f=_0x3bcffd[_0x2d8b97])_0xd9f647=(_0x44db88<0x3?_0x47394f(_0xd9f647):_0x44db88>0x3?_0x47394f(_0x4bfc9a,_0x3d60e3,_0xd9f647):_0x47394f(_0x4bfc9a,_0x3d60e3))||_0xd9f647;}return _0x44db88>0x3&&_0xd9f647&&Object[_0x1a6a26(0x191)](_0x4bfc9a,_0x3d60e3,_0xd9f647),_0xd9f647;},__metadata=this&&this[a106_0x4d52d8(0x1a5)]||function(_0x2212bd,_0x5346db){const _0x290083=a106_0x4d52d8;if(typeof Reflect===_0x290083(0x184)&&typeof Reflect[_0x290083(0x1a8)]===_0x290083(0x1b2))return Reflect[_0x290083(0x1a8)](_0x2212bd,_0x5346db);};function a106_0x1e54(){const _0x41df53=['catch','72966WyJPHe','\x20Sync\x20status\x20','FlosumSyncJob','updateLastCommit','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','getBranchComponents','components','commitJob','__metadata','log','updateRemoteState','metadata','getRemoteStateAttachmentId','parse','branches','branchName','length','salesforceService','../../salesforce/services/salesforce.service','search','run','function','130466bIATCY','sfLogger','\x20Start\x20Flosum\x20sync\x20job','122639dbkuEV','Sync\x20repository','../../../../constants','CommitComponentsDto','2905032oxRQdb','design:paramtypes','send','__decorate','toString','../../salesforce/services/salesforce-sync.service','branchId','153GNQkUn','string','Service','name','branch','checkSyncStatus','typedi','getComponentIds','getOne','Completed','1146292zCAhEc','repo','366072zWFDVn','prefix','decorate','20OqFkQV','In\x20Progress','then','get','getCommitDto','SalesforceService','getOwnPropertyDescriptor','lastCommit','repositoryName','getComponentsFromRepository','object','setStatus','gitUrl','repository','syncData','force','\x20Checking\x20repository\x20on\x20Flosum\x20side.','__esModule','salesforceSync','sha','303572rOHdVv','createBranchIfNotExists','SalesforceLogger3','defineProperty','retrieveAttachment','provider','\x20Checking\x20sync\x20status.','message','../../salesforce/services/salesforce-retriever.service','../dto/commit-components.dto','constructor','SalesforceSyncService','(((.+)+)+)+$','create'];a106_0x1e54=function(){return _0x41df53;};return a106_0x1e54();}Object[a106_0x4d52d8(0x191)](exports,a106_0x4d52d8(0x18b),{'value':!![]}),exports[a106_0x4d52d8(0x19f)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a106_0x4d52d8(0x171)),constants_1=require(a106_0x4d52d8(0x1b8)),salesforce_retriever_service_1=require(a106_0x4d52d8(0x196)),salesforce_sync_service_1=require(a106_0x4d52d8(0x169)),salesforce_service_1=require(a106_0x4d52d8(0x1af)),commit_components_dto_1=require(a106_0x4d52d8(0x197)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x4c05f3,_0x2e97fc,_0x471548){const _0x298658=a106_0x4d52d8;this['salesforceSync']=_0x4c05f3,this[_0x298658(0x1ae)]=_0x2e97fc,this[_0x298658(0x1a4)]=_0x471548;}async[a106_0x4d52d8(0x18f)](){const _0xd0b7cf=a106_0x4d52d8;let _0x689d01=await this[_0xd0b7cf(0x187)][_0xd0b7cf(0x1ab)][_0xd0b7cf(0x173)](this[_0xd0b7cf(0x188)][_0xd0b7cf(0x1ac)])['catch'](()=>null);!_0x689d01&&(_0x689d01=await this['repository'][_0xd0b7cf(0x1ab)][_0xd0b7cf(0x19b)]({'name':this['syncData'][_0xd0b7cf(0x1ac)]})),this[_0xd0b7cf(0x16f)]=_0x689d01;}async[a106_0x4d52d8(0x172)](){const _0x2d660a=a106_0x4d52d8;return this['syncData']['repositoryId']?this[_0x2d660a(0x18c)][_0x2d660a(0x183)](this['syncData']['repositoryId']):this[_0x2d660a(0x18c)][_0x2d660a(0x1a2)](this['syncData'][_0x2d660a(0x16a)]);}async['getComponents'](){const _0x401fe6=a106_0x4d52d8,_0x14d918=await this['getComponentIds'](),_0x11db94=new salesforce_retriever_service_1['SalesforceRetrieverService'](this['salesforceService']),_0x6b6cc=await _0x11db94[_0x401fe6(0x1b1)](_0x14d918);return _0x6b6cc;}async['getCommitDto'](_0x3761cc){const _0x313dea=a106_0x4d52d8,_0x56cab8=new commit_components_dto_1[(_0x313dea(0x1b9))]();return _0x56cab8[_0x313dea(0x195)]=_0x313dea(0x1b7),_0x56cab8['user']={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x56cab8[_0x313dea(0x1a3)]={'writed':await this['getComponents']()},_0x56cab8['convertToSFDX']=_0x3761cc,_0x56cab8[_0x313dea(0x176)]=this['repository'],_0x56cab8[_0x313dea(0x16f)]=this['branch'],_0x56cab8[_0x313dea(0x189)]=!![],_0x56cab8['provider']=this[_0x313dea(0x193)],_0x56cab8;}async[a106_0x4d52d8(0x170)](){const _0x322ea3=a106_0x4d52d8,_0x4a1ff5=await this['salesforceSync'][_0x322ea3(0x1a9)](this[_0x322ea3(0x188)]),_0x20e728=await this[_0x322ea3(0x1ae)][_0x322ea3(0x192)](_0x4a1ff5)[_0x322ea3(0x17c)](_0x1d053=>typeof _0x1d053===_0x322ea3(0x16c)?JSON[_0x322ea3(0x1aa)](_0x1d053):_0x1d053)[_0x322ea3(0x19c)](()=>({}));if(_0x20e728[this[_0x322ea3(0x187)][_0x322ea3(0x186)]]){if(_0x20e728[this[_0x322ea3(0x187)][_0x322ea3(0x186)]][_0x322ea3(0x181)]===this[_0x322ea3(0x16f)][_0x322ea3(0x18d)])return!![];}return![];}async[a106_0x4d52d8(0x1a0)](){const _0x102704=a106_0x4d52d8,_0x3f1a9a=await this[_0x102704(0x187)]['branches'][_0x102704(0x173)](this[_0x102704(0x16f)][_0x102704(0x16e)]);await this[_0x102704(0x1b4)][_0x102704(0x1a6)](this[_0x102704(0x178)]+'\x20Update\x20remote\x20state.');const _0x5961a9={[this[_0x102704(0x187)][_0x102704(0x186)]]:{'lastCommit':_0x3f1a9a['sha']}};await this['salesforceSync'][_0x102704(0x1a7)](this[_0x102704(0x188)],_0x5961a9);}async[a106_0x4d52d8(0x1b1)]({syncRecord:_0x18bcd5,repository:_0xc514a4,convertToSFDX:_0x4bf645,provider:_0x206616}){const _0x525dbd=a106_0x4d52d8;this[_0x525dbd(0x188)]=_0x18bcd5,this['provider']=_0x206616,this[_0x525dbd(0x187)]=_0xc514a4,this[_0x525dbd(0x1b4)]=typedi_1['Container'][_0x525dbd(0x17d)](salesforce_logger_v3_service_1[_0x525dbd(0x190)]),this[_0x525dbd(0x178)]=_0x525dbd(0x1a1)+this[_0x525dbd(0x188)][_0x525dbd(0x182)]+']\x20[Branch:\x20'+this[_0x525dbd(0x188)][_0x525dbd(0x1ac)]+']';try{await this['sfLogger'][_0x525dbd(0x1a6)](this[_0x525dbd(0x178)]+_0x525dbd(0x1b5))[_0x525dbd(0x1bc)](),await this[_0x525dbd(0x18c)][_0x525dbd(0x185)](this['syncData'],_0x525dbd(0x17b)),this[_0x525dbd(0x1b4)][_0x525dbd(0x1a6)](this[_0x525dbd(0x178)]+_0x525dbd(0x18a)),await this[_0x525dbd(0x18f)](),await this['sfLogger'][_0x525dbd(0x1a6)](this[_0x525dbd(0x178)]+_0x525dbd(0x194))[_0x525dbd(0x1bc)]();const _0x2fa916=await this['checkSyncStatus']();this[_0x525dbd(0x1b4)][_0x525dbd(0x1a6)](this[_0x525dbd(0x178)]+_0x525dbd(0x19e)+_0x2fa916+'.');if(_0x2fa916){await this[_0x525dbd(0x18c)]['setStatus'](this[_0x525dbd(0x188)],'Completed'),await this['sfLogger']['log'](this[_0x525dbd(0x178)]+'\x20Branch\x20synchronized.\x20Skip')['send']();return;}const _0xe84e34=await this[_0x525dbd(0x17e)](_0x4bf645);await this[_0x525dbd(0x1a4)][_0x525dbd(0x1b1)](_0xe84e34,this['prefix']),await this['salesforceSync'][_0x525dbd(0x185)](this[_0x525dbd(0x188)],_0x525dbd(0x174)),await this[_0x525dbd(0x1a0)](),this[_0x525dbd(0x1b4)][_0x525dbd(0x1a6)](this[_0x525dbd(0x178)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x18e36a){throw _0x18e36a;}finally{await this[_0x525dbd(0x1b4)][_0x525dbd(0x1bc)]();}}};function a106_0x4fac(_0x2971da,_0x3a4c94){const _0x383f65=a106_0x1e54();return a106_0x4fac=function(_0x1d1908,_0x5e8096){_0x1d1908=_0x1d1908-0x168;let _0x1e54b5=_0x383f65[_0x1d1908];return _0x1e54b5;},a106_0x4fac(_0x2971da,_0x3a4c94);}FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x4d52d8(0x16d)])({'transient':!![]}),__metadata(a106_0x4d52d8(0x1bb),[salesforce_sync_service_1[a106_0x4d52d8(0x199)],salesforce_service_1[a106_0x4d52d8(0x17f)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;