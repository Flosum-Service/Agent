const a123_0x4860ac=a123_0x42d8;function a123_0x42d8(_0x4d1001,_0x216328){const _0x84eccf=a123_0x16be();return a123_0x42d8=function(_0x5c874f,_0x4e389e){_0x5c874f=_0x5c874f-0x18b;let _0x16be30=_0x84eccf[_0x5c874f];return _0x16be30;},a123_0x42d8(_0x4d1001,_0x216328);}(function(_0x4a0b78,_0x9e5ab4){const _0x11ee77=a123_0x42d8,_0x501d99=_0x4a0b78();while(!![]){try{const _0x41c112=parseInt(_0x11ee77(0x1dd))/0x1*(parseInt(_0x11ee77(0x1a2))/0x2)+parseInt(_0x11ee77(0x1c8))/0x3+-parseInt(_0x11ee77(0x1c6))/0x4+-parseInt(_0x11ee77(0x1bb))/0x5*(parseInt(_0x11ee77(0x1d7))/0x6)+-parseInt(_0x11ee77(0x1ad))/0x7*(parseInt(_0x11ee77(0x1c9))/0x8)+parseInt(_0x11ee77(0x1e0))/0x9*(parseInt(_0x11ee77(0x1aa))/0xa)+-parseInt(_0x11ee77(0x1d0))/0xb;if(_0x41c112===_0x9e5ab4)break;else _0x501d99['push'](_0x501d99['shift']());}catch(_0x597740){_0x501d99['push'](_0x501d99['shift']());}}}(a123_0x16be,0xed887));const a123_0x4e389e=(function(){let _0x2d36cd=!![];return function(_0x3a4ff3,_0x312ac8){const _0xbec0ad=_0x2d36cd?function(){const _0x3a1ae0=a123_0x42d8;if(_0x312ac8){const _0x4db1a5=_0x312ac8[_0x3a1ae0(0x18e)](_0x3a4ff3,arguments);return _0x312ac8=null,_0x4db1a5;}}:function(){};return _0x2d36cd=![],_0xbec0ad;};}()),a123_0x5c874f=a123_0x4e389e(this,function(){const _0x560397=a123_0x42d8;return a123_0x5c874f[_0x560397(0x1b0)]()[_0x560397(0x1d6)]('(((.+)+)+)+$')[_0x560397(0x1b0)]()[_0x560397(0x199)](a123_0x5c874f)[_0x560397(0x1d6)](_0x560397(0x1db));});a123_0x5c874f();'use strict';var __decorate=this&&this['__decorate']||function(_0x5493d2,_0x3f8099,_0x52b217,_0x1ff282){const _0x363661=a123_0x42d8;var _0x5902ce=arguments[_0x363661(0x198)],_0xfd1297=_0x5902ce<0x3?_0x3f8099:_0x1ff282===null?_0x1ff282=Object[_0x363661(0x1d3)](_0x3f8099,_0x52b217):_0x1ff282,_0x90a77e;if(typeof Reflect===_0x363661(0x1c1)&&typeof Reflect['decorate']===_0x363661(0x19d))_0xfd1297=Reflect[_0x363661(0x18f)](_0x5493d2,_0x3f8099,_0x52b217,_0x1ff282);else{for(var _0x5d418a=_0x5493d2[_0x363661(0x198)]-0x1;_0x5d418a>=0x0;_0x5d418a--)if(_0x90a77e=_0x5493d2[_0x5d418a])_0xfd1297=(_0x5902ce<0x3?_0x90a77e(_0xfd1297):_0x5902ce>0x3?_0x90a77e(_0x3f8099,_0x52b217,_0xfd1297):_0x90a77e(_0x3f8099,_0x52b217))||_0xfd1297;}return _0x5902ce>0x3&&_0xfd1297&&Object[_0x363661(0x1b4)](_0x3f8099,_0x52b217,_0xfd1297),_0xfd1297;},__metadata=this&&this[a123_0x4860ac(0x1e1)]||function(_0x3ecb96,_0x3fe4a8){const _0x298d0e=a123_0x4860ac;if(typeof Reflect==='object'&&typeof Reflect[_0x298d0e(0x1b3)]===_0x298d0e(0x19d))return Reflect['metadata'](_0x3ecb96,_0x3fe4a8);};Object['defineProperty'](exports,a123_0x4860ac(0x1be),{'value':!![]}),exports[a123_0x4860ac(0x1c7)]=void 0x0;function a123_0x16be(){const _0x165684=['getComponentIds','In\x20Progress','function','CommitComponentsDto','getOne','string','repositoryId','6XpvazY','getComponents','name','message','Completed','../dto/commit-components.dto','DEFAULT_GIT_USER_NAME','create','10134530CRuBRs','repository','get','14VUAugr','createBranchIfNotExists','../../salesforce/services/salesforce-sync.service','toString','send','salesforceService','metadata','defineProperty','syncData','salesforceSync','SalesforceLogger3','typedi','log','branchName','110NqkLLE','run','setStatus','__esModule','./commit-components.job','sha','object',']\x20[Branch:\x20','updateLastCommit','getCommitDto','force','3213976KhyPHK','FlosumSyncJob','1098810mfOMEB','3275696cEUcHN','CommitComponentsJob','design:paramtypes','Sync\x20repository','SalesforceSyncService','\x20Checking\x20sync\x20status.','parse','2767963SUKhBa','convertToSFDX','updateRemoteState','getOwnPropertyDescriptor','prefix','../../salesforce/services/salesforce-logger-v3.service','search','85038JgfdEL','retrieveAttachment','../../salesforce/services/salesforce-retriever.service','gitUrl','(((.+)+)+)+$','commitJob','593023gagWDi','catch','\x20Checking\x20repository\x20on\x20Flosum\x20side.','9AbDRhy','__metadata','\x20Sync\x20status\x20','branches','checkSyncStatus','sfLogger','apply','decorate','recordTypeName','user','lastCommit','../../salesforce/services/salesforce.service','provider','DEFAULT_GIT_USER_EMAIL','Container','branch','length','constructor','Service'];a123_0x16be=function(){return _0x165684;};return a123_0x16be();}const salesforce_logger_v3_service_1=require(a123_0x4860ac(0x1d5)),typedi_1=require(a123_0x4860ac(0x1b8)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a123_0x4860ac(0x1d9)),salesforce_sync_service_1=require(a123_0x4860ac(0x1af)),salesforce_service_1=require(a123_0x4860ac(0x193)),commit_components_dto_1=require(a123_0x4860ac(0x1a7)),commit_components_job_1=require(a123_0x4860ac(0x1bf));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x4abe32,_0x5a9298,_0x31adb0){const _0x3ea1d8=a123_0x4860ac;this[_0x3ea1d8(0x1b6)]=_0x4abe32,this[_0x3ea1d8(0x1b2)]=_0x5a9298,this[_0x3ea1d8(0x1dc)]=_0x31adb0;}async[a123_0x4860ac(0x1ae)](){const _0x249003=a123_0x4860ac;let _0xca2c0e=await this[_0x249003(0x1ab)][_0x249003(0x18b)][_0x249003(0x19f)](this[_0x249003(0x1b5)]['branchName'])[_0x249003(0x1de)](()=>null);!_0xca2c0e&&(_0xca2c0e=await this[_0x249003(0x1ab)][_0x249003(0x18b)][_0x249003(0x1a9)]({'name':this[_0x249003(0x1b5)][_0x249003(0x1ba)]})),this[_0x249003(0x197)]=_0xca2c0e;}async['getComponentIds'](){const _0x15466f=a123_0x4860ac;return this['syncData'][_0x15466f(0x1a1)]?this['salesforceSync']['getComponentsFromRepository'](this[_0x15466f(0x1b5)][_0x15466f(0x1a1)]):this[_0x15466f(0x1b6)]['getBranchComponents'](this[_0x15466f(0x1b5)]['branchId']);}async['getComponents'](){const _0x3c9aaa=a123_0x4860ac,_0x3228dc=await this[_0x3c9aaa(0x19b)](),_0x5cf740=new salesforce_retriever_service_1['SalesforceRetrieverService'](this['salesforceService']),_0xa39724=await _0x5cf740[_0x3c9aaa(0x1bc)](_0x3228dc);return _0xa39724;}async['getCommitDto'](_0x35e018){const _0x427512=a123_0x4860ac,_0x5d26e3=new commit_components_dto_1[(_0x427512(0x19e))]();return _0x5d26e3[_0x427512(0x1a5)]=_0x427512(0x1cc),_0x5d26e3[_0x427512(0x191)]={'name':constants_1[_0x427512(0x1a8)],'email':constants_1[_0x427512(0x195)]},_0x5d26e3['components']={'writed':await this[_0x427512(0x1a3)]()},_0x5d26e3[_0x427512(0x1d1)]=_0x35e018,_0x5d26e3['repo']=this['repository'],_0x5d26e3[_0x427512(0x197)]=this[_0x427512(0x197)],_0x5d26e3[_0x427512(0x1c5)]=!![],_0x5d26e3['provider']=this[_0x427512(0x194)],_0x5d26e3['recordType']=this['syncData'][_0x427512(0x190)],_0x5d26e3;}async['checkSyncStatus'](){const _0x499773=a123_0x4860ac,_0x20ad37=await this[_0x499773(0x1b6)]['getRemoteStateAttachmentId'](this[_0x499773(0x1b5)]),_0x1d8465=await this[_0x499773(0x1b2)][_0x499773(0x1d8)](_0x20ad37)['then'](_0x1cc5a9=>typeof _0x1cc5a9===_0x499773(0x1a0)?JSON[_0x499773(0x1cf)](_0x1cc5a9):_0x1cc5a9)[_0x499773(0x1de)](()=>({}));if(_0x1d8465[this[_0x499773(0x1ab)][_0x499773(0x1da)]]){if(_0x1d8465[this[_0x499773(0x1ab)]['gitUrl']][_0x499773(0x192)]===this[_0x499773(0x197)][_0x499773(0x1c0)])return!![];}return![];}async[a123_0x4860ac(0x1c3)](){const _0x2e21ec=a123_0x4860ac,_0x54b5b7=await this[_0x2e21ec(0x1ab)][_0x2e21ec(0x18b)][_0x2e21ec(0x19f)](this[_0x2e21ec(0x197)][_0x2e21ec(0x1a4)]);await this[_0x2e21ec(0x18d)]['log'](this[_0x2e21ec(0x1d4)]+'\x20Update\x20remote\x20state.');const _0x446989={[this[_0x2e21ec(0x1ab)][_0x2e21ec(0x1da)]]:{'lastCommit':_0x54b5b7[_0x2e21ec(0x1c0)]}};await this[_0x2e21ec(0x1b6)][_0x2e21ec(0x1d2)](this[_0x2e21ec(0x1b5)],_0x446989);}async[a123_0x4860ac(0x1bc)]({syncRecord:_0x3c11b3,repository:_0x1906c0,convertToSFDX:_0x3c158c,provider:_0x2a1215}){const _0xc29b51=a123_0x4860ac;this[_0xc29b51(0x1b5)]=_0x3c11b3,this[_0xc29b51(0x194)]=_0x2a1215,this[_0xc29b51(0x1ab)]=_0x1906c0,this[_0xc29b51(0x18d)]=typedi_1[_0xc29b51(0x196)][_0xc29b51(0x1ac)](salesforce_logger_v3_service_1[_0xc29b51(0x1b7)]),this[_0xc29b51(0x1d4)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0xc29b51(0x1b5)]['repositoryName']+_0xc29b51(0x1c2)+this[_0xc29b51(0x1b5)]['branchName']+']';try{await this['sfLogger']['log'](this['prefix']+'\x20Start\x20Flosum\x20sync\x20job')[_0xc29b51(0x1b1)](),await this[_0xc29b51(0x1b6)][_0xc29b51(0x1bd)](this[_0xc29b51(0x1b5)],_0xc29b51(0x19c)),this[_0xc29b51(0x18d)][_0xc29b51(0x1b9)](this[_0xc29b51(0x1d4)]+_0xc29b51(0x1df)),await this[_0xc29b51(0x1ae)](),await this[_0xc29b51(0x18d)][_0xc29b51(0x1b9)](this[_0xc29b51(0x1d4)]+_0xc29b51(0x1ce))[_0xc29b51(0x1b1)]();const _0x4494a9=await this[_0xc29b51(0x18c)]();this[_0xc29b51(0x18d)][_0xc29b51(0x1b9)](this['prefix']+_0xc29b51(0x1e2)+_0x4494a9+'.');if(_0x4494a9){await this['salesforceSync'][_0xc29b51(0x1bd)](this[_0xc29b51(0x1b5)],_0xc29b51(0x1a6)),await this[_0xc29b51(0x18d)][_0xc29b51(0x1b9)](this[_0xc29b51(0x1d4)]+'\x20Branch\x20synchronized.\x20Skip')[_0xc29b51(0x1b1)]();return;}const _0x2208c9=await this[_0xc29b51(0x1c4)](_0x3c158c);await this[_0xc29b51(0x1dc)][_0xc29b51(0x1bc)](_0x2208c9,this[_0xc29b51(0x1d4)]),await this[_0xc29b51(0x1b6)][_0xc29b51(0x1bd)](this[_0xc29b51(0x1b5)],_0xc29b51(0x1a6)),await this[_0xc29b51(0x1c3)](),this['sfLogger']['log'](this[_0xc29b51(0x1d4)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x4dd82c){throw _0x4dd82c;}finally{await this[_0xc29b51(0x18d)][_0xc29b51(0x1b1)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a123_0x4860ac(0x19a)])({'transient':!![]}),__metadata(a123_0x4860ac(0x1cb),[salesforce_sync_service_1[a123_0x4860ac(0x1cd)],salesforce_service_1['SalesforceService'],commit_components_job_1[a123_0x4860ac(0x1ca)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;