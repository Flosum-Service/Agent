const a105_0x390ef5=a105_0x53c7;function a105_0x4f01(){const _0x277a35=['15nZANFG','get','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','../../salesforce/services/salesforce-sync.service','72brJPSA','defineProperty','typedi','\x20Branch\x20synchronized.\x20Skip','Container','__decorate','salesforceService','466fruUyb','prefix','(((.+)+)+)+$','lastCommit','commitJob','getCommitDto','DEFAULT_GIT_USER_EMAIL','provider','function','DEFAULT_GIT_USER_NAME','toString','../../salesforce/services/salesforce-retriever.service','log','object','sfLogger','../../salesforce/services/salesforce-logger-v3.service','create','repo','run','createBranchIfNotExists','\x20Sync\x20status\x20','repository','1140984pWasZn','length','search','getRemoteStateAttachmentId','updateLastCommit','\x20Flosum\x20sync\x20job\x20done.','__metadata','getOne','1928906qsfddp','branchId','getComponentIds','parse','checkSyncStatus','./commit-components.job','getBranchComponents','\x20Start\x20Flosum\x20sync\x20job','message','SalesforceService','\x20Checking\x20repository\x20on\x20Flosum\x20side.','send','branchName','syncData','then','Completed','8731940vEuIDe','../dto/commit-components.dto','retrieveAttachment','setStatus',']\x20[Branch:\x20','CommitComponentsJob','SalesforceLogger3','string','catch','name','238280WpkGXC','components','convertToSFDX','repositoryId','4749gSkbrN','getComponents','sha','FlosumSyncJob','Sync\x20repository','decorate','In\x20Progress','apply','gitUrl','../../salesforce/services/salesforce.service','Service','metadata','331182HvCmRK','force','design:paramtypes','salesforceSync','branches','branch','177948dtMtae'];a105_0x4f01=function(){return _0x277a35;};return a105_0x4f01();}(function(_0x32346e,_0x3038e2){const _0x26c00a=a105_0x53c7,_0xa39e94=_0x32346e();while(!![]){try{const _0x23e686=parseInt(_0x26c00a(0x1c1))/0x1+parseInt(_0x26c00a(0x1e3))/0x2*(-parseInt(_0x26c00a(0x1c5))/0x3)+parseInt(_0x26c00a(0x1f9))/0x4+parseInt(_0x26c00a(0x1d8))/0x5*(-parseInt(_0x26c00a(0x1d7))/0x6)+-parseInt(_0x26c00a(0x1a7))/0x7+-parseInt(_0x26c00a(0x1dc))/0x8*(parseInt(_0x26c00a(0x1d1))/0x9)+parseInt(_0x26c00a(0x1b7))/0xa;if(_0x23e686===_0x3038e2)break;else _0xa39e94['push'](_0xa39e94['shift']());}catch(_0x2914b6){_0xa39e94['push'](_0xa39e94['shift']());}}}(a105_0x4f01,0x51187));const a105_0x9386e5=(function(){let _0x2a0ba6=!![];return function(_0x2f7bf4,_0x5e6d12){const _0x21dd68=_0x2a0ba6?function(){const _0x17c3b0=a105_0x53c7;if(_0x5e6d12){const _0x36b560=_0x5e6d12[_0x17c3b0(0x1cc)](_0x2f7bf4,arguments);return _0x5e6d12=null,_0x36b560;}}:function(){};return _0x2a0ba6=![],_0x21dd68;};}()),a105_0x305163=a105_0x9386e5(this,function(){const _0x1f9d6e=a105_0x53c7;return a105_0x305163[_0x1f9d6e(0x1ed)]()[_0x1f9d6e(0x1fb)](_0x1f9d6e(0x1e5))['toString']()['constructor'](a105_0x305163)[_0x1f9d6e(0x1fb)](_0x1f9d6e(0x1e5));});function a105_0x53c7(_0x44ad68,_0x48de01){const _0x4428ee=a105_0x4f01();return a105_0x53c7=function(_0x305163,_0x9386e5){_0x305163=_0x305163-0x1a5;let _0x4f01e7=_0x4428ee[_0x305163];return _0x4f01e7;},a105_0x53c7(_0x44ad68,_0x48de01);}a105_0x305163();'use strict';var __decorate=this&&this[a105_0x390ef5(0x1e1)]||function(_0x15a3da,_0x2fbce5,_0x21f40f,_0x479282){const _0x2c0d6b=a105_0x390ef5;var _0x256782=arguments[_0x2c0d6b(0x1fa)],_0x5369eb=_0x256782<0x3?_0x2fbce5:_0x479282===null?_0x479282=Object['getOwnPropertyDescriptor'](_0x2fbce5,_0x21f40f):_0x479282,_0x4e7831;if(typeof Reflect===_0x2c0d6b(0x1f0)&&typeof Reflect[_0x2c0d6b(0x1ca)]===_0x2c0d6b(0x1eb))_0x5369eb=Reflect[_0x2c0d6b(0x1ca)](_0x15a3da,_0x2fbce5,_0x21f40f,_0x479282);else{for(var _0x21f23d=_0x15a3da['length']-0x1;_0x21f23d>=0x0;_0x21f23d--)if(_0x4e7831=_0x15a3da[_0x21f23d])_0x5369eb=(_0x256782<0x3?_0x4e7831(_0x5369eb):_0x256782>0x3?_0x4e7831(_0x2fbce5,_0x21f40f,_0x5369eb):_0x4e7831(_0x2fbce5,_0x21f40f))||_0x5369eb;}return _0x256782>0x3&&_0x5369eb&&Object['defineProperty'](_0x2fbce5,_0x21f40f,_0x5369eb),_0x5369eb;},__metadata=this&&this[a105_0x390ef5(0x1a5)]||function(_0x4dcc4c,_0x34abc0){const _0x1a5009=a105_0x390ef5;if(typeof Reflect===_0x1a5009(0x1f0)&&typeof Reflect['metadata']===_0x1a5009(0x1eb))return Reflect[_0x1a5009(0x1d0)](_0x4dcc4c,_0x34abc0);};Object[a105_0x390ef5(0x1dd)](exports,'__esModule',{'value':!![]}),exports[a105_0x390ef5(0x1c8)]=void 0x0;const salesforce_logger_v3_service_1=require(a105_0x390ef5(0x1f2)),typedi_1=require(a105_0x390ef5(0x1de)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a105_0x390ef5(0x1ee)),salesforce_sync_service_1=require(a105_0x390ef5(0x1db)),salesforce_service_1=require(a105_0x390ef5(0x1ce)),commit_components_dto_1=require(a105_0x390ef5(0x1b8)),commit_components_job_1=require(a105_0x390ef5(0x1ac));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x36d455,_0x452183,_0x4b08ca){const _0x1483c5=a105_0x390ef5;this[_0x1483c5(0x1d4)]=_0x36d455,this[_0x1483c5(0x1e2)]=_0x452183,this[_0x1483c5(0x1e7)]=_0x4b08ca;}async['createBranchIfNotExists'](){const _0x32d490=a105_0x390ef5;let _0x58d2ac=await this[_0x32d490(0x1f8)][_0x32d490(0x1d5)][_0x32d490(0x1a6)](this['syncData'][_0x32d490(0x1b3)])['catch'](()=>null);!_0x58d2ac&&(_0x58d2ac=await this[_0x32d490(0x1f8)][_0x32d490(0x1d5)][_0x32d490(0x1f3)]({'name':this[_0x32d490(0x1b4)][_0x32d490(0x1b3)]})),this[_0x32d490(0x1d6)]=_0x58d2ac;}async[a105_0x390ef5(0x1a9)](){const _0x119fa6=a105_0x390ef5;return this[_0x119fa6(0x1b4)]['repositoryId']?this[_0x119fa6(0x1d4)]['getComponentsFromRepository'](this[_0x119fa6(0x1b4)][_0x119fa6(0x1c4)]):this[_0x119fa6(0x1d4)][_0x119fa6(0x1ad)](this['syncData'][_0x119fa6(0x1a8)]);}async['getComponents'](){const _0x33e48f=a105_0x390ef5,_0x3d386b=await this[_0x33e48f(0x1a9)](),_0x21caa9=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x33e48f(0x1e2)]),_0x3c8456=await _0x21caa9[_0x33e48f(0x1f5)](_0x3d386b);return _0x3c8456;}async[a105_0x390ef5(0x1e8)](_0x2a1ce2){const _0x599702=a105_0x390ef5,_0x458a8e=new commit_components_dto_1['CommitComponentsDto']();return _0x458a8e[_0x599702(0x1af)]=_0x599702(0x1c9),_0x458a8e['user']={'name':constants_1[_0x599702(0x1ec)],'email':constants_1[_0x599702(0x1e9)]},_0x458a8e[_0x599702(0x1c2)]={'writed':await this[_0x599702(0x1c6)]()},_0x458a8e[_0x599702(0x1c3)]=_0x2a1ce2,_0x458a8e[_0x599702(0x1f4)]=this[_0x599702(0x1f8)],_0x458a8e[_0x599702(0x1d6)]=this[_0x599702(0x1d6)],_0x458a8e[_0x599702(0x1d2)]=!![],_0x458a8e['provider']=this[_0x599702(0x1ea)],_0x458a8e;}async[a105_0x390ef5(0x1ab)](){const _0xe63ff1=a105_0x390ef5,_0x5ce860=await this[_0xe63ff1(0x1d4)][_0xe63ff1(0x1fc)](this[_0xe63ff1(0x1b4)]),_0x2eee0c=await this[_0xe63ff1(0x1e2)][_0xe63ff1(0x1b9)](_0x5ce860)[_0xe63ff1(0x1b5)](_0x1f0039=>typeof _0x1f0039===_0xe63ff1(0x1be)?JSON[_0xe63ff1(0x1aa)](_0x1f0039):_0x1f0039)[_0xe63ff1(0x1bf)](()=>({}));if(_0x2eee0c[this[_0xe63ff1(0x1f8)][_0xe63ff1(0x1cd)]]){if(_0x2eee0c[this[_0xe63ff1(0x1f8)]['gitUrl']][_0xe63ff1(0x1e6)]===this[_0xe63ff1(0x1d6)]['sha'])return!![];}return![];}async[a105_0x390ef5(0x1fd)](){const _0x322f7f=a105_0x390ef5,_0x521a9c=await this[_0x322f7f(0x1f8)][_0x322f7f(0x1d5)]['getOne'](this['branch'][_0x322f7f(0x1c0)]);await this[_0x322f7f(0x1f1)]['log'](this['prefix']+'\x20Update\x20remote\x20state.');const _0x1e15d0={[this[_0x322f7f(0x1f8)][_0x322f7f(0x1cd)]]:{'lastCommit':_0x521a9c[_0x322f7f(0x1c7)]}};await this[_0x322f7f(0x1d4)]['updateRemoteState'](this[_0x322f7f(0x1b4)],_0x1e15d0);}async['run']({syncRecord:_0x3c9b39,repository:_0x1ad76e,convertToSFDX:_0x889f64,provider:_0x3579ec}){const _0x764507=a105_0x390ef5;this[_0x764507(0x1b4)]=_0x3c9b39,this[_0x764507(0x1ea)]=_0x3579ec,this[_0x764507(0x1f8)]=_0x1ad76e,this[_0x764507(0x1f1)]=typedi_1[_0x764507(0x1e0)][_0x764507(0x1d9)](salesforce_logger_v3_service_1[_0x764507(0x1bd)]),this[_0x764507(0x1e4)]=_0x764507(0x1da)+this[_0x764507(0x1b4)]['repositoryName']+_0x764507(0x1bb)+this['syncData']['branchName']+']';try{await this['sfLogger'][_0x764507(0x1ef)](this['prefix']+_0x764507(0x1ae))['send'](),await this['salesforceSync']['setStatus'](this[_0x764507(0x1b4)],_0x764507(0x1cb)),this['sfLogger'][_0x764507(0x1ef)](this[_0x764507(0x1e4)]+_0x764507(0x1b1)),await this[_0x764507(0x1f6)](),await this[_0x764507(0x1f1)][_0x764507(0x1ef)](this[_0x764507(0x1e4)]+'\x20Checking\x20sync\x20status.')[_0x764507(0x1b2)]();const _0x4b5d94=await this[_0x764507(0x1ab)]();this['sfLogger'][_0x764507(0x1ef)](this[_0x764507(0x1e4)]+_0x764507(0x1f7)+_0x4b5d94+'.');if(_0x4b5d94){await this[_0x764507(0x1d4)][_0x764507(0x1ba)](this[_0x764507(0x1b4)],'Completed'),await this[_0x764507(0x1f1)][_0x764507(0x1ef)](this['prefix']+_0x764507(0x1df))[_0x764507(0x1b2)]();return;}const _0x45a8a7=await this[_0x764507(0x1e8)](_0x889f64);await this['commitJob'][_0x764507(0x1f5)](_0x45a8a7,this['prefix']),await this[_0x764507(0x1d4)][_0x764507(0x1ba)](this[_0x764507(0x1b4)],_0x764507(0x1b6)),await this['updateLastCommit'](),this[_0x764507(0x1f1)]['log'](this['prefix']+_0x764507(0x1fe));}catch(_0x220bf3){throw _0x220bf3;}finally{await this['sfLogger']['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a105_0x390ef5(0x1cf)])({'transient':!![]}),__metadata(a105_0x390ef5(0x1d3),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a105_0x390ef5(0x1b0)],commit_components_job_1[a105_0x390ef5(0x1bc)]])],FlosumSyncJob),exports[a105_0x390ef5(0x1c8)]=FlosumSyncJob;