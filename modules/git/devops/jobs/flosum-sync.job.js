const a75_0x3cfde4=a75_0x5485;(function(_0xfdf6fb,_0x2374ab){const _0x47d499=a75_0x5485,_0x2f6219=_0xfdf6fb();while(!![]){try{const _0x268d2f=parseInt(_0x47d499(0x1f3))/0x1+-parseInt(_0x47d499(0x1ff))/0x2*(parseInt(_0x47d499(0x200))/0x3)+-parseInt(_0x47d499(0x21d))/0x4*(-parseInt(_0x47d499(0x21a))/0x5)+-parseInt(_0x47d499(0x23c))/0x6*(-parseInt(_0x47d499(0x218))/0x7)+-parseInt(_0x47d499(0x1f9))/0x8*(parseInt(_0x47d499(0x23d))/0x9)+-parseInt(_0x47d499(0x21b))/0xa+-parseInt(_0x47d499(0x22d))/0xb*(-parseInt(_0x47d499(0x1ec))/0xc);if(_0x268d2f===_0x2374ab)break;else _0x2f6219['push'](_0x2f6219['shift']());}catch(_0x3ecf8d){_0x2f6219['push'](_0x2f6219['shift']());}}}(a75_0x2039,0x73cb1));const a75_0x1491eb=(function(){let _0x4961dd=!![];return function(_0x55d8b0,_0x2b600a){const _0x23dcd0=_0x4961dd?function(){const _0x46d5ec=a75_0x5485;if(_0x2b600a){const _0x1b9f7c=_0x2b600a[_0x46d5ec(0x207)](_0x55d8b0,arguments);return _0x2b600a=null,_0x1b9f7c;}}:function(){};return _0x4961dd=![],_0x23dcd0;};}()),a75_0x10c845=a75_0x1491eb(this,function(){const _0x4f63d5=a75_0x5485;return a75_0x10c845[_0x4f63d5(0x212)]()[_0x4f63d5(0x205)](_0x4f63d5(0x1e4))[_0x4f63d5(0x212)]()[_0x4f63d5(0x201)](a75_0x10c845)[_0x4f63d5(0x205)](_0x4f63d5(0x1e4));});a75_0x10c845();'use strict';var __decorate=this&&this[a75_0x3cfde4(0x219)]||function(_0x240e66,_0x56a2e6,_0x113a5d,_0x1e1bd7){const _0xe27a2=a75_0x3cfde4;var _0x400ae7=arguments['length'],_0xf975ba=_0x400ae7<0x3?_0x56a2e6:_0x1e1bd7===null?_0x1e1bd7=Object['getOwnPropertyDescriptor'](_0x56a2e6,_0x113a5d):_0x1e1bd7,_0x377f87;if(typeof Reflect===_0xe27a2(0x235)&&typeof Reflect[_0xe27a2(0x23a)]==='function')_0xf975ba=Reflect[_0xe27a2(0x23a)](_0x240e66,_0x56a2e6,_0x113a5d,_0x1e1bd7);else{for(var _0x29717d=_0x240e66[_0xe27a2(0x1f4)]-0x1;_0x29717d>=0x0;_0x29717d--)if(_0x377f87=_0x240e66[_0x29717d])_0xf975ba=(_0x400ae7<0x3?_0x377f87(_0xf975ba):_0x400ae7>0x3?_0x377f87(_0x56a2e6,_0x113a5d,_0xf975ba):_0x377f87(_0x56a2e6,_0x113a5d))||_0xf975ba;}return _0x400ae7>0x3&&_0xf975ba&&Object['defineProperty'](_0x56a2e6,_0x113a5d,_0xf975ba),_0xf975ba;},__metadata=this&&this[a75_0x3cfde4(0x223)]||function(_0xd1cb34,_0x2b091a){const _0x590776=a75_0x3cfde4;if(typeof Reflect==='object'&&typeof Reflect[_0x590776(0x1e2)]===_0x590776(0x1f8))return Reflect[_0x590776(0x1e2)](_0xd1cb34,_0x2b091a);};function a75_0x5485(_0x2b67eb,_0x1af063){const _0x4b7453=a75_0x2039();return a75_0x5485=function(_0x10c845,_0x1491eb){_0x10c845=_0x10c845-0x1e2;let _0x20399f=_0x4b7453[_0x10c845];return _0x20399f;},a75_0x5485(_0x2b67eb,_0x1af063);}Object[a75_0x3cfde4(0x1e3)](exports,a75_0x3cfde4(0x1e7),{'value':!![]}),exports[a75_0x3cfde4(0x22e)]=void 0x0;const salesforce_logger_v3_service_1=require(a75_0x3cfde4(0x1fb)),typedi_1=require(a75_0x3cfde4(0x231)),constants_1=require(a75_0x3cfde4(0x229)),salesforce_retriever_service_1=require(a75_0x3cfde4(0x21e)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a75_0x3cfde4(0x1ea)),commit_components_dto_1=require(a75_0x3cfde4(0x213)),commit_components_job_1=require(a75_0x3cfde4(0x236));function a75_0x2039(){const _0x430835=['branch','\x20Checking\x20repository\x20on\x20Flosum\x20side.','Completed','504686qZlaeY','length','DEFAULT_GIT_USER_EMAIL','catch','\x20Flosum\x20sync\x20job\x20done.','function','8eKEDcl','then','../../salesforce/services/salesforce-logger-v3.service','branchName','\x20Sync\x20status\x20','run','1506pydogB','423JdUnfy','constructor','branchId','\x20Start\x20Flosum\x20sync\x20job','convertToSFDX','search','createBranchIfNotExists','apply','lastCommit','string','provider','log','getComponents','force','commitJob','Container','prefix','getComponentsFromRepository','toString','../dto/commit-components.dto','repositoryId','name','sha','SalesforceLogger3','938NRbRQV','__decorate','961375ihgOBf','1749910vxDJcw','getComponentIds','8hwKpWK','../../salesforce/services/salesforce-retriever.service','\x20Branch\x20synchronized.\x20Skip','components','SalesforceService','getRemoteStateAttachmentId','__metadata','setStatus','repositoryName','Sync\x20repository','checkSyncStatus','gitUrl','../../../../constants','updateLastCommit','getOne','user','308osAmtK','FlosumSyncJob','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','branches','typedi','getCommitDto','design:paramtypes','salesforceService','object','./commit-components.job','updateRemoteState','salesforceSync','parse','decorate','send','15852wHClNQ','4556367bNCwXV','metadata','defineProperty','(((.+)+)+)+$','repository','In\x20Progress','__esModule','Service','syncData','../../salesforce/services/salesforce.service','CommitComponentsDto','7908wjKwDy','sfLogger',']\x20[Branch:\x20','\x20Update\x20remote\x20state.'];a75_0x2039=function(){return _0x430835;};return a75_0x2039();}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x380f80,_0x38fa18,_0x48490e){const _0x1dc204=a75_0x3cfde4;this[_0x1dc204(0x238)]=_0x380f80,this['salesforceService']=_0x38fa18,this[_0x1dc204(0x20e)]=_0x48490e;}async[a75_0x3cfde4(0x206)](){const _0x36c0ea=a75_0x3cfde4;let _0x4a9801=await this['repository'][_0x36c0ea(0x230)][_0x36c0ea(0x22b)](this[_0x36c0ea(0x1e9)]['branchName'])[_0x36c0ea(0x1f6)](()=>null);!_0x4a9801&&(_0x4a9801=await this[_0x36c0ea(0x1e5)]['branches']['create']({'name':this[_0x36c0ea(0x1e9)][_0x36c0ea(0x1fc)]})),this[_0x36c0ea(0x1f0)]=_0x4a9801;}async['getComponentIds'](){const _0x203889=a75_0x3cfde4;return this[_0x203889(0x1e9)][_0x203889(0x214)]?this[_0x203889(0x238)][_0x203889(0x211)](this[_0x203889(0x1e9)]['repositoryId']):this[_0x203889(0x238)]['getBranchComponents'](this['syncData'][_0x203889(0x202)]);}async[a75_0x3cfde4(0x20c)](){const _0x3c831a=a75_0x3cfde4,_0x19fade=await this[_0x3c831a(0x21c)](),_0x4bacb9=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x3c831a(0x234)]),_0xec2c99=await _0x4bacb9[_0x3c831a(0x1fe)](_0x19fade);return _0xec2c99;}async[a75_0x3cfde4(0x232)](_0x33d3df){const _0x49574f=a75_0x3cfde4,_0x11a595=new commit_components_dto_1[(_0x49574f(0x1eb))]();return _0x11a595['message']=_0x49574f(0x226),_0x11a595[_0x49574f(0x22c)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x49574f(0x1f5)]},_0x11a595[_0x49574f(0x220)]={'writed':await this[_0x49574f(0x20c)]()},_0x11a595[_0x49574f(0x204)]=_0x33d3df,_0x11a595['repo']=this[_0x49574f(0x1e5)],_0x11a595[_0x49574f(0x1f0)]=this[_0x49574f(0x1f0)],_0x11a595[_0x49574f(0x20d)]=!![],_0x11a595[_0x49574f(0x20a)]=this[_0x49574f(0x20a)],_0x11a595;}async['checkSyncStatus'](){const _0x451959=a75_0x3cfde4,_0x1b7dd4=await this[_0x451959(0x238)][_0x451959(0x222)](this[_0x451959(0x1e9)]),_0x9cb95=await this['salesforceService']['retrieveAttachment'](_0x1b7dd4)[_0x451959(0x1fa)](_0x58f0a3=>typeof _0x58f0a3===_0x451959(0x209)?JSON[_0x451959(0x239)](_0x58f0a3):_0x58f0a3)[_0x451959(0x1f6)](()=>({}));if(_0x9cb95[this[_0x451959(0x1e5)]['gitUrl']]){if(_0x9cb95[this['repository'][_0x451959(0x228)]][_0x451959(0x208)]===this[_0x451959(0x1f0)][_0x451959(0x216)])return!![];}return![];}async[a75_0x3cfde4(0x22a)](){const _0x506a27=a75_0x3cfde4,_0x44641c=await this[_0x506a27(0x1e5)][_0x506a27(0x230)]['getOne'](this['branch'][_0x506a27(0x215)]);await this['sfLogger'][_0x506a27(0x20b)](this[_0x506a27(0x210)]+_0x506a27(0x1ef));const _0x169b05={[this['repository'][_0x506a27(0x228)]]:{'lastCommit':_0x44641c['sha']}};await this[_0x506a27(0x238)][_0x506a27(0x237)](this[_0x506a27(0x1e9)],_0x169b05);}async[a75_0x3cfde4(0x1fe)]({syncRecord:_0x321443,repository:_0x490ca0,convertToSFDX:_0x497c7e,provider:_0xc9e55a}){const _0x59e775=a75_0x3cfde4;this[_0x59e775(0x1e9)]=_0x321443,this['provider']=_0xc9e55a,this[_0x59e775(0x1e5)]=_0x490ca0,this[_0x59e775(0x1ed)]=typedi_1[_0x59e775(0x20f)]['get'](salesforce_logger_v3_service_1[_0x59e775(0x217)]),this[_0x59e775(0x210)]=_0x59e775(0x22f)+this[_0x59e775(0x1e9)][_0x59e775(0x225)]+_0x59e775(0x1ee)+this[_0x59e775(0x1e9)][_0x59e775(0x1fc)]+']';try{await this[_0x59e775(0x1ed)]['log'](this[_0x59e775(0x210)]+_0x59e775(0x203))[_0x59e775(0x23b)](),await this[_0x59e775(0x238)][_0x59e775(0x224)](this['syncData'],_0x59e775(0x1e6)),this[_0x59e775(0x1ed)][_0x59e775(0x20b)](this[_0x59e775(0x210)]+_0x59e775(0x1f1)),await this[_0x59e775(0x206)](),await this[_0x59e775(0x1ed)][_0x59e775(0x20b)](this[_0x59e775(0x210)]+'\x20Checking\x20sync\x20status.')[_0x59e775(0x23b)]();const _0x168c36=await this[_0x59e775(0x227)]();this['sfLogger'][_0x59e775(0x20b)](this[_0x59e775(0x210)]+_0x59e775(0x1fd)+_0x168c36+'.');if(_0x168c36){await this[_0x59e775(0x238)][_0x59e775(0x224)](this[_0x59e775(0x1e9)],'Completed'),await this[_0x59e775(0x1ed)][_0x59e775(0x20b)](this[_0x59e775(0x210)]+_0x59e775(0x21f))[_0x59e775(0x23b)]();return;}const _0x2423d4=await this['getCommitDto'](_0x497c7e);await this[_0x59e775(0x20e)][_0x59e775(0x1fe)](_0x2423d4,this['prefix']),await this['salesforceSync']['setStatus'](this[_0x59e775(0x1e9)],_0x59e775(0x1f2)),await this[_0x59e775(0x22a)](),this['sfLogger']['log'](this[_0x59e775(0x210)]+_0x59e775(0x1f7));}catch(_0x5c0fc4){throw _0x5c0fc4;}finally{await this['sfLogger'][_0x59e775(0x23b)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a75_0x3cfde4(0x1e8)])({'transient':!![]}),__metadata(a75_0x3cfde4(0x233),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a75_0x3cfde4(0x221)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a75_0x3cfde4(0x22e)]=FlosumSyncJob;