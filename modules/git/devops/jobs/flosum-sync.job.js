const a106_0x344417=a106_0x3275;(function(_0x202360,_0x2e611c){const _0x2d934d=a106_0x3275,_0x27c181=_0x202360();while(!![]){try{const _0x2a8917=parseInt(_0x2d934d(0x188))/0x1*(-parseInt(_0x2d934d(0x13b))/0x2)+-parseInt(_0x2d934d(0x16d))/0x3*(-parseInt(_0x2d934d(0x160))/0x4)+parseInt(_0x2d934d(0x15f))/0x5+parseInt(_0x2d934d(0x173))/0x6*(parseInt(_0x2d934d(0x14f))/0x7)+-parseInt(_0x2d934d(0x158))/0x8+-parseInt(_0x2d934d(0x147))/0x9+parseInt(_0x2d934d(0x191))/0xa;if(_0x2a8917===_0x2e611c)break;else _0x27c181['push'](_0x27c181['shift']());}catch(_0x8f569){_0x27c181['push'](_0x27c181['shift']());}}}(a106_0x1644,0x383a9));const a106_0x44e39a=(function(){let _0x5639f0=!![];return function(_0x340039,_0x299423){const _0x5f4d14=_0x5639f0?function(){const _0x481227=a106_0x3275;if(_0x299423){const _0x866307=_0x299423[_0x481227(0x190)](_0x340039,arguments);return _0x299423=null,_0x866307;}}:function(){};return _0x5639f0=![],_0x5f4d14;};}()),a106_0x3bbf94=a106_0x44e39a(this,function(){const _0x5bcfff=a106_0x3275;return a106_0x3bbf94[_0x5bcfff(0x162)]()[_0x5bcfff(0x149)](_0x5bcfff(0x159))['toString']()[_0x5bcfff(0x139)](a106_0x3bbf94)['search'](_0x5bcfff(0x159));});a106_0x3bbf94();'use strict';var __decorate=this&&this[a106_0x344417(0x13f)]||function(_0x3072a4,_0x147e44,_0x3d74d2,_0x22d0b1){const _0x54b9ca=a106_0x344417;var _0xbef90f=arguments[_0x54b9ca(0x187)],_0x14881e=_0xbef90f<0x3?_0x147e44:_0x22d0b1===null?_0x22d0b1=Object['getOwnPropertyDescriptor'](_0x147e44,_0x3d74d2):_0x22d0b1,_0x47f2c2;if(typeof Reflect===_0x54b9ca(0x18d)&&typeof Reflect[_0x54b9ca(0x155)]==='function')_0x14881e=Reflect[_0x54b9ca(0x155)](_0x3072a4,_0x147e44,_0x3d74d2,_0x22d0b1);else{for(var _0x4b2883=_0x3072a4[_0x54b9ca(0x187)]-0x1;_0x4b2883>=0x0;_0x4b2883--)if(_0x47f2c2=_0x3072a4[_0x4b2883])_0x14881e=(_0xbef90f<0x3?_0x47f2c2(_0x14881e):_0xbef90f>0x3?_0x47f2c2(_0x147e44,_0x3d74d2,_0x14881e):_0x47f2c2(_0x147e44,_0x3d74d2))||_0x14881e;}return _0xbef90f>0x3&&_0x14881e&&Object['defineProperty'](_0x147e44,_0x3d74d2,_0x14881e),_0x14881e;},__metadata=this&&this[a106_0x344417(0x144)]||function(_0x255c25,_0x30cfaa){const _0x4bb90b=a106_0x344417;if(typeof Reflect===_0x4bb90b(0x18d)&&typeof Reflect[_0x4bb90b(0x171)]===_0x4bb90b(0x192))return Reflect[_0x4bb90b(0x171)](_0x255c25,_0x30cfaa);};function a106_0x3275(_0x5dc3fa,_0x2d22dc){const _0x5c5c47=a106_0x1644();return a106_0x3275=function(_0x3bbf94,_0x44e39a){_0x3bbf94=_0x3bbf94-0x137;let _0x164497=_0x5c5c47[_0x3bbf94];return _0x164497;},a106_0x3275(_0x5dc3fa,_0x2d22dc);}Object[a106_0x344417(0x152)](exports,a106_0x344417(0x156),{'value':!![]}),exports[a106_0x344417(0x14e)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x344417(0x143)),typedi_1=require(a106_0x344417(0x16c)),constants_1=require(a106_0x344417(0x163)),salesforce_retriever_service_1=require(a106_0x344417(0x18f)),salesforce_sync_service_1=require(a106_0x344417(0x17a)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a106_0x344417(0x13c)),commit_components_job_1=require(a106_0x344417(0x180));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x5394e3,_0x36e50d,_0xd4a2a3){const _0x2c8522=a106_0x344417;this[_0x2c8522(0x174)]=_0x5394e3,this[_0x2c8522(0x175)]=_0x36e50d,this[_0x2c8522(0x161)]=_0xd4a2a3;}async[a106_0x344417(0x15e)](){const _0x1e86c1=a106_0x344417;let _0x62159c=await this[_0x1e86c1(0x172)]['branches'][_0x1e86c1(0x17f)](this[_0x1e86c1(0x145)][_0x1e86c1(0x168)])[_0x1e86c1(0x16b)](()=>null);!_0x62159c&&(_0x62159c=await this[_0x1e86c1(0x172)]['branches'][_0x1e86c1(0x15d)]({'name':this[_0x1e86c1(0x145)]['branchName']})),this[_0x1e86c1(0x183)]=_0x62159c;}async['getComponentIds'](){const _0x30fc2f=a106_0x344417;return this['syncData'][_0x30fc2f(0x154)]?this[_0x30fc2f(0x174)][_0x30fc2f(0x146)](this[_0x30fc2f(0x145)][_0x30fc2f(0x154)]):this[_0x30fc2f(0x174)][_0x30fc2f(0x137)](this[_0x30fc2f(0x145)][_0x30fc2f(0x179)]);}async[a106_0x344417(0x150)](){const _0x4e8440=a106_0x344417,_0x2bca36=await this[_0x4e8440(0x148)](),_0x194d18=new salesforce_retriever_service_1[(_0x4e8440(0x13a))](this['salesforceService']),_0x5c417e=await _0x194d18[_0x4e8440(0x15b)](_0x2bca36);return _0x5c417e;}async[a106_0x344417(0x13e)](_0x5badb6){const _0x466cb4=a106_0x344417,_0x40af28=new commit_components_dto_1[(_0x466cb4(0x153))]();return _0x40af28[_0x466cb4(0x18e)]=_0x466cb4(0x182),_0x40af28['user']={'name':constants_1[_0x466cb4(0x16a)],'email':constants_1[_0x466cb4(0x181)]},_0x40af28[_0x466cb4(0x165)]={'writed':await this['getComponents']()},_0x40af28[_0x466cb4(0x15c)]=_0x5badb6,_0x40af28[_0x466cb4(0x13d)]=this['repository'],_0x40af28['branch']=this[_0x466cb4(0x183)],_0x40af28[_0x466cb4(0x169)]=!![],_0x40af28[_0x466cb4(0x15a)]=this[_0x466cb4(0x15a)],_0x40af28;}async['checkSyncStatus'](){const _0x8fce9f=a106_0x344417,_0x3aa6bc=await this[_0x8fce9f(0x174)]['getRemoteStateAttachmentId'](this[_0x8fce9f(0x145)]),_0x119af1=await this[_0x8fce9f(0x175)][_0x8fce9f(0x16f)](_0x3aa6bc)[_0x8fce9f(0x166)](_0x1d5fc7=>typeof _0x1d5fc7==='string'?JSON[_0x8fce9f(0x17e)](_0x1d5fc7):_0x1d5fc7)['catch'](()=>({}));if(_0x119af1[this[_0x8fce9f(0x172)][_0x8fce9f(0x164)]]){if(_0x119af1[this['repository'][_0x8fce9f(0x164)]][_0x8fce9f(0x176)]===this[_0x8fce9f(0x183)]['sha'])return!![];}return![];}async['updateLastCommit'](){const _0x4fd705=a106_0x344417,_0xf6ae62=await this['repository'][_0x4fd705(0x151)][_0x4fd705(0x17f)](this[_0x4fd705(0x183)][_0x4fd705(0x170)]);await this['sfLogger'][_0x4fd705(0x138)](this[_0x4fd705(0x141)]+_0x4fd705(0x167));const _0x1e3cdd={[this[_0x4fd705(0x172)][_0x4fd705(0x164)]]:{'lastCommit':_0xf6ae62[_0x4fd705(0x16e)]}};await this[_0x4fd705(0x174)][_0x4fd705(0x186)](this[_0x4fd705(0x145)],_0x1e3cdd);}async['run']({syncRecord:_0x446e8a,repository:_0x5da671,convertToSFDX:_0xef2feb,provider:_0x43feba}){const _0x15662f=a106_0x344417;this[_0x15662f(0x145)]=_0x446e8a,this['provider']=_0x43feba,this[_0x15662f(0x172)]=_0x5da671,this[_0x15662f(0x157)]=typedi_1[_0x15662f(0x18a)][_0x15662f(0x18c)](salesforce_logger_v3_service_1[_0x15662f(0x14b)]),this['prefix']=_0x15662f(0x189)+this[_0x15662f(0x145)]['repositoryName']+_0x15662f(0x184)+this[_0x15662f(0x145)][_0x15662f(0x168)]+']';try{await this[_0x15662f(0x157)][_0x15662f(0x138)](this[_0x15662f(0x141)]+'\x20Start\x20Flosum\x20sync\x20job')['send'](),await this[_0x15662f(0x174)][_0x15662f(0x194)](this[_0x15662f(0x145)],_0x15662f(0x178)),this[_0x15662f(0x157)][_0x15662f(0x138)](this[_0x15662f(0x141)]+_0x15662f(0x185)),await this[_0x15662f(0x15e)](),await this[_0x15662f(0x157)][_0x15662f(0x138)](this[_0x15662f(0x141)]+_0x15662f(0x17c))[_0x15662f(0x142)]();const _0x21ce45=await this[_0x15662f(0x193)]();this['sfLogger']['log'](this['prefix']+'\x20Sync\x20status\x20'+_0x21ce45+'.');if(_0x21ce45){await this[_0x15662f(0x174)][_0x15662f(0x194)](this['syncData'],'Completed'),await this['sfLogger'][_0x15662f(0x138)](this[_0x15662f(0x141)]+_0x15662f(0x14c))['send']();return;}const _0x256d2a=await this[_0x15662f(0x13e)](_0xef2feb);await this['commitJob'][_0x15662f(0x15b)](_0x256d2a,this['prefix']),await this['salesforceSync'][_0x15662f(0x194)](this[_0x15662f(0x145)],_0x15662f(0x140)),await this[_0x15662f(0x177)](),this[_0x15662f(0x157)]['log'](this[_0x15662f(0x141)]+_0x15662f(0x17d));}catch(_0x3eb865){throw _0x3eb865;}finally{await this[_0x15662f(0x157)][_0x15662f(0x142)]();}}};function a106_0x1644(){const _0x3fb410=['updateRemoteState','length','28874PGZVee','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','Container','CommitComponentsJob','get','object','message','../../salesforce/services/salesforce-retriever.service','apply','6008880BYpJPW','function','checkSyncStatus','setStatus','SalesforceSyncService','getBranchComponents','log','constructor','SalesforceRetrieverService','12kYNjZP','../dto/commit-components.dto','repo','getCommitDto','__decorate','Completed','prefix','send','../../salesforce/services/salesforce-logger-v3.service','__metadata','syncData','getComponentsFromRepository','2109267QNQSoW','getComponentIds','search','Service','SalesforceLogger3','\x20Branch\x20synchronized.\x20Skip','SalesforceService','FlosumSyncJob','70HQebfc','getComponents','branches','defineProperty','CommitComponentsDto','repositoryId','decorate','__esModule','sfLogger','1820160ifnTry','(((.+)+)+)+$','provider','run','convertToSFDX','create','createBranchIfNotExists','191660Axldvl','8fUEewx','commitJob','toString','../../../../constants','gitUrl','components','then','\x20Update\x20remote\x20state.','branchName','force','DEFAULT_GIT_USER_NAME','catch','typedi','67785bGPdER','sha','retrieveAttachment','name','metadata','repository','108618EhVRRw','salesforceSync','salesforceService','lastCommit','updateLastCommit','In\x20Progress','branchId','../../salesforce/services/salesforce-sync.service','design:paramtypes','\x20Checking\x20sync\x20status.','\x20Flosum\x20sync\x20job\x20done.','parse','getOne','./commit-components.job','DEFAULT_GIT_USER_EMAIL','Sync\x20repository','branch',']\x20[Branch:\x20','\x20Checking\x20repository\x20on\x20Flosum\x20side.'];a106_0x1644=function(){return _0x3fb410;};return a106_0x1644();}FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x344417(0x14a)])({'transient':!![]}),__metadata(a106_0x344417(0x17b),[salesforce_sync_service_1[a106_0x344417(0x195)],salesforce_service_1[a106_0x344417(0x14d)],commit_components_job_1[a106_0x344417(0x18b)]])],FlosumSyncJob),exports[a106_0x344417(0x14e)]=FlosumSyncJob;