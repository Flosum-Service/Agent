const a106_0x205822=a106_0x4d2d;(function(_0x5f3356,_0x755a46){const _0x1b0aa7=a106_0x4d2d,_0x1dcaab=_0x5f3356();while(!![]){try{const _0x19fcc9=parseInt(_0x1b0aa7(0x110))/0x1*(-parseInt(_0x1b0aa7(0x107))/0x2)+parseInt(_0x1b0aa7(0x119))/0x3+parseInt(_0x1b0aa7(0x10c))/0x4+parseInt(_0x1b0aa7(0xd8))/0x5+parseInt(_0x1b0aa7(0x112))/0x6*(parseInt(_0x1b0aa7(0xfd))/0x7)+parseInt(_0x1b0aa7(0xfb))/0x8*(parseInt(_0x1b0aa7(0xe5))/0x9)+parseInt(_0x1b0aa7(0x126))/0xa*(-parseInt(_0x1b0aa7(0x104))/0xb);if(_0x19fcc9===_0x755a46)break;else _0x1dcaab['push'](_0x1dcaab['shift']());}catch(_0xde6fbf){_0x1dcaab['push'](_0x1dcaab['shift']());}}}(a106_0x45ad,0x8c60e));const a106_0x1ebf27=(function(){let _0x2e6f41=!![];return function(_0x53bacf,_0x4f95b7){const _0x5d46d6=_0x2e6f41?function(){if(_0x4f95b7){const _0x154f1e=_0x4f95b7['apply'](_0x53bacf,arguments);return _0x4f95b7=null,_0x154f1e;}}:function(){};return _0x2e6f41=![],_0x5d46d6;};}()),a106_0x5ad115=a106_0x1ebf27(this,function(){const _0x23d36=a106_0x4d2d;return a106_0x5ad115[_0x23d36(0x116)]()[_0x23d36(0xdf)](_0x23d36(0x114))['toString']()[_0x23d36(0xe2)](a106_0x5ad115)[_0x23d36(0xdf)](_0x23d36(0x114));});a106_0x5ad115();function a106_0x45ad(){const _0x3842a0=['\x20Checking\x20sync\x20status.','3612780cyFwPR','design:paramtypes','salesforceSync','name','DEFAULT_GIT_USER_NAME','metadata','then','search','createBranchIfNotExists','\x20Flosum\x20sync\x20job\x20done.','constructor','repositoryId','repository','9KqHBNg','branch','string','object','retrieveAttachment','\x20Update\x20remote\x20state.','Container','../../salesforce/services/salesforce-retriever.service','repositoryName','Service','provider','branches','updateRemoteState','__esModule','run','SalesforceLogger3','catch','__decorate','gitUrl','CommitComponentsDto','typedi','FlosumSyncJob','6331672PTwWWZ','convertToSFDX','1066961UiXOen','parse','getBranchComponents','../../salesforce/services/salesforce-sync.service','function','getCommitDto','setStatus','473ifsGFI','Completed','./commit-components.job','2bvspxW','branchId','get','getComponentIds','branchName','1944784tUsQhu','getOne','updateLastCommit',']\x20[Branch:\x20','796942YJkRtA','../../../../constants','6TIZfZJ','checkSyncStatus','(((.+)+)+)+$','defineProperty','toString','../../salesforce/services/salesforce-logger-v3.service','SalesforceSyncService','1369740lnNdcY','commitJob','user','syncData','repo','salesforceService','decorate','log','../dto/commit-components.dto','../../salesforce/services/salesforce.service','\x20Branch\x20synchronized.\x20Skip','DEFAULT_GIT_USER_EMAIL','sha','287740kiQeBx','getOwnPropertyDescriptor','length','prefix','getComponents','SalesforceRetrieverService','sfLogger','SalesforceService','send','force'];a106_0x45ad=function(){return _0x3842a0;};return a106_0x45ad();}'use strict';var __decorate=this&&this[a106_0x205822(0xf6)]||function(_0x3abb36,_0x4b0033,_0x1be254,_0x30df30){const _0x316d22=a106_0x205822;var _0xcda2a8=arguments[_0x316d22(0x128)],_0x27369d=_0xcda2a8<0x3?_0x4b0033:_0x30df30===null?_0x30df30=Object[_0x316d22(0x127)](_0x4b0033,_0x1be254):_0x30df30,_0x24274b;if(typeof Reflect==='object'&&typeof Reflect[_0x316d22(0x11f)]===_0x316d22(0x101))_0x27369d=Reflect[_0x316d22(0x11f)](_0x3abb36,_0x4b0033,_0x1be254,_0x30df30);else{for(var _0x156160=_0x3abb36['length']-0x1;_0x156160>=0x0;_0x156160--)if(_0x24274b=_0x3abb36[_0x156160])_0x27369d=(_0xcda2a8<0x3?_0x24274b(_0x27369d):_0xcda2a8>0x3?_0x24274b(_0x4b0033,_0x1be254,_0x27369d):_0x24274b(_0x4b0033,_0x1be254))||_0x27369d;}return _0xcda2a8>0x3&&_0x27369d&&Object['defineProperty'](_0x4b0033,_0x1be254,_0x27369d),_0x27369d;},__metadata=this&&this['__metadata']||function(_0x225eb9,_0x3c913c){const _0x4970e5=a106_0x205822;if(typeof Reflect===_0x4970e5(0xe8)&&typeof Reflect[_0x4970e5(0xdd)]===_0x4970e5(0x101))return Reflect[_0x4970e5(0xdd)](_0x225eb9,_0x3c913c);};Object[a106_0x205822(0x115)](exports,a106_0x205822(0xf2),{'value':!![]}),exports[a106_0x205822(0xfa)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x205822(0x117)),typedi_1=require(a106_0x205822(0xf9)),constants_1=require(a106_0x205822(0x111)),salesforce_retriever_service_1=require(a106_0x205822(0xec)),salesforce_sync_service_1=require(a106_0x205822(0x100)),salesforce_service_1=require(a106_0x205822(0x122)),commit_components_dto_1=require(a106_0x205822(0x121)),commit_components_job_1=require(a106_0x205822(0x106));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x18e818,_0x19ddea,_0x2ab8e2){const _0x212a55=a106_0x205822;this[_0x212a55(0xda)]=_0x18e818,this[_0x212a55(0x11e)]=_0x19ddea,this[_0x212a55(0x11a)]=_0x2ab8e2;}async[a106_0x205822(0xe0)](){const _0x18700e=a106_0x205822;let _0xa13cf9=await this['repository'][_0x18700e(0xf0)][_0x18700e(0x10d)](this['syncData']['branchName'])[_0x18700e(0xf5)](()=>null);!_0xa13cf9&&(_0xa13cf9=await this[_0x18700e(0xe4)][_0x18700e(0xf0)]['create']({'name':this[_0x18700e(0x11c)][_0x18700e(0x10b)]})),this[_0x18700e(0xe6)]=_0xa13cf9;}async[a106_0x205822(0x10a)](){const _0x2044bf=a106_0x205822;return this['syncData'][_0x2044bf(0xe3)]?this['salesforceSync']['getComponentsFromRepository'](this[_0x2044bf(0x11c)][_0x2044bf(0xe3)]):this[_0x2044bf(0xda)][_0x2044bf(0xff)](this[_0x2044bf(0x11c)][_0x2044bf(0x108)]);}async[a106_0x205822(0x12a)](){const _0x2f5010=a106_0x205822,_0x1e28be=await this[_0x2f5010(0x10a)](),_0x1a51e8=new salesforce_retriever_service_1[(_0x2f5010(0x12b))](this[_0x2f5010(0x11e)]),_0x126f54=await _0x1a51e8[_0x2f5010(0xf3)](_0x1e28be);return _0x126f54;}async[a106_0x205822(0x102)](_0x2cbcec){const _0x377ff7=a106_0x205822,_0x2e95ed=new commit_components_dto_1[(_0x377ff7(0xf8))]();return _0x2e95ed['message']='Sync\x20repository',_0x2e95ed[_0x377ff7(0x11b)]={'name':constants_1[_0x377ff7(0xdc)],'email':constants_1[_0x377ff7(0x124)]},_0x2e95ed['components']={'writed':await this[_0x377ff7(0x12a)]()},_0x2e95ed[_0x377ff7(0xfc)]=_0x2cbcec,_0x2e95ed[_0x377ff7(0x11d)]=this[_0x377ff7(0xe4)],_0x2e95ed[_0x377ff7(0xe6)]=this[_0x377ff7(0xe6)],_0x2e95ed[_0x377ff7(0x12f)]=!![],_0x2e95ed[_0x377ff7(0xef)]=this[_0x377ff7(0xef)],_0x2e95ed;}async[a106_0x205822(0x113)](){const _0x4b85ac=a106_0x205822,_0x28e972=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x4b85ac(0x11c)]),_0x7d5d06=await this['salesforceService'][_0x4b85ac(0xe9)](_0x28e972)[_0x4b85ac(0xde)](_0x55d121=>typeof _0x55d121===_0x4b85ac(0xe7)?JSON[_0x4b85ac(0xfe)](_0x55d121):_0x55d121)[_0x4b85ac(0xf5)](()=>({}));if(_0x7d5d06[this['repository'][_0x4b85ac(0xf7)]]){if(_0x7d5d06[this[_0x4b85ac(0xe4)][_0x4b85ac(0xf7)]]['lastCommit']===this['branch'][_0x4b85ac(0x125)])return!![];}return![];}async[a106_0x205822(0x10e)](){const _0x56a398=a106_0x205822,_0x28fdef=await this[_0x56a398(0xe4)]['branches']['getOne'](this['branch'][_0x56a398(0xdb)]);await this[_0x56a398(0x12c)][_0x56a398(0x120)](this[_0x56a398(0x129)]+_0x56a398(0xea));const _0x344bd9={[this[_0x56a398(0xe4)][_0x56a398(0xf7)]]:{'lastCommit':_0x28fdef[_0x56a398(0x125)]}};await this[_0x56a398(0xda)][_0x56a398(0xf1)](this[_0x56a398(0x11c)],_0x344bd9);}async[a106_0x205822(0xf3)]({syncRecord:_0x17848d,repository:_0x3c6b8a,convertToSFDX:_0x16f5b4,provider:_0x3e0800}){const _0x5834c6=a106_0x205822;this[_0x5834c6(0x11c)]=_0x17848d,this[_0x5834c6(0xef)]=_0x3e0800,this['repository']=_0x3c6b8a,this['sfLogger']=typedi_1[_0x5834c6(0xeb)][_0x5834c6(0x109)](salesforce_logger_v3_service_1[_0x5834c6(0xf4)]),this[_0x5834c6(0x129)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x5834c6(0x11c)][_0x5834c6(0xed)]+_0x5834c6(0x10f)+this[_0x5834c6(0x11c)][_0x5834c6(0x10b)]+']';try{await this[_0x5834c6(0x12c)][_0x5834c6(0x120)](this[_0x5834c6(0x129)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x5834c6(0x12e)](),await this[_0x5834c6(0xda)][_0x5834c6(0x103)](this[_0x5834c6(0x11c)],'In\x20Progress'),this[_0x5834c6(0x12c)][_0x5834c6(0x120)](this['prefix']+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x5834c6(0xe0)](),await this[_0x5834c6(0x12c)][_0x5834c6(0x120)](this['prefix']+_0x5834c6(0x130))[_0x5834c6(0x12e)]();const _0x190a0b=await this[_0x5834c6(0x113)]();this[_0x5834c6(0x12c)]['log'](this[_0x5834c6(0x129)]+'\x20Sync\x20status\x20'+_0x190a0b+'.');if(_0x190a0b){await this[_0x5834c6(0xda)]['setStatus'](this[_0x5834c6(0x11c)],_0x5834c6(0x105)),await this['sfLogger'][_0x5834c6(0x120)](this[_0x5834c6(0x129)]+_0x5834c6(0x123))[_0x5834c6(0x12e)]();return;}const _0x281368=await this[_0x5834c6(0x102)](_0x16f5b4);await this[_0x5834c6(0x11a)][_0x5834c6(0xf3)](_0x281368,this[_0x5834c6(0x129)]),await this[_0x5834c6(0xda)][_0x5834c6(0x103)](this['syncData'],_0x5834c6(0x105)),await this['updateLastCommit'](),this['sfLogger'][_0x5834c6(0x120)](this[_0x5834c6(0x129)]+_0x5834c6(0xe1));}catch(_0x5c9f53){throw _0x5c9f53;}finally{await this[_0x5834c6(0x12c)][_0x5834c6(0x12e)]();}}};function a106_0x4d2d(_0x2592c8,_0x559904){const _0x459da6=a106_0x45ad();return a106_0x4d2d=function(_0x5ad115,_0x1ebf27){_0x5ad115=_0x5ad115-0xd8;let _0x45addd=_0x459da6[_0x5ad115];return _0x45addd;},a106_0x4d2d(_0x2592c8,_0x559904);}FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x205822(0xee)])({'transient':!![]}),__metadata(a106_0x205822(0xd9),[salesforce_sync_service_1[a106_0x205822(0x118)],salesforce_service_1[a106_0x205822(0x12d)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a106_0x205822(0xfa)]=FlosumSyncJob;