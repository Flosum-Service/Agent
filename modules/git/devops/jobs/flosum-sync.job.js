const a106_0x3eeb5c=a106_0x398d;(function(_0x46c40a,_0x3e6661){const _0x115e93=a106_0x398d,_0x371f58=_0x46c40a();while(!![]){try{const _0x191885=-parseInt(_0x115e93(0x172))/0x1*(-parseInt(_0x115e93(0x168))/0x2)+parseInt(_0x115e93(0x15a))/0x3*(-parseInt(_0x115e93(0x133))/0x4)+parseInt(_0x115e93(0x12d))/0x5+parseInt(_0x115e93(0x16a))/0x6+-parseInt(_0x115e93(0x12c))/0x7*(parseInt(_0x115e93(0x141))/0x8)+parseInt(_0x115e93(0x148))/0x9+parseInt(_0x115e93(0x14d))/0xa;if(_0x191885===_0x3e6661)break;else _0x371f58['push'](_0x371f58['shift']());}catch(_0x443a0e){_0x371f58['push'](_0x371f58['shift']());}}}(a106_0x3439,0x5f4f5));const a106_0x2cd5d5=(function(){let _0xb9898f=!![];return function(_0x4dc07b,_0x2f1ad5){const _0x4389bd=_0xb9898f?function(){if(_0x2f1ad5){const _0x21f9ed=_0x2f1ad5['apply'](_0x4dc07b,arguments);return _0x2f1ad5=null,_0x21f9ed;}}:function(){};return _0xb9898f=![],_0x4389bd;};}()),a106_0x586ce5=a106_0x2cd5d5(this,function(){const _0x542a5a=a106_0x398d;return a106_0x586ce5['toString']()['search'](_0x542a5a(0x151))[_0x542a5a(0x155)]()['constructor'](a106_0x586ce5)[_0x542a5a(0x12e)]('(((.+)+)+)+$');});function a106_0x398d(_0xb4d446,_0x4b9da3){const _0x4aa769=a106_0x3439();return a106_0x398d=function(_0x586ce5,_0x2cd5d5){_0x586ce5=_0x586ce5-0x126;let _0x343959=_0x4aa769[_0x586ce5];return _0x343959;},a106_0x398d(_0xb4d446,_0x4b9da3);}function a106_0x3439(){const _0x2f2a2c=['../../../../constants','syncData','../dto/commit-components.dto','repositoryName','get','Container','sfLogger','11VENrYh','repository','updateLastCommit','branch','getComponentIds','getBranchComponents','function','updateRemoteState','salesforceSync','defineProperty','../../salesforce/services/salesforce-sync.service','5145JqXofo','2526030wUQdWZ','search','setStatus','getOne','SalesforceSyncService',']\x20[Branch:\x20','178872FxtQSv','__esModule','design:paramtypes','retrieveAttachment','getRemoteStateAttachmentId','\x20Checking\x20repository\x20on\x20Flosum\x20side.','\x20Start\x20Flosum\x20sync\x20job','log','name','metadata','SalesforceService','decorate','\x20Update\x20remote\x20state.','../../salesforce/services/salesforce.service','6904lqoBPG','commitJob','repo','send','getCommitDto','run','../../salesforce/services/salesforce-retriever.service','3142827cCIgXZ','then','length','CommitComponentsJob','provider','2740760RkveWF','branches','\x20Checking\x20sync\x20status.','./commit-components.job','(((.+)+)+)+$','getComponentsFromRepository','SalesforceRetrieverService','message','toString','checkSyncStatus','../../salesforce/services/salesforce-logger-v3.service','repositoryId','gitUrl','27fCOngQ','components','createBranchIfNotExists','object','\x20Flosum\x20sync\x20job\x20done.','Completed','typedi','In\x20Progress','force','sha','prefix','getComponents','\x20Branch\x20synchronized.\x20Skip','DEFAULT_GIT_USER_EMAIL','41744KwrCsu','salesforceService','414474zWqiEw'];a106_0x3439=function(){return _0x2f2a2c;};return a106_0x3439();}a106_0x586ce5();'use strict';var __decorate=this&&this['__decorate']||function(_0x245c79,_0x40229e,_0x3df659,_0x589f0f){const _0x35d779=a106_0x398d;var _0x103229=arguments[_0x35d779(0x14a)],_0x1f0c28=_0x103229<0x3?_0x40229e:_0x589f0f===null?_0x589f0f=Object['getOwnPropertyDescriptor'](_0x40229e,_0x3df659):_0x589f0f,_0x4dcace;if(typeof Reflect===_0x35d779(0x15d)&&typeof Reflect[_0x35d779(0x13e)]===_0x35d779(0x127))_0x1f0c28=Reflect[_0x35d779(0x13e)](_0x245c79,_0x40229e,_0x3df659,_0x589f0f);else{for(var _0x2ec8ea=_0x245c79[_0x35d779(0x14a)]-0x1;_0x2ec8ea>=0x0;_0x2ec8ea--)if(_0x4dcace=_0x245c79[_0x2ec8ea])_0x1f0c28=(_0x103229<0x3?_0x4dcace(_0x1f0c28):_0x103229>0x3?_0x4dcace(_0x40229e,_0x3df659,_0x1f0c28):_0x4dcace(_0x40229e,_0x3df659))||_0x1f0c28;}return _0x103229>0x3&&_0x1f0c28&&Object[_0x35d779(0x12a)](_0x40229e,_0x3df659,_0x1f0c28),_0x1f0c28;},__metadata=this&&this['__metadata']||function(_0x553245,_0x285ebc){const _0x563c44=a106_0x398d;if(typeof Reflect===_0x563c44(0x15d)&&typeof Reflect[_0x563c44(0x13c)]==='function')return Reflect[_0x563c44(0x13c)](_0x553245,_0x285ebc);};Object[a106_0x3eeb5c(0x12a)](exports,a106_0x3eeb5c(0x134),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x3eeb5c(0x157)),typedi_1=require(a106_0x3eeb5c(0x160)),constants_1=require(a106_0x3eeb5c(0x16b)),salesforce_retriever_service_1=require(a106_0x3eeb5c(0x147)),salesforce_sync_service_1=require(a106_0x3eeb5c(0x12b)),salesforce_service_1=require(a106_0x3eeb5c(0x140)),commit_components_dto_1=require(a106_0x3eeb5c(0x16d)),commit_components_job_1=require(a106_0x3eeb5c(0x150));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x47a034,_0x2fadc5,_0xcf5d0a){const _0x2bd248=a106_0x3eeb5c;this[_0x2bd248(0x129)]=_0x47a034,this['salesforceService']=_0x2fadc5,this[_0x2bd248(0x142)]=_0xcf5d0a;}async[a106_0x3eeb5c(0x15c)](){const _0x415432=a106_0x3eeb5c;let _0x3fa719=await this['repository'][_0x415432(0x14e)][_0x415432(0x130)](this[_0x415432(0x16c)]['branchName'])['catch'](()=>null);!_0x3fa719&&(_0x3fa719=await this[_0x415432(0x173)]['branches']['create']({'name':this['syncData']['branchName']})),this[_0x415432(0x175)]=_0x3fa719;}async[a106_0x3eeb5c(0x176)](){const _0x29536b=a106_0x3eeb5c;return this[_0x29536b(0x16c)][_0x29536b(0x158)]?this['salesforceSync'][_0x29536b(0x152)](this[_0x29536b(0x16c)][_0x29536b(0x158)]):this[_0x29536b(0x129)][_0x29536b(0x126)](this[_0x29536b(0x16c)]['branchId']);}async[a106_0x3eeb5c(0x165)](){const _0x300f90=a106_0x3eeb5c,_0x568c53=await this[_0x300f90(0x176)](),_0x4cb9f7=new salesforce_retriever_service_1[(_0x300f90(0x153))](this['salesforceService']),_0x53f3ed=await _0x4cb9f7['run'](_0x568c53);return _0x53f3ed;}async[a106_0x3eeb5c(0x145)](_0xff391){const _0x2a683c=a106_0x3eeb5c,_0x52febc=new commit_components_dto_1['CommitComponentsDto']();return _0x52febc[_0x2a683c(0x154)]='Sync\x20repository',_0x52febc['user']={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x2a683c(0x167)]},_0x52febc[_0x2a683c(0x15b)]={'writed':await this[_0x2a683c(0x165)]()},_0x52febc['convertToSFDX']=_0xff391,_0x52febc[_0x2a683c(0x143)]=this[_0x2a683c(0x173)],_0x52febc['branch']=this[_0x2a683c(0x175)],_0x52febc[_0x2a683c(0x162)]=!![],_0x52febc[_0x2a683c(0x14c)]=this[_0x2a683c(0x14c)],_0x52febc;}async[a106_0x3eeb5c(0x156)](){const _0x248b08=a106_0x3eeb5c,_0x3120a6=await this[_0x248b08(0x129)][_0x248b08(0x137)](this[_0x248b08(0x16c)]),_0x385602=await this[_0x248b08(0x169)][_0x248b08(0x136)](_0x3120a6)[_0x248b08(0x149)](_0x13be79=>typeof _0x13be79==='string'?JSON['parse'](_0x13be79):_0x13be79)['catch'](()=>({}));if(_0x385602[this['repository'][_0x248b08(0x159)]]){if(_0x385602[this[_0x248b08(0x173)][_0x248b08(0x159)]]['lastCommit']===this[_0x248b08(0x175)]['sha'])return!![];}return![];}async[a106_0x3eeb5c(0x174)](){const _0x31f34c=a106_0x3eeb5c,_0x27b8b5=await this[_0x31f34c(0x173)][_0x31f34c(0x14e)][_0x31f34c(0x130)](this[_0x31f34c(0x175)][_0x31f34c(0x13b)]);await this[_0x31f34c(0x171)][_0x31f34c(0x13a)](this['prefix']+_0x31f34c(0x13f));const _0x345896={[this[_0x31f34c(0x173)]['gitUrl']]:{'lastCommit':_0x27b8b5[_0x31f34c(0x163)]}};await this[_0x31f34c(0x129)][_0x31f34c(0x128)](this['syncData'],_0x345896);}async[a106_0x3eeb5c(0x146)]({syncRecord:_0x4b033f,repository:_0x4ddb8a,convertToSFDX:_0x25d84e,provider:_0x354031}){const _0x5ee7c8=a106_0x3eeb5c;this[_0x5ee7c8(0x16c)]=_0x4b033f,this['provider']=_0x354031,this[_0x5ee7c8(0x173)]=_0x4ddb8a,this[_0x5ee7c8(0x171)]=typedi_1[_0x5ee7c8(0x170)][_0x5ee7c8(0x16f)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x5ee7c8(0x164)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x5ee7c8(0x16c)][_0x5ee7c8(0x16e)]+_0x5ee7c8(0x132)+this[_0x5ee7c8(0x16c)]['branchName']+']';try{await this[_0x5ee7c8(0x171)]['log'](this['prefix']+_0x5ee7c8(0x139))[_0x5ee7c8(0x144)](),await this[_0x5ee7c8(0x129)][_0x5ee7c8(0x12f)](this[_0x5ee7c8(0x16c)],_0x5ee7c8(0x161)),this[_0x5ee7c8(0x171)]['log'](this[_0x5ee7c8(0x164)]+_0x5ee7c8(0x138)),await this['createBranchIfNotExists'](),await this[_0x5ee7c8(0x171)][_0x5ee7c8(0x13a)](this[_0x5ee7c8(0x164)]+_0x5ee7c8(0x14f))[_0x5ee7c8(0x144)]();const _0x28a30e=await this[_0x5ee7c8(0x156)]();this[_0x5ee7c8(0x171)][_0x5ee7c8(0x13a)](this['prefix']+'\x20Sync\x20status\x20'+_0x28a30e+'.');if(_0x28a30e){await this['salesforceSync'][_0x5ee7c8(0x12f)](this['syncData'],_0x5ee7c8(0x15f)),await this[_0x5ee7c8(0x171)][_0x5ee7c8(0x13a)](this[_0x5ee7c8(0x164)]+_0x5ee7c8(0x166))[_0x5ee7c8(0x144)]();return;}const _0x49794a=await this['getCommitDto'](_0x25d84e);await this['commitJob'][_0x5ee7c8(0x146)](_0x49794a,this[_0x5ee7c8(0x164)]),await this[_0x5ee7c8(0x129)]['setStatus'](this[_0x5ee7c8(0x16c)],_0x5ee7c8(0x15f)),await this[_0x5ee7c8(0x174)](),this[_0x5ee7c8(0x171)]['log'](this[_0x5ee7c8(0x164)]+_0x5ee7c8(0x15e));}catch(_0xf8f91f){throw _0xf8f91f;}finally{await this['sfLogger'][_0x5ee7c8(0x144)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a106_0x3eeb5c(0x135),[salesforce_sync_service_1[a106_0x3eeb5c(0x131)],salesforce_service_1[a106_0x3eeb5c(0x13d)],commit_components_job_1[a106_0x3eeb5c(0x14b)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;