function a106_0x5ef2(){const _0x461014=['components','toString','\x20Update\x20remote\x20state.','673866mKbvnn','Service','branches','commitJob','2084634ZppWOE','Completed','Container','updateLastCommit','branch','search','retrieveAttachment','../../../../constants','string','syncData','run','\x20Flosum\x20sync\x20job\x20done.','SalesforceSyncService','constructor','../../salesforce/services/salesforce-logger-v3.service','length','DEFAULT_GIT_USER_NAME','object','updateRemoteState','\x20Start\x20Flosum\x20sync\x20job','checkSyncStatus','SalesforceService','defineProperty','force','(((.+)+)+)+$','getOwnPropertyDescriptor','16EzZqRV','provider','setStatus','getOne','decorate','repository','726500cfhMez','\x20Checking\x20sync\x20status.','function','sha','catch','../dto/commit-components.dto','../../salesforce/services/salesforce.service','createBranchIfNotExists','get','branchId','send','parse','\x20Sync\x20status\x20','DEFAULT_GIT_USER_EMAIL','repositoryId','sfLogger','salesforceSync','31282fiIFHs','getComponentsFromRepository','436714XzmHmq','__esModule','salesforceService','In\x20Progress','__decorate','getComponentIds','prefix','user','CommitComponentsDto','gitUrl','4344szFSlm','design:paramtypes','repo','291466NcMksj','getComponents','branchName','__metadata','metadata','log','../../salesforce/services/salesforce-sync.service','FlosumSyncJob','name','285RWQycU','apply'];a106_0x5ef2=function(){return _0x461014;};return a106_0x5ef2();}const a106_0x57103d=a106_0x4239;(function(_0x25ad47,_0x6ef09){const _0x8a6525=a106_0x4239,_0x83d8c8=_0x25ad47();while(!![]){try{const _0x2de48e=parseInt(_0x8a6525(0xb7))/0x1+-parseInt(_0x8a6525(0xb9))/0x2+-parseInt(_0x8a6525(0x82))/0x3+parseInt(_0x8a6525(0xa6))/0x4+-parseInt(_0x8a6525(0x7d))/0x5*(-parseInt(_0x8a6525(0xc3))/0x6)+-parseInt(_0x8a6525(0x74))/0x7*(-parseInt(_0x8a6525(0xa0))/0x8)+parseInt(_0x8a6525(0x86))/0x9;if(_0x2de48e===_0x6ef09)break;else _0x83d8c8['push'](_0x83d8c8['shift']());}catch(_0x41f31b){_0x83d8c8['push'](_0x83d8c8['shift']());}}}(a106_0x5ef2,0x1ec92));const a106_0x157420=(function(){let _0x26216e=!![];return function(_0x47ef2e,_0x3ed39a){const _0x443a17=_0x26216e?function(){const _0x42c551=a106_0x4239;if(_0x3ed39a){const _0x4c912c=_0x3ed39a[_0x42c551(0x7e)](_0x47ef2e,arguments);return _0x3ed39a=null,_0x4c912c;}}:function(){};return _0x26216e=![],_0x443a17;};}()),a106_0x456675=a106_0x157420(this,function(){const _0x13acc6=a106_0x4239;return a106_0x456675[_0x13acc6(0x80)]()[_0x13acc6(0x8b)](_0x13acc6(0x9e))['toString']()[_0x13acc6(0x93)](a106_0x456675)[_0x13acc6(0x8b)]('(((.+)+)+)+$');});a106_0x456675();'use strict';var __decorate=this&&this[a106_0x57103d(0xbd)]||function(_0x3865e9,_0x14c026,_0x307ea8,_0x376e70){const _0x30e724=a106_0x57103d;var _0x2c9447=arguments[_0x30e724(0x95)],_0x3642e5=_0x2c9447<0x3?_0x14c026:_0x376e70===null?_0x376e70=Object[_0x30e724(0x9f)](_0x14c026,_0x307ea8):_0x376e70,_0x36dd8a;if(typeof Reflect===_0x30e724(0x97)&&typeof Reflect[_0x30e724(0xa4)]===_0x30e724(0xa8))_0x3642e5=Reflect[_0x30e724(0xa4)](_0x3865e9,_0x14c026,_0x307ea8,_0x376e70);else{for(var _0x2d5962=_0x3865e9['length']-0x1;_0x2d5962>=0x0;_0x2d5962--)if(_0x36dd8a=_0x3865e9[_0x2d5962])_0x3642e5=(_0x2c9447<0x3?_0x36dd8a(_0x3642e5):_0x2c9447>0x3?_0x36dd8a(_0x14c026,_0x307ea8,_0x3642e5):_0x36dd8a(_0x14c026,_0x307ea8))||_0x3642e5;}return _0x2c9447>0x3&&_0x3642e5&&Object[_0x30e724(0x9c)](_0x14c026,_0x307ea8,_0x3642e5),_0x3642e5;},__metadata=this&&this[a106_0x57103d(0x77)]||function(_0x21b8f2,_0x387d2b){const _0xb417d8=a106_0x57103d;if(typeof Reflect===_0xb417d8(0x97)&&typeof Reflect[_0xb417d8(0x78)]===_0xb417d8(0xa8))return Reflect[_0xb417d8(0x78)](_0x21b8f2,_0x387d2b);};Object[a106_0x57103d(0x9c)](exports,a106_0x57103d(0xba),{'value':!![]}),exports[a106_0x57103d(0x7b)]=void 0x0;function a106_0x4239(_0x520d43,_0x3db157){const _0x450466=a106_0x5ef2();return a106_0x4239=function(_0x456675,_0x157420){_0x456675=_0x456675-0x73;let _0x5ef275=_0x450466[_0x456675];return _0x5ef275;},a106_0x4239(_0x520d43,_0x3db157);}const salesforce_logger_v3_service_1=require(a106_0x57103d(0x94)),typedi_1=require('typedi'),constants_1=require(a106_0x57103d(0x8d)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a106_0x57103d(0x7a)),salesforce_service_1=require(a106_0x57103d(0xac)),commit_components_dto_1=require(a106_0x57103d(0xab)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x50e21e,_0x1fe58f,_0x3b035a){const _0x29a95e=a106_0x57103d;this[_0x29a95e(0xb6)]=_0x50e21e,this[_0x29a95e(0xbb)]=_0x1fe58f,this[_0x29a95e(0x85)]=_0x3b035a;}async['createBranchIfNotExists'](){const _0xd14aa2=a106_0x57103d;let _0xc9f4f=await this[_0xd14aa2(0xa5)]['branches'][_0xd14aa2(0xa3)](this[_0xd14aa2(0x8f)]['branchName'])[_0xd14aa2(0xaa)](()=>null);!_0xc9f4f&&(_0xc9f4f=await this[_0xd14aa2(0xa5)]['branches']['create']({'name':this[_0xd14aa2(0x8f)]['branchName']})),this['branch']=_0xc9f4f;}async[a106_0x57103d(0xbe)](){const _0x3af987=a106_0x57103d;return this[_0x3af987(0x8f)][_0x3af987(0xb4)]?this[_0x3af987(0xb6)][_0x3af987(0xb8)](this[_0x3af987(0x8f)]['repositoryId']):this[_0x3af987(0xb6)]['getBranchComponents'](this[_0x3af987(0x8f)][_0x3af987(0xaf)]);}async['getComponents'](){const _0x548cd4=a106_0x57103d,_0x187d3a=await this[_0x548cd4(0xbe)](),_0x5a912f=new salesforce_retriever_service_1['SalesforceRetrieverService'](this['salesforceService']),_0x32051f=await _0x5a912f[_0x548cd4(0x90)](_0x187d3a);return _0x32051f;}async['getCommitDto'](_0xf3ef8f){const _0x787484=a106_0x57103d,_0x3c86c9=new commit_components_dto_1[(_0x787484(0xc1))]();return _0x3c86c9['message']='Sync\x20repository',_0x3c86c9[_0x787484(0xc0)]={'name':constants_1[_0x787484(0x96)],'email':constants_1[_0x787484(0xb3)]},_0x3c86c9[_0x787484(0x7f)]={'writed':await this[_0x787484(0x75)]()},_0x3c86c9['convertToSFDX']=_0xf3ef8f,_0x3c86c9[_0x787484(0x73)]=this[_0x787484(0xa5)],_0x3c86c9[_0x787484(0x8a)]=this[_0x787484(0x8a)],_0x3c86c9[_0x787484(0x9d)]=!![],_0x3c86c9[_0x787484(0xa1)]=this[_0x787484(0xa1)],_0x3c86c9;}async[a106_0x57103d(0x9a)](){const _0x176cd3=a106_0x57103d,_0x3f3b13=await this['salesforceSync']['getRemoteStateAttachmentId'](this['syncData']),_0x571095=await this[_0x176cd3(0xbb)][_0x176cd3(0x8c)](_0x3f3b13)['then'](_0x1932e5=>typeof _0x1932e5===_0x176cd3(0x8e)?JSON[_0x176cd3(0xb1)](_0x1932e5):_0x1932e5)['catch'](()=>({}));if(_0x571095[this['repository'][_0x176cd3(0xc2)]]){if(_0x571095[this[_0x176cd3(0xa5)][_0x176cd3(0xc2)]]['lastCommit']===this['branch'][_0x176cd3(0xa9)])return!![];}return![];}async[a106_0x57103d(0x89)](){const _0x5a213f=a106_0x57103d,_0x42ea7a=await this[_0x5a213f(0xa5)][_0x5a213f(0x84)]['getOne'](this[_0x5a213f(0x8a)][_0x5a213f(0x7c)]);await this['sfLogger']['log'](this[_0x5a213f(0xbf)]+_0x5a213f(0x81));const _0x3393b4={[this['repository'][_0x5a213f(0xc2)]]:{'lastCommit':_0x42ea7a[_0x5a213f(0xa9)]}};await this['salesforceSync'][_0x5a213f(0x98)](this[_0x5a213f(0x8f)],_0x3393b4);}async[a106_0x57103d(0x90)]({syncRecord:_0x1057f8,repository:_0x195ce1,convertToSFDX:_0x20b63e,provider:_0xeeaf14}){const _0x21eacd=a106_0x57103d;this[_0x21eacd(0x8f)]=_0x1057f8,this[_0x21eacd(0xa1)]=_0xeeaf14,this[_0x21eacd(0xa5)]=_0x195ce1,this[_0x21eacd(0xb5)]=typedi_1[_0x21eacd(0x88)][_0x21eacd(0xae)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x21eacd(0xbf)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this['syncData']['repositoryName']+']\x20[Branch:\x20'+this[_0x21eacd(0x8f)][_0x21eacd(0x76)]+']';try{await this[_0x21eacd(0xb5)]['log'](this[_0x21eacd(0xbf)]+_0x21eacd(0x99))[_0x21eacd(0xb0)](),await this[_0x21eacd(0xb6)][_0x21eacd(0xa2)](this[_0x21eacd(0x8f)],_0x21eacd(0xbc)),this[_0x21eacd(0xb5)][_0x21eacd(0x79)](this[_0x21eacd(0xbf)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x21eacd(0xad)](),await this[_0x21eacd(0xb5)][_0x21eacd(0x79)](this[_0x21eacd(0xbf)]+_0x21eacd(0xa7))[_0x21eacd(0xb0)]();const _0x2f8c2f=await this[_0x21eacd(0x9a)]();this[_0x21eacd(0xb5)]['log'](this['prefix']+_0x21eacd(0xb2)+_0x2f8c2f+'.');if(_0x2f8c2f){await this['salesforceSync'][_0x21eacd(0xa2)](this[_0x21eacd(0x8f)],_0x21eacd(0x87)),await this[_0x21eacd(0xb5)][_0x21eacd(0x79)](this[_0x21eacd(0xbf)]+'\x20Branch\x20synchronized.\x20Skip')[_0x21eacd(0xb0)]();return;}const _0x4ff749=await this['getCommitDto'](_0x20b63e);await this[_0x21eacd(0x85)][_0x21eacd(0x90)](_0x4ff749,this[_0x21eacd(0xbf)]),await this[_0x21eacd(0xb6)][_0x21eacd(0xa2)](this[_0x21eacd(0x8f)],_0x21eacd(0x87)),await this[_0x21eacd(0x89)](),this['sfLogger'][_0x21eacd(0x79)](this[_0x21eacd(0xbf)]+_0x21eacd(0x91));}catch(_0x2d434c){throw _0x2d434c;}finally{await this[_0x21eacd(0xb5)]['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x57103d(0x83)])({'transient':!![]}),__metadata(a106_0x57103d(0xc4),[salesforce_sync_service_1[a106_0x57103d(0x92)],salesforce_service_1[a106_0x57103d(0x9b)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a106_0x57103d(0x7b)]=FlosumSyncJob;