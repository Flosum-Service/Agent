const a124_0x183d20=a124_0x2139;(function(_0x375a98,_0x5d5e53){const _0x2e92e0=a124_0x2139,_0x9c359f=_0x375a98();while(!![]){try{const _0x25f17e=parseInt(_0x2e92e0(0x171))/0x1+-parseInt(_0x2e92e0(0x176))/0x2+parseInt(_0x2e92e0(0x198))/0x3*(parseInt(_0x2e92e0(0x19b))/0x4)+-parseInt(_0x2e92e0(0x189))/0x5*(-parseInt(_0x2e92e0(0x183))/0x6)+-parseInt(_0x2e92e0(0x1b2))/0x7+parseInt(_0x2e92e0(0x17d))/0x8*(-parseInt(_0x2e92e0(0x19c))/0x9)+parseInt(_0x2e92e0(0x1ae))/0xa*(parseInt(_0x2e92e0(0x1ac))/0xb);if(_0x25f17e===_0x5d5e53)break;else _0x9c359f['push'](_0x9c359f['shift']());}catch(_0x23aa51){_0x9c359f['push'](_0x9c359f['shift']());}}}(a124_0x3db2,0x7e10d));function a124_0x3db2(){const _0x12aa29=['\x20Checking\x20repository\x20on\x20Flosum\x20side.',']\x20[Branch:\x20','updateRemoteState','components','branchId','../../salesforce/services/salesforce-sync.service','getComponents','design:paramtypes','gitUrl','search','Completed','../../../../constants','345402PCImXw','get','apply','decorate','metadata','817334LENjXf','SalesforceLogger3','SalesforceService','(((.+)+)+)+$','__metadata','create','message','16RuyUMU','run','salesforceService','function','branches','../../salesforce/services/salesforce.service','603894mHaTGt','checkSyncStatus','provider','sha','\x20Start\x20Flosum\x20sync\x20job','send','35AJLuwl','catch','setStatus','../../salesforce/services/salesforce-logger-v3.service','constructor','__esModule','syncData','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','parse','repositoryId','getOne','\x20Checking\x20sync\x20status.','toString','Sync\x20repository','retrieveAttachment','1827903BQlOcn','defineProperty','branch','4HMaRKH','2572227waHizn','user','salesforceSync','repositoryName','../../salesforce/services/salesforce-retriever.service','force','CommitComponentsJob','typedi','../dto/commit-components.dto','commitJob','\x20Sync\x20status\x20','./commit-components.job','FlosumSyncJob','updateLastCommit','recordTypeName','branchName','11uWLGGR','length','5096060MBMlJQ','repo','getComponentIds','repository','4705498ksRpwv','log','convertToSFDX','createBranchIfNotExists','then','sfLogger','Container','getCommitDto','prefix','lastCommit','string','object','DEFAULT_GIT_USER_EMAIL'];a124_0x3db2=function(){return _0x12aa29;};return a124_0x3db2();}const a124_0x459ab9=(function(){let _0x4a89d8=!![];return function(_0x20e3df,_0x496e0b){const _0x4b69d4=_0x4a89d8?function(){const _0x98a87e=a124_0x2139;if(_0x496e0b){const _0x354964=_0x496e0b[_0x98a87e(0x173)](_0x20e3df,arguments);return _0x496e0b=null,_0x354964;}}:function(){};return _0x4a89d8=![],_0x4b69d4;};}()),a124_0x33abdf=a124_0x459ab9(this,function(){const _0x169212=a124_0x2139;return a124_0x33abdf[_0x169212(0x195)]()[_0x169212(0x16e)](_0x169212(0x179))[_0x169212(0x195)]()[_0x169212(0x18d)](a124_0x33abdf)[_0x169212(0x16e)]('(((.+)+)+)+$');});a124_0x33abdf();'use strict';var __decorate=this&&this['__decorate']||function(_0x168fc9,_0x5056f8,_0x366fd6,_0x202c13){const _0x4b9789=a124_0x2139;var _0x57b32c=arguments['length'],_0x415a45=_0x57b32c<0x3?_0x5056f8:_0x202c13===null?_0x202c13=Object['getOwnPropertyDescriptor'](_0x5056f8,_0x366fd6):_0x202c13,_0x1eb680;if(typeof Reflect===_0x4b9789(0x163)&&typeof Reflect[_0x4b9789(0x174)]===_0x4b9789(0x180))_0x415a45=Reflect['decorate'](_0x168fc9,_0x5056f8,_0x366fd6,_0x202c13);else{for(var _0xa08b61=_0x168fc9[_0x4b9789(0x1ad)]-0x1;_0xa08b61>=0x0;_0xa08b61--)if(_0x1eb680=_0x168fc9[_0xa08b61])_0x415a45=(_0x57b32c<0x3?_0x1eb680(_0x415a45):_0x57b32c>0x3?_0x1eb680(_0x5056f8,_0x366fd6,_0x415a45):_0x1eb680(_0x5056f8,_0x366fd6))||_0x415a45;}return _0x57b32c>0x3&&_0x415a45&&Object['defineProperty'](_0x5056f8,_0x366fd6,_0x415a45),_0x415a45;},__metadata=this&&this[a124_0x183d20(0x17a)]||function(_0x4372e0,_0x197630){const _0x450763=a124_0x183d20;if(typeof Reflect===_0x450763(0x163)&&typeof Reflect[_0x450763(0x175)]==='function')return Reflect[_0x450763(0x175)](_0x4372e0,_0x197630);};Object[a124_0x183d20(0x199)](exports,a124_0x183d20(0x18e),{'value':!![]}),exports[a124_0x183d20(0x1a8)]=void 0x0;function a124_0x2139(_0x12cda4,_0xa5edcb){const _0x341a54=a124_0x3db2();return a124_0x2139=function(_0x33abdf,_0x459ab9){_0x33abdf=_0x33abdf-0x159;let _0x3db200=_0x341a54[_0x33abdf];return _0x3db200;},a124_0x2139(_0x12cda4,_0xa5edcb);}const salesforce_logger_v3_service_1=require(a124_0x183d20(0x18c)),typedi_1=require(a124_0x183d20(0x1a3)),constants_1=require(a124_0x183d20(0x170)),salesforce_retriever_service_1=require(a124_0x183d20(0x1a0)),salesforce_sync_service_1=require(a124_0x183d20(0x16a)),salesforce_service_1=require(a124_0x183d20(0x182)),commit_components_dto_1=require(a124_0x183d20(0x1a4)),commit_components_job_1=require(a124_0x183d20(0x1a7));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1b006c,_0x5a5923,_0x35450d){const _0x848eb7=a124_0x183d20;this[_0x848eb7(0x19e)]=_0x1b006c,this['salesforceService']=_0x5a5923,this[_0x848eb7(0x1a5)]=_0x35450d;}async['createBranchIfNotExists'](){const _0xdb4b19=a124_0x183d20;let _0x114f38=await this[_0xdb4b19(0x1b1)][_0xdb4b19(0x181)][_0xdb4b19(0x193)](this[_0xdb4b19(0x18f)][_0xdb4b19(0x1ab)])[_0xdb4b19(0x18a)](()=>null);!_0x114f38&&(_0x114f38=await this[_0xdb4b19(0x1b1)]['branches'][_0xdb4b19(0x17b)]({'name':this['syncData'][_0xdb4b19(0x1ab)]})),this['branch']=_0x114f38;}async[a124_0x183d20(0x1b0)](){const _0x173271=a124_0x183d20;return this[_0x173271(0x18f)][_0x173271(0x192)]?this['salesforceSync']['getComponentsFromRepository'](this[_0x173271(0x18f)]['repositoryId']):this['salesforceSync']['getBranchComponents'](this[_0x173271(0x18f)][_0x173271(0x169)]);}async[a124_0x183d20(0x16b)](){const _0x190cf1=a124_0x183d20,_0x48f23f=await this[_0x190cf1(0x1b0)](),_0x1d454c=new salesforce_retriever_service_1['SalesforceRetrieverService'](this['salesforceService']),_0x450a5e=await _0x1d454c[_0x190cf1(0x17e)](_0x48f23f);return _0x450a5e;}async[a124_0x183d20(0x15f)](_0x335807){const _0x5a2a12=a124_0x183d20,_0x24440e=new commit_components_dto_1['CommitComponentsDto']();return _0x24440e[_0x5a2a12(0x17c)]=_0x5a2a12(0x196),_0x24440e[_0x5a2a12(0x19d)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x5a2a12(0x164)]},_0x24440e[_0x5a2a12(0x168)]={'writed':await this[_0x5a2a12(0x16b)]()},_0x24440e[_0x5a2a12(0x15a)]=_0x335807,_0x24440e[_0x5a2a12(0x1af)]=this['repository'],_0x24440e['branch']=this[_0x5a2a12(0x19a)],_0x24440e[_0x5a2a12(0x1a1)]=!![],_0x24440e[_0x5a2a12(0x185)]=this['provider'],_0x24440e['recordType']=this[_0x5a2a12(0x18f)][_0x5a2a12(0x1aa)],_0x24440e;}async[a124_0x183d20(0x184)](){const _0x3c0ccf=a124_0x183d20,_0x41f40d=await this['salesforceSync']['getRemoteStateAttachmentId'](this['syncData']),_0x3a57b2=await this[_0x3c0ccf(0x17f)][_0x3c0ccf(0x197)](_0x41f40d)[_0x3c0ccf(0x15c)](_0x22bd01=>typeof _0x22bd01===_0x3c0ccf(0x162)?JSON[_0x3c0ccf(0x191)](_0x22bd01):_0x22bd01)[_0x3c0ccf(0x18a)](()=>({}));if(_0x3a57b2[this[_0x3c0ccf(0x1b1)]['gitUrl']]){if(_0x3a57b2[this['repository'][_0x3c0ccf(0x16d)]][_0x3c0ccf(0x161)]===this[_0x3c0ccf(0x19a)][_0x3c0ccf(0x186)])return!![];}return![];}async[a124_0x183d20(0x1a9)](){const _0x435bb7=a124_0x183d20,_0x578b4c=await this[_0x435bb7(0x1b1)][_0x435bb7(0x181)][_0x435bb7(0x193)](this[_0x435bb7(0x19a)]['name']);await this[_0x435bb7(0x15d)][_0x435bb7(0x159)](this[_0x435bb7(0x160)]+'\x20Update\x20remote\x20state.');const _0x2e07d5={[this[_0x435bb7(0x1b1)][_0x435bb7(0x16d)]]:{'lastCommit':_0x578b4c[_0x435bb7(0x186)]}};await this['salesforceSync'][_0x435bb7(0x167)](this[_0x435bb7(0x18f)],_0x2e07d5);}async['run']({syncRecord:_0x41a9e1,repository:_0x13f030,convertToSFDX:_0x3f6132,provider:_0x3190ff}){const _0x14a8d8=a124_0x183d20;this[_0x14a8d8(0x18f)]=_0x41a9e1,this['provider']=_0x3190ff,this[_0x14a8d8(0x1b1)]=_0x13f030,this[_0x14a8d8(0x15d)]=typedi_1[_0x14a8d8(0x15e)][_0x14a8d8(0x172)](salesforce_logger_v3_service_1[_0x14a8d8(0x177)]),this['prefix']=_0x14a8d8(0x190)+this['syncData'][_0x14a8d8(0x19f)]+_0x14a8d8(0x166)+this[_0x14a8d8(0x18f)]['branchName']+']';try{await this[_0x14a8d8(0x15d)][_0x14a8d8(0x159)](this['prefix']+_0x14a8d8(0x187))[_0x14a8d8(0x188)](),await this[_0x14a8d8(0x19e)][_0x14a8d8(0x18b)](this[_0x14a8d8(0x18f)],'In\x20Progress'),this[_0x14a8d8(0x15d)][_0x14a8d8(0x159)](this['prefix']+_0x14a8d8(0x165)),await this[_0x14a8d8(0x15b)](),await this[_0x14a8d8(0x15d)][_0x14a8d8(0x159)](this[_0x14a8d8(0x160)]+_0x14a8d8(0x194))[_0x14a8d8(0x188)]();const _0x57fce5=await this[_0x14a8d8(0x184)]();this[_0x14a8d8(0x15d)]['log'](this[_0x14a8d8(0x160)]+_0x14a8d8(0x1a6)+_0x57fce5+'.');if(_0x57fce5){await this['salesforceSync'][_0x14a8d8(0x18b)](this[_0x14a8d8(0x18f)],_0x14a8d8(0x16f)),await this['sfLogger'][_0x14a8d8(0x159)](this[_0x14a8d8(0x160)]+'\x20Branch\x20synchronized.\x20Skip')[_0x14a8d8(0x188)]();return;}const _0x32b53d=await this[_0x14a8d8(0x15f)](_0x3f6132);await this[_0x14a8d8(0x1a5)][_0x14a8d8(0x17e)](_0x32b53d,this['prefix']),await this[_0x14a8d8(0x19e)]['setStatus'](this['syncData'],'Completed'),await this[_0x14a8d8(0x1a9)](),this['sfLogger']['log'](this[_0x14a8d8(0x160)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x1ed882){throw _0x1ed882;}finally{await this[_0x14a8d8(0x15d)][_0x14a8d8(0x188)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a124_0x183d20(0x16c),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a124_0x183d20(0x178)],commit_components_job_1[a124_0x183d20(0x1a2)]])],FlosumSyncJob),exports[a124_0x183d20(0x1a8)]=FlosumSyncJob;