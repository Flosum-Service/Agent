const a105_0x3e82de=a105_0x26aa;(function(_0x2a7ee2,_0x297fca){const _0x1edc87=a105_0x26aa,_0xab61d=_0x2a7ee2();while(!![]){try{const _0x423bcd=-parseInt(_0x1edc87(0x98))/0x1*(-parseInt(_0x1edc87(0x7a))/0x2)+-parseInt(_0x1edc87(0xc7))/0x3*(parseInt(_0x1edc87(0xa1))/0x4)+-parseInt(_0x1edc87(0xb5))/0x5+parseInt(_0x1edc87(0xcc))/0x6*(-parseInt(_0x1edc87(0x96))/0x7)+parseInt(_0x1edc87(0xa5))/0x8+parseInt(_0x1edc87(0xab))/0x9*(-parseInt(_0x1edc87(0x7f))/0xa)+parseInt(_0x1edc87(0x8d))/0xb;if(_0x423bcd===_0x297fca)break;else _0xab61d['push'](_0xab61d['shift']());}catch(_0x461c38){_0xab61d['push'](_0xab61d['shift']());}}}(a105_0x7b88,0xc4918));const a105_0x10691c=(function(){let _0x21ab53=!![];return function(_0x4da24b,_0xe81881){const _0x5553ec=_0x21ab53?function(){if(_0xe81881){const _0x3318ab=_0xe81881['apply'](_0x4da24b,arguments);return _0xe81881=null,_0x3318ab;}}:function(){};return _0x21ab53=![],_0x5553ec;};}()),a105_0x10601b=a105_0x10691c(this,function(){const _0x464a14=a105_0x26aa;return a105_0x10601b[_0x464a14(0x8c)]()['search'](_0x464a14(0x9f))[_0x464a14(0x8c)]()['constructor'](a105_0x10601b)[_0x464a14(0xc9)](_0x464a14(0x9f));});a105_0x10601b();function a105_0x26aa(_0x5ecece,_0x218e02){const _0x5c5e81=a105_0x7b88();return a105_0x26aa=function(_0x10601b,_0x10691c){_0x10601b=_0x10601b-0x79;let _0x7b88a6=_0x5c5e81[_0x10601b];return _0x7b88a6;},a105_0x26aa(_0x5ecece,_0x218e02);}'use strict';function a105_0x7b88(){const _0x22ba89=['../dto/commit-components.dto','SalesforceRetrieverService','checkSyncStatus','getCommitDto','__metadata','21wSzYvQ','lastCommit','search','CommitComponentsJob','getRemoteStateAttachmentId','76278xFmLRs','length','DEFAULT_GIT_USER_EMAIL','salesforceService','provider','2IYWlZy','sfLogger','force','SalesforceLogger3','retrieveAttachment','1520YlnaAQ','getComponents','message','createBranchIfNotExists','object','components','../../salesforce/services/salesforce-retriever.service','prefix','../../salesforce/services/salesforce-sync.service','repositoryId','getComponentsFromRepository','log','create','toString','35677279QzuCTc',']\x20[Branch:\x20','../../salesforce/services/salesforce-logger-v3.service','syncData','SalesforceService','\x20Start\x20Flosum\x20sync\x20job','gitUrl','send','run','693LGEhCM','commitJob','699991kHvMSL','salesforceSync','../../../../constants','Completed','repository','function','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','(((.+)+)+)+$','design:paramtypes','376028rvuudH','decorate','In\x20Progress','branches','733984vxeoVk','catch','then','FlosumSyncJob','defineProperty','branchName','4068HVjISm','Container','Sync\x20repository','\x20Sync\x20status\x20','sha','repo','./commit-components.job','string','branch','\x20Flosum\x20sync\x20job\x20done.','6223220KWbRPY','\x20Branch\x20synchronized.\x20Skip','getComponentIds','setStatus','name','typedi','getOne','parse','__esModule','user','__decorate','updateRemoteState','SalesforceSyncService'];a105_0x7b88=function(){return _0x22ba89;};return a105_0x7b88();}var __decorate=this&&this[a105_0x3e82de(0xbf)]||function(_0x5490ea,_0x18cf47,_0xd74f77,_0x25e8ea){const _0x4b3456=a105_0x3e82de;var _0x13bd02=arguments[_0x4b3456(0xcd)],_0x29d1a4=_0x13bd02<0x3?_0x18cf47:_0x25e8ea===null?_0x25e8ea=Object['getOwnPropertyDescriptor'](_0x18cf47,_0xd74f77):_0x25e8ea,_0x35e3a1;if(typeof Reflect===_0x4b3456(0x83)&&typeof Reflect[_0x4b3456(0xa2)]===_0x4b3456(0x9d))_0x29d1a4=Reflect['decorate'](_0x5490ea,_0x18cf47,_0xd74f77,_0x25e8ea);else{for(var _0x3a093e=_0x5490ea[_0x4b3456(0xcd)]-0x1;_0x3a093e>=0x0;_0x3a093e--)if(_0x35e3a1=_0x5490ea[_0x3a093e])_0x29d1a4=(_0x13bd02<0x3?_0x35e3a1(_0x29d1a4):_0x13bd02>0x3?_0x35e3a1(_0x18cf47,_0xd74f77,_0x29d1a4):_0x35e3a1(_0x18cf47,_0xd74f77))||_0x29d1a4;}return _0x13bd02>0x3&&_0x29d1a4&&Object[_0x4b3456(0xa9)](_0x18cf47,_0xd74f77,_0x29d1a4),_0x29d1a4;},__metadata=this&&this[a105_0x3e82de(0xc6)]||function(_0x1e11b2,_0xbfaff){const _0x188f2b=a105_0x3e82de;if(typeof Reflect===_0x188f2b(0x83)&&typeof Reflect['metadata']===_0x188f2b(0x9d))return Reflect['metadata'](_0x1e11b2,_0xbfaff);};Object[a105_0x3e82de(0xa9)](exports,a105_0x3e82de(0xbd),{'value':!![]}),exports[a105_0x3e82de(0xa8)]=void 0x0;const salesforce_logger_v3_service_1=require(a105_0x3e82de(0x8f)),typedi_1=require(a105_0x3e82de(0xba)),constants_1=require(a105_0x3e82de(0x9a)),salesforce_retriever_service_1=require(a105_0x3e82de(0x85)),salesforce_sync_service_1=require(a105_0x3e82de(0x87)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a105_0x3e82de(0xc2)),commit_components_job_1=require(a105_0x3e82de(0xb1));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x2834d1,_0x59ef57,_0x5e361f){const _0x350035=a105_0x3e82de;this[_0x350035(0x99)]=_0x2834d1,this[_0x350035(0xcf)]=_0x59ef57,this['commitJob']=_0x5e361f;}async[a105_0x3e82de(0x82)](){const _0x2970c5=a105_0x3e82de;let _0x301663=await this[_0x2970c5(0x9c)][_0x2970c5(0xa4)][_0x2970c5(0xbb)](this[_0x2970c5(0x90)]['branchName'])[_0x2970c5(0xa6)](()=>null);!_0x301663&&(_0x301663=await this[_0x2970c5(0x9c)]['branches'][_0x2970c5(0x8b)]({'name':this['syncData'][_0x2970c5(0xaa)]})),this['branch']=_0x301663;}async[a105_0x3e82de(0xb7)](){const _0x339527=a105_0x3e82de;return this[_0x339527(0x90)][_0x339527(0x88)]?this[_0x339527(0x99)][_0x339527(0x89)](this[_0x339527(0x90)][_0x339527(0x88)]):this['salesforceSync']['getBranchComponents'](this[_0x339527(0x90)]['branchId']);}async[a105_0x3e82de(0x80)](){const _0x1314b2=a105_0x3e82de,_0x3451f1=await this[_0x1314b2(0xb7)](),_0x5d1e9f=new salesforce_retriever_service_1[(_0x1314b2(0xc3))](this['salesforceService']),_0x3d5ae1=await _0x5d1e9f[_0x1314b2(0x95)](_0x3451f1);return _0x3d5ae1;}async[a105_0x3e82de(0xc5)](_0xfd9d5d){const _0x1a1b8b=a105_0x3e82de,_0x5b4599=new commit_components_dto_1['CommitComponentsDto']();return _0x5b4599[_0x1a1b8b(0x81)]=_0x1a1b8b(0xad),_0x5b4599[_0x1a1b8b(0xbe)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x1a1b8b(0xce)]},_0x5b4599[_0x1a1b8b(0x84)]={'writed':await this[_0x1a1b8b(0x80)]()},_0x5b4599['convertToSFDX']=_0xfd9d5d,_0x5b4599[_0x1a1b8b(0xb0)]=this[_0x1a1b8b(0x9c)],_0x5b4599['branch']=this[_0x1a1b8b(0xb3)],_0x5b4599[_0x1a1b8b(0x7c)]=!![],_0x5b4599[_0x1a1b8b(0x79)]=this[_0x1a1b8b(0x79)],_0x5b4599;}async[a105_0x3e82de(0xc4)](){const _0x30ea34=a105_0x3e82de,_0x1fb4f2=await this[_0x30ea34(0x99)][_0x30ea34(0xcb)](this[_0x30ea34(0x90)]),_0x2a725e=await this[_0x30ea34(0xcf)][_0x30ea34(0x7e)](_0x1fb4f2)[_0x30ea34(0xa7)](_0x2dc612=>typeof _0x2dc612===_0x30ea34(0xb2)?JSON[_0x30ea34(0xbc)](_0x2dc612):_0x2dc612)[_0x30ea34(0xa6)](()=>({}));if(_0x2a725e[this[_0x30ea34(0x9c)][_0x30ea34(0x93)]]){if(_0x2a725e[this['repository'][_0x30ea34(0x93)]][_0x30ea34(0xc8)]===this[_0x30ea34(0xb3)][_0x30ea34(0xaf)])return!![];}return![];}async['updateLastCommit'](){const _0x576535=a105_0x3e82de,_0x155a61=await this[_0x576535(0x9c)][_0x576535(0xa4)][_0x576535(0xbb)](this[_0x576535(0xb3)][_0x576535(0xb9)]);await this[_0x576535(0x7b)][_0x576535(0x8a)](this['prefix']+'\x20Update\x20remote\x20state.');const _0x578a0f={[this['repository'][_0x576535(0x93)]]:{'lastCommit':_0x155a61[_0x576535(0xaf)]}};await this[_0x576535(0x99)][_0x576535(0xc0)](this['syncData'],_0x578a0f);}async['run']({syncRecord:_0x456db3,repository:_0x8b526b,convertToSFDX:_0x29f10a,provider:_0x2f9259}){const _0x44ccdc=a105_0x3e82de;this['syncData']=_0x456db3,this[_0x44ccdc(0x79)]=_0x2f9259,this[_0x44ccdc(0x9c)]=_0x8b526b,this[_0x44ccdc(0x7b)]=typedi_1[_0x44ccdc(0xac)]['get'](salesforce_logger_v3_service_1[_0x44ccdc(0x7d)]),this[_0x44ccdc(0x86)]=_0x44ccdc(0x9e)+this[_0x44ccdc(0x90)]['repositoryName']+_0x44ccdc(0x8e)+this[_0x44ccdc(0x90)][_0x44ccdc(0xaa)]+']';try{await this[_0x44ccdc(0x7b)][_0x44ccdc(0x8a)](this['prefix']+_0x44ccdc(0x92))[_0x44ccdc(0x94)](),await this['salesforceSync'][_0x44ccdc(0xb8)](this[_0x44ccdc(0x90)],_0x44ccdc(0xa3)),this[_0x44ccdc(0x7b)][_0x44ccdc(0x8a)](this['prefix']+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x44ccdc(0x82)](),await this[_0x44ccdc(0x7b)]['log'](this[_0x44ccdc(0x86)]+'\x20Checking\x20sync\x20status.')[_0x44ccdc(0x94)]();const _0x448b4b=await this['checkSyncStatus']();this[_0x44ccdc(0x7b)][_0x44ccdc(0x8a)](this[_0x44ccdc(0x86)]+_0x44ccdc(0xae)+_0x448b4b+'.');if(_0x448b4b){await this[_0x44ccdc(0x99)]['setStatus'](this[_0x44ccdc(0x90)],_0x44ccdc(0x9b)),await this[_0x44ccdc(0x7b)][_0x44ccdc(0x8a)](this[_0x44ccdc(0x86)]+_0x44ccdc(0xb6))[_0x44ccdc(0x94)]();return;}const _0x1c425e=await this[_0x44ccdc(0xc5)](_0x29f10a);await this[_0x44ccdc(0x97)][_0x44ccdc(0x95)](_0x1c425e,this[_0x44ccdc(0x86)]),await this['salesforceSync'][_0x44ccdc(0xb8)](this[_0x44ccdc(0x90)],_0x44ccdc(0x9b)),await this['updateLastCommit'](),this[_0x44ccdc(0x7b)]['log'](this[_0x44ccdc(0x86)]+_0x44ccdc(0xb4));}catch(_0x1b9b71){throw _0x1b9b71;}finally{await this[_0x44ccdc(0x7b)][_0x44ccdc(0x94)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a105_0x3e82de(0xa0),[salesforce_sync_service_1[a105_0x3e82de(0xc1)],salesforce_service_1[a105_0x3e82de(0x91)],commit_components_job_1[a105_0x3e82de(0xca)]])],FlosumSyncJob),exports[a105_0x3e82de(0xa8)]=FlosumSyncJob;