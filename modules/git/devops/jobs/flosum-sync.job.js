const a106_0x5f0843=a106_0x4230;(function(_0x9ee4e0,_0x53921c){const _0x58543d=a106_0x4230,_0x2b217b=_0x9ee4e0();while(!![]){try{const _0x58bae9=parseInt(_0x58543d(0x1db))/0x1*(parseInt(_0x58543d(0x1bd))/0x2)+parseInt(_0x58543d(0x1e1))/0x3+parseInt(_0x58543d(0x1a2))/0x4+parseInt(_0x58543d(0x1cc))/0x5*(parseInt(_0x58543d(0x1de))/0x6)+-parseInt(_0x58543d(0x1af))/0x7+-parseInt(_0x58543d(0x19a))/0x8+parseInt(_0x58543d(0x19d))/0x9;if(_0x58bae9===_0x53921c)break;else _0x2b217b['push'](_0x2b217b['shift']());}catch(_0x1dc165){_0x2b217b['push'](_0x2b217b['shift']());}}}(a106_0x5996,0x8a235));function a106_0x5996(){const _0x3f5445=['provider','Container','getComponentIds','name','478446LUcGsX','../dto/commit-components.dto','metadata','design:paramtypes','\x20Start\x20Flosum\x20sync\x20job','branch','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','log','__metadata','\x20Checking\x20repository\x20on\x20Flosum\x20side.','then','(((.+)+)+)+$','__esModule','createBranchIfNotExists','sha','5fyssfL','../../salesforce/services/salesforce-logger-v3.service','sfLogger','repository','getBranchComponents','object','\x20Update\x20remote\x20state.','repositoryId','syncData','getComponentsFromRepository','SalesforceService','toString','salesforceSync','defineProperty','send','3HGaONf','salesforceService','DEFAULT_GIT_USER_NAME','5457444ZWhNFl','run','string','127521XwyOmZ','CommitComponentsJob','catch','Sync\x20repository','gitUrl','create','length','\x20Branch\x20synchronized.\x20Skip','search','updateRemoteState','CommitComponentsDto','getOne','repo','8499200ChLZvK','SalesforceLogger3','SalesforceSyncService','763533SXQQtY','branchId','getOwnPropertyDescriptor','FlosumSyncJob','In\x20Progress','2670836KhCkEQ','../../salesforce/services/salesforce-sync.service','function','decorate','getComponents','SalesforceRetrieverService','\x20Sync\x20status\x20','prefix','setStatus','Completed','get','../../salesforce/services/salesforce-retriever.service','commitJob','5558581vdcgGk','branchName','branches','checkSyncStatus','convertToSFDX',']\x20[Branch:\x20','getCommitDto','DEFAULT_GIT_USER_EMAIL','repositoryName','\x20Flosum\x20sync\x20job\x20done.'];a106_0x5996=function(){return _0x3f5445;};return a106_0x5996();}const a106_0x241fe=(function(){let _0x5b8b5e=!![];return function(_0x2a65f9,_0x2ba5e0){const _0x1efec6=_0x5b8b5e?function(){if(_0x2ba5e0){const _0x12abb9=_0x2ba5e0['apply'](_0x2a65f9,arguments);return _0x2ba5e0=null,_0x12abb9;}}:function(){};return _0x5b8b5e=![],_0x1efec6;};}()),a106_0x3e0b3c=a106_0x241fe(this,function(){const _0x25a816=a106_0x4230;return a106_0x3e0b3c['toString']()['search'](_0x25a816(0x1c8))[_0x25a816(0x1d7)]()['constructor'](a106_0x3e0b3c)[_0x25a816(0x1e9)](_0x25a816(0x1c8));});a106_0x3e0b3c();function a106_0x4230(_0x401c0b,_0x5d849d){const _0xd78723=a106_0x5996();return a106_0x4230=function(_0x3e0b3c,_0x241fe){_0x3e0b3c=_0x3e0b3c-0x196;let _0x5996e2=_0xd78723[_0x3e0b3c];return _0x5996e2;},a106_0x4230(_0x401c0b,_0x5d849d);}'use strict';var __decorate=this&&this['__decorate']||function(_0x2ef97e,_0x465a9f,_0x599bf7,_0x76fd22){const _0x4d96a5=a106_0x4230;var _0x1edc63=arguments[_0x4d96a5(0x1e7)],_0x5e8462=_0x1edc63<0x3?_0x465a9f:_0x76fd22===null?_0x76fd22=Object[_0x4d96a5(0x19f)](_0x465a9f,_0x599bf7):_0x76fd22,_0x4c5c19;if(typeof Reflect===_0x4d96a5(0x1d1)&&typeof Reflect[_0x4d96a5(0x1a5)]==='function')_0x5e8462=Reflect[_0x4d96a5(0x1a5)](_0x2ef97e,_0x465a9f,_0x599bf7,_0x76fd22);else{for(var _0x282485=_0x2ef97e[_0x4d96a5(0x1e7)]-0x1;_0x282485>=0x0;_0x282485--)if(_0x4c5c19=_0x2ef97e[_0x282485])_0x5e8462=(_0x1edc63<0x3?_0x4c5c19(_0x5e8462):_0x1edc63>0x3?_0x4c5c19(_0x465a9f,_0x599bf7,_0x5e8462):_0x4c5c19(_0x465a9f,_0x599bf7))||_0x5e8462;}return _0x1edc63>0x3&&_0x5e8462&&Object[_0x4d96a5(0x1d9)](_0x465a9f,_0x599bf7,_0x5e8462),_0x5e8462;},__metadata=this&&this[a106_0x5f0843(0x1c5)]||function(_0x3b11dc,_0x4166e5){const _0x24518c=a106_0x5f0843;if(typeof Reflect===_0x24518c(0x1d1)&&typeof Reflect[_0x24518c(0x1bf)]===_0x24518c(0x1a4))return Reflect[_0x24518c(0x1bf)](_0x3b11dc,_0x4166e5);};Object[a106_0x5f0843(0x1d9)](exports,a106_0x5f0843(0x1c9),{'value':!![]}),exports[a106_0x5f0843(0x1a0)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x5f0843(0x1cd)),typedi_1=require('typedi'),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a106_0x5f0843(0x1ad)),salesforce_sync_service_1=require(a106_0x5f0843(0x1a3)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a106_0x5f0843(0x1be)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x77954b,_0x2776c5,_0x18f27a){const _0x5a4a7a=a106_0x5f0843;this[_0x5a4a7a(0x1d8)]=_0x77954b,this[_0x5a4a7a(0x1dc)]=_0x2776c5,this[_0x5a4a7a(0x1ae)]=_0x18f27a;}async[a106_0x5f0843(0x1ca)](){const _0x5d52dc=a106_0x5f0843;let _0x262ecf=await this[_0x5d52dc(0x1cf)][_0x5d52dc(0x1b1)][_0x5d52dc(0x198)](this[_0x5d52dc(0x1d4)][_0x5d52dc(0x1b0)])[_0x5d52dc(0x1e3)](()=>null);!_0x262ecf&&(_0x262ecf=await this['repository'][_0x5d52dc(0x1b1)][_0x5d52dc(0x1e6)]({'name':this[_0x5d52dc(0x1d4)]['branchName']})),this[_0x5d52dc(0x1c2)]=_0x262ecf;}async['getComponentIds'](){const _0x3e3487=a106_0x5f0843;return this[_0x3e3487(0x1d4)]['repositoryId']?this['salesforceSync'][_0x3e3487(0x1d5)](this['syncData'][_0x3e3487(0x1d3)]):this['salesforceSync'][_0x3e3487(0x1d0)](this[_0x3e3487(0x1d4)][_0x3e3487(0x19e)]);}async[a106_0x5f0843(0x1a6)](){const _0x567cea=a106_0x5f0843,_0x1cdb26=await this[_0x567cea(0x1bb)](),_0x5efa84=new salesforce_retriever_service_1[(_0x567cea(0x1a7))](this[_0x567cea(0x1dc)]),_0x25b640=await _0x5efa84[_0x567cea(0x1df)](_0x1cdb26);return _0x25b640;}async[a106_0x5f0843(0x1b5)](_0x533e14){const _0x132068=a106_0x5f0843,_0x29726d=new commit_components_dto_1[(_0x132068(0x197))]();return _0x29726d['message']=_0x132068(0x1e4),_0x29726d['user']={'name':constants_1[_0x132068(0x1dd)],'email':constants_1[_0x132068(0x1b6)]},_0x29726d['components']={'writed':await this[_0x132068(0x1a6)]()},_0x29726d[_0x132068(0x1b3)]=_0x533e14,_0x29726d[_0x132068(0x199)]=this['repository'],_0x29726d[_0x132068(0x1c2)]=this['branch'],_0x29726d['force']=!![],_0x29726d[_0x132068(0x1b9)]=this['provider'],_0x29726d;}async[a106_0x5f0843(0x1b2)](){const _0x541c3b=a106_0x5f0843,_0x20da97=await this[_0x541c3b(0x1d8)]['getRemoteStateAttachmentId'](this[_0x541c3b(0x1d4)]),_0x5d2145=await this[_0x541c3b(0x1dc)]['retrieveAttachment'](_0x20da97)[_0x541c3b(0x1c7)](_0x36485a=>typeof _0x36485a===_0x541c3b(0x1e0)?JSON['parse'](_0x36485a):_0x36485a)[_0x541c3b(0x1e3)](()=>({}));if(_0x5d2145[this[_0x541c3b(0x1cf)]['gitUrl']]){if(_0x5d2145[this['repository'][_0x541c3b(0x1e5)]]['lastCommit']===this[_0x541c3b(0x1c2)][_0x541c3b(0x1cb)])return!![];}return![];}async['updateLastCommit'](){const _0x17067b=a106_0x5f0843,_0x228ccc=await this['repository']['branches'][_0x17067b(0x198)](this[_0x17067b(0x1c2)][_0x17067b(0x1bc)]);await this[_0x17067b(0x1ce)][_0x17067b(0x1c4)](this[_0x17067b(0x1a9)]+_0x17067b(0x1d2));const _0x759ce1={[this[_0x17067b(0x1cf)]['gitUrl']]:{'lastCommit':_0x228ccc[_0x17067b(0x1cb)]}};await this['salesforceSync'][_0x17067b(0x196)](this['syncData'],_0x759ce1);}async['run']({syncRecord:_0x39a751,repository:_0x591503,convertToSFDX:_0x343366,provider:_0x2ec9ae}){const _0x2e2bc8=a106_0x5f0843;this[_0x2e2bc8(0x1d4)]=_0x39a751,this[_0x2e2bc8(0x1b9)]=_0x2ec9ae,this[_0x2e2bc8(0x1cf)]=_0x591503,this['sfLogger']=typedi_1[_0x2e2bc8(0x1ba)][_0x2e2bc8(0x1ac)](salesforce_logger_v3_service_1[_0x2e2bc8(0x19b)]),this['prefix']=_0x2e2bc8(0x1c3)+this[_0x2e2bc8(0x1d4)][_0x2e2bc8(0x1b7)]+_0x2e2bc8(0x1b4)+this[_0x2e2bc8(0x1d4)][_0x2e2bc8(0x1b0)]+']';try{await this[_0x2e2bc8(0x1ce)]['log'](this[_0x2e2bc8(0x1a9)]+_0x2e2bc8(0x1c1))[_0x2e2bc8(0x1da)](),await this[_0x2e2bc8(0x1d8)][_0x2e2bc8(0x1aa)](this[_0x2e2bc8(0x1d4)],_0x2e2bc8(0x1a1)),this[_0x2e2bc8(0x1ce)]['log'](this['prefix']+_0x2e2bc8(0x1c6)),await this[_0x2e2bc8(0x1ca)](),await this[_0x2e2bc8(0x1ce)][_0x2e2bc8(0x1c4)](this['prefix']+'\x20Checking\x20sync\x20status.')[_0x2e2bc8(0x1da)]();const _0x20b7d7=await this[_0x2e2bc8(0x1b2)]();this['sfLogger'][_0x2e2bc8(0x1c4)](this['prefix']+_0x2e2bc8(0x1a8)+_0x20b7d7+'.');if(_0x20b7d7){await this['salesforceSync'][_0x2e2bc8(0x1aa)](this[_0x2e2bc8(0x1d4)],_0x2e2bc8(0x1ab)),await this[_0x2e2bc8(0x1ce)][_0x2e2bc8(0x1c4)](this[_0x2e2bc8(0x1a9)]+_0x2e2bc8(0x1e8))[_0x2e2bc8(0x1da)]();return;}const _0x27ee4d=await this[_0x2e2bc8(0x1b5)](_0x343366);await this[_0x2e2bc8(0x1ae)][_0x2e2bc8(0x1df)](_0x27ee4d,this['prefix']),await this[_0x2e2bc8(0x1d8)]['setStatus'](this[_0x2e2bc8(0x1d4)],'Completed'),await this['updateLastCommit'](),this[_0x2e2bc8(0x1ce)]['log'](this[_0x2e2bc8(0x1a9)]+_0x2e2bc8(0x1b8));}catch(_0x33e09d){throw _0x33e09d;}finally{await this[_0x2e2bc8(0x1ce)][_0x2e2bc8(0x1da)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a106_0x5f0843(0x1c0),[salesforce_sync_service_1[a106_0x5f0843(0x19c)],salesforce_service_1[a106_0x5f0843(0x1d6)],commit_components_job_1[a106_0x5f0843(0x1e2)]])],FlosumSyncJob),exports[a106_0x5f0843(0x1a0)]=FlosumSyncJob;