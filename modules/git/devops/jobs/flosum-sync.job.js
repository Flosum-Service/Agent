const a127_0x2099a1=a127_0x22fa;(function(_0x250ca1,_0xc1b7f2){const _0x161793=a127_0x22fa,_0x57ad2a=_0x250ca1();while(!![]){try{const _0x4ae340=-parseInt(_0x161793(0xb0))/0x1+parseInt(_0x161793(0xd6))/0x2+parseInt(_0x161793(0xa4))/0x3+-parseInt(_0x161793(0xa5))/0x4+parseInt(_0x161793(0xad))/0x5+parseInt(_0x161793(0xda))/0x6*(-parseInt(_0x161793(0xa3))/0x7)+parseInt(_0x161793(0xa2))/0x8;if(_0x4ae340===_0xc1b7f2)break;else _0x57ad2a['push'](_0x57ad2a['shift']());}catch(_0xac7d19){_0x57ad2a['push'](_0x57ad2a['shift']());}}}(a127_0x3ab5,0x954f5));const a127_0x1860de=(function(){let _0x2b8a19=!![];return function(_0x254c3f,_0x236c15){const _0x1cbb0d=_0x2b8a19?function(){if(_0x236c15){const _0x23da00=_0x236c15['apply'](_0x254c3f,arguments);return _0x236c15=null,_0x23da00;}}:function(){};return _0x2b8a19=![],_0x1cbb0d;};}()),a127_0x5cce31=a127_0x1860de(this,function(){const _0x1b2651=a127_0x22fa;return a127_0x5cce31[_0x1b2651(0x91)]()[_0x1b2651(0x84)](_0x1b2651(0x8f))[_0x1b2651(0x91)]()[_0x1b2651(0x87)](a127_0x5cce31)[_0x1b2651(0x84)]('(((.+)+)+)+$');});a127_0x5cce31();function a127_0x22fa(_0x61b9ca,_0x588e0e){const _0x3fdd17=a127_0x3ab5();return a127_0x22fa=function(_0x5cce31,_0x1860de){_0x5cce31=_0x5cce31-0x80;let _0x3ab569=_0x3fdd17[_0x5cce31];return _0x3ab569;},a127_0x22fa(_0x61b9ca,_0x588e0e);}'use strict';var __decorate=this&&this[a127_0x2099a1(0xa7)]||function(_0xa67235,_0x4bc0ed,_0x1e7583,_0x276a03){const _0x12c804=a127_0x2099a1;var _0x1ef602=arguments[_0x12c804(0x99)],_0x221847=_0x1ef602<0x3?_0x4bc0ed:_0x276a03===null?_0x276a03=Object[_0x12c804(0xd1)](_0x4bc0ed,_0x1e7583):_0x276a03,_0x7b3602;if(typeof Reflect===_0x12c804(0x8a)&&typeof Reflect[_0x12c804(0xb6)]===_0x12c804(0x82))_0x221847=Reflect[_0x12c804(0xb6)](_0xa67235,_0x4bc0ed,_0x1e7583,_0x276a03);else{for(var _0x501558=_0xa67235['length']-0x1;_0x501558>=0x0;_0x501558--)if(_0x7b3602=_0xa67235[_0x501558])_0x221847=(_0x1ef602<0x3?_0x7b3602(_0x221847):_0x1ef602>0x3?_0x7b3602(_0x4bc0ed,_0x1e7583,_0x221847):_0x7b3602(_0x4bc0ed,_0x1e7583))||_0x221847;}return _0x1ef602>0x3&&_0x221847&&Object[_0x12c804(0x97)](_0x4bc0ed,_0x1e7583,_0x221847),_0x221847;},__metadata=this&&this[a127_0x2099a1(0x8e)]||function(_0x3651f6,_0x1ed19b){const _0x18299d=a127_0x2099a1;if(typeof Reflect===_0x18299d(0x8a)&&typeof Reflect[_0x18299d(0xac)]==='function')return Reflect['metadata'](_0x3651f6,_0x1ed19b);};Object[a127_0x2099a1(0x97)](exports,'__esModule',{'value':!![]}),exports[a127_0x2099a1(0x88)]=void 0x0;const salesforce_logger_v3_service_1=require(a127_0x2099a1(0x9c)),typedi_1=require(a127_0x2099a1(0x98)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a127_0x2099a1(0xc3)),salesforce_sync_service_1=require(a127_0x2099a1(0x8c)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');function a127_0x3ab5(){const _0x5aa040=['1302696DgFCYR','70ilcGmh','2999148sVzUrC','2073684FxPJzD','provider','__decorate','branches','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','updateRemoteState','components','metadata','682550gyCsqQ','getRemoteStateAttachmentId','force','616433pYLyJq','DEFAULT_GIT_USER_EMAIL','getComponentIds','CommitComponentsDto','createBranchIfNotExists','gitUrl','decorate','repo','send','recordTypeName','checkSyncStatus','\x20Start\x20Flosum\x20sync\x20job','user','lastCommit','SalesforceLogger3','\x20(by\x20','repository','parse','DEFAULT_GIT_USER_NAME','../../salesforce/services/salesforce-retriever.service','getOne','log','branchName','get','setStatus','repositoryId','branchDescription','syncData','then','branchId','name','updateLastCommit','In\x20Progress','getOwnPropertyDescriptor','toLocaleString','getBranchComponents','\x20Sync\x20status\x20','getCommitDto','1826648QMApwQ','recordType','branch','userName','279576ylCHVl','getComponentsFromRepository','CommitComponentsJob','createCommitMessage','prefix','SalesforceSyncService','function','sfLogger','search','Service','repositoryName','constructor','FlosumSyncJob','\x20Branch\x20synchronized.\x20Skip','object','userEmail','../../salesforce/services/salesforce-sync.service','commitJob','__metadata','(((.+)+)+)+$','\x20Checking\x20repository\x20on\x20Flosum\x20side.','toString','salesforceService','string','SalesforceService','retrieveAttachment','getComponents','defineProperty','typedi','length','run','message','../../salesforce/services/salesforce-logger-v3.service','catch','Container','create','design:paramtypes','salesforceSync'];a127_0x3ab5=function(){return _0x5aa040;};return a127_0x3ab5();}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x39ef08,_0xebab5f,_0x58cabb){const _0x2356b5=a127_0x2099a1;this[_0x2356b5(0xa1)]=_0x39ef08,this[_0x2356b5(0x92)]=_0xebab5f,this[_0x2356b5(0x8d)]=_0x58cabb;}async[a127_0x2099a1(0xb4)](){const _0x1394b8=a127_0x2099a1;let _0x492c13=await this[_0x1394b8(0xc0)][_0x1394b8(0xa8)][_0x1394b8(0xc4)](this[_0x1394b8(0xcb)][_0x1394b8(0xc6)])[_0x1394b8(0x9d)](()=>null);!_0x492c13&&(_0x492c13=await this[_0x1394b8(0xc0)][_0x1394b8(0xa8)][_0x1394b8(0x9f)]({'name':this['syncData'][_0x1394b8(0xc6)],'description':this[_0x1394b8(0xdd)](this[_0x1394b8(0xcb)]),'user':{'name':this[_0x1394b8(0xcb)][_0x1394b8(0xd9)],'email':this[_0x1394b8(0xcb)][_0x1394b8(0x8b)]}})),this[_0x1394b8(0xd8)]=_0x492c13;}[a127_0x2099a1(0xdd)](_0x4234da){const _0x13d67d=a127_0x2099a1;let _0x13b5d4=_0x4234da[_0x13d67d(0xc6)];return _0x13b5d4+=_0x4234da[_0x13d67d(0xca)]?':\x20'+_0x4234da[_0x13d67d(0xca)]:'',_0x13b5d4+=_0x13d67d(0xbf)+_0x4234da['userName']+',\x20'+new Date()[_0x13d67d(0xd2)]()+')',_0x13b5d4;}async[a127_0x2099a1(0xb2)](){const _0x15af22=a127_0x2099a1;return this[_0x15af22(0xcb)][_0x15af22(0xc9)]?this['salesforceSync'][_0x15af22(0xdb)](this['syncData'][_0x15af22(0xc9)]):this['salesforceSync'][_0x15af22(0xd3)](this['syncData'][_0x15af22(0xcd)]);}async['getComponents'](){const _0x357904=a127_0x2099a1,_0x391ba4=await this[_0x357904(0xb2)](),_0x14dfe4=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x357904(0x92)]),_0x4ae7d9=await _0x14dfe4[_0x357904(0x9a)](_0x391ba4);return _0x4ae7d9;}async[a127_0x2099a1(0xd5)](_0x17aef3){const _0xa00051=a127_0x2099a1,_0x1d3997=new commit_components_dto_1[(_0xa00051(0xb3))]();return _0x1d3997[_0xa00051(0x9b)]=this[_0xa00051(0xdd)](this[_0xa00051(0xcb)]),_0x1d3997[_0xa00051(0xbc)]={'name':constants_1[_0xa00051(0xc2)],'email':constants_1[_0xa00051(0xb1)]},_0x1d3997[_0xa00051(0xab)]={'writed':await this[_0xa00051(0x96)]()},_0x1d3997['convertToSFDX']=_0x17aef3,_0x1d3997[_0xa00051(0xb7)]=this['repository'],_0x1d3997[_0xa00051(0xd8)]=this[_0xa00051(0xd8)],_0x1d3997[_0xa00051(0xaf)]=!![],_0x1d3997[_0xa00051(0xa6)]=this[_0xa00051(0xa6)],_0x1d3997[_0xa00051(0xd7)]=this[_0xa00051(0xcb)][_0xa00051(0xb9)],_0x1d3997;}async[a127_0x2099a1(0xba)](){const _0x47b5f5=a127_0x2099a1,_0x37226b=await this['salesforceSync'][_0x47b5f5(0xae)](this[_0x47b5f5(0xcb)]),_0x5a264e=await this['salesforceService'][_0x47b5f5(0x95)](_0x37226b)[_0x47b5f5(0xcc)](_0x82ebb4=>typeof _0x82ebb4===_0x47b5f5(0x93)?JSON[_0x47b5f5(0xc1)](_0x82ebb4):_0x82ebb4)[_0x47b5f5(0x9d)](()=>({}));if(_0x5a264e[this[_0x47b5f5(0xc0)][_0x47b5f5(0xb5)]]){if(_0x5a264e[this['repository']['gitUrl']][_0x47b5f5(0xbd)]===this[_0x47b5f5(0xd8)]['sha'])return!![];}return![];}async['updateLastCommit'](){const _0x46fd54=a127_0x2099a1,_0x6363c4=await this[_0x46fd54(0xc0)][_0x46fd54(0xa8)][_0x46fd54(0xc4)](this[_0x46fd54(0xd8)][_0x46fd54(0xce)]);await this[_0x46fd54(0x83)]['log'](this['prefix']+'\x20Update\x20remote\x20state.');const _0x49c36b={[this['repository']['gitUrl']]:{'lastCommit':_0x6363c4['sha']}};await this[_0x46fd54(0xa1)][_0x46fd54(0xaa)](this[_0x46fd54(0xcb)],_0x49c36b);}async[a127_0x2099a1(0x9a)]({syncRecord:_0x90850d,repository:_0x265cb9,convertToSFDX:_0x3705cc,provider:_0x36b461}){const _0x123089=a127_0x2099a1;this['syncData']=_0x90850d,this[_0x123089(0xa6)]=_0x36b461,this[_0x123089(0xc0)]=_0x265cb9,this['sfLogger']=typedi_1[_0x123089(0x9e)][_0x123089(0xc7)](salesforce_logger_v3_service_1[_0x123089(0xbe)]),this[_0x123089(0x80)]=_0x123089(0xa9)+this[_0x123089(0xcb)][_0x123089(0x86)]+']\x20[Branch:\x20'+this['syncData'][_0x123089(0xc6)]+']';try{await this['sfLogger'][_0x123089(0xc5)](this[_0x123089(0x80)]+_0x123089(0xbb))[_0x123089(0xb8)](),await this[_0x123089(0xa1)][_0x123089(0xc8)](this[_0x123089(0xcb)],_0x123089(0xd0)),this[_0x123089(0x83)]['log'](this['prefix']+_0x123089(0x90)),await this[_0x123089(0xb4)](),await this[_0x123089(0x83)][_0x123089(0xc5)](this[_0x123089(0x80)]+'\x20Checking\x20sync\x20status.')[_0x123089(0xb8)]();const _0x38359e=await this[_0x123089(0xba)]();this[_0x123089(0x83)]['log'](this[_0x123089(0x80)]+_0x123089(0xd4)+_0x38359e+'.');if(_0x38359e){await this[_0x123089(0xa1)][_0x123089(0xc8)](this[_0x123089(0xcb)],'Completed'),await this[_0x123089(0x83)][_0x123089(0xc5)](this['prefix']+_0x123089(0x89))[_0x123089(0xb8)]();return;}const _0x27032b=await this[_0x123089(0xd5)](_0x3705cc);await this[_0x123089(0x8d)][_0x123089(0x9a)](_0x27032b,this[_0x123089(0x80)]),await this['salesforceSync'][_0x123089(0xc8)](this['syncData'],'Completed'),await this[_0x123089(0xcf)](),this[_0x123089(0x83)][_0x123089(0xc5)](this[_0x123089(0x80)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x23ea55){throw _0x23ea55;}finally{await this[_0x123089(0x83)][_0x123089(0xb8)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a127_0x2099a1(0x85)])({'transient':!![]}),__metadata(a127_0x2099a1(0xa0),[salesforce_sync_service_1[a127_0x2099a1(0x81)],salesforce_service_1[a127_0x2099a1(0x94)],commit_components_job_1[a127_0x2099a1(0xdc)]])],FlosumSyncJob),exports[a127_0x2099a1(0x88)]=FlosumSyncJob;