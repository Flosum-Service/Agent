const a62_0x19b367=a62_0x591d;(function(_0x405693,_0x52b7c0){const _0x232df3=a62_0x591d,_0x5c4599=_0x405693();while(!![]){try{const _0x10b663=parseInt(_0x232df3(0x105))/0x1+-parseInt(_0x232df3(0xd2))/0x2*(-parseInt(_0x232df3(0xd0))/0x3)+-parseInt(_0x232df3(0xcb))/0x4+parseInt(_0x232df3(0xe8))/0x5*(-parseInt(_0x232df3(0xda))/0x6)+parseInt(_0x232df3(0x10d))/0x7*(parseInt(_0x232df3(0xdb))/0x8)+parseInt(_0x232df3(0xf7))/0x9+-parseInt(_0x232df3(0x102))/0xa;if(_0x10b663===_0x52b7c0)break;else _0x5c4599['push'](_0x5c4599['shift']());}catch(_0xeeca18){_0x5c4599['push'](_0x5c4599['shift']());}}}(a62_0x591f,0x31f99));const a62_0x4a3ae6=(function(){let _0x18de10=!![];return function(_0x4120a1,_0x36e8be){const _0x5bbe05=_0x18de10?function(){const _0x78dda4=a62_0x591d;if(_0x36e8be){const _0x544609=_0x36e8be[_0x78dda4(0x107)](_0x4120a1,arguments);return _0x36e8be=null,_0x544609;}}:function(){};return _0x18de10=![],_0x5bbe05;};}()),a62_0x4b37f3=a62_0x4a3ae6(this,function(){const _0x535f18=a62_0x591d;return a62_0x4b37f3[_0x535f18(0x111)]()[_0x535f18(0x10c)](_0x535f18(0xe9))[_0x535f18(0x111)]()[_0x535f18(0xe0)](a62_0x4b37f3)[_0x535f18(0x10c)](_0x535f18(0xe9));});a62_0x4b37f3();'use strict';var __decorate=this&&this[a62_0x19b367(0xfc)]||function(_0x4d8ab0,_0x1a8009,_0x46944a,_0x7aeb51){const _0x4888c4=a62_0x19b367;var _0x544dea=arguments[_0x4888c4(0x103)],_0x5ba3be=_0x544dea<0x3?_0x1a8009:_0x7aeb51===null?_0x7aeb51=Object[_0x4888c4(0xe5)](_0x1a8009,_0x46944a):_0x7aeb51,_0x42ec5d;if(typeof Reflect==='object'&&typeof Reflect[_0x4888c4(0x117)]===_0x4888c4(0xf4))_0x5ba3be=Reflect[_0x4888c4(0x117)](_0x4d8ab0,_0x1a8009,_0x46944a,_0x7aeb51);else{for(var _0x2f7251=_0x4d8ab0[_0x4888c4(0x103)]-0x1;_0x2f7251>=0x0;_0x2f7251--)if(_0x42ec5d=_0x4d8ab0[_0x2f7251])_0x5ba3be=(_0x544dea<0x3?_0x42ec5d(_0x5ba3be):_0x544dea>0x3?_0x42ec5d(_0x1a8009,_0x46944a,_0x5ba3be):_0x42ec5d(_0x1a8009,_0x46944a))||_0x5ba3be;}return _0x544dea>0x3&&_0x5ba3be&&Object['defineProperty'](_0x1a8009,_0x46944a,_0x5ba3be),_0x5ba3be;},__metadata=this&&this[a62_0x19b367(0xd5)]||function(_0xb4c760,_0x40d019){const _0x2cf9a6=a62_0x19b367;if(typeof Reflect===_0x2cf9a6(0x11e)&&typeof Reflect[_0x2cf9a6(0xe2)]===_0x2cf9a6(0xf4))return Reflect['metadata'](_0xb4c760,_0x40d019);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a62_0x19b367(0xec)]=void 0x0;function a62_0x591d(_0x23ffac,_0x4b1332){const _0x3dd964=a62_0x591f();return a62_0x591d=function(_0x4b37f3,_0x4a3ae6){_0x4b37f3=_0x4b37f3-0xca;let _0x591ff2=_0x3dd964[_0x4b37f3];return _0x591ff2;},a62_0x591d(_0x23ffac,_0x4b1332);}const salesforce_logger_v3_service_1=require(a62_0x19b367(0x108)),typedi_1=require(a62_0x19b367(0x100)),constants_1=require(a62_0x19b367(0x11c)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a62_0x19b367(0x119)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a62_0x19b367(0x106));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x16c560,_0x30202e,_0x43aef4){const _0x59d583=a62_0x19b367;this[_0x59d583(0x11b)]=_0x16c560,this['salesforceService']=_0x30202e,this[_0x59d583(0xf3)]=_0x43aef4;}async[a62_0x19b367(0xcc)](){const _0x2ef443=a62_0x19b367;let _0x135806=await this[_0x2ef443(0x10b)][_0x2ef443(0xce)][_0x2ef443(0xd4)](this['syncData']['branchName'])[_0x2ef443(0xfa)](()=>null);!_0x135806&&(_0x135806=await this[_0x2ef443(0x10b)][_0x2ef443(0xce)][_0x2ef443(0x120)]({'name':this[_0x2ef443(0xeb)][_0x2ef443(0xcf)]})),this[_0x2ef443(0x115)]=_0x135806;}async[a62_0x19b367(0xf0)](){const _0x3f6a0d=a62_0x19b367;return this[_0x3f6a0d(0xeb)][_0x3f6a0d(0x10a)]?this[_0x3f6a0d(0x11b)]['getComponentsFromRepository'](this['syncData'][_0x3f6a0d(0x10a)]):this[_0x3f6a0d(0x11b)][_0x3f6a0d(0xe6)](this[_0x3f6a0d(0xeb)]['branchId']);}async[a62_0x19b367(0x118)](){const _0x23dabc=a62_0x19b367,_0x3baa03=await this[_0x23dabc(0xf0)](),_0x23df39=new salesforce_retriever_service_1[(_0x23dabc(0x109))](this[_0x23dabc(0xd7)]),_0x1919b0=await _0x23df39[_0x23dabc(0x112)](_0x3baa03);return _0x1919b0;}async[a62_0x19b367(0xf2)](_0x191a17){const _0x4fc294=a62_0x19b367,_0x39a027=new commit_components_dto_1[(_0x4fc294(0x110))]();return _0x39a027['message']=_0x4fc294(0xf9),_0x39a027[_0x4fc294(0xdd)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x39a027['components']={'writed':await this[_0x4fc294(0x118)]()},_0x39a027[_0x4fc294(0xde)]=_0x191a17,_0x39a027['repo']=this[_0x4fc294(0x10b)],_0x39a027[_0x4fc294(0x115)]=this[_0x4fc294(0x115)],_0x39a027[_0x4fc294(0xe1)]=!![],_0x39a027[_0x4fc294(0x113)]=this[_0x4fc294(0x113)],_0x39a027;}async[a62_0x19b367(0xf8)](){const _0x4d5a39=a62_0x19b367,_0x2d2b47=await this[_0x4d5a39(0x11b)]['getRemoteStateAttachmentId'](this[_0x4d5a39(0xeb)]),_0x5877db=await this['salesforceService'][_0x4d5a39(0x11d)](_0x2d2b47)[_0x4d5a39(0xd1)](_0x3be836=>typeof _0x3be836==='string'?JSON[_0x4d5a39(0xfd)](_0x3be836):_0x3be836)[_0x4d5a39(0xfa)](()=>({}));if(_0x5877db[this[_0x4d5a39(0x10b)]['gitUrl']]){if(_0x5877db[this[_0x4d5a39(0x10b)][_0x4d5a39(0xea)]][_0x4d5a39(0xca)]===this[_0x4d5a39(0x115)]['sha'])return!![];}return![];}async[a62_0x19b367(0x101)](){const _0x21eb7e=a62_0x19b367,_0x342cdd=await this[_0x21eb7e(0x10b)][_0x21eb7e(0xce)]['getOne'](this[_0x21eb7e(0x115)][_0x21eb7e(0xd6)]);await this[_0x21eb7e(0xe3)][_0x21eb7e(0xe7)](this['prefix']+_0x21eb7e(0xdf));const _0x41bfca={[this[_0x21eb7e(0x10b)][_0x21eb7e(0xea)]]:{'lastCommit':_0x342cdd[_0x21eb7e(0xfb)]}};await this[_0x21eb7e(0x11b)][_0x21eb7e(0xdc)](this[_0x21eb7e(0xeb)],_0x41bfca);}async['run']({syncRecord:_0x28845b,repository:_0x59b446,convertToSFDX:_0x514855,provider:_0x5e7fe2}){const _0xcf6da6=a62_0x19b367;this[_0xcf6da6(0xeb)]=_0x28845b,this['provider']=_0x5e7fe2,this['repository']=_0x59b446,this[_0xcf6da6(0xe3)]=typedi_1['Container'][_0xcf6da6(0x10e)](salesforce_logger_v3_service_1[_0xcf6da6(0x104)]),this[_0xcf6da6(0x114)]=_0xcf6da6(0xf1)+this[_0xcf6da6(0xeb)][_0xcf6da6(0x10f)]+']\x20[Branch:\x20'+this[_0xcf6da6(0xeb)]['branchName']+']';try{await this['sfLogger'][_0xcf6da6(0xe7)](this[_0xcf6da6(0x114)]+_0xcf6da6(0xed))['send'](),await this['salesforceSync'][_0xcf6da6(0xf6)](this[_0xcf6da6(0xeb)],_0xcf6da6(0xd9)),this[_0xcf6da6(0xe3)][_0xcf6da6(0xe7)](this[_0xcf6da6(0x114)]+_0xcf6da6(0xd3)),await this[_0xcf6da6(0xcc)](),await this[_0xcf6da6(0xe3)][_0xcf6da6(0xe7)](this['prefix']+_0xcf6da6(0xee))[_0xcf6da6(0xef)]();const _0x191947=await this[_0xcf6da6(0xf8)]();this[_0xcf6da6(0xe3)][_0xcf6da6(0xe7)](this[_0xcf6da6(0x114)]+_0xcf6da6(0x11a)+_0x191947+'.');if(_0x191947){await this[_0xcf6da6(0x11b)][_0xcf6da6(0xf6)](this['syncData'],'Completed'),await this['sfLogger']['log'](this[_0xcf6da6(0x114)]+_0xcf6da6(0xfe))[_0xcf6da6(0xef)]();return;}const _0x13059a=await this[_0xcf6da6(0xf2)](_0x514855);await this['commitJob'][_0xcf6da6(0x112)](_0x13059a,this[_0xcf6da6(0x114)]),await this[_0xcf6da6(0x11b)][_0xcf6da6(0xf6)](this[_0xcf6da6(0xeb)],_0xcf6da6(0x11f)),await this['updateLastCommit'](),this[_0xcf6da6(0xe3)][_0xcf6da6(0xe7)](this[_0xcf6da6(0x114)]+_0xcf6da6(0xf5));}catch(_0x4abb43){throw _0x4abb43;}finally{await this[_0xcf6da6(0xe3)]['send']();}}};function a62_0x591f(){const _0x10428f=['updateRemoteState','user','convertToSFDX','\x20Update\x20remote\x20state.','constructor','force','metadata','sfLogger','SalesforceService','getOwnPropertyDescriptor','getBranchComponents','log','484985vkgpaJ','(((.+)+)+)+$','gitUrl','syncData','FlosumSyncJob','\x20Start\x20Flosum\x20sync\x20job','\x20Checking\x20sync\x20status.','send','getComponentIds','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','getCommitDto','commitJob','function','\x20Flosum\x20sync\x20job\x20done.','setStatus','1783242reaqeH','checkSyncStatus','Sync\x20repository','catch','sha','__decorate','parse','\x20Branch\x20synchronized.\x20Skip','SalesforceSyncService','typedi','updateLastCommit','4722570mhtRyN','length','SalesforceLogger3','364653IukrHu','./commit-components.job','apply','../../salesforce/services/salesforce-logger-v3.service','SalesforceRetrieverService','repositoryId','repository','search','7FiOGNI','get','repositoryName','CommitComponentsDto','toString','run','provider','prefix','branch','Service','decorate','getComponents','../../salesforce/services/salesforce.service','\x20Sync\x20status\x20','salesforceSync','../../../../constants','retrieveAttachment','object','Completed','create','lastCommit','1595252HLWaLt','createBranchIfNotExists','design:paramtypes','branches','branchName','1173555RNymvD','then','2YXZcpU','\x20Checking\x20repository\x20on\x20Flosum\x20side.','getOne','__metadata','name','salesforceService','CommitComponentsJob','In\x20Progress','12MRSCka','2526280dayZhe'];a62_0x591f=function(){return _0x10428f;};return a62_0x591f();}FlosumSyncJob=__decorate([typedi_1[a62_0x19b367(0x116)]({'transient':!![]}),__metadata(a62_0x19b367(0xcd),[salesforce_sync_service_1[a62_0x19b367(0xff)],salesforce_service_1[a62_0x19b367(0xe4)],commit_components_job_1[a62_0x19b367(0xd8)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;