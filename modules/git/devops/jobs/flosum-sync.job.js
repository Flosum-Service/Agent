const a106_0x3c92d5=a106_0xc897;(function(_0x3ccf0d,_0x4bd074){const _0xe63d7f=a106_0xc897,_0x55a475=_0x3ccf0d();while(!![]){try{const _0x3ae363=-parseInt(_0xe63d7f(0x1ef))/0x1*(parseInt(_0xe63d7f(0x1f6))/0x2)+-parseInt(_0xe63d7f(0x1ed))/0x3*(parseInt(_0xe63d7f(0x212))/0x4)+parseInt(_0xe63d7f(0x213))/0x5*(parseInt(_0xe63d7f(0x1da))/0x6)+-parseInt(_0xe63d7f(0x1e5))/0x7+parseInt(_0xe63d7f(0x224))/0x8*(-parseInt(_0xe63d7f(0x220))/0x9)+-parseInt(_0xe63d7f(0x204))/0xa*(-parseInt(_0xe63d7f(0x1eb))/0xb)+parseInt(_0xe63d7f(0x1e2))/0xc;if(_0x3ae363===_0x4bd074)break;else _0x55a475['push'](_0x55a475['shift']());}catch(_0x2f4e78){_0x55a475['push'](_0x55a475['shift']());}}}(a106_0x1acc,0xa7143));const a106_0x47b422=(function(){let _0x506a58=!![];return function(_0x30ff8b,_0x3afe73){const _0x395da0=_0x506a58?function(){const _0x4e9c4a=a106_0xc897;if(_0x3afe73){const _0x4d144e=_0x3afe73[_0x4e9c4a(0x21e)](_0x30ff8b,arguments);return _0x3afe73=null,_0x4d144e;}}:function(){};return _0x506a58=![],_0x395da0;};}()),a106_0x488bb7=a106_0x47b422(this,function(){const _0x3ff76f=a106_0xc897;return a106_0x488bb7[_0x3ff76f(0x1f4)]()['search']('(((.+)+)+)+$')['toString']()[_0x3ff76f(0x1f2)](a106_0x488bb7)[_0x3ff76f(0x1e0)](_0x3ff76f(0x216));});a106_0x488bb7();'use strict';var __decorate=this&&this[a106_0x3c92d5(0x1fe)]||function(_0xc4278,_0x3ab006,_0x55c3bb,_0x329579){const _0xa71c88=a106_0x3c92d5;var _0x277b19=arguments[_0xa71c88(0x1f7)],_0x5029e4=_0x277b19<0x3?_0x3ab006:_0x329579===null?_0x329579=Object[_0xa71c88(0x1e6)](_0x3ab006,_0x55c3bb):_0x329579,_0x3e9e02;if(typeof Reflect===_0xa71c88(0x206)&&typeof Reflect[_0xa71c88(0x1df)]==='function')_0x5029e4=Reflect[_0xa71c88(0x1df)](_0xc4278,_0x3ab006,_0x55c3bb,_0x329579);else{for(var _0x15c6e3=_0xc4278[_0xa71c88(0x1f7)]-0x1;_0x15c6e3>=0x0;_0x15c6e3--)if(_0x3e9e02=_0xc4278[_0x15c6e3])_0x5029e4=(_0x277b19<0x3?_0x3e9e02(_0x5029e4):_0x277b19>0x3?_0x3e9e02(_0x3ab006,_0x55c3bb,_0x5029e4):_0x3e9e02(_0x3ab006,_0x55c3bb))||_0x5029e4;}return _0x277b19>0x3&&_0x5029e4&&Object[_0xa71c88(0x203)](_0x3ab006,_0x55c3bb,_0x5029e4),_0x5029e4;},__metadata=this&&this[a106_0x3c92d5(0x205)]||function(_0x2f735f,_0x57856f){const _0x4b6a2c=a106_0x3c92d5;if(typeof Reflect==='object'&&typeof Reflect[_0x4b6a2c(0x211)]===_0x4b6a2c(0x1ec))return Reflect['metadata'](_0x2f735f,_0x57856f);};Object[a106_0x3c92d5(0x203)](exports,'__esModule',{'value':!![]}),exports[a106_0x3c92d5(0x22a)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x3c92d5(0x1f3)),typedi_1=require(a106_0x3c92d5(0x1e7)),constants_1=require(a106_0x3c92d5(0x227)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a106_0x3c92d5(0x1ea)),commit_components_dto_1=require(a106_0x3c92d5(0x229)),commit_components_job_1=require(a106_0x3c92d5(0x1f0));function a106_0x1acc(){const _0x31cea2=['decorate','search','lastCommit','36507588KBlxAd','branch','string','3900890LvVusL','getOwnPropertyDescriptor','typedi','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','SalesforceRetrieverService','../../salesforce/services/salesforce.service','11kUByPV','function','489uvhGAg','getOne','463uAMNzc','./commit-components.job','catch','constructor','../../salesforce/services/salesforce-logger-v3.service','toString','gitUrl','4282sXCqaJ','length','branchId','checkSyncStatus','updateLastCommit','\x20Update\x20remote\x20state.','prefix','getComponentIds','__decorate','repositoryId','getRemoteStateAttachmentId','design:paramtypes','getComponents','defineProperty','4234520ZPdXvy','__metadata','object','getBranchComponents','provider','salesforceService','commitJob','\x20Start\x20Flosum\x20sync\x20job','branches','log','createBranchIfNotExists','SalesforceSyncService','\x20Checking\x20repository\x20on\x20Flosum\x20side.','metadata','30428smpcTY','1640025mXaEti','retrieveAttachment','DEFAULT_GIT_USER_EMAIL','(((.+)+)+)+$','getCommitDto','convertToSFDX','sfLogger','syncData','repo','repository',']\x20[Branch:\x20','apply','send','216qpBGqS','Service','repositoryName','CommitComponentsJob','216304CwLxgg','branchName','parse','../../../../constants','getComponentsFromRepository','../dto/commit-components.dto','FlosumSyncJob','create','\x20Flosum\x20sync\x20job\x20done.','In\x20Progress','setStatus','get','updateRemoteState','SalesforceService','salesforceSync','message','Completed','name','SalesforceLogger3','user','12sXZWuv','force','sha','run','\x20Sync\x20status\x20'];a106_0x1acc=function(){return _0x31cea2;};return a106_0x1acc();}function a106_0xc897(_0x87aadf,_0x224716){const _0x22cb4a=a106_0x1acc();return a106_0xc897=function(_0x488bb7,_0x47b422){_0x488bb7=_0x488bb7-0x1ce;let _0x1accc1=_0x22cb4a[_0x488bb7];return _0x1accc1;},a106_0xc897(_0x87aadf,_0x224716);}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x6c8236,_0x30027a,_0x34d4e0){const _0x588f74=a106_0x3c92d5;this['salesforceSync']=_0x6c8236,this[_0x588f74(0x209)]=_0x30027a,this[_0x588f74(0x20a)]=_0x34d4e0;}async[a106_0x3c92d5(0x20e)](){const _0x5c1004=a106_0x3c92d5;let _0xa579cf=await this['repository'][_0x5c1004(0x20c)][_0x5c1004(0x1ee)](this[_0x5c1004(0x21a)][_0x5c1004(0x225)])[_0x5c1004(0x1f1)](()=>null);!_0xa579cf&&(_0xa579cf=await this['repository'][_0x5c1004(0x20c)][_0x5c1004(0x22b)]({'name':this[_0x5c1004(0x21a)]['branchName']})),this[_0x5c1004(0x1e3)]=_0xa579cf;}async[a106_0x3c92d5(0x1fd)](){const _0x1e4617=a106_0x3c92d5;return this['syncData']['repositoryId']?this[_0x1e4617(0x1d4)][_0x1e4617(0x228)](this[_0x1e4617(0x21a)][_0x1e4617(0x1ff)]):this[_0x1e4617(0x1d4)][_0x1e4617(0x207)](this[_0x1e4617(0x21a)][_0x1e4617(0x1f8)]);}async['getComponents'](){const _0x8291e0=a106_0x3c92d5,_0x21161c=await this[_0x8291e0(0x1fd)](),_0x130ea9=new salesforce_retriever_service_1[(_0x8291e0(0x1e9))](this[_0x8291e0(0x209)]),_0x553cbc=await _0x130ea9[_0x8291e0(0x1dd)](_0x21161c);return _0x553cbc;}async[a106_0x3c92d5(0x217)](_0x95eca){const _0x514b76=a106_0x3c92d5,_0x82a274=new commit_components_dto_1['CommitComponentsDto']();return _0x82a274[_0x514b76(0x1d5)]='Sync\x20repository',_0x82a274[_0x514b76(0x1d9)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x514b76(0x215)]},_0x82a274['components']={'writed':await this[_0x514b76(0x202)]()},_0x82a274[_0x514b76(0x218)]=_0x95eca,_0x82a274[_0x514b76(0x21b)]=this[_0x514b76(0x21c)],_0x82a274['branch']=this[_0x514b76(0x1e3)],_0x82a274[_0x514b76(0x1db)]=!![],_0x82a274['provider']=this[_0x514b76(0x208)],_0x82a274;}async[a106_0x3c92d5(0x1f9)](){const _0x3f9056=a106_0x3c92d5,_0x176ba6=await this[_0x3f9056(0x1d4)][_0x3f9056(0x200)](this[_0x3f9056(0x21a)]),_0x5ebc91=await this['salesforceService'][_0x3f9056(0x214)](_0x176ba6)['then'](_0x498e5f=>typeof _0x498e5f===_0x3f9056(0x1e4)?JSON[_0x3f9056(0x226)](_0x498e5f):_0x498e5f)[_0x3f9056(0x1f1)](()=>({}));if(_0x5ebc91[this[_0x3f9056(0x21c)][_0x3f9056(0x1f5)]]){if(_0x5ebc91[this[_0x3f9056(0x21c)]['gitUrl']][_0x3f9056(0x1e1)]===this[_0x3f9056(0x1e3)]['sha'])return!![];}return![];}async[a106_0x3c92d5(0x1fa)](){const _0x2ecf6a=a106_0x3c92d5,_0x4af73d=await this[_0x2ecf6a(0x21c)]['branches'][_0x2ecf6a(0x1ee)](this[_0x2ecf6a(0x1e3)][_0x2ecf6a(0x1d7)]);await this['sfLogger'][_0x2ecf6a(0x20d)](this[_0x2ecf6a(0x1fc)]+_0x2ecf6a(0x1fb));const _0x2c441e={[this['repository'][_0x2ecf6a(0x1f5)]]:{'lastCommit':_0x4af73d[_0x2ecf6a(0x1dc)]}};await this[_0x2ecf6a(0x1d4)][_0x2ecf6a(0x1d2)](this['syncData'],_0x2c441e);}async['run']({syncRecord:_0x194834,repository:_0x37a226,convertToSFDX:_0x25c962,provider:_0x14e7f6}){const _0x151819=a106_0x3c92d5;this[_0x151819(0x21a)]=_0x194834,this[_0x151819(0x208)]=_0x14e7f6,this[_0x151819(0x21c)]=_0x37a226,this['sfLogger']=typedi_1['Container'][_0x151819(0x1d1)](salesforce_logger_v3_service_1[_0x151819(0x1d8)]),this['prefix']=_0x151819(0x1e8)+this[_0x151819(0x21a)][_0x151819(0x222)]+_0x151819(0x21d)+this['syncData'][_0x151819(0x225)]+']';try{await this['sfLogger'][_0x151819(0x20d)](this[_0x151819(0x1fc)]+_0x151819(0x20b))['send'](),await this[_0x151819(0x1d4)][_0x151819(0x1d0)](this[_0x151819(0x21a)],_0x151819(0x1cf)),this[_0x151819(0x219)][_0x151819(0x20d)](this[_0x151819(0x1fc)]+_0x151819(0x210)),await this[_0x151819(0x20e)](),await this[_0x151819(0x219)][_0x151819(0x20d)](this['prefix']+'\x20Checking\x20sync\x20status.')['send']();const _0x37f4e7=await this[_0x151819(0x1f9)]();this[_0x151819(0x219)][_0x151819(0x20d)](this[_0x151819(0x1fc)]+_0x151819(0x1de)+_0x37f4e7+'.');if(_0x37f4e7){await this[_0x151819(0x1d4)][_0x151819(0x1d0)](this['syncData'],_0x151819(0x1d6)),await this[_0x151819(0x219)][_0x151819(0x20d)](this['prefix']+'\x20Branch\x20synchronized.\x20Skip')[_0x151819(0x21f)]();return;}const _0x539161=await this[_0x151819(0x217)](_0x25c962);await this['commitJob'][_0x151819(0x1dd)](_0x539161,this[_0x151819(0x1fc)]),await this[_0x151819(0x1d4)]['setStatus'](this[_0x151819(0x21a)],'Completed'),await this[_0x151819(0x1fa)](),this[_0x151819(0x219)][_0x151819(0x20d)](this[_0x151819(0x1fc)]+_0x151819(0x1ce));}catch(_0x39cbf2){throw _0x39cbf2;}finally{await this[_0x151819(0x219)]['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x3c92d5(0x221)])({'transient':!![]}),__metadata(a106_0x3c92d5(0x201),[salesforce_sync_service_1[a106_0x3c92d5(0x20f)],salesforce_service_1[a106_0x3c92d5(0x1d3)],commit_components_job_1[a106_0x3c92d5(0x223)]])],FlosumSyncJob),exports[a106_0x3c92d5(0x22a)]=FlosumSyncJob;