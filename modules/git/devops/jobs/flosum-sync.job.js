const a108_0x26f6e2=a108_0x5833;(function(_0x57d247,_0x32311e){const _0x29fa0b=a108_0x5833,_0x4354b2=_0x57d247();while(!![]){try{const _0x2accd3=parseInt(_0x29fa0b(0xff))/0x1+parseInt(_0x29fa0b(0x122))/0x2+-parseInt(_0x29fa0b(0x112))/0x3*(parseInt(_0x29fa0b(0x105))/0x4)+-parseInt(_0x29fa0b(0x124))/0x5+-parseInt(_0x29fa0b(0x132))/0x6+parseInt(_0x29fa0b(0x118))/0x7+parseInt(_0x29fa0b(0xef))/0x8*(parseInt(_0x29fa0b(0x10d))/0x9);if(_0x2accd3===_0x32311e)break;else _0x4354b2['push'](_0x4354b2['shift']());}catch(_0x7deb7c){_0x4354b2['push'](_0x4354b2['shift']());}}}(a108_0x4847,0xc9980));const a108_0x6d6d1=(function(){let _0xddb6e=!![];return function(_0x132d85,_0x57bf9c){const _0x1f0dc1=_0xddb6e?function(){if(_0x57bf9c){const _0x39bb21=_0x57bf9c['apply'](_0x132d85,arguments);return _0x57bf9c=null,_0x39bb21;}}:function(){};return _0xddb6e=![],_0x1f0dc1;};}()),a108_0xa7dcb1=a108_0x6d6d1(this,function(){const _0x413833=a108_0x5833;return a108_0xa7dcb1[_0x413833(0x113)]()['search'](_0x413833(0x13b))['toString']()[_0x413833(0x11e)](a108_0xa7dcb1)[_0x413833(0x103)]('(((.+)+)+)+$');});a108_0xa7dcb1();'use strict';function a108_0x4847(){const _0x368784=['getComponents','lastCommit','Container','defineProperty','repositoryId','(((.+)+)+)+$','design:paramtypes','DEFAULT_GIT_USER_EMAIL','Sync\x20repository','\x20Checking\x20sync\x20status.','branchId','log','branches','components','getOne','FlosumSyncJob','getComponentIds','provider','DEFAULT_GIT_USER_NAME','typedi','syncData','184816XZwdXk','get','prefix','gitUrl','../../salesforce/services/salesforce-sync.service','decorate','sfLogger','updateLastCommit','SalesforceLogger3','__esModule','getRemoteStateAttachmentId','repository','\x20Update\x20remote\x20state.','getCommitDto','recordTypeName','sha','1140929IaJbbD','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','salesforceSync','branchName','search','recordType','3980iackRh','../../salesforce/services/salesforce-retriever.service','metadata','name','retrieveAttachment','CommitComponentsDto','branch','../../salesforce/services/salesforce.service','567GhThps','send','run','then','createBranchIfNotExists','2472ybthLW','toString','setStatus','commitJob','../../salesforce/services/salesforce-logger-v3.service','\x20Flosum\x20sync\x20job\x20done.','2298191CdCNwS','length','__decorate','repositoryName','getComponentsFromRepository','\x20Branch\x20synchronized.\x20Skip','constructor','function','\x20Checking\x20repository\x20on\x20Flosum\x20side.','SalesforceRetrieverService','1822988PYmaSn','string','4369305jjqpFr','\x20Start\x20Flosum\x20sync\x20job','Completed','convertToSFDX','__metadata','create','../dto/commit-components.dto','checkSyncStatus','SalesforceService','force','salesforceService','user','Service','repo','7900158fRFKLm','updateRemoteState','object','catch'];a108_0x4847=function(){return _0x368784;};return a108_0x4847();}var __decorate=this&&this[a108_0x26f6e2(0x11a)]||function(_0xd10cb7,_0x223855,_0x221b22,_0x4e7272){const _0x26027f=a108_0x26f6e2;var _0x51629d=arguments[_0x26027f(0x119)],_0x28c27c=_0x51629d<0x3?_0x223855:_0x4e7272===null?_0x4e7272=Object['getOwnPropertyDescriptor'](_0x223855,_0x221b22):_0x4e7272,_0x393d82;if(typeof Reflect===_0x26027f(0x134)&&typeof Reflect['decorate']==='function')_0x28c27c=Reflect[_0x26027f(0xf4)](_0xd10cb7,_0x223855,_0x221b22,_0x4e7272);else{for(var _0x53d3ed=_0xd10cb7[_0x26027f(0x119)]-0x1;_0x53d3ed>=0x0;_0x53d3ed--)if(_0x393d82=_0xd10cb7[_0x53d3ed])_0x28c27c=(_0x51629d<0x3?_0x393d82(_0x28c27c):_0x51629d>0x3?_0x393d82(_0x223855,_0x221b22,_0x28c27c):_0x393d82(_0x223855,_0x221b22))||_0x28c27c;}return _0x51629d>0x3&&_0x28c27c&&Object[_0x26027f(0x139)](_0x223855,_0x221b22,_0x28c27c),_0x28c27c;},__metadata=this&&this[a108_0x26f6e2(0x128)]||function(_0x2a959e,_0x356f1b){const _0x265aca=a108_0x26f6e2;if(typeof Reflect===_0x265aca(0x134)&&typeof Reflect['metadata']===_0x265aca(0x11f))return Reflect[_0x265aca(0x107)](_0x2a959e,_0x356f1b);};Object[a108_0x26f6e2(0x139)](exports,a108_0x26f6e2(0xf8),{'value':!![]}),exports[a108_0x26f6e2(0x145)]=void 0x0;const salesforce_logger_v3_service_1=require(a108_0x26f6e2(0x116)),typedi_1=require(a108_0x26f6e2(0xed)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a108_0x26f6e2(0x106)),salesforce_sync_service_1=require(a108_0x26f6e2(0xf3)),salesforce_service_1=require(a108_0x26f6e2(0x10c)),commit_components_dto_1=require(a108_0x26f6e2(0x12a)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x546a24,_0x17310e,_0x11ef2e){const _0x56a03f=a108_0x26f6e2;this['salesforceSync']=_0x546a24,this['salesforceService']=_0x17310e,this[_0x56a03f(0x115)]=_0x11ef2e;}async[a108_0x26f6e2(0x111)](){const _0x33e378=a108_0x26f6e2;let _0x44ca56=await this[_0x33e378(0xfa)][_0x33e378(0x142)][_0x33e378(0x144)](this[_0x33e378(0xee)][_0x33e378(0x102)])[_0x33e378(0x135)](()=>null);!_0x44ca56&&(_0x44ca56=await this[_0x33e378(0xfa)]['branches'][_0x33e378(0x129)]({'name':this[_0x33e378(0xee)]['branchName']})),this[_0x33e378(0x10b)]=_0x44ca56;}async[a108_0x26f6e2(0x146)](){const _0x558ac6=a108_0x26f6e2;return this[_0x558ac6(0xee)][_0x558ac6(0x13a)]?this[_0x558ac6(0x101)][_0x558ac6(0x11c)](this['syncData'][_0x558ac6(0x13a)]):this[_0x558ac6(0x101)]['getBranchComponents'](this[_0x558ac6(0xee)][_0x558ac6(0x140)]);}async[a108_0x26f6e2(0x136)](){const _0xc3be56=a108_0x26f6e2,_0xe4229b=await this['getComponentIds'](),_0x29a08e=new salesforce_retriever_service_1[(_0xc3be56(0x121))](this[_0xc3be56(0x12e)]),_0x307dab=await _0x29a08e[_0xc3be56(0x10f)](_0xe4229b);return _0x307dab;}async['getCommitDto'](_0x3d80ac){const _0x30dd40=a108_0x26f6e2,_0x55e0b7=new commit_components_dto_1[(_0x30dd40(0x10a))]();return _0x55e0b7['message']=_0x30dd40(0x13e),_0x55e0b7[_0x30dd40(0x12f)]={'name':constants_1[_0x30dd40(0x148)],'email':constants_1[_0x30dd40(0x13d)]},_0x55e0b7[_0x30dd40(0x143)]={'writed':await this[_0x30dd40(0x136)]()},_0x55e0b7[_0x30dd40(0x127)]=_0x3d80ac,_0x55e0b7[_0x30dd40(0x131)]=this[_0x30dd40(0xfa)],_0x55e0b7[_0x30dd40(0x10b)]=this[_0x30dd40(0x10b)],_0x55e0b7[_0x30dd40(0x12d)]=!![],_0x55e0b7[_0x30dd40(0x147)]=this[_0x30dd40(0x147)],_0x55e0b7[_0x30dd40(0x104)]=this[_0x30dd40(0xee)][_0x30dd40(0xfd)],_0x55e0b7;}async[a108_0x26f6e2(0x12b)](){const _0x321caf=a108_0x26f6e2,_0x3a889b=await this[_0x321caf(0x101)][_0x321caf(0xf9)](this[_0x321caf(0xee)]),_0x389862=await this[_0x321caf(0x12e)][_0x321caf(0x109)](_0x3a889b)[_0x321caf(0x110)](_0x3a0f82=>typeof _0x3a0f82===_0x321caf(0x123)?JSON['parse'](_0x3a0f82):_0x3a0f82)[_0x321caf(0x135)](()=>({}));if(_0x389862[this['repository'][_0x321caf(0xf2)]]){if(_0x389862[this[_0x321caf(0xfa)][_0x321caf(0xf2)]][_0x321caf(0x137)]===this['branch'][_0x321caf(0xfe)])return!![];}return![];}async[a108_0x26f6e2(0xf6)](){const _0xeaa85=a108_0x26f6e2,_0x475bff=await this[_0xeaa85(0xfa)]['branches'][_0xeaa85(0x144)](this['branch'][_0xeaa85(0x108)]);await this['sfLogger'][_0xeaa85(0x141)](this['prefix']+_0xeaa85(0xfb));const _0x497aef={[this['repository'][_0xeaa85(0xf2)]]:{'lastCommit':_0x475bff[_0xeaa85(0xfe)]}};await this[_0xeaa85(0x101)][_0xeaa85(0x133)](this['syncData'],_0x497aef);}async[a108_0x26f6e2(0x10f)]({syncRecord:_0x5208f1,repository:_0x3362f4,convertToSFDX:_0x57dcba,provider:_0x4f150d}){const _0x5686cc=a108_0x26f6e2;this[_0x5686cc(0xee)]=_0x5208f1,this[_0x5686cc(0x147)]=_0x4f150d,this[_0x5686cc(0xfa)]=_0x3362f4,this[_0x5686cc(0xf5)]=typedi_1[_0x5686cc(0x138)][_0x5686cc(0xf0)](salesforce_logger_v3_service_1[_0x5686cc(0xf7)]),this[_0x5686cc(0xf1)]=_0x5686cc(0x100)+this['syncData'][_0x5686cc(0x11b)]+']\x20[Branch:\x20'+this[_0x5686cc(0xee)]['branchName']+']';try{await this[_0x5686cc(0xf5)][_0x5686cc(0x141)](this[_0x5686cc(0xf1)]+_0x5686cc(0x125))[_0x5686cc(0x10e)](),await this[_0x5686cc(0x101)][_0x5686cc(0x114)](this[_0x5686cc(0xee)],'In\x20Progress'),this[_0x5686cc(0xf5)][_0x5686cc(0x141)](this[_0x5686cc(0xf1)]+_0x5686cc(0x120)),await this[_0x5686cc(0x111)](),await this['sfLogger']['log'](this[_0x5686cc(0xf1)]+_0x5686cc(0x13f))[_0x5686cc(0x10e)]();const _0x33784f=await this['checkSyncStatus']();this[_0x5686cc(0xf5)][_0x5686cc(0x141)](this[_0x5686cc(0xf1)]+'\x20Sync\x20status\x20'+_0x33784f+'.');if(_0x33784f){await this[_0x5686cc(0x101)][_0x5686cc(0x114)](this[_0x5686cc(0xee)],_0x5686cc(0x126)),await this[_0x5686cc(0xf5)]['log'](this[_0x5686cc(0xf1)]+_0x5686cc(0x11d))[_0x5686cc(0x10e)]();return;}const _0xb71219=await this[_0x5686cc(0xfc)](_0x57dcba);await this[_0x5686cc(0x115)][_0x5686cc(0x10f)](_0xb71219,this[_0x5686cc(0xf1)]),await this['salesforceSync'][_0x5686cc(0x114)](this['syncData'],_0x5686cc(0x126)),await this[_0x5686cc(0xf6)](),this['sfLogger'][_0x5686cc(0x141)](this[_0x5686cc(0xf1)]+_0x5686cc(0x117));}catch(_0x56365d){throw _0x56365d;}finally{await this[_0x5686cc(0xf5)]['send']();}}};function a108_0x5833(_0x2417ca,_0xb3b68f){const _0x5eb2a3=a108_0x4847();return a108_0x5833=function(_0xa7dcb1,_0x6d6d1){_0xa7dcb1=_0xa7dcb1-0xed;let _0x484799=_0x5eb2a3[_0xa7dcb1];return _0x484799;},a108_0x5833(_0x2417ca,_0xb3b68f);}FlosumSyncJob=__decorate([(0x0,typedi_1[a108_0x26f6e2(0x130)])({'transient':!![]}),__metadata(a108_0x26f6e2(0x13c),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a108_0x26f6e2(0x12c)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a108_0x26f6e2(0x145)]=FlosumSyncJob;