const a62_0x296be5=a62_0x4358;function a62_0x487c(){const _0x20af28=['metadata','send','repositoryId','checkSyncStatus','73094CZFtoU','\x20Checking\x20repository\x20on\x20Flosum\x20side.','CommitComponentsJob','log','1208094WyxIrm','length','updateLastCommit','object','DEFAULT_GIT_USER_EMAIL','constructor','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','FlosumSyncJob','commitJob','lastCommit','__decorate','448755fTYuLW','salesforceService','10757178hWxWjK','\x20Branch\x20synchronized.\x20Skip','string','12CNKfJn','design:paramtypes','661334QONjKc','\x20Checking\x20sync\x20status.','../../../../constants','message','name','SalesforceLogger3','salesforceSync','createBranchIfNotExists','setStatus','repositoryName','retrieveAttachment','branchName','create','getOwnPropertyDescriptor','getComponentIds','../../salesforce/services/salesforce-retriever.service','\x20Update\x20remote\x20state.','search','getOne','catch','SalesforceRetrieverService','defineProperty','branch','repository','getComponentsFromRepository','getCommitDto','sfLogger','Completed','toString','parse','syncData','10etnNCE','typedi','Container','run','updateRemoteState','./commit-components.job','convertToSFDX','../../salesforce/services/salesforce-sync.service','../../salesforce/services/salesforce.service','decorate','provider','Sync\x20repository','branches','sha','../dto/commit-components.dto','SalesforceSyncService','components','function','107670LZqqYH','gitUrl','getRemoteStateAttachmentId','force','prefix','../../salesforce/services/salesforce-logger-v3.service','(((.+)+)+)+$','getComponents','84CHTiBM','__esModule','1003968rgxxWG'];a62_0x487c=function(){return _0x20af28;};return a62_0x487c();}(function(_0x386867,_0x566f38){const _0x3052a8=a62_0x4358,_0xb9ffec=_0x386867();while(!![]){try{const _0x95874f=parseInt(_0x3052a8(0xdd))/0x1+-parseInt(_0x3052a8(0x102))/0x2+-parseInt(_0x3052a8(0xf0))/0x3+-parseInt(_0x3052a8(0x100))/0x4*(parseInt(_0x3052a8(0xfb))/0x5)+parseInt(_0x3052a8(0xe5))/0x6*(-parseInt(_0x3052a8(0xec))/0x7)+parseInt(_0x3052a8(0xe7))/0x8+-parseInt(_0x3052a8(0xfd))/0x9*(-parseInt(_0x3052a8(0xcb))/0xa);if(_0x95874f===_0x566f38)break;else _0xb9ffec['push'](_0xb9ffec['shift']());}catch(_0x457c3b){_0xb9ffec['push'](_0xb9ffec['shift']());}}}(a62_0x487c,0x44432));const a62_0x3cd6dc=(function(){let _0x5a8add=!![];return function(_0x316ddb,_0x4a0d4c){const _0x3139fd=_0x5a8add?function(){if(_0x4a0d4c){const _0x21480b=_0x4a0d4c['apply'](_0x316ddb,arguments);return _0x4a0d4c=null,_0x21480b;}}:function(){};return _0x5a8add=![],_0x3139fd;};}()),a62_0x5a3ac6=a62_0x3cd6dc(this,function(){const _0x527cdc=a62_0x4358;return a62_0x5a3ac6[_0x527cdc(0x11e)]()[_0x527cdc(0x113)](_0x527cdc(0xe3))[_0x527cdc(0x11e)]()[_0x527cdc(0xf5)](a62_0x5a3ac6)[_0x527cdc(0x113)](_0x527cdc(0xe3));});a62_0x5a3ac6();'use strict';var __decorate=this&&this[a62_0x296be5(0xfa)]||function(_0x4850fa,_0x2133b1,_0x49e076,_0x51b2da){const _0x32dd9f=a62_0x296be5;var _0x3e041c=arguments[_0x32dd9f(0xf1)],_0x4189e7=_0x3e041c<0x3?_0x2133b1:_0x51b2da===null?_0x51b2da=Object[_0x32dd9f(0x10f)](_0x2133b1,_0x49e076):_0x51b2da,_0x12b416;if(typeof Reflect===_0x32dd9f(0xf3)&&typeof Reflect[_0x32dd9f(0xd4)]===_0x32dd9f(0xdc))_0x4189e7=Reflect[_0x32dd9f(0xd4)](_0x4850fa,_0x2133b1,_0x49e076,_0x51b2da);else{for(var _0x5abd85=_0x4850fa['length']-0x1;_0x5abd85>=0x0;_0x5abd85--)if(_0x12b416=_0x4850fa[_0x5abd85])_0x4189e7=(_0x3e041c<0x3?_0x12b416(_0x4189e7):_0x3e041c>0x3?_0x12b416(_0x2133b1,_0x49e076,_0x4189e7):_0x12b416(_0x2133b1,_0x49e076))||_0x4189e7;}return _0x3e041c>0x3&&_0x4189e7&&Object[_0x32dd9f(0x117)](_0x2133b1,_0x49e076,_0x4189e7),_0x4189e7;},__metadata=this&&this['__metadata']||function(_0x529366,_0x220c6b){const _0x296b6a=a62_0x296be5;if(typeof Reflect===_0x296b6a(0xf3)&&typeof Reflect[_0x296b6a(0xe8)]===_0x296b6a(0xdc))return Reflect[_0x296b6a(0xe8)](_0x529366,_0x220c6b);};Object[a62_0x296be5(0x117)](exports,a62_0x296be5(0xe6),{'value':!![]}),exports[a62_0x296be5(0xf7)]=void 0x0;const salesforce_logger_v3_service_1=require(a62_0x296be5(0xe2)),typedi_1=require(a62_0x296be5(0xcc)),constants_1=require(a62_0x296be5(0x104)),salesforce_retriever_service_1=require(a62_0x296be5(0x111)),salesforce_sync_service_1=require(a62_0x296be5(0xd2)),salesforce_service_1=require(a62_0x296be5(0xd3)),commit_components_dto_1=require(a62_0x296be5(0xd9)),commit_components_job_1=require(a62_0x296be5(0xd0));function a62_0x4358(_0x38a254,_0x4fe091){const _0x3ee1ba=a62_0x487c();return a62_0x4358=function(_0x5a3ac6,_0x3cd6dc){_0x5a3ac6=_0x5a3ac6-0xcb;let _0x487cfd=_0x3ee1ba[_0x5a3ac6];return _0x487cfd;},a62_0x4358(_0x38a254,_0x4fe091);}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x37672a,_0x1d0c10,_0x9742ee){const _0x2d61fb=a62_0x296be5;this['salesforceSync']=_0x37672a,this['salesforceService']=_0x1d0c10,this[_0x2d61fb(0xf8)]=_0x9742ee;}async[a62_0x296be5(0x109)](){const _0x50fe3f=a62_0x296be5;let _0x216af3=await this['repository'][_0x50fe3f(0xd7)]['getOne'](this[_0x50fe3f(0x120)][_0x50fe3f(0x10d)])[_0x50fe3f(0x115)](()=>null);!_0x216af3&&(_0x216af3=await this[_0x50fe3f(0x119)][_0x50fe3f(0xd7)][_0x50fe3f(0x10e)]({'name':this['syncData']['branchName']})),this[_0x50fe3f(0x118)]=_0x216af3;}async['getComponentIds'](){const _0x4b793b=a62_0x296be5;return this[_0x4b793b(0x120)][_0x4b793b(0xea)]?this['salesforceSync'][_0x4b793b(0x11a)](this[_0x4b793b(0x120)][_0x4b793b(0xea)]):this[_0x4b793b(0x108)]['getBranchComponents'](this[_0x4b793b(0x120)]['branchId']);}async['getComponents'](){const _0x165f50=a62_0x296be5,_0x1f544b=await this[_0x165f50(0x110)](),_0x4e5e38=new salesforce_retriever_service_1[(_0x165f50(0x116))](this[_0x165f50(0xfc)]),_0x204d33=await _0x4e5e38[_0x165f50(0xce)](_0x1f544b);return _0x204d33;}async[a62_0x296be5(0x11b)](_0x4b6116){const _0x3cb1a3=a62_0x296be5,_0x591cfd=new commit_components_dto_1['CommitComponentsDto']();return _0x591cfd[_0x3cb1a3(0x105)]=_0x3cb1a3(0xd6),_0x591cfd['user']={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x3cb1a3(0xf4)]},_0x591cfd[_0x3cb1a3(0xdb)]={'writed':await this[_0x3cb1a3(0xe4)]()},_0x591cfd[_0x3cb1a3(0xd1)]=_0x4b6116,_0x591cfd['repo']=this[_0x3cb1a3(0x119)],_0x591cfd['branch']=this['branch'],_0x591cfd[_0x3cb1a3(0xe0)]=!![],_0x591cfd[_0x3cb1a3(0xd5)]=this[_0x3cb1a3(0xd5)],_0x591cfd;}async[a62_0x296be5(0xeb)](){const _0x4265ca=a62_0x296be5,_0x23adbc=await this[_0x4265ca(0x108)][_0x4265ca(0xdf)](this['syncData']),_0xa182d8=await this[_0x4265ca(0xfc)][_0x4265ca(0x10c)](_0x23adbc)['then'](_0x291eea=>typeof _0x291eea===_0x4265ca(0xff)?JSON[_0x4265ca(0x11f)](_0x291eea):_0x291eea)['catch'](()=>({}));if(_0xa182d8[this['repository'][_0x4265ca(0xde)]]){if(_0xa182d8[this['repository'][_0x4265ca(0xde)]][_0x4265ca(0xf9)]===this[_0x4265ca(0x118)]['sha'])return!![];}return![];}async[a62_0x296be5(0xf2)](){const _0x26a4fb=a62_0x296be5,_0x141a25=await this[_0x26a4fb(0x119)]['branches'][_0x26a4fb(0x114)](this['branch'][_0x26a4fb(0x106)]);await this[_0x26a4fb(0x11c)]['log'](this[_0x26a4fb(0xe1)]+_0x26a4fb(0x112));const _0x5b4114={[this[_0x26a4fb(0x119)][_0x26a4fb(0xde)]]:{'lastCommit':_0x141a25[_0x26a4fb(0xd8)]}};await this['salesforceSync'][_0x26a4fb(0xcf)](this['syncData'],_0x5b4114);}async[a62_0x296be5(0xce)]({syncRecord:_0x34235f,repository:_0x336ae9,convertToSFDX:_0x12b7c0,provider:_0x5316c8}){const _0x13d297=a62_0x296be5;this[_0x13d297(0x120)]=_0x34235f,this[_0x13d297(0xd5)]=_0x5316c8,this['repository']=_0x336ae9,this[_0x13d297(0x11c)]=typedi_1[_0x13d297(0xcd)]['get'](salesforce_logger_v3_service_1[_0x13d297(0x107)]),this['prefix']=_0x13d297(0xf6)+this[_0x13d297(0x120)][_0x13d297(0x10b)]+']\x20[Branch:\x20'+this[_0x13d297(0x120)][_0x13d297(0x10d)]+']';try{await this['sfLogger']['log'](this[_0x13d297(0xe1)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x13d297(0xe9)](),await this[_0x13d297(0x108)][_0x13d297(0x10a)](this[_0x13d297(0x120)],'In\x20Progress'),this[_0x13d297(0x11c)][_0x13d297(0xef)](this[_0x13d297(0xe1)]+_0x13d297(0xed)),await this[_0x13d297(0x109)](),await this[_0x13d297(0x11c)][_0x13d297(0xef)](this[_0x13d297(0xe1)]+_0x13d297(0x103))['send']();const _0x2d7ab8=await this['checkSyncStatus']();this[_0x13d297(0x11c)]['log'](this['prefix']+'\x20Sync\x20status\x20'+_0x2d7ab8+'.');if(_0x2d7ab8){await this[_0x13d297(0x108)][_0x13d297(0x10a)](this[_0x13d297(0x120)],_0x13d297(0x11d)),await this['sfLogger'][_0x13d297(0xef)](this[_0x13d297(0xe1)]+_0x13d297(0xfe))[_0x13d297(0xe9)]();return;}const _0x24453c=await this['getCommitDto'](_0x12b7c0);await this['commitJob']['run'](_0x24453c,this[_0x13d297(0xe1)]),await this[_0x13d297(0x108)][_0x13d297(0x10a)](this[_0x13d297(0x120)],_0x13d297(0x11d)),await this['updateLastCommit'](),this[_0x13d297(0x11c)][_0x13d297(0xef)](this['prefix']+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x4fa49c){throw _0x4fa49c;}finally{await this[_0x13d297(0x11c)][_0x13d297(0xe9)]();}}};FlosumSyncJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a62_0x296be5(0x101),[salesforce_sync_service_1[a62_0x296be5(0xda)],salesforce_service_1['SalesforceService'],commit_components_job_1[a62_0x296be5(0xee)]])],FlosumSyncJob),exports[a62_0x296be5(0xf7)]=FlosumSyncJob;