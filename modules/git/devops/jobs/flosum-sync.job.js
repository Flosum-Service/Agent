const a106_0x3de1e3=a106_0x5048;(function(_0x28b423,_0xe91f44){const _0x5f45f2=a106_0x5048,_0x236d35=_0x28b423();while(!![]){try{const _0x149322=-parseInt(_0x5f45f2(0x11e))/0x1*(parseInt(_0x5f45f2(0x142))/0x2)+parseInt(_0x5f45f2(0x159))/0x3+-parseInt(_0x5f45f2(0x135))/0x4+parseInt(_0x5f45f2(0x143))/0x5*(parseInt(_0x5f45f2(0x151))/0x6)+-parseInt(_0x5f45f2(0x122))/0x7*(parseInt(_0x5f45f2(0x107))/0x8)+-parseInt(_0x5f45f2(0x133))/0x9*(parseInt(_0x5f45f2(0x10b))/0xa)+-parseInt(_0x5f45f2(0x13c))/0xb*(-parseInt(_0x5f45f2(0x124))/0xc);if(_0x149322===_0xe91f44)break;else _0x236d35['push'](_0x236d35['shift']());}catch(_0x425490){_0x236d35['push'](_0x236d35['shift']());}}}(a106_0x2441,0xb25f0));const a106_0x272fd1=(function(){let _0x2bc6b0=!![];return function(_0x26fe54,_0xbf2f98){const _0x2b7bf2=_0x2bc6b0?function(){const _0x3f4a6e=a106_0x5048;if(_0xbf2f98){const _0x11fd0d=_0xbf2f98[_0x3f4a6e(0x128)](_0x26fe54,arguments);return _0xbf2f98=null,_0x11fd0d;}}:function(){};return _0x2bc6b0=![],_0x2b7bf2;};}()),a106_0xc8ebb3=a106_0x272fd1(this,function(){const _0x3d854f=a106_0x5048;return a106_0xc8ebb3[_0x3d854f(0x102)]()['search']('(((.+)+)+)+$')['toString']()[_0x3d854f(0x13a)](a106_0xc8ebb3)[_0x3d854f(0x150)](_0x3d854f(0x121));});function a106_0x5048(_0x50cb9d,_0x2c4b4e){const _0x2d39ef=a106_0x2441();return a106_0x5048=function(_0xc8ebb3,_0x272fd1){_0xc8ebb3=_0xc8ebb3-0x100;let _0x2441d6=_0x2d39ef[_0xc8ebb3];return _0x2441d6;},a106_0x5048(_0x50cb9d,_0x2c4b4e);}a106_0xc8ebb3();'use strict';var __decorate=this&&this['__decorate']||function(_0x23db8f,_0x1d43ad,_0x1b677d,_0x1d5a3f){const _0x1e29aa=a106_0x5048;var _0x1ba90e=arguments[_0x1e29aa(0x131)],_0x33f9f2=_0x1ba90e<0x3?_0x1d43ad:_0x1d5a3f===null?_0x1d5a3f=Object[_0x1e29aa(0x117)](_0x1d43ad,_0x1b677d):_0x1d5a3f,_0xb8d041;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x33f9f2=Reflect[_0x1e29aa(0x11c)](_0x23db8f,_0x1d43ad,_0x1b677d,_0x1d5a3f);else{for(var _0x5091b5=_0x23db8f[_0x1e29aa(0x131)]-0x1;_0x5091b5>=0x0;_0x5091b5--)if(_0xb8d041=_0x23db8f[_0x5091b5])_0x33f9f2=(_0x1ba90e<0x3?_0xb8d041(_0x33f9f2):_0x1ba90e>0x3?_0xb8d041(_0x1d43ad,_0x1b677d,_0x33f9f2):_0xb8d041(_0x1d43ad,_0x1b677d))||_0x33f9f2;}return _0x1ba90e>0x3&&_0x33f9f2&&Object[_0x1e29aa(0x116)](_0x1d43ad,_0x1b677d,_0x33f9f2),_0x33f9f2;},__metadata=this&&this[a106_0x3de1e3(0x12e)]||function(_0x131bed,_0x1d77ab){const _0xe806a8=a106_0x3de1e3;if(typeof Reflect===_0xe806a8(0x118)&&typeof Reflect[_0xe806a8(0x120)]==='function')return Reflect['metadata'](_0x131bed,_0x1d77ab);};Object[a106_0x3de1e3(0x116)](exports,a106_0x3de1e3(0x138),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x3de1e3(0x11d)),typedi_1=require(a106_0x3de1e3(0x136)),constants_1=require(a106_0x3de1e3(0x126)),salesforce_retriever_service_1=require(a106_0x3de1e3(0x146)),salesforce_sync_service_1=require(a106_0x3de1e3(0x154)),salesforce_service_1=require(a106_0x3de1e3(0x127)),commit_components_dto_1=require(a106_0x3de1e3(0x103)),commit_components_job_1=require(a106_0x3de1e3(0x155));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x2a9ce6,_0x3dcf05,_0x1f5125){const _0x133135=a106_0x3de1e3;this[_0x133135(0x111)]=_0x2a9ce6,this[_0x133135(0x10e)]=_0x3dcf05,this[_0x133135(0x156)]=_0x1f5125;}async[a106_0x3de1e3(0x14a)](){const _0x162c81=a106_0x3de1e3;let _0x1a7e17=await this['repository']['branches'][_0x162c81(0x106)](this[_0x162c81(0x108)][_0x162c81(0x104)])['catch'](()=>null);!_0x1a7e17&&(_0x1a7e17=await this[_0x162c81(0x105)][_0x162c81(0x112)]['create']({'name':this[_0x162c81(0x108)][_0x162c81(0x104)]})),this['branch']=_0x1a7e17;}async['getComponentIds'](){const _0xc00c59=a106_0x3de1e3;return this[_0xc00c59(0x108)][_0xc00c59(0x158)]?this['salesforceSync'][_0xc00c59(0x12b)](this[_0xc00c59(0x108)][_0xc00c59(0x158)]):this[_0xc00c59(0x111)][_0xc00c59(0x14c)](this['syncData'][_0xc00c59(0x114)]);}async[a106_0x3de1e3(0x12f)](){const _0x1f4ef6=a106_0x3de1e3,_0x218ae5=await this['getComponentIds'](),_0x4d7187=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x1f4ef6(0x10e)]),_0x215a91=await _0x4d7187['run'](_0x218ae5);return _0x215a91;}async[a106_0x3de1e3(0x11a)](_0x5f4e1b){const _0x18be43=a106_0x3de1e3,_0x52369a=new commit_components_dto_1['CommitComponentsDto']();return _0x52369a[_0x18be43(0x140)]=_0x18be43(0x12c),_0x52369a[_0x18be43(0x144)]={'name':constants_1[_0x18be43(0x141)],'email':constants_1[_0x18be43(0x13f)]},_0x52369a[_0x18be43(0x134)]={'writed':await this[_0x18be43(0x12f)]()},_0x52369a[_0x18be43(0x152)]=_0x5f4e1b,_0x52369a['repo']=this[_0x18be43(0x105)],_0x52369a[_0x18be43(0x129)]=this[_0x18be43(0x129)],_0x52369a[_0x18be43(0x147)]=!![],_0x52369a['provider']=this[_0x18be43(0x157)],_0x52369a;}async[a106_0x3de1e3(0x12a)](){const _0x4e3d9f=a106_0x3de1e3,_0x28ee4a=await this[_0x4e3d9f(0x111)][_0x4e3d9f(0x10a)](this[_0x4e3d9f(0x108)]),_0x4fe28a=await this[_0x4e3d9f(0x10e)][_0x4e3d9f(0x100)](_0x28ee4a)['then'](_0x182caa=>typeof _0x182caa===_0x4e3d9f(0x139)?JSON[_0x4e3d9f(0x115)](_0x182caa):_0x182caa)['catch'](()=>({}));if(_0x4fe28a[this[_0x4e3d9f(0x105)][_0x4e3d9f(0x145)]]){if(_0x4fe28a[this[_0x4e3d9f(0x105)]['gitUrl']][_0x4e3d9f(0x13d)]===this['branch']['sha'])return!![];}return![];}async['updateLastCommit'](){const _0xd7760f=a106_0x3de1e3,_0x42c15b=await this['repository'][_0xd7760f(0x112)][_0xd7760f(0x106)](this[_0xd7760f(0x129)][_0xd7760f(0x11b)]);await this[_0xd7760f(0x10c)]['log'](this[_0xd7760f(0x101)]+_0xd7760f(0x110));const _0x11f9c7={[this[_0xd7760f(0x105)][_0xd7760f(0x145)]]:{'lastCommit':_0x42c15b[_0xd7760f(0x12d)]}};await this[_0xd7760f(0x111)][_0xd7760f(0x10d)](this[_0xd7760f(0x108)],_0x11f9c7);}async[a106_0x3de1e3(0x109)]({syncRecord:_0x37b948,repository:_0x55d034,convertToSFDX:_0x153e8c,provider:_0x388fb0}){const _0xdde306=a106_0x3de1e3;this['syncData']=_0x37b948,this[_0xdde306(0x157)]=_0x388fb0,this['repository']=_0x55d034,this[_0xdde306(0x10c)]=typedi_1[_0xdde306(0x130)][_0xdde306(0x137)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0xdde306(0x101)]=_0xdde306(0x125)+this[_0xdde306(0x108)][_0xdde306(0x113)]+']\x20[Branch:\x20'+this[_0xdde306(0x108)][_0xdde306(0x104)]+']';try{await this[_0xdde306(0x10c)][_0xdde306(0x14e)](this[_0xdde306(0x101)]+_0xdde306(0x13e))[_0xdde306(0x14b)](),await this[_0xdde306(0x111)][_0xdde306(0x11f)](this[_0xdde306(0x108)],_0xdde306(0x15a)),this[_0xdde306(0x10c)][_0xdde306(0x14e)](this[_0xdde306(0x101)]+_0xdde306(0x13b)),await this['createBranchIfNotExists'](),await this[_0xdde306(0x10c)]['log'](this[_0xdde306(0x101)]+'\x20Checking\x20sync\x20status.')[_0xdde306(0x14b)]();const _0x11af41=await this[_0xdde306(0x12a)]();this[_0xdde306(0x10c)][_0xdde306(0x14e)](this[_0xdde306(0x101)]+_0xdde306(0x10f)+_0x11af41+'.');if(_0x11af41){await this[_0xdde306(0x111)][_0xdde306(0x11f)](this[_0xdde306(0x108)],_0xdde306(0x132)),await this[_0xdde306(0x10c)][_0xdde306(0x14e)](this[_0xdde306(0x101)]+'\x20Branch\x20synchronized.\x20Skip')[_0xdde306(0x14b)]();return;}const _0x566398=await this[_0xdde306(0x11a)](_0x153e8c);await this[_0xdde306(0x156)][_0xdde306(0x109)](_0x566398,this[_0xdde306(0x101)]),await this['salesforceSync'][_0xdde306(0x11f)](this[_0xdde306(0x108)],_0xdde306(0x132)),await this[_0xdde306(0x14d)](),this[_0xdde306(0x10c)][_0xdde306(0x14e)](this[_0xdde306(0x101)]+_0xdde306(0x123));}catch(_0x348066){throw _0x348066;}finally{await this[_0xdde306(0x10c)][_0xdde306(0x14b)]();}}};function a106_0x2441(){const _0x4bce55=['setStatus','metadata','(((.+)+)+)+$','1281wwkQRL','\x20Flosum\x20sync\x20job\x20done.','1881036LXrqpE','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','../../../../constants','../../salesforce/services/salesforce.service','apply','branch','checkSyncStatus','getComponentsFromRepository','Sync\x20repository','sha','__metadata','getComponents','Container','length','Completed','18ibSTqY','components','4504744CuZpBF','typedi','get','__esModule','string','constructor','\x20Checking\x20repository\x20on\x20Flosum\x20side.','209DMmzQv','lastCommit','\x20Start\x20Flosum\x20sync\x20job','DEFAULT_GIT_USER_EMAIL','message','DEFAULT_GIT_USER_NAME','6EmEXiy','5OHgqyv','user','gitUrl','../../salesforce/services/salesforce-retriever.service','force','design:paramtypes','CommitComponentsJob','createBranchIfNotExists','send','getBranchComponents','updateLastCommit','log','SalesforceSyncService','search','850638puhaNK','convertToSFDX','Service','../../salesforce/services/salesforce-sync.service','./commit-components.job','commitJob','provider','repositoryId','3187989hablQO','In\x20Progress','retrieveAttachment','prefix','toString','../dto/commit-components.dto','branchName','repository','getOne','8376VYwqBQ','syncData','run','getRemoteStateAttachmentId','5634110ZEAmAf','sfLogger','updateRemoteState','salesforceService','\x20Sync\x20status\x20','\x20Update\x20remote\x20state.','salesforceSync','branches','repositoryName','branchId','parse','defineProperty','getOwnPropertyDescriptor','object','FlosumSyncJob','getCommitDto','name','decorate','../../salesforce/services/salesforce-logger-v3.service','335842lyrPSJ'];a106_0x2441=function(){return _0x4bce55;};return a106_0x2441();}FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x3de1e3(0x153)])({'transient':!![]}),__metadata(a106_0x3de1e3(0x148),[salesforce_sync_service_1[a106_0x3de1e3(0x14f)],salesforce_service_1['SalesforceService'],commit_components_job_1[a106_0x3de1e3(0x149)]])],FlosumSyncJob),exports[a106_0x3de1e3(0x119)]=FlosumSyncJob;