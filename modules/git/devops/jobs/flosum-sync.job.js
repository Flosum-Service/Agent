const a106_0x19dacf=a106_0x4524;(function(_0x3cfaf9,_0x2d5b03){const _0x11fa49=a106_0x4524,_0x2407ae=_0x3cfaf9();while(!![]){try{const _0x2f0ed0=-parseInt(_0x11fa49(0x106))/0x1+parseInt(_0x11fa49(0xdf))/0x2+-parseInt(_0x11fa49(0xc8))/0x3*(-parseInt(_0x11fa49(0xe7))/0x4)+parseInt(_0x11fa49(0xd5))/0x5+parseInt(_0x11fa49(0x115))/0x6+parseInt(_0x11fa49(0xdb))/0x7+-parseInt(_0x11fa49(0xc5))/0x8;if(_0x2f0ed0===_0x2d5b03)break;else _0x2407ae['push'](_0x2407ae['shift']());}catch(_0x2874c0){_0x2407ae['push'](_0x2407ae['shift']());}}}(a106_0x3db9,0x88f93));const a106_0x473234=(function(){let _0x4ff42e=!![];return function(_0x11e72e,_0x27ad28){const _0x2fcf06=_0x4ff42e?function(){const _0x541d91=a106_0x4524;if(_0x27ad28){const _0x2a83e4=_0x27ad28[_0x541d91(0xcd)](_0x11e72e,arguments);return _0x27ad28=null,_0x2a83e4;}}:function(){};return _0x4ff42e=![],_0x2fcf06;};}()),a106_0xe2d4a=a106_0x473234(this,function(){const _0x279efa=a106_0x4524;return a106_0xe2d4a[_0x279efa(0x104)]()[_0x279efa(0xfc)](_0x279efa(0xd8))[_0x279efa(0x104)]()[_0x279efa(0xe9)](a106_0xe2d4a)[_0x279efa(0xfc)](_0x279efa(0xd8));});function a106_0x4524(_0x124455,_0x239f6a){const _0x2bcd75=a106_0x3db9();return a106_0x4524=function(_0xe2d4a,_0x473234){_0xe2d4a=_0xe2d4a-0xc5;let _0x3db9f1=_0x2bcd75[_0xe2d4a];return _0x3db9f1;},a106_0x4524(_0x124455,_0x239f6a);}a106_0xe2d4a();'use strict';var __decorate=this&&this['__decorate']||function(_0x53765f,_0x2d7889,_0xb28f1c,_0x3549d9){const _0x2e78fe=a106_0x4524;var _0x5172f8=arguments[_0x2e78fe(0xd0)],_0x3c6854=_0x5172f8<0x3?_0x2d7889:_0x3549d9===null?_0x3549d9=Object[_0x2e78fe(0xf8)](_0x2d7889,_0xb28f1c):_0x3549d9,_0x2af203;if(typeof Reflect==='object'&&typeof Reflect[_0x2e78fe(0x11b)]===_0x2e78fe(0xf5))_0x3c6854=Reflect['decorate'](_0x53765f,_0x2d7889,_0xb28f1c,_0x3549d9);else{for(var _0xaaa456=_0x53765f[_0x2e78fe(0xd0)]-0x1;_0xaaa456>=0x0;_0xaaa456--)if(_0x2af203=_0x53765f[_0xaaa456])_0x3c6854=(_0x5172f8<0x3?_0x2af203(_0x3c6854):_0x5172f8>0x3?_0x2af203(_0x2d7889,_0xb28f1c,_0x3c6854):_0x2af203(_0x2d7889,_0xb28f1c))||_0x3c6854;}return _0x5172f8>0x3&&_0x3c6854&&Object[_0x2e78fe(0xf7)](_0x2d7889,_0xb28f1c,_0x3c6854),_0x3c6854;},__metadata=this&&this[a106_0x19dacf(0x10e)]||function(_0x38e971,_0x2da474){const _0xc32dd3=a106_0x19dacf;if(typeof Reflect===_0xc32dd3(0xf4)&&typeof Reflect['metadata']===_0xc32dd3(0xf5))return Reflect[_0xc32dd3(0xc7)](_0x38e971,_0x2da474);};Object[a106_0x19dacf(0xf7)](exports,a106_0x19dacf(0xcb),{'value':!![]}),exports[a106_0x19dacf(0xd2)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x19dacf(0xdc)),typedi_1=require(a106_0x19dacf(0x11a)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a106_0x19dacf(0xea)),salesforce_sync_service_1=require(a106_0x19dacf(0xca)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a106_0x19dacf(0x113)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1cc91a,_0x56c402,_0x5f2604){const _0x2e132b=a106_0x19dacf;this[_0x2e132b(0x103)]=_0x1cc91a,this[_0x2e132b(0xec)]=_0x56c402,this[_0x2e132b(0xce)]=_0x5f2604;}async[a106_0x19dacf(0x105)](){const _0x2d5379=a106_0x19dacf;let _0x3de129=await this[_0x2d5379(0xd9)][_0x2d5379(0x117)][_0x2d5379(0xf0)](this['syncData']['branchName'])[_0x2d5379(0xf6)](()=>null);!_0x3de129&&(_0x3de129=await this[_0x2d5379(0xd9)][_0x2d5379(0x117)][_0x2d5379(0xe1)]({'name':this[_0x2d5379(0xf3)][_0x2d5379(0x101)]})),this[_0x2d5379(0xe6)]=_0x3de129;}async[a106_0x19dacf(0xcf)](){const _0x55681f=a106_0x19dacf;return this[_0x55681f(0xf3)][_0x55681f(0xde)]?this['salesforceSync']['getComponentsFromRepository'](this[_0x55681f(0xf3)][_0x55681f(0xde)]):this['salesforceSync'][_0x55681f(0x10d)](this[_0x55681f(0xf3)]['branchId']);}async[a106_0x19dacf(0xf2)](){const _0x5e64de=a106_0x19dacf,_0x294ce3=await this[_0x5e64de(0xcf)](),_0x35f1ff=new salesforce_retriever_service_1[(_0x5e64de(0x110))](this['salesforceService']),_0x2b9729=await _0x35f1ff[_0x5e64de(0xd1)](_0x294ce3);return _0x2b9729;}async[a106_0x19dacf(0xe0)](_0x49e673){const _0x4fe1de=a106_0x19dacf,_0x37daf5=new commit_components_dto_1[(_0x4fe1de(0xcc))]();return _0x37daf5['message']=_0x4fe1de(0xe5),_0x37daf5[_0x4fe1de(0xd4)]={'name':constants_1[_0x4fe1de(0xd6)],'email':constants_1[_0x4fe1de(0x114)]},_0x37daf5[_0x4fe1de(0x10c)]={'writed':await this[_0x4fe1de(0xf2)]()},_0x37daf5[_0x4fe1de(0xe2)]=_0x49e673,_0x37daf5[_0x4fe1de(0xed)]=this[_0x4fe1de(0xd9)],_0x37daf5[_0x4fe1de(0xe6)]=this[_0x4fe1de(0xe6)],_0x37daf5[_0x4fe1de(0xd3)]=!![],_0x37daf5[_0x4fe1de(0xdd)]=this[_0x4fe1de(0xdd)],_0x37daf5;}async['checkSyncStatus'](){const _0x335c50=a106_0x19dacf,_0x1b5ad1=await this['salesforceSync'][_0x335c50(0xe3)](this[_0x335c50(0xf3)]),_0x16a27c=await this[_0x335c50(0xec)]['retrieveAttachment'](_0x1b5ad1)[_0x335c50(0x118)](_0x11b04f=>typeof _0x11b04f===_0x335c50(0xeb)?JSON[_0x335c50(0x102)](_0x11b04f):_0x11b04f)[_0x335c50(0xf6)](()=>({}));if(_0x16a27c[this[_0x335c50(0xd9)][_0x335c50(0xff)]]){if(_0x16a27c[this['repository'][_0x335c50(0xff)]][_0x335c50(0x10b)]===this[_0x335c50(0xe6)][_0x335c50(0x116)])return!![];}return![];}async[a106_0x19dacf(0x108)](){const _0x2c26a7=a106_0x19dacf,_0x476c91=await this[_0x2c26a7(0xd9)][_0x2c26a7(0x117)][_0x2c26a7(0xf0)](this[_0x2c26a7(0xe6)][_0x2c26a7(0x10a)]);await this[_0x2c26a7(0x100)][_0x2c26a7(0x112)](this[_0x2c26a7(0xc6)]+_0x2c26a7(0xd7));const _0x6f263c={[this['repository']['gitUrl']]:{'lastCommit':_0x476c91[_0x2c26a7(0x116)]}};await this['salesforceSync'][_0x2c26a7(0xfd)](this['syncData'],_0x6f263c);}async[a106_0x19dacf(0xd1)]({syncRecord:_0x441fbb,repository:_0x43e559,convertToSFDX:_0x319c40,provider:_0x28d28d}){const _0x385b86=a106_0x19dacf;this[_0x385b86(0xf3)]=_0x441fbb,this[_0x385b86(0xdd)]=_0x28d28d,this[_0x385b86(0xd9)]=_0x43e559,this[_0x385b86(0x100)]=typedi_1[_0x385b86(0xef)][_0x385b86(0x10f)](salesforce_logger_v3_service_1['SalesforceLogger3']),this['prefix']=_0x385b86(0x111)+this['syncData'][_0x385b86(0xda)]+_0x385b86(0xe8)+this['syncData'][_0x385b86(0x101)]+']';try{await this[_0x385b86(0x100)]['log'](this['prefix']+_0x385b86(0xfa))['send'](),await this[_0x385b86(0x103)][_0x385b86(0x107)](this['syncData'],_0x385b86(0xe4)),this[_0x385b86(0x100)][_0x385b86(0x112)](this[_0x385b86(0xc6)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x385b86(0x105)](),await this[_0x385b86(0x100)][_0x385b86(0x112)](this[_0x385b86(0xc6)]+_0x385b86(0xee))[_0x385b86(0xfe)]();const _0x39c750=await this[_0x385b86(0xf1)]();this[_0x385b86(0x100)][_0x385b86(0x112)](this['prefix']+_0x385b86(0xf9)+_0x39c750+'.');if(_0x39c750){await this[_0x385b86(0x103)][_0x385b86(0x107)](this['syncData'],_0x385b86(0x119)),await this[_0x385b86(0x100)][_0x385b86(0x112)](this[_0x385b86(0xc6)]+_0x385b86(0x109))[_0x385b86(0xfe)]();return;}const _0x23efca=await this[_0x385b86(0xe0)](_0x319c40);await this[_0x385b86(0xce)][_0x385b86(0xd1)](_0x23efca,this[_0x385b86(0xc6)]),await this[_0x385b86(0x103)][_0x385b86(0x107)](this[_0x385b86(0xf3)],_0x385b86(0x119)),await this[_0x385b86(0x108)](),this[_0x385b86(0x100)][_0x385b86(0x112)](this['prefix']+_0x385b86(0xc9));}catch(_0x3e6ab1){throw _0x3e6ab1;}finally{await this[_0x385b86(0x100)][_0x385b86(0xfe)]();}}};function a106_0x3db9(){const _0x1b7bff=['\x20Start\x20Flosum\x20sync\x20job','SalesforceSyncService','search','updateRemoteState','send','gitUrl','sfLogger','branchName','parse','salesforceSync','toString','createBranchIfNotExists','629088lzJSBt','setStatus','updateLastCommit','\x20Branch\x20synchronized.\x20Skip','name','lastCommit','components','getBranchComponents','__metadata','get','SalesforceRetrieverService','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','log','../dto/commit-components.dto','DEFAULT_GIT_USER_EMAIL','3082278Iytzjn','sha','branches','then','Completed','typedi','decorate','10794136GDOAbl','prefix','metadata','1317858buWWqj','\x20Flosum\x20sync\x20job\x20done.','../../salesforce/services/salesforce-sync.service','__esModule','CommitComponentsDto','apply','commitJob','getComponentIds','length','run','FlosumSyncJob','force','user','2953510whtpBE','DEFAULT_GIT_USER_NAME','\x20Update\x20remote\x20state.','(((.+)+)+)+$','repository','repositoryName','2449230KJHWFj','../../salesforce/services/salesforce-logger-v3.service','provider','repositoryId','413042mcKlPj','getCommitDto','create','convertToSFDX','getRemoteStateAttachmentId','In\x20Progress','Sync\x20repository','branch','8qRWPxV',']\x20[Branch:\x20','constructor','../../salesforce/services/salesforce-retriever.service','string','salesforceService','repo','\x20Checking\x20sync\x20status.','Container','getOne','checkSyncStatus','getComponents','syncData','object','function','catch','defineProperty','getOwnPropertyDescriptor','\x20Sync\x20status\x20'];a106_0x3db9=function(){return _0x1b7bff;};return a106_0x3db9();}FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a106_0x19dacf(0xfb)],salesforce_service_1['SalesforceService'],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;