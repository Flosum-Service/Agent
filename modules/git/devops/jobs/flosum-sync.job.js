const a106_0x586e5c=a106_0x531c;(function(_0x3230b4,_0x2bce60){const _0x3f834a=a106_0x531c,_0x37bc66=_0x3230b4();while(!![]){try{const _0x7f77e2=parseInt(_0x3f834a(0x210))/0x1*(parseInt(_0x3f834a(0x1e1))/0x2)+-parseInt(_0x3f834a(0x218))/0x3+-parseInt(_0x3f834a(0x20d))/0x4*(-parseInt(_0x3f834a(0x1f5))/0x5)+parseInt(_0x3f834a(0x1d0))/0x6+-parseInt(_0x3f834a(0x202))/0x7*(-parseInt(_0x3f834a(0x1cc))/0x8)+-parseInt(_0x3f834a(0x1e3))/0x9*(-parseInt(_0x3f834a(0x21a))/0xa)+-parseInt(_0x3f834a(0x1db))/0xb;if(_0x7f77e2===_0x2bce60)break;else _0x37bc66['push'](_0x37bc66['shift']());}catch(_0x34ce32){_0x37bc66['push'](_0x37bc66['shift']());}}}(a106_0x39ea,0x1a540));const a106_0x406e77=(function(){let _0x1fc76b=!![];return function(_0xe99d22,_0x45f0ed){const _0x3334b5=_0x1fc76b?function(){if(_0x45f0ed){const _0xf0720a=_0x45f0ed['apply'](_0xe99d22,arguments);return _0x45f0ed=null,_0xf0720a;}}:function(){};return _0x1fc76b=![],_0x3334b5;};}()),a106_0x53601c=a106_0x406e77(this,function(){const _0xb49fdb=a106_0x531c;return a106_0x53601c[_0xb49fdb(0x1f9)]()[_0xb49fdb(0x20e)](_0xb49fdb(0x1f6))[_0xb49fdb(0x1f9)]()[_0xb49fdb(0x1f0)](a106_0x53601c)[_0xb49fdb(0x20e)](_0xb49fdb(0x1f6));});a106_0x53601c();function a106_0x531c(_0x699afd,_0x3f6701){const _0x2fcc5e=a106_0x39ea();return a106_0x531c=function(_0x53601c,_0x406e77){_0x53601c=_0x53601c-0x1c8;let _0x39ea9b=_0x2fcc5e[_0x53601c];return _0x39ea9b;},a106_0x531c(_0x699afd,_0x3f6701);}function a106_0x39ea(){const _0x3d7bb0=['SalesforceRetrieverService','checkSyncStatus','DEFAULT_GIT_USER_EMAIL','504FSPzir','../../salesforce/services/salesforce.service','../../salesforce/services/salesforce-logger-v3.service','SalesforceSyncService','__decorate','getComponentsFromRepository','branch','updateRemoteState','length','message','Container','3372AFluGm','search','getRemoteStateAttachmentId','6143DIEtQt','sha','repo','then',']\x20[Branch:\x20','CommitComponentsDto','setStatus','Completed','263058AHCGNM','\x20Branch\x20synchronized.\x20Skip','4010qLhQZG','salesforceService','__esModule','provider','retrieveAttachment','2672ATIjct','branchName','getComponentIds','\x20Checking\x20sync\x20status.','659226ETuJtk','gitUrl','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','send','catch','Service','get','updateLastCommit','Sync\x20repository','salesforceSync','defineProperty','2638438MpqOiD','object','parse','In\x20Progress','convertToSFDX','log','6vKqZUf','\x20Start\x20Flosum\x20sync\x20job','3609QTUDtK','repositoryName','getComponents','getCommitDto','run','create','metadata','../../salesforce/services/salesforce-sync.service','name','SalesforceLogger3','\x20Sync\x20status\x20','getBranchComponents','syncData','constructor','./commit-components.job','typedi','repository','branches','725GvlVSd','(((.+)+)+)+$','user','getOwnPropertyDescriptor','toString','function','decorate','sfLogger','SalesforceService','prefix'];a106_0x39ea=function(){return _0x3d7bb0;};return a106_0x39ea();}'use strict';var __decorate=this&&this[a106_0x586e5c(0x206)]||function(_0x14201d,_0xeb55f7,_0x21679d,_0x35c6f9){const _0xc5e8d6=a106_0x586e5c;var _0x48133a=arguments[_0xc5e8d6(0x20a)],_0x500fd3=_0x48133a<0x3?_0xeb55f7:_0x35c6f9===null?_0x35c6f9=Object[_0xc5e8d6(0x1f8)](_0xeb55f7,_0x21679d):_0x35c6f9,_0x26d2dd;if(typeof Reflect===_0xc5e8d6(0x1dc)&&typeof Reflect[_0xc5e8d6(0x1fb)]===_0xc5e8d6(0x1fa))_0x500fd3=Reflect[_0xc5e8d6(0x1fb)](_0x14201d,_0xeb55f7,_0x21679d,_0x35c6f9);else{for(var _0x511c9a=_0x14201d['length']-0x1;_0x511c9a>=0x0;_0x511c9a--)if(_0x26d2dd=_0x14201d[_0x511c9a])_0x500fd3=(_0x48133a<0x3?_0x26d2dd(_0x500fd3):_0x48133a>0x3?_0x26d2dd(_0xeb55f7,_0x21679d,_0x500fd3):_0x26d2dd(_0xeb55f7,_0x21679d))||_0x500fd3;}return _0x48133a>0x3&&_0x500fd3&&Object[_0xc5e8d6(0x1da)](_0xeb55f7,_0x21679d,_0x500fd3),_0x500fd3;},__metadata=this&&this['__metadata']||function(_0x580b78,_0x43b6c0){const _0x1ea308=a106_0x586e5c;if(typeof Reflect===_0x1ea308(0x1dc)&&typeof Reflect[_0x1ea308(0x1e9)]===_0x1ea308(0x1fa))return Reflect[_0x1ea308(0x1e9)](_0x580b78,_0x43b6c0);};Object[a106_0x586e5c(0x1da)](exports,a106_0x586e5c(0x1c9),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x586e5c(0x204)),typedi_1=require(a106_0x586e5c(0x1f2)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a106_0x586e5c(0x1ea)),salesforce_service_1=require(a106_0x586e5c(0x203)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a106_0x586e5c(0x1f1));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x2c9422,_0x207c5e,_0x5a06c9){const _0x5aa5ed=a106_0x586e5c;this['salesforceSync']=_0x2c9422,this[_0x5aa5ed(0x1c8)]=_0x207c5e,this['commitJob']=_0x5a06c9;}async['createBranchIfNotExists'](){const _0x4c4b24=a106_0x586e5c;let _0x40a86b=await this[_0x4c4b24(0x1f3)][_0x4c4b24(0x1f4)]['getOne'](this[_0x4c4b24(0x1ef)][_0x4c4b24(0x1cd)])[_0x4c4b24(0x1d4)](()=>null);!_0x40a86b&&(_0x40a86b=await this[_0x4c4b24(0x1f3)][_0x4c4b24(0x1f4)][_0x4c4b24(0x1e8)]({'name':this[_0x4c4b24(0x1ef)][_0x4c4b24(0x1cd)]})),this[_0x4c4b24(0x208)]=_0x40a86b;}async[a106_0x586e5c(0x1ce)](){const _0xe10494=a106_0x586e5c;return this[_0xe10494(0x1ef)]['repositoryId']?this[_0xe10494(0x1d9)][_0xe10494(0x207)](this[_0xe10494(0x1ef)]['repositoryId']):this['salesforceSync'][_0xe10494(0x1ee)](this[_0xe10494(0x1ef)]['branchId']);}async[a106_0x586e5c(0x1e5)](){const _0xa19bb1=a106_0x586e5c,_0x16fd82=await this[_0xa19bb1(0x1ce)](),_0xfbd4d4=new salesforce_retriever_service_1[(_0xa19bb1(0x1ff))](this['salesforceService']),_0x4b0007=await _0xfbd4d4['run'](_0x16fd82);return _0x4b0007;}async[a106_0x586e5c(0x1e6)](_0xa3744){const _0x2a6430=a106_0x586e5c,_0x5d3a62=new commit_components_dto_1[(_0x2a6430(0x215))]();return _0x5d3a62[_0x2a6430(0x20b)]=_0x2a6430(0x1d8),_0x5d3a62[_0x2a6430(0x1f7)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x2a6430(0x201)]},_0x5d3a62['components']={'writed':await this[_0x2a6430(0x1e5)]()},_0x5d3a62[_0x2a6430(0x1df)]=_0xa3744,_0x5d3a62[_0x2a6430(0x212)]=this['repository'],_0x5d3a62[_0x2a6430(0x208)]=this[_0x2a6430(0x208)],_0x5d3a62['force']=!![],_0x5d3a62[_0x2a6430(0x1ca)]=this[_0x2a6430(0x1ca)],_0x5d3a62;}async[a106_0x586e5c(0x200)](){const _0x33021e=a106_0x586e5c,_0x42b324=await this[_0x33021e(0x1d9)][_0x33021e(0x20f)](this['syncData']),_0x236ebd=await this['salesforceService'][_0x33021e(0x1cb)](_0x42b324)[_0x33021e(0x213)](_0x3cb73b=>typeof _0x3cb73b==='string'?JSON[_0x33021e(0x1dd)](_0x3cb73b):_0x3cb73b)['catch'](()=>({}));if(_0x236ebd[this[_0x33021e(0x1f3)][_0x33021e(0x1d1)]]){if(_0x236ebd[this['repository'][_0x33021e(0x1d1)]]['lastCommit']===this[_0x33021e(0x208)][_0x33021e(0x211)])return!![];}return![];}async[a106_0x586e5c(0x1d7)](){const _0x146cf3=a106_0x586e5c,_0x226ff7=await this[_0x146cf3(0x1f3)][_0x146cf3(0x1f4)]['getOne'](this[_0x146cf3(0x208)][_0x146cf3(0x1eb)]);await this['sfLogger'][_0x146cf3(0x1e0)](this[_0x146cf3(0x1fe)]+'\x20Update\x20remote\x20state.');const _0x4acca6={[this[_0x146cf3(0x1f3)]['gitUrl']]:{'lastCommit':_0x226ff7[_0x146cf3(0x211)]}};await this[_0x146cf3(0x1d9)][_0x146cf3(0x209)](this[_0x146cf3(0x1ef)],_0x4acca6);}async[a106_0x586e5c(0x1e7)]({syncRecord:_0x23c07a,repository:_0x8292d,convertToSFDX:_0x561918,provider:_0x4c5d11}){const _0x1e9f3b=a106_0x586e5c;this[_0x1e9f3b(0x1ef)]=_0x23c07a,this[_0x1e9f3b(0x1ca)]=_0x4c5d11,this[_0x1e9f3b(0x1f3)]=_0x8292d,this[_0x1e9f3b(0x1fc)]=typedi_1[_0x1e9f3b(0x20c)][_0x1e9f3b(0x1d6)](salesforce_logger_v3_service_1[_0x1e9f3b(0x1ec)]),this[_0x1e9f3b(0x1fe)]=_0x1e9f3b(0x1d2)+this['syncData'][_0x1e9f3b(0x1e4)]+_0x1e9f3b(0x214)+this[_0x1e9f3b(0x1ef)][_0x1e9f3b(0x1cd)]+']';try{await this['sfLogger']['log'](this[_0x1e9f3b(0x1fe)]+_0x1e9f3b(0x1e2))['send'](),await this[_0x1e9f3b(0x1d9)][_0x1e9f3b(0x216)](this[_0x1e9f3b(0x1ef)],_0x1e9f3b(0x1de)),this['sfLogger'][_0x1e9f3b(0x1e0)](this[_0x1e9f3b(0x1fe)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this['createBranchIfNotExists'](),await this[_0x1e9f3b(0x1fc)]['log'](this[_0x1e9f3b(0x1fe)]+_0x1e9f3b(0x1cf))[_0x1e9f3b(0x1d3)]();const _0x283581=await this[_0x1e9f3b(0x200)]();this[_0x1e9f3b(0x1fc)]['log'](this[_0x1e9f3b(0x1fe)]+_0x1e9f3b(0x1ed)+_0x283581+'.');if(_0x283581){await this[_0x1e9f3b(0x1d9)][_0x1e9f3b(0x216)](this[_0x1e9f3b(0x1ef)],_0x1e9f3b(0x217)),await this[_0x1e9f3b(0x1fc)][_0x1e9f3b(0x1e0)](this[_0x1e9f3b(0x1fe)]+_0x1e9f3b(0x219))['send']();return;}const _0x37df9d=await this[_0x1e9f3b(0x1e6)](_0x561918);await this['commitJob'][_0x1e9f3b(0x1e7)](_0x37df9d,this['prefix']),await this[_0x1e9f3b(0x1d9)][_0x1e9f3b(0x216)](this['syncData'],_0x1e9f3b(0x217)),await this[_0x1e9f3b(0x1d7)](),this[_0x1e9f3b(0x1fc)][_0x1e9f3b(0x1e0)](this['prefix']+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x239068){throw _0x239068;}finally{await this['sfLogger'][_0x1e9f3b(0x1d3)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x586e5c(0x1d5)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a106_0x586e5c(0x205)],salesforce_service_1[a106_0x586e5c(0x1fd)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;