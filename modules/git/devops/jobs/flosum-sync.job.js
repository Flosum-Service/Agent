const a75_0x228df1=a75_0x3ca0;(function(_0x39a0a1,_0x11ae62){const _0x24aeb2=a75_0x3ca0,_0x1e8c1e=_0x39a0a1();while(!![]){try{const _0x18c970=-parseInt(_0x24aeb2(0x103))/0x1*(parseInt(_0x24aeb2(0xc9))/0x2)+-parseInt(_0x24aeb2(0xb8))/0x3+-parseInt(_0x24aeb2(0xae))/0x4+-parseInt(_0x24aeb2(0xe7))/0x5*(parseInt(_0x24aeb2(0xba))/0x6)+parseInt(_0x24aeb2(0x102))/0x7+parseInt(_0x24aeb2(0xca))/0x8*(-parseInt(_0x24aeb2(0xf8))/0x9)+-parseInt(_0x24aeb2(0xec))/0xa*(-parseInt(_0x24aeb2(0xcf))/0xb);if(_0x18c970===_0x11ae62)break;else _0x1e8c1e['push'](_0x1e8c1e['shift']());}catch(_0x55e3ae){_0x1e8c1e['push'](_0x1e8c1e['shift']());}}}(a75_0x54ea,0xb82fc));const a75_0x1763f4=(function(){let _0x5a5f80=!![];return function(_0xeabefa,_0x321edc){const _0x55444b=_0x5a5f80?function(){const _0x35c0d0=a75_0x3ca0;if(_0x321edc){const _0x257362=_0x321edc[_0x35c0d0(0xb7)](_0xeabefa,arguments);return _0x321edc=null,_0x257362;}}:function(){};return _0x5a5f80=![],_0x55444b;};}()),a75_0x4cb273=a75_0x1763f4(this,function(){const _0x1e76dc=a75_0x3ca0;return a75_0x4cb273[_0x1e76dc(0xf9)]()['search'](_0x1e76dc(0xc7))['toString']()[_0x1e76dc(0xb2)](a75_0x4cb273)['search'](_0x1e76dc(0xc7));});a75_0x4cb273();'use strict';var __decorate=this&&this[a75_0x228df1(0x105)]||function(_0x53283c,_0x14836d,_0x434514,_0x40c2ed){const _0x12dbc0=a75_0x228df1;var _0x183d97=arguments['length'],_0x1b6b57=_0x183d97<0x3?_0x14836d:_0x40c2ed===null?_0x40c2ed=Object[_0x12dbc0(0xfd)](_0x14836d,_0x434514):_0x40c2ed,_0x1401ba;if(typeof Reflect==='object'&&typeof Reflect[_0x12dbc0(0xef)]===_0x12dbc0(0xf3))_0x1b6b57=Reflect[_0x12dbc0(0xef)](_0x53283c,_0x14836d,_0x434514,_0x40c2ed);else{for(var _0x674079=_0x53283c[_0x12dbc0(0xb5)]-0x1;_0x674079>=0x0;_0x674079--)if(_0x1401ba=_0x53283c[_0x674079])_0x1b6b57=(_0x183d97<0x3?_0x1401ba(_0x1b6b57):_0x183d97>0x3?_0x1401ba(_0x14836d,_0x434514,_0x1b6b57):_0x1401ba(_0x14836d,_0x434514))||_0x1b6b57;}return _0x183d97>0x3&&_0x1b6b57&&Object[_0x12dbc0(0xf2)](_0x14836d,_0x434514,_0x1b6b57),_0x1b6b57;},__metadata=this&&this[a75_0x228df1(0xeb)]||function(_0x53916a,_0x19b91d){const _0x1909ae=a75_0x228df1;if(typeof Reflect===_0x1909ae(0xbb)&&typeof Reflect[_0x1909ae(0xff)]===_0x1909ae(0xf3))return Reflect[_0x1909ae(0xff)](_0x53916a,_0x19b91d);};Object[a75_0x228df1(0xf2)](exports,a75_0x228df1(0xf5),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require(a75_0x228df1(0xde)),typedi_1=require('typedi'),constants_1=require(a75_0x228df1(0xcb)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a75_0x228df1(0xe2)),salesforce_service_1=require(a75_0x228df1(0xd0)),commit_components_dto_1=require(a75_0x228df1(0xf1)),commit_components_job_1=require(a75_0x228df1(0xe0));function a75_0x54ea(){const _0x58dc3b=['FlosumSyncJob','../../salesforce/services/salesforce-sync.service','Sync\x20repository','run','\x20Flosum\x20sync\x20job\x20done.','syncData','1028035epMACe','string','DEFAULT_GIT_USER_EMAIL','DEFAULT_GIT_USER_NAME','__metadata','6133910rxKRwk','updateRemoteState','\x20Checking\x20repository\x20on\x20Flosum\x20side.','decorate','parse','../dto/commit-components.dto','defineProperty','function','send','__esModule','updateLastCommit','In\x20Progress','18xUmXuR','toString','salesforceSync','Completed','create','getOwnPropertyDescriptor','message','metadata','gitUrl','convertToSFDX','7318976ijXsQS','2WWfpZX','provider','__decorate','SalesforceLogger3','log','name','getRemoteStateAttachmentId','2819692ZaQLpX','CommitComponentsDto','branch','createBranchIfNotExists','constructor','prefix','then','length','getComponentIds','apply','1643508kqLaRI','\x20Checking\x20sync\x20status.','24jzBcHF','object','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','repositoryId','CommitComponentsJob','SalesforceSyncService','getOne','retrieveAttachment','setStatus','repo','sfLogger','Service','branches','(((.+)+)+)+$','branchName','778484SRuNAn','2017696kEKdVx','../../../../constants','Container','catch','salesforceService','55WBWgHG','../../salesforce/services/salesforce.service',']\x20[Branch:\x20','get','lastCommit','getCommitDto','getBranchComponents','user','repository','checkSyncStatus','SalesforceRetrieverService','\x20Branch\x20synchronized.\x20Skip','design:paramtypes','branchId','sha','../../salesforce/services/salesforce-logger-v3.service','force','./commit-components.job'];a75_0x54ea=function(){return _0x58dc3b;};return a75_0x54ea();}function a75_0x3ca0(_0x278305,_0x45fc8e){const _0x66f845=a75_0x54ea();return a75_0x3ca0=function(_0x4cb273,_0x1763f4){_0x4cb273=_0x4cb273-0xaa;let _0x54ea4f=_0x66f845[_0x4cb273];return _0x54ea4f;},a75_0x3ca0(_0x278305,_0x45fc8e);}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x508f70,_0xddfa75,_0x53da49){const _0x1d91dd=a75_0x228df1;this[_0x1d91dd(0xfa)]=_0x508f70,this[_0x1d91dd(0xce)]=_0xddfa75,this['commitJob']=_0x53da49;}async['createBranchIfNotExists'](){const _0x320619=a75_0x228df1;let _0x1c1618=await this[_0x320619(0xd7)]['branches'][_0x320619(0xc0)](this['syncData'][_0x320619(0xc8)])[_0x320619(0xcd)](()=>null);!_0x1c1618&&(_0x1c1618=await this[_0x320619(0xd7)]['branches'][_0x320619(0xfc)]({'name':this[_0x320619(0xe6)]['branchName']})),this[_0x320619(0xb0)]=_0x1c1618;}async[a75_0x228df1(0xb6)](){const _0x10eebd=a75_0x228df1;return this['syncData']['repositoryId']?this[_0x10eebd(0xfa)]['getComponentsFromRepository'](this['syncData'][_0x10eebd(0xbd)]):this[_0x10eebd(0xfa)][_0x10eebd(0xd5)](this[_0x10eebd(0xe6)][_0x10eebd(0xdc)]);}async['getComponents'](){const _0x3a1184=a75_0x228df1,_0xdf36b0=await this[_0x3a1184(0xb6)](),_0x4beeab=new salesforce_retriever_service_1[(_0x3a1184(0xd9))](this[_0x3a1184(0xce)]),_0x2ed4b5=await _0x4beeab[_0x3a1184(0xe4)](_0xdf36b0);return _0x2ed4b5;}async['getCommitDto'](_0x41fc39){const _0x379991=a75_0x228df1,_0x19aee7=new commit_components_dto_1[(_0x379991(0xaf))]();return _0x19aee7[_0x379991(0xfe)]=_0x379991(0xe3),_0x19aee7[_0x379991(0xd6)]={'name':constants_1[_0x379991(0xea)],'email':constants_1[_0x379991(0xe9)]},_0x19aee7['components']={'writed':await this['getComponents']()},_0x19aee7[_0x379991(0x101)]=_0x41fc39,_0x19aee7[_0x379991(0xc3)]=this[_0x379991(0xd7)],_0x19aee7[_0x379991(0xb0)]=this[_0x379991(0xb0)],_0x19aee7[_0x379991(0xdf)]=!![],_0x19aee7['provider']=this[_0x379991(0x104)],_0x19aee7;}async[a75_0x228df1(0xd8)](){const _0x580264=a75_0x228df1,_0x2c91b6=await this[_0x580264(0xfa)][_0x580264(0xad)](this[_0x580264(0xe6)]),_0x16450e=await this[_0x580264(0xce)][_0x580264(0xc1)](_0x2c91b6)[_0x580264(0xb4)](_0x54d77=>typeof _0x54d77===_0x580264(0xe8)?JSON[_0x580264(0xf0)](_0x54d77):_0x54d77)['catch'](()=>({}));if(_0x16450e[this[_0x580264(0xd7)][_0x580264(0x100)]]){if(_0x16450e[this['repository']['gitUrl']][_0x580264(0xd3)]===this[_0x580264(0xb0)][_0x580264(0xdd)])return!![];}return![];}async[a75_0x228df1(0xf6)](){const _0x5105b2=a75_0x228df1,_0x6439d4=await this['repository'][_0x5105b2(0xc6)][_0x5105b2(0xc0)](this[_0x5105b2(0xb0)][_0x5105b2(0xac)]);await this['sfLogger']['log'](this[_0x5105b2(0xb3)]+'\x20Update\x20remote\x20state.');const _0x11bc6b={[this['repository'][_0x5105b2(0x100)]]:{'lastCommit':_0x6439d4[_0x5105b2(0xdd)]}};await this[_0x5105b2(0xfa)][_0x5105b2(0xed)](this[_0x5105b2(0xe6)],_0x11bc6b);}async[a75_0x228df1(0xe4)]({syncRecord:_0x19180b,repository:_0x5b3119,convertToSFDX:_0x27fe07,provider:_0x14acc6}){const _0x24d7ea=a75_0x228df1;this[_0x24d7ea(0xe6)]=_0x19180b,this[_0x24d7ea(0x104)]=_0x14acc6,this[_0x24d7ea(0xd7)]=_0x5b3119,this[_0x24d7ea(0xc4)]=typedi_1[_0x24d7ea(0xcc)][_0x24d7ea(0xd2)](salesforce_logger_v3_service_1[_0x24d7ea(0xaa)]),this[_0x24d7ea(0xb3)]=_0x24d7ea(0xbc)+this[_0x24d7ea(0xe6)]['repositoryName']+_0x24d7ea(0xd1)+this['syncData'][_0x24d7ea(0xc8)]+']';try{await this[_0x24d7ea(0xc4)][_0x24d7ea(0xab)](this[_0x24d7ea(0xb3)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x24d7ea(0xf4)](),await this[_0x24d7ea(0xfa)]['setStatus'](this[_0x24d7ea(0xe6)],_0x24d7ea(0xf7)),this['sfLogger'][_0x24d7ea(0xab)](this[_0x24d7ea(0xb3)]+_0x24d7ea(0xee)),await this[_0x24d7ea(0xb1)](),await this[_0x24d7ea(0xc4)][_0x24d7ea(0xab)](this[_0x24d7ea(0xb3)]+_0x24d7ea(0xb9))[_0x24d7ea(0xf4)]();const _0x59a63a=await this[_0x24d7ea(0xd8)]();this[_0x24d7ea(0xc4)][_0x24d7ea(0xab)](this[_0x24d7ea(0xb3)]+'\x20Sync\x20status\x20'+_0x59a63a+'.');if(_0x59a63a){await this['salesforceSync'][_0x24d7ea(0xc2)](this[_0x24d7ea(0xe6)],_0x24d7ea(0xfb)),await this[_0x24d7ea(0xc4)][_0x24d7ea(0xab)](this[_0x24d7ea(0xb3)]+_0x24d7ea(0xda))[_0x24d7ea(0xf4)]();return;}const _0x5b05d2=await this[_0x24d7ea(0xd4)](_0x27fe07);await this['commitJob']['run'](_0x5b05d2,this['prefix']),await this[_0x24d7ea(0xfa)][_0x24d7ea(0xc2)](this[_0x24d7ea(0xe6)],_0x24d7ea(0xfb)),await this[_0x24d7ea(0xf6)](),this['sfLogger'][_0x24d7ea(0xab)](this[_0x24d7ea(0xb3)]+_0x24d7ea(0xe5));}catch(_0x2229c0){throw _0x2229c0;}finally{await this[_0x24d7ea(0xc4)][_0x24d7ea(0xf4)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a75_0x228df1(0xc5)])({'transient':!![]}),__metadata(a75_0x228df1(0xdb),[salesforce_sync_service_1[a75_0x228df1(0xbf)],salesforce_service_1['SalesforceService'],commit_components_job_1[a75_0x228df1(0xbe)]])],FlosumSyncJob),exports[a75_0x228df1(0xe1)]=FlosumSyncJob;