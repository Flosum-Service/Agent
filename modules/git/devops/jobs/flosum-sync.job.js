const a106_0x27601b=a106_0x5691;(function(_0x33aa95,_0x17a8cb){const _0x39777d=a106_0x5691,_0x2b0da8=_0x33aa95();while(!![]){try{const _0x38dddb=-parseInt(_0x39777d(0x189))/0x1*(parseInt(_0x39777d(0x15a))/0x2)+parseInt(_0x39777d(0x14d))/0x3+-parseInt(_0x39777d(0x17b))/0x4*(-parseInt(_0x39777d(0x187))/0x5)+-parseInt(_0x39777d(0x162))/0x6+parseInt(_0x39777d(0x18e))/0x7*(parseInt(_0x39777d(0x16d))/0x8)+-parseInt(_0x39777d(0x152))/0x9*(parseInt(_0x39777d(0x181))/0xa)+parseInt(_0x39777d(0x16f))/0xb*(parseInt(_0x39777d(0x163))/0xc);if(_0x38dddb===_0x17a8cb)break;else _0x2b0da8['push'](_0x2b0da8['shift']());}catch(_0x49de94){_0x2b0da8['push'](_0x2b0da8['shift']());}}}(a106_0x292d,0x8b45f));const a106_0x51c998=(function(){let _0x430e52=!![];return function(_0x30820,_0x3a5416){const _0xf7046b=_0x430e52?function(){const _0x37bcb4=a106_0x5691;if(_0x3a5416){const _0x1854ba=_0x3a5416[_0x37bcb4(0x18a)](_0x30820,arguments);return _0x3a5416=null,_0x1854ba;}}:function(){};return _0x430e52=![],_0xf7046b;};}()),a106_0x4355e4=a106_0x51c998(this,function(){const _0xa02f5e=a106_0x5691;return a106_0x4355e4[_0xa02f5e(0x151)]()['search']('(((.+)+)+)+$')[_0xa02f5e(0x151)]()[_0xa02f5e(0x150)](a106_0x4355e4)[_0xa02f5e(0x166)](_0xa02f5e(0x18f));});a106_0x4355e4();function a106_0x5691(_0x65ef45,_0x513e24){const _0x108b10=a106_0x292d();return a106_0x5691=function(_0x4355e4,_0x51c998){_0x4355e4=_0x4355e4-0x148;let _0x292d35=_0x108b10[_0x4355e4];return _0x292d35;},a106_0x5691(_0x65ef45,_0x513e24);}function a106_0x292d(){const _0x464a8d=['526956YfWkUJ','1243380kbmfIs','repositoryName','SalesforceLogger3','search','name','In\x20Progress','function','../../salesforce/services/salesforce-retriever.service','object','decorate','1354568ehjAQb','CommitComponentsJob','55mMRnCx','force','gitUrl','../../salesforce/services/salesforce-logger-v3.service','design:paramtypes','getBranchComponents','typedi','./commit-components.job','metadata','updateLastCommit','getComponentIds','parse','1953256tAglMM','\x20Checking\x20repository\x20on\x20Flosum\x20side.','run','prefix','\x20Branch\x20synchronized.\x20Skip','syncData','1790ybTAWj','message','updateRemoteState','repositoryId','FlosumSyncJob','Container','5RJsWsc','sfLogger','61535Jfovei','apply','commitJob','salesforceSync','components','21ccszlV','(((.+)+)+)+$','checkSyncStatus','provider','getCommitDto','defineProperty','Completed','sha','\x20Start\x20Flosum\x20sync\x20job','setStatus','getRemoteStateAttachmentId','\x20Update\x20remote\x20state.','\x20Flosum\x20sync\x20job\x20done.','branchName','createBranchIfNotExists','log','getComponents','getComponentsFromRepository','getOwnPropertyDescriptor','salesforceService','__metadata','11571KlpaBC','DEFAULT_GIT_USER_NAME','send','constructor','toString','3015SzntKI','convertToSFDX','\x20Sync\x20status\x20','branches','SalesforceService','branch','SalesforceRetrieverService','length','26DDLaEb','../dto/commit-components.dto','../../salesforce/services/salesforce-sync.service','branchId','Service','string','SalesforceSyncService','repository'];a106_0x292d=function(){return _0x464a8d;};return a106_0x292d();}'use strict';var __decorate=this&&this['__decorate']||function(_0x5d32a2,_0x4cad85,_0x4cabf9,_0x4502dd){const _0x2c95ab=a106_0x5691;var _0x33eff5=arguments[_0x2c95ab(0x159)],_0x26d126=_0x33eff5<0x3?_0x4cad85:_0x4502dd===null?_0x4502dd=Object[_0x2c95ab(0x14a)](_0x4cad85,_0x4cabf9):_0x4502dd,_0x42eb85;if(typeof Reflect===_0x2c95ab(0x16b)&&typeof Reflect[_0x2c95ab(0x16c)]===_0x2c95ab(0x169))_0x26d126=Reflect[_0x2c95ab(0x16c)](_0x5d32a2,_0x4cad85,_0x4cabf9,_0x4502dd);else{for(var _0x545cb8=_0x5d32a2['length']-0x1;_0x545cb8>=0x0;_0x545cb8--)if(_0x42eb85=_0x5d32a2[_0x545cb8])_0x26d126=(_0x33eff5<0x3?_0x42eb85(_0x26d126):_0x33eff5>0x3?_0x42eb85(_0x4cad85,_0x4cabf9,_0x26d126):_0x42eb85(_0x4cad85,_0x4cabf9))||_0x26d126;}return _0x33eff5>0x3&&_0x26d126&&Object[_0x2c95ab(0x193)](_0x4cad85,_0x4cabf9,_0x26d126),_0x26d126;},__metadata=this&&this[a106_0x27601b(0x14c)]||function(_0x1c07a4,_0x4ecea3){const _0x53ec7b=a106_0x27601b;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x53ec7b(0x169))return Reflect[_0x53ec7b(0x177)](_0x1c07a4,_0x4ecea3);};Object[a106_0x27601b(0x193)](exports,'__esModule',{'value':!![]}),exports[a106_0x27601b(0x185)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x27601b(0x172)),typedi_1=require(a106_0x27601b(0x175)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a106_0x27601b(0x16a)),salesforce_sync_service_1=require(a106_0x27601b(0x15c)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a106_0x27601b(0x15b)),commit_components_job_1=require(a106_0x27601b(0x176));let FlosumSyncJob=class FlosumSyncJob{constructor(_0xf24f9c,_0x41162c,_0x18123b){const _0x15a4f1=a106_0x27601b;this[_0x15a4f1(0x18c)]=_0xf24f9c,this[_0x15a4f1(0x14b)]=_0x41162c,this[_0x15a4f1(0x18b)]=_0x18123b;}async[a106_0x27601b(0x19c)](){const _0x494916=a106_0x27601b;let _0x165b06=await this[_0x494916(0x161)][_0x494916(0x155)]['getOne'](this['syncData'][_0x494916(0x19b)])['catch'](()=>null);!_0x165b06&&(_0x165b06=await this[_0x494916(0x161)][_0x494916(0x155)]['create']({'name':this[_0x494916(0x180)][_0x494916(0x19b)]})),this[_0x494916(0x157)]=_0x165b06;}async[a106_0x27601b(0x179)](){const _0x5dc51e=a106_0x27601b;return this['syncData'][_0x5dc51e(0x184)]?this[_0x5dc51e(0x18c)][_0x5dc51e(0x149)](this[_0x5dc51e(0x180)]['repositoryId']):this['salesforceSync'][_0x5dc51e(0x174)](this[_0x5dc51e(0x180)][_0x5dc51e(0x15d)]);}async['getComponents'](){const _0x5b04a0=a106_0x27601b,_0x3fd5bd=await this[_0x5b04a0(0x179)](),_0x588139=new salesforce_retriever_service_1[(_0x5b04a0(0x158))](this[_0x5b04a0(0x14b)]),_0x4e0d7e=await _0x588139[_0x5b04a0(0x17d)](_0x3fd5bd);return _0x4e0d7e;}async['getCommitDto'](_0x426bf6){const _0x15d694=a106_0x27601b,_0x3602f0=new commit_components_dto_1['CommitComponentsDto']();return _0x3602f0[_0x15d694(0x182)]='Sync\x20repository',_0x3602f0['user']={'name':constants_1[_0x15d694(0x14e)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x3602f0[_0x15d694(0x18d)]={'writed':await this[_0x15d694(0x148)]()},_0x3602f0[_0x15d694(0x153)]=_0x426bf6,_0x3602f0['repo']=this['repository'],_0x3602f0[_0x15d694(0x157)]=this[_0x15d694(0x157)],_0x3602f0[_0x15d694(0x170)]=!![],_0x3602f0[_0x15d694(0x191)]=this[_0x15d694(0x191)],_0x3602f0;}async['checkSyncStatus'](){const _0x5cfc5c=a106_0x27601b,_0x48e90d=await this[_0x5cfc5c(0x18c)][_0x5cfc5c(0x198)](this[_0x5cfc5c(0x180)]),_0x1aa6e5=await this[_0x5cfc5c(0x14b)]['retrieveAttachment'](_0x48e90d)['then'](_0xec83a7=>typeof _0xec83a7===_0x5cfc5c(0x15f)?JSON[_0x5cfc5c(0x17a)](_0xec83a7):_0xec83a7)['catch'](()=>({}));if(_0x1aa6e5[this[_0x5cfc5c(0x161)][_0x5cfc5c(0x171)]]){if(_0x1aa6e5[this[_0x5cfc5c(0x161)][_0x5cfc5c(0x171)]]['lastCommit']===this['branch'][_0x5cfc5c(0x195)])return!![];}return![];}async[a106_0x27601b(0x178)](){const _0x4b5658=a106_0x27601b,_0x644dbd=await this['repository'][_0x4b5658(0x155)]['getOne'](this[_0x4b5658(0x157)][_0x4b5658(0x167)]);await this[_0x4b5658(0x188)][_0x4b5658(0x19d)](this[_0x4b5658(0x17e)]+_0x4b5658(0x199));const _0xb2e17e={[this[_0x4b5658(0x161)][_0x4b5658(0x171)]]:{'lastCommit':_0x644dbd[_0x4b5658(0x195)]}};await this[_0x4b5658(0x18c)][_0x4b5658(0x183)](this[_0x4b5658(0x180)],_0xb2e17e);}async[a106_0x27601b(0x17d)]({syncRecord:_0x49634a,repository:_0x3f0671,convertToSFDX:_0x28fc28,provider:_0x31acbb}){const _0x4b17e7=a106_0x27601b;this['syncData']=_0x49634a,this['provider']=_0x31acbb,this[_0x4b17e7(0x161)]=_0x3f0671,this['sfLogger']=typedi_1[_0x4b17e7(0x186)]['get'](salesforce_logger_v3_service_1[_0x4b17e7(0x165)]),this[_0x4b17e7(0x17e)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x4b17e7(0x180)][_0x4b17e7(0x164)]+']\x20[Branch:\x20'+this[_0x4b17e7(0x180)][_0x4b17e7(0x19b)]+']';try{await this[_0x4b17e7(0x188)][_0x4b17e7(0x19d)](this[_0x4b17e7(0x17e)]+_0x4b17e7(0x196))[_0x4b17e7(0x14f)](),await this[_0x4b17e7(0x18c)]['setStatus'](this['syncData'],_0x4b17e7(0x168)),this[_0x4b17e7(0x188)][_0x4b17e7(0x19d)](this[_0x4b17e7(0x17e)]+_0x4b17e7(0x17c)),await this[_0x4b17e7(0x19c)](),await this['sfLogger'][_0x4b17e7(0x19d)](this['prefix']+'\x20Checking\x20sync\x20status.')[_0x4b17e7(0x14f)]();const _0xc1ba97=await this[_0x4b17e7(0x190)]();this[_0x4b17e7(0x188)]['log'](this[_0x4b17e7(0x17e)]+_0x4b17e7(0x154)+_0xc1ba97+'.');if(_0xc1ba97){await this['salesforceSync'][_0x4b17e7(0x197)](this[_0x4b17e7(0x180)],'Completed'),await this['sfLogger'][_0x4b17e7(0x19d)](this[_0x4b17e7(0x17e)]+_0x4b17e7(0x17f))[_0x4b17e7(0x14f)]();return;}const _0x182135=await this[_0x4b17e7(0x192)](_0x28fc28);await this['commitJob']['run'](_0x182135,this[_0x4b17e7(0x17e)]),await this[_0x4b17e7(0x18c)][_0x4b17e7(0x197)](this[_0x4b17e7(0x180)],_0x4b17e7(0x194)),await this['updateLastCommit'](),this[_0x4b17e7(0x188)]['log'](this[_0x4b17e7(0x17e)]+_0x4b17e7(0x19a));}catch(_0x2a1277){throw _0x2a1277;}finally{await this['sfLogger'][_0x4b17e7(0x14f)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x27601b(0x15e)])({'transient':!![]}),__metadata(a106_0x27601b(0x173),[salesforce_sync_service_1[a106_0x27601b(0x160)],salesforce_service_1[a106_0x27601b(0x156)],commit_components_job_1[a106_0x27601b(0x16e)]])],FlosumSyncJob),exports[a106_0x27601b(0x185)]=FlosumSyncJob;