const a106_0x3e3324=a106_0x464a;(function(_0x182a9e,_0x2c7209){const _0x116587=a106_0x464a,_0x986cc7=_0x182a9e();while(!![]){try{const _0x4b2bbe=-parseInt(_0x116587(0x188))/0x1+-parseInt(_0x116587(0x1b0))/0x2*(-parseInt(_0x116587(0x198))/0x3)+-parseInt(_0x116587(0x1c6))/0x4+parseInt(_0x116587(0x1aa))/0x5+-parseInt(_0x116587(0x1a1))/0x6+-parseInt(_0x116587(0x1c5))/0x7+parseInt(_0x116587(0x196))/0x8*(parseInt(_0x116587(0x177))/0x9);if(_0x4b2bbe===_0x2c7209)break;else _0x986cc7['push'](_0x986cc7['shift']());}catch(_0x3b59ac){_0x986cc7['push'](_0x986cc7['shift']());}}}(a106_0x2e9e,0xb1e27));const a106_0x5eabb2=(function(){let _0x5a6373=!![];return function(_0xf024a1,_0x598df5){const _0x3e4cf4=_0x5a6373?function(){const _0x3a997b=a106_0x464a;if(_0x598df5){const _0x5dbbce=_0x598df5[_0x3a997b(0x185)](_0xf024a1,arguments);return _0x598df5=null,_0x5dbbce;}}:function(){};return _0x5a6373=![],_0x3e4cf4;};}()),a106_0x582fb4=a106_0x5eabb2(this,function(){const _0x2ee182=a106_0x464a;return a106_0x582fb4[_0x2ee182(0x181)]()['search'](_0x2ee182(0x1ab))[_0x2ee182(0x181)]()[_0x2ee182(0x1c9)](a106_0x582fb4)[_0x2ee182(0x1ae)](_0x2ee182(0x1ab));});a106_0x582fb4();function a106_0x464a(_0x3ed015,_0x2f591f){const _0x467b78=a106_0x2e9e();return a106_0x464a=function(_0x582fb4,_0x5eabb2){_0x582fb4=_0x582fb4-0x177;let _0x2e9e83=_0x467b78[_0x582fb4];return _0x2e9e83;},a106_0x464a(_0x3ed015,_0x2f591f);}'use strict';var __decorate=this&&this['__decorate']||function(_0x519827,_0x387f7e,_0xc57aab,_0x30aee5){const _0x5600f3=a106_0x464a;var _0x5c3f65=arguments[_0x5600f3(0x1ba)],_0x3b00f4=_0x5c3f65<0x3?_0x387f7e:_0x30aee5===null?_0x30aee5=Object[_0x5600f3(0x18e)](_0x387f7e,_0xc57aab):_0x30aee5,_0x223d33;if(typeof Reflect===_0x5600f3(0x189)&&typeof Reflect['decorate']==='function')_0x3b00f4=Reflect['decorate'](_0x519827,_0x387f7e,_0xc57aab,_0x30aee5);else{for(var _0x2acc2a=_0x519827[_0x5600f3(0x1ba)]-0x1;_0x2acc2a>=0x0;_0x2acc2a--)if(_0x223d33=_0x519827[_0x2acc2a])_0x3b00f4=(_0x5c3f65<0x3?_0x223d33(_0x3b00f4):_0x5c3f65>0x3?_0x223d33(_0x387f7e,_0xc57aab,_0x3b00f4):_0x223d33(_0x387f7e,_0xc57aab))||_0x3b00f4;}return _0x5c3f65>0x3&&_0x3b00f4&&Object[_0x5600f3(0x1a5)](_0x387f7e,_0xc57aab,_0x3b00f4),_0x3b00f4;},__metadata=this&&this[a106_0x3e3324(0x184)]||function(_0xa446c6,_0x5aedf6){const _0x2b6600=a106_0x3e3324;if(typeof Reflect==='object'&&typeof Reflect[_0x2b6600(0x192)]===_0x2b6600(0x19a))return Reflect[_0x2b6600(0x192)](_0xa446c6,_0x5aedf6);};Object['defineProperty'](exports,a106_0x3e3324(0x1bc),{'value':!![]}),exports[a106_0x3e3324(0x1c7)]=void 0x0;function a106_0x2e9e(){const _0x273433=['syncData','search','send','238722xUoHYp','\x20Checking\x20repository\x20on\x20Flosum\x20side.','retrieveAttachment','getBranchComponents','components','CommitComponentsJob','getComponentsFromRepository','branchId','user','sha','length','log','__esModule','convertToSFDX','createBranchIfNotExists','Container','../../salesforce/services/salesforce-logger-v3.service','commitJob','salesforceService','catch','then','6119393GShZEZ','3913924NHZMGV','FlosumSyncJob','Completed','constructor','DEFAULT_GIT_USER_EMAIL','getComponentIds','../dto/commit-components.dto','updateRemoteState','repositoryId','3157605GXuMdX','getRemoteStateAttachmentId','lastCommit','getOne','repo','salesforceSync','\x20Sync\x20status\x20','branch','updateLastCommit','branchName','toString','\x20Start\x20Flosum\x20sync\x20job','create','__metadata','apply','parse','\x20Flosum\x20sync\x20job\x20done.','609107mAcpZy','object','\x20Update\x20remote\x20state.','Service','CommitComponentsDto','./commit-components.job','getOwnPropertyDescriptor','gitUrl','get','setStatus','metadata','\x20Branch\x20synchronized.\x20Skip','sfLogger','../../salesforce/services/salesforce-retriever.service','72cWGwLt','string','3fsVWTF','Sync\x20repository','function','provider','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','checkSyncStatus','SalesforceService','DEFAULT_GIT_USER_NAME','prefix','7447176jdUQkZ','repository','getComponents','../../../../constants','defineProperty','branches','design:paramtypes','getCommitDto','run','5773160czSrJp','(((.+)+)+)+$','../../salesforce/services/salesforce-sync.service'];a106_0x2e9e=function(){return _0x273433;};return a106_0x2e9e();}const salesforce_logger_v3_service_1=require(a106_0x3e3324(0x1c0)),typedi_1=require('typedi'),constants_1=require(a106_0x3e3324(0x1a4)),salesforce_retriever_service_1=require(a106_0x3e3324(0x195)),salesforce_sync_service_1=require(a106_0x3e3324(0x1ac)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a106_0x3e3324(0x1cc)),commit_components_job_1=require(a106_0x3e3324(0x18d));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1bd866,_0x3303aa,_0x2557f8){const _0x1ee545=a106_0x3e3324;this['salesforceSync']=_0x1bd866,this[_0x1ee545(0x1c2)]=_0x3303aa,this[_0x1ee545(0x1c1)]=_0x2557f8;}async[a106_0x3e3324(0x1be)](){const _0x43a584=a106_0x3e3324;let _0x2eeaf8=await this[_0x43a584(0x1a2)][_0x43a584(0x1a6)][_0x43a584(0x17a)](this[_0x43a584(0x1ad)][_0x43a584(0x180)])[_0x43a584(0x1c3)](()=>null);!_0x2eeaf8&&(_0x2eeaf8=await this[_0x43a584(0x1a2)][_0x43a584(0x1a6)][_0x43a584(0x183)]({'name':this[_0x43a584(0x1ad)][_0x43a584(0x180)]})),this[_0x43a584(0x17e)]=_0x2eeaf8;}async['getComponentIds'](){const _0xda08d6=a106_0x3e3324;return this['syncData'][_0xda08d6(0x1ce)]?this[_0xda08d6(0x17c)][_0xda08d6(0x1b6)](this[_0xda08d6(0x1ad)]['repositoryId']):this[_0xda08d6(0x17c)][_0xda08d6(0x1b3)](this['syncData'][_0xda08d6(0x1b7)]);}async[a106_0x3e3324(0x1a3)](){const _0x267171=a106_0x3e3324,_0x5bcdf1=await this[_0x267171(0x1cb)](),_0x5e9476=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x267171(0x1c2)]),_0x2ed081=await _0x5e9476[_0x267171(0x1a9)](_0x5bcdf1);return _0x2ed081;}async[a106_0x3e3324(0x1a8)](_0x518670){const _0x3668f1=a106_0x3e3324,_0x450052=new commit_components_dto_1[(_0x3668f1(0x18c))]();return _0x450052['message']=_0x3668f1(0x199),_0x450052[_0x3668f1(0x1b8)]={'name':constants_1[_0x3668f1(0x19f)],'email':constants_1[_0x3668f1(0x1ca)]},_0x450052[_0x3668f1(0x1b4)]={'writed':await this[_0x3668f1(0x1a3)]()},_0x450052[_0x3668f1(0x1bd)]=_0x518670,_0x450052[_0x3668f1(0x17b)]=this['repository'],_0x450052[_0x3668f1(0x17e)]=this['branch'],_0x450052['force']=!![],_0x450052[_0x3668f1(0x19b)]=this[_0x3668f1(0x19b)],_0x450052;}async[a106_0x3e3324(0x19d)](){const _0x38df4f=a106_0x3e3324,_0x278e2c=await this[_0x38df4f(0x17c)][_0x38df4f(0x178)](this['syncData']),_0x315fe2=await this[_0x38df4f(0x1c2)][_0x38df4f(0x1b2)](_0x278e2c)[_0x38df4f(0x1c4)](_0x24db4c=>typeof _0x24db4c===_0x38df4f(0x197)?JSON[_0x38df4f(0x186)](_0x24db4c):_0x24db4c)[_0x38df4f(0x1c3)](()=>({}));if(_0x315fe2[this['repository'][_0x38df4f(0x18f)]]){if(_0x315fe2[this[_0x38df4f(0x1a2)][_0x38df4f(0x18f)]][_0x38df4f(0x179)]===this[_0x38df4f(0x17e)][_0x38df4f(0x1b9)])return!![];}return![];}async[a106_0x3e3324(0x17f)](){const _0x275b86=a106_0x3e3324,_0x43c1c4=await this['repository']['branches']['getOne'](this[_0x275b86(0x17e)]['name']);await this[_0x275b86(0x194)][_0x275b86(0x1bb)](this[_0x275b86(0x1a0)]+_0x275b86(0x18a));const _0x440850={[this[_0x275b86(0x1a2)]['gitUrl']]:{'lastCommit':_0x43c1c4['sha']}};await this[_0x275b86(0x17c)][_0x275b86(0x1cd)](this[_0x275b86(0x1ad)],_0x440850);}async[a106_0x3e3324(0x1a9)]({syncRecord:_0x254a78,repository:_0x208f96,convertToSFDX:_0x4bd9e3,provider:_0x1c4fc7}){const _0x4b6def=a106_0x3e3324;this['syncData']=_0x254a78,this[_0x4b6def(0x19b)]=_0x1c4fc7,this[_0x4b6def(0x1a2)]=_0x208f96,this['sfLogger']=typedi_1[_0x4b6def(0x1bf)][_0x4b6def(0x190)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x4b6def(0x1a0)]=_0x4b6def(0x19c)+this['syncData']['repositoryName']+']\x20[Branch:\x20'+this[_0x4b6def(0x1ad)]['branchName']+']';try{await this['sfLogger'][_0x4b6def(0x1bb)](this[_0x4b6def(0x1a0)]+_0x4b6def(0x182))['send'](),await this[_0x4b6def(0x17c)][_0x4b6def(0x191)](this[_0x4b6def(0x1ad)],'In\x20Progress'),this[_0x4b6def(0x194)][_0x4b6def(0x1bb)](this[_0x4b6def(0x1a0)]+_0x4b6def(0x1b1)),await this['createBranchIfNotExists'](),await this['sfLogger']['log'](this[_0x4b6def(0x1a0)]+'\x20Checking\x20sync\x20status.')[_0x4b6def(0x1af)]();const _0x583a38=await this[_0x4b6def(0x19d)]();this[_0x4b6def(0x194)]['log'](this[_0x4b6def(0x1a0)]+_0x4b6def(0x17d)+_0x583a38+'.');if(_0x583a38){await this[_0x4b6def(0x17c)]['setStatus'](this[_0x4b6def(0x1ad)],_0x4b6def(0x1c8)),await this[_0x4b6def(0x194)][_0x4b6def(0x1bb)](this[_0x4b6def(0x1a0)]+_0x4b6def(0x193))[_0x4b6def(0x1af)]();return;}const _0x33fc54=await this[_0x4b6def(0x1a8)](_0x4bd9e3);await this['commitJob']['run'](_0x33fc54,this[_0x4b6def(0x1a0)]),await this[_0x4b6def(0x17c)][_0x4b6def(0x191)](this[_0x4b6def(0x1ad)],_0x4b6def(0x1c8)),await this[_0x4b6def(0x17f)](),this['sfLogger']['log'](this[_0x4b6def(0x1a0)]+_0x4b6def(0x187));}catch(_0x835eee){throw _0x835eee;}finally{await this[_0x4b6def(0x194)][_0x4b6def(0x1af)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x3e3324(0x18b)])({'transient':!![]}),__metadata(a106_0x3e3324(0x1a7),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a106_0x3e3324(0x19e)],commit_components_job_1[a106_0x3e3324(0x1b5)]])],FlosumSyncJob),exports[a106_0x3e3324(0x1c7)]=FlosumSyncJob;