const a105_0x458ba8=a105_0x303e;(function(_0x537a4f,_0x10bd24){const _0x4eec1d=a105_0x303e,_0x52e1fc=_0x537a4f();while(!![]){try{const _0x262471=parseInt(_0x4eec1d(0x10e))/0x1*(parseInt(_0x4eec1d(0x121))/0x2)+parseInt(_0x4eec1d(0x115))/0x3+parseInt(_0x4eec1d(0x133))/0x4*(-parseInt(_0x4eec1d(0xfe))/0x5)+-parseInt(_0x4eec1d(0xfc))/0x6+parseInt(_0x4eec1d(0x12d))/0x7+-parseInt(_0x4eec1d(0x104))/0x8*(parseInt(_0x4eec1d(0xfa))/0x9)+-parseInt(_0x4eec1d(0xf6))/0xa;if(_0x262471===_0x10bd24)break;else _0x52e1fc['push'](_0x52e1fc['shift']());}catch(_0x28ac2b){_0x52e1fc['push'](_0x52e1fc['shift']());}}}(a105_0x31c0,0xc8a45));function a105_0x31c0(){const _0x5a1a71=['salesforceService','prefix','checkSyncStatus','SalesforceService','components','SalesforceSyncService','lastCommit','6841716vxNmas','../../salesforce/services/salesforce.service','updateRemoteState','CommitComponentsJob','getBranchComponents','setStatus','3760296Zfgxps','repositoryId','../../salesforce/services/salesforce-logger-v3.service','sha','getOwnPropertyDescriptor','gitUrl','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','createBranchIfNotExists','repository','syncData','Service','defineProperty','get','repo','string',']\x20[Branch:\x20','SalesforceRetrieverService','create','then','__decorate','Sync\x20repository','../../salesforce/services/salesforce-sync.service','message','getCommitDto','send','2646700JMWuvZ','branches','toString','../../../../constants','18AWhYfh','\x20Checking\x20repository\x20on\x20Flosum\x20side.','3667620uFlZkF','getComponentIds','5CwuBoy','./commit-components.job','salesforceSync','function','\x20Branch\x20synchronized.\x20Skip','getRemoteStateAttachmentId','543856yiHMLI','getComponentsFromRepository','DEFAULT_GIT_USER_EMAIL','apply','Container','getOne','getComponents','../dto/commit-components.dto','In\x20Progress','FlosumSyncJob','1AXKWdL','catch','run','provider','decorate','length','sfLogger','4184091fzeCIS','branch','repositoryName','updateLastCommit','metadata','../../salesforce/services/salesforce-retriever.service','parse','convertToSFDX','(((.+)+)+)+$','commitJob','Completed','branchName','803444nJGALc','\x20Start\x20Flosum\x20sync\x20job','constructor','\x20Update\x20remote\x20state.','log'];a105_0x31c0=function(){return _0x5a1a71;};return a105_0x31c0();}const a105_0x3b31d1=(function(){let _0x3edf31=!![];return function(_0x5def84,_0x3dfc40){const _0x33070e=_0x3edf31?function(){const _0x681429=a105_0x303e;if(_0x3dfc40){const _0x45b014=_0x3dfc40[_0x681429(0x107)](_0x5def84,arguments);return _0x3dfc40=null,_0x45b014;}}:function(){};return _0x3edf31=![],_0x33070e;};}()),a105_0x52cfcc=a105_0x3b31d1(this,function(){const _0xa9524f=a105_0x303e;return a105_0x52cfcc[_0xa9524f(0xf8)]()['search']('(((.+)+)+)+$')[_0xa9524f(0xf8)]()[_0xa9524f(0x123)](a105_0x52cfcc)['search'](_0xa9524f(0x11d));});a105_0x52cfcc();'use strict';function a105_0x303e(_0x17a282,_0x358cb2){const _0x50b5fe=a105_0x31c0();return a105_0x303e=function(_0x52cfcc,_0x3b31d1){_0x52cfcc=_0x52cfcc-0xea;let _0x31c04c=_0x50b5fe[_0x52cfcc];return _0x31c04c;},a105_0x303e(_0x17a282,_0x358cb2);}var __decorate=this&&this[a105_0x458ba8(0xf0)]||function(_0x1e01dd,_0xe22757,_0x200f57,_0x1d5ff3){const _0x2682bd=a105_0x458ba8;var _0x42dc20=arguments['length'],_0x230244=_0x42dc20<0x3?_0xe22757:_0x1d5ff3===null?_0x1d5ff3=Object[_0x2682bd(0x137)](_0xe22757,_0x200f57):_0x1d5ff3,_0x199ee3;if(typeof Reflect==='object'&&typeof Reflect[_0x2682bd(0x112)]===_0x2682bd(0x101))_0x230244=Reflect[_0x2682bd(0x112)](_0x1e01dd,_0xe22757,_0x200f57,_0x1d5ff3);else{for(var _0x3adc51=_0x1e01dd[_0x2682bd(0x113)]-0x1;_0x3adc51>=0x0;_0x3adc51--)if(_0x199ee3=_0x1e01dd[_0x3adc51])_0x230244=(_0x42dc20<0x3?_0x199ee3(_0x230244):_0x42dc20>0x3?_0x199ee3(_0xe22757,_0x200f57,_0x230244):_0x199ee3(_0xe22757,_0x200f57))||_0x230244;}return _0x42dc20>0x3&&_0x230244&&Object[_0x2682bd(0x13e)](_0xe22757,_0x200f57,_0x230244),_0x230244;},__metadata=this&&this['__metadata']||function(_0x2961ca,_0x216de6){const _0x324370=a105_0x458ba8;if(typeof Reflect==='object'&&typeof Reflect[_0x324370(0x119)]===_0x324370(0x101))return Reflect['metadata'](_0x2961ca,_0x216de6);};Object[a105_0x458ba8(0x13e)](exports,'__esModule',{'value':!![]}),exports[a105_0x458ba8(0x10d)]=void 0x0;const salesforce_logger_v3_service_1=require(a105_0x458ba8(0x135)),typedi_1=require('typedi'),constants_1=require(a105_0x458ba8(0xf9)),salesforce_retriever_service_1=require(a105_0x458ba8(0x11a)),salesforce_sync_service_1=require(a105_0x458ba8(0xf2)),salesforce_service_1=require(a105_0x458ba8(0x12e)),commit_components_dto_1=require(a105_0x458ba8(0x10b)),commit_components_job_1=require(a105_0x458ba8(0xff));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1d0480,_0x3a9945,_0x4eb0d8){const _0x333d0c=a105_0x458ba8;this[_0x333d0c(0x100)]=_0x1d0480,this[_0x333d0c(0x126)]=_0x3a9945,this[_0x333d0c(0x11e)]=_0x4eb0d8;}async[a105_0x458ba8(0x13a)](){const _0x4e4380=a105_0x458ba8;let _0x1aead5=await this['repository'][_0x4e4380(0xf7)]['getOne'](this['syncData'][_0x4e4380(0x120)])[_0x4e4380(0x10f)](()=>null);!_0x1aead5&&(_0x1aead5=await this['repository'][_0x4e4380(0xf7)][_0x4e4380(0xee)]({'name':this[_0x4e4380(0x13c)][_0x4e4380(0x120)]})),this[_0x4e4380(0x116)]=_0x1aead5;}async[a105_0x458ba8(0xfd)](){const _0x14c42a=a105_0x458ba8;return this[_0x14c42a(0x13c)][_0x14c42a(0x134)]?this[_0x14c42a(0x100)][_0x14c42a(0x105)](this[_0x14c42a(0x13c)][_0x14c42a(0x134)]):this['salesforceSync'][_0x14c42a(0x131)](this[_0x14c42a(0x13c)]['branchId']);}async[a105_0x458ba8(0x10a)](){const _0x204679=a105_0x458ba8,_0x1eb089=await this['getComponentIds'](),_0x5ad371=new salesforce_retriever_service_1[(_0x204679(0xed))](this[_0x204679(0x126)]),_0x9e4b87=await _0x5ad371[_0x204679(0x110)](_0x1eb089);return _0x9e4b87;}async[a105_0x458ba8(0xf4)](_0x27c130){const _0x549596=a105_0x458ba8,_0x1eea7b=new commit_components_dto_1['CommitComponentsDto']();return _0x1eea7b[_0x549596(0xf3)]=_0x549596(0xf1),_0x1eea7b['user']={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x549596(0x106)]},_0x1eea7b[_0x549596(0x12a)]={'writed':await this[_0x549596(0x10a)]()},_0x1eea7b[_0x549596(0x11c)]=_0x27c130,_0x1eea7b[_0x549596(0xea)]=this[_0x549596(0x13b)],_0x1eea7b[_0x549596(0x116)]=this[_0x549596(0x116)],_0x1eea7b['force']=!![],_0x1eea7b[_0x549596(0x111)]=this[_0x549596(0x111)],_0x1eea7b;}async[a105_0x458ba8(0x128)](){const _0x3dde8e=a105_0x458ba8,_0x3f0b6b=await this[_0x3dde8e(0x100)][_0x3dde8e(0x103)](this[_0x3dde8e(0x13c)]),_0x5f08fe=await this['salesforceService']['retrieveAttachment'](_0x3f0b6b)[_0x3dde8e(0xef)](_0x5e36d5=>typeof _0x5e36d5===_0x3dde8e(0xeb)?JSON[_0x3dde8e(0x11b)](_0x5e36d5):_0x5e36d5)[_0x3dde8e(0x10f)](()=>({}));if(_0x5f08fe[this[_0x3dde8e(0x13b)][_0x3dde8e(0x138)]]){if(_0x5f08fe[this[_0x3dde8e(0x13b)][_0x3dde8e(0x138)]][_0x3dde8e(0x12c)]===this[_0x3dde8e(0x116)][_0x3dde8e(0x136)])return!![];}return![];}async[a105_0x458ba8(0x118)](){const _0x97eec6=a105_0x458ba8,_0x52aafe=await this[_0x97eec6(0x13b)][_0x97eec6(0xf7)][_0x97eec6(0x109)](this['branch']['name']);await this[_0x97eec6(0x114)][_0x97eec6(0x125)](this[_0x97eec6(0x127)]+_0x97eec6(0x124));const _0x582674={[this[_0x97eec6(0x13b)][_0x97eec6(0x138)]]:{'lastCommit':_0x52aafe[_0x97eec6(0x136)]}};await this[_0x97eec6(0x100)][_0x97eec6(0x12f)](this[_0x97eec6(0x13c)],_0x582674);}async['run']({syncRecord:_0x3ae126,repository:_0x481d97,convertToSFDX:_0x50c501,provider:_0x1dd862}){const _0x4d265b=a105_0x458ba8;this[_0x4d265b(0x13c)]=_0x3ae126,this[_0x4d265b(0x111)]=_0x1dd862,this[_0x4d265b(0x13b)]=_0x481d97,this['sfLogger']=typedi_1[_0x4d265b(0x108)][_0x4d265b(0x13f)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x4d265b(0x127)]=_0x4d265b(0x139)+this['syncData'][_0x4d265b(0x117)]+_0x4d265b(0xec)+this[_0x4d265b(0x13c)][_0x4d265b(0x120)]+']';try{await this['sfLogger'][_0x4d265b(0x125)](this[_0x4d265b(0x127)]+_0x4d265b(0x122))[_0x4d265b(0xf5)](),await this[_0x4d265b(0x100)][_0x4d265b(0x132)](this[_0x4d265b(0x13c)],_0x4d265b(0x10c)),this[_0x4d265b(0x114)][_0x4d265b(0x125)](this[_0x4d265b(0x127)]+_0x4d265b(0xfb)),await this['createBranchIfNotExists'](),await this[_0x4d265b(0x114)]['log'](this['prefix']+'\x20Checking\x20sync\x20status.')['send']();const _0x1f7cf9=await this[_0x4d265b(0x128)]();this['sfLogger']['log'](this['prefix']+'\x20Sync\x20status\x20'+_0x1f7cf9+'.');if(_0x1f7cf9){await this[_0x4d265b(0x100)][_0x4d265b(0x132)](this[_0x4d265b(0x13c)],_0x4d265b(0x11f)),await this[_0x4d265b(0x114)][_0x4d265b(0x125)](this[_0x4d265b(0x127)]+_0x4d265b(0x102))[_0x4d265b(0xf5)]();return;}const _0x3a6ed4=await this['getCommitDto'](_0x50c501);await this['commitJob'][_0x4d265b(0x110)](_0x3a6ed4,this[_0x4d265b(0x127)]),await this[_0x4d265b(0x100)][_0x4d265b(0x132)](this[_0x4d265b(0x13c)],_0x4d265b(0x11f)),await this[_0x4d265b(0x118)](),this['sfLogger'][_0x4d265b(0x125)](this[_0x4d265b(0x127)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x443d4b){throw _0x443d4b;}finally{await this['sfLogger']['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a105_0x458ba8(0x13d)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a105_0x458ba8(0x12b)],salesforce_service_1[a105_0x458ba8(0x129)],commit_components_job_1[a105_0x458ba8(0x130)]])],FlosumSyncJob),exports[a105_0x458ba8(0x10d)]=FlosumSyncJob;