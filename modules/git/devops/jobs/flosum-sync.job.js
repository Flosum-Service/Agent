const a127_0x289535=a127_0x5718;function a127_0x5718(_0x4db4c3,_0x256aa9){const _0x435953=a127_0x43f0();return a127_0x5718=function(_0x6e0358,_0x2f034c){_0x6e0358=_0x6e0358-0xe4;let _0x43f0b5=_0x435953[_0x6e0358];return _0x43f0b5;},a127_0x5718(_0x4db4c3,_0x256aa9);}(function(_0x39d796,_0x5591e0){const _0x1f8ced=a127_0x5718,_0x201a04=_0x39d796();while(!![]){try{const _0x157a6d=-parseInt(_0x1f8ced(0x10c))/0x1+parseInt(_0x1f8ced(0x121))/0x2+parseInt(_0x1f8ced(0x107))/0x3+parseInt(_0x1f8ced(0x13c))/0x4*(-parseInt(_0x1f8ced(0xff))/0x5)+-parseInt(_0x1f8ced(0x139))/0x6+parseInt(_0x1f8ced(0xe8))/0x7*(parseInt(_0x1f8ced(0x11a))/0x8)+-parseInt(_0x1f8ced(0x119))/0x9*(-parseInt(_0x1f8ced(0x11c))/0xa);if(_0x157a6d===_0x5591e0)break;else _0x201a04['push'](_0x201a04['shift']());}catch(_0x550746){_0x201a04['push'](_0x201a04['shift']());}}}(a127_0x43f0,0x946cd));const a127_0x2f034c=(function(){let _0x478238=!![];return function(_0x35cbbf,_0xf0fb49){const _0x5bd28f=_0x478238?function(){const _0x1b017c=a127_0x5718;if(_0xf0fb49){const _0x21f69d=_0xf0fb49[_0x1b017c(0x12e)](_0x35cbbf,arguments);return _0xf0fb49=null,_0x21f69d;}}:function(){};return _0x478238=![],_0x5bd28f;};}()),a127_0x6e0358=a127_0x2f034c(this,function(){const _0x48be99=a127_0x5718;return a127_0x6e0358[_0x48be99(0x112)]()[_0x48be99(0x12a)](_0x48be99(0x13a))[_0x48be99(0x112)]()[_0x48be99(0xea)](a127_0x6e0358)['search'](_0x48be99(0x13a));});function a127_0x43f0(){const _0x4397e7=['getBranchComponents','syncData','repositoryName','parse','userName','salesforceSync','setStatus','createBranchIfNotExists','6985866cDzbch','(((.+)+)+)+$','__metadata','108EPiwQl','convertToSFDX','repo','../dto/commit-components.dto','Service','then','CommitComponentsJob','metadata','2514295vHSdPm','components','constructor','repositoryId','run','recordTypeName','branchName','commitJob','checkSyncStatus','getComponentsFromRepository','\x20Update\x20remote\x20state.','object','getOne','getRemoteStateAttachmentId','getComponents','user','\x20Checking\x20repository\x20on\x20Flosum\x20side.','prefix','gitUrl','../../salesforce/services/salesforce-retriever.service','DEFAULT_GIT_USER_EMAIL','sfLogger','../../salesforce/services/salesforce-sync.service','36835AGqTJO','recordType','retrieveAttachment','./commit-components.job','catch','Sync\x20repository','typedi','../../salesforce/services/salesforce.service','760170FqMBXi','repository','branches','__decorate','\x20Checking\x20sync\x20status.','315633eNNzbk','getOwnPropertyDescriptor','SalesforceService','getCommitDto','sha','updateLastCommit','toString','defineProperty','In\x20Progress','Completed','Container','message','\x20Flosum\x20sync\x20job\x20done.','81fqdHfn','8lyxrjf','function','1760870xJFslU','\x20Branch\x20synchronized.\x20Skip','getComponentIds','SalesforceLogger3',']\x20[Branch:\x20','178888XwSPVH','log','FlosumSyncJob','branch','create','\x20Start\x20Flosum\x20sync\x20job','string','send','provider','search','\x20Sync\x20status\x20','salesforceService','force','apply','SalesforceSyncService','decorate'];a127_0x43f0=function(){return _0x4397e7;};return a127_0x43f0();}a127_0x6e0358();'use strict';var __decorate=this&&this[a127_0x289535(0x10a)]||function(_0x10e9f8,_0x17887b,_0x10f095,_0x31de8b){const _0x4689c4=a127_0x289535;var _0x1d374c=arguments['length'],_0x1b3eb6=_0x1d374c<0x3?_0x17887b:_0x31de8b===null?_0x31de8b=Object[_0x4689c4(0x10d)](_0x17887b,_0x10f095):_0x31de8b,_0x4f6b1c;if(typeof Reflect===_0x4689c4(0xf3)&&typeof Reflect[_0x4689c4(0x130)]==='function')_0x1b3eb6=Reflect[_0x4689c4(0x130)](_0x10e9f8,_0x17887b,_0x10f095,_0x31de8b);else{for(var _0xb7ffa3=_0x10e9f8['length']-0x1;_0xb7ffa3>=0x0;_0xb7ffa3--)if(_0x4f6b1c=_0x10e9f8[_0xb7ffa3])_0x1b3eb6=(_0x1d374c<0x3?_0x4f6b1c(_0x1b3eb6):_0x1d374c>0x3?_0x4f6b1c(_0x17887b,_0x10f095,_0x1b3eb6):_0x4f6b1c(_0x17887b,_0x10f095))||_0x1b3eb6;}return _0x1d374c>0x3&&_0x1b3eb6&&Object[_0x4689c4(0x113)](_0x17887b,_0x10f095,_0x1b3eb6),_0x1b3eb6;},__metadata=this&&this[a127_0x289535(0x13b)]||function(_0x4363cd,_0xde685f){const _0x43bde8=a127_0x289535;if(typeof Reflect===_0x43bde8(0xf3)&&typeof Reflect['metadata']===_0x43bde8(0x11b))return Reflect[_0x43bde8(0xe7)](_0x4363cd,_0xde685f);};Object[a127_0x289535(0x113)](exports,'__esModule',{'value':!![]}),exports[a127_0x289535(0x123)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a127_0x289535(0x105)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a127_0x289535(0xfb)),salesforce_sync_service_1=require(a127_0x289535(0xfe)),salesforce_service_1=require(a127_0x289535(0x106)),commit_components_dto_1=require(a127_0x289535(0x13f)),commit_components_job_1=require(a127_0x289535(0x102));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1c40b3,_0x1ba064,_0x23d0ba){const _0x1718c0=a127_0x289535;this[_0x1718c0(0x136)]=_0x1c40b3,this[_0x1718c0(0x12c)]=_0x1ba064,this[_0x1718c0(0xef)]=_0x23d0ba;}async['createBranchIfNotExists'](){const _0x2254f1=a127_0x289535;let _0x3dde36=await this[_0x2254f1(0x108)][_0x2254f1(0x109)][_0x2254f1(0xf4)](this[_0x2254f1(0x132)][_0x2254f1(0xee)])[_0x2254f1(0x103)](()=>null);!_0x3dde36&&(_0x3dde36=await this[_0x2254f1(0x108)][_0x2254f1(0x109)][_0x2254f1(0x125)]({'name':this['syncData'][_0x2254f1(0xee)],'user':{'name':this[_0x2254f1(0x132)][_0x2254f1(0x135)],'email':this[_0x2254f1(0x132)]['userEmail']}})),this['branch']=_0x3dde36;}async[a127_0x289535(0x11e)](){const _0x1b03d0=a127_0x289535;return this['syncData'][_0x1b03d0(0xeb)]?this[_0x1b03d0(0x136)][_0x1b03d0(0xf1)](this['syncData'][_0x1b03d0(0xeb)]):this[_0x1b03d0(0x136)][_0x1b03d0(0x131)](this['syncData']['branchId']);}async[a127_0x289535(0xf6)](){const _0x2e5457=a127_0x289535,_0x3aaf1a=await this[_0x2e5457(0x11e)](),_0x3d81e6=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x2e5457(0x12c)]),_0x440f96=await _0x3d81e6[_0x2e5457(0xec)](_0x3aaf1a);return _0x440f96;}async[a127_0x289535(0x10f)](_0x1024c7){const _0x387d2c=a127_0x289535,_0x2d42b2=new commit_components_dto_1['CommitComponentsDto']();return _0x2d42b2[_0x387d2c(0x117)]=_0x387d2c(0x104),_0x2d42b2[_0x387d2c(0xf7)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x387d2c(0xfc)]},_0x2d42b2[_0x387d2c(0xe9)]={'writed':await this[_0x387d2c(0xf6)]()},_0x2d42b2[_0x387d2c(0x13d)]=_0x1024c7,_0x2d42b2[_0x387d2c(0x13e)]=this[_0x387d2c(0x108)],_0x2d42b2[_0x387d2c(0x124)]=this['branch'],_0x2d42b2[_0x387d2c(0x12d)]=!![],_0x2d42b2['provider']=this[_0x387d2c(0x129)],_0x2d42b2[_0x387d2c(0x100)]=this['syncData'][_0x387d2c(0xed)],_0x2d42b2;}async[a127_0x289535(0xf0)](){const _0x5595f8=a127_0x289535,_0x4e69e0=await this[_0x5595f8(0x136)][_0x5595f8(0xf5)](this[_0x5595f8(0x132)]),_0x43024d=await this[_0x5595f8(0x12c)][_0x5595f8(0x101)](_0x4e69e0)[_0x5595f8(0xe5)](_0x5b44d1=>typeof _0x5b44d1===_0x5595f8(0x127)?JSON[_0x5595f8(0x134)](_0x5b44d1):_0x5b44d1)[_0x5595f8(0x103)](()=>({}));if(_0x43024d[this[_0x5595f8(0x108)][_0x5595f8(0xfa)]]){if(_0x43024d[this[_0x5595f8(0x108)]['gitUrl']]['lastCommit']===this[_0x5595f8(0x124)][_0x5595f8(0x110)])return!![];}return![];}async[a127_0x289535(0x111)](){const _0x15557a=a127_0x289535,_0x6493ca=await this[_0x15557a(0x108)][_0x15557a(0x109)][_0x15557a(0xf4)](this['branch']['name']);await this[_0x15557a(0xfd)][_0x15557a(0x122)](this[_0x15557a(0xf9)]+_0x15557a(0xf2));const _0x3beaf1={[this[_0x15557a(0x108)][_0x15557a(0xfa)]]:{'lastCommit':_0x6493ca['sha']}};await this[_0x15557a(0x136)]['updateRemoteState'](this[_0x15557a(0x132)],_0x3beaf1);}async[a127_0x289535(0xec)]({syncRecord:_0x3429c3,repository:_0xe03ac1,convertToSFDX:_0x2f069d,provider:_0x24c90e}){const _0x4c872c=a127_0x289535;this[_0x4c872c(0x132)]=_0x3429c3,this[_0x4c872c(0x129)]=_0x24c90e,this[_0x4c872c(0x108)]=_0xe03ac1,this[_0x4c872c(0xfd)]=typedi_1[_0x4c872c(0x116)]['get'](salesforce_logger_v3_service_1[_0x4c872c(0x11f)]),this[_0x4c872c(0xf9)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this['syncData'][_0x4c872c(0x133)]+_0x4c872c(0x120)+this[_0x4c872c(0x132)][_0x4c872c(0xee)]+']';try{await this[_0x4c872c(0xfd)]['log'](this[_0x4c872c(0xf9)]+_0x4c872c(0x126))['send'](),await this['salesforceSync']['setStatus'](this[_0x4c872c(0x132)],_0x4c872c(0x114)),this['sfLogger']['log'](this[_0x4c872c(0xf9)]+_0x4c872c(0xf8)),await this[_0x4c872c(0x138)](),await this[_0x4c872c(0xfd)][_0x4c872c(0x122)](this[_0x4c872c(0xf9)]+_0x4c872c(0x10b))[_0x4c872c(0x128)]();const _0x7068f2=await this[_0x4c872c(0xf0)]();this['sfLogger'][_0x4c872c(0x122)](this[_0x4c872c(0xf9)]+_0x4c872c(0x12b)+_0x7068f2+'.');if(_0x7068f2){await this[_0x4c872c(0x136)][_0x4c872c(0x137)](this['syncData'],_0x4c872c(0x115)),await this[_0x4c872c(0xfd)][_0x4c872c(0x122)](this['prefix']+_0x4c872c(0x11d))[_0x4c872c(0x128)]();return;}const _0x55daf4=await this[_0x4c872c(0x10f)](_0x2f069d);await this[_0x4c872c(0xef)][_0x4c872c(0xec)](_0x55daf4,this[_0x4c872c(0xf9)]),await this[_0x4c872c(0x136)][_0x4c872c(0x137)](this['syncData'],_0x4c872c(0x115)),await this[_0x4c872c(0x111)](),this['sfLogger'][_0x4c872c(0x122)](this[_0x4c872c(0xf9)]+_0x4c872c(0x118));}catch(_0x2da9bc){throw _0x2da9bc;}finally{await this[_0x4c872c(0xfd)][_0x4c872c(0x128)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a127_0x289535(0xe4)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a127_0x289535(0x12f)],salesforce_service_1[a127_0x289535(0x10e)],commit_components_job_1[a127_0x289535(0xe6)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;