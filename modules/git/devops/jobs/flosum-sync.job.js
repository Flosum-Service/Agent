const a62_0x36005f=a62_0xd966;(function(_0x488509,_0x4aecab){const _0x31d5ca=a62_0xd966,_0x29458b=_0x488509();while(!![]){try{const _0x1b8abd=parseInt(_0x31d5ca(0x161))/0x1*(parseInt(_0x31d5ca(0x14d))/0x2)+parseInt(_0x31d5ca(0x148))/0x3+-parseInt(_0x31d5ca(0x134))/0x4+parseInt(_0x31d5ca(0x17a))/0x5+parseInt(_0x31d5ca(0x137))/0x6*(-parseInt(_0x31d5ca(0x13a))/0x7)+-parseInt(_0x31d5ca(0x17e))/0x8+-parseInt(_0x31d5ca(0x128))/0x9*(parseInt(_0x31d5ca(0x140))/0xa);if(_0x1b8abd===_0x4aecab)break;else _0x29458b['push'](_0x29458b['shift']());}catch(_0x5ca4b1){_0x29458b['push'](_0x29458b['shift']());}}}(a62_0xc3c6,0xac81f));const a62_0x47be02=(function(){let _0x45c898=!![];return function(_0xd79753,_0x3b49e1){const _0x12c013=_0x45c898?function(){if(_0x3b49e1){const _0x2b520e=_0x3b49e1['apply'](_0xd79753,arguments);return _0x3b49e1=null,_0x2b520e;}}:function(){};return _0x45c898=![],_0x12c013;};}()),a62_0x5a1725=a62_0x47be02(this,function(){const _0x15c6c9=a62_0xd966;return a62_0x5a1725[_0x15c6c9(0x176)]()[_0x15c6c9(0x12a)](_0x15c6c9(0x170))[_0x15c6c9(0x176)]()[_0x15c6c9(0x146)](a62_0x5a1725)['search'](_0x15c6c9(0x170));});a62_0x5a1725();'use strict';function a62_0xd966(_0x56ec58,_0x1bcfa4){const _0x436b0e=a62_0xc3c6();return a62_0xd966=function(_0x5a1725,_0x47be02){_0x5a1725=_0x5a1725-0x126;let _0xc3c699=_0x436b0e[_0x5a1725];return _0xc3c699;},a62_0xd966(_0x56ec58,_0x1bcfa4);}function a62_0xc3c6(){const _0x5583e2=['function','send','CommitComponentsJob','(((.+)+)+)+$','getComponentIds','updateRemoteState','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','syncData','updateLastCommit','toString','length','object','CommitComponentsDto','5337670LJmiYA','getComponentsFromRepository','\x20Flosum\x20sync\x20job\x20done.','createBranchIfNotExists','3385016trdZxJ','components','FlosumSyncJob','repo','58347NQgBQz','../../salesforce/services/salesforce-sync.service','search','name','\x20Start\x20Flosum\x20sync\x20job','log','defineProperty','prefix','SalesforceRetrieverService','sfLogger','lastCommit','Completed','1810644DVlojv','repositoryId','\x20Checking\x20repository\x20on\x20Flosum\x20side.','7926fSVBZZ','metadata','getCommitDto','301ZnHlPo','SalesforceSyncService','Service','gitUrl','salesforceService','branchName','410HPYiYw','\x20Sync\x20status\x20','SalesforceLogger3','user','Sync\x20repository','./commit-components.job','constructor','../../salesforce/services/salesforce-retriever.service','2201130OgBFnc','\x20Checking\x20sync\x20status.','design:paramtypes','convertToSFDX','DEFAULT_GIT_USER_EMAIL','207482BuArwg','__decorate','get','provider','salesforceSync','getComponents','message','In\x20Progress','branch','retrieveAttachment','getOne','branchId','\x20Update\x20remote\x20state.','../../salesforce/services/salesforce-logger-v3.service',']\x20[Branch:\x20','repositoryName','__esModule','checkSyncStatus','string','commitJob','1RbGptF','catch','decorate','getOwnPropertyDescriptor','DEFAULT_GIT_USER_NAME','run','repository','sha','../../salesforce/services/salesforce.service','Container','setStatus','branches'];a62_0xc3c6=function(){return _0x5583e2;};return a62_0xc3c6();}var __decorate=this&&this[a62_0x36005f(0x14e)]||function(_0x138413,_0xeb8afd,_0xb4be3d,_0x1730e9){const _0x3b520e=a62_0x36005f;var _0x1aae44=arguments[_0x3b520e(0x177)],_0x3d79da=_0x1aae44<0x3?_0xeb8afd:_0x1730e9===null?_0x1730e9=Object[_0x3b520e(0x164)](_0xeb8afd,_0xb4be3d):_0x1730e9,_0x1192dd;if(typeof Reflect==='object'&&typeof Reflect[_0x3b520e(0x163)]===_0x3b520e(0x16d))_0x3d79da=Reflect[_0x3b520e(0x163)](_0x138413,_0xeb8afd,_0xb4be3d,_0x1730e9);else{for(var _0x21d6a0=_0x138413[_0x3b520e(0x177)]-0x1;_0x21d6a0>=0x0;_0x21d6a0--)if(_0x1192dd=_0x138413[_0x21d6a0])_0x3d79da=(_0x1aae44<0x3?_0x1192dd(_0x3d79da):_0x1aae44>0x3?_0x1192dd(_0xeb8afd,_0xb4be3d,_0x3d79da):_0x1192dd(_0xeb8afd,_0xb4be3d))||_0x3d79da;}return _0x1aae44>0x3&&_0x3d79da&&Object[_0x3b520e(0x12e)](_0xeb8afd,_0xb4be3d,_0x3d79da),_0x3d79da;},__metadata=this&&this['__metadata']||function(_0x22f7a6,_0xb0484b){const _0x4b51b0=a62_0x36005f;if(typeof Reflect===_0x4b51b0(0x178)&&typeof Reflect[_0x4b51b0(0x138)]===_0x4b51b0(0x16d))return Reflect[_0x4b51b0(0x138)](_0x22f7a6,_0xb0484b);};Object[a62_0x36005f(0x12e)](exports,a62_0x36005f(0x15d),{'value':!![]}),exports[a62_0x36005f(0x126)]=void 0x0;const salesforce_logger_v3_service_1=require(a62_0x36005f(0x15a)),typedi_1=require('typedi'),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a62_0x36005f(0x147)),salesforce_sync_service_1=require(a62_0x36005f(0x129)),salesforce_service_1=require(a62_0x36005f(0x169)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a62_0x36005f(0x145));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x293669,_0x59f254,_0x19987e){const _0x58d52c=a62_0x36005f;this['salesforceSync']=_0x293669,this['salesforceService']=_0x59f254,this[_0x58d52c(0x160)]=_0x19987e;}async[a62_0x36005f(0x17d)](){const _0x55cb77=a62_0x36005f;let _0x53d51b=await this[_0x55cb77(0x167)][_0x55cb77(0x16c)][_0x55cb77(0x157)](this['syncData'][_0x55cb77(0x13f)])[_0x55cb77(0x162)](()=>null);!_0x53d51b&&(_0x53d51b=await this[_0x55cb77(0x167)][_0x55cb77(0x16c)]['create']({'name':this[_0x55cb77(0x174)][_0x55cb77(0x13f)]})),this[_0x55cb77(0x155)]=_0x53d51b;}async[a62_0x36005f(0x171)](){const _0x496042=a62_0x36005f;return this[_0x496042(0x174)][_0x496042(0x135)]?this[_0x496042(0x151)][_0x496042(0x17b)](this['syncData'][_0x496042(0x135)]):this['salesforceSync']['getBranchComponents'](this[_0x496042(0x174)][_0x496042(0x158)]);}async['getComponents'](){const _0xe377f0=a62_0x36005f,_0x5c30ac=await this[_0xe377f0(0x171)](),_0x2fa717=new salesforce_retriever_service_1[(_0xe377f0(0x130))](this[_0xe377f0(0x13e)]),_0x3c3dd5=await _0x2fa717[_0xe377f0(0x166)](_0x5c30ac);return _0x3c3dd5;}async[a62_0x36005f(0x139)](_0x4898af){const _0x1ddbd2=a62_0x36005f,_0x25fe4f=new commit_components_dto_1[(_0x1ddbd2(0x179))]();return _0x25fe4f[_0x1ddbd2(0x153)]=_0x1ddbd2(0x144),_0x25fe4f[_0x1ddbd2(0x143)]={'name':constants_1[_0x1ddbd2(0x165)],'email':constants_1[_0x1ddbd2(0x14c)]},_0x25fe4f[_0x1ddbd2(0x17f)]={'writed':await this[_0x1ddbd2(0x152)]()},_0x25fe4f[_0x1ddbd2(0x14b)]=_0x4898af,_0x25fe4f[_0x1ddbd2(0x127)]=this[_0x1ddbd2(0x167)],_0x25fe4f[_0x1ddbd2(0x155)]=this['branch'],_0x25fe4f['force']=!![],_0x25fe4f[_0x1ddbd2(0x150)]=this[_0x1ddbd2(0x150)],_0x25fe4f;}async['checkSyncStatus'](){const _0x4618af=a62_0x36005f,_0x227c43=await this[_0x4618af(0x151)]['getRemoteStateAttachmentId'](this['syncData']),_0x56adc8=await this['salesforceService'][_0x4618af(0x156)](_0x227c43)['then'](_0x2db27b=>typeof _0x2db27b===_0x4618af(0x15f)?JSON['parse'](_0x2db27b):_0x2db27b)['catch'](()=>({}));if(_0x56adc8[this[_0x4618af(0x167)][_0x4618af(0x13d)]]){if(_0x56adc8[this[_0x4618af(0x167)][_0x4618af(0x13d)]][_0x4618af(0x132)]===this[_0x4618af(0x155)][_0x4618af(0x168)])return!![];}return![];}async[a62_0x36005f(0x175)](){const _0x22d5fc=a62_0x36005f,_0x5cb67f=await this['repository'][_0x22d5fc(0x16c)][_0x22d5fc(0x157)](this[_0x22d5fc(0x155)][_0x22d5fc(0x12b)]);await this['sfLogger'][_0x22d5fc(0x12d)](this[_0x22d5fc(0x12f)]+_0x22d5fc(0x159));const _0x2f9d81={[this[_0x22d5fc(0x167)][_0x22d5fc(0x13d)]]:{'lastCommit':_0x5cb67f[_0x22d5fc(0x168)]}};await this[_0x22d5fc(0x151)][_0x22d5fc(0x172)](this[_0x22d5fc(0x174)],_0x2f9d81);}async['run']({syncRecord:_0x1249bf,repository:_0xd9ee0e,convertToSFDX:_0x4f193d,provider:_0x4aab75}){const _0x25d17b=a62_0x36005f;this[_0x25d17b(0x174)]=_0x1249bf,this[_0x25d17b(0x150)]=_0x4aab75,this[_0x25d17b(0x167)]=_0xd9ee0e,this[_0x25d17b(0x131)]=typedi_1[_0x25d17b(0x16a)][_0x25d17b(0x14f)](salesforce_logger_v3_service_1[_0x25d17b(0x142)]),this[_0x25d17b(0x12f)]=_0x25d17b(0x173)+this[_0x25d17b(0x174)][_0x25d17b(0x15c)]+_0x25d17b(0x15b)+this['syncData'][_0x25d17b(0x13f)]+']';try{await this[_0x25d17b(0x131)]['log'](this[_0x25d17b(0x12f)]+_0x25d17b(0x12c))[_0x25d17b(0x16e)](),await this['salesforceSync'][_0x25d17b(0x16b)](this[_0x25d17b(0x174)],_0x25d17b(0x154)),this['sfLogger'][_0x25d17b(0x12d)](this[_0x25d17b(0x12f)]+_0x25d17b(0x136)),await this[_0x25d17b(0x17d)](),await this[_0x25d17b(0x131)][_0x25d17b(0x12d)](this[_0x25d17b(0x12f)]+_0x25d17b(0x149))[_0x25d17b(0x16e)]();const _0x295a5c=await this[_0x25d17b(0x15e)]();this[_0x25d17b(0x131)][_0x25d17b(0x12d)](this['prefix']+_0x25d17b(0x141)+_0x295a5c+'.');if(_0x295a5c){await this[_0x25d17b(0x151)]['setStatus'](this[_0x25d17b(0x174)],_0x25d17b(0x133)),await this[_0x25d17b(0x131)][_0x25d17b(0x12d)](this[_0x25d17b(0x12f)]+'\x20Branch\x20synchronized.\x20Skip')['send']();return;}const _0xec35da=await this['getCommitDto'](_0x4f193d);await this[_0x25d17b(0x160)][_0x25d17b(0x166)](_0xec35da,this[_0x25d17b(0x12f)]),await this[_0x25d17b(0x151)]['setStatus'](this[_0x25d17b(0x174)],_0x25d17b(0x133)),await this['updateLastCommit'](),this[_0x25d17b(0x131)][_0x25d17b(0x12d)](this[_0x25d17b(0x12f)]+_0x25d17b(0x17c));}catch(_0x18af8b){throw _0x18af8b;}finally{await this[_0x25d17b(0x131)][_0x25d17b(0x16e)]();}}};FlosumSyncJob=__decorate([typedi_1[a62_0x36005f(0x13c)]({'transient':!![]}),__metadata(a62_0x36005f(0x14a),[salesforce_sync_service_1[a62_0x36005f(0x13b)],salesforce_service_1['SalesforceService'],commit_components_job_1[a62_0x36005f(0x16f)]])],FlosumSyncJob),exports[a62_0x36005f(0x126)]=FlosumSyncJob;