const a107_0x2f079d=a107_0x2d4c;(function(_0x7181d1,_0x57b15c){const _0x4cfdbd=a107_0x2d4c,_0x2f0b04=_0x7181d1();while(!![]){try{const _0x3106c9=parseInt(_0x4cfdbd(0x20f))/0x1*(-parseInt(_0x4cfdbd(0x1c9))/0x2)+-parseInt(_0x4cfdbd(0x1dc))/0x3*(-parseInt(_0x4cfdbd(0x1e2))/0x4)+parseInt(_0x4cfdbd(0x1f5))/0x5+-parseInt(_0x4cfdbd(0x204))/0x6+-parseInt(_0x4cfdbd(0x1cc))/0x7+-parseInt(_0x4cfdbd(0x1fa))/0x8+-parseInt(_0x4cfdbd(0x1bf))/0x9*(-parseInt(_0x4cfdbd(0x1ec))/0xa);if(_0x3106c9===_0x57b15c)break;else _0x2f0b04['push'](_0x2f0b04['shift']());}catch(_0x3618da){_0x2f0b04['push'](_0x2f0b04['shift']());}}}(a107_0x5955,0x962e5));const a107_0x5281b0=(function(){let _0x298272=!![];return function(_0x4dc6e3,_0x242f08){const _0x19b5c1=_0x298272?function(){if(_0x242f08){const _0x138096=_0x242f08['apply'](_0x4dc6e3,arguments);return _0x242f08=null,_0x138096;}}:function(){};return _0x298272=![],_0x19b5c1;};}()),a107_0x387056=a107_0x5281b0(this,function(){const _0x5ae4e5=a107_0x2d4c;return a107_0x387056[_0x5ae4e5(0x210)]()['search']('(((.+)+)+)+$')['toString']()[_0x5ae4e5(0x1c6)](a107_0x387056)[_0x5ae4e5(0x211)]('(((.+)+)+)+$');});a107_0x387056();'use strict';function a107_0x2d4c(_0x5b1617,_0x6d876b){const _0x28f681=a107_0x5955();return a107_0x2d4c=function(_0x387056,_0x5281b0){_0x387056=_0x387056-0x1bc;let _0x59555c=_0x28f681[_0x387056];return _0x59555c;},a107_0x2d4c(_0x5b1617,_0x6d876b);}var __decorate=this&&this[a107_0x2f079d(0x1c2)]||function(_0x503243,_0x15cda3,_0x121b63,_0x55a2f7){const _0x254b0b=a107_0x2f079d;var _0x3ca3af=arguments[_0x254b0b(0x1cd)],_0x2134d6=_0x3ca3af<0x3?_0x15cda3:_0x55a2f7===null?_0x55a2f7=Object[_0x254b0b(0x1bc)](_0x15cda3,_0x121b63):_0x55a2f7,_0x89568e;if(typeof Reflect==='object'&&typeof Reflect[_0x254b0b(0x1ea)]===_0x254b0b(0x20b))_0x2134d6=Reflect[_0x254b0b(0x1ea)](_0x503243,_0x15cda3,_0x121b63,_0x55a2f7);else{for(var _0x3458e2=_0x503243[_0x254b0b(0x1cd)]-0x1;_0x3458e2>=0x0;_0x3458e2--)if(_0x89568e=_0x503243[_0x3458e2])_0x2134d6=(_0x3ca3af<0x3?_0x89568e(_0x2134d6):_0x3ca3af>0x3?_0x89568e(_0x15cda3,_0x121b63,_0x2134d6):_0x89568e(_0x15cda3,_0x121b63))||_0x2134d6;}return _0x3ca3af>0x3&&_0x2134d6&&Object[_0x254b0b(0x1c3)](_0x15cda3,_0x121b63,_0x2134d6),_0x2134d6;},__metadata=this&&this[a107_0x2f079d(0x1bd)]||function(_0x3ebc1d,_0x396d4d){const _0x1208dc=a107_0x2f079d;if(typeof Reflect==='object'&&typeof Reflect[_0x1208dc(0x207)]===_0x1208dc(0x20b))return Reflect['metadata'](_0x3ebc1d,_0x396d4d);};function a107_0x5955(){const _0x2e8202=['retrieveAttachment','SalesforceSyncService','3896924rAYRjz',']\x20[Branch:\x20','repositoryId','catch','../../salesforce/services/salesforce-sync.service','prefix','recordType','salesforceService','decorate','\x20Sync\x20status\x20','13230VmijFJ','repository','getOne','then','sha','createBranchIfNotExists','string','\x20Update\x20remote\x20state.','syncData','1036395ZjUXDB','branchId','../../salesforce/services/salesforce-retriever.service','user','Completed','3856016kPxZru','components','provider','SalesforceLogger3','setStatus','send','recordTypeName','sfLogger','getCommitDto','updateRemoteState','297174yyutoO','message','getComponentsFromRepository','metadata','salesforceSync','commitJob','./commit-components.job','function','branchName','branch','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','2TdSlYj','toString','search','getOwnPropertyDescriptor','__metadata','FlosumSyncJob','4518hvGtPX','log','getBranchComponents','__decorate','defineProperty','Container','\x20Branch\x20synchronized.\x20Skip','constructor','../../salesforce/services/salesforce.service','gitUrl','369346AsYulD','getRemoteStateAttachmentId','design:paramtypes','2307466wjZPGy','length','getComponents','../dto/commit-components.dto','Service','\x20Checking\x20repository\x20on\x20Flosum\x20side.','CommitComponentsDto','SalesforceRetrieverService','branches','updateLastCommit','parse','DEFAULT_GIT_USER_EMAIL','typedi','getComponentIds','get','create','3lcYPqs','repositoryName','run','CommitComponentsJob'];a107_0x5955=function(){return _0x2e8202;};return a107_0x5955();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a107_0x2f079d(0x1be)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a107_0x2f079d(0x1d8)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a107_0x2f079d(0x1f7)),salesforce_sync_service_1=require(a107_0x2f079d(0x1e6)),salesforce_service_1=require(a107_0x2f079d(0x1c7)),commit_components_dto_1=require(a107_0x2f079d(0x1cf)),commit_components_job_1=require(a107_0x2f079d(0x20a));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1c2309,_0x5ead21,_0x46b932){const _0x5a24e6=a107_0x2f079d;this['salesforceSync']=_0x1c2309,this[_0x5a24e6(0x1e9)]=_0x5ead21,this[_0x5a24e6(0x209)]=_0x46b932;}async[a107_0x2f079d(0x1f1)](){const _0x4dfe4b=a107_0x2f079d;let _0x110ee8=await this[_0x4dfe4b(0x1ed)][_0x4dfe4b(0x1d4)][_0x4dfe4b(0x1ee)](this[_0x4dfe4b(0x1f4)][_0x4dfe4b(0x20c)])[_0x4dfe4b(0x1e5)](()=>null);!_0x110ee8&&(_0x110ee8=await this[_0x4dfe4b(0x1ed)][_0x4dfe4b(0x1d4)][_0x4dfe4b(0x1db)]({'name':this[_0x4dfe4b(0x1f4)][_0x4dfe4b(0x20c)]})),this[_0x4dfe4b(0x20d)]=_0x110ee8;}async['getComponentIds'](){const _0x2f2db4=a107_0x2f079d;return this[_0x2f2db4(0x1f4)]['repositoryId']?this[_0x2f2db4(0x208)][_0x2f2db4(0x206)](this[_0x2f2db4(0x1f4)][_0x2f2db4(0x1e4)]):this['salesforceSync'][_0x2f2db4(0x1c1)](this[_0x2f2db4(0x1f4)][_0x2f2db4(0x1f6)]);}async[a107_0x2f079d(0x1ce)](){const _0xa57bf2=a107_0x2f079d,_0x5c17a8=await this[_0xa57bf2(0x1d9)](),_0x3a6478=new salesforce_retriever_service_1[(_0xa57bf2(0x1d3))](this[_0xa57bf2(0x1e9)]),_0x2f00f0=await _0x3a6478[_0xa57bf2(0x1de)](_0x5c17a8);return _0x2f00f0;}async[a107_0x2f079d(0x202)](_0x327707){const _0x58fcb3=a107_0x2f079d,_0x957adc=new commit_components_dto_1[(_0x58fcb3(0x1d2))]();return _0x957adc[_0x58fcb3(0x205)]='Sync\x20repository',_0x957adc[_0x58fcb3(0x1f8)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x58fcb3(0x1d7)]},_0x957adc[_0x58fcb3(0x1fb)]={'writed':await this[_0x58fcb3(0x1ce)]()},_0x957adc['convertToSFDX']=_0x327707,_0x957adc['repo']=this[_0x58fcb3(0x1ed)],_0x957adc[_0x58fcb3(0x20d)]=this[_0x58fcb3(0x20d)],_0x957adc['force']=!![],_0x957adc[_0x58fcb3(0x1fc)]=this[_0x58fcb3(0x1fc)],_0x957adc[_0x58fcb3(0x1e8)]=this['syncData'][_0x58fcb3(0x200)],_0x957adc;}async['checkSyncStatus'](){const _0x6deee0=a107_0x2f079d,_0x44460b=await this['salesforceSync'][_0x6deee0(0x1ca)](this[_0x6deee0(0x1f4)]),_0x300b23=await this[_0x6deee0(0x1e9)][_0x6deee0(0x1e0)](_0x44460b)[_0x6deee0(0x1ef)](_0x1ea660=>typeof _0x1ea660===_0x6deee0(0x1f2)?JSON[_0x6deee0(0x1d6)](_0x1ea660):_0x1ea660)[_0x6deee0(0x1e5)](()=>({}));if(_0x300b23[this[_0x6deee0(0x1ed)][_0x6deee0(0x1c8)]]){if(_0x300b23[this[_0x6deee0(0x1ed)]['gitUrl']]['lastCommit']===this['branch'][_0x6deee0(0x1f0)])return!![];}return![];}async[a107_0x2f079d(0x1d5)](){const _0x1ac0a3=a107_0x2f079d,_0xd0ec3e=await this[_0x1ac0a3(0x1ed)][_0x1ac0a3(0x1d4)]['getOne'](this[_0x1ac0a3(0x20d)]['name']);await this[_0x1ac0a3(0x201)]['log'](this['prefix']+_0x1ac0a3(0x1f3));const _0x143e9e={[this[_0x1ac0a3(0x1ed)][_0x1ac0a3(0x1c8)]]:{'lastCommit':_0xd0ec3e[_0x1ac0a3(0x1f0)]}};await this['salesforceSync'][_0x1ac0a3(0x203)](this[_0x1ac0a3(0x1f4)],_0x143e9e);}async['run']({syncRecord:_0x279e84,repository:_0x25345e,convertToSFDX:_0x96565e,provider:_0x3c1a59}){const _0x557800=a107_0x2f079d;this[_0x557800(0x1f4)]=_0x279e84,this[_0x557800(0x1fc)]=_0x3c1a59,this[_0x557800(0x1ed)]=_0x25345e,this['sfLogger']=typedi_1[_0x557800(0x1c4)][_0x557800(0x1da)](salesforce_logger_v3_service_1[_0x557800(0x1fd)]),this[_0x557800(0x1e7)]=_0x557800(0x20e)+this[_0x557800(0x1f4)][_0x557800(0x1dd)]+_0x557800(0x1e3)+this[_0x557800(0x1f4)][_0x557800(0x20c)]+']';try{await this[_0x557800(0x201)][_0x557800(0x1c0)](this[_0x557800(0x1e7)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x557800(0x1ff)](),await this[_0x557800(0x208)][_0x557800(0x1fe)](this['syncData'],'In\x20Progress'),this[_0x557800(0x201)][_0x557800(0x1c0)](this[_0x557800(0x1e7)]+_0x557800(0x1d1)),await this[_0x557800(0x1f1)](),await this[_0x557800(0x201)][_0x557800(0x1c0)](this[_0x557800(0x1e7)]+'\x20Checking\x20sync\x20status.')['send']();const _0x3a89c4=await this['checkSyncStatus']();this['sfLogger'][_0x557800(0x1c0)](this[_0x557800(0x1e7)]+_0x557800(0x1eb)+_0x3a89c4+'.');if(_0x3a89c4){await this['salesforceSync'][_0x557800(0x1fe)](this[_0x557800(0x1f4)],'Completed'),await this[_0x557800(0x201)][_0x557800(0x1c0)](this[_0x557800(0x1e7)]+_0x557800(0x1c5))[_0x557800(0x1ff)]();return;}const _0x208fdc=await this[_0x557800(0x202)](_0x96565e);await this[_0x557800(0x209)][_0x557800(0x1de)](_0x208fdc,this[_0x557800(0x1e7)]),await this[_0x557800(0x208)]['setStatus'](this[_0x557800(0x1f4)],_0x557800(0x1f9)),await this[_0x557800(0x1d5)](),this[_0x557800(0x201)]['log'](this[_0x557800(0x1e7)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x31595b){throw _0x31595b;}finally{await this['sfLogger']['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a107_0x2f079d(0x1d0)])({'transient':!![]}),__metadata(a107_0x2f079d(0x1cb),[salesforce_sync_service_1[a107_0x2f079d(0x1e1)],salesforce_service_1['SalesforceService'],commit_components_job_1[a107_0x2f079d(0x1df)]])],FlosumSyncJob),exports[a107_0x2f079d(0x1be)]=FlosumSyncJob;