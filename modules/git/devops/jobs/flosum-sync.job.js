const a106_0x4cccef=a106_0x8461;(function(_0x213fe1,_0x4d3c51){const _0xbf19b=a106_0x8461,_0x3546ae=_0x213fe1();while(!![]){try{const _0x8e93c5=parseInt(_0xbf19b(0x1bb))/0x1+parseInt(_0xbf19b(0x17f))/0x2*(parseInt(_0xbf19b(0x181))/0x3)+parseInt(_0xbf19b(0x1b3))/0x4+-parseInt(_0xbf19b(0x180))/0x5*(-parseInt(_0xbf19b(0x184))/0x6)+parseInt(_0xbf19b(0x179))/0x7*(-parseInt(_0xbf19b(0x171))/0x8)+parseInt(_0xbf19b(0x16a))/0x9*(parseInt(_0xbf19b(0x1ac))/0xa)+-parseInt(_0xbf19b(0x1a8))/0xb;if(_0x8e93c5===_0x4d3c51)break;else _0x3546ae['push'](_0x3546ae['shift']());}catch(_0x1c8d34){_0x3546ae['push'](_0x3546ae['shift']());}}}(a106_0x374e,0x94929));const a106_0x1de61e=(function(){let _0x3569cc=!![];return function(_0x48176d,_0x4af3f2){const _0x51823a=_0x3569cc?function(){if(_0x4af3f2){const _0x591eca=_0x4af3f2['apply'](_0x48176d,arguments);return _0x4af3f2=null,_0x591eca;}}:function(){};return _0x3569cc=![],_0x51823a;};}()),a106_0x1c43b5=a106_0x1de61e(this,function(){const _0x42b848=a106_0x8461;return a106_0x1c43b5[_0x42b848(0x1a5)]()['search']('(((.+)+)+)+$')[_0x42b848(0x1a5)]()['constructor'](a106_0x1c43b5)['search'](_0x42b848(0x188));});a106_0x1c43b5();function a106_0x8461(_0x34d2de,_0x3a9568){const _0x1d4102=a106_0x374e();return a106_0x8461=function(_0x1c43b5,_0x1de61e){_0x1c43b5=_0x1c43b5-0x168;let _0x374e8c=_0x1d4102[_0x1c43b5];return _0x374e8c;},a106_0x8461(_0x34d2de,_0x3a9568);}'use strict';function a106_0x374e(){const _0x3dc480=['4655TxajiM','metadata','getCommitDto','decorate','typedi','setStatus','66fYWPAB','9405gKakYy','64947TilpXc','branches','../../salesforce/services/salesforce-logger-v3.service','1548mrBqTF','run','branchName','design:paramtypes','(((.+)+)+)+$','SalesforceRetrieverService','getComponents','./commit-components.job','getOne','CommitComponentsJob','salesforceSync','log','SalesforceService','lastCommit','salesforceService','updateLastCommit','../../salesforce/services/salesforce.service','parse','repositoryId','repository','string','sfLogger','In\x20Progress','user','\x20Flosum\x20sync\x20job\x20done.','components','checkSyncStatus','then','function','getComponentIds','provider','\x20Checking\x20sync\x20status.','\x20Branch\x20synchronized.\x20Skip','toString','name','\x20Checking\x20repository\x20on\x20Flosum\x20side.','16355152UNkpsc',']\x20[Branch:\x20','syncData','defineProperty','1370GBmFDl','sha','CommitComponentsDto','getComponentsFromRepository','../../salesforce/services/salesforce-sync.service','getOwnPropertyDescriptor','\x20Update\x20remote\x20state.','3992524CboIuu','force','Completed','repositoryName','__decorate','catch','branch','../../../../constants','83490iZTiPy','branchId','createBranchIfNotExists','Sync\x20repository','37368aVmPaQ','object','length','DEFAULT_GIT_USER_EMAIL','prefix','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','FlosumSyncJob','9080JvJhzU','SalesforceSyncService','send','SalesforceLogger3','gitUrl','retrieveAttachment','commitJob','__metadata'];a106_0x374e=function(){return _0x3dc480;};return a106_0x374e();}var __decorate=this&&this[a106_0x4cccef(0x1b7)]||function(_0x442c29,_0x3dc689,_0xef6284,_0x1ab057){const _0x5b2b8c=a106_0x4cccef;var _0x578bb9=arguments[_0x5b2b8c(0x16c)],_0x58d418=_0x578bb9<0x3?_0x3dc689:_0x1ab057===null?_0x1ab057=Object[_0x5b2b8c(0x1b1)](_0x3dc689,_0xef6284):_0x1ab057,_0x2b745a;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x5b2b8c(0x1a0))_0x58d418=Reflect[_0x5b2b8c(0x17c)](_0x442c29,_0x3dc689,_0xef6284,_0x1ab057);else{for(var _0x433bb9=_0x442c29[_0x5b2b8c(0x16c)]-0x1;_0x433bb9>=0x0;_0x433bb9--)if(_0x2b745a=_0x442c29[_0x433bb9])_0x58d418=(_0x578bb9<0x3?_0x2b745a(_0x58d418):_0x578bb9>0x3?_0x2b745a(_0x3dc689,_0xef6284,_0x58d418):_0x2b745a(_0x3dc689,_0xef6284))||_0x58d418;}return _0x578bb9>0x3&&_0x58d418&&Object[_0x5b2b8c(0x1ab)](_0x3dc689,_0xef6284,_0x58d418),_0x58d418;},__metadata=this&&this[a106_0x4cccef(0x178)]||function(_0x51530b,_0x3cdcae){const _0x497fb6=a106_0x4cccef;if(typeof Reflect===_0x497fb6(0x16b)&&typeof Reflect[_0x497fb6(0x17a)]===_0x497fb6(0x1a0))return Reflect[_0x497fb6(0x17a)](_0x51530b,_0x3cdcae);};Object[a106_0x4cccef(0x1ab)](exports,'__esModule',{'value':!![]}),exports[a106_0x4cccef(0x170)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x4cccef(0x183)),typedi_1=require(a106_0x4cccef(0x17d)),constants_1=require(a106_0x4cccef(0x1ba)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a106_0x4cccef(0x1b0)),salesforce_service_1=require(a106_0x4cccef(0x194)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a106_0x4cccef(0x18b));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x48b067,_0x2ec793,_0x14ebd1){const _0x59a537=a106_0x4cccef;this[_0x59a537(0x18e)]=_0x48b067,this[_0x59a537(0x192)]=_0x2ec793,this[_0x59a537(0x177)]=_0x14ebd1;}async[a106_0x4cccef(0x168)](){const _0x1ef953=a106_0x4cccef;let _0x405a48=await this[_0x1ef953(0x197)][_0x1ef953(0x182)][_0x1ef953(0x18c)](this[_0x1ef953(0x1aa)][_0x1ef953(0x186)])[_0x1ef953(0x1b8)](()=>null);!_0x405a48&&(_0x405a48=await this[_0x1ef953(0x197)][_0x1ef953(0x182)]['create']({'name':this[_0x1ef953(0x1aa)][_0x1ef953(0x186)]})),this[_0x1ef953(0x1b9)]=_0x405a48;}async['getComponentIds'](){const _0x17062e=a106_0x4cccef;return this[_0x17062e(0x1aa)][_0x17062e(0x196)]?this[_0x17062e(0x18e)][_0x17062e(0x1af)](this[_0x17062e(0x1aa)][_0x17062e(0x196)]):this[_0x17062e(0x18e)]['getBranchComponents'](this[_0x17062e(0x1aa)][_0x17062e(0x1bc)]);}async[a106_0x4cccef(0x18a)](){const _0x438cde=a106_0x4cccef,_0x232720=await this[_0x438cde(0x1a1)](),_0x23b65e=new salesforce_retriever_service_1[(_0x438cde(0x189))](this['salesforceService']),_0x3f138a=await _0x23b65e[_0x438cde(0x185)](_0x232720);return _0x3f138a;}async[a106_0x4cccef(0x17b)](_0x530351){const _0x742452=a106_0x4cccef,_0x38d3cf=new commit_components_dto_1[(_0x742452(0x1ae))]();return _0x38d3cf['message']=_0x742452(0x169),_0x38d3cf[_0x742452(0x19b)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x742452(0x16d)]},_0x38d3cf[_0x742452(0x19d)]={'writed':await this[_0x742452(0x18a)]()},_0x38d3cf['convertToSFDX']=_0x530351,_0x38d3cf['repo']=this[_0x742452(0x197)],_0x38d3cf[_0x742452(0x1b9)]=this[_0x742452(0x1b9)],_0x38d3cf[_0x742452(0x1b4)]=!![],_0x38d3cf[_0x742452(0x1a2)]=this[_0x742452(0x1a2)],_0x38d3cf;}async[a106_0x4cccef(0x19e)](){const _0x5e0ada=a106_0x4cccef,_0x323322=await this[_0x5e0ada(0x18e)]['getRemoteStateAttachmentId'](this[_0x5e0ada(0x1aa)]),_0x1de2dc=await this[_0x5e0ada(0x192)][_0x5e0ada(0x176)](_0x323322)[_0x5e0ada(0x19f)](_0x40e38b=>typeof _0x40e38b===_0x5e0ada(0x198)?JSON[_0x5e0ada(0x195)](_0x40e38b):_0x40e38b)['catch'](()=>({}));if(_0x1de2dc[this['repository'][_0x5e0ada(0x175)]]){if(_0x1de2dc[this[_0x5e0ada(0x197)][_0x5e0ada(0x175)]][_0x5e0ada(0x191)]===this[_0x5e0ada(0x1b9)][_0x5e0ada(0x1ad)])return!![];}return![];}async[a106_0x4cccef(0x193)](){const _0x50f8bf=a106_0x4cccef,_0x4ba74=await this[_0x50f8bf(0x197)]['branches'][_0x50f8bf(0x18c)](this[_0x50f8bf(0x1b9)][_0x50f8bf(0x1a6)]);await this[_0x50f8bf(0x199)][_0x50f8bf(0x18f)](this[_0x50f8bf(0x16e)]+_0x50f8bf(0x1b2));const _0xeca062={[this[_0x50f8bf(0x197)][_0x50f8bf(0x175)]]:{'lastCommit':_0x4ba74[_0x50f8bf(0x1ad)]}};await this[_0x50f8bf(0x18e)]['updateRemoteState'](this[_0x50f8bf(0x1aa)],_0xeca062);}async[a106_0x4cccef(0x185)]({syncRecord:_0xff8af7,repository:_0x130398,convertToSFDX:_0x472317,provider:_0x303b75}){const _0x4b62d7=a106_0x4cccef;this['syncData']=_0xff8af7,this['provider']=_0x303b75,this[_0x4b62d7(0x197)]=_0x130398,this[_0x4b62d7(0x199)]=typedi_1['Container']['get'](salesforce_logger_v3_service_1[_0x4b62d7(0x174)]),this[_0x4b62d7(0x16e)]=_0x4b62d7(0x16f)+this[_0x4b62d7(0x1aa)][_0x4b62d7(0x1b6)]+_0x4b62d7(0x1a9)+this[_0x4b62d7(0x1aa)]['branchName']+']';try{await this[_0x4b62d7(0x199)]['log'](this[_0x4b62d7(0x16e)]+'\x20Start\x20Flosum\x20sync\x20job')['send'](),await this['salesforceSync'][_0x4b62d7(0x17e)](this[_0x4b62d7(0x1aa)],_0x4b62d7(0x19a)),this['sfLogger']['log'](this['prefix']+_0x4b62d7(0x1a7)),await this[_0x4b62d7(0x168)](),await this[_0x4b62d7(0x199)][_0x4b62d7(0x18f)](this[_0x4b62d7(0x16e)]+_0x4b62d7(0x1a3))[_0x4b62d7(0x173)]();const _0x294a08=await this['checkSyncStatus']();this[_0x4b62d7(0x199)][_0x4b62d7(0x18f)](this['prefix']+'\x20Sync\x20status\x20'+_0x294a08+'.');if(_0x294a08){await this['salesforceSync'][_0x4b62d7(0x17e)](this[_0x4b62d7(0x1aa)],_0x4b62d7(0x1b5)),await this[_0x4b62d7(0x199)][_0x4b62d7(0x18f)](this[_0x4b62d7(0x16e)]+_0x4b62d7(0x1a4))[_0x4b62d7(0x173)]();return;}const _0x196ace=await this['getCommitDto'](_0x472317);await this[_0x4b62d7(0x177)]['run'](_0x196ace,this[_0x4b62d7(0x16e)]),await this[_0x4b62d7(0x18e)][_0x4b62d7(0x17e)](this[_0x4b62d7(0x1aa)],_0x4b62d7(0x1b5)),await this[_0x4b62d7(0x193)](),this[_0x4b62d7(0x199)]['log'](this[_0x4b62d7(0x16e)]+_0x4b62d7(0x19c));}catch(_0x599be8){throw _0x599be8;}finally{await this[_0x4b62d7(0x199)][_0x4b62d7(0x173)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a106_0x4cccef(0x187),[salesforce_sync_service_1[a106_0x4cccef(0x172)],salesforce_service_1[a106_0x4cccef(0x190)],commit_components_job_1[a106_0x4cccef(0x18d)]])],FlosumSyncJob),exports[a106_0x4cccef(0x170)]=FlosumSyncJob;