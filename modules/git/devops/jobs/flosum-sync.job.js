const a106_0x40bf8d=a106_0x5b80;(function(_0x19f974,_0x315de5){const _0x2263ee=a106_0x5b80,_0x52de8d=_0x19f974();while(!![]){try{const _0x1b6170=-parseInt(_0x2263ee(0x138))/0x1+parseInt(_0x2263ee(0x165))/0x2+parseInt(_0x2263ee(0x145))/0x3+parseInt(_0x2263ee(0x169))/0x4*(-parseInt(_0x2263ee(0x15b))/0x5)+parseInt(_0x2263ee(0x16a))/0x6*(parseInt(_0x2263ee(0x168))/0x7)+parseInt(_0x2263ee(0x14c))/0x8*(-parseInt(_0x2263ee(0x136))/0x9)+parseInt(_0x2263ee(0x158))/0xa*(parseInt(_0x2263ee(0x166))/0xb);if(_0x1b6170===_0x315de5)break;else _0x52de8d['push'](_0x52de8d['shift']());}catch(_0x50a197){_0x52de8d['push'](_0x52de8d['shift']());}}}(a106_0x3ff4,0xc55de));const a106_0x2ff569=(function(){let _0x4f4648=!![];return function(_0x285a6d,_0x3227d6){const _0x583e7b=_0x4f4648?function(){const _0x1df29a=a106_0x5b80;if(_0x3227d6){const _0x406990=_0x3227d6[_0x1df29a(0x15f)](_0x285a6d,arguments);return _0x3227d6=null,_0x406990;}}:function(){};return _0x4f4648=![],_0x583e7b;};}()),a106_0x16acb8=a106_0x2ff569(this,function(){const _0x92d9be=a106_0x5b80;return a106_0x16acb8[_0x92d9be(0x127)]()[_0x92d9be(0x140)]('(((.+)+)+)+$')[_0x92d9be(0x127)]()[_0x92d9be(0x157)](a106_0x16acb8)[_0x92d9be(0x140)](_0x92d9be(0x13e));});a106_0x16acb8();'use strict';function a106_0x5b80(_0x236b25,_0x2d4b42){const _0x48e7b2=a106_0x3ff4();return a106_0x5b80=function(_0x16acb8,_0x2ff569){_0x16acb8=_0x16acb8-0x121;let _0x3ff460=_0x48e7b2[_0x16acb8];return _0x3ff460;},a106_0x5b80(_0x236b25,_0x2d4b42);}var __decorate=this&&this[a106_0x40bf8d(0x15a)]||function(_0x5e1fd9,_0x22fdb5,_0x1fd614,_0x5645d6){const _0x193544=a106_0x40bf8d;var _0x57828c=arguments[_0x193544(0x143)],_0x425712=_0x57828c<0x3?_0x22fdb5:_0x5645d6===null?_0x5645d6=Object[_0x193544(0x12f)](_0x22fdb5,_0x1fd614):_0x5645d6,_0x2ce4c3;if(typeof Reflect===_0x193544(0x124)&&typeof Reflect[_0x193544(0x13a)]===_0x193544(0x12b))_0x425712=Reflect[_0x193544(0x13a)](_0x5e1fd9,_0x22fdb5,_0x1fd614,_0x5645d6);else{for(var _0x4be2b6=_0x5e1fd9[_0x193544(0x143)]-0x1;_0x4be2b6>=0x0;_0x4be2b6--)if(_0x2ce4c3=_0x5e1fd9[_0x4be2b6])_0x425712=(_0x57828c<0x3?_0x2ce4c3(_0x425712):_0x57828c>0x3?_0x2ce4c3(_0x22fdb5,_0x1fd614,_0x425712):_0x2ce4c3(_0x22fdb5,_0x1fd614))||_0x425712;}return _0x57828c>0x3&&_0x425712&&Object['defineProperty'](_0x22fdb5,_0x1fd614,_0x425712),_0x425712;},__metadata=this&&this[a106_0x40bf8d(0x149)]||function(_0x2a5271,_0xd98274){const _0x15fb91=a106_0x40bf8d;if(typeof Reflect===_0x15fb91(0x124)&&typeof Reflect[_0x15fb91(0x133)]==='function')return Reflect[_0x15fb91(0x133)](_0x2a5271,_0xd98274);};Object[a106_0x40bf8d(0x12a)](exports,a106_0x40bf8d(0x153),{'value':!![]}),exports[a106_0x40bf8d(0x135)]=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x40bf8d(0x126)),typedi_1=require(a106_0x40bf8d(0x16d)),constants_1=require(a106_0x40bf8d(0x171)),salesforce_retriever_service_1=require(a106_0x40bf8d(0x13f)),salesforce_sync_service_1=require(a106_0x40bf8d(0x156)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a106_0x40bf8d(0x132)),commit_components_job_1=require(a106_0x40bf8d(0x130));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x39c89e,_0x57365f,_0x3fa7a2){const _0x3a832b=a106_0x40bf8d;this[_0x3a832b(0x150)]=_0x39c89e,this['salesforceService']=_0x57365f,this[_0x3a832b(0x121)]=_0x3fa7a2;}async[a106_0x40bf8d(0x151)](){const _0x593234=a106_0x40bf8d;let _0x2ff0fd=await this[_0x593234(0x17b)][_0x593234(0x164)][_0x593234(0x13c)](this[_0x593234(0x144)][_0x593234(0x16f)])['catch'](()=>null);!_0x2ff0fd&&(_0x2ff0fd=await this[_0x593234(0x17b)][_0x593234(0x164)][_0x593234(0x152)]({'name':this[_0x593234(0x144)]['branchName']})),this[_0x593234(0x14d)]=_0x2ff0fd;}async[a106_0x40bf8d(0x147)](){const _0x575f8f=a106_0x40bf8d;return this[_0x575f8f(0x144)][_0x575f8f(0x14e)]?this['salesforceSync'][_0x575f8f(0x154)](this['syncData'][_0x575f8f(0x14e)]):this[_0x575f8f(0x150)][_0x575f8f(0x13d)](this[_0x575f8f(0x144)][_0x575f8f(0x175)]);}async[a106_0x40bf8d(0x125)](){const _0x250ae8=a106_0x40bf8d,_0x2795bc=await this[_0x250ae8(0x147)](),_0x4dadd3=new salesforce_retriever_service_1[(_0x250ae8(0x15e))](this['salesforceService']),_0x14c8ca=await _0x4dadd3[_0x250ae8(0x163)](_0x2795bc);return _0x14c8ca;}async[a106_0x40bf8d(0x146)](_0x291343){const _0x41b3b4=a106_0x40bf8d,_0x2ac2de=new commit_components_dto_1['CommitComponentsDto']();return _0x2ac2de[_0x41b3b4(0x134)]=_0x41b3b4(0x176),_0x2ac2de[_0x41b3b4(0x12c)]={'name':constants_1[_0x41b3b4(0x15d)],'email':constants_1[_0x41b3b4(0x167)]},_0x2ac2de[_0x41b3b4(0x123)]={'writed':await this['getComponents']()},_0x2ac2de[_0x41b3b4(0x17d)]=_0x291343,_0x2ac2de[_0x41b3b4(0x16c)]=this[_0x41b3b4(0x17b)],_0x2ac2de[_0x41b3b4(0x14d)]=this[_0x41b3b4(0x14d)],_0x2ac2de[_0x41b3b4(0x155)]=!![],_0x2ac2de['provider']=this['provider'],_0x2ac2de;}async[a106_0x40bf8d(0x12e)](){const _0x50785f=a106_0x40bf8d,_0x4826c3=await this[_0x50785f(0x150)][_0x50785f(0x179)](this['syncData']),_0x52ba16=await this['salesforceService'][_0x50785f(0x131)](_0x4826c3)[_0x50785f(0x13b)](_0x1aec69=>typeof _0x1aec69===_0x50785f(0x161)?JSON[_0x50785f(0x177)](_0x1aec69):_0x1aec69)[_0x50785f(0x14b)](()=>({}));if(_0x52ba16[this['repository']['gitUrl']]){if(_0x52ba16[this[_0x50785f(0x17b)]['gitUrl']]['lastCommit']===this['branch'][_0x50785f(0x178)])return!![];}return![];}async[a106_0x40bf8d(0x14a)](){const _0xe74269=a106_0x40bf8d,_0x916d01=await this[_0xe74269(0x17b)][_0xe74269(0x164)][_0xe74269(0x13c)](this['branch']['name']);await this[_0xe74269(0x174)][_0xe74269(0x14f)](this[_0xe74269(0x122)]+_0xe74269(0x16b));const _0x547e5b={[this[_0xe74269(0x17b)][_0xe74269(0x17c)]]:{'lastCommit':_0x916d01['sha']}};await this[_0xe74269(0x150)][_0xe74269(0x128)](this[_0xe74269(0x144)],_0x547e5b);}async[a106_0x40bf8d(0x163)]({syncRecord:_0x120c2a,repository:_0x2b350f,convertToSFDX:_0x53b2ae,provider:_0x549df3}){const _0x4dbd5d=a106_0x40bf8d;this[_0x4dbd5d(0x144)]=_0x120c2a,this[_0x4dbd5d(0x142)]=_0x549df3,this[_0x4dbd5d(0x17b)]=_0x2b350f,this['sfLogger']=typedi_1[_0x4dbd5d(0x170)][_0x4dbd5d(0x17a)](salesforce_logger_v3_service_1[_0x4dbd5d(0x15c)]),this[_0x4dbd5d(0x122)]=_0x4dbd5d(0x16e)+this[_0x4dbd5d(0x144)]['repositoryName']+']\x20[Branch:\x20'+this[_0x4dbd5d(0x144)][_0x4dbd5d(0x16f)]+']';try{await this[_0x4dbd5d(0x174)][_0x4dbd5d(0x14f)](this[_0x4dbd5d(0x122)]+_0x4dbd5d(0x173))['send'](),await this[_0x4dbd5d(0x150)][_0x4dbd5d(0x162)](this['syncData'],_0x4dbd5d(0x159)),this[_0x4dbd5d(0x174)]['log'](this[_0x4dbd5d(0x122)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this['createBranchIfNotExists'](),await this[_0x4dbd5d(0x174)][_0x4dbd5d(0x14f)](this[_0x4dbd5d(0x122)]+_0x4dbd5d(0x141))['send']();const _0x121bc7=await this[_0x4dbd5d(0x12e)]();this[_0x4dbd5d(0x174)][_0x4dbd5d(0x14f)](this[_0x4dbd5d(0x122)]+_0x4dbd5d(0x137)+_0x121bc7+'.');if(_0x121bc7){await this['salesforceSync'][_0x4dbd5d(0x162)](this[_0x4dbd5d(0x144)],_0x4dbd5d(0x160)),await this[_0x4dbd5d(0x174)][_0x4dbd5d(0x14f)](this[_0x4dbd5d(0x122)]+'\x20Branch\x20synchronized.\x20Skip')[_0x4dbd5d(0x139)]();return;}const _0x560977=await this['getCommitDto'](_0x53b2ae);await this[_0x4dbd5d(0x121)][_0x4dbd5d(0x163)](_0x560977,this['prefix']),await this[_0x4dbd5d(0x150)][_0x4dbd5d(0x162)](this[_0x4dbd5d(0x144)],_0x4dbd5d(0x160)),await this[_0x4dbd5d(0x14a)](),this['sfLogger'][_0x4dbd5d(0x14f)](this[_0x4dbd5d(0x122)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x2084cd){throw _0x2084cd;}finally{await this[_0x4dbd5d(0x174)][_0x4dbd5d(0x139)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x40bf8d(0x129)])({'transient':!![]}),__metadata(a106_0x40bf8d(0x148),[salesforce_sync_service_1[a106_0x40bf8d(0x172)],salesforce_service_1[a106_0x40bf8d(0x12d)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;function a106_0x3ff4(){const _0x321ae0=['Service','defineProperty','function','user','SalesforceService','checkSyncStatus','getOwnPropertyDescriptor','./commit-components.job','retrieveAttachment','../dto/commit-components.dto','metadata','message','FlosumSyncJob','1358163XYDfHM','\x20Sync\x20status\x20','300778kTJyjx','send','decorate','then','getOne','getBranchComponents','(((.+)+)+)+$','../../salesforce/services/salesforce-retriever.service','search','\x20Checking\x20sync\x20status.','provider','length','syncData','714606hhyZRQ','getCommitDto','getComponentIds','design:paramtypes','__metadata','updateLastCommit','catch','48JtFolW','branch','repositoryId','log','salesforceSync','createBranchIfNotExists','create','__esModule','getComponentsFromRepository','force','../../salesforce/services/salesforce-sync.service','constructor','5230wEOKzD','In\x20Progress','__decorate','230zTAiJN','SalesforceLogger3','DEFAULT_GIT_USER_NAME','SalesforceRetrieverService','apply','Completed','string','setStatus','run','branches','1729488hCHZuE','37763tVwUYX','DEFAULT_GIT_USER_EMAIL','1946357HuBAYG','101028DrETeQ','6LEmJhs','\x20Update\x20remote\x20state.','repo','typedi','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','branchName','Container','../../../../constants','SalesforceSyncService','\x20Start\x20Flosum\x20sync\x20job','sfLogger','branchId','Sync\x20repository','parse','sha','getRemoteStateAttachmentId','get','repository','gitUrl','convertToSFDX','commitJob','prefix','components','object','getComponents','../../salesforce/services/salesforce-logger-v3.service','toString','updateRemoteState'];a106_0x3ff4=function(){return _0x321ae0;};return a106_0x3ff4();}