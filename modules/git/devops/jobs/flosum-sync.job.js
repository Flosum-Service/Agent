const a75_0x29600a=a75_0x3d1c;(function(_0x3380d1,_0x233dde){const _0x4a20fb=a75_0x3d1c,_0x1f40a0=_0x3380d1();while(!![]){try{const _0xec4af4=-parseInt(_0x4a20fb(0xcc))/0x1+parseInt(_0x4a20fb(0xf0))/0x2+parseInt(_0x4a20fb(0xd1))/0x3*(parseInt(_0x4a20fb(0xd9))/0x4)+parseInt(_0x4a20fb(0xcd))/0x5*(-parseInt(_0x4a20fb(0xb4))/0x6)+-parseInt(_0x4a20fb(0xb3))/0x7*(-parseInt(_0x4a20fb(0xcf))/0x8)+parseInt(_0x4a20fb(0xc9))/0x9+parseInt(_0x4a20fb(0xb6))/0xa*(-parseInt(_0x4a20fb(0xb8))/0xb);if(_0xec4af4===_0x233dde)break;else _0x1f40a0['push'](_0x1f40a0['shift']());}catch(_0x3c079e){_0x1f40a0['push'](_0x1f40a0['shift']());}}}(a75_0x14d8,0xdd233));const a75_0x4ae88f=(function(){let _0xd3af02=!![];return function(_0x26e4a9,_0x5b94d3){const _0x2741cb=_0xd3af02?function(){if(_0x5b94d3){const _0xd86e74=_0x5b94d3['apply'](_0x26e4a9,arguments);return _0x5b94d3=null,_0xd86e74;}}:function(){};return _0xd3af02=![],_0x2741cb;};}()),a75_0x54e653=a75_0x4ae88f(this,function(){const _0xd5a7e=a75_0x3d1c;return a75_0x54e653[_0xd5a7e(0xc5)]()['search'](_0xd5a7e(0xe3))[_0xd5a7e(0xc5)]()['constructor'](a75_0x54e653)[_0xd5a7e(0xf5)](_0xd5a7e(0xe3));});a75_0x54e653();'use strict';function a75_0x3d1c(_0x54ff94,_0x5e5101){const _0x106df3=a75_0x14d8();return a75_0x3d1c=function(_0x54e653,_0x4ae88f){_0x54e653=_0x54e653-0xb0;let _0x14d808=_0x106df3[_0x54e653];return _0x14d808;},a75_0x3d1c(_0x54ff94,_0x5e5101);}var __decorate=this&&this[a75_0x29600a(0xbf)]||function(_0x5236fb,_0x197230,_0x25a43f,_0xb8b0e){const _0x91c764=a75_0x29600a;var _0x3fe52b=arguments[_0x91c764(0xf8)],_0x20e638=_0x3fe52b<0x3?_0x197230:_0xb8b0e===null?_0xb8b0e=Object[_0x91c764(0xc2)](_0x197230,_0x25a43f):_0xb8b0e,_0x161dab;if(typeof Reflect===_0x91c764(0xe7)&&typeof Reflect['decorate']==='function')_0x20e638=Reflect['decorate'](_0x5236fb,_0x197230,_0x25a43f,_0xb8b0e);else{for(var _0x15c64f=_0x5236fb[_0x91c764(0xf8)]-0x1;_0x15c64f>=0x0;_0x15c64f--)if(_0x161dab=_0x5236fb[_0x15c64f])_0x20e638=(_0x3fe52b<0x3?_0x161dab(_0x20e638):_0x3fe52b>0x3?_0x161dab(_0x197230,_0x25a43f,_0x20e638):_0x161dab(_0x197230,_0x25a43f))||_0x20e638;}return _0x3fe52b>0x3&&_0x20e638&&Object[_0x91c764(0xc4)](_0x197230,_0x25a43f,_0x20e638),_0x20e638;},__metadata=this&&this[a75_0x29600a(0xdc)]||function(_0x893bc,_0x5b35d9){const _0x58bab4=a75_0x29600a;if(typeof Reflect===_0x58bab4(0xe7)&&typeof Reflect['metadata']===_0x58bab4(0xd3))return Reflect['metadata'](_0x893bc,_0x5b35d9);};Object[a75_0x29600a(0xc4)](exports,a75_0x29600a(0xd6),{'value':!![]}),exports[a75_0x29600a(0xd8)]=void 0x0;const salesforce_logger_v3_service_1=require(a75_0x29600a(0xeb)),typedi_1=require('typedi'),constants_1=require(a75_0x29600a(0xef)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a75_0x29600a(0xe2)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a75_0x29600a(0xf1)),commit_components_job_1=require(a75_0x29600a(0xb1));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x66699a,_0x532076,_0x54314c){const _0x1ef576=a75_0x29600a;this[_0x1ef576(0xce)]=_0x66699a,this[_0x1ef576(0xe9)]=_0x532076,this['commitJob']=_0x54314c;}async['createBranchIfNotExists'](){const _0x3b3190=a75_0x29600a;let _0x551dc7=await this[_0x3b3190(0xc3)][_0x3b3190(0xd2)][_0x3b3190(0xb5)](this['syncData'][_0x3b3190(0xe6)])[_0x3b3190(0xed)](()=>null);!_0x551dc7&&(_0x551dc7=await this[_0x3b3190(0xc3)][_0x3b3190(0xd2)][_0x3b3190(0xc0)]({'name':this['syncData'][_0x3b3190(0xe6)]})),this[_0x3b3190(0xd7)]=_0x551dc7;}async['getComponentIds'](){const _0x32fc18=a75_0x29600a;return this[_0x32fc18(0xfa)][_0x32fc18(0xe5)]?this[_0x32fc18(0xce)][_0x32fc18(0xd4)](this[_0x32fc18(0xfa)][_0x32fc18(0xe5)]):this[_0x32fc18(0xce)][_0x32fc18(0xdb)](this['syncData'][_0x32fc18(0xde)]);}async[a75_0x29600a(0xfe)](){const _0x1d01be=a75_0x29600a,_0x7e34bf=await this[_0x1d01be(0xe8)](),_0x1049fe=new salesforce_retriever_service_1[(_0x1d01be(0xb7))](this['salesforceService']),_0x5ceeb3=await _0x1049fe[_0x1d01be(0xb9)](_0x7e34bf);return _0x5ceeb3;}async['getCommitDto'](_0x1f425b){const _0x51914c=a75_0x29600a,_0x31b5aa=new commit_components_dto_1['CommitComponentsDto']();return _0x31b5aa['message']=_0x51914c(0xc6),_0x31b5aa['user']={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x51914c(0xf2)]},_0x31b5aa['components']={'writed':await this[_0x51914c(0xfe)]()},_0x31b5aa['convertToSFDX']=_0x1f425b,_0x31b5aa['repo']=this[_0x51914c(0xc3)],_0x31b5aa[_0x51914c(0xd7)]=this[_0x51914c(0xd7)],_0x31b5aa[_0x51914c(0xf7)]=!![],_0x31b5aa[_0x51914c(0xbc)]=this[_0x51914c(0xbc)],_0x31b5aa;}async['checkSyncStatus'](){const _0x62a6db=a75_0x29600a,_0x5ae924=await this['salesforceSync'][_0x62a6db(0xb0)](this['syncData']),_0x53fbbb=await this['salesforceService'][_0x62a6db(0xe0)](_0x5ae924)['then'](_0xc90d5e=>typeof _0xc90d5e===_0x62a6db(0xfd)?JSON[_0x62a6db(0xca)](_0xc90d5e):_0xc90d5e)[_0x62a6db(0xed)](()=>({}));if(_0x53fbbb[this[_0x62a6db(0xc3)][_0x62a6db(0xf6)]]){if(_0x53fbbb[this['repository']['gitUrl']][_0x62a6db(0xee)]===this[_0x62a6db(0xd7)][_0x62a6db(0xcb)])return!![];}return![];}async[a75_0x29600a(0xe4)](){const _0x51970d=a75_0x29600a,_0x2d3517=await this['repository'][_0x51970d(0xd2)][_0x51970d(0xb5)](this[_0x51970d(0xd7)][_0x51970d(0xdf)]);await this[_0x51970d(0xc1)][_0x51970d(0xba)](this[_0x51970d(0xfb)]+_0x51970d(0xec));const _0x1818b8={[this[_0x51970d(0xc3)]['gitUrl']]:{'lastCommit':_0x2d3517[_0x51970d(0xcb)]}};await this[_0x51970d(0xce)]['updateRemoteState'](this['syncData'],_0x1818b8);}async[a75_0x29600a(0xb9)]({syncRecord:_0x16458a,repository:_0x330e24,convertToSFDX:_0x514f51,provider:_0x7a4569}){const _0x32a689=a75_0x29600a;this['syncData']=_0x16458a,this[_0x32a689(0xbc)]=_0x7a4569,this[_0x32a689(0xc3)]=_0x330e24,this[_0x32a689(0xc1)]=typedi_1[_0x32a689(0xbd)][_0x32a689(0xc7)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x32a689(0xfb)]=_0x32a689(0xb2)+this['syncData']['repositoryName']+']\x20[Branch:\x20'+this['syncData']['branchName']+']';try{await this[_0x32a689(0xc1)][_0x32a689(0xba)](this[_0x32a689(0xfb)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x32a689(0xf9)](),await this[_0x32a689(0xce)][_0x32a689(0xd5)](this[_0x32a689(0xfa)],'In\x20Progress'),this[_0x32a689(0xc1)][_0x32a689(0xba)](this[_0x32a689(0xfb)]+_0x32a689(0xf3)),await this[_0x32a689(0xe1)](),await this[_0x32a689(0xc1)][_0x32a689(0xba)](this[_0x32a689(0xfb)]+'\x20Checking\x20sync\x20status.')[_0x32a689(0xf9)]();const _0xb39668=await this[_0x32a689(0xea)]();this[_0x32a689(0xc1)]['log'](this[_0x32a689(0xfb)]+_0x32a689(0xdd)+_0xb39668+'.');if(_0xb39668){await this['salesforceSync'][_0x32a689(0xd5)](this[_0x32a689(0xfa)],_0x32a689(0xda)),await this['sfLogger']['log'](this[_0x32a689(0xfb)]+_0x32a689(0xd0))[_0x32a689(0xf9)]();return;}const _0x54adaa=await this[_0x32a689(0xbe)](_0x514f51);await this[_0x32a689(0xc8)][_0x32a689(0xb9)](_0x54adaa,this[_0x32a689(0xfb)]),await this[_0x32a689(0xce)][_0x32a689(0xd5)](this[_0x32a689(0xfa)],_0x32a689(0xda)),await this[_0x32a689(0xe4)](),this[_0x32a689(0xc1)][_0x32a689(0xba)](this['prefix']+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x567288){throw _0x567288;}finally{await this[_0x32a689(0xc1)][_0x32a689(0xf9)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a75_0x29600a(0xfc)])({'transient':!![]}),__metadata(a75_0x29600a(0xf4),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a75_0x29600a(0xbb)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;function a75_0x14d8(){const _0xacb21d=['defineProperty','toString','Sync\x20repository','get','commitJob','13877046mtlvQq','parse','sha','1453171gZjEca','117965mDOfkm','salesforceSync','9798064ZLntls','\x20Branch\x20synchronized.\x20Skip','17166FRBnpU','branches','function','getComponentsFromRepository','setStatus','__esModule','branch','FlosumSyncJob','532JJyRaz','Completed','getBranchComponents','__metadata','\x20Sync\x20status\x20','branchId','name','retrieveAttachment','createBranchIfNotExists','../../salesforce/services/salesforce-sync.service','(((.+)+)+)+$','updateLastCommit','repositoryId','branchName','object','getComponentIds','salesforceService','checkSyncStatus','../../salesforce/services/salesforce-logger-v3.service','\x20Update\x20remote\x20state.','catch','lastCommit','../../../../constants','342918RhvIgF','../dto/commit-components.dto','DEFAULT_GIT_USER_EMAIL','\x20Checking\x20repository\x20on\x20Flosum\x20side.','design:paramtypes','search','gitUrl','force','length','send','syncData','prefix','Service','string','getComponents','getRemoteStateAttachmentId','./commit-components.job','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','7sfWxOw','60GXTeBc','getOne','10OxuZYO','SalesforceRetrieverService','12146827hOIPqU','run','log','SalesforceService','provider','Container','getCommitDto','__decorate','create','sfLogger','getOwnPropertyDescriptor','repository'];a75_0x14d8=function(){return _0xacb21d;};return a75_0x14d8();}