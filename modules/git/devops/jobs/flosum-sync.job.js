const a126_0x48f0df=a126_0x5ea7;function a126_0x5b16(){const _0x2114b8=['[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','user','string','\x20Flosum\x20sync\x20job\x20done.','getRemoteStateAttachmentId','SalesforceLogger3','branchId','length','./commit-components.job','../../../../constants','\x20Branch\x20synchronized.\x20Skip','In\x20Progress','design:paramtypes','object','153832VNJBjY',']\x20[Branch:\x20','name','getCommitDto','log','salesforceService','userName','(((.+)+)+)+$','2424468FgtSJe','salesforceSync','288846gNfbiu','11Izvcpa','__esModule','getBranchComponents','repositoryName','constructor','getOne','CommitComponentsJob','__metadata','../../salesforce/services/salesforce-sync.service','getComponentIds','branchName','676570CHCjwF','decorate','catch','1slVrbk','parse','SalesforceRetrieverService','Service','message','__decorate','CommitComponentsDto','branch','prefix','26768SArJaX','setStatus','syncData','repo','20zXBLUC','run','gitUrl','toString','create','Sync\x20repository','function','repositoryId','DEFAULT_GIT_USER_EMAIL','1766246kDXUst','\x20Checking\x20sync\x20status.','sfLogger','../dto/commit-components.dto','getOwnPropertyDescriptor','sha','lastCommit','\x20Sync\x20status\x20','apply','commitJob','checkSyncStatus','metadata','Completed','9oITCMz','branches','send','45OGazAJ','../../salesforce/services/salesforce.service','../../salesforce/services/salesforce-logger-v3.service','FlosumSyncJob','createBranchIfNotExists','search','updateRemoteState','../../salesforce/services/salesforce-retriever.service','repository','recordTypeName','userEmail','getComponentsFromRepository','getComponents','80103GzYbRs','provider','convertToSFDX','defineProperty'];a126_0x5b16=function(){return _0x2114b8;};return a126_0x5b16();}(function(_0x4ff99b,_0xb4404c){const _0x3eb989=a126_0x5ea7,_0x4beedd=_0x4ff99b();while(!![]){try{const _0x24bc47=parseInt(_0x3eb989(0x189))/0x1*(parseInt(_0x3eb989(0x19f))/0x2)+-parseInt(_0x3eb989(0x1bc))/0x3*(parseInt(_0x3eb989(0x196))/0x4)+parseInt(_0x3eb989(0x1af))/0x5*(-parseInt(_0x3eb989(0x1d8))/0x6)+-parseInt(_0x3eb989(0x1ce))/0x7+parseInt(_0x3eb989(0x192))/0x8+-parseInt(_0x3eb989(0x1ac))/0x9*(-parseInt(_0x3eb989(0x186))/0xa)+-parseInt(_0x3eb989(0x1d9))/0xb*(-parseInt(_0x3eb989(0x1d6))/0xc);if(_0x24bc47===_0xb4404c)break;else _0x4beedd['push'](_0x4beedd['shift']());}catch(_0x3e91fe){_0x4beedd['push'](_0x4beedd['shift']());}}}(a126_0x5b16,0x8a877));const a126_0x2e2122=(function(){let _0x3d46dd=!![];return function(_0x2f7f55,_0x2c22e4){const _0x5cf29c=_0x3d46dd?function(){const _0x48d5d1=a126_0x5ea7;if(_0x2c22e4){const _0xccea8a=_0x2c22e4[_0x48d5d1(0x1a7)](_0x2f7f55,arguments);return _0x2c22e4=null,_0xccea8a;}}:function(){};return _0x3d46dd=![],_0x5cf29c;};}()),a126_0x1c0ea0=a126_0x2e2122(this,function(){const _0x214ff1=a126_0x5ea7;return a126_0x1c0ea0[_0x214ff1(0x199)]()[_0x214ff1(0x1b4)](_0x214ff1(0x1d5))[_0x214ff1(0x199)]()[_0x214ff1(0x1dd)](a126_0x1c0ea0)[_0x214ff1(0x1b4)]('(((.+)+)+)+$');});a126_0x1c0ea0();'use strict';var __decorate=this&&this[a126_0x48f0df(0x18e)]||function(_0x4831bd,_0x100ebc,_0x1d23f5,_0x313b83){const _0x5f394c=a126_0x48f0df;var _0x2b79ac=arguments['length'],_0x4806ea=_0x2b79ac<0x3?_0x100ebc:_0x313b83===null?_0x313b83=Object[_0x5f394c(0x1a3)](_0x100ebc,_0x1d23f5):_0x313b83,_0x538e51;if(typeof Reflect===_0x5f394c(0x1cd)&&typeof Reflect[_0x5f394c(0x187)]===_0x5f394c(0x19c))_0x4806ea=Reflect[_0x5f394c(0x187)](_0x4831bd,_0x100ebc,_0x1d23f5,_0x313b83);else{for(var _0x56a94d=_0x4831bd[_0x5f394c(0x1c7)]-0x1;_0x56a94d>=0x0;_0x56a94d--)if(_0x538e51=_0x4831bd[_0x56a94d])_0x4806ea=(_0x2b79ac<0x3?_0x538e51(_0x4806ea):_0x2b79ac>0x3?_0x538e51(_0x100ebc,_0x1d23f5,_0x4806ea):_0x538e51(_0x100ebc,_0x1d23f5))||_0x4806ea;}return _0x2b79ac>0x3&&_0x4806ea&&Object[_0x5f394c(0x1bf)](_0x100ebc,_0x1d23f5,_0x4806ea),_0x4806ea;},__metadata=this&&this[a126_0x48f0df(0x1e0)]||function(_0x2b5683,_0x1c8713){const _0x55df39=a126_0x48f0df;if(typeof Reflect===_0x55df39(0x1cd)&&typeof Reflect['metadata']===_0x55df39(0x19c))return Reflect[_0x55df39(0x1aa)](_0x2b5683,_0x1c8713);};function a126_0x5ea7(_0x13cbab,_0x37f063){const _0x1479ce=a126_0x5b16();return a126_0x5ea7=function(_0x1c0ea0,_0x2e2122){_0x1c0ea0=_0x1c0ea0-0x183;let _0x5b16ab=_0x1479ce[_0x1c0ea0];return _0x5b16ab;},a126_0x5ea7(_0x13cbab,_0x37f063);}Object['defineProperty'](exports,a126_0x48f0df(0x1da),{'value':!![]}),exports[a126_0x48f0df(0x1b2)]=void 0x0;const salesforce_logger_v3_service_1=require(a126_0x48f0df(0x1b1)),typedi_1=require('typedi'),constants_1=require(a126_0x48f0df(0x1c9)),salesforce_retriever_service_1=require(a126_0x48f0df(0x1b6)),salesforce_sync_service_1=require(a126_0x48f0df(0x183)),salesforce_service_1=require(a126_0x48f0df(0x1b0)),commit_components_dto_1=require(a126_0x48f0df(0x1a2)),commit_components_job_1=require(a126_0x48f0df(0x1c8));let FlosumSyncJob=class FlosumSyncJob{constructor(_0xc297c7,_0x5f46f6,_0xd8d9ef){const _0x2f4994=a126_0x48f0df;this[_0x2f4994(0x1d7)]=_0xc297c7,this['salesforceService']=_0x5f46f6,this[_0x2f4994(0x1a8)]=_0xd8d9ef;}async[a126_0x48f0df(0x1b3)](){const _0xb842e4=a126_0x48f0df;let _0x1f32c0=await this[_0xb842e4(0x1b7)][_0xb842e4(0x1ad)][_0xb842e4(0x1de)](this[_0xb842e4(0x194)]['branchName'])['catch'](()=>null);!_0x1f32c0&&(_0x1f32c0=await this[_0xb842e4(0x1b7)][_0xb842e4(0x1ad)][_0xb842e4(0x19a)]({'name':this[_0xb842e4(0x194)][_0xb842e4(0x185)],'user':{'name':this[_0xb842e4(0x194)][_0xb842e4(0x1d4)],'email':this[_0xb842e4(0x194)][_0xb842e4(0x1b9)]}})),this[_0xb842e4(0x190)]=_0x1f32c0;}async['getComponentIds'](){const _0x2d04a9=a126_0x48f0df;return this[_0x2d04a9(0x194)][_0x2d04a9(0x19d)]?this[_0x2d04a9(0x1d7)][_0x2d04a9(0x1ba)](this['syncData'][_0x2d04a9(0x19d)]):this['salesforceSync'][_0x2d04a9(0x1db)](this['syncData'][_0x2d04a9(0x1c6)]);}async[a126_0x48f0df(0x1bb)](){const _0x1c505b=a126_0x48f0df,_0x3a522c=await this[_0x1c505b(0x184)](),_0x51d309=new salesforce_retriever_service_1[(_0x1c505b(0x18b))](this[_0x1c505b(0x1d3)]),_0xa83cb7=await _0x51d309[_0x1c505b(0x197)](_0x3a522c);return _0xa83cb7;}async[a126_0x48f0df(0x1d1)](_0x9c329a){const _0x292924=a126_0x48f0df,_0x5561aa=new commit_components_dto_1[(_0x292924(0x18f))]();return _0x5561aa[_0x292924(0x18d)]=_0x292924(0x19b),_0x5561aa[_0x292924(0x1c1)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x292924(0x19e)]},_0x5561aa['components']={'writed':await this[_0x292924(0x1bb)]()},_0x5561aa[_0x292924(0x1be)]=_0x9c329a,_0x5561aa[_0x292924(0x195)]=this[_0x292924(0x1b7)],_0x5561aa[_0x292924(0x190)]=this[_0x292924(0x190)],_0x5561aa['force']=!![],_0x5561aa['provider']=this[_0x292924(0x1bd)],_0x5561aa['recordType']=this['syncData'][_0x292924(0x1b8)],_0x5561aa;}async['checkSyncStatus'](){const _0x28a395=a126_0x48f0df,_0x47fe60=await this['salesforceSync'][_0x28a395(0x1c4)](this[_0x28a395(0x194)]),_0x41e87b=await this[_0x28a395(0x1d3)]['retrieveAttachment'](_0x47fe60)['then'](_0x174926=>typeof _0x174926===_0x28a395(0x1c2)?JSON[_0x28a395(0x18a)](_0x174926):_0x174926)[_0x28a395(0x188)](()=>({}));if(_0x41e87b[this['repository'][_0x28a395(0x198)]]){if(_0x41e87b[this[_0x28a395(0x1b7)][_0x28a395(0x198)]][_0x28a395(0x1a5)]===this['branch'][_0x28a395(0x1a4)])return!![];}return![];}async['updateLastCommit'](){const _0xae4f97=a126_0x48f0df,_0x42de67=await this[_0xae4f97(0x1b7)][_0xae4f97(0x1ad)][_0xae4f97(0x1de)](this[_0xae4f97(0x190)][_0xae4f97(0x1d0)]);await this['sfLogger'][_0xae4f97(0x1d2)](this[_0xae4f97(0x191)]+'\x20Update\x20remote\x20state.');const _0x460f84={[this[_0xae4f97(0x1b7)]['gitUrl']]:{'lastCommit':_0x42de67[_0xae4f97(0x1a4)]}};await this[_0xae4f97(0x1d7)][_0xae4f97(0x1b5)](this[_0xae4f97(0x194)],_0x460f84);}async['run']({syncRecord:_0x39ad6d,repository:_0x463763,convertToSFDX:_0x4414e6,provider:_0x5b7550}){const _0x10e58d=a126_0x48f0df;this[_0x10e58d(0x194)]=_0x39ad6d,this[_0x10e58d(0x1bd)]=_0x5b7550,this[_0x10e58d(0x1b7)]=_0x463763,this[_0x10e58d(0x1a1)]=typedi_1['Container']['get'](salesforce_logger_v3_service_1[_0x10e58d(0x1c5)]),this[_0x10e58d(0x191)]=_0x10e58d(0x1c0)+this[_0x10e58d(0x194)][_0x10e58d(0x1dc)]+_0x10e58d(0x1cf)+this[_0x10e58d(0x194)][_0x10e58d(0x185)]+']';try{await this['sfLogger'][_0x10e58d(0x1d2)](this[_0x10e58d(0x191)]+'\x20Start\x20Flosum\x20sync\x20job')['send'](),await this[_0x10e58d(0x1d7)]['setStatus'](this['syncData'],_0x10e58d(0x1cb)),this[_0x10e58d(0x1a1)]['log'](this['prefix']+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x10e58d(0x1b3)](),await this[_0x10e58d(0x1a1)][_0x10e58d(0x1d2)](this[_0x10e58d(0x191)]+_0x10e58d(0x1a0))[_0x10e58d(0x1ae)]();const _0x72fc8d=await this[_0x10e58d(0x1a9)]();this[_0x10e58d(0x1a1)][_0x10e58d(0x1d2)](this[_0x10e58d(0x191)]+_0x10e58d(0x1a6)+_0x72fc8d+'.');if(_0x72fc8d){await this[_0x10e58d(0x1d7)]['setStatus'](this[_0x10e58d(0x194)],_0x10e58d(0x1ab)),await this[_0x10e58d(0x1a1)][_0x10e58d(0x1d2)](this[_0x10e58d(0x191)]+_0x10e58d(0x1ca))[_0x10e58d(0x1ae)]();return;}const _0xeabf14=await this[_0x10e58d(0x1d1)](_0x4414e6);await this[_0x10e58d(0x1a8)]['run'](_0xeabf14,this[_0x10e58d(0x191)]),await this[_0x10e58d(0x1d7)][_0x10e58d(0x193)](this[_0x10e58d(0x194)],_0x10e58d(0x1ab)),await this['updateLastCommit'](),this[_0x10e58d(0x1a1)][_0x10e58d(0x1d2)](this[_0x10e58d(0x191)]+_0x10e58d(0x1c3));}catch(_0x12b576){throw _0x12b576;}finally{await this[_0x10e58d(0x1a1)][_0x10e58d(0x1ae)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a126_0x48f0df(0x18c)])({'transient':!![]}),__metadata(a126_0x48f0df(0x1cc),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1['SalesforceService'],commit_components_job_1[a126_0x48f0df(0x1df)]])],FlosumSyncJob),exports[a126_0x48f0df(0x1b2)]=FlosumSyncJob;