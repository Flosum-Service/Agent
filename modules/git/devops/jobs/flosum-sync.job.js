const a106_0x8666b3=a106_0x278c;(function(_0x1d0b6b,_0xe78542){const _0x282542=a106_0x278c,_0x516361=_0x1d0b6b();while(!![]){try{const _0x2fa7a6=parseInt(_0x282542(0x106))/0x1+-parseInt(_0x282542(0xe9))/0x2+parseInt(_0x282542(0xb4))/0x3*(parseInt(_0x282542(0xf2))/0x4)+-parseInt(_0x282542(0xc7))/0x5*(parseInt(_0x282542(0xd8))/0x6)+parseInt(_0x282542(0xcb))/0x7*(parseInt(_0x282542(0xc4))/0x8)+parseInt(_0x282542(0x101))/0x9+-parseInt(_0x282542(0xd5))/0xa*(parseInt(_0x282542(0xf4))/0xb);if(_0x2fa7a6===_0xe78542)break;else _0x516361['push'](_0x516361['shift']());}catch(_0x5dcd38){_0x516361['push'](_0x516361['shift']());}}}(a106_0x1ae0,0xd71ce));function a106_0x278c(_0x2478ce,_0x461be1){const _0x9f289=a106_0x1ae0();return a106_0x278c=function(_0x245b6f,_0x701228){_0x245b6f=_0x245b6f-0xb3;let _0x1ae0d1=_0x9f289[_0x245b6f];return _0x1ae0d1;},a106_0x278c(_0x2478ce,_0x461be1);}const a106_0x701228=(function(){let _0x2951f3=!![];return function(_0x4dec5f,_0x193542){const _0x11ae15=_0x2951f3?function(){const _0x442414=a106_0x278c;if(_0x193542){const _0x2f3db4=_0x193542[_0x442414(0xee)](_0x4dec5f,arguments);return _0x193542=null,_0x2f3db4;}}:function(){};return _0x2951f3=![],_0x11ae15;};}()),a106_0x245b6f=a106_0x701228(this,function(){const _0x2bce72=a106_0x278c;return a106_0x245b6f['toString']()[_0x2bce72(0xf0)](_0x2bce72(0xf1))['toString']()['constructor'](a106_0x245b6f)[_0x2bce72(0xf0)]('(((.+)+)+)+$');});a106_0x245b6f();'use strict';function a106_0x1ae0(){const _0x314a68=['SalesforceService','\x20Sync\x20status\x20','branches','1507722riyuXi','\x20Start\x20Flosum\x20sync\x20job','prefix','./commit-components.job','updateLastCommit','695688qcopjk','message','getComponentsFromRepository','gitUrl','setStatus','lastCommit','branch','repository','getComponentIds','parse','getComponents','syncData','SalesforceSyncService','string','sha','metadata','312248uqYBBk','branchId','getOwnPropertyDescriptor','5gGpSgq','CommitComponentsDto','__esModule','repositoryId','266bAgiMa','sfLogger','\x20Checking\x20sync\x20status.','get','getRemoteStateAttachmentId','../../salesforce/services/salesforce-logger-v3.service','commitJob','getOne','repo','catch','963080wxfxot','checkSyncStatus','repositoryName','420252eRQpdw','user','SalesforceRetrieverService','function','getCommitDto','create','run','provider','defineProperty','CommitComponentsJob','\x20Checking\x20repository\x20on\x20Flosum\x20side.','design:paramtypes','\x20Update\x20remote\x20state.','DEFAULT_GIT_USER_EMAIL','__decorate','typedi','updateRemoteState','952660yFsNmc','../../salesforce/services/salesforce.service','createBranchIfNotExists','../../salesforce/services/salesforce-sync.service','../../salesforce/services/salesforce-retriever.service','apply','send','search','(((.+)+)+)+$','4tPpqeh','length','242xmgKwb','salesforceSync','name','branchName','\x20Flosum\x20sync\x20job\x20done.','salesforceService','DEFAULT_GIT_USER_NAME','object','then','log','decorate','In\x20Progress','../../../../constants','2911086BqFkee','Completed'];a106_0x1ae0=function(){return _0x314a68;};return a106_0x1ae0();}var __decorate=this&&this[a106_0x8666b3(0xe6)]||function(_0x4c5129,_0x2c97d9,_0x305bde,_0x2f4402){const _0x2fc306=a106_0x8666b3;var _0x401e2f=arguments['length'],_0x54fc5d=_0x401e2f<0x3?_0x2c97d9:_0x2f4402===null?_0x2f4402=Object[_0x2fc306(0xc6)](_0x2c97d9,_0x305bde):_0x2f4402,_0x2a263c;if(typeof Reflect===_0x2fc306(0xfb)&&typeof Reflect[_0x2fc306(0xfe)]==='function')_0x54fc5d=Reflect[_0x2fc306(0xfe)](_0x4c5129,_0x2c97d9,_0x305bde,_0x2f4402);else{for(var _0x6415d6=_0x4c5129[_0x2fc306(0xf3)]-0x1;_0x6415d6>=0x0;_0x6415d6--)if(_0x2a263c=_0x4c5129[_0x6415d6])_0x54fc5d=(_0x401e2f<0x3?_0x2a263c(_0x54fc5d):_0x401e2f>0x3?_0x2a263c(_0x2c97d9,_0x305bde,_0x54fc5d):_0x2a263c(_0x2c97d9,_0x305bde))||_0x54fc5d;}return _0x401e2f>0x3&&_0x54fc5d&&Object[_0x2fc306(0xe0)](_0x2c97d9,_0x305bde,_0x54fc5d),_0x54fc5d;},__metadata=this&&this['__metadata']||function(_0xc2e236,_0x2a7b73){const _0x5699a5=a106_0x8666b3;if(typeof Reflect===_0x5699a5(0xfb)&&typeof Reflect['metadata']===_0x5699a5(0xdb))return Reflect[_0x5699a5(0xc3)](_0xc2e236,_0x2a7b73);};Object[a106_0x8666b3(0xe0)](exports,a106_0x8666b3(0xc9),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require(a106_0x8666b3(0xd0)),typedi_1=require(a106_0x8666b3(0xe7)),constants_1=require(a106_0x8666b3(0x100)),salesforce_retriever_service_1=require(a106_0x8666b3(0xed)),salesforce_sync_service_1=require(a106_0x8666b3(0xec)),salesforce_service_1=require(a106_0x8666b3(0xea)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a106_0x8666b3(0x109));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x487c42,_0x2006de,_0x196557){const _0x39c7df=a106_0x8666b3;this[_0x39c7df(0xf5)]=_0x487c42,this[_0x39c7df(0xf9)]=_0x2006de,this[_0x39c7df(0xd1)]=_0x196557;}async[a106_0x8666b3(0xeb)](){const _0xa4ca0b=a106_0x8666b3;let _0x4c3498=await this['repository'][_0xa4ca0b(0x105)][_0xa4ca0b(0xd2)](this['syncData']['branchName'])['catch'](()=>null);!_0x4c3498&&(_0x4c3498=await this[_0xa4ca0b(0xbb)]['branches'][_0xa4ca0b(0xdd)]({'name':this['syncData']['branchName']})),this['branch']=_0x4c3498;}async[a106_0x8666b3(0xbc)](){const _0x23c9f8=a106_0x8666b3;return this['syncData'][_0x23c9f8(0xca)]?this[_0x23c9f8(0xf5)][_0x23c9f8(0xb6)](this[_0x23c9f8(0xbf)][_0x23c9f8(0xca)]):this[_0x23c9f8(0xf5)]['getBranchComponents'](this[_0x23c9f8(0xbf)][_0x23c9f8(0xc5)]);}async[a106_0x8666b3(0xbe)](){const _0x114d5c=a106_0x8666b3,_0x47f547=await this[_0x114d5c(0xbc)](),_0x56b86f=new salesforce_retriever_service_1[(_0x114d5c(0xda))](this['salesforceService']),_0x540524=await _0x56b86f[_0x114d5c(0xde)](_0x47f547);return _0x540524;}async[a106_0x8666b3(0xdc)](_0xaebfb2){const _0x15b234=a106_0x8666b3,_0x1c6fb4=new commit_components_dto_1[(_0x15b234(0xc8))]();return _0x1c6fb4[_0x15b234(0xb5)]='Sync\x20repository',_0x1c6fb4[_0x15b234(0xd9)]={'name':constants_1[_0x15b234(0xfa)],'email':constants_1[_0x15b234(0xe5)]},_0x1c6fb4['components']={'writed':await this[_0x15b234(0xbe)]()},_0x1c6fb4['convertToSFDX']=_0xaebfb2,_0x1c6fb4[_0x15b234(0xd3)]=this[_0x15b234(0xbb)],_0x1c6fb4[_0x15b234(0xba)]=this[_0x15b234(0xba)],_0x1c6fb4['force']=!![],_0x1c6fb4['provider']=this[_0x15b234(0xdf)],_0x1c6fb4;}async[a106_0x8666b3(0xd6)](){const _0x44d4fd=a106_0x8666b3,_0x23a5f3=await this['salesforceSync'][_0x44d4fd(0xcf)](this[_0x44d4fd(0xbf)]),_0x1d0ef5=await this['salesforceService']['retrieveAttachment'](_0x23a5f3)[_0x44d4fd(0xfc)](_0x25f1fb=>typeof _0x25f1fb===_0x44d4fd(0xc1)?JSON[_0x44d4fd(0xbd)](_0x25f1fb):_0x25f1fb)[_0x44d4fd(0xd4)](()=>({}));if(_0x1d0ef5[this[_0x44d4fd(0xbb)][_0x44d4fd(0xb7)]]){if(_0x1d0ef5[this[_0x44d4fd(0xbb)][_0x44d4fd(0xb7)]][_0x44d4fd(0xb9)]===this[_0x44d4fd(0xba)][_0x44d4fd(0xc2)])return!![];}return![];}async[a106_0x8666b3(0xb3)](){const _0xc4a4bd=a106_0x8666b3,_0x4a4694=await this[_0xc4a4bd(0xbb)]['branches']['getOne'](this[_0xc4a4bd(0xba)][_0xc4a4bd(0xf6)]);await this[_0xc4a4bd(0xcc)][_0xc4a4bd(0xfd)](this[_0xc4a4bd(0x108)]+_0xc4a4bd(0xe4));const _0xdce12f={[this['repository']['gitUrl']]:{'lastCommit':_0x4a4694[_0xc4a4bd(0xc2)]}};await this[_0xc4a4bd(0xf5)][_0xc4a4bd(0xe8)](this[_0xc4a4bd(0xbf)],_0xdce12f);}async['run']({syncRecord:_0x2f0042,repository:_0x5ea7b4,convertToSFDX:_0x1ad21e,provider:_0x350bcc}){const _0x3932eb=a106_0x8666b3;this[_0x3932eb(0xbf)]=_0x2f0042,this['provider']=_0x350bcc,this[_0x3932eb(0xbb)]=_0x5ea7b4,this['sfLogger']=typedi_1['Container'][_0x3932eb(0xce)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x3932eb(0x108)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x3932eb(0xbf)][_0x3932eb(0xd7)]+']\x20[Branch:\x20'+this[_0x3932eb(0xbf)][_0x3932eb(0xf7)]+']';try{await this[_0x3932eb(0xcc)]['log'](this[_0x3932eb(0x108)]+_0x3932eb(0x107))[_0x3932eb(0xef)](),await this[_0x3932eb(0xf5)][_0x3932eb(0xb8)](this[_0x3932eb(0xbf)],_0x3932eb(0xff)),this[_0x3932eb(0xcc)][_0x3932eb(0xfd)](this['prefix']+_0x3932eb(0xe2)),await this[_0x3932eb(0xeb)](),await this[_0x3932eb(0xcc)][_0x3932eb(0xfd)](this[_0x3932eb(0x108)]+_0x3932eb(0xcd))[_0x3932eb(0xef)]();const _0x4afd6b=await this[_0x3932eb(0xd6)]();this[_0x3932eb(0xcc)]['log'](this[_0x3932eb(0x108)]+_0x3932eb(0x104)+_0x4afd6b+'.');if(_0x4afd6b){await this[_0x3932eb(0xf5)][_0x3932eb(0xb8)](this[_0x3932eb(0xbf)],_0x3932eb(0x102)),await this[_0x3932eb(0xcc)]['log'](this[_0x3932eb(0x108)]+'\x20Branch\x20synchronized.\x20Skip')[_0x3932eb(0xef)]();return;}const _0x32c50e=await this[_0x3932eb(0xdc)](_0x1ad21e);await this[_0x3932eb(0xd1)][_0x3932eb(0xde)](_0x32c50e,this['prefix']),await this[_0x3932eb(0xf5)][_0x3932eb(0xb8)](this['syncData'],_0x3932eb(0x102)),await this[_0x3932eb(0xb3)](),this['sfLogger'][_0x3932eb(0xfd)](this['prefix']+_0x3932eb(0xf8));}catch(_0x318d35){throw _0x318d35;}finally{await this[_0x3932eb(0xcc)][_0x3932eb(0xef)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a106_0x8666b3(0xe3),[salesforce_sync_service_1[a106_0x8666b3(0xc0)],salesforce_service_1[a106_0x8666b3(0x103)],commit_components_job_1[a106_0x8666b3(0xe1)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;