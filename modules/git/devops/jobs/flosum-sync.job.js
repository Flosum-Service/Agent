const a108_0xd07f8=a108_0x43f7;(function(_0x22e6fb,_0x3894fb){const _0x3ec41e=a108_0x43f7,_0x391b42=_0x22e6fb();while(!![]){try{const _0x23f4cd=-parseInt(_0x3ec41e(0xff))/0x1*(parseInt(_0x3ec41e(0x125))/0x2)+parseInt(_0x3ec41e(0x10b))/0x3*(-parseInt(_0x3ec41e(0xee))/0x4)+-parseInt(_0x3ec41e(0x110))/0x5*(-parseInt(_0x3ec41e(0xfa))/0x6)+parseInt(_0x3ec41e(0xd3))/0x7*(parseInt(_0x3ec41e(0xf8))/0x8)+-parseInt(_0x3ec41e(0x10d))/0x9+-parseInt(_0x3ec41e(0x11a))/0xa*(-parseInt(_0x3ec41e(0xd0))/0xb)+parseInt(_0x3ec41e(0xfb))/0xc;if(_0x23f4cd===_0x3894fb)break;else _0x391b42['push'](_0x391b42['shift']());}catch(_0x16d511){_0x391b42['push'](_0x391b42['shift']());}}}(a108_0x460b,0x72c77));const a108_0x42b9b8=(function(){let _0x8953a=!![];return function(_0x4110f6,_0x5dcdf3){const _0xff702=_0x8953a?function(){const _0x48b159=a108_0x43f7;if(_0x5dcdf3){const _0x351664=_0x5dcdf3[_0x48b159(0x117)](_0x4110f6,arguments);return _0x5dcdf3=null,_0x351664;}}:function(){};return _0x8953a=![],_0xff702;};}()),a108_0x2074a8=a108_0x42b9b8(this,function(){const _0x1d5902=a108_0x43f7;return a108_0x2074a8[_0x1d5902(0xf9)]()['search']('(((.+)+)+)+$')[_0x1d5902(0xf9)]()[_0x1d5902(0x11b)](a108_0x2074a8)[_0x1d5902(0x107)](_0x1d5902(0x10c));});a108_0x2074a8();'use strict';var __decorate=this&&this[a108_0xd07f8(0x128)]||function(_0x1e019d,_0xca345a,_0x355eea,_0x17add3){const _0xc442df=a108_0xd07f8;var _0x2ace33=arguments[_0xc442df(0xd2)],_0x4de505=_0x2ace33<0x3?_0xca345a:_0x17add3===null?_0x17add3=Object[_0xc442df(0xfe)](_0xca345a,_0x355eea):_0x17add3,_0xf9afb8;if(typeof Reflect===_0xc442df(0xf1)&&typeof Reflect[_0xc442df(0xd7)]===_0xc442df(0xd6))_0x4de505=Reflect[_0xc442df(0xd7)](_0x1e019d,_0xca345a,_0x355eea,_0x17add3);else{for(var _0x20f9d1=_0x1e019d[_0xc442df(0xd2)]-0x1;_0x20f9d1>=0x0;_0x20f9d1--)if(_0xf9afb8=_0x1e019d[_0x20f9d1])_0x4de505=(_0x2ace33<0x3?_0xf9afb8(_0x4de505):_0x2ace33>0x3?_0xf9afb8(_0xca345a,_0x355eea,_0x4de505):_0xf9afb8(_0xca345a,_0x355eea))||_0x4de505;}return _0x2ace33>0x3&&_0x4de505&&Object['defineProperty'](_0xca345a,_0x355eea,_0x4de505),_0x4de505;},__metadata=this&&this[a108_0xd07f8(0x10e)]||function(_0x208a23,_0x4ce1f0){const _0x3e75c4=a108_0xd07f8;if(typeof Reflect===_0x3e75c4(0xf1)&&typeof Reflect[_0x3e75c4(0xeb)]==='function')return Reflect['metadata'](_0x208a23,_0x4ce1f0);};Object[a108_0xd07f8(0xe6)](exports,a108_0xd07f8(0x11c),{'value':!![]}),exports[a108_0xd07f8(0xd1)]=void 0x0;const salesforce_logger_v3_service_1=require(a108_0xd07f8(0x106)),typedi_1=require(a108_0xd07f8(0xe8)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a108_0xd07f8(0xde)),salesforce_sync_service_1=require(a108_0xd07f8(0x10f)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a108_0xd07f8(0xf7));function a108_0x43f7(_0xa1afb9,_0x318980){const _0x3b2e7d=a108_0x460b();return a108_0x43f7=function(_0x2074a8,_0x42b9b8){_0x2074a8=_0x2074a8-0xd0;let _0x460bd4=_0x3b2e7d[_0x2074a8];return _0x460bd4;},a108_0x43f7(_0xa1afb9,_0x318980);}function a108_0x460b(){const _0x525fe6=['typedi','gitUrl','parse','metadata',']\x20[Branch:\x20','recordType','1272196EcCRqy','run','lastCommit','object','CommitComponentsDto','catch','sfLogger','get','branchName','./commit-components.job','16LpyEqG','toString','1309164EkAKUv','10861212ODnuqA','prefix','getRemoteStateAttachmentId','getOwnPropertyDescriptor','99061QHjrxG','log','DEFAULT_GIT_USER_EMAIL','checkSyncStatus','\x20Checking\x20repository\x20on\x20Flosum\x20side.','branch','convertToSFDX','../../salesforce/services/salesforce-logger-v3.service','search','getCommitDto','getComponents','\x20Flosum\x20sync\x20job\x20done.','3BdxotS','(((.+)+)+)+$','8395677EcCDYK','__metadata','../../salesforce/services/salesforce-sync.service','5qKgbBm','provider','Completed','branchId','DEFAULT_GIT_USER_NAME','salesforceSync','sha','apply','getOne','updateLastCommit','6520GWUcpO','constructor','__esModule','getComponentIds','In\x20Progress','components','force','salesforceService','send','string','then','8uJuuFZ','commitJob','design:paramtypes','__decorate','4411OFDADh','FlosumSyncJob','length','2563869cCEmjf','syncData','repository','function','decorate','create','\x20Checking\x20sync\x20status.','createBranchIfNotExists','\x20Sync\x20status\x20','branches','repositoryName','../../salesforce/services/salesforce-retriever.service','repositoryId','CommitComponentsJob','Sync\x20repository','setStatus','Service','user','\x20Branch\x20synchronized.\x20Skip','defineProperty','SalesforceLogger3'];a108_0x460b=function(){return _0x525fe6;};return a108_0x460b();}let FlosumSyncJob=class FlosumSyncJob{constructor(_0xb4eeee,_0x5e6eb8,_0x4ceb27){const _0x1136f1=a108_0xd07f8;this[_0x1136f1(0x115)]=_0xb4eeee,this[_0x1136f1(0x121)]=_0x5e6eb8,this[_0x1136f1(0x126)]=_0x4ceb27;}async['createBranchIfNotExists'](){const _0x257866=a108_0xd07f8;let _0x2017c2=await this['repository']['branches'][_0x257866(0x118)](this[_0x257866(0xd4)][_0x257866(0xf6)])['catch'](()=>null);!_0x2017c2&&(_0x2017c2=await this[_0x257866(0xd5)][_0x257866(0xdc)][_0x257866(0xd8)]({'name':this['syncData'][_0x257866(0xf6)]})),this['branch']=_0x2017c2;}async[a108_0xd07f8(0x11d)](){const _0x3c61ec=a108_0xd07f8;return this[_0x3c61ec(0xd4)][_0x3c61ec(0xdf)]?this[_0x3c61ec(0x115)]['getComponentsFromRepository'](this['syncData']['repositoryId']):this[_0x3c61ec(0x115)]['getBranchComponents'](this[_0x3c61ec(0xd4)][_0x3c61ec(0x113)]);}async[a108_0xd07f8(0x109)](){const _0x1f05b1=a108_0xd07f8,_0x9ba0e8=await this[_0x1f05b1(0x11d)](),_0x535ed3=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x1f05b1(0x121)]),_0x371931=await _0x535ed3[_0x1f05b1(0xef)](_0x9ba0e8);return _0x371931;}async['getCommitDto'](_0x20c884){const _0x30a7c8=a108_0xd07f8,_0x51338b=new commit_components_dto_1[(_0x30a7c8(0xf2))]();return _0x51338b['message']=_0x30a7c8(0xe1),_0x51338b[_0x30a7c8(0xe4)]={'name':constants_1[_0x30a7c8(0x114)],'email':constants_1[_0x30a7c8(0x101)]},_0x51338b[_0x30a7c8(0x11f)]={'writed':await this[_0x30a7c8(0x109)]()},_0x51338b[_0x30a7c8(0x105)]=_0x20c884,_0x51338b['repo']=this['repository'],_0x51338b['branch']=this[_0x30a7c8(0x104)],_0x51338b[_0x30a7c8(0x120)]=!![],_0x51338b[_0x30a7c8(0x111)]=this[_0x30a7c8(0x111)],_0x51338b[_0x30a7c8(0xed)]=this[_0x30a7c8(0xd4)]['recordTypeName'],_0x51338b;}async['checkSyncStatus'](){const _0x4b4b4d=a108_0xd07f8,_0x6f6a69=await this[_0x4b4b4d(0x115)][_0x4b4b4d(0xfd)](this[_0x4b4b4d(0xd4)]),_0x2d07df=await this[_0x4b4b4d(0x121)]['retrieveAttachment'](_0x6f6a69)[_0x4b4b4d(0x124)](_0x3f42a0=>typeof _0x3f42a0===_0x4b4b4d(0x123)?JSON[_0x4b4b4d(0xea)](_0x3f42a0):_0x3f42a0)[_0x4b4b4d(0xf3)](()=>({}));if(_0x2d07df[this[_0x4b4b4d(0xd5)][_0x4b4b4d(0xe9)]]){if(_0x2d07df[this[_0x4b4b4d(0xd5)][_0x4b4b4d(0xe9)]][_0x4b4b4d(0xf0)]===this[_0x4b4b4d(0x104)][_0x4b4b4d(0x116)])return!![];}return![];}async['updateLastCommit'](){const _0x5ed38f=a108_0xd07f8,_0x1ce7b7=await this[_0x5ed38f(0xd5)][_0x5ed38f(0xdc)][_0x5ed38f(0x118)](this[_0x5ed38f(0x104)]['name']);await this[_0x5ed38f(0xf4)]['log'](this[_0x5ed38f(0xfc)]+'\x20Update\x20remote\x20state.');const _0x27c416={[this['repository']['gitUrl']]:{'lastCommit':_0x1ce7b7[_0x5ed38f(0x116)]}};await this[_0x5ed38f(0x115)]['updateRemoteState'](this[_0x5ed38f(0xd4)],_0x27c416);}async[a108_0xd07f8(0xef)]({syncRecord:_0x1d4d52,repository:_0x337503,convertToSFDX:_0x3e601c,provider:_0x972e67}){const _0x176029=a108_0xd07f8;this['syncData']=_0x1d4d52,this[_0x176029(0x111)]=_0x972e67,this[_0x176029(0xd5)]=_0x337503,this[_0x176029(0xf4)]=typedi_1['Container'][_0x176029(0xf5)](salesforce_logger_v3_service_1[_0x176029(0xe7)]),this[_0x176029(0xfc)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x176029(0xd4)][_0x176029(0xdd)]+_0x176029(0xec)+this[_0x176029(0xd4)][_0x176029(0xf6)]+']';try{await this[_0x176029(0xf4)]['log'](this[_0x176029(0xfc)]+'\x20Start\x20Flosum\x20sync\x20job')['send'](),await this[_0x176029(0x115)][_0x176029(0xe2)](this['syncData'],_0x176029(0x11e)),this[_0x176029(0xf4)][_0x176029(0x100)](this['prefix']+_0x176029(0x103)),await this[_0x176029(0xda)](),await this['sfLogger']['log'](this[_0x176029(0xfc)]+_0x176029(0xd9))[_0x176029(0x122)]();const _0x5a90e9=await this[_0x176029(0x102)]();this['sfLogger'][_0x176029(0x100)](this[_0x176029(0xfc)]+_0x176029(0xdb)+_0x5a90e9+'.');if(_0x5a90e9){await this[_0x176029(0x115)]['setStatus'](this['syncData'],'Completed'),await this['sfLogger'][_0x176029(0x100)](this[_0x176029(0xfc)]+_0x176029(0xe5))[_0x176029(0x122)]();return;}const _0x33f1fb=await this[_0x176029(0x108)](_0x3e601c);await this[_0x176029(0x126)]['run'](_0x33f1fb,this['prefix']),await this['salesforceSync'][_0x176029(0xe2)](this[_0x176029(0xd4)],_0x176029(0x112)),await this[_0x176029(0x119)](),this[_0x176029(0xf4)][_0x176029(0x100)](this['prefix']+_0x176029(0x10a));}catch(_0x4354e2){throw _0x4354e2;}finally{await this[_0x176029(0xf4)][_0x176029(0x122)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a108_0xd07f8(0xe3)])({'transient':!![]}),__metadata(a108_0xd07f8(0x127),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1['SalesforceService'],commit_components_job_1[a108_0xd07f8(0xe0)]])],FlosumSyncJob),exports[a108_0xd07f8(0xd1)]=FlosumSyncJob;