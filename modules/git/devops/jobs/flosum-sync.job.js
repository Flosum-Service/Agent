const a127_0x72d08f=a127_0x510b;(function(_0x8387f0,_0x19a1a4){const _0x2f73de=a127_0x510b,_0x2e7e19=_0x8387f0();while(!![]){try{const _0x2fafda=-parseInt(_0x2f73de(0x1dc))/0x1+-parseInt(_0x2f73de(0x1a9))/0x2+-parseInt(_0x2f73de(0x1c9))/0x3*(-parseInt(_0x2f73de(0x1d7))/0x4)+-parseInt(_0x2f73de(0x1cf))/0x5+-parseInt(_0x2f73de(0x1bc))/0x6+parseInt(_0x2f73de(0x1c8))/0x7+parseInt(_0x2f73de(0x1e8))/0x8*(parseInt(_0x2f73de(0x1b1))/0x9);if(_0x2fafda===_0x19a1a4)break;else _0x2e7e19['push'](_0x2e7e19['shift']());}catch(_0x1f8497){_0x2e7e19['push'](_0x2e7e19['shift']());}}}(a127_0x3469,0x7a3fc));const a127_0x17fb9b=(function(){let _0x14db43=!![];return function(_0x36b48c,_0xf21664){const _0x3c0c61=_0x14db43?function(){if(_0xf21664){const _0x3c2681=_0xf21664['apply'](_0x36b48c,arguments);return _0xf21664=null,_0x3c2681;}}:function(){};return _0x14db43=![],_0x3c0c61;};}()),a127_0x39c958=a127_0x17fb9b(this,function(){const _0xd81b8b=a127_0x510b;return a127_0x39c958[_0xd81b8b(0x1da)]()[_0xd81b8b(0x1cb)]('(((.+)+)+)+$')[_0xd81b8b(0x1da)]()['constructor'](a127_0x39c958)['search'](_0xd81b8b(0x1c2));});a127_0x39c958();function a127_0x3469(){const _0x28eb77=['1938438tbZolH','sha','length','repo','convertToSFDX','log','SalesforceService','\x20Flosum\x20sync\x20job\x20done.','40347udqfLw','SalesforceLogger3','../../salesforce/services/salesforce-sync.service','commitJob','force','DEFAULT_GIT_USER_NAME','create','repositoryId','components','getOne','branch','4697340nHggUD','../../salesforce/services/salesforce.service',']\x20[Branch:\x20','recordType','defineProperty','\x20Checking\x20repository\x20on\x20Flosum\x20side.','(((.+)+)+)+$','catch','provider','repository','repositoryName','getCommitDto','5633166kuqzIU','150YZLGcB','function','search','prefix','\x20Sync\x20status\x20','CommitComponentsDto','1885550akDrdx','__metadata','SalesforceSyncService','run','branches','getRemoteStateAttachmentId','\x20Branch\x20synchronized.\x20Skip','SalesforceRetrieverService','43092zdmalb','sfLogger','./commit-components.job','toString','Service','744236JWpePm','Container','__esModule','metadata','\x20Start\x20Flosum\x20sync\x20job','userEmail','syncData','checkSyncStatus','design:paramtypes','createBranchIfNotExists','gitUrl','CommitComponentsJob','3624JvGMQV','getComponents','FlosumSyncJob','branchId','../dto/commit-components.dto','object','getComponentsFromRepository','string','message','user','\x20Checking\x20sync\x20status.','parse','getComponentIds','../../salesforce/services/salesforce-logger-v3.service','retrieveAttachment','send','../../../../constants','salesforceService','updateLastCommit','setStatus','then','__decorate','lastCommit','DEFAULT_GIT_USER_EMAIL','branchName','getOwnPropertyDescriptor','salesforceSync','updateRemoteState'];a127_0x3469=function(){return _0x28eb77;};return a127_0x3469();}'use strict';var __decorate=this&&this[a127_0x72d08f(0x1a2)]||function(_0x4aa771,_0x4297be,_0x3bd8f1,_0x52be14){const _0x25e896=a127_0x72d08f;var _0x25f102=arguments[_0x25e896(0x1ab)],_0x1893aa=_0x25f102<0x3?_0x4297be:_0x52be14===null?_0x52be14=Object[_0x25e896(0x1a6)](_0x4297be,_0x3bd8f1):_0x52be14,_0x33ef1c;if(typeof Reflect===_0x25e896(0x192)&&typeof Reflect['decorate']===_0x25e896(0x1ca))_0x1893aa=Reflect['decorate'](_0x4aa771,_0x4297be,_0x3bd8f1,_0x52be14);else{for(var _0x173371=_0x4aa771[_0x25e896(0x1ab)]-0x1;_0x173371>=0x0;_0x173371--)if(_0x33ef1c=_0x4aa771[_0x173371])_0x1893aa=(_0x25f102<0x3?_0x33ef1c(_0x1893aa):_0x25f102>0x3?_0x33ef1c(_0x4297be,_0x3bd8f1,_0x1893aa):_0x33ef1c(_0x4297be,_0x3bd8f1))||_0x1893aa;}return _0x25f102>0x3&&_0x1893aa&&Object[_0x25e896(0x1c0)](_0x4297be,_0x3bd8f1,_0x1893aa),_0x1893aa;},__metadata=this&&this[a127_0x72d08f(0x1d0)]||function(_0x4dba40,_0x2ad78d){const _0x3e6bce=a127_0x72d08f;if(typeof Reflect===_0x3e6bce(0x192)&&typeof Reflect[_0x3e6bce(0x1df)]===_0x3e6bce(0x1ca))return Reflect[_0x3e6bce(0x1df)](_0x4dba40,_0x2ad78d);};function a127_0x510b(_0x23f7b9,_0x5a64cf){const _0x1a890f=a127_0x3469();return a127_0x510b=function(_0x39c958,_0x17fb9b){_0x39c958=_0x39c958-0x192;let _0x34696d=_0x1a890f[_0x39c958];return _0x34696d;},a127_0x510b(_0x23f7b9,_0x5a64cf);}Object[a127_0x72d08f(0x1c0)](exports,a127_0x72d08f(0x1de),{'value':!![]}),exports[a127_0x72d08f(0x1ea)]=void 0x0;const salesforce_logger_v3_service_1=require(a127_0x72d08f(0x19a)),typedi_1=require('typedi'),constants_1=require(a127_0x72d08f(0x19d)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a127_0x72d08f(0x1b3)),salesforce_service_1=require(a127_0x72d08f(0x1bd)),commit_components_dto_1=require(a127_0x72d08f(0x1ec)),commit_components_job_1=require(a127_0x72d08f(0x1d9));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x171712,_0x43e582,_0x4cd907){const _0x19ed6a=a127_0x72d08f;this[_0x19ed6a(0x1a7)]=_0x171712,this[_0x19ed6a(0x19e)]=_0x43e582,this[_0x19ed6a(0x1b4)]=_0x4cd907;}async[a127_0x72d08f(0x1e5)](){const _0x357eb7=a127_0x72d08f;let _0x195f18=await this[_0x357eb7(0x1c5)][_0x357eb7(0x1d3)][_0x357eb7(0x1ba)](this[_0x357eb7(0x1e2)]['branchName'])[_0x357eb7(0x1c3)](()=>null);!_0x195f18&&(_0x195f18=await this[_0x357eb7(0x1c5)]['branches'][_0x357eb7(0x1b7)]({'name':this[_0x357eb7(0x1e2)][_0x357eb7(0x1a5)],'user':{'name':this[_0x357eb7(0x1e2)]['userName'],'email':this[_0x357eb7(0x1e2)][_0x357eb7(0x1e1)]}})),this[_0x357eb7(0x1bb)]=_0x195f18;}async[a127_0x72d08f(0x199)](){const _0x48b150=a127_0x72d08f;return this[_0x48b150(0x1e2)][_0x48b150(0x1b8)]?this['salesforceSync'][_0x48b150(0x193)](this[_0x48b150(0x1e2)][_0x48b150(0x1b8)]):this[_0x48b150(0x1a7)]['getBranchComponents'](this[_0x48b150(0x1e2)][_0x48b150(0x1eb)]);}async['getComponents'](){const _0x4f9651=a127_0x72d08f,_0x367161=await this[_0x4f9651(0x199)](),_0x3c0900=new salesforce_retriever_service_1[(_0x4f9651(0x1d6))](this[_0x4f9651(0x19e)]),_0x5bf841=await _0x3c0900[_0x4f9651(0x1d2)](_0x367161);return _0x5bf841;}async[a127_0x72d08f(0x1c7)](_0x4cbf12){const _0x578024=a127_0x72d08f,_0x252f5d=new commit_components_dto_1[(_0x578024(0x1ce))]();return _0x252f5d[_0x578024(0x195)]='Sync\x20repository',_0x252f5d[_0x578024(0x196)]={'name':constants_1[_0x578024(0x1b6)],'email':constants_1[_0x578024(0x1a4)]},_0x252f5d[_0x578024(0x1b9)]={'writed':await this[_0x578024(0x1e9)]()},_0x252f5d[_0x578024(0x1ad)]=_0x4cbf12,_0x252f5d[_0x578024(0x1ac)]=this[_0x578024(0x1c5)],_0x252f5d['branch']=this[_0x578024(0x1bb)],_0x252f5d[_0x578024(0x1b5)]=!![],_0x252f5d[_0x578024(0x1c4)]=this[_0x578024(0x1c4)],_0x252f5d[_0x578024(0x1bf)]=this['syncData']['recordTypeName'],_0x252f5d;}async[a127_0x72d08f(0x1e3)](){const _0x50e983=a127_0x72d08f,_0x3a4545=await this[_0x50e983(0x1a7)][_0x50e983(0x1d4)](this[_0x50e983(0x1e2)]),_0x9c6ad0=await this[_0x50e983(0x19e)][_0x50e983(0x19b)](_0x3a4545)[_0x50e983(0x1a1)](_0x325f6a=>typeof _0x325f6a===_0x50e983(0x194)?JSON[_0x50e983(0x198)](_0x325f6a):_0x325f6a)[_0x50e983(0x1c3)](()=>({}));if(_0x9c6ad0[this[_0x50e983(0x1c5)][_0x50e983(0x1e6)]]){if(_0x9c6ad0[this[_0x50e983(0x1c5)][_0x50e983(0x1e6)]][_0x50e983(0x1a3)]===this[_0x50e983(0x1bb)][_0x50e983(0x1aa)])return!![];}return![];}async[a127_0x72d08f(0x19f)](){const _0x51435f=a127_0x72d08f,_0x428d44=await this['repository'][_0x51435f(0x1d3)][_0x51435f(0x1ba)](this[_0x51435f(0x1bb)]['name']);await this[_0x51435f(0x1d8)][_0x51435f(0x1ae)](this['prefix']+'\x20Update\x20remote\x20state.');const _0x88f49b={[this[_0x51435f(0x1c5)][_0x51435f(0x1e6)]]:{'lastCommit':_0x428d44[_0x51435f(0x1aa)]}};await this[_0x51435f(0x1a7)][_0x51435f(0x1a8)](this['syncData'],_0x88f49b);}async[a127_0x72d08f(0x1d2)]({syncRecord:_0xc35ed3,repository:_0x3c8e5c,convertToSFDX:_0x2b2cf0,provider:_0x543097}){const _0x849702=a127_0x72d08f;this[_0x849702(0x1e2)]=_0xc35ed3,this['provider']=_0x543097,this[_0x849702(0x1c5)]=_0x3c8e5c,this[_0x849702(0x1d8)]=typedi_1[_0x849702(0x1dd)]['get'](salesforce_logger_v3_service_1[_0x849702(0x1b2)]),this[_0x849702(0x1cc)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x849702(0x1e2)][_0x849702(0x1c6)]+_0x849702(0x1be)+this[_0x849702(0x1e2)]['branchName']+']';try{await this['sfLogger'][_0x849702(0x1ae)](this[_0x849702(0x1cc)]+_0x849702(0x1e0))['send'](),await this['salesforceSync'][_0x849702(0x1a0)](this[_0x849702(0x1e2)],'In\x20Progress'),this[_0x849702(0x1d8)][_0x849702(0x1ae)](this[_0x849702(0x1cc)]+_0x849702(0x1c1)),await this[_0x849702(0x1e5)](),await this['sfLogger'][_0x849702(0x1ae)](this[_0x849702(0x1cc)]+_0x849702(0x197))[_0x849702(0x19c)]();const _0x4d9321=await this[_0x849702(0x1e3)]();this[_0x849702(0x1d8)][_0x849702(0x1ae)](this[_0x849702(0x1cc)]+_0x849702(0x1cd)+_0x4d9321+'.');if(_0x4d9321){await this[_0x849702(0x1a7)]['setStatus'](this[_0x849702(0x1e2)],'Completed'),await this['sfLogger'][_0x849702(0x1ae)](this[_0x849702(0x1cc)]+_0x849702(0x1d5))[_0x849702(0x19c)]();return;}const _0x544096=await this[_0x849702(0x1c7)](_0x2b2cf0);await this[_0x849702(0x1b4)][_0x849702(0x1d2)](_0x544096,this[_0x849702(0x1cc)]),await this['salesforceSync'][_0x849702(0x1a0)](this[_0x849702(0x1e2)],'Completed'),await this[_0x849702(0x19f)](),this[_0x849702(0x1d8)][_0x849702(0x1ae)](this[_0x849702(0x1cc)]+_0x849702(0x1b0));}catch(_0x343e06){throw _0x343e06;}finally{await this['sfLogger'][_0x849702(0x19c)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a127_0x72d08f(0x1db)])({'transient':!![]}),__metadata(a127_0x72d08f(0x1e4),[salesforce_sync_service_1[a127_0x72d08f(0x1d1)],salesforce_service_1[a127_0x72d08f(0x1af)],commit_components_job_1[a127_0x72d08f(0x1e7)]])],FlosumSyncJob),exports[a127_0x72d08f(0x1ea)]=FlosumSyncJob;