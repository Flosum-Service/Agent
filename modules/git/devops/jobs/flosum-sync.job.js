const a75_0x211331=a75_0x26fa;(function(_0xf71728,_0x290caa){const _0x881ab8=a75_0x26fa,_0x108360=_0xf71728();while(!![]){try{const _0x5388e1=parseInt(_0x881ab8(0x198))/0x1*(-parseInt(_0x881ab8(0x173))/0x2)+-parseInt(_0x881ab8(0x19f))/0x3+parseInt(_0x881ab8(0x15f))/0x4*(parseInt(_0x881ab8(0x189))/0x5)+-parseInt(_0x881ab8(0x161))/0x6*(-parseInt(_0x881ab8(0x172))/0x7)+parseInt(_0x881ab8(0x18e))/0x8*(-parseInt(_0x881ab8(0x1a1))/0x9)+parseInt(_0x881ab8(0x176))/0xa*(-parseInt(_0x881ab8(0x151))/0xb)+parseInt(_0x881ab8(0x163))/0xc;if(_0x5388e1===_0x290caa)break;else _0x108360['push'](_0x108360['shift']());}catch(_0xf2e1a9){_0x108360['push'](_0x108360['shift']());}}}(a75_0x5102,0xdfc83));const a75_0x3a7b87=(function(){let _0x4a1529=!![];return function(_0x1d3768,_0x375896){const _0x221793=_0x4a1529?function(){const _0x182fa4=a75_0x26fa;if(_0x375896){const _0x520760=_0x375896[_0x182fa4(0x169)](_0x1d3768,arguments);return _0x375896=null,_0x520760;}}:function(){};return _0x4a1529=![],_0x221793;};}()),a75_0x2a037e=a75_0x3a7b87(this,function(){const _0x49a0e6=a75_0x26fa;return a75_0x2a037e[_0x49a0e6(0x1a2)]()[_0x49a0e6(0x17b)](_0x49a0e6(0x181))[_0x49a0e6(0x1a2)]()['constructor'](a75_0x2a037e)[_0x49a0e6(0x17b)](_0x49a0e6(0x181));});a75_0x2a037e();'use strict';var __decorate=this&&this[a75_0x211331(0x194)]||function(_0x41968a,_0x46b4e9,_0x4b8827,_0x1f5f43){const _0x2ef69f=a75_0x211331;var _0x235740=arguments['length'],_0xf3c20f=_0x235740<0x3?_0x46b4e9:_0x1f5f43===null?_0x1f5f43=Object[_0x2ef69f(0x157)](_0x46b4e9,_0x4b8827):_0x1f5f43,_0x2e6851;if(typeof Reflect===_0x2ef69f(0x17c)&&typeof Reflect[_0x2ef69f(0x19c)]===_0x2ef69f(0x184))_0xf3c20f=Reflect[_0x2ef69f(0x19c)](_0x41968a,_0x46b4e9,_0x4b8827,_0x1f5f43);else{for(var _0x144cfc=_0x41968a[_0x2ef69f(0x15b)]-0x1;_0x144cfc>=0x0;_0x144cfc--)if(_0x2e6851=_0x41968a[_0x144cfc])_0xf3c20f=(_0x235740<0x3?_0x2e6851(_0xf3c20f):_0x235740>0x3?_0x2e6851(_0x46b4e9,_0x4b8827,_0xf3c20f):_0x2e6851(_0x46b4e9,_0x4b8827))||_0xf3c20f;}return _0x235740>0x3&&_0xf3c20f&&Object[_0x2ef69f(0x195)](_0x46b4e9,_0x4b8827,_0xf3c20f),_0xf3c20f;},__metadata=this&&this[a75_0x211331(0x178)]||function(_0x2e786d,_0x2412a8){const _0xdc694c=a75_0x211331;if(typeof Reflect===_0xdc694c(0x17c)&&typeof Reflect['metadata']===_0xdc694c(0x184))return Reflect[_0xdc694c(0x18f)](_0x2e786d,_0x2412a8);};Object[a75_0x211331(0x195)](exports,a75_0x211331(0x1a0),{'value':!![]}),exports[a75_0x211331(0x188)]=void 0x0;function a75_0x5102(){const _0x53aa73=['salesforceService','2625MOsUDJ','2108426cHDQGt','parse','send','260QvJDNV','Container','__metadata','string','getComponentIds','search','object','syncData','../../salesforce/services/salesforce.service','SalesforceLogger3','updateRemoteState','(((.+)+)+)+$','design:paramtypes','getComponentsFromRepository','function','catch','force','convertToSFDX','FlosumSyncJob','50HFhkyd','message','Completed','run','\x20Checking\x20repository\x20on\x20Flosum\x20side.','8swlxRa','metadata','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','repo','createBranchIfNotExists','repository','__decorate','defineProperty','getCommitDto','gitUrl','1RHTuoh','\x20Update\x20remote\x20state.','DEFAULT_GIT_USER_NAME','get','decorate','CommitComponentsJob','setStatus','2869740PbpNeR','__esModule','281628CLmKQO','toString','commitJob','SalesforceRetrieverService','create','retrieveAttachment','SalesforceService','SalesforceSyncService','branches','\x20Sync\x20status\x20','../../salesforce/services/salesforce-sync.service','updateLastCommit','branchName','getOne','checkSyncStatus','458634WSyyIB','../../../../constants','components','provider','repositoryId','typedi','getOwnPropertyDescriptor','\x20Flosum\x20sync\x20job\x20done.','In\x20Progress',']\x20[Branch:\x20','length','DEFAULT_GIT_USER_EMAIL','\x20Start\x20Flosum\x20sync\x20job','sha','328984RHKnxX','../../salesforce/services/salesforce-retriever.service','15978HebiUb','getRemoteStateAttachmentId','26659860VgJtaB','prefix','user','sfLogger','branch','../../salesforce/services/salesforce-logger-v3.service','apply','salesforceSync','\x20Branch\x20synchronized.\x20Skip','getBranchComponents','Sync\x20repository','log','repositoryName','getComponents'];a75_0x5102=function(){return _0x53aa73;};return a75_0x5102();}const salesforce_logger_v3_service_1=require(a75_0x211331(0x168)),typedi_1=require(a75_0x211331(0x156)),constants_1=require(a75_0x211331(0x152)),salesforce_retriever_service_1=require(a75_0x211331(0x160)),salesforce_sync_service_1=require(a75_0x211331(0x14c)),salesforce_service_1=require(a75_0x211331(0x17e)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x6dcb72,_0x397c5f,_0x55cdd2){const _0x1af637=a75_0x211331;this['salesforceSync']=_0x6dcb72,this[_0x1af637(0x171)]=_0x397c5f,this[_0x1af637(0x1a3)]=_0x55cdd2;}async['createBranchIfNotExists'](){const _0x494a74=a75_0x211331;let _0x15cfb7=await this[_0x494a74(0x193)]['branches'][_0x494a74(0x14f)](this['syncData']['branchName'])['catch'](()=>null);!_0x15cfb7&&(_0x15cfb7=await this[_0x494a74(0x193)][_0x494a74(0x14a)][_0x494a74(0x146)]({'name':this[_0x494a74(0x17d)][_0x494a74(0x14e)]})),this['branch']=_0x15cfb7;}async[a75_0x211331(0x17a)](){const _0x47344b=a75_0x211331;return this[_0x47344b(0x17d)][_0x47344b(0x155)]?this[_0x47344b(0x16a)][_0x47344b(0x183)](this['syncData'][_0x47344b(0x155)]):this[_0x47344b(0x16a)][_0x47344b(0x16c)](this['syncData']['branchId']);}async[a75_0x211331(0x170)](){const _0x223ec2=a75_0x211331,_0x1085e9=await this['getComponentIds'](),_0x37a31b=new salesforce_retriever_service_1[(_0x223ec2(0x1a4))](this[_0x223ec2(0x171)]),_0x7d7377=await _0x37a31b[_0x223ec2(0x18c)](_0x1085e9);return _0x7d7377;}async[a75_0x211331(0x196)](_0x5c93ac){const _0x85fef8=a75_0x211331,_0x39449b=new commit_components_dto_1['CommitComponentsDto']();return _0x39449b[_0x85fef8(0x18a)]=_0x85fef8(0x16d),_0x39449b[_0x85fef8(0x165)]={'name':constants_1[_0x85fef8(0x19a)],'email':constants_1[_0x85fef8(0x15c)]},_0x39449b[_0x85fef8(0x153)]={'writed':await this[_0x85fef8(0x170)]()},_0x39449b[_0x85fef8(0x187)]=_0x5c93ac,_0x39449b[_0x85fef8(0x191)]=this[_0x85fef8(0x193)],_0x39449b['branch']=this[_0x85fef8(0x167)],_0x39449b[_0x85fef8(0x186)]=!![],_0x39449b[_0x85fef8(0x154)]=this[_0x85fef8(0x154)],_0x39449b;}async[a75_0x211331(0x150)](){const _0x3f5afe=a75_0x211331,_0x42c03d=await this[_0x3f5afe(0x16a)][_0x3f5afe(0x162)](this[_0x3f5afe(0x17d)]),_0x8229b6=await this[_0x3f5afe(0x171)][_0x3f5afe(0x147)](_0x42c03d)['then'](_0x4b0253=>typeof _0x4b0253===_0x3f5afe(0x179)?JSON[_0x3f5afe(0x174)](_0x4b0253):_0x4b0253)[_0x3f5afe(0x185)](()=>({}));if(_0x8229b6[this[_0x3f5afe(0x193)]['gitUrl']]){if(_0x8229b6[this[_0x3f5afe(0x193)][_0x3f5afe(0x197)]]['lastCommit']===this[_0x3f5afe(0x167)][_0x3f5afe(0x15e)])return!![];}return![];}async['updateLastCommit'](){const _0x1aef90=a75_0x211331,_0x2a9608=await this['repository']['branches'][_0x1aef90(0x14f)](this[_0x1aef90(0x167)]['name']);await this[_0x1aef90(0x166)][_0x1aef90(0x16e)](this['prefix']+_0x1aef90(0x199));const _0x2d79b0={[this[_0x1aef90(0x193)][_0x1aef90(0x197)]]:{'lastCommit':_0x2a9608[_0x1aef90(0x15e)]}};await this[_0x1aef90(0x16a)][_0x1aef90(0x180)](this[_0x1aef90(0x17d)],_0x2d79b0);}async['run']({syncRecord:_0x4430b5,repository:_0x162e44,convertToSFDX:_0x5511ce,provider:_0x3bfbe0}){const _0x26d6d9=a75_0x211331;this[_0x26d6d9(0x17d)]=_0x4430b5,this[_0x26d6d9(0x154)]=_0x3bfbe0,this[_0x26d6d9(0x193)]=_0x162e44,this['sfLogger']=typedi_1[_0x26d6d9(0x177)][_0x26d6d9(0x19b)](salesforce_logger_v3_service_1[_0x26d6d9(0x17f)]),this[_0x26d6d9(0x164)]=_0x26d6d9(0x190)+this[_0x26d6d9(0x17d)][_0x26d6d9(0x16f)]+_0x26d6d9(0x15a)+this[_0x26d6d9(0x17d)]['branchName']+']';try{await this['sfLogger']['log'](this['prefix']+_0x26d6d9(0x15d))['send'](),await this[_0x26d6d9(0x16a)]['setStatus'](this[_0x26d6d9(0x17d)],_0x26d6d9(0x159)),this['sfLogger']['log'](this[_0x26d6d9(0x164)]+_0x26d6d9(0x18d)),await this[_0x26d6d9(0x192)](),await this['sfLogger']['log'](this['prefix']+'\x20Checking\x20sync\x20status.')[_0x26d6d9(0x175)]();const _0x538e9d=await this['checkSyncStatus']();this[_0x26d6d9(0x166)][_0x26d6d9(0x16e)](this['prefix']+_0x26d6d9(0x14b)+_0x538e9d+'.');if(_0x538e9d){await this[_0x26d6d9(0x16a)][_0x26d6d9(0x19e)](this['syncData'],_0x26d6d9(0x18b)),await this[_0x26d6d9(0x166)]['log'](this[_0x26d6d9(0x164)]+_0x26d6d9(0x16b))['send']();return;}const _0x3cb806=await this[_0x26d6d9(0x196)](_0x5511ce);await this['commitJob']['run'](_0x3cb806,this[_0x26d6d9(0x164)]),await this[_0x26d6d9(0x16a)][_0x26d6d9(0x19e)](this[_0x26d6d9(0x17d)],_0x26d6d9(0x18b)),await this[_0x26d6d9(0x14d)](),this['sfLogger'][_0x26d6d9(0x16e)](this['prefix']+_0x26d6d9(0x158));}catch(_0x519742){throw _0x519742;}finally{await this[_0x26d6d9(0x166)][_0x26d6d9(0x175)]();}}};function a75_0x26fa(_0x3c1a9e,_0x4ddc7f){const _0xba0139=a75_0x5102();return a75_0x26fa=function(_0x2a037e,_0x3a7b87){_0x2a037e=_0x2a037e-0x146;let _0x5102eb=_0xba0139[_0x2a037e];return _0x5102eb;},a75_0x26fa(_0x3c1a9e,_0x4ddc7f);}FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a75_0x211331(0x182),[salesforce_sync_service_1[a75_0x211331(0x149)],salesforce_service_1[a75_0x211331(0x148)],commit_components_job_1[a75_0x211331(0x19d)]])],FlosumSyncJob),exports[a75_0x211331(0x188)]=FlosumSyncJob;