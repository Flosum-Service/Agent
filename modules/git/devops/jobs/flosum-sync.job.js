function a105_0x5a2a(_0x5d60b9,_0x4c1deb){const _0x241cf7=a105_0x3638();return a105_0x5a2a=function(_0xdba6e,_0x39a2c6){_0xdba6e=_0xdba6e-0x14d;let _0x363888=_0x241cf7[_0xdba6e];return _0x363888;},a105_0x5a2a(_0x5d60b9,_0x4c1deb);}const a105_0x5da701=a105_0x5a2a;(function(_0x2e11cb,_0x3e05e6){const _0x61cc71=a105_0x5a2a,_0x538355=_0x2e11cb();while(!![]){try{const _0x4ead98=parseInt(_0x61cc71(0x162))/0x1*(parseInt(_0x61cc71(0x19d))/0x2)+-parseInt(_0x61cc71(0x152))/0x3+parseInt(_0x61cc71(0x186))/0x4+parseInt(_0x61cc71(0x187))/0x5*(parseInt(_0x61cc71(0x15b))/0x6)+parseInt(_0x61cc71(0x171))/0x7+-parseInt(_0x61cc71(0x15f))/0x8+parseInt(_0x61cc71(0x192))/0x9;if(_0x4ead98===_0x3e05e6)break;else _0x538355['push'](_0x538355['shift']());}catch(_0x449eeb){_0x538355['push'](_0x538355['shift']());}}}(a105_0x3638,0xc3a36));const a105_0x39a2c6=(function(){let _0x2420a2=!![];return function(_0x1ccf8d,_0x43a612){const _0x405936=_0x2420a2?function(){const _0x115650=a105_0x5a2a;if(_0x43a612){const _0x41ed54=_0x43a612[_0x115650(0x19b)](_0x1ccf8d,arguments);return _0x43a612=null,_0x41ed54;}}:function(){};return _0x2420a2=![],_0x405936;};}()),a105_0xdba6e=a105_0x39a2c6(this,function(){const _0x8c9ba4=a105_0x5a2a;return a105_0xdba6e[_0x8c9ba4(0x199)]()[_0x8c9ba4(0x156)]('(((.+)+)+)+$')[_0x8c9ba4(0x199)]()[_0x8c9ba4(0x174)](a105_0xdba6e)[_0x8c9ba4(0x156)]('(((.+)+)+)+$');});a105_0xdba6e();'use strict';var __decorate=this&&this[a105_0x5da701(0x190)]||function(_0x41f205,_0x174278,_0x19372c,_0x1d59f7){const _0x181f8d=a105_0x5da701;var _0x1fa874=arguments[_0x181f8d(0x164)],_0x5648a6=_0x1fa874<0x3?_0x174278:_0x1d59f7===null?_0x1d59f7=Object[_0x181f8d(0x158)](_0x174278,_0x19372c):_0x1d59f7,_0x2fea71;if(typeof Reflect===_0x181f8d(0x185)&&typeof Reflect[_0x181f8d(0x14e)]===_0x181f8d(0x188))_0x5648a6=Reflect['decorate'](_0x41f205,_0x174278,_0x19372c,_0x1d59f7);else{for(var _0x322b70=_0x41f205[_0x181f8d(0x164)]-0x1;_0x322b70>=0x0;_0x322b70--)if(_0x2fea71=_0x41f205[_0x322b70])_0x5648a6=(_0x1fa874<0x3?_0x2fea71(_0x5648a6):_0x1fa874>0x3?_0x2fea71(_0x174278,_0x19372c,_0x5648a6):_0x2fea71(_0x174278,_0x19372c))||_0x5648a6;}return _0x1fa874>0x3&&_0x5648a6&&Object['defineProperty'](_0x174278,_0x19372c,_0x5648a6),_0x5648a6;},__metadata=this&&this[a105_0x5da701(0x17e)]||function(_0x18240a,_0x956d92){const _0x468369=a105_0x5da701;if(typeof Reflect===_0x468369(0x185)&&typeof Reflect[_0x468369(0x181)]===_0x468369(0x188))return Reflect[_0x468369(0x181)](_0x18240a,_0x956d92);};function a105_0x3638(){const _0x31bdb2=['3614216YGJOnU','salesforceService','defineProperty','56100ijKHqj','run','length','send','SalesforceService','repo','parse','salesforceSync','Sync\x20repository','prefix','repository','log','repositoryName','convertToSFDX','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','1323728Zjvczb','sfLogger','Completed','constructor','\x20Start\x20Flosum\x20sync\x20job',']\x20[Branch:\x20','FlosumSyncJob','user','../../salesforce/services/salesforce.service','name','CommitComponentsJob','\x20Checking\x20sync\x20status.','design:paramtypes','__metadata','catch','string','metadata','force','__esModule','CommitComponentsDto','object','4208172AakrBM','145kRuSJX','function','../../../../constants','sha','checkSyncStatus','provider','In\x20Progress','components','branch','__decorate','getBranchComponents','2266227fCnJSL','getCommitDto','getComponents','get','typedi','createBranchIfNotExists','lastCommit','toString','branchName','apply','gitUrl','6HsFDUk','setStatus','DEFAULT_GIT_USER_NAME','SalesforceRetrieverService','syncData','getComponentsFromRepository','decorate','commitJob','getComponentIds','branchId','1854645mXpaCZ','then','DEFAULT_GIT_USER_EMAIL','repositoryId','search','../../salesforce/services/salesforce-logger-v3.service','getOwnPropertyDescriptor','getOne','SalesforceLogger3','43464HYGtkN','./commit-components.job','branches','../../salesforce/services/salesforce-retriever.service'];a105_0x3638=function(){return _0x31bdb2;};return a105_0x3638();}Object[a105_0x5da701(0x161)](exports,a105_0x5da701(0x183),{'value':!![]}),exports[a105_0x5da701(0x177)]=void 0x0;const salesforce_logger_v3_service_1=require(a105_0x5da701(0x157)),typedi_1=require(a105_0x5da701(0x196)),constants_1=require(a105_0x5da701(0x189)),salesforce_retriever_service_1=require(a105_0x5da701(0x15e)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a105_0x5da701(0x179)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a105_0x5da701(0x15c));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1822b0,_0x339712,_0x3a0d68){const _0x286436=a105_0x5da701;this[_0x286436(0x169)]=_0x1822b0,this[_0x286436(0x160)]=_0x339712,this[_0x286436(0x14f)]=_0x3a0d68;}async['createBranchIfNotExists'](){const _0x5085f9=a105_0x5da701;let _0x1d0c8e=await this[_0x5085f9(0x16c)][_0x5085f9(0x15d)]['getOne'](this[_0x5085f9(0x1a1)][_0x5085f9(0x19a)])[_0x5085f9(0x17f)](()=>null);!_0x1d0c8e&&(_0x1d0c8e=await this[_0x5085f9(0x16c)][_0x5085f9(0x15d)]['create']({'name':this[_0x5085f9(0x1a1)]['branchName']})),this['branch']=_0x1d0c8e;}async[a105_0x5da701(0x150)](){const _0x537ca9=a105_0x5da701;return this[_0x537ca9(0x1a1)][_0x537ca9(0x155)]?this[_0x537ca9(0x169)][_0x537ca9(0x14d)](this[_0x537ca9(0x1a1)][_0x537ca9(0x155)]):this[_0x537ca9(0x169)][_0x537ca9(0x191)](this[_0x537ca9(0x1a1)][_0x537ca9(0x151)]);}async[a105_0x5da701(0x194)](){const _0x4d99c3=a105_0x5da701,_0x3bf5ed=await this[_0x4d99c3(0x150)](),_0x12b188=new salesforce_retriever_service_1[(_0x4d99c3(0x1a0))](this[_0x4d99c3(0x160)]),_0x29880c=await _0x12b188[_0x4d99c3(0x163)](_0x3bf5ed);return _0x29880c;}async[a105_0x5da701(0x193)](_0x3309f0){const _0x591f4f=a105_0x5da701,_0x4e2f69=new commit_components_dto_1[(_0x591f4f(0x184))]();return _0x4e2f69['message']=_0x591f4f(0x16a),_0x4e2f69[_0x591f4f(0x178)]={'name':constants_1[_0x591f4f(0x19f)],'email':constants_1[_0x591f4f(0x154)]},_0x4e2f69[_0x591f4f(0x18e)]={'writed':await this[_0x591f4f(0x194)]()},_0x4e2f69[_0x591f4f(0x16f)]=_0x3309f0,_0x4e2f69[_0x591f4f(0x167)]=this[_0x591f4f(0x16c)],_0x4e2f69[_0x591f4f(0x18f)]=this[_0x591f4f(0x18f)],_0x4e2f69[_0x591f4f(0x182)]=!![],_0x4e2f69[_0x591f4f(0x18c)]=this[_0x591f4f(0x18c)],_0x4e2f69;}async[a105_0x5da701(0x18b)](){const _0x2c61c5=a105_0x5da701,_0x221fed=await this[_0x2c61c5(0x169)]['getRemoteStateAttachmentId'](this[_0x2c61c5(0x1a1)]),_0x1a71c8=await this[_0x2c61c5(0x160)]['retrieveAttachment'](_0x221fed)[_0x2c61c5(0x153)](_0x58a875=>typeof _0x58a875===_0x2c61c5(0x180)?JSON[_0x2c61c5(0x168)](_0x58a875):_0x58a875)[_0x2c61c5(0x17f)](()=>({}));if(_0x1a71c8[this[_0x2c61c5(0x16c)][_0x2c61c5(0x19c)]]){if(_0x1a71c8[this[_0x2c61c5(0x16c)][_0x2c61c5(0x19c)]][_0x2c61c5(0x198)]===this[_0x2c61c5(0x18f)][_0x2c61c5(0x18a)])return!![];}return![];}async['updateLastCommit'](){const _0x34cfb3=a105_0x5da701,_0x46f660=await this['repository'][_0x34cfb3(0x15d)][_0x34cfb3(0x159)](this[_0x34cfb3(0x18f)][_0x34cfb3(0x17a)]);await this[_0x34cfb3(0x172)][_0x34cfb3(0x16d)](this[_0x34cfb3(0x16b)]+'\x20Update\x20remote\x20state.');const _0x1d4c21={[this[_0x34cfb3(0x16c)][_0x34cfb3(0x19c)]]:{'lastCommit':_0x46f660[_0x34cfb3(0x18a)]}};await this[_0x34cfb3(0x169)]['updateRemoteState'](this[_0x34cfb3(0x1a1)],_0x1d4c21);}async[a105_0x5da701(0x163)]({syncRecord:_0x4a2d41,repository:_0x290dea,convertToSFDX:_0x1ab3f0,provider:_0x20642a}){const _0x397bb8=a105_0x5da701;this[_0x397bb8(0x1a1)]=_0x4a2d41,this['provider']=_0x20642a,this[_0x397bb8(0x16c)]=_0x290dea,this[_0x397bb8(0x172)]=typedi_1['Container'][_0x397bb8(0x195)](salesforce_logger_v3_service_1[_0x397bb8(0x15a)]),this['prefix']=_0x397bb8(0x170)+this['syncData'][_0x397bb8(0x16e)]+_0x397bb8(0x176)+this['syncData'][_0x397bb8(0x19a)]+']';try{await this['sfLogger'][_0x397bb8(0x16d)](this[_0x397bb8(0x16b)]+_0x397bb8(0x175))[_0x397bb8(0x165)](),await this['salesforceSync'][_0x397bb8(0x19e)](this[_0x397bb8(0x1a1)],_0x397bb8(0x18d)),this[_0x397bb8(0x172)][_0x397bb8(0x16d)](this[_0x397bb8(0x16b)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x397bb8(0x197)](),await this[_0x397bb8(0x172)]['log'](this[_0x397bb8(0x16b)]+_0x397bb8(0x17c))['send']();const _0x5df4a7=await this[_0x397bb8(0x18b)]();this[_0x397bb8(0x172)][_0x397bb8(0x16d)](this['prefix']+'\x20Sync\x20status\x20'+_0x5df4a7+'.');if(_0x5df4a7){await this[_0x397bb8(0x169)][_0x397bb8(0x19e)](this[_0x397bb8(0x1a1)],'Completed'),await this[_0x397bb8(0x172)]['log'](this[_0x397bb8(0x16b)]+'\x20Branch\x20synchronized.\x20Skip')[_0x397bb8(0x165)]();return;}const _0x4083ae=await this['getCommitDto'](_0x1ab3f0);await this['commitJob'][_0x397bb8(0x163)](_0x4083ae,this[_0x397bb8(0x16b)]),await this[_0x397bb8(0x169)]['setStatus'](this[_0x397bb8(0x1a1)],_0x397bb8(0x173)),await this['updateLastCommit'](),this[_0x397bb8(0x172)]['log'](this['prefix']+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x43a0ca){throw _0x43a0ca;}finally{await this[_0x397bb8(0x172)][_0x397bb8(0x165)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a105_0x5da701(0x17d),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a105_0x5da701(0x166)],commit_components_job_1[a105_0x5da701(0x17b)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;