const a125_0x3aa002=a125_0x1806;(function(_0x28df1a,_0x586f59){const _0x16085a=a125_0x1806,_0x1592ae=_0x28df1a();while(!![]){try{const _0x381797=-parseInt(_0x16085a(0xe2))/0x1*(-parseInt(_0x16085a(0x10d))/0x2)+-parseInt(_0x16085a(0xd8))/0x3+-parseInt(_0x16085a(0x11b))/0x4*(parseInt(_0x16085a(0xfa))/0x5)+-parseInt(_0x16085a(0x10a))/0x6+-parseInt(_0x16085a(0x123))/0x7+-parseInt(_0x16085a(0xdb))/0x8+parseInt(_0x16085a(0x120))/0x9*(parseInt(_0x16085a(0x116))/0xa);if(_0x381797===_0x586f59)break;else _0x1592ae['push'](_0x1592ae['shift']());}catch(_0x2244ed){_0x1592ae['push'](_0x1592ae['shift']());}}}(a125_0x25b2,0xa407d));const a125_0x2ad97a=(function(){let _0x465bf7=!![];return function(_0x310864,_0x237e08){const _0x229b18=_0x465bf7?function(){const _0x716049=a125_0x1806;if(_0x237e08){const _0x469dd7=_0x237e08[_0x716049(0xeb)](_0x310864,arguments);return _0x237e08=null,_0x469dd7;}}:function(){};return _0x465bf7=![],_0x229b18;};}()),a125_0x35110e=a125_0x2ad97a(this,function(){const _0x1c3f62=a125_0x1806;return a125_0x35110e['toString']()['search'](_0x1c3f62(0x122))[_0x1c3f62(0xe5)]()[_0x1c3f62(0x101)](a125_0x35110e)[_0x1c3f62(0x11f)](_0x1c3f62(0x122));});a125_0x35110e();'use strict';function a125_0x1806(_0x2fe10f,_0x50342d){const _0x4b9c5b=a125_0x25b2();return a125_0x1806=function(_0x35110e,_0x2ad97a){_0x35110e=_0x35110e-0xcd;let _0x25b229=_0x4b9c5b[_0x35110e];return _0x25b229;},a125_0x1806(_0x2fe10f,_0x50342d);}var __decorate=this&&this[a125_0x3aa002(0xf0)]||function(_0xb9bf2a,_0x4c70b9,_0x4cfd34,_0x411161){const _0x682d0b=a125_0x3aa002;var _0x74ed2a=arguments['length'],_0x4a79fa=_0x74ed2a<0x3?_0x4c70b9:_0x411161===null?_0x411161=Object[_0x682d0b(0x104)](_0x4c70b9,_0x4cfd34):_0x411161,_0x45b1c9;if(typeof Reflect===_0x682d0b(0xda)&&typeof Reflect[_0x682d0b(0xfe)]===_0x682d0b(0xef))_0x4a79fa=Reflect[_0x682d0b(0xfe)](_0xb9bf2a,_0x4c70b9,_0x4cfd34,_0x411161);else{for(var _0x30496f=_0xb9bf2a[_0x682d0b(0x105)]-0x1;_0x30496f>=0x0;_0x30496f--)if(_0x45b1c9=_0xb9bf2a[_0x30496f])_0x4a79fa=(_0x74ed2a<0x3?_0x45b1c9(_0x4a79fa):_0x74ed2a>0x3?_0x45b1c9(_0x4c70b9,_0x4cfd34,_0x4a79fa):_0x45b1c9(_0x4c70b9,_0x4cfd34))||_0x4a79fa;}return _0x74ed2a>0x3&&_0x4a79fa&&Object[_0x682d0b(0xd1)](_0x4c70b9,_0x4cfd34,_0x4a79fa),_0x4a79fa;},__metadata=this&&this[a125_0x3aa002(0xde)]||function(_0x207db8,_0x12e79b){const _0x2ea3d3=a125_0x3aa002;if(typeof Reflect===_0x2ea3d3(0xda)&&typeof Reflect[_0x2ea3d3(0x10c)]===_0x2ea3d3(0xef))return Reflect['metadata'](_0x207db8,_0x12e79b);};Object[a125_0x3aa002(0xd1)](exports,a125_0x3aa002(0x110),{'value':!![]}),exports[a125_0x3aa002(0xfb)]=void 0x0;const salesforce_logger_v3_service_1=require(a125_0x3aa002(0xe3)),typedi_1=require(a125_0x3aa002(0xee)),constants_1=require(a125_0x3aa002(0xfc)),salesforce_retriever_service_1=require(a125_0x3aa002(0x11c)),salesforce_sync_service_1=require(a125_0x3aa002(0xd2)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a125_0x3aa002(0xf4)),commit_components_job_1=require(a125_0x3aa002(0x113));function a125_0x25b2(){const _0x17daa3=['function','__decorate','branches','setStatus','\x20Update\x20remote\x20state.','../dto/commit-components.dto','run','repositoryId','Completed','commitJob','send','1240QVBZmO','FlosumSyncJob','../../../../constants','branchId','decorate','user','branchName','constructor','syncData','CommitComponentsDto','getOwnPropertyDescriptor','length','prefix','salesforceService','convertToSFDX','force','4170900Kbgnmo','design:paramtypes','metadata','2WojFtn','SalesforceLogger3','getRemoteStateAttachmentId','__esModule','\x20Start\x20Flosum\x20sync\x20job','DEFAULT_GIT_USER_NAME','./commit-components.job','updateRemoteState','\x20Flosum\x20sync\x20job\x20done.','10Glzmif','gitUrl','getOne','checkSyncStatus','sfLogger','4132aLfWyX','../../salesforce/services/salesforce-retriever.service','name','getCommitDto','search','35191206CZlUuU','Sync\x20repository','(((.+)+)+)+$','6083336dhjxok','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','SalesforceSyncService','provider','log','Container','defineProperty','../../salesforce/services/salesforce-sync.service','salesforceSync',']\x20[Branch:\x20','parse','then','repository','3347838ojKviV','branch','object','7335992onbSWd','createBranchIfNotExists','getComponentIds','__metadata','lastCommit','\x20Checking\x20sync\x20status.','repo','615062rIqNWD','../../salesforce/services/salesforce-logger-v3.service','components','toString','getComponentsFromRepository','get','repositoryName','DEFAULT_GIT_USER_EMAIL','catch','apply','updateLastCommit','\x20Checking\x20repository\x20on\x20Flosum\x20side.','typedi'];a125_0x25b2=function(){return _0x17daa3;};return a125_0x25b2();}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x35ba67,_0x650b8e,_0x55d2a3){const _0x12a3e7=a125_0x3aa002;this['salesforceSync']=_0x35ba67,this[_0x12a3e7(0x107)]=_0x650b8e,this[_0x12a3e7(0xf8)]=_0x55d2a3;}async[a125_0x3aa002(0xdc)](){const _0x2a315c=a125_0x3aa002;let _0x2451f9=await this[_0x2a315c(0xd7)][_0x2a315c(0xf1)][_0x2a315c(0x118)](this[_0x2a315c(0x102)][_0x2a315c(0x100)])[_0x2a315c(0xea)](()=>null);!_0x2451f9&&(_0x2451f9=await this['repository'][_0x2a315c(0xf1)]['create']({'name':this[_0x2a315c(0x102)][_0x2a315c(0x100)]})),this['branch']=_0x2451f9;}async[a125_0x3aa002(0xdd)](){const _0x4a1ed2=a125_0x3aa002;return this[_0x4a1ed2(0x102)][_0x4a1ed2(0xf6)]?this[_0x4a1ed2(0xd3)][_0x4a1ed2(0xe6)](this[_0x4a1ed2(0x102)]['repositoryId']):this[_0x4a1ed2(0xd3)]['getBranchComponents'](this['syncData'][_0x4a1ed2(0xfd)]);}async['getComponents'](){const _0x52ceb3=a125_0x3aa002,_0x1f174a=await this[_0x52ceb3(0xdd)](),_0x306e49=new salesforce_retriever_service_1['SalesforceRetrieverService'](this['salesforceService']),_0x18fe07=await _0x306e49['run'](_0x1f174a);return _0x18fe07;}async[a125_0x3aa002(0x11e)](_0x11126d){const _0x4fdea0=a125_0x3aa002,_0x2ff6ce=new commit_components_dto_1[(_0x4fdea0(0x103))]();return _0x2ff6ce['message']=_0x4fdea0(0x121),_0x2ff6ce[_0x4fdea0(0xff)]={'name':constants_1[_0x4fdea0(0x112)],'email':constants_1[_0x4fdea0(0xe9)]},_0x2ff6ce[_0x4fdea0(0xe4)]={'writed':await this['getComponents']()},_0x2ff6ce[_0x4fdea0(0x108)]=_0x11126d,_0x2ff6ce[_0x4fdea0(0xe1)]=this['repository'],_0x2ff6ce[_0x4fdea0(0xd9)]=this[_0x4fdea0(0xd9)],_0x2ff6ce[_0x4fdea0(0x109)]=!![],_0x2ff6ce['provider']=this[_0x4fdea0(0xce)],_0x2ff6ce['recordType']=this[_0x4fdea0(0x102)]['recordTypeName'],_0x2ff6ce;}async['checkSyncStatus'](){const _0x48e0a9=a125_0x3aa002,_0x2068b6=await this[_0x48e0a9(0xd3)][_0x48e0a9(0x10f)](this['syncData']),_0x1c08e2=await this[_0x48e0a9(0x107)]['retrieveAttachment'](_0x2068b6)[_0x48e0a9(0xd6)](_0x425fbf=>typeof _0x425fbf==='string'?JSON[_0x48e0a9(0xd5)](_0x425fbf):_0x425fbf)[_0x48e0a9(0xea)](()=>({}));if(_0x1c08e2[this['repository'][_0x48e0a9(0x117)]]){if(_0x1c08e2[this['repository'][_0x48e0a9(0x117)]][_0x48e0a9(0xdf)]===this[_0x48e0a9(0xd9)]['sha'])return!![];}return![];}async[a125_0x3aa002(0xec)](){const _0x25250b=a125_0x3aa002,_0x495074=await this[_0x25250b(0xd7)][_0x25250b(0xf1)][_0x25250b(0x118)](this['branch'][_0x25250b(0x11d)]);await this[_0x25250b(0x11a)][_0x25250b(0xcf)](this[_0x25250b(0x106)]+_0x25250b(0xf3));const _0x371437={[this[_0x25250b(0xd7)][_0x25250b(0x117)]]:{'lastCommit':_0x495074['sha']}};await this[_0x25250b(0xd3)][_0x25250b(0x114)](this[_0x25250b(0x102)],_0x371437);}async['run']({syncRecord:_0x477a18,repository:_0x189394,convertToSFDX:_0x497e84,provider:_0x669fb8}){const _0x25e31c=a125_0x3aa002;this[_0x25e31c(0x102)]=_0x477a18,this[_0x25e31c(0xce)]=_0x669fb8,this[_0x25e31c(0xd7)]=_0x189394,this['sfLogger']=typedi_1[_0x25e31c(0xd0)][_0x25e31c(0xe7)](salesforce_logger_v3_service_1[_0x25e31c(0x10e)]),this[_0x25e31c(0x106)]=_0x25e31c(0x124)+this[_0x25e31c(0x102)][_0x25e31c(0xe8)]+_0x25e31c(0xd4)+this[_0x25e31c(0x102)][_0x25e31c(0x100)]+']';try{await this[_0x25e31c(0x11a)][_0x25e31c(0xcf)](this[_0x25e31c(0x106)]+_0x25e31c(0x111))[_0x25e31c(0xf9)](),await this[_0x25e31c(0xd3)][_0x25e31c(0xf2)](this[_0x25e31c(0x102)],'In\x20Progress'),this['sfLogger'][_0x25e31c(0xcf)](this['prefix']+_0x25e31c(0xed)),await this[_0x25e31c(0xdc)](),await this[_0x25e31c(0x11a)][_0x25e31c(0xcf)](this[_0x25e31c(0x106)]+_0x25e31c(0xe0))['send']();const _0x264f2e=await this[_0x25e31c(0x119)]();this[_0x25e31c(0x11a)]['log'](this['prefix']+'\x20Sync\x20status\x20'+_0x264f2e+'.');if(_0x264f2e){await this['salesforceSync'][_0x25e31c(0xf2)](this[_0x25e31c(0x102)],'Completed'),await this['sfLogger'][_0x25e31c(0xcf)](this[_0x25e31c(0x106)]+'\x20Branch\x20synchronized.\x20Skip')[_0x25e31c(0xf9)]();return;}const _0x5aaf19=await this[_0x25e31c(0x11e)](_0x497e84);await this[_0x25e31c(0xf8)][_0x25e31c(0xf5)](_0x5aaf19,this[_0x25e31c(0x106)]),await this[_0x25e31c(0xd3)][_0x25e31c(0xf2)](this[_0x25e31c(0x102)],_0x25e31c(0xf7)),await this['updateLastCommit'](),this[_0x25e31c(0x11a)][_0x25e31c(0xcf)](this[_0x25e31c(0x106)]+_0x25e31c(0x115));}catch(_0x2ba1f5){throw _0x2ba1f5;}finally{await this[_0x25e31c(0x11a)][_0x25e31c(0xf9)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a125_0x3aa002(0x10b),[salesforce_sync_service_1[a125_0x3aa002(0xcd)],salesforce_service_1['SalesforceService'],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports[a125_0x3aa002(0xfb)]=FlosumSyncJob;