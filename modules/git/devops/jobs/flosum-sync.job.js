const a105_0x584099=a105_0x5ba3;function a105_0x5ba3(_0xadc00f,_0x251623){const _0x279bb3=a105_0x32b8();return a105_0x5ba3=function(_0x20a2f8,_0x30e69){_0x20a2f8=_0x20a2f8-0x70;let _0x32b81a=_0x279bb3[_0x20a2f8];return _0x32b81a;},a105_0x5ba3(_0xadc00f,_0x251623);}(function(_0x4a3b82,_0x5e3b60){const _0x39422d=a105_0x5ba3,_0x1d957e=_0x4a3b82();while(!![]){try{const _0x421fe8=-parseInt(_0x39422d(0xb3))/0x1+-parseInt(_0x39422d(0xb7))/0x2*(-parseInt(_0x39422d(0xc7))/0x3)+parseInt(_0x39422d(0x70))/0x4*(parseInt(_0x39422d(0xab))/0x5)+-parseInt(_0x39422d(0x85))/0x6*(parseInt(_0x39422d(0x74))/0x7)+parseInt(_0x39422d(0x9b))/0x8*(-parseInt(_0x39422d(0x92))/0x9)+parseInt(_0x39422d(0xc6))/0xa+parseInt(_0x39422d(0x87))/0xb;if(_0x421fe8===_0x5e3b60)break;else _0x1d957e['push'](_0x1d957e['shift']());}catch(_0x2a0d0e){_0x1d957e['push'](_0x1d957e['shift']());}}}(a105_0x32b8,0x90a26));function a105_0x32b8(){const _0x168008=['./commit-components.job','lastCommit','branches','Completed','In\x20Progress','../dto/commit-components.dto','defineProperty','17230WSIamz','convertToSFDX','retrieveAttachment','CommitComponentsJob','sfLogger','SalesforceService','run',']\x20[Branch:\x20','974466LCjzmg','object','\x20Checking\x20repository\x20on\x20Flosum\x20side.','\x20Sync\x20status\x20','8RAnmYr','sha','provider','search','then','length','__metadata','gitUrl','user','createBranchIfNotExists','commitJob','salesforceSync','checkSyncStatus','typedi','syncData','238200BRqXVP','640038GqfooM','repo','constructor','1136YEZQFm','\x20Flosum\x20sync\x20job\x20done.','message','branchId','14dVXSqP','updateRemoteState','getOwnPropertyDescriptor','\x20Start\x20Flosum\x20sync\x20job','getRemoteStateAttachmentId','metadata','(((.+)+)+)+$','../../salesforce/services/salesforce.service','parse','name','updateLastCommit','repository','catch','repositoryId','log','components','getComponentsFromRepository','2324094PdqKlk','branchName','9628542UdtHUl','DEFAULT_GIT_USER_EMAIL','DEFAULT_GIT_USER_NAME','repositoryName','function','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','salesforceService','CommitComponentsDto','getOne','prefix','getComponents','3506436JOfOAm','FlosumSyncJob','../../salesforce/services/salesforce-retriever.service','send','get','\x20Branch\x20synchronized.\x20Skip','../../salesforce/services/salesforce-logger-v3.service','setStatus','decorate','8MGtVpE','branch','getComponentIds','getCommitDto','toString','\x20Update\x20remote\x20state.','\x20Checking\x20sync\x20status.','../../../../constants','SalesforceRetrieverService'];a105_0x32b8=function(){return _0x168008;};return a105_0x32b8();}const a105_0x30e69=(function(){let _0x2bd9a6=!![];return function(_0x3f7992,_0x31c0e8){const _0x451ac9=_0x2bd9a6?function(){if(_0x31c0e8){const _0x546ed6=_0x31c0e8['apply'](_0x3f7992,arguments);return _0x31c0e8=null,_0x546ed6;}}:function(){};return _0x2bd9a6=![],_0x451ac9;};}()),a105_0x20a2f8=a105_0x30e69(this,function(){const _0x200de3=a105_0x5ba3;return a105_0x20a2f8[_0x200de3(0x9f)]()[_0x200de3(0xba)]('(((.+)+)+)+$')[_0x200de3(0x9f)]()[_0x200de3(0xc9)](a105_0x20a2f8)[_0x200de3(0xba)](_0x200de3(0x7a));});a105_0x20a2f8();'use strict';var __decorate=this&&this['__decorate']||function(_0x1199ee,_0x5e2355,_0x241e85,_0x390ec8){const _0x7716cc=a105_0x5ba3;var _0x123b64=arguments[_0x7716cc(0xbc)],_0x4fc360=_0x123b64<0x3?_0x5e2355:_0x390ec8===null?_0x390ec8=Object[_0x7716cc(0x76)](_0x5e2355,_0x241e85):_0x390ec8,_0xc53466;if(typeof Reflect===_0x7716cc(0xb4)&&typeof Reflect[_0x7716cc(0x9a)]==='function')_0x4fc360=Reflect[_0x7716cc(0x9a)](_0x1199ee,_0x5e2355,_0x241e85,_0x390ec8);else{for(var _0x37094b=_0x1199ee[_0x7716cc(0xbc)]-0x1;_0x37094b>=0x0;_0x37094b--)if(_0xc53466=_0x1199ee[_0x37094b])_0x4fc360=(_0x123b64<0x3?_0xc53466(_0x4fc360):_0x123b64>0x3?_0xc53466(_0x5e2355,_0x241e85,_0x4fc360):_0xc53466(_0x5e2355,_0x241e85))||_0x4fc360;}return _0x123b64>0x3&&_0x4fc360&&Object[_0x7716cc(0xaa)](_0x5e2355,_0x241e85,_0x4fc360),_0x4fc360;},__metadata=this&&this[a105_0x584099(0xbd)]||function(_0x137daa,_0x2c5b29){const _0x164245=a105_0x584099;if(typeof Reflect===_0x164245(0xb4)&&typeof Reflect[_0x164245(0x79)]===_0x164245(0x8b))return Reflect[_0x164245(0x79)](_0x137daa,_0x2c5b29);};Object[a105_0x584099(0xaa)](exports,'__esModule',{'value':!![]}),exports[a105_0x584099(0x93)]=void 0x0;const salesforce_logger_v3_service_1=require(a105_0x584099(0x98)),typedi_1=require(a105_0x584099(0xc4)),constants_1=require(a105_0x584099(0xa2)),salesforce_retriever_service_1=require(a105_0x584099(0x94)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a105_0x584099(0x7b)),commit_components_dto_1=require(a105_0x584099(0xa9)),commit_components_job_1=require(a105_0x584099(0xa4));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x440f42,_0xb9db09,_0x3c6eca){const _0x37b25a=a105_0x584099;this['salesforceSync']=_0x440f42,this[_0x37b25a(0x8d)]=_0xb9db09,this[_0x37b25a(0xc1)]=_0x3c6eca;}async['createBranchIfNotExists'](){const _0x30b2e2=a105_0x584099;let _0x5efd72=await this['repository'][_0x30b2e2(0xa6)][_0x30b2e2(0x8f)](this[_0x30b2e2(0xc5)]['branchName'])['catch'](()=>null);!_0x5efd72&&(_0x5efd72=await this[_0x30b2e2(0x7f)][_0x30b2e2(0xa6)]['create']({'name':this['syncData'][_0x30b2e2(0x86)]})),this['branch']=_0x5efd72;}async[a105_0x584099(0x9d)](){const _0x371f83=a105_0x584099;return this[_0x371f83(0xc5)][_0x371f83(0x81)]?this[_0x371f83(0xc2)][_0x371f83(0x84)](this[_0x371f83(0xc5)]['repositoryId']):this[_0x371f83(0xc2)]['getBranchComponents'](this[_0x371f83(0xc5)][_0x371f83(0x73)]);}async[a105_0x584099(0x91)](){const _0x257d6f=a105_0x584099,_0x2228ed=await this['getComponentIds'](),_0x500775=new salesforce_retriever_service_1[(_0x257d6f(0xa3))](this['salesforceService']),_0xcca8f1=await _0x500775['run'](_0x2228ed);return _0xcca8f1;}async[a105_0x584099(0x9e)](_0x59c153){const _0x52317b=a105_0x584099,_0x5cd6dc=new commit_components_dto_1[(_0x52317b(0x8e))]();return _0x5cd6dc[_0x52317b(0x72)]='Sync\x20repository',_0x5cd6dc[_0x52317b(0xbf)]={'name':constants_1[_0x52317b(0x89)],'email':constants_1[_0x52317b(0x88)]},_0x5cd6dc[_0x52317b(0x83)]={'writed':await this[_0x52317b(0x91)]()},_0x5cd6dc[_0x52317b(0xac)]=_0x59c153,_0x5cd6dc[_0x52317b(0xc8)]=this[_0x52317b(0x7f)],_0x5cd6dc['branch']=this[_0x52317b(0x9c)],_0x5cd6dc['force']=!![],_0x5cd6dc[_0x52317b(0xb9)]=this[_0x52317b(0xb9)],_0x5cd6dc;}async[a105_0x584099(0xc3)](){const _0xc20935=a105_0x584099,_0x24186c=await this[_0xc20935(0xc2)][_0xc20935(0x78)](this['syncData']),_0x4918bb=await this[_0xc20935(0x8d)][_0xc20935(0xad)](_0x24186c)[_0xc20935(0xbb)](_0x29c703=>typeof _0x29c703==='string'?JSON[_0xc20935(0x7c)](_0x29c703):_0x29c703)[_0xc20935(0x80)](()=>({}));if(_0x4918bb[this['repository']['gitUrl']]){if(_0x4918bb[this[_0xc20935(0x7f)][_0xc20935(0xbe)]][_0xc20935(0xa5)]===this[_0xc20935(0x9c)][_0xc20935(0xb8)])return!![];}return![];}async[a105_0x584099(0x7e)](){const _0xd9121a=a105_0x584099,_0x6d3dc=await this[_0xd9121a(0x7f)][_0xd9121a(0xa6)][_0xd9121a(0x8f)](this[_0xd9121a(0x9c)][_0xd9121a(0x7d)]);await this['sfLogger'][_0xd9121a(0x82)](this[_0xd9121a(0x90)]+_0xd9121a(0xa0));const _0x2a6b14={[this[_0xd9121a(0x7f)][_0xd9121a(0xbe)]]:{'lastCommit':_0x6d3dc[_0xd9121a(0xb8)]}};await this[_0xd9121a(0xc2)][_0xd9121a(0x75)](this['syncData'],_0x2a6b14);}async['run']({syncRecord:_0x53e1ea,repository:_0x29ed42,convertToSFDX:_0x27f4e3,provider:_0x35aa9e}){const _0x5e1894=a105_0x584099;this[_0x5e1894(0xc5)]=_0x53e1ea,this['provider']=_0x35aa9e,this[_0x5e1894(0x7f)]=_0x29ed42,this[_0x5e1894(0xaf)]=typedi_1['Container'][_0x5e1894(0x96)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x5e1894(0x90)]=_0x5e1894(0x8c)+this[_0x5e1894(0xc5)][_0x5e1894(0x8a)]+_0x5e1894(0xb2)+this[_0x5e1894(0xc5)]['branchName']+']';try{await this['sfLogger'][_0x5e1894(0x82)](this[_0x5e1894(0x90)]+_0x5e1894(0x77))['send'](),await this[_0x5e1894(0xc2)][_0x5e1894(0x99)](this[_0x5e1894(0xc5)],_0x5e1894(0xa8)),this[_0x5e1894(0xaf)][_0x5e1894(0x82)](this[_0x5e1894(0x90)]+_0x5e1894(0xb5)),await this[_0x5e1894(0xc0)](),await this[_0x5e1894(0xaf)][_0x5e1894(0x82)](this[_0x5e1894(0x90)]+_0x5e1894(0xa1))[_0x5e1894(0x95)]();const _0x3e9856=await this[_0x5e1894(0xc3)]();this[_0x5e1894(0xaf)]['log'](this[_0x5e1894(0x90)]+_0x5e1894(0xb6)+_0x3e9856+'.');if(_0x3e9856){await this[_0x5e1894(0xc2)]['setStatus'](this[_0x5e1894(0xc5)],_0x5e1894(0xa7)),await this[_0x5e1894(0xaf)][_0x5e1894(0x82)](this[_0x5e1894(0x90)]+_0x5e1894(0x97))['send']();return;}const _0x1a1d3c=await this[_0x5e1894(0x9e)](_0x27f4e3);await this[_0x5e1894(0xc1)][_0x5e1894(0xb1)](_0x1a1d3c,this[_0x5e1894(0x90)]),await this[_0x5e1894(0xc2)][_0x5e1894(0x99)](this['syncData'],_0x5e1894(0xa7)),await this['updateLastCommit'](),this[_0x5e1894(0xaf)][_0x5e1894(0x82)](this['prefix']+_0x5e1894(0x71));}catch(_0x1584dc){throw _0x1584dc;}finally{await this['sfLogger'][_0x5e1894(0x95)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a105_0x584099(0xb0)],commit_components_job_1[a105_0x584099(0xae)]])],FlosumSyncJob),exports[a105_0x584099(0x93)]=FlosumSyncJob;