const a106_0x245c67=a106_0x55fc;(function(_0x5442ff,_0x4b6993){const _0x1f4f95=a106_0x55fc,_0x4d482d=_0x5442ff();while(!![]){try{const _0x341357=-parseInt(_0x1f4f95(0x1b7))/0x1+parseInt(_0x1f4f95(0x1ae))/0x2*(parseInt(_0x1f4f95(0x199))/0x3)+-parseInt(_0x1f4f95(0x1b2))/0x4+parseInt(_0x1f4f95(0x193))/0x5*(-parseInt(_0x1f4f95(0x186))/0x6)+parseInt(_0x1f4f95(0x19a))/0x7*(parseInt(_0x1f4f95(0x1be))/0x8)+-parseInt(_0x1f4f95(0x1cd))/0x9*(parseInt(_0x1f4f95(0x17d))/0xa)+parseInt(_0x1f4f95(0x1ce))/0xb;if(_0x341357===_0x4b6993)break;else _0x4d482d['push'](_0x4d482d['shift']());}catch(_0x4d96dd){_0x4d482d['push'](_0x4d482d['shift']());}}}(a106_0x1446,0xcacee));const a106_0x165c38=(function(){let _0x368a20=!![];return function(_0x43a62b,_0x14d842){const _0x41b8c7=_0x368a20?function(){const _0x330cbd=a106_0x55fc;if(_0x14d842){const _0x24f466=_0x14d842[_0x330cbd(0x198)](_0x43a62b,arguments);return _0x14d842=null,_0x24f466;}}:function(){};return _0x368a20=![],_0x41b8c7;};}()),a106_0x55aeee=a106_0x165c38(this,function(){const _0x1ff8f6=a106_0x55fc;return a106_0x55aeee['toString']()[_0x1ff8f6(0x19e)]('(((.+)+)+)+$')[_0x1ff8f6(0x1a5)]()[_0x1ff8f6(0x185)](a106_0x55aeee)[_0x1ff8f6(0x19e)](_0x1ff8f6(0x1ba));});a106_0x55aeee();function a106_0x1446(){const _0x454ffd=['2613768IIwhDt','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','decorate','updateRemoteState','name','parse','force','repository','../../../../constants','../dto/commit-components.dto','getRemoteStateAttachmentId','createBranchIfNotExists','metadata','then','__esModule','420777BdJeEL','31619951eMsQLL','setStatus','salesforceSync','prefix','Service','SalesforceRetrieverService','run','provider','create','\x20Start\x20Flosum\x20sync\x20job','lastCommit','catch','getCommitDto','50HyEYUx','\x20Sync\x20status\x20','log','SalesforceLogger3','DEFAULT_GIT_USER_NAME','SalesforceService','salesforceService','length','constructor','6Dnvgue','get','components','commitJob','__decorate','getComponents','./commit-components.job','CommitComponentsJob','branchId','FlosumSyncJob','gitUrl','sfLogger','message','6206515jccxvA','getBranchComponents',']\x20[Branch:\x20','defineProperty','branches','apply','7821tbNUKF','21wkXaFZ','string','user','checkSyncStatus','search','DEFAULT_GIT_USER_EMAIL','Completed','../../salesforce/services/salesforce-retriever.service','../../salesforce/services/salesforce.service','__metadata','sha','toString','typedi','CommitComponentsDto','\x20Checking\x20sync\x20status.','getComponentsFromRepository','branch','syncData','function','convertToSFDX','146QKvfFT','getComponentIds','\x20Branch\x20synchronized.\x20Skip','design:paramtypes','424712xxqDEu','SalesforceSyncService','send','../../salesforce/services/salesforce-sync.service','branchName','1633067RmsDTt','updateLastCommit','object','(((.+)+)+)+$','repositoryId','getOne','\x20Checking\x20repository\x20on\x20Flosum\x20side.'];a106_0x1446=function(){return _0x454ffd;};return a106_0x1446();}'use strict';var __decorate=this&&this[a106_0x245c67(0x18a)]||function(_0x4260f1,_0x1b4a69,_0x433f94,_0x391157){const _0x4bd39e=a106_0x245c67;var _0x1981b2=arguments[_0x4bd39e(0x184)],_0x2f3894=_0x1981b2<0x3?_0x1b4a69:_0x391157===null?_0x391157=Object['getOwnPropertyDescriptor'](_0x1b4a69,_0x433f94):_0x391157,_0x8e61fe;if(typeof Reflect===_0x4bd39e(0x1b9)&&typeof Reflect[_0x4bd39e(0x1c0)]===_0x4bd39e(0x1ac))_0x2f3894=Reflect[_0x4bd39e(0x1c0)](_0x4260f1,_0x1b4a69,_0x433f94,_0x391157);else{for(var _0x480ba3=_0x4260f1['length']-0x1;_0x480ba3>=0x0;_0x480ba3--)if(_0x8e61fe=_0x4260f1[_0x480ba3])_0x2f3894=(_0x1981b2<0x3?_0x8e61fe(_0x2f3894):_0x1981b2>0x3?_0x8e61fe(_0x1b4a69,_0x433f94,_0x2f3894):_0x8e61fe(_0x1b4a69,_0x433f94))||_0x2f3894;}return _0x1981b2>0x3&&_0x2f3894&&Object[_0x4bd39e(0x196)](_0x1b4a69,_0x433f94,_0x2f3894),_0x2f3894;},__metadata=this&&this[a106_0x245c67(0x1a3)]||function(_0x2dece0,_0x5cb726){const _0x3699a5=a106_0x245c67;if(typeof Reflect==='object'&&typeof Reflect[_0x3699a5(0x1ca)]==='function')return Reflect[_0x3699a5(0x1ca)](_0x2dece0,_0x5cb726);};function a106_0x55fc(_0x421d1d,_0x2aaa09){const _0x33d452=a106_0x1446();return a106_0x55fc=function(_0x55aeee,_0x165c38){_0x55aeee=_0x55aeee-0x17c;let _0x14461b=_0x33d452[_0x55aeee];return _0x14461b;},a106_0x55fc(_0x421d1d,_0x2aaa09);}Object[a106_0x245c67(0x196)](exports,a106_0x245c67(0x1cc),{'value':!![]}),exports[a106_0x245c67(0x18f)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a106_0x245c67(0x1a6)),constants_1=require(a106_0x245c67(0x1c6)),salesforce_retriever_service_1=require(a106_0x245c67(0x1a1)),salesforce_sync_service_1=require(a106_0x245c67(0x1b5)),salesforce_service_1=require(a106_0x245c67(0x1a2)),commit_components_dto_1=require(a106_0x245c67(0x1c7)),commit_components_job_1=require(a106_0x245c67(0x18c));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x266aac,_0x4dba42,_0xbb870c){const _0x295071=a106_0x245c67;this[_0x295071(0x1d0)]=_0x266aac,this['salesforceService']=_0x4dba42,this[_0x295071(0x189)]=_0xbb870c;}async['createBranchIfNotExists'](){const _0x34a2a0=a106_0x245c67;let _0x347b4f=await this[_0x34a2a0(0x1c5)]['branches'][_0x34a2a0(0x1bc)](this[_0x34a2a0(0x1ab)][_0x34a2a0(0x1b6)])[_0x34a2a0(0x1d9)](()=>null);!_0x347b4f&&(_0x347b4f=await this[_0x34a2a0(0x1c5)][_0x34a2a0(0x197)][_0x34a2a0(0x1d6)]({'name':this['syncData'][_0x34a2a0(0x1b6)]})),this[_0x34a2a0(0x1aa)]=_0x347b4f;}async[a106_0x245c67(0x1af)](){const _0x517438=a106_0x245c67;return this[_0x517438(0x1ab)][_0x517438(0x1bb)]?this[_0x517438(0x1d0)][_0x517438(0x1a9)](this[_0x517438(0x1ab)]['repositoryId']):this[_0x517438(0x1d0)][_0x517438(0x194)](this['syncData'][_0x517438(0x18e)]);}async[a106_0x245c67(0x18b)](){const _0xc6b48d=a106_0x245c67,_0x368b77=await this[_0xc6b48d(0x1af)](),_0x4ca3da=new salesforce_retriever_service_1[(_0xc6b48d(0x1d3))](this[_0xc6b48d(0x183)]),_0x100f92=await _0x4ca3da[_0xc6b48d(0x1d4)](_0x368b77);return _0x100f92;}async[a106_0x245c67(0x17c)](_0x5e6f7a){const _0x8a9206=a106_0x245c67,_0x1d6cf0=new commit_components_dto_1[(_0x8a9206(0x1a7))]();return _0x1d6cf0[_0x8a9206(0x192)]='Sync\x20repository',_0x1d6cf0[_0x8a9206(0x19c)]={'name':constants_1[_0x8a9206(0x181)],'email':constants_1[_0x8a9206(0x19f)]},_0x1d6cf0[_0x8a9206(0x188)]={'writed':await this[_0x8a9206(0x18b)]()},_0x1d6cf0[_0x8a9206(0x1ad)]=_0x5e6f7a,_0x1d6cf0['repo']=this[_0x8a9206(0x1c5)],_0x1d6cf0[_0x8a9206(0x1aa)]=this[_0x8a9206(0x1aa)],_0x1d6cf0[_0x8a9206(0x1c4)]=!![],_0x1d6cf0[_0x8a9206(0x1d5)]=this[_0x8a9206(0x1d5)],_0x1d6cf0;}async[a106_0x245c67(0x19d)](){const _0x320091=a106_0x245c67,_0x5d7d4e=await this['salesforceSync'][_0x320091(0x1c8)](this[_0x320091(0x1ab)]),_0x3a5b66=await this['salesforceService']['retrieveAttachment'](_0x5d7d4e)[_0x320091(0x1cb)](_0xeb45=>typeof _0xeb45===_0x320091(0x19b)?JSON[_0x320091(0x1c3)](_0xeb45):_0xeb45)[_0x320091(0x1d9)](()=>({}));if(_0x3a5b66[this[_0x320091(0x1c5)][_0x320091(0x190)]]){if(_0x3a5b66[this[_0x320091(0x1c5)]['gitUrl']][_0x320091(0x1d8)]===this['branch'][_0x320091(0x1a4)])return!![];}return![];}async['updateLastCommit'](){const _0x256701=a106_0x245c67,_0x2dfb50=await this['repository'][_0x256701(0x197)][_0x256701(0x1bc)](this[_0x256701(0x1aa)][_0x256701(0x1c2)]);await this[_0x256701(0x191)]['log'](this[_0x256701(0x1d1)]+'\x20Update\x20remote\x20state.');const _0x3726f6={[this[_0x256701(0x1c5)]['gitUrl']]:{'lastCommit':_0x2dfb50[_0x256701(0x1a4)]}};await this[_0x256701(0x1d0)][_0x256701(0x1c1)](this['syncData'],_0x3726f6);}async[a106_0x245c67(0x1d4)]({syncRecord:_0x34ab14,repository:_0x22cac7,convertToSFDX:_0x3c1bfd,provider:_0x477a5e}){const _0x3ab4b3=a106_0x245c67;this['syncData']=_0x34ab14,this[_0x3ab4b3(0x1d5)]=_0x477a5e,this[_0x3ab4b3(0x1c5)]=_0x22cac7,this[_0x3ab4b3(0x191)]=typedi_1['Container'][_0x3ab4b3(0x187)](salesforce_logger_v3_service_1[_0x3ab4b3(0x180)]),this['prefix']=_0x3ab4b3(0x1bf)+this['syncData']['repositoryName']+_0x3ab4b3(0x195)+this[_0x3ab4b3(0x1ab)][_0x3ab4b3(0x1b6)]+']';try{await this[_0x3ab4b3(0x191)][_0x3ab4b3(0x17f)](this['prefix']+_0x3ab4b3(0x1d7))[_0x3ab4b3(0x1b4)](),await this[_0x3ab4b3(0x1d0)][_0x3ab4b3(0x1cf)](this[_0x3ab4b3(0x1ab)],'In\x20Progress'),this[_0x3ab4b3(0x191)][_0x3ab4b3(0x17f)](this['prefix']+_0x3ab4b3(0x1bd)),await this[_0x3ab4b3(0x1c9)](),await this[_0x3ab4b3(0x191)][_0x3ab4b3(0x17f)](this[_0x3ab4b3(0x1d1)]+_0x3ab4b3(0x1a8))[_0x3ab4b3(0x1b4)]();const _0x305426=await this['checkSyncStatus']();this['sfLogger']['log'](this['prefix']+_0x3ab4b3(0x17e)+_0x305426+'.');if(_0x305426){await this['salesforceSync'][_0x3ab4b3(0x1cf)](this['syncData'],_0x3ab4b3(0x1a0)),await this[_0x3ab4b3(0x191)][_0x3ab4b3(0x17f)](this['prefix']+_0x3ab4b3(0x1b0))['send']();return;}const _0x51ebce=await this[_0x3ab4b3(0x17c)](_0x3c1bfd);await this['commitJob'][_0x3ab4b3(0x1d4)](_0x51ebce,this[_0x3ab4b3(0x1d1)]),await this[_0x3ab4b3(0x1d0)][_0x3ab4b3(0x1cf)](this[_0x3ab4b3(0x1ab)],'Completed'),await this[_0x3ab4b3(0x1b8)](),this['sfLogger'][_0x3ab4b3(0x17f)](this[_0x3ab4b3(0x1d1)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x2b9486){throw _0x2b9486;}finally{await this[_0x3ab4b3(0x191)]['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x245c67(0x1d2)])({'transient':!![]}),__metadata(a106_0x245c67(0x1b1),[salesforce_sync_service_1[a106_0x245c67(0x1b3)],salesforce_service_1[a106_0x245c67(0x182)],commit_components_job_1[a106_0x245c67(0x18d)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;