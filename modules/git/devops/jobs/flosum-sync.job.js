const a75_0x2f6d1c=a75_0x524a;(function(_0x318f4f,_0x4d58bf){const _0x40bb9a=a75_0x524a,_0x543f7e=_0x318f4f();while(!![]){try{const _0x4e29a7=parseInt(_0x40bb9a(0x21e))/0x1+parseInt(_0x40bb9a(0x1f3))/0x2*(-parseInt(_0x40bb9a(0x1ef))/0x3)+parseInt(_0x40bb9a(0x1fa))/0x4+-parseInt(_0x40bb9a(0x1ec))/0x5*(parseInt(_0x40bb9a(0x1e9))/0x6)+-parseInt(_0x40bb9a(0x1e2))/0x7*(-parseInt(_0x40bb9a(0x209))/0x8)+parseInt(_0x40bb9a(0x1e3))/0x9*(-parseInt(_0x40bb9a(0x235))/0xa)+parseInt(_0x40bb9a(0x1ea))/0xb;if(_0x4e29a7===_0x4d58bf)break;else _0x543f7e['push'](_0x543f7e['shift']());}catch(_0x307c14){_0x543f7e['push'](_0x543f7e['shift']());}}}(a75_0x21c3,0xb31de));const a75_0x429032=(function(){let _0x53b1b4=!![];return function(_0x462ad6,_0x124dde){const _0x32d25c=_0x53b1b4?function(){const _0x453c6b=a75_0x524a;if(_0x124dde){const _0x56b56c=_0x124dde[_0x453c6b(0x207)](_0x462ad6,arguments);return _0x124dde=null,_0x56b56c;}}:function(){};return _0x53b1b4=![],_0x32d25c;};}()),a75_0x4fb22b=a75_0x429032(this,function(){const _0x5432c0=a75_0x524a;return a75_0x4fb22b[_0x5432c0(0x1f6)]()[_0x5432c0(0x216)](_0x5432c0(0x1f2))[_0x5432c0(0x1f6)]()[_0x5432c0(0x21d)](a75_0x4fb22b)[_0x5432c0(0x216)]('(((.+)+)+)+$');});a75_0x4fb22b();'use strict';var __decorate=this&&this[a75_0x2f6d1c(0x1f1)]||function(_0x38c6b9,_0x530de6,_0x3cc627,_0x65512d){const _0x52e342=a75_0x2f6d1c;var _0x182bbf=arguments[_0x52e342(0x21f)],_0x1231a3=_0x182bbf<0x3?_0x530de6:_0x65512d===null?_0x65512d=Object['getOwnPropertyDescriptor'](_0x530de6,_0x3cc627):_0x65512d,_0x539417;if(typeof Reflect===_0x52e342(0x1fd)&&typeof Reflect[_0x52e342(0x232)]===_0x52e342(0x1f0))_0x1231a3=Reflect['decorate'](_0x38c6b9,_0x530de6,_0x3cc627,_0x65512d);else{for(var _0x4e0169=_0x38c6b9[_0x52e342(0x21f)]-0x1;_0x4e0169>=0x0;_0x4e0169--)if(_0x539417=_0x38c6b9[_0x4e0169])_0x1231a3=(_0x182bbf<0x3?_0x539417(_0x1231a3):_0x182bbf>0x3?_0x539417(_0x530de6,_0x3cc627,_0x1231a3):_0x539417(_0x530de6,_0x3cc627))||_0x1231a3;}return _0x182bbf>0x3&&_0x1231a3&&Object['defineProperty'](_0x530de6,_0x3cc627,_0x1231a3),_0x1231a3;},__metadata=this&&this['__metadata']||function(_0x4aeefe,_0x20e8e1){const _0x374ba9=a75_0x2f6d1c;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x374ba9(0x1f0))return Reflect[_0x374ba9(0x20d)](_0x4aeefe,_0x20e8e1);};Object[a75_0x2f6d1c(0x20e)](exports,a75_0x2f6d1c(0x1e4),{'value':!![]}),exports[a75_0x2f6d1c(0x22b)]=void 0x0;const salesforce_logger_v3_service_1=require(a75_0x2f6d1c(0x219)),typedi_1=require('typedi'),constants_1=require(a75_0x2f6d1c(0x20c)),salesforce_retriever_service_1=require(a75_0x2f6d1c(0x1f9)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a75_0x2f6d1c(0x228)),commit_components_dto_1=require(a75_0x2f6d1c(0x211)),commit_components_job_1=require(a75_0x2f6d1c(0x205));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x2f1e5b,_0x5e4e75,_0x46ac84){const _0x42dd0f=a75_0x2f6d1c;this[_0x42dd0f(0x1f5)]=_0x2f1e5b,this[_0x42dd0f(0x22a)]=_0x5e4e75,this[_0x42dd0f(0x22e)]=_0x46ac84;}async['createBranchIfNotExists'](){const _0x567c0b=a75_0x2f6d1c;let _0x4d7765=await this['repository'][_0x567c0b(0x202)][_0x567c0b(0x220)](this[_0x567c0b(0x221)][_0x567c0b(0x217)])[_0x567c0b(0x22d)](()=>null);!_0x4d7765&&(_0x4d7765=await this[_0x567c0b(0x215)]['branches'][_0x567c0b(0x21c)]({'name':this[_0x567c0b(0x221)][_0x567c0b(0x217)]})),this[_0x567c0b(0x1fc)]=_0x4d7765;}async[a75_0x2f6d1c(0x1f7)](){const _0x3e4126=a75_0x2f6d1c;return this['syncData'][_0x3e4126(0x230)]?this[_0x3e4126(0x1f5)]['getComponentsFromRepository'](this['syncData'][_0x3e4126(0x230)]):this[_0x3e4126(0x1f5)]['getBranchComponents'](this['syncData'][_0x3e4126(0x1eb)]);}async['getComponents'](){const _0x26fbd3=a75_0x2f6d1c,_0x4a534e=await this[_0x26fbd3(0x1f7)](),_0x194c69=new salesforce_retriever_service_1[(_0x26fbd3(0x236))](this[_0x26fbd3(0x22a)]),_0xd59ce6=await _0x194c69['run'](_0x4a534e);return _0xd59ce6;}async[a75_0x2f6d1c(0x1ed)](_0x352d08){const _0x116d7e=a75_0x2f6d1c,_0x3ec1bd=new commit_components_dto_1[(_0x116d7e(0x225))]();return _0x3ec1bd[_0x116d7e(0x22f)]='Sync\x20repository',_0x3ec1bd['user']={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x3ec1bd['components']={'writed':await this[_0x116d7e(0x203)]()},_0x3ec1bd[_0x116d7e(0x212)]=_0x352d08,_0x3ec1bd[_0x116d7e(0x208)]=this['repository'],_0x3ec1bd[_0x116d7e(0x1fc)]=this[_0x116d7e(0x1fc)],_0x3ec1bd['force']=!![],_0x3ec1bd[_0x116d7e(0x213)]=this[_0x116d7e(0x213)],_0x3ec1bd;}async[a75_0x2f6d1c(0x1fe)](){const _0x29dc3d=a75_0x2f6d1c,_0x8bb54b=await this[_0x29dc3d(0x1f5)][_0x29dc3d(0x222)](this[_0x29dc3d(0x221)]),_0x2b7efb=await this[_0x29dc3d(0x22a)]['retrieveAttachment'](_0x8bb54b)[_0x29dc3d(0x1f4)](_0x51f0ee=>typeof _0x51f0ee===_0x29dc3d(0x21a)?JSON[_0x29dc3d(0x227)](_0x51f0ee):_0x51f0ee)[_0x29dc3d(0x22d)](()=>({}));if(_0x2b7efb[this['repository']['gitUrl']]){if(_0x2b7efb[this['repository']['gitUrl']][_0x29dc3d(0x210)]===this[_0x29dc3d(0x1fc)]['sha'])return!![];}return![];}async[a75_0x2f6d1c(0x218)](){const _0x1b4065=a75_0x2f6d1c,_0x2c68d4=await this[_0x1b4065(0x215)][_0x1b4065(0x202)]['getOne'](this['branch'][_0x1b4065(0x224)]);await this[_0x1b4065(0x234)]['log'](this[_0x1b4065(0x1ff)]+_0x1b4065(0x200));const _0x44f58d={[this[_0x1b4065(0x215)][_0x1b4065(0x1f8)]]:{'lastCommit':_0x2c68d4[_0x1b4065(0x1ee)]}};await this['salesforceSync']['updateRemoteState'](this[_0x1b4065(0x221)],_0x44f58d);}async[a75_0x2f6d1c(0x214)]({syncRecord:_0x49e51d,repository:_0x269ca2,convertToSFDX:_0x3f1659,provider:_0x586255}){const _0x11ee2c=a75_0x2f6d1c;this[_0x11ee2c(0x221)]=_0x49e51d,this[_0x11ee2c(0x213)]=_0x586255,this[_0x11ee2c(0x215)]=_0x269ca2,this[_0x11ee2c(0x234)]=typedi_1[_0x11ee2c(0x229)][_0x11ee2c(0x1e5)](salesforce_logger_v3_service_1[_0x11ee2c(0x238)]),this[_0x11ee2c(0x1ff)]=_0x11ee2c(0x201)+this[_0x11ee2c(0x221)][_0x11ee2c(0x1e6)]+_0x11ee2c(0x1e7)+this[_0x11ee2c(0x221)]['branchName']+']';try{await this[_0x11ee2c(0x234)]['log'](this[_0x11ee2c(0x1ff)]+'\x20Start\x20Flosum\x20sync\x20job')['send'](),await this['salesforceSync'][_0x11ee2c(0x206)](this['syncData'],'In\x20Progress'),this['sfLogger'][_0x11ee2c(0x20a)](this[_0x11ee2c(0x1ff)]+_0x11ee2c(0x1e8)),await this[_0x11ee2c(0x233)](),await this['sfLogger'][_0x11ee2c(0x20a)](this['prefix']+'\x20Checking\x20sync\x20status.')[_0x11ee2c(0x204)]();const _0x35f76d=await this[_0x11ee2c(0x1fe)]();this['sfLogger']['log'](this['prefix']+_0x11ee2c(0x20b)+_0x35f76d+'.');if(_0x35f76d){await this[_0x11ee2c(0x1f5)][_0x11ee2c(0x206)](this['syncData'],_0x11ee2c(0x1fb)),await this['sfLogger'][_0x11ee2c(0x20a)](this[_0x11ee2c(0x1ff)]+_0x11ee2c(0x21b))[_0x11ee2c(0x204)]();return;}const _0x5a3947=await this['getCommitDto'](_0x3f1659);await this[_0x11ee2c(0x22e)][_0x11ee2c(0x214)](_0x5a3947,this[_0x11ee2c(0x1ff)]),await this[_0x11ee2c(0x1f5)][_0x11ee2c(0x206)](this['syncData'],_0x11ee2c(0x1fb)),await this[_0x11ee2c(0x218)](),this['sfLogger'][_0x11ee2c(0x20a)](this[_0x11ee2c(0x1ff)]+_0x11ee2c(0x22c));}catch(_0x2687f9){throw _0x2687f9;}finally{await this[_0x11ee2c(0x234)]['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a75_0x2f6d1c(0x20f)])({'transient':!![]}),__metadata(a75_0x2f6d1c(0x237),[salesforce_sync_service_1[a75_0x2f6d1c(0x223)],salesforce_service_1[a75_0x2f6d1c(0x226)],commit_components_job_1[a75_0x2f6d1c(0x231)]])],FlosumSyncJob),exports[a75_0x2f6d1c(0x22b)]=FlosumSyncJob;function a75_0x524a(_0x52cbc0,_0x4c30b8){const _0x386feb=a75_0x21c3();return a75_0x524a=function(_0x4fb22b,_0x429032){_0x4fb22b=_0x4fb22b-0x1e2;let _0x21c3c2=_0x386feb[_0x4fb22b];return _0x21c3c2;},a75_0x524a(_0x52cbc0,_0x4c30b8);}function a75_0x21c3(){const _0x5907e0=['get','repositoryName',']\x20[Branch:\x20','\x20Checking\x20repository\x20on\x20Flosum\x20side.','6qHtEPz','19534548YYNfFX','branchId','3318795heRMwr','getCommitDto','sha','2215743ZBVylq','function','__decorate','(((.+)+)+)+$','2TNhuta','then','salesforceSync','toString','getComponentIds','gitUrl','../../salesforce/services/salesforce-retriever.service','3497852SdMuDI','Completed','branch','object','checkSyncStatus','prefix','\x20Update\x20remote\x20state.','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','branches','getComponents','send','./commit-components.job','setStatus','apply','repo','16BDaiQl','log','\x20Sync\x20status\x20','../../../../constants','metadata','defineProperty','Service','lastCommit','../dto/commit-components.dto','convertToSFDX','provider','run','repository','search','branchName','updateLastCommit','../../salesforce/services/salesforce-logger-v3.service','string','\x20Branch\x20synchronized.\x20Skip','create','constructor','241948uwHPzC','length','getOne','syncData','getRemoteStateAttachmentId','SalesforceSyncService','name','CommitComponentsDto','SalesforceService','parse','../../salesforce/services/salesforce.service','Container','salesforceService','FlosumSyncJob','\x20Flosum\x20sync\x20job\x20done.','catch','commitJob','message','repositoryId','CommitComponentsJob','decorate','createBranchIfNotExists','sfLogger','50qzXvMd','SalesforceRetrieverService','design:paramtypes','SalesforceLogger3','17948iqyaXY','1370529GJxcRE','__esModule'];a75_0x21c3=function(){return _0x5907e0;};return a75_0x21c3();}