const a126_0x4b1933=a126_0x18ce;(function(_0x53f327,_0x3b212d){const _0x4f86e0=a126_0x18ce,_0x5a30cd=_0x53f327();while(!![]){try{const _0x2cba38=-parseInt(_0x4f86e0(0x1b9))/0x1*(parseInt(_0x4f86e0(0x1a5))/0x2)+parseInt(_0x4f86e0(0x1bf))/0x3+parseInt(_0x4f86e0(0x1dc))/0x4+-parseInt(_0x4f86e0(0x1c2))/0x5+-parseInt(_0x4f86e0(0x189))/0x6+-parseInt(_0x4f86e0(0x194))/0x7*(parseInt(_0x4f86e0(0x198))/0x8)+parseInt(_0x4f86e0(0x19a))/0x9;if(_0x2cba38===_0x3b212d)break;else _0x5a30cd['push'](_0x5a30cd['shift']());}catch(_0x42fe52){_0x5a30cd['push'](_0x5a30cd['shift']());}}}(a126_0x55a2,0xc77ca));function a126_0x18ce(_0xc0db86,_0xcb091b){const _0x1f5431=a126_0x55a2();return a126_0x18ce=function(_0x5d7a91,_0x523db5){_0x5d7a91=_0x5d7a91-0x182;let _0x55a2af=_0x1f5431[_0x5d7a91];return _0x55a2af;},a126_0x18ce(_0xc0db86,_0xcb091b);}const a126_0x523db5=(function(){let _0x37293d=!![];return function(_0xada325,_0x2e4f85){const _0x9bb4d1=_0x37293d?function(){const _0x1641d2=a126_0x18ce;if(_0x2e4f85){const _0x2be3c5=_0x2e4f85[_0x1641d2(0x1c3)](_0xada325,arguments);return _0x2e4f85=null,_0x2be3c5;}}:function(){};return _0x37293d=![],_0x9bb4d1;};}()),a126_0x5d7a91=a126_0x523db5(this,function(){const _0x38e9f3=a126_0x18ce;return a126_0x5d7a91[_0x38e9f3(0x1cc)]()[_0x38e9f3(0x18b)](_0x38e9f3(0x186))[_0x38e9f3(0x1cc)]()[_0x38e9f3(0x1c1)](a126_0x5d7a91)[_0x38e9f3(0x18b)](_0x38e9f3(0x186));});a126_0x5d7a91();'use strict';var __decorate=this&&this[a126_0x4b1933(0x1a7)]||function(_0x50f41c,_0x53df2f,_0x2575d4,_0x1ba35b){const _0x1fb0a0=a126_0x4b1933;var _0x59c0eb=arguments[_0x1fb0a0(0x1db)],_0x1dc5d3=_0x59c0eb<0x3?_0x53df2f:_0x1ba35b===null?_0x1ba35b=Object[_0x1fb0a0(0x1ad)](_0x53df2f,_0x2575d4):_0x1ba35b,_0x277f34;if(typeof Reflect===_0x1fb0a0(0x187)&&typeof Reflect['decorate']===_0x1fb0a0(0x1d9))_0x1dc5d3=Reflect[_0x1fb0a0(0x19c)](_0x50f41c,_0x53df2f,_0x2575d4,_0x1ba35b);else{for(var _0xf206cf=_0x50f41c[_0x1fb0a0(0x1db)]-0x1;_0xf206cf>=0x0;_0xf206cf--)if(_0x277f34=_0x50f41c[_0xf206cf])_0x1dc5d3=(_0x59c0eb<0x3?_0x277f34(_0x1dc5d3):_0x59c0eb>0x3?_0x277f34(_0x53df2f,_0x2575d4,_0x1dc5d3):_0x277f34(_0x53df2f,_0x2575d4))||_0x1dc5d3;}return _0x59c0eb>0x3&&_0x1dc5d3&&Object['defineProperty'](_0x53df2f,_0x2575d4,_0x1dc5d3),_0x1dc5d3;},__metadata=this&&this[a126_0x4b1933(0x19b)]||function(_0x38e1c8,_0xf59da7){const _0xf8916e=a126_0x4b1933;if(typeof Reflect===_0xf8916e(0x187)&&typeof Reflect[_0xf8916e(0x1b5)]==='function')return Reflect[_0xf8916e(0x1b5)](_0x38e1c8,_0xf59da7);};Object[a126_0x4b1933(0x1ae)](exports,'__esModule',{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a126_0x4b1933(0x1d7)),constants_1=require(a126_0x4b1933(0x1bb)),salesforce_retriever_service_1=require(a126_0x4b1933(0x195)),salesforce_sync_service_1=require(a126_0x4b1933(0x1bd)),salesforce_service_1=require(a126_0x4b1933(0x1ab)),commit_components_dto_1=require(a126_0x4b1933(0x1ac)),commit_components_job_1=require(a126_0x4b1933(0x188));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x2705f3,_0x5ae96e,_0x2baeb1){const _0x57e277=a126_0x4b1933;this[_0x57e277(0x1d8)]=_0x2705f3,this[_0x57e277(0x1a8)]=_0x5ae96e,this[_0x57e277(0x1b7)]=_0x2baeb1;}async[a126_0x4b1933(0x1b3)](){const _0x3d00d9=a126_0x4b1933;let _0x3ed00b=await this[_0x3d00d9(0x1b2)][_0x3d00d9(0x1d4)][_0x3d00d9(0x184)](this[_0x3d00d9(0x1b8)][_0x3d00d9(0x18f)])['catch'](()=>null);!_0x3ed00b&&(_0x3ed00b=await this[_0x3d00d9(0x1b2)][_0x3d00d9(0x1d4)][_0x3d00d9(0x1d2)]({'name':this[_0x3d00d9(0x1b8)][_0x3d00d9(0x18f)],'user':{'name':this[_0x3d00d9(0x1b8)][_0x3d00d9(0x196)],'email':this['syncData'][_0x3d00d9(0x1af)]}})),this['branch']=_0x3ed00b;}async[a126_0x4b1933(0x1ba)](){const _0x5d5d78=a126_0x4b1933;return this[_0x5d5d78(0x1b8)][_0x5d5d78(0x18a)]?this[_0x5d5d78(0x1d8)][_0x5d5d78(0x1b1)](this[_0x5d5d78(0x1b8)]['repositoryId']):this[_0x5d5d78(0x1d8)]['getBranchComponents'](this['syncData'][_0x5d5d78(0x1aa)]);}async[a126_0x4b1933(0x1a6)](){const _0x1a975c=a126_0x4b1933,_0x489ca7=await this[_0x1a975c(0x1ba)](),_0x10ca65=new salesforce_retriever_service_1[(_0x1a975c(0x191))](this[_0x1a975c(0x1a8)]),_0x16b102=await _0x10ca65[_0x1a975c(0x19d)](_0x489ca7);return _0x16b102;}async[a126_0x4b1933(0x1b6)](_0x2b3a63){const _0x3d0888=a126_0x4b1933,_0xa469aa=new commit_components_dto_1[(_0x3d0888(0x182))]();return _0xa469aa[_0x3d0888(0x19f)]=_0x3d0888(0x18d),_0xa469aa['user']={'name':constants_1[_0x3d0888(0x1a1)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0xa469aa[_0x3d0888(0x1a9)]={'writed':await this[_0x3d0888(0x1a6)]()},_0xa469aa[_0x3d0888(0x1b4)]=_0x2b3a63,_0xa469aa['repo']=this[_0x3d0888(0x1b2)],_0xa469aa['branch']=this[_0x3d0888(0x1c5)],_0xa469aa['force']=!![],_0xa469aa[_0x3d0888(0x185)]=this[_0x3d0888(0x185)],_0xa469aa[_0x3d0888(0x18c)]=this['syncData'][_0x3d0888(0x1c7)],_0xa469aa;}async[a126_0x4b1933(0x190)](){const _0x14e9d1=a126_0x4b1933,_0x3aa598=await this[_0x14e9d1(0x1d8)]['getRemoteStateAttachmentId'](this['syncData']),_0x1e2c21=await this[_0x14e9d1(0x1a8)][_0x14e9d1(0x1de)](_0x3aa598)[_0x14e9d1(0x199)](_0xae69f7=>typeof _0xae69f7===_0x14e9d1(0x1c0)?JSON[_0x14e9d1(0x1c4)](_0xae69f7):_0xae69f7)[_0x14e9d1(0x1ce)](()=>({}));if(_0x1e2c21[this['repository']['gitUrl']]){if(_0x1e2c21[this['repository'][_0x14e9d1(0x1c9)]]['lastCommit']===this['branch']['sha'])return!![];}return![];}async[a126_0x4b1933(0x1c6)](){const _0x46d83e=a126_0x4b1933,_0x5c8b53=await this['repository'][_0x46d83e(0x1d4)][_0x46d83e(0x184)](this['branch'][_0x46d83e(0x183)]);await this[_0x46d83e(0x1dd)][_0x46d83e(0x1bc)](this[_0x46d83e(0x1ca)]+_0x46d83e(0x192));const _0xef667c={[this['repository'][_0x46d83e(0x1c9)]]:{'lastCommit':_0x5c8b53[_0x46d83e(0x193)]}};await this[_0x46d83e(0x1d8)][_0x46d83e(0x1b0)](this[_0x46d83e(0x1b8)],_0xef667c);}async['run']({syncRecord:_0x56a76e,repository:_0x1ae4f1,convertToSFDX:_0x51bb21,provider:_0x1f4abb}){const _0x57bb45=a126_0x4b1933;this[_0x57bb45(0x1b8)]=_0x56a76e,this[_0x57bb45(0x185)]=_0x1f4abb,this[_0x57bb45(0x1b2)]=_0x1ae4f1,this[_0x57bb45(0x1dd)]=typedi_1[_0x57bb45(0x1d5)][_0x57bb45(0x1da)](salesforce_logger_v3_service_1[_0x57bb45(0x1a4)]),this[_0x57bb45(0x1ca)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this['syncData'][_0x57bb45(0x18e)]+_0x57bb45(0x1d0)+this['syncData'][_0x57bb45(0x18f)]+']';try{await this[_0x57bb45(0x1dd)]['log'](this[_0x57bb45(0x1ca)]+_0x57bb45(0x1a2))[_0x57bb45(0x1cb)](),await this[_0x57bb45(0x1d8)][_0x57bb45(0x1a0)](this['syncData'],'In\x20Progress'),this['sfLogger'][_0x57bb45(0x1bc)](this['prefix']+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x57bb45(0x1b3)](),await this[_0x57bb45(0x1dd)][_0x57bb45(0x1bc)](this['prefix']+_0x57bb45(0x1cd))['send']();const _0x49144a=await this[_0x57bb45(0x190)]();this[_0x57bb45(0x1dd)][_0x57bb45(0x1bc)](this[_0x57bb45(0x1ca)]+_0x57bb45(0x1d3)+_0x49144a+'.');if(_0x49144a){await this['salesforceSync'][_0x57bb45(0x1a0)](this['syncData'],_0x57bb45(0x1d6)),await this['sfLogger'][_0x57bb45(0x1bc)](this[_0x57bb45(0x1ca)]+'\x20Branch\x20synchronized.\x20Skip')[_0x57bb45(0x1cb)]();return;}const _0x1ba577=await this[_0x57bb45(0x1b6)](_0x51bb21);await this[_0x57bb45(0x1b7)][_0x57bb45(0x19d)](_0x1ba577,this['prefix']),await this[_0x57bb45(0x1d8)][_0x57bb45(0x1a0)](this[_0x57bb45(0x1b8)],_0x57bb45(0x1d6)),await this[_0x57bb45(0x1c6)](),this[_0x57bb45(0x1dd)][_0x57bb45(0x1bc)](this[_0x57bb45(0x1ca)]+_0x57bb45(0x1c8));}catch(_0x2188d3){throw _0x2188d3;}finally{await this[_0x57bb45(0x1dd)][_0x57bb45(0x1cb)]();}}};function a126_0x55a2(){const _0x316ee7=['gitUrl','prefix','send','toString','\x20Checking\x20sync\x20status.','catch','Service',']\x20[Branch:\x20','CommitComponentsJob','create','\x20Sync\x20status\x20','branches','Container','Completed','typedi','salesforceSync','function','get','length','2734576SlQIVu','sfLogger','retrieveAttachment','CommitComponentsDto','name','getOne','provider','(((.+)+)+)+$','object','./commit-components.job','1095888YxTTQS','repositoryId','search','recordType','Sync\x20repository','repositoryName','branchName','checkSyncStatus','SalesforceRetrieverService','\x20Update\x20remote\x20state.','sha','35lNhHsU','../../salesforce/services/salesforce-retriever.service','userName','FlosumSyncJob','2067416NtHLWe','then','22186251FwBQlO','__metadata','decorate','run','SalesforceSyncService','message','setStatus','DEFAULT_GIT_USER_NAME','\x20Start\x20Flosum\x20sync\x20job','design:paramtypes','SalesforceLogger3','398GWwLkd','getComponents','__decorate','salesforceService','components','branchId','../../salesforce/services/salesforce.service','../dto/commit-components.dto','getOwnPropertyDescriptor','defineProperty','userEmail','updateRemoteState','getComponentsFromRepository','repository','createBranchIfNotExists','convertToSFDX','metadata','getCommitDto','commitJob','syncData','4395AEpKAz','getComponentIds','../../../../constants','log','../../salesforce/services/salesforce-sync.service','SalesforceService','3023604zWNLpk','string','constructor','4950825LHFLBd','apply','parse','branch','updateLastCommit','recordTypeName','\x20Flosum\x20sync\x20job\x20done.'];a126_0x55a2=function(){return _0x316ee7;};return a126_0x55a2();}FlosumSyncJob=__decorate([(0x0,typedi_1[a126_0x4b1933(0x1cf)])({'transient':!![]}),__metadata(a126_0x4b1933(0x1a3),[salesforce_sync_service_1[a126_0x4b1933(0x19e)],salesforce_service_1[a126_0x4b1933(0x1be)],commit_components_job_1[a126_0x4b1933(0x1d1)]])],FlosumSyncJob),exports[a126_0x4b1933(0x197)]=FlosumSyncJob;