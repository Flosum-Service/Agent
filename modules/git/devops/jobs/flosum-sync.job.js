const a75_0x1afeed=a75_0x28e7;function a75_0x28e7(_0x402a82,_0x43f2e8){const _0x245d5c=a75_0x5ac2();return a75_0x28e7=function(_0x2644c1,_0x48dc60){_0x2644c1=_0x2644c1-0x13d;let _0x5ac22a=_0x245d5c[_0x2644c1];return _0x5ac22a;},a75_0x28e7(_0x402a82,_0x43f2e8);}(function(_0x255eb5,_0x31b71f){const _0x3c3eea=a75_0x28e7,_0x48653f=_0x255eb5();while(!![]){try{const _0x51cf7b=-parseInt(_0x3c3eea(0x148))/0x1*(-parseInt(_0x3c3eea(0x14a))/0x2)+-parseInt(_0x3c3eea(0x182))/0x3+-parseInt(_0x3c3eea(0x18b))/0x4+parseInt(_0x3c3eea(0x147))/0x5*(-parseInt(_0x3c3eea(0x166))/0x6)+-parseInt(_0x3c3eea(0x181))/0x7*(-parseInt(_0x3c3eea(0x14e))/0x8)+-parseInt(_0x3c3eea(0x143))/0x9+parseInt(_0x3c3eea(0x177))/0xa;if(_0x51cf7b===_0x31b71f)break;else _0x48653f['push'](_0x48653f['shift']());}catch(_0x489b33){_0x48653f['push'](_0x48653f['shift']());}}}(a75_0x5ac2,0x793d4));const a75_0x48dc60=(function(){let _0x54d54e=!![];return function(_0x189384,_0x484518){const _0xc113fa=_0x54d54e?function(){if(_0x484518){const _0x2246d1=_0x484518['apply'](_0x189384,arguments);return _0x484518=null,_0x2246d1;}}:function(){};return _0x54d54e=![],_0xc113fa;};}()),a75_0x2644c1=a75_0x48dc60(this,function(){const _0x35f77f=a75_0x28e7;return a75_0x2644c1['toString']()['search'](_0x35f77f(0x188))[_0x35f77f(0x17d)]()[_0x35f77f(0x151)](a75_0x2644c1)[_0x35f77f(0x15f)](_0x35f77f(0x188));});a75_0x2644c1();'use strict';var __decorate=this&&this[a75_0x1afeed(0x14f)]||function(_0xd85d2f,_0x21355d,_0x6d7ac6,_0x4e34ec){const _0x1a560b=a75_0x1afeed;var _0x431afd=arguments['length'],_0x45445a=_0x431afd<0x3?_0x21355d:_0x4e34ec===null?_0x4e34ec=Object[_0x1a560b(0x18c)](_0x21355d,_0x6d7ac6):_0x4e34ec,_0x5d2565;if(typeof Reflect===_0x1a560b(0x159)&&typeof Reflect[_0x1a560b(0x162)]===_0x1a560b(0x142))_0x45445a=Reflect['decorate'](_0xd85d2f,_0x21355d,_0x6d7ac6,_0x4e34ec);else{for(var _0x37942a=_0xd85d2f['length']-0x1;_0x37942a>=0x0;_0x37942a--)if(_0x5d2565=_0xd85d2f[_0x37942a])_0x45445a=(_0x431afd<0x3?_0x5d2565(_0x45445a):_0x431afd>0x3?_0x5d2565(_0x21355d,_0x6d7ac6,_0x45445a):_0x5d2565(_0x21355d,_0x6d7ac6))||_0x45445a;}return _0x431afd>0x3&&_0x45445a&&Object['defineProperty'](_0x21355d,_0x6d7ac6,_0x45445a),_0x45445a;},__metadata=this&&this[a75_0x1afeed(0x170)]||function(_0x25e9b1,_0x14319b){const _0xceb0bf=a75_0x1afeed;if(typeof Reflect==='object'&&typeof Reflect[_0xceb0bf(0x13f)]==='function')return Reflect[_0xceb0bf(0x13f)](_0x25e9b1,_0x14319b);};Object['defineProperty'](exports,a75_0x1afeed(0x180),{'value':!![]}),exports[a75_0x1afeed(0x14c)]=void 0x0;const salesforce_logger_v3_service_1=require(a75_0x1afeed(0x167)),typedi_1=require(a75_0x1afeed(0x17e)),constants_1=require('../../../../constants'),salesforce_retriever_service_1=require(a75_0x1afeed(0x164)),salesforce_sync_service_1=require(a75_0x1afeed(0x176)),salesforce_service_1=require(a75_0x1afeed(0x174)),commit_components_dto_1=require(a75_0x1afeed(0x13d)),commit_components_job_1=require(a75_0x1afeed(0x144));function a75_0x5ac2(){const _0x3cdd2a=['repositoryId','commitJob','get','\x20Start\x20Flosum\x20sync\x20job','search','repository','createBranchIfNotExists','decorate','message','../../salesforce/services/salesforce-retriever.service','repo','6FcsVEL','../../salesforce/services/salesforce-logger-v3.service','SalesforceRetrieverService','getComponents','sfLogger','CommitComponentsDto','salesforceSync','force','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','branchName','__metadata','SalesforceService','string','design:paramtypes','../../salesforce/services/salesforce.service','\x20Flosum\x20sync\x20job\x20done.','../../salesforce/services/salesforce-sync.service','27682760nXBxzz','sha','Completed','Service','gitUrl','\x20Checking\x20sync\x20status.','toString','typedi',']\x20[Branch:\x20','__esModule','254233IIOByS','1814958oxbznY','catch','repositoryName','syncData','getBranchComponents','getComponentIds','(((.+)+)+)+$','salesforceService','getOne','3734032gPlJss','getOwnPropertyDescriptor','retrieveAttachment','provider','\x20Sync\x20status\x20','branch','Container','updateLastCommit','../dto/commit-components.dto','DEFAULT_GIT_USER_NAME','metadata','send','parse','function','2920194rAUgjC','./commit-components.job','prefix','log','4690095DpQxtf','1urRAUS','getCommitDto','985960mWbcte','\x20Checking\x20repository\x20on\x20Flosum\x20side.','FlosumSyncJob','CommitComponentsJob','8CrvkbC','__decorate','create','constructor','\x20Branch\x20synchronized.\x20Skip','setStatus','branchId','convertToSFDX','branches','run','Sync\x20repository','object','name'];a75_0x5ac2=function(){return _0x3cdd2a;};return a75_0x5ac2();}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x391ea2,_0x44532a,_0x359d52){const _0x489b8d=a75_0x1afeed;this['salesforceSync']=_0x391ea2,this[_0x489b8d(0x189)]=_0x44532a,this[_0x489b8d(0x15c)]=_0x359d52;}async[a75_0x1afeed(0x161)](){const _0x11ebfd=a75_0x1afeed;let _0xc7b16=await this['repository'][_0x11ebfd(0x156)]['getOne'](this[_0x11ebfd(0x185)]['branchName'])[_0x11ebfd(0x183)](()=>null);!_0xc7b16&&(_0xc7b16=await this['repository']['branches'][_0x11ebfd(0x150)]({'name':this['syncData'][_0x11ebfd(0x16f)]})),this['branch']=_0xc7b16;}async[a75_0x1afeed(0x187)](){const _0x4f07a6=a75_0x1afeed;return this[_0x4f07a6(0x185)][_0x4f07a6(0x15b)]?this[_0x4f07a6(0x16c)]['getComponentsFromRepository'](this[_0x4f07a6(0x185)][_0x4f07a6(0x15b)]):this[_0x4f07a6(0x16c)][_0x4f07a6(0x186)](this[_0x4f07a6(0x185)][_0x4f07a6(0x154)]);}async[a75_0x1afeed(0x169)](){const _0x3e0a1c=a75_0x1afeed,_0x53e8e0=await this[_0x3e0a1c(0x187)](),_0x1ea7f5=new salesforce_retriever_service_1[(_0x3e0a1c(0x168))](this[_0x3e0a1c(0x189)]),_0x540433=await _0x1ea7f5[_0x3e0a1c(0x157)](_0x53e8e0);return _0x540433;}async[a75_0x1afeed(0x149)](_0x125822){const _0x3c71c3=a75_0x1afeed,_0x26129c=new commit_components_dto_1[(_0x3c71c3(0x16b))]();return _0x26129c[_0x3c71c3(0x163)]=_0x3c71c3(0x158),_0x26129c['user']={'name':constants_1[_0x3c71c3(0x13e)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x26129c['components']={'writed':await this[_0x3c71c3(0x169)]()},_0x26129c[_0x3c71c3(0x155)]=_0x125822,_0x26129c[_0x3c71c3(0x165)]=this['repository'],_0x26129c[_0x3c71c3(0x190)]=this[_0x3c71c3(0x190)],_0x26129c[_0x3c71c3(0x16d)]=!![],_0x26129c[_0x3c71c3(0x18e)]=this['provider'],_0x26129c;}async['checkSyncStatus'](){const _0x1d2c5a=a75_0x1afeed,_0x48c55f=await this[_0x1d2c5a(0x16c)]['getRemoteStateAttachmentId'](this[_0x1d2c5a(0x185)]),_0x3728a8=await this[_0x1d2c5a(0x189)][_0x1d2c5a(0x18d)](_0x48c55f)['then'](_0x1bda71=>typeof _0x1bda71===_0x1d2c5a(0x172)?JSON[_0x1d2c5a(0x141)](_0x1bda71):_0x1bda71)[_0x1d2c5a(0x183)](()=>({}));if(_0x3728a8[this[_0x1d2c5a(0x160)][_0x1d2c5a(0x17b)]]){if(_0x3728a8[this['repository'][_0x1d2c5a(0x17b)]]['lastCommit']===this[_0x1d2c5a(0x190)][_0x1d2c5a(0x178)])return!![];}return![];}async[a75_0x1afeed(0x192)](){const _0x566c64=a75_0x1afeed,_0x51b5f9=await this['repository'][_0x566c64(0x156)][_0x566c64(0x18a)](this[_0x566c64(0x190)][_0x566c64(0x15a)]);await this[_0x566c64(0x16a)][_0x566c64(0x146)](this['prefix']+'\x20Update\x20remote\x20state.');const _0x58b09a={[this[_0x566c64(0x160)][_0x566c64(0x17b)]]:{'lastCommit':_0x51b5f9['sha']}};await this[_0x566c64(0x16c)]['updateRemoteState'](this[_0x566c64(0x185)],_0x58b09a);}async['run']({syncRecord:_0x3118e3,repository:_0x5d2794,convertToSFDX:_0x3a823e,provider:_0x1b872e}){const _0x5cdf35=a75_0x1afeed;this[_0x5cdf35(0x185)]=_0x3118e3,this[_0x5cdf35(0x18e)]=_0x1b872e,this[_0x5cdf35(0x160)]=_0x5d2794,this[_0x5cdf35(0x16a)]=typedi_1[_0x5cdf35(0x191)][_0x5cdf35(0x15d)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x5cdf35(0x145)]=_0x5cdf35(0x16e)+this[_0x5cdf35(0x185)][_0x5cdf35(0x184)]+_0x5cdf35(0x17f)+this['syncData'][_0x5cdf35(0x16f)]+']';try{await this[_0x5cdf35(0x16a)][_0x5cdf35(0x146)](this[_0x5cdf35(0x145)]+_0x5cdf35(0x15e))[_0x5cdf35(0x140)](),await this['salesforceSync'][_0x5cdf35(0x153)](this['syncData'],'In\x20Progress'),this['sfLogger']['log'](this['prefix']+_0x5cdf35(0x14b)),await this['createBranchIfNotExists'](),await this[_0x5cdf35(0x16a)][_0x5cdf35(0x146)](this['prefix']+_0x5cdf35(0x17c))[_0x5cdf35(0x140)]();const _0xdbea94=await this['checkSyncStatus']();this['sfLogger'][_0x5cdf35(0x146)](this['prefix']+_0x5cdf35(0x18f)+_0xdbea94+'.');if(_0xdbea94){await this[_0x5cdf35(0x16c)][_0x5cdf35(0x153)](this['syncData'],_0x5cdf35(0x179)),await this[_0x5cdf35(0x16a)][_0x5cdf35(0x146)](this['prefix']+_0x5cdf35(0x152))[_0x5cdf35(0x140)]();return;}const _0x3f7ab0=await this['getCommitDto'](_0x3a823e);await this[_0x5cdf35(0x15c)][_0x5cdf35(0x157)](_0x3f7ab0,this[_0x5cdf35(0x145)]),await this[_0x5cdf35(0x16c)]['setStatus'](this[_0x5cdf35(0x185)],_0x5cdf35(0x179)),await this[_0x5cdf35(0x192)](),this['sfLogger'][_0x5cdf35(0x146)](this['prefix']+_0x5cdf35(0x175));}catch(_0x559222){throw _0x559222;}finally{await this[_0x5cdf35(0x16a)][_0x5cdf35(0x140)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a75_0x1afeed(0x17a)])({'transient':!![]}),__metadata(a75_0x1afeed(0x173),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a75_0x1afeed(0x171)],commit_components_job_1[a75_0x1afeed(0x14d)]])],FlosumSyncJob),exports[a75_0x1afeed(0x14c)]=FlosumSyncJob;