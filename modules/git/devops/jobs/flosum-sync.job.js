const a105_0x50c239=a105_0xc643;(function(_0x127430,_0x39ab89){const _0x272db7=a105_0xc643,_0x3a0206=_0x127430();while(!![]){try{const _0x59a02b=-parseInt(_0x272db7(0x17a))/0x1+-parseInt(_0x272db7(0x19b))/0x2+parseInt(_0x272db7(0x1cc))/0x3+parseInt(_0x272db7(0x17c))/0x4+parseInt(_0x272db7(0x1a4))/0x5*(parseInt(_0x272db7(0x194))/0x6)+-parseInt(_0x272db7(0x1be))/0x7*(parseInt(_0x272db7(0x1b9))/0x8)+parseInt(_0x272db7(0x1ac))/0x9*(parseInt(_0x272db7(0x1a8))/0xa);if(_0x59a02b===_0x39ab89)break;else _0x3a0206['push'](_0x3a0206['shift']());}catch(_0x1b217a){_0x3a0206['push'](_0x3a0206['shift']());}}}(a105_0x5a05,0x78708));const a105_0x5e6286=(function(){let _0x4f9f27=!![];return function(_0x3252b4,_0x16825a){const _0x599504=_0x4f9f27?function(){const _0xb2fe3a=a105_0xc643;if(_0x16825a){const _0x252ddc=_0x16825a[_0xb2fe3a(0x1b2)](_0x3252b4,arguments);return _0x16825a=null,_0x252ddc;}}:function(){};return _0x4f9f27=![],_0x599504;};}()),a105_0x16b9fe=a105_0x5e6286(this,function(){const _0x1590d7=a105_0xc643;return a105_0x16b9fe[_0x1590d7(0x17b)]()[_0x1590d7(0x18f)](_0x1590d7(0x1cf))[_0x1590d7(0x17b)]()[_0x1590d7(0x1c5)](a105_0x16b9fe)['search'](_0x1590d7(0x1cf));});a105_0x16b9fe();'use strict';var __decorate=this&&this[a105_0x50c239(0x1cd)]||function(_0x3838a8,_0x54864a,_0x2d036e,_0x4e4665){const _0x3265e0=a105_0x50c239;var _0x473bb1=arguments[_0x3265e0(0x18c)],_0x3025e7=_0x473bb1<0x3?_0x54864a:_0x4e4665===null?_0x4e4665=Object[_0x3265e0(0x191)](_0x54864a,_0x2d036e):_0x4e4665,_0x499ec;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x3265e0(0x1b8))_0x3025e7=Reflect[_0x3265e0(0x1bf)](_0x3838a8,_0x54864a,_0x2d036e,_0x4e4665);else{for(var _0x39334d=_0x3838a8[_0x3265e0(0x18c)]-0x1;_0x39334d>=0x0;_0x39334d--)if(_0x499ec=_0x3838a8[_0x39334d])_0x3025e7=(_0x473bb1<0x3?_0x499ec(_0x3025e7):_0x473bb1>0x3?_0x499ec(_0x54864a,_0x2d036e,_0x3025e7):_0x499ec(_0x54864a,_0x2d036e))||_0x3025e7;}return _0x473bb1>0x3&&_0x3025e7&&Object[_0x3265e0(0x1b0)](_0x54864a,_0x2d036e,_0x3025e7),_0x3025e7;},__metadata=this&&this[a105_0x50c239(0x1a9)]||function(_0x4e882e,_0x41bb37){const _0x4ba18d=a105_0x50c239;if(typeof Reflect===_0x4ba18d(0x1ad)&&typeof Reflect[_0x4ba18d(0x1c1)]===_0x4ba18d(0x1b8))return Reflect[_0x4ba18d(0x1c1)](_0x4e882e,_0x41bb37);};function a105_0x5a05(){const _0x1638eb=['../../salesforce/services/salesforce.service','name','function','424agPfLa','send','branches','Completed','repositoryId','43687Ayhrkj','decorate','message','metadata','\x20Branch\x20synchronized.\x20Skip','syncData','\x20Update\x20remote\x20state.','constructor','provider','typedi','prefix','../../salesforce/services/salesforce-logger-v3.service','\x20Start\x20Flosum\x20sync\x20job','salesforceSync','2890842wUOStL','__decorate','commitJob','(((.+)+)+)+$','then','catch','sha','543303jiaJmt','toString','293288lbkKbp','FlosumSyncJob','../../salesforce/services/salesforce-sync.service','getOne','getCommitDto','CommitComponentsDto','branchId','Container','../../salesforce/services/salesforce-retriever.service','get','updateLastCommit','repositoryName','SalesforceSyncService','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','lastCommit','updateRemoteState','length','checkSyncStatus','sfLogger','search','design:paramtypes','getOwnPropertyDescriptor','In\x20Progress','getComponentIds','645918VCRspJ','DEFAULT_GIT_USER_EMAIL','branchName','getComponentsFromRepository','force','setStatus','log','1526836FzRLEQ','create','Sync\x20repository','getRemoteStateAttachmentId','repository','DEFAULT_GIT_USER_NAME','gitUrl','CommitComponentsJob','createBranchIfNotExists','5Qsurap','../../../../constants',']\x20[Branch:\x20','salesforceService','50fKTNhM','__metadata','user','./commit-components.job','1775205BEZViv','object','getComponents','\x20Flosum\x20sync\x20job\x20done.','defineProperty','branch','apply','run','Service','SalesforceService'];a105_0x5a05=function(){return _0x1638eb;};return a105_0x5a05();}function a105_0xc643(_0x3f7fe3,_0x13ede8){const _0x32385d=a105_0x5a05();return a105_0xc643=function(_0x16b9fe,_0x5e6286){_0x16b9fe=_0x16b9fe-0x179;let _0x5a055e=_0x32385d[_0x16b9fe];return _0x5a055e;},a105_0xc643(_0x3f7fe3,_0x13ede8);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a105_0x50c239(0x17d)]=void 0x0;const salesforce_logger_v3_service_1=require(a105_0x50c239(0x1c9)),typedi_1=require(a105_0x50c239(0x1c7)),constants_1=require(a105_0x50c239(0x1a5)),salesforce_retriever_service_1=require(a105_0x50c239(0x184)),salesforce_sync_service_1=require(a105_0x50c239(0x17e)),salesforce_service_1=require(a105_0x50c239(0x1b6)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a105_0x50c239(0x1ab));let FlosumSyncJob=class FlosumSyncJob{constructor(_0xb1190f,_0x45c614,_0x290f67){const _0xcd9ba4=a105_0x50c239;this[_0xcd9ba4(0x1cb)]=_0xb1190f,this['salesforceService']=_0x45c614,this['commitJob']=_0x290f67;}async[a105_0x50c239(0x1a3)](){const _0x35c0be=a105_0x50c239;let _0xcf37cf=await this[_0x35c0be(0x19f)]['branches']['getOne'](this[_0x35c0be(0x1c3)]['branchName'])[_0x35c0be(0x1d1)](()=>null);!_0xcf37cf&&(_0xcf37cf=await this['repository'][_0x35c0be(0x1bb)][_0x35c0be(0x19c)]({'name':this['syncData']['branchName']})),this[_0x35c0be(0x1b1)]=_0xcf37cf;}async[a105_0x50c239(0x193)](){const _0x572bb0=a105_0x50c239;return this[_0x572bb0(0x1c3)][_0x572bb0(0x1bd)]?this['salesforceSync'][_0x572bb0(0x197)](this[_0x572bb0(0x1c3)][_0x572bb0(0x1bd)]):this[_0x572bb0(0x1cb)]['getBranchComponents'](this[_0x572bb0(0x1c3)][_0x572bb0(0x182)]);}async[a105_0x50c239(0x1ae)](){const _0x5adf42=a105_0x50c239,_0x529f81=await this[_0x5adf42(0x193)](),_0x4401f1=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x5adf42(0x1a7)]),_0x16e0ed=await _0x4401f1[_0x5adf42(0x1b3)](_0x529f81);return _0x16e0ed;}async[a105_0x50c239(0x180)](_0x5f02f7){const _0x922091=a105_0x50c239,_0x1141e0=new commit_components_dto_1[(_0x922091(0x181))]();return _0x1141e0[_0x922091(0x1c0)]=_0x922091(0x19d),_0x1141e0[_0x922091(0x1aa)]={'name':constants_1[_0x922091(0x1a0)],'email':constants_1[_0x922091(0x195)]},_0x1141e0['components']={'writed':await this[_0x922091(0x1ae)]()},_0x1141e0['convertToSFDX']=_0x5f02f7,_0x1141e0['repo']=this[_0x922091(0x19f)],_0x1141e0[_0x922091(0x1b1)]=this[_0x922091(0x1b1)],_0x1141e0[_0x922091(0x198)]=!![],_0x1141e0['provider']=this[_0x922091(0x1c6)],_0x1141e0;}async[a105_0x50c239(0x18d)](){const _0x172c65=a105_0x50c239,_0x198ad1=await this['salesforceSync'][_0x172c65(0x19e)](this['syncData']),_0x4f29ca=await this[_0x172c65(0x1a7)]['retrieveAttachment'](_0x198ad1)[_0x172c65(0x1d0)](_0x4097c6=>typeof _0x4097c6==='string'?JSON['parse'](_0x4097c6):_0x4097c6)[_0x172c65(0x1d1)](()=>({}));if(_0x4f29ca[this[_0x172c65(0x19f)][_0x172c65(0x1a1)]]){if(_0x4f29ca[this[_0x172c65(0x19f)]['gitUrl']][_0x172c65(0x18a)]===this['branch'][_0x172c65(0x179)])return!![];}return![];}async[a105_0x50c239(0x186)](){const _0x128272=a105_0x50c239,_0x4c784c=await this[_0x128272(0x19f)][_0x128272(0x1bb)][_0x128272(0x17f)](this[_0x128272(0x1b1)][_0x128272(0x1b7)]);await this[_0x128272(0x18e)][_0x128272(0x19a)](this[_0x128272(0x1c8)]+_0x128272(0x1c4));const _0xd38325={[this[_0x128272(0x19f)]['gitUrl']]:{'lastCommit':_0x4c784c[_0x128272(0x179)]}};await this['salesforceSync'][_0x128272(0x18b)](this[_0x128272(0x1c3)],_0xd38325);}async[a105_0x50c239(0x1b3)]({syncRecord:_0x4540ac,repository:_0x3460e1,convertToSFDX:_0x2a3d6c,provider:_0x2e6dbd}){const _0x2539b2=a105_0x50c239;this['syncData']=_0x4540ac,this[_0x2539b2(0x1c6)]=_0x2e6dbd,this[_0x2539b2(0x19f)]=_0x3460e1,this[_0x2539b2(0x18e)]=typedi_1[_0x2539b2(0x183)][_0x2539b2(0x185)](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x2539b2(0x1c8)]=_0x2539b2(0x189)+this[_0x2539b2(0x1c3)][_0x2539b2(0x187)]+_0x2539b2(0x1a6)+this[_0x2539b2(0x1c3)][_0x2539b2(0x196)]+']';try{await this[_0x2539b2(0x18e)][_0x2539b2(0x19a)](this[_0x2539b2(0x1c8)]+_0x2539b2(0x1ca))[_0x2539b2(0x1ba)](),await this[_0x2539b2(0x1cb)][_0x2539b2(0x199)](this[_0x2539b2(0x1c3)],_0x2539b2(0x192)),this['sfLogger']['log'](this[_0x2539b2(0x1c8)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x2539b2(0x1a3)](),await this[_0x2539b2(0x18e)][_0x2539b2(0x19a)](this[_0x2539b2(0x1c8)]+'\x20Checking\x20sync\x20status.')[_0x2539b2(0x1ba)]();const _0x522f50=await this[_0x2539b2(0x18d)]();this['sfLogger']['log'](this[_0x2539b2(0x1c8)]+'\x20Sync\x20status\x20'+_0x522f50+'.');if(_0x522f50){await this['salesforceSync'][_0x2539b2(0x199)](this[_0x2539b2(0x1c3)],_0x2539b2(0x1bc)),await this['sfLogger'][_0x2539b2(0x19a)](this['prefix']+_0x2539b2(0x1c2))[_0x2539b2(0x1ba)]();return;}const _0x52e952=await this[_0x2539b2(0x180)](_0x2a3d6c);await this[_0x2539b2(0x1ce)]['run'](_0x52e952,this[_0x2539b2(0x1c8)]),await this['salesforceSync']['setStatus'](this['syncData'],_0x2539b2(0x1bc)),await this[_0x2539b2(0x186)](),this['sfLogger'][_0x2539b2(0x19a)](this[_0x2539b2(0x1c8)]+_0x2539b2(0x1af));}catch(_0x4aa727){throw _0x4aa727;}finally{await this[_0x2539b2(0x18e)]['send']();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a105_0x50c239(0x1b4)])({'transient':!![]}),__metadata(a105_0x50c239(0x190),[salesforce_sync_service_1[a105_0x50c239(0x188)],salesforce_service_1[a105_0x50c239(0x1b5)],commit_components_job_1[a105_0x50c239(0x1a2)]])],FlosumSyncJob),exports[a105_0x50c239(0x17d)]=FlosumSyncJob;