const a62_0x2de647=a62_0x5cb6;(function(_0x4140c0,_0x4a7075){const _0x29e9b8=a62_0x5cb6,_0x23defe=_0x4140c0();while(!![]){try{const _0xadee42=-parseInt(_0x29e9b8(0xbb))/0x1*(parseInt(_0x29e9b8(0xcc))/0x2)+parseInt(_0x29e9b8(0xa7))/0x3+parseInt(_0x29e9b8(0xa5))/0x4*(-parseInt(_0x29e9b8(0xcd))/0x5)+parseInt(_0x29e9b8(0xb0))/0x6*(-parseInt(_0x29e9b8(0xac))/0x7)+parseInt(_0x29e9b8(0xaa))/0x8*(-parseInt(_0x29e9b8(0xc4))/0x9)+parseInt(_0x29e9b8(0xd9))/0xa*(-parseInt(_0x29e9b8(0xa8))/0xb)+parseInt(_0x29e9b8(0xb1))/0xc;if(_0xadee42===_0x4a7075)break;else _0x23defe['push'](_0x23defe['shift']());}catch(_0x446e09){_0x23defe['push'](_0x23defe['shift']());}}}(a62_0x91c6,0x54579));const a62_0x2611fa=(function(){let _0x19ab86=!![];return function(_0x2c7608,_0x283267){const _0x4f6071=_0x19ab86?function(){if(_0x283267){const _0x344a5c=_0x283267['apply'](_0x2c7608,arguments);return _0x283267=null,_0x344a5c;}}:function(){};return _0x19ab86=![],_0x4f6071;};}()),a62_0x36b018=a62_0x2611fa(this,function(){const _0x7a0baa=a62_0x5cb6;return a62_0x36b018[_0x7a0baa(0xc3)]()[_0x7a0baa(0xde)](_0x7a0baa(0xa3))[_0x7a0baa(0xc3)]()[_0x7a0baa(0xd4)](a62_0x36b018)[_0x7a0baa(0xde)](_0x7a0baa(0xa3));});function a62_0x5cb6(_0x13eef1,_0x436319){const _0x1aa9be=a62_0x91c6();return a62_0x5cb6=function(_0x36b018,_0x2611fa){_0x36b018=_0x36b018-0x96;let _0x91c62f=_0x1aa9be[_0x36b018];return _0x91c62f;},a62_0x5cb6(_0x13eef1,_0x436319);}a62_0x36b018();'use strict';var __decorate=this&&this[a62_0x2de647(0xb8)]||function(_0x36d2e2,_0x19d466,_0x4c7b66,_0x45d665){const _0x445e08=a62_0x2de647;var _0x58aff1=arguments[_0x445e08(0xce)],_0x49ced0=_0x58aff1<0x3?_0x19d466:_0x45d665===null?_0x45d665=Object['getOwnPropertyDescriptor'](_0x19d466,_0x4c7b66):_0x45d665,_0x5659d3;if(typeof Reflect==='object'&&typeof Reflect[_0x445e08(0xe3)]===_0x445e08(0xc7))_0x49ced0=Reflect['decorate'](_0x36d2e2,_0x19d466,_0x4c7b66,_0x45d665);else{for(var _0x227e1b=_0x36d2e2[_0x445e08(0xce)]-0x1;_0x227e1b>=0x0;_0x227e1b--)if(_0x5659d3=_0x36d2e2[_0x227e1b])_0x49ced0=(_0x58aff1<0x3?_0x5659d3(_0x49ced0):_0x58aff1>0x3?_0x5659d3(_0x19d466,_0x4c7b66,_0x49ced0):_0x5659d3(_0x19d466,_0x4c7b66))||_0x49ced0;}return _0x58aff1>0x3&&_0x49ced0&&Object['defineProperty'](_0x19d466,_0x4c7b66,_0x49ced0),_0x49ced0;},__metadata=this&&this['__metadata']||function(_0x27361b,_0x5687be){const _0x37aa9e=a62_0x2de647;if(typeof Reflect===_0x37aa9e(0xd3)&&typeof Reflect[_0x37aa9e(0xb6)]===_0x37aa9e(0xc7))return Reflect['metadata'](_0x27361b,_0x5687be);};Object['defineProperty'](exports,a62_0x2de647(0xa0),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require('typedi'),constants_1=require(a62_0x2de647(0xb5)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a62_0x2de647(0xbe)),salesforce_service_1=require(a62_0x2de647(0xca)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=class FlosumSyncJob{constructor(_0x25bf19,_0x4ffd2e,_0xe1eb3e){const _0x121e80=a62_0x2de647;this[_0x121e80(0xbc)]=_0x25bf19,this['salesforceService']=_0x4ffd2e,this['commitJob']=_0xe1eb3e;}async[a62_0x2de647(0xe7)](){const _0x4333b8=a62_0x2de647;let _0xe6f94a=await this[_0x4333b8(0xe2)][_0x4333b8(0x9c)][_0x4333b8(0xa2)](this['syncData'][_0x4333b8(0xd7)])[_0x4333b8(0xa1)](()=>null);!_0xe6f94a&&(_0xe6f94a=await this['repository'][_0x4333b8(0x9c)][_0x4333b8(0xea)]({'name':this[_0x4333b8(0xd0)]['branchName']})),this[_0x4333b8(0xb7)]=_0xe6f94a;}async[a62_0x2de647(0xb2)](){const _0x2ab649=a62_0x2de647;return this[_0x2ab649(0xd0)][_0x2ab649(0x96)]?this[_0x2ab649(0xbc)][_0x2ab649(0xe6)](this['syncData'][_0x2ab649(0x96)]):this[_0x2ab649(0xbc)][_0x2ab649(0xba)](this[_0x2ab649(0xd0)]['branchId']);}async[a62_0x2de647(0x9b)](){const _0xdf1a4e=a62_0x2de647,_0x4feaed=await this[_0xdf1a4e(0xb2)](),_0xbfc43b=new salesforce_retriever_service_1[(_0xdf1a4e(0xd2))](this[_0xdf1a4e(0xdc)]),_0xae6506=await _0xbfc43b[_0xdf1a4e(0xab)](_0x4feaed);return _0xae6506;}async[a62_0x2de647(0xd1)](_0x26ace9){const _0x4029a2=a62_0x2de647,_0x36801f=new commit_components_dto_1['CommitComponentsDto']();return _0x36801f[_0x4029a2(0xe5)]=_0x4029a2(0xa6),_0x36801f[_0x4029a2(0x9f)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x4029a2(0xaf)]},_0x36801f[_0x4029a2(0xcb)]={'writed':await this[_0x4029a2(0x9b)]()},_0x36801f[_0x4029a2(0xdf)]=_0x26ace9,_0x36801f['repo']=this[_0x4029a2(0xe2)],_0x36801f['branch']=this[_0x4029a2(0xb7)],_0x36801f['force']=!![],_0x36801f[_0x4029a2(0xbf)]=this[_0x4029a2(0xbf)],_0x36801f;}async[a62_0x2de647(0xe0)](){const _0x48e8a3=a62_0x2de647,_0xefede3=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x48e8a3(0xd0)]),_0x5043eb=await this['salesforceService'][_0x48e8a3(0xd8)](_0xefede3)['then'](_0x511e4e=>typeof _0x511e4e===_0x48e8a3(0xc1)?JSON[_0x48e8a3(0x99)](_0x511e4e):_0x511e4e)[_0x48e8a3(0xa1)](()=>({}));if(_0x5043eb[this[_0x48e8a3(0xe2)][_0x48e8a3(0x98)]]){if(_0x5043eb[this['repository'][_0x48e8a3(0x98)]][_0x48e8a3(0xcf)]===this[_0x48e8a3(0xb7)]['sha'])return!![];}return![];}async[a62_0x2de647(0xad)](){const _0x190f39=a62_0x2de647,_0x23af20=await this[_0x190f39(0xe2)][_0x190f39(0x9c)][_0x190f39(0xa2)](this[_0x190f39(0xb7)][_0x190f39(0xb4)]);await this[_0x190f39(0xe4)]['log'](this[_0x190f39(0x9e)]+_0x190f39(0x97));const _0x2ba260={[this[_0x190f39(0xe2)][_0x190f39(0x98)]]:{'lastCommit':_0x23af20['sha']}};await this[_0x190f39(0xbc)][_0x190f39(0xb3)](this[_0x190f39(0xd0)],_0x2ba260);}async[a62_0x2de647(0xab)]({syncRecord:_0x3755cd,repository:_0x3709e1,convertToSFDX:_0x40abc3,provider:_0x6da311}){const _0x35b3e5=a62_0x2de647;this[_0x35b3e5(0xd0)]=_0x3755cd,this[_0x35b3e5(0xbf)]=_0x6da311,this[_0x35b3e5(0xe2)]=_0x3709e1,this[_0x35b3e5(0xe4)]=typedi_1[_0x35b3e5(0xc8)][_0x35b3e5(0xae)](salesforce_logger_v3_service_1[_0x35b3e5(0x9a)]),this[_0x35b3e5(0x9e)]=_0x35b3e5(0xa4)+this['syncData']['repositoryName']+_0x35b3e5(0xc2)+this[_0x35b3e5(0xd0)][_0x35b3e5(0xd7)]+']';try{await this['sfLogger'][_0x35b3e5(0xc0)](this['prefix']+_0x35b3e5(0xeb))['send'](),await this['salesforceSync'][_0x35b3e5(0xd6)](this['syncData'],_0x35b3e5(0xbd)),this[_0x35b3e5(0xe4)][_0x35b3e5(0xc0)](this[_0x35b3e5(0x9e)]+_0x35b3e5(0xdd)),await this[_0x35b3e5(0xe7)](),await this[_0x35b3e5(0xe4)][_0x35b3e5(0xc0)](this[_0x35b3e5(0x9e)]+'\x20Checking\x20sync\x20status.')[_0x35b3e5(0xe9)]();const _0x47bcb0=await this[_0x35b3e5(0xe0)]();this[_0x35b3e5(0xe4)][_0x35b3e5(0xc0)](this[_0x35b3e5(0x9e)]+_0x35b3e5(0xdb)+_0x47bcb0+'.');if(_0x47bcb0){await this[_0x35b3e5(0xbc)]['setStatus'](this[_0x35b3e5(0xd0)],_0x35b3e5(0xa9)),await this['sfLogger']['log'](this[_0x35b3e5(0x9e)]+_0x35b3e5(0xda))[_0x35b3e5(0xe9)]();return;}const _0x345467=await this[_0x35b3e5(0xd1)](_0x40abc3);await this[_0x35b3e5(0xc5)][_0x35b3e5(0xab)](_0x345467,this[_0x35b3e5(0x9e)]),await this[_0x35b3e5(0xbc)][_0x35b3e5(0xd6)](this[_0x35b3e5(0xd0)],'Completed'),await this[_0x35b3e5(0xad)](),this[_0x35b3e5(0xe4)][_0x35b3e5(0xc0)](this['prefix']+_0x35b3e5(0xb9));}catch(_0x43e7a6){throw _0x43e7a6;}finally{await this['sfLogger'][_0x35b3e5(0xe9)]();}}};FlosumSyncJob=__decorate([typedi_1[a62_0x2de647(0xc9)]({'transient':!![]}),__metadata(a62_0x2de647(0xe8),[salesforce_sync_service_1[a62_0x2de647(0xd5)],salesforce_service_1[a62_0x2de647(0x9d)],commit_components_job_1[a62_0x2de647(0xe1)]])],FlosumSyncJob),exports[a62_0x2de647(0xc6)]=FlosumSyncJob;function a62_0x91c6(){const _0xd19559=['repositoryId','\x20Update\x20remote\x20state.','gitUrl','parse','SalesforceLogger3','getComponents','branches','SalesforceService','prefix','user','__esModule','catch','getOne','(((.+)+)+)+$','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','76QNbYMT','Sync\x20repository','982824sCDbKA','99ddsaXf','Completed','5088nFqGMc','run','7mrYjZi','updateLastCommit','get','DEFAULT_GIT_USER_EMAIL','3417702zLAqMf','17441184vGStqs','getComponentIds','updateRemoteState','name','../../../../constants','metadata','branch','__decorate','\x20Flosum\x20sync\x20job\x20done.','getBranchComponents','229156jHUPxM','salesforceSync','In\x20Progress','../../salesforce/services/salesforce-sync.service','provider','log','string',']\x20[Branch:\x20','toString','8334orOUZk','commitJob','FlosumSyncJob','function','Container','Service','../../salesforce/services/salesforce.service','components','2eSHyge','875wGxZoe','length','lastCommit','syncData','getCommitDto','SalesforceRetrieverService','object','constructor','SalesforceSyncService','setStatus','branchName','retrieveAttachment','49490yccsWS','\x20Branch\x20synchronized.\x20Skip','\x20Sync\x20status\x20','salesforceService','\x20Checking\x20repository\x20on\x20Flosum\x20side.','search','convertToSFDX','checkSyncStatus','CommitComponentsJob','repository','decorate','sfLogger','message','getComponentsFromRepository','createBranchIfNotExists','design:paramtypes','send','create','\x20Start\x20Flosum\x20sync\x20job'];a62_0x91c6=function(){return _0xd19559;};return a62_0x91c6();}