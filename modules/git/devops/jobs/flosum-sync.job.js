const a123_0x1dea33=a123_0x47fa;(function(_0x3e41b9,_0x5c9286){const _0xdc0c79=a123_0x47fa,_0x4846dd=_0x3e41b9();while(!![]){try{const _0x624049=-parseInt(_0xdc0c79(0x14a))/0x1*(parseInt(_0xdc0c79(0x11c))/0x2)+parseInt(_0xdc0c79(0x16d))/0x3+-parseInt(_0xdc0c79(0x132))/0x4*(-parseInt(_0xdc0c79(0x172))/0x5)+-parseInt(_0xdc0c79(0x122))/0x6+-parseInt(_0xdc0c79(0x127))/0x7*(-parseInt(_0xdc0c79(0x167))/0x8)+parseInt(_0xdc0c79(0x131))/0x9*(-parseInt(_0xdc0c79(0x11e))/0xa)+-parseInt(_0xdc0c79(0x145))/0xb*(-parseInt(_0xdc0c79(0x15c))/0xc);if(_0x624049===_0x5c9286)break;else _0x4846dd['push'](_0x4846dd['shift']());}catch(_0x590285){_0x4846dd['push'](_0x4846dd['shift']());}}}(a123_0x411c,0x4d12b));function a123_0x47fa(_0x2123af,_0x350f1b){const _0x1a7035=a123_0x411c();return a123_0x47fa=function(_0x273203,_0x1a1c85){_0x273203=_0x273203-0x11c;let _0x411cae=_0x1a7035[_0x273203];return _0x411cae;},a123_0x47fa(_0x2123af,_0x350f1b);}const a123_0x1a1c85=(function(){let _0x10b274=!![];return function(_0x47511e,_0x7f2068){const _0x3a491b=_0x10b274?function(){const _0x214e40=a123_0x47fa;if(_0x7f2068){const _0x25bc75=_0x7f2068[_0x214e40(0x12a)](_0x47511e,arguments);return _0x7f2068=null,_0x25bc75;}}:function(){};return _0x10b274=![],_0x3a491b;};}()),a123_0x273203=a123_0x1a1c85(this,function(){const _0x79c3a1=a123_0x47fa;return a123_0x273203[_0x79c3a1(0x12c)]()[_0x79c3a1(0x11f)](_0x79c3a1(0x162))[_0x79c3a1(0x12c)]()[_0x79c3a1(0x15e)](a123_0x273203)[_0x79c3a1(0x11f)](_0x79c3a1(0x162));});a123_0x273203();'use strict';var __decorate=this&&this['__decorate']||function(_0x53f57b,_0x417b0e,_0x487d4b,_0x10c578){const _0x3ef27f=a123_0x47fa;var _0x38f028=arguments[_0x3ef27f(0x166)],_0x2062ca=_0x38f028<0x3?_0x417b0e:_0x10c578===null?_0x10c578=Object[_0x3ef27f(0x134)](_0x417b0e,_0x487d4b):_0x10c578,_0x240e3a;if(typeof Reflect===_0x3ef27f(0x129)&&typeof Reflect[_0x3ef27f(0x16f)]===_0x3ef27f(0x151))_0x2062ca=Reflect[_0x3ef27f(0x16f)](_0x53f57b,_0x417b0e,_0x487d4b,_0x10c578);else{for(var _0x4f77ed=_0x53f57b[_0x3ef27f(0x166)]-0x1;_0x4f77ed>=0x0;_0x4f77ed--)if(_0x240e3a=_0x53f57b[_0x4f77ed])_0x2062ca=(_0x38f028<0x3?_0x240e3a(_0x2062ca):_0x38f028>0x3?_0x240e3a(_0x417b0e,_0x487d4b,_0x2062ca):_0x240e3a(_0x417b0e,_0x487d4b))||_0x2062ca;}return _0x38f028>0x3&&_0x2062ca&&Object[_0x3ef27f(0x13b)](_0x417b0e,_0x487d4b,_0x2062ca),_0x2062ca;},__metadata=this&&this['__metadata']||function(_0x43ba24,_0xae35c3){const _0x59dd58=a123_0x47fa;if(typeof Reflect===_0x59dd58(0x129)&&typeof Reflect[_0x59dd58(0x177)]===_0x59dd58(0x151))return Reflect[_0x59dd58(0x177)](_0x43ba24,_0xae35c3);};Object[a123_0x1dea33(0x13b)](exports,a123_0x1dea33(0x133),{'value':!![]}),exports[a123_0x1dea33(0x14c)]=void 0x0;const salesforce_logger_v3_service_1=require(a123_0x1dea33(0x16b)),typedi_1=require(a123_0x1dea33(0x140)),constants_1=require(a123_0x1dea33(0x171)),salesforce_retriever_service_1=require(a123_0x1dea33(0x135)),salesforce_sync_service_1=require(a123_0x1dea33(0x156)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),commit_components_dto_1=require(a123_0x1dea33(0x157)),commit_components_job_1=require(a123_0x1dea33(0x14e));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x526e3f,_0x274003,_0x1e4c0e){const _0x410d97=a123_0x1dea33;this[_0x410d97(0x11d)]=_0x526e3f,this['salesforceService']=_0x274003,this[_0x410d97(0x170)]=_0x1e4c0e;}async[a123_0x1dea33(0x14d)](){const _0x3e5911=a123_0x1dea33;let _0x497760=await this[_0x3e5911(0x126)]['branches'][_0x3e5911(0x13a)](this[_0x3e5911(0x153)][_0x3e5911(0x173)])[_0x3e5911(0x144)](()=>null);!_0x497760&&(_0x497760=await this[_0x3e5911(0x126)][_0x3e5911(0x154)][_0x3e5911(0x163)]({'name':this[_0x3e5911(0x153)][_0x3e5911(0x173)]})),this[_0x3e5911(0x120)]=_0x497760;}async[a123_0x1dea33(0x15f)](){const _0x471e80=a123_0x1dea33;return this[_0x471e80(0x153)][_0x471e80(0x168)]?this['salesforceSync']['getComponentsFromRepository'](this[_0x471e80(0x153)][_0x471e80(0x168)]):this['salesforceSync']['getBranchComponents'](this['syncData'][_0x471e80(0x165)]);}async[a123_0x1dea33(0x175)](){const _0x10ddb9=a123_0x1dea33,_0x4da19c=await this[_0x10ddb9(0x15f)](),_0x35bc95=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x10ddb9(0x169)]),_0x3b4f2a=await _0x35bc95[_0x10ddb9(0x12f)](_0x4da19c);return _0x3b4f2a;}async[a123_0x1dea33(0x146)](_0x1054f5){const _0x4ed2a3=a123_0x1dea33,_0x4bfb1b=new commit_components_dto_1[(_0x4ed2a3(0x12b))]();return _0x4bfb1b['message']=_0x4ed2a3(0x139),_0x4bfb1b[_0x4ed2a3(0x16c)]={'name':constants_1[_0x4ed2a3(0x121)],'email':constants_1[_0x4ed2a3(0x147)]},_0x4bfb1b[_0x4ed2a3(0x158)]={'writed':await this['getComponents']()},_0x4bfb1b[_0x4ed2a3(0x130)]=_0x1054f5,_0x4bfb1b[_0x4ed2a3(0x13d)]=this['repository'],_0x4bfb1b[_0x4ed2a3(0x120)]=this[_0x4ed2a3(0x120)],_0x4bfb1b[_0x4ed2a3(0x15d)]=!![],_0x4bfb1b[_0x4ed2a3(0x13c)]=this[_0x4ed2a3(0x13c)],_0x4bfb1b[_0x4ed2a3(0x123)]=this[_0x4ed2a3(0x153)][_0x4ed2a3(0x125)],_0x4bfb1b;}async[a123_0x1dea33(0x136)](){const _0x5771b7=a123_0x1dea33,_0x5e4a52=await this[_0x5771b7(0x11d)]['getRemoteStateAttachmentId'](this[_0x5771b7(0x153)]),_0x509609=await this['salesforceService'][_0x5771b7(0x143)](_0x5e4a52)['then'](_0x31af90=>typeof _0x31af90===_0x5771b7(0x124)?JSON[_0x5771b7(0x137)](_0x31af90):_0x31af90)[_0x5771b7(0x144)](()=>({}));if(_0x509609[this[_0x5771b7(0x126)]['gitUrl']]){if(_0x509609[this[_0x5771b7(0x126)][_0x5771b7(0x12d)]][_0x5771b7(0x14b)]===this[_0x5771b7(0x120)][_0x5771b7(0x15b)])return!![];}return![];}async[a123_0x1dea33(0x160)](){const _0x2c5412=a123_0x1dea33,_0x11dd6a=await this[_0x2c5412(0x126)]['branches'][_0x2c5412(0x13a)](this['branch']['name']);await this[_0x2c5412(0x15a)][_0x2c5412(0x176)](this[_0x2c5412(0x152)]+_0x2c5412(0x142));const _0x219772={[this['repository']['gitUrl']]:{'lastCommit':_0x11dd6a['sha']}};await this['salesforceSync'][_0x2c5412(0x13e)](this['syncData'],_0x219772);}async[a123_0x1dea33(0x12f)]({syncRecord:_0x2d6c86,repository:_0x2afbd5,convertToSFDX:_0x1618ac,provider:_0x17fc0b}){const _0x116a62=a123_0x1dea33;this[_0x116a62(0x153)]=_0x2d6c86,this[_0x116a62(0x13c)]=_0x17fc0b,this[_0x116a62(0x126)]=_0x2afbd5,this[_0x116a62(0x15a)]=typedi_1['Container']['get'](salesforce_logger_v3_service_1['SalesforceLogger3']),this[_0x116a62(0x152)]=_0x116a62(0x141)+this[_0x116a62(0x153)][_0x116a62(0x161)]+_0x116a62(0x159)+this[_0x116a62(0x153)][_0x116a62(0x173)]+']';try{await this[_0x116a62(0x15a)]['log'](this['prefix']+'\x20Start\x20Flosum\x20sync\x20job')[_0x116a62(0x164)](),await this['salesforceSync'][_0x116a62(0x14f)](this[_0x116a62(0x153)],_0x116a62(0x149)),this[_0x116a62(0x15a)][_0x116a62(0x176)](this['prefix']+_0x116a62(0x16e)),await this[_0x116a62(0x14d)](),await this['sfLogger'][_0x116a62(0x176)](this[_0x116a62(0x152)]+_0x116a62(0x150))[_0x116a62(0x164)]();const _0x2bc012=await this['checkSyncStatus']();this[_0x116a62(0x15a)][_0x116a62(0x176)](this[_0x116a62(0x152)]+_0x116a62(0x174)+_0x2bc012+'.');if(_0x2bc012){await this[_0x116a62(0x11d)][_0x116a62(0x14f)](this[_0x116a62(0x153)],_0x116a62(0x16a)),await this['sfLogger'][_0x116a62(0x176)](this[_0x116a62(0x152)]+_0x116a62(0x128))[_0x116a62(0x164)]();return;}const _0x463361=await this[_0x116a62(0x146)](_0x1618ac);await this[_0x116a62(0x170)]['run'](_0x463361,this['prefix']),await this[_0x116a62(0x11d)][_0x116a62(0x14f)](this['syncData'],_0x116a62(0x16a)),await this[_0x116a62(0x160)](),this[_0x116a62(0x15a)]['log'](this[_0x116a62(0x152)]+_0x116a62(0x155));}catch(_0xde361f){throw _0xde361f;}finally{await this[_0x116a62(0x15a)][_0x116a62(0x164)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a123_0x1dea33(0x148),[salesforce_sync_service_1[a123_0x1dea33(0x13f)],salesforce_service_1[a123_0x1dea33(0x138)],commit_components_job_1[a123_0x1dea33(0x12e)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;function a123_0x411c(){const _0x2082c4=['\x20Checking\x20sync\x20status.','function','prefix','syncData','branches','\x20Flosum\x20sync\x20job\x20done.','../../salesforce/services/salesforce-sync.service','../dto/commit-components.dto','components',']\x20[Branch:\x20','sfLogger','sha','3108hMqsEH','force','constructor','getComponentIds','updateLastCommit','repositoryName','(((.+)+)+)+$','create','send','branchId','length','2813560VXYzhQ','repositoryId','salesforceService','Completed','../../salesforce/services/salesforce-logger-v3.service','user','265536NeRjow','\x20Checking\x20repository\x20on\x20Flosum\x20side.','decorate','commitJob','../../../../constants','5JUPaJg','branchName','\x20Sync\x20status\x20','getComponents','log','metadata','590DQJYOM','salesforceSync','10PXxuCq','search','branch','DEFAULT_GIT_USER_NAME','900882WBSMMw','recordType','string','recordTypeName','repository','7YNnQnT','\x20Branch\x20synchronized.\x20Skip','object','apply','CommitComponentsDto','toString','gitUrl','CommitComponentsJob','run','convertToSFDX','4008951GCpLSg','1455988BtqAzp','__esModule','getOwnPropertyDescriptor','../../salesforce/services/salesforce-retriever.service','checkSyncStatus','parse','SalesforceService','Sync\x20repository','getOne','defineProperty','provider','repo','updateRemoteState','SalesforceSyncService','typedi','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','\x20Update\x20remote\x20state.','retrieveAttachment','catch','11902CBZKZr','getCommitDto','DEFAULT_GIT_USER_EMAIL','design:paramtypes','In\x20Progress','587HWMbdF','lastCommit','FlosumSyncJob','createBranchIfNotExists','./commit-components.job','setStatus'];a123_0x411c=function(){return _0x2082c4;};return a123_0x411c();}