const a106_0x5412f4=a106_0x1760;(function(_0x50de18,_0x2f0a68){const _0x449a44=a106_0x1760,_0x22d73c=_0x50de18();while(!![]){try{const _0xa15f1a=parseInt(_0x449a44(0x154))/0x1+parseInt(_0x449a44(0x15d))/0x2*(parseInt(_0x449a44(0x14e))/0x3)+-parseInt(_0x449a44(0x155))/0x4*(parseInt(_0x449a44(0x162))/0x5)+-parseInt(_0x449a44(0x13a))/0x6+-parseInt(_0x449a44(0x11c))/0x7*(parseInt(_0x449a44(0x12b))/0x8)+-parseInt(_0x449a44(0x150))/0x9+-parseInt(_0x449a44(0x151))/0xa*(-parseInt(_0x449a44(0x16e))/0xb);if(_0xa15f1a===_0x2f0a68)break;else _0x22d73c['push'](_0x22d73c['shift']());}catch(_0x1fc82d){_0x22d73c['push'](_0x22d73c['shift']());}}}(a106_0x50d4,0xee515));const a106_0x32c729=(function(){let _0xa6884b=!![];return function(_0x48653d,_0xc27a1c){const _0x101b73=_0xa6884b?function(){if(_0xc27a1c){const _0x12d570=_0xc27a1c['apply'](_0x48653d,arguments);return _0xc27a1c=null,_0x12d570;}}:function(){};return _0xa6884b=![],_0x101b73;};}()),a106_0x387336=a106_0x32c729(this,function(){const _0x139950=a106_0x1760;return a106_0x387336[_0x139950(0x138)]()[_0x139950(0x128)](_0x139950(0x141))[_0x139950(0x138)]()[_0x139950(0x157)](a106_0x387336)['search'](_0x139950(0x141));});a106_0x387336();function a106_0x50d4(){const _0x5ef4c1=['getCommitDto','Sync\x20repository','search','branchId','checkSyncStatus','40eNfkAg','updateRemoteState','SalesforceLogger3','repositoryName','CommitComponentsJob','../../salesforce/services/salesforce.service','components','object','typedi','Service','send','design:paramtypes','metadata','toString','branch','5012376wnQOjj','lastCommit','string','setStatus','catch','\x20Update\x20remote\x20state.','DEFAULT_GIT_USER_EMAIL','(((.+)+)+)+$','updateLastCommit','getRemoteStateAttachmentId','\x20Checking\x20sync\x20status.','./commit-components.job','getComponentIds','DEFAULT_GIT_USER_NAME','message','../../../../constants','Container','name','../../salesforce/services/salesforce-sync.service','retrieveAttachment','6315TiLqXg','syncData','17353224ugJiHH','33890KMzWFO','gitUrl','repositoryId','488110uJpUeK','958036lNCCfB','prefix','constructor','SalesforceRetrieverService','commitJob','defineProperty','createBranchIfNotExists','getBranchComponents','1734HyLmdh','user','FlosumSyncJob','decorate','provider','40WntOqv','sfLogger','getComponentsFromRepository','SalesforceSyncService','In\x20Progress','SalesforceService','Completed','getComponents','create','repository','branches','salesforceSync','12177XEaDFi','__decorate','convertToSFDX',']\x20[Branch:\x20','branchName','salesforceService','572621mKrhvF','../dto/commit-components.dto','\x20Sync\x20status\x20','run','function','__esModule','CommitComponentsDto','sha','log','getOne'];a106_0x50d4=function(){return _0x5ef4c1;};return a106_0x50d4();}'use strict';function a106_0x1760(_0x4bbed8,_0xf29e6a){const _0x168a18=a106_0x50d4();return a106_0x1760=function(_0x387336,_0x32c729){_0x387336=_0x387336-0x11c;let _0x50d41f=_0x168a18[_0x387336];return _0x50d41f;},a106_0x1760(_0x4bbed8,_0xf29e6a);}var __decorate=this&&this[a106_0x5412f4(0x16f)]||function(_0x2eca40,_0x3fab43,_0x33516d,_0x494ab7){const _0x4f94f4=a106_0x5412f4;var _0x4d069e=arguments['length'],_0x2d2a2b=_0x4d069e<0x3?_0x3fab43:_0x494ab7===null?_0x494ab7=Object['getOwnPropertyDescriptor'](_0x3fab43,_0x33516d):_0x494ab7,_0x1d8fcb;if(typeof Reflect===_0x4f94f4(0x132)&&typeof Reflect['decorate']===_0x4f94f4(0x120))_0x2d2a2b=Reflect[_0x4f94f4(0x160)](_0x2eca40,_0x3fab43,_0x33516d,_0x494ab7);else{for(var _0x29f31a=_0x2eca40['length']-0x1;_0x29f31a>=0x0;_0x29f31a--)if(_0x1d8fcb=_0x2eca40[_0x29f31a])_0x2d2a2b=(_0x4d069e<0x3?_0x1d8fcb(_0x2d2a2b):_0x4d069e>0x3?_0x1d8fcb(_0x3fab43,_0x33516d,_0x2d2a2b):_0x1d8fcb(_0x3fab43,_0x33516d))||_0x2d2a2b;}return _0x4d069e>0x3&&_0x2d2a2b&&Object[_0x4f94f4(0x15a)](_0x3fab43,_0x33516d,_0x2d2a2b),_0x2d2a2b;},__metadata=this&&this['__metadata']||function(_0xe2b021,_0x25c572){const _0x2f3e23=a106_0x5412f4;if(typeof Reflect==='object'&&typeof Reflect[_0x2f3e23(0x137)]===_0x2f3e23(0x120))return Reflect[_0x2f3e23(0x137)](_0xe2b021,_0x25c572);};Object['defineProperty'](exports,a106_0x5412f4(0x121),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a106_0x5412f4(0x133)),constants_1=require(a106_0x5412f4(0x149)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a106_0x5412f4(0x14c)),salesforce_service_1=require(a106_0x5412f4(0x130)),commit_components_dto_1=require(a106_0x5412f4(0x11d)),commit_components_job_1=require(a106_0x5412f4(0x145));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x1d4fe5,_0x31c11b,_0x32e32a){const _0x5d9221=a106_0x5412f4;this[_0x5d9221(0x16d)]=_0x1d4fe5,this['salesforceService']=_0x31c11b,this[_0x5d9221(0x159)]=_0x32e32a;}async['createBranchIfNotExists'](){const _0x55f132=a106_0x5412f4;let _0x415d98=await this[_0x55f132(0x16b)][_0x55f132(0x16c)][_0x55f132(0x125)](this['syncData'][_0x55f132(0x172)])[_0x55f132(0x13e)](()=>null);!_0x415d98&&(_0x415d98=await this[_0x55f132(0x16b)][_0x55f132(0x16c)][_0x55f132(0x16a)]({'name':this[_0x55f132(0x14f)]['branchName']})),this[_0x55f132(0x139)]=_0x415d98;}async[a106_0x5412f4(0x146)](){const _0x3b171b=a106_0x5412f4;return this[_0x3b171b(0x14f)]['repositoryId']?this[_0x3b171b(0x16d)][_0x3b171b(0x164)](this['syncData'][_0x3b171b(0x153)]):this['salesforceSync'][_0x3b171b(0x15c)](this[_0x3b171b(0x14f)][_0x3b171b(0x129)]);}async[a106_0x5412f4(0x169)](){const _0x5029dd=a106_0x5412f4,_0xd3a8f9=await this[_0x5029dd(0x146)](),_0x2813db=new salesforce_retriever_service_1[(_0x5029dd(0x158))](this[_0x5029dd(0x173)]),_0x5e245e=await _0x2813db[_0x5029dd(0x11f)](_0xd3a8f9);return _0x5e245e;}async[a106_0x5412f4(0x126)](_0x2ce628){const _0x1d241d=a106_0x5412f4,_0x115cf6=new commit_components_dto_1[(_0x1d241d(0x122))]();return _0x115cf6[_0x1d241d(0x148)]=_0x1d241d(0x127),_0x115cf6[_0x1d241d(0x15e)]={'name':constants_1[_0x1d241d(0x147)],'email':constants_1[_0x1d241d(0x140)]},_0x115cf6[_0x1d241d(0x131)]={'writed':await this['getComponents']()},_0x115cf6[_0x1d241d(0x170)]=_0x2ce628,_0x115cf6['repo']=this[_0x1d241d(0x16b)],_0x115cf6[_0x1d241d(0x139)]=this[_0x1d241d(0x139)],_0x115cf6['force']=!![],_0x115cf6[_0x1d241d(0x161)]=this[_0x1d241d(0x161)],_0x115cf6;}async[a106_0x5412f4(0x12a)](){const _0xfae44e=a106_0x5412f4,_0x15eeed=await this[_0xfae44e(0x16d)][_0xfae44e(0x143)](this['syncData']),_0x3d4365=await this[_0xfae44e(0x173)][_0xfae44e(0x14d)](_0x15eeed)['then'](_0x4c27af=>typeof _0x4c27af===_0xfae44e(0x13c)?JSON['parse'](_0x4c27af):_0x4c27af)[_0xfae44e(0x13e)](()=>({}));if(_0x3d4365[this[_0xfae44e(0x16b)][_0xfae44e(0x152)]]){if(_0x3d4365[this[_0xfae44e(0x16b)][_0xfae44e(0x152)]][_0xfae44e(0x13b)]===this[_0xfae44e(0x139)][_0xfae44e(0x123)])return!![];}return![];}async['updateLastCommit'](){const _0x4ef2d6=a106_0x5412f4,_0x363169=await this[_0x4ef2d6(0x16b)][_0x4ef2d6(0x16c)][_0x4ef2d6(0x125)](this[_0x4ef2d6(0x139)][_0x4ef2d6(0x14b)]);await this[_0x4ef2d6(0x163)]['log'](this['prefix']+_0x4ef2d6(0x13f));const _0x4c3c50={[this[_0x4ef2d6(0x16b)][_0x4ef2d6(0x152)]]:{'lastCommit':_0x363169['sha']}};await this['salesforceSync'][_0x4ef2d6(0x12c)](this[_0x4ef2d6(0x14f)],_0x4c3c50);}async[a106_0x5412f4(0x11f)]({syncRecord:_0x5da1bc,repository:_0xc33255,convertToSFDX:_0x36c412,provider:_0x12571f}){const _0x3c5f20=a106_0x5412f4;this[_0x3c5f20(0x14f)]=_0x5da1bc,this[_0x3c5f20(0x161)]=_0x12571f,this['repository']=_0xc33255,this[_0x3c5f20(0x163)]=typedi_1[_0x3c5f20(0x14a)]['get'](salesforce_logger_v3_service_1[_0x3c5f20(0x12d)]),this[_0x3c5f20(0x156)]='[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this['syncData'][_0x3c5f20(0x12e)]+_0x3c5f20(0x171)+this[_0x3c5f20(0x14f)][_0x3c5f20(0x172)]+']';try{await this[_0x3c5f20(0x163)][_0x3c5f20(0x124)](this[_0x3c5f20(0x156)]+'\x20Start\x20Flosum\x20sync\x20job')[_0x3c5f20(0x135)](),await this[_0x3c5f20(0x16d)][_0x3c5f20(0x13d)](this[_0x3c5f20(0x14f)],_0x3c5f20(0x166)),this[_0x3c5f20(0x163)][_0x3c5f20(0x124)](this[_0x3c5f20(0x156)]+'\x20Checking\x20repository\x20on\x20Flosum\x20side.'),await this[_0x3c5f20(0x15b)](),await this[_0x3c5f20(0x163)]['log'](this[_0x3c5f20(0x156)]+_0x3c5f20(0x144))['send']();const _0x1e9f04=await this[_0x3c5f20(0x12a)]();this[_0x3c5f20(0x163)][_0x3c5f20(0x124)](this['prefix']+_0x3c5f20(0x11e)+_0x1e9f04+'.');if(_0x1e9f04){await this[_0x3c5f20(0x16d)]['setStatus'](this[_0x3c5f20(0x14f)],_0x3c5f20(0x168)),await this[_0x3c5f20(0x163)][_0x3c5f20(0x124)](this[_0x3c5f20(0x156)]+'\x20Branch\x20synchronized.\x20Skip')[_0x3c5f20(0x135)]();return;}const _0x59af04=await this[_0x3c5f20(0x126)](_0x36c412);await this[_0x3c5f20(0x159)][_0x3c5f20(0x11f)](_0x59af04,this[_0x3c5f20(0x156)]),await this[_0x3c5f20(0x16d)][_0x3c5f20(0x13d)](this[_0x3c5f20(0x14f)],_0x3c5f20(0x168)),await this[_0x3c5f20(0x142)](),this[_0x3c5f20(0x163)][_0x3c5f20(0x124)](this[_0x3c5f20(0x156)]+'\x20Flosum\x20sync\x20job\x20done.');}catch(_0x23aaf8){throw _0x23aaf8;}finally{await this['sfLogger'][_0x3c5f20(0x135)]();}}};FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x5412f4(0x134)])({'transient':!![]}),__metadata(a106_0x5412f4(0x136),[salesforce_sync_service_1[a106_0x5412f4(0x165)],salesforce_service_1[a106_0x5412f4(0x167)],commit_components_job_1[a106_0x5412f4(0x12f)]])],FlosumSyncJob),exports[a106_0x5412f4(0x15f)]=FlosumSyncJob;