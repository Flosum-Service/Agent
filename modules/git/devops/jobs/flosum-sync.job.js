const a106_0x3e62b7=a106_0x463a;(function(_0x3d8bc6,_0x5b1a05){const _0x2045f4=a106_0x463a,_0x939c16=_0x3d8bc6();while(!![]){try{const _0x31d2b4=parseInt(_0x2045f4(0x1c9))/0x1+-parseInt(_0x2045f4(0x1b1))/0x2*(-parseInt(_0x2045f4(0x1e5))/0x3)+-parseInt(_0x2045f4(0x1d1))/0x4*(parseInt(_0x2045f4(0x1f5))/0x5)+-parseInt(_0x2045f4(0x1a7))/0x6+-parseInt(_0x2045f4(0x1c4))/0x7+-parseInt(_0x2045f4(0x1d7))/0x8*(parseInt(_0x2045f4(0x1ef))/0x9)+parseInt(_0x2045f4(0x1a3))/0xa*(parseInt(_0x2045f4(0x1e0))/0xb);if(_0x31d2b4===_0x5b1a05)break;else _0x939c16['push'](_0x939c16['shift']());}catch(_0x41a511){_0x939c16['push'](_0x939c16['shift']());}}}(a106_0x355b,0x70673));const a106_0x56eda5=(function(){let _0xf4ec9a=!![];return function(_0x3a2576,_0x549c77){const _0x33f4cc=_0xf4ec9a?function(){const _0x860453=a106_0x463a;if(_0x549c77){const _0x3241ac=_0x549c77[_0x860453(0x1ee)](_0x3a2576,arguments);return _0x549c77=null,_0x3241ac;}}:function(){};return _0xf4ec9a=![],_0x33f4cc;};}()),a106_0x387927=a106_0x56eda5(this,function(){const _0xe32b08=a106_0x463a;return a106_0x387927['toString']()[_0xe32b08(0x1bd)]('(((.+)+)+)+$')[_0xe32b08(0x1a8)]()['constructor'](a106_0x387927)[_0xe32b08(0x1bd)](_0xe32b08(0x1e9));});a106_0x387927();'use strict';var __decorate=this&&this[a106_0x3e62b7(0x1c7)]||function(_0x32fc47,_0x50be2f,_0x46710c,_0x5d1978){const _0x35fa52=a106_0x3e62b7;var _0x2ea7c2=arguments[_0x35fa52(0x1c3)],_0x3d1d5b=_0x2ea7c2<0x3?_0x50be2f:_0x5d1978===null?_0x5d1978=Object[_0x35fa52(0x1e4)](_0x50be2f,_0x46710c):_0x5d1978,_0x1385ed;if(typeof Reflect===_0x35fa52(0x1ae)&&typeof Reflect[_0x35fa52(0x1ad)]==='function')_0x3d1d5b=Reflect[_0x35fa52(0x1ad)](_0x32fc47,_0x50be2f,_0x46710c,_0x5d1978);else{for(var _0x1ff64e=_0x32fc47['length']-0x1;_0x1ff64e>=0x0;_0x1ff64e--)if(_0x1385ed=_0x32fc47[_0x1ff64e])_0x3d1d5b=(_0x2ea7c2<0x3?_0x1385ed(_0x3d1d5b):_0x2ea7c2>0x3?_0x1385ed(_0x50be2f,_0x46710c,_0x3d1d5b):_0x1385ed(_0x50be2f,_0x46710c))||_0x3d1d5b;}return _0x2ea7c2>0x3&&_0x3d1d5b&&Object[_0x35fa52(0x1e6)](_0x50be2f,_0x46710c,_0x3d1d5b),_0x3d1d5b;},__metadata=this&&this[a106_0x3e62b7(0x1cc)]||function(_0x58323b,_0x5beb1c){const _0x50e3f=a106_0x3e62b7;if(typeof Reflect===_0x50e3f(0x1ae)&&typeof Reflect['metadata']===_0x50e3f(0x1e7))return Reflect[_0x50e3f(0x1b4)](_0x58323b,_0x5beb1c);};Object[a106_0x3e62b7(0x1e6)](exports,'__esModule',{'value':!![]}),exports[a106_0x3e62b7(0x1d8)]=void 0x0;const salesforce_logger_v3_service_1=require('../../salesforce/services/salesforce-logger-v3.service'),typedi_1=require(a106_0x3e62b7(0x1f3)),constants_1=require(a106_0x3e62b7(0x1c5)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a106_0x3e62b7(0x1b8)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a106_0x3e62b7(0x1b7));function a106_0x463a(_0x341afd,_0x49c286){const _0x691dae=a106_0x355b();return a106_0x463a=function(_0x387927,_0x56eda5){_0x387927=_0x387927-0x19e;let _0x355b7a=_0x691dae[_0x387927];return _0x355b7a;},a106_0x463a(_0x341afd,_0x49c286);}let FlosumSyncJob=class FlosumSyncJob{constructor(_0x4ff25d,_0x4b4b88,_0x15075d){const _0x481fe9=a106_0x3e62b7;this[_0x481fe9(0x1e1)]=_0x4ff25d,this[_0x481fe9(0x1ce)]=_0x4b4b88,this[_0x481fe9(0x1f0)]=_0x15075d;}async[a106_0x3e62b7(0x1f1)](){const _0x4be709=a106_0x3e62b7;let _0x4d4160=await this['repository'][_0x4be709(0x1dd)]['getOne'](this[_0x4be709(0x1b9)][_0x4be709(0x1a2)])['catch'](()=>null);!_0x4d4160&&(_0x4d4160=await this[_0x4be709(0x1dc)][_0x4be709(0x1dd)][_0x4be709(0x1d4)]({'name':this[_0x4be709(0x1b9)]['branchName']})),this[_0x4be709(0x1ab)]=_0x4d4160;}async[a106_0x3e62b7(0x1a0)](){const _0x4b0d7d=a106_0x3e62b7;return this[_0x4b0d7d(0x1b9)][_0x4b0d7d(0x1cd)]?this[_0x4b0d7d(0x1e1)][_0x4b0d7d(0x1d5)](this[_0x4b0d7d(0x1b9)][_0x4b0d7d(0x1cd)]):this['salesforceSync'][_0x4b0d7d(0x19e)](this[_0x4b0d7d(0x1b9)][_0x4b0d7d(0x1d6)]);}async[a106_0x3e62b7(0x19f)](){const _0x200089=a106_0x3e62b7,_0x55015e=await this['getComponentIds'](),_0x43cde4=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x200089(0x1ce)]),_0x1abaab=await _0x43cde4[_0x200089(0x1a9)](_0x55015e);return _0x1abaab;}async[a106_0x3e62b7(0x1b0)](_0x106450){const _0x95bad=a106_0x3e62b7,_0x3a8929=new commit_components_dto_1[(_0x95bad(0x1a4))]();return _0x3a8929['message']='Sync\x20repository',_0x3a8929[_0x95bad(0x1b6)]={'name':constants_1[_0x95bad(0x1af)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x3a8929[_0x95bad(0x1a1)]={'writed':await this['getComponents']()},_0x3a8929[_0x95bad(0x1bb)]=_0x106450,_0x3a8929['repo']=this[_0x95bad(0x1dc)],_0x3a8929[_0x95bad(0x1ab)]=this[_0x95bad(0x1ab)],_0x3a8929[_0x95bad(0x1d0)]=!![],_0x3a8929['provider']=this[_0x95bad(0x1f4)],_0x3a8929;}async['checkSyncStatus'](){const _0x2dfefd=a106_0x3e62b7,_0x30bd6c=await this['salesforceSync'][_0x2dfefd(0x1de)](this[_0x2dfefd(0x1b9)]),_0x1605c9=await this[_0x2dfefd(0x1ce)][_0x2dfefd(0x1d9)](_0x30bd6c)[_0x2dfefd(0x1c8)](_0x4b052e=>typeof _0x4b052e===_0x2dfefd(0x1aa)?JSON[_0x2dfefd(0x1e8)](_0x4b052e):_0x4b052e)['catch'](()=>({}));if(_0x1605c9[this[_0x2dfefd(0x1dc)][_0x2dfefd(0x1e2)]]){if(_0x1605c9[this[_0x2dfefd(0x1dc)][_0x2dfefd(0x1e2)]][_0x2dfefd(0x1d3)]===this[_0x2dfefd(0x1ab)][_0x2dfefd(0x1c2)])return!![];}return![];}async['updateLastCommit'](){const _0x153012=a106_0x3e62b7,_0x1f1fbc=await this['repository'][_0x153012(0x1dd)][_0x153012(0x1bf)](this[_0x153012(0x1ab)][_0x153012(0x1ec)]);await this['sfLogger'][_0x153012(0x1ca)](this[_0x153012(0x1c1)]+_0x153012(0x1cf));const _0x2347c1={[this[_0x153012(0x1dc)][_0x153012(0x1e2)]]:{'lastCommit':_0x1f1fbc[_0x153012(0x1c2)]}};await this['salesforceSync'][_0x153012(0x1a6)](this[_0x153012(0x1b9)],_0x2347c1);}async[a106_0x3e62b7(0x1a9)]({syncRecord:_0x4654b9,repository:_0x40c902,convertToSFDX:_0x4b80e1,provider:_0x550f98}){const _0x4ddc20=a106_0x3e62b7;this[_0x4ddc20(0x1b9)]=_0x4654b9,this[_0x4ddc20(0x1f4)]=_0x550f98,this['repository']=_0x40c902,this[_0x4ddc20(0x1b2)]=typedi_1[_0x4ddc20(0x1b3)]['get'](salesforce_logger_v3_service_1[_0x4ddc20(0x1ba)]),this[_0x4ddc20(0x1c1)]=_0x4ddc20(0x1eb)+this['syncData']['repositoryName']+_0x4ddc20(0x1e3)+this[_0x4ddc20(0x1b9)]['branchName']+']';try{await this[_0x4ddc20(0x1b2)][_0x4ddc20(0x1ca)](this[_0x4ddc20(0x1c1)]+_0x4ddc20(0x1db))[_0x4ddc20(0x1cb)](),await this['salesforceSync'][_0x4ddc20(0x1ea)](this[_0x4ddc20(0x1b9)],_0x4ddc20(0x1da)),this['sfLogger'][_0x4ddc20(0x1ca)](this[_0x4ddc20(0x1c1)]+_0x4ddc20(0x1ac)),await this[_0x4ddc20(0x1f1)](),await this['sfLogger'][_0x4ddc20(0x1ca)](this['prefix']+_0x4ddc20(0x1bc))['send']();const _0x10e686=await this['checkSyncStatus']();this[_0x4ddc20(0x1b2)][_0x4ddc20(0x1ca)](this[_0x4ddc20(0x1c1)]+_0x4ddc20(0x1b5)+_0x10e686+'.');if(_0x10e686){await this[_0x4ddc20(0x1e1)][_0x4ddc20(0x1ea)](this[_0x4ddc20(0x1b9)],_0x4ddc20(0x1d2)),await this[_0x4ddc20(0x1b2)][_0x4ddc20(0x1ca)](this[_0x4ddc20(0x1c1)]+_0x4ddc20(0x1a5))[_0x4ddc20(0x1cb)]();return;}const _0x4cd4fb=await this[_0x4ddc20(0x1b0)](_0x4b80e1);await this[_0x4ddc20(0x1f0)][_0x4ddc20(0x1a9)](_0x4cd4fb,this[_0x4ddc20(0x1c1)]),await this[_0x4ddc20(0x1e1)][_0x4ddc20(0x1ea)](this[_0x4ddc20(0x1b9)],'Completed'),await this[_0x4ddc20(0x1be)](),this[_0x4ddc20(0x1b2)]['log'](this[_0x4ddc20(0x1c1)]+_0x4ddc20(0x1c0));}catch(_0x35038b){throw _0x35038b;}finally{await this['sfLogger'][_0x4ddc20(0x1cb)]();}}};function a106_0x355b(){const _0x3e2e12=['160yupHhv','CommitComponentsDto','\x20Branch\x20synchronized.\x20Skip','updateRemoteState','830598FoTffn','toString','run','string','branch','\x20Checking\x20repository\x20on\x20Flosum\x20side.','decorate','object','DEFAULT_GIT_USER_NAME','getCommitDto','46srXKEm','sfLogger','Container','metadata','\x20Sync\x20status\x20','user','./commit-components.job','../../salesforce/services/salesforce.service','syncData','SalesforceLogger3','convertToSFDX','\x20Checking\x20sync\x20status.','search','updateLastCommit','getOne','\x20Flosum\x20sync\x20job\x20done.','prefix','sha','length','3568390NYqlrf','../../../../constants','SalesforceService','__decorate','then','175965gWRmCK','log','send','__metadata','repositoryId','salesforceService','\x20Update\x20remote\x20state.','force','4trCxNS','Completed','lastCommit','create','getComponentsFromRepository','branchId','104CFyLoA','FlosumSyncJob','retrieveAttachment','In\x20Progress','\x20Start\x20Flosum\x20sync\x20job','repository','branches','getRemoteStateAttachmentId','CommitComponentsJob','861311JawRRM','salesforceSync','gitUrl',']\x20[Branch:\x20','getOwnPropertyDescriptor','108915uiKNWJ','defineProperty','function','parse','(((.+)+)+)+$','setStatus','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','name','Service','apply','518463JhSsqG','commitJob','createBranchIfNotExists','SalesforceSyncService','typedi','provider','2031495PADbOz','getBranchComponents','getComponents','getComponentIds','components','branchName'];a106_0x355b=function(){return _0x3e2e12;};return a106_0x355b();}FlosumSyncJob=__decorate([(0x0,typedi_1[a106_0x3e62b7(0x1ed)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_sync_service_1[a106_0x3e62b7(0x1f2)],salesforce_service_1[a106_0x3e62b7(0x1c6)],commit_components_job_1[a106_0x3e62b7(0x1df)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;