function a105_0x5039(_0x1f30f3,_0x57d95a){const _0x49b325=a105_0x38e0();return a105_0x5039=function(_0x27b57a,_0x3358c6){_0x27b57a=_0x27b57a-0x149;let _0x38e0a6=_0x49b325[_0x27b57a];return _0x38e0a6;},a105_0x5039(_0x1f30f3,_0x57d95a);}const a105_0x5784b2=a105_0x5039;(function(_0x43c24e,_0x5e3a46){const _0x5482da=a105_0x5039,_0x9cf97e=_0x43c24e();while(!![]){try{const _0x1f9116=parseInt(_0x5482da(0x170))/0x1*(parseInt(_0x5482da(0x176))/0x2)+-parseInt(_0x5482da(0x165))/0x3*(-parseInt(_0x5482da(0x14b))/0x4)+-parseInt(_0x5482da(0x175))/0x5+parseInt(_0x5482da(0x158))/0x6*(parseInt(_0x5482da(0x18c))/0x7)+parseInt(_0x5482da(0x1ae))/0x8*(-parseInt(_0x5482da(0x1b4))/0x9)+parseInt(_0x5482da(0x196))/0xa+-parseInt(_0x5482da(0x18a))/0xb;if(_0x1f9116===_0x5e3a46)break;else _0x9cf97e['push'](_0x9cf97e['shift']());}catch(_0x31ff39){_0x9cf97e['push'](_0x9cf97e['shift']());}}}(a105_0x38e0,0x7db62));const a105_0x3358c6=(function(){let _0x3055c9=!![];return function(_0x4aada6,_0x2ef0fb){const _0x128baa=_0x3055c9?function(){if(_0x2ef0fb){const _0x3b7161=_0x2ef0fb['apply'](_0x4aada6,arguments);return _0x2ef0fb=null,_0x3b7161;}}:function(){};return _0x3055c9=![],_0x128baa;};}()),a105_0x27b57a=a105_0x3358c6(this,function(){const _0x38de5e=a105_0x5039;return a105_0x27b57a['toString']()[_0x38de5e(0x178)](_0x38de5e(0x19b))['toString']()[_0x38de5e(0x18b)](a105_0x27b57a)['search'](_0x38de5e(0x19b));});a105_0x27b57a();function a105_0x38e0(){const _0x3538bc=['deleteAttachment','getRepositoryRecord','typedi','toUpperCase','gitApiService','fetchRepositoryData','message','branches','salesforceSync','provider','repositoryData','prefix','3VaXzaf',']\x20[','CommitComponentsDto','commitData','map','get','log','config','gitProvider','getBranchRecord','sfLogger','483639gfDWjE','__decorate','CommitComponentsJob','metadata','repoService','2835695eLCIFY','2lfupjo','name','search','all','default','run','./commit-components.job','design:paramtypes','BadRequestError','commitAttachmentId','SalesforceSyncService','split','length','\x20Start\x20Flosum\x20commit\x20job.','convertToSFDX','catch','syncBranchId','repository','ERR_INVALID_SYNC_RECORD_ID','__esModule','13332858cvpAES','constructor','16457fuzTUJ','function','then','FLOSUM_ATTACHMENT','isConvertToSfdx','../../salesforce/services/salesforce-sync.service','getComponentsToDelete','../../salesforce/services/salesforce.service','getComponentsToWrite','SalesforceService','7305460LFsFDk','../../../../constants/errors','updateLastCommit','setStatus','FlosumCommitJob','(((.+)+)+)+$','[FLOSUM\x20->\x20GIT]\x20[','../../providers/providers.tokens','Container','defineProperty',']\x20[Branch:\x20','sha',']\x20[Repository:\x20','In\x20Progress','retrieveAttachment','commitJob','object','logger','../../salesforce/services/salesforce-retriever.service','error','getCommitDto','repositoryName','gitUrl','ERR_UNKNOWN_SYNC_RECORD_ID','112SOpFMt','gitRepoService','exec','Error','__importDefault','handleCommitJobError','167796JpvAkV','decorate','user','SalesforceRetrieverService','2081852XxWWSH','salesforceService','updateRemoteState','Logger','deleteAttachmentId','syncRepositoryId','\x20Update\x20remote\x20state.','branch','branchName','patchObject','Tokens','getOne','trim','2094XNNHzq'];a105_0x38e0=function(){return _0x3538bc;};return a105_0x38e0();}'use strict';var __decorate=this&&this[a105_0x5784b2(0x171)]||function(_0xd36c0d,_0xa90dee,_0x53d630,_0x3a1e0d){const _0x1691c0=a105_0x5784b2;var _0x2a193f=arguments[_0x1691c0(0x182)],_0x406303=_0x2a193f<0x3?_0xa90dee:_0x3a1e0d===null?_0x3a1e0d=Object['getOwnPropertyDescriptor'](_0xa90dee,_0x53d630):_0x3a1e0d,_0xcdee1b;if(typeof Reflect==='object'&&typeof Reflect[_0x1691c0(0x1b5)]==='function')_0x406303=Reflect[_0x1691c0(0x1b5)](_0xd36c0d,_0xa90dee,_0x53d630,_0x3a1e0d);else{for(var _0x372d8e=_0xd36c0d[_0x1691c0(0x182)]-0x1;_0x372d8e>=0x0;_0x372d8e--)if(_0xcdee1b=_0xd36c0d[_0x372d8e])_0x406303=(_0x2a193f<0x3?_0xcdee1b(_0x406303):_0x2a193f>0x3?_0xcdee1b(_0xa90dee,_0x53d630,_0x406303):_0xcdee1b(_0xa90dee,_0x53d630))||_0x406303;}return _0x2a193f>0x3&&_0x406303&&Object['defineProperty'](_0xa90dee,_0x53d630,_0x406303),_0x406303;},__metadata=this&&this['__metadata']||function(_0x32a6a3,_0x466b48){const _0x224771=a105_0x5784b2;if(typeof Reflect===_0x224771(0x1a6)&&typeof Reflect['metadata']===_0x224771(0x18d))return Reflect[_0x224771(0x173)](_0x32a6a3,_0x466b48);},__importDefault=this&&this[a105_0x5784b2(0x1b2)]||function(_0x468c29){const _0x1c1372=a105_0x5784b2;return _0x468c29&&_0x468c29[_0x1c1372(0x189)]?_0x468c29:{'default':_0x468c29};},FlosumCommitJob_1;Object[a105_0x5784b2(0x19f)](exports,a105_0x5784b2(0x189),{'value':!![]}),exports[a105_0x5784b2(0x19a)]=void 0x0;const core_1=require('../../../../core'),salesforce_service_1=require(a105_0x5784b2(0x193)),typedi_1=require(a105_0x5784b2(0x15b)),errors_1=require(a105_0x5784b2(0x197)),bad_request_error_1=require('../../../../core/errors/bad-request.error'),salesforce_retriever_service_1=require(a105_0x5784b2(0x1a8)),salesforce_sync_service_1=require(a105_0x5784b2(0x191)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a105_0x5784b2(0x17c)),constants_1=require('../../../../constants'),shortid_1=__importDefault(require('shortid')),providers_tokens_1=require(a105_0x5784b2(0x19d));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x1bddac,_0x36611a,_0xa9b31b){const _0x13bc81=a105_0x5784b2;this[_0x13bc81(0x14c)]=_0x1bddac,this['commitJob']=_0x36611a,this[_0x13bc81(0x161)]=_0xa9b31b,this[_0x13bc81(0x1a7)]=new core_1[(_0x13bc81(0x14e))](FlosumCommitJob_1[_0x13bc81(0x177)]);}async['fetchRepositoryData'](){const _0x51b589=a105_0x5784b2;try{if(this['commitData'][_0x51b589(0x150)])this[_0x51b589(0x163)]=await this[_0x51b589(0x161)][_0x51b589(0x15a)](this[_0x51b589(0x168)]['syncRepositoryId']);else this['commitData'][_0x51b589(0x186)]&&(this[_0x51b589(0x163)]=await this[_0x51b589(0x161)][_0x51b589(0x16e)](this['commitData']['syncBranchId']));}catch(_0x4c1da1){throw new bad_request_error_1[(_0x51b589(0x17e))](errors_1[_0x51b589(0x188)]);}}async[a105_0x5784b2(0x194)](){const _0xc60fa7=a105_0x5784b2;if(!this[_0xc60fa7(0x168)][_0xc60fa7(0x17f)])return[];await this[_0xc60fa7(0x14c)][_0xc60fa7(0x154)](constants_1[_0xc60fa7(0x18f)],this[_0xc60fa7(0x168)][_0xc60fa7(0x17f)],{'Name':(0x0,shortid_1['default'])()});const _0x10c032=await this[_0xc60fa7(0x14c)][_0xc60fa7(0x1a4)](this['commitData'][_0xc60fa7(0x17f)])[_0xc60fa7(0x18e)](_0x21a6aa=>_0x21a6aa[_0xc60fa7(0x181)]('\x20')[_0xc60fa7(0x169)](_0x41826c=>_0x41826c[_0xc60fa7(0x157)]()));await this[_0xc60fa7(0x14c)][_0xc60fa7(0x159)](this[_0xc60fa7(0x168)][_0xc60fa7(0x17f)]);const _0x2a0812=new salesforce_retriever_service_1[(_0xc60fa7(0x14a))](this['salesforceService']);return await _0x2a0812[_0xc60fa7(0x17b)](_0x10c032);}async['getComponentsToDelete'](){const _0x30745f=a105_0x5784b2;if(!this[_0x30745f(0x168)][_0x30745f(0x14f)])return[];await this[_0x30745f(0x14c)]['patchObject'](constants_1[_0x30745f(0x18f)],this[_0x30745f(0x168)][_0x30745f(0x14f)],{'Name':(0x0,shortid_1[_0x30745f(0x17a)])()});const _0x175b28=await this[_0x30745f(0x14c)][_0x30745f(0x1a4)](this[_0x30745f(0x168)]['deleteAttachmentId']);return await this[_0x30745f(0x14c)][_0x30745f(0x159)](this[_0x30745f(0x168)][_0x30745f(0x14f)]),_0x175b28;}async['getCommitDto'](){const _0x1ea4cf=a105_0x5784b2,_0x3efe03=new commit_components_dto_1[(_0x1ea4cf(0x167))](),[_0x44d06b,_0x343918]=await Promise[_0x1ea4cf(0x179)]([this[_0x1ea4cf(0x194)](),this[_0x1ea4cf(0x192)]()]);return _0x3efe03[_0x1ea4cf(0x15f)]=this[_0x1ea4cf(0x168)][_0x1ea4cf(0x15f)],_0x3efe03['user']=this[_0x1ea4cf(0x168)][_0x1ea4cf(0x149)],_0x3efe03['components']={'writed':_0x44d06b,'deleted':_0x343918},_0x3efe03[_0x1ea4cf(0x184)]=this[_0x1ea4cf(0x16c)][_0x1ea4cf(0x190)],_0x3efe03['repo']=this[_0x1ea4cf(0x187)],_0x3efe03[_0x1ea4cf(0x152)]=this['branch'],_0x3efe03[_0x1ea4cf(0x162)]=this[_0x1ea4cf(0x16c)][_0x1ea4cf(0x16d)],_0x3efe03;}async[a105_0x5784b2(0x198)](_0x3bb555=![]){const _0x14d8df=a105_0x5784b2;if(_0x3bb555)await this[_0x14d8df(0x161)]['updateRemoteState'](this[_0x14d8df(0x163)],{});else{const _0x2d4c5b=await this[_0x14d8df(0x187)][_0x14d8df(0x160)][_0x14d8df(0x156)](this[_0x14d8df(0x152)]['name']);this['sfLogger'][_0x14d8df(0x16b)](this[_0x14d8df(0x164)]+_0x14d8df(0x151));const _0x376e60={[this[_0x14d8df(0x187)][_0x14d8df(0x1ac)]]:{'lastCommit':_0x2d4c5b[_0x14d8df(0x1a1)]}};await this['salesforceSync'][_0x14d8df(0x14d)](this['repositoryData'],_0x376e60);}}async['exec'](){const _0x76b1cf=a105_0x5784b2,_0x309491=await this[_0x76b1cf(0x1aa)]();await this['salesforceSync']['setStatus'](this[_0x76b1cf(0x163)],_0x76b1cf(0x1a3)),await this[_0x76b1cf(0x1a5)]['run'](_0x309491,this[_0x76b1cf(0x164)]),await this[_0x76b1cf(0x198)](),await this['salesforceSync'][_0x76b1cf(0x199)](this['repositoryData'],'Completed');}async[a105_0x5784b2(0x1b3)](_0x4d36c1){const _0x4919b7=a105_0x5784b2;try{this[_0x4919b7(0x16f)][_0x4919b7(0x1a9)](''+_0x4d36c1),await this['sfLogger']['send'](),await this[_0x4919b7(0x198)](!![]),await this[_0x4919b7(0x161)][_0x4919b7(0x199)](this[_0x4919b7(0x163)],_0x4919b7(0x1b1));}catch(_0x228935){this[_0x4919b7(0x1a7)]['error'](_0x228935);}}async[a105_0x5784b2(0x17b)](_0x4c2da0){const _0xc4c5d8=a105_0x5784b2;try{this['commitData']=_0x4c2da0,this[_0xc4c5d8(0x15d)]=typedi_1[_0xc4c5d8(0x19e)][_0xc4c5d8(0x16a)](providers_tokens_1[_0xc4c5d8(0x155)][_0xc4c5d8(0x15d)]),this[_0xc4c5d8(0x174)]=typedi_1['Container'][_0xc4c5d8(0x16a)](providers_tokens_1[_0xc4c5d8(0x155)][_0xc4c5d8(0x1af)]),this['config']=typedi_1[_0xc4c5d8(0x19e)]['get'](providers_tokens_1[_0xc4c5d8(0x155)]['config']),await this[_0xc4c5d8(0x15e)](),this[_0xc4c5d8(0x187)]=await this[_0xc4c5d8(0x174)][_0xc4c5d8(0x156)](this['repositoryData'][_0xc4c5d8(0x1ab)]),this[_0xc4c5d8(0x152)]=await this['repository']['branches'][_0xc4c5d8(0x156)](this[_0xc4c5d8(0x163)][_0xc4c5d8(0x153)]),this[_0xc4c5d8(0x16f)]=typedi_1[_0xc4c5d8(0x19e)][_0xc4c5d8(0x16a)](providers_tokens_1[_0xc4c5d8(0x155)]['logger']),this[_0xc4c5d8(0x164)]=_0xc4c5d8(0x19c)+this['config'][_0xc4c5d8(0x16d)][_0xc4c5d8(0x15c)]()+_0xc4c5d8(0x1a2)+this['repositoryData'][_0xc4c5d8(0x1ab)]+_0xc4c5d8(0x1a0)+this[_0xc4c5d8(0x163)][_0xc4c5d8(0x153)]+_0xc4c5d8(0x166)+FlosumCommitJob_1[_0xc4c5d8(0x177)]+']';if(!this[_0xc4c5d8(0x163)])throw new bad_request_error_1['BadRequestError'](errors_1[_0xc4c5d8(0x1ad)]);await this[_0xc4c5d8(0x16f)][_0xc4c5d8(0x16b)](this[_0xc4c5d8(0x164)]+_0xc4c5d8(0x183))['send'](),await this[_0xc4c5d8(0x1b0)]()[_0xc4c5d8(0x185)](_0x493a20=>this['handleCommitJobError'](_0x493a20));}catch(_0x5f021f){this[_0xc4c5d8(0x168)]=undefined,this[_0xc4c5d8(0x1a7)]['error'](_0x5f021f);throw _0x5f021f;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a105_0x5784b2(0x17d),[salesforce_service_1[a105_0x5784b2(0x195)],commit_components_job_1[a105_0x5784b2(0x172)],salesforce_sync_service_1[a105_0x5784b2(0x180)]])],FlosumCommitJob),exports[a105_0x5784b2(0x19a)]=FlosumCommitJob;