function a105_0x73f6(){const _0x32acbf=['deleteAttachment','gitApiService','logger','apply','FLOSUM_ATTACHMENT','gitUrl','getComponentsToWrite','5721660KlFxGl','gitProvider','__metadata','syncRepositoryId','metadata','getCommitDto','salesforceSync','repoService','config','../../../../core/errors/bad-request.error','salesforceService','handleCommitJobError','decorate','ERR_UNKNOWN_SYNC_RECORD_ID','commitData','__importDefault','default','get','message','../../providers/providers.tokens','error','design:paramtypes','./commit-components.job','branch','prefix','__esModule','51JhwZTs','getOne','SalesforceService','../../salesforce/services/salesforce.service','702079jjwqOu','components','retrieveAttachment','[FLOSUM\x20->\x20GIT]\x20[','CommitComponentsDto','../../../../core','log','commitAttachmentId','setStatus','all','search','Container','63HsGuhL','gitRepoService','exec','fetchRepositoryData','getComponentsToDelete','commitJob','run','toUpperCase','1835985mxBeSo','681442ItPWIn','split','FlosumCommitJob','Logger','deleteAttachmentId','../../../../constants','BadRequestError','map','then','ERR_INVALID_SYNC_RECORD_ID','provider','7501869ywcPJP','In\x20Progress','isConvertToSfdx','object','repository','send','87268MSZSXB','Error','defineProperty','toString','sfLogger','repositoryName','../../salesforce/services/salesforce-retriever.service','(((.+)+)+)+$','SalesforceRetrieverService','getOwnPropertyDescriptor','342280cEXXxH','catch','function','name',']\x20[Branch:\x20','Tokens','trim','length','repo','updateLastCommit','typedi','repositoryData','updateRemoteState','syncBranchId','user','sha','patchObject','constructor','branchName','branches'];a105_0x73f6=function(){return _0x32acbf;};return a105_0x73f6();}const a105_0x43ec09=a105_0x3de2;(function(_0x4c4a10,_0x41015c){const _0x25cddf=a105_0x3de2,_0x5630aa=_0x4c4a10();while(!![]){try{const _0x10d5e4=parseInt(_0x25cddf(0x195))/0x1+parseInt(_0x25cddf(0x1aa))/0x2+-parseInt(_0x25cddf(0x191))/0x3*(parseInt(_0x25cddf(0x1bb))/0x4)+-parseInt(_0x25cddf(0x1a9))/0x5+-parseInt(_0x25cddf(0x1e0))/0x6+parseInt(_0x25cddf(0x1a1))/0x7*(parseInt(_0x25cddf(0x1c5))/0x8)+parseInt(_0x25cddf(0x1b5))/0x9;if(_0x10d5e4===_0x41015c)break;else _0x5630aa['push'](_0x5630aa['shift']());}catch(_0x4c6612){_0x5630aa['push'](_0x5630aa['shift']());}}}(a105_0x73f6,0x8b16e));const a105_0x49c552=(function(){let _0x5a3bcc=!![];return function(_0x4e5e0f,_0x3fed75){const _0x608c9f=_0x5a3bcc?function(){const _0x5102e9=a105_0x3de2;if(_0x3fed75){const _0x334ae0=_0x3fed75[_0x5102e9(0x1dc)](_0x4e5e0f,arguments);return _0x3fed75=null,_0x334ae0;}}:function(){};return _0x5a3bcc=![],_0x608c9f;};}()),a105_0x2f6712=a105_0x49c552(this,function(){const _0x288645=a105_0x3de2;return a105_0x2f6712[_0x288645(0x1be)]()[_0x288645(0x19f)](_0x288645(0x1c2))[_0x288645(0x1be)]()[_0x288645(0x1d6)](a105_0x2f6712)[_0x288645(0x19f)](_0x288645(0x1c2));});a105_0x2f6712();'use strict';var __decorate=this&&this['__decorate']||function(_0x279867,_0x30829e,_0x341f6c,_0x340acd){const _0x12ac00=a105_0x3de2;var _0x145507=arguments[_0x12ac00(0x1cc)],_0x3569c3=_0x145507<0x3?_0x30829e:_0x340acd===null?_0x340acd=Object[_0x12ac00(0x1c4)](_0x30829e,_0x341f6c):_0x340acd,_0x437807;if(typeof Reflect===_0x12ac00(0x1b8)&&typeof Reflect[_0x12ac00(0x1ec)]===_0x12ac00(0x1c7))_0x3569c3=Reflect['decorate'](_0x279867,_0x30829e,_0x341f6c,_0x340acd);else{for(var _0x3f1263=_0x279867[_0x12ac00(0x1cc)]-0x1;_0x3f1263>=0x0;_0x3f1263--)if(_0x437807=_0x279867[_0x3f1263])_0x3569c3=(_0x145507<0x3?_0x437807(_0x3569c3):_0x145507>0x3?_0x437807(_0x30829e,_0x341f6c,_0x3569c3):_0x437807(_0x30829e,_0x341f6c))||_0x3569c3;}return _0x145507>0x3&&_0x3569c3&&Object[_0x12ac00(0x1bd)](_0x30829e,_0x341f6c,_0x3569c3),_0x3569c3;},__metadata=this&&this[a105_0x43ec09(0x1e2)]||function(_0xdaaccf,_0x1230b4){const _0x416846=a105_0x43ec09;if(typeof Reflect===_0x416846(0x1b8)&&typeof Reflect[_0x416846(0x1e4)]==='function')return Reflect[_0x416846(0x1e4)](_0xdaaccf,_0x1230b4);},__importDefault=this&&this[a105_0x43ec09(0x1ef)]||function(_0xd442cd){const _0x2c987d=a105_0x43ec09;return _0xd442cd&&_0xd442cd[_0x2c987d(0x190)]?_0xd442cd:{'default':_0xd442cd};},FlosumCommitJob_1;Object[a105_0x43ec09(0x1bd)](exports,'__esModule',{'value':!![]}),exports['FlosumCommitJob']=void 0x0;const core_1=require(a105_0x43ec09(0x19a)),salesforce_service_1=require(a105_0x43ec09(0x194)),typedi_1=require(a105_0x43ec09(0x1cf)),errors_1=require('../../../../constants/errors'),bad_request_error_1=require(a105_0x43ec09(0x1e9)),salesforce_retriever_service_1=require(a105_0x43ec09(0x1c1)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a105_0x43ec09(0x18d)),constants_1=require(a105_0x43ec09(0x1af)),shortid_1=__importDefault(require('shortid')),providers_tokens_1=require(a105_0x43ec09(0x1f3));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x38fe61,_0x427d3,_0x531131){const _0x3795ad=a105_0x43ec09;this[_0x3795ad(0x1ea)]=_0x38fe61,this[_0x3795ad(0x1a6)]=_0x427d3,this['salesforceSync']=_0x531131,this[_0x3795ad(0x1db)]=new core_1[(_0x3795ad(0x1ad))](FlosumCommitJob_1[_0x3795ad(0x1c8)]);}async[a105_0x43ec09(0x1a4)](){const _0x3e3a1a=a105_0x43ec09;try{if(this[_0x3e3a1a(0x1ee)]['syncRepositoryId'])this[_0x3e3a1a(0x1d0)]=await this[_0x3e3a1a(0x1e6)]['getRepositoryRecord'](this['commitData'][_0x3e3a1a(0x1e3)]);else this['commitData'][_0x3e3a1a(0x1d2)]&&(this[_0x3e3a1a(0x1d0)]=await this[_0x3e3a1a(0x1e6)]['getBranchRecord'](this[_0x3e3a1a(0x1ee)][_0x3e3a1a(0x1d2)]));}catch(_0x465804){throw new bad_request_error_1[(_0x3e3a1a(0x1b0))](errors_1[_0x3e3a1a(0x1b3)]);}}async[a105_0x43ec09(0x1df)](){const _0x46c7c4=a105_0x43ec09;if(!this[_0x46c7c4(0x1ee)][_0x46c7c4(0x19c)])return[];await this[_0x46c7c4(0x1ea)][_0x46c7c4(0x1d5)](constants_1[_0x46c7c4(0x1dd)],this[_0x46c7c4(0x1ee)][_0x46c7c4(0x19c)],{'Name':(0x0,shortid_1[_0x46c7c4(0x1f0)])()});const _0x26683b=await this[_0x46c7c4(0x1ea)][_0x46c7c4(0x197)](this[_0x46c7c4(0x1ee)][_0x46c7c4(0x19c)])[_0x46c7c4(0x1b2)](_0x2cb77d=>_0x2cb77d[_0x46c7c4(0x1ab)]('\x20')[_0x46c7c4(0x1b1)](_0x276800=>_0x276800[_0x46c7c4(0x1cb)]()));await this[_0x46c7c4(0x1ea)]['deleteAttachment'](this[_0x46c7c4(0x1ee)][_0x46c7c4(0x19c)]);const _0x383511=new salesforce_retriever_service_1[(_0x46c7c4(0x1c3))](this[_0x46c7c4(0x1ea)]);return await _0x383511[_0x46c7c4(0x1a7)](_0x26683b);}async[a105_0x43ec09(0x1a5)](){const _0x29c730=a105_0x43ec09;if(!this[_0x29c730(0x1ee)][_0x29c730(0x1ae)])return[];await this[_0x29c730(0x1ea)][_0x29c730(0x1d5)](constants_1[_0x29c730(0x1dd)],this[_0x29c730(0x1ee)]['deleteAttachmentId'],{'Name':(0x0,shortid_1[_0x29c730(0x1f0)])()});const _0xd78918=await this[_0x29c730(0x1ea)][_0x29c730(0x197)](this[_0x29c730(0x1ee)][_0x29c730(0x1ae)]);return await this['salesforceService'][_0x29c730(0x1d9)](this[_0x29c730(0x1ee)][_0x29c730(0x1ae)]),_0xd78918;}async[a105_0x43ec09(0x1e5)](){const _0x234497=a105_0x43ec09,_0x3da92b=new commit_components_dto_1[(_0x234497(0x199))](),[_0x2d625c,_0x5f05bc]=await Promise[_0x234497(0x19e)]([this[_0x234497(0x1df)](),this[_0x234497(0x1a5)]()]);return _0x3da92b[_0x234497(0x1f2)]=this[_0x234497(0x1ee)][_0x234497(0x1f2)],_0x3da92b[_0x234497(0x1d3)]=this[_0x234497(0x1ee)][_0x234497(0x1d3)],_0x3da92b[_0x234497(0x196)]={'writed':_0x2d625c,'deleted':_0x5f05bc},_0x3da92b['convertToSFDX']=this[_0x234497(0x1e8)][_0x234497(0x1b7)],_0x3da92b[_0x234497(0x1cd)]=this['repository'],_0x3da92b[_0x234497(0x18e)]=this['branch'],_0x3da92b[_0x234497(0x1b4)]=this[_0x234497(0x1e8)][_0x234497(0x1e1)],_0x3da92b;}async[a105_0x43ec09(0x1ce)](_0x52abff=![]){const _0x36859b=a105_0x43ec09;if(_0x52abff)await this[_0x36859b(0x1e6)][_0x36859b(0x1d1)](this[_0x36859b(0x1d0)],{});else{const _0x16ea18=await this[_0x36859b(0x1b9)][_0x36859b(0x1d8)][_0x36859b(0x192)](this[_0x36859b(0x18e)]['name']);this['sfLogger'][_0x36859b(0x19b)](this[_0x36859b(0x18f)]+'\x20Update\x20remote\x20state.');const _0x288f51={[this[_0x36859b(0x1b9)][_0x36859b(0x1de)]]:{'lastCommit':_0x16ea18[_0x36859b(0x1d4)]}};await this[_0x36859b(0x1e6)]['updateRemoteState'](this[_0x36859b(0x1d0)],_0x288f51);}}async[a105_0x43ec09(0x1a3)](){const _0x50f024=a105_0x43ec09,_0x48855e=await this['getCommitDto']();await this[_0x50f024(0x1e6)]['setStatus'](this[_0x50f024(0x1d0)],_0x50f024(0x1b6)),await this[_0x50f024(0x1a6)]['run'](_0x48855e,this[_0x50f024(0x18f)]),await this['updateLastCommit'](),await this[_0x50f024(0x1e6)][_0x50f024(0x19d)](this['repositoryData'],'Completed');}async['handleCommitJobError'](_0x267fdb){const _0x335cc6=a105_0x43ec09;try{this['sfLogger']['error'](''+_0x267fdb),await this[_0x335cc6(0x1bf)][_0x335cc6(0x1ba)](),await this[_0x335cc6(0x1ce)](!![]),await this[_0x335cc6(0x1e6)][_0x335cc6(0x19d)](this[_0x335cc6(0x1d0)],_0x335cc6(0x1bc));}catch(_0x43715d){this[_0x335cc6(0x1db)][_0x335cc6(0x1f4)](_0x43715d);}}async[a105_0x43ec09(0x1a7)](_0xfca459){const _0x31b3ac=a105_0x43ec09;try{this[_0x31b3ac(0x1ee)]=_0xfca459,this[_0x31b3ac(0x1da)]=typedi_1[_0x31b3ac(0x1a0)][_0x31b3ac(0x1f1)](providers_tokens_1[_0x31b3ac(0x1ca)]['gitApiService']),this['repoService']=typedi_1['Container'][_0x31b3ac(0x1f1)](providers_tokens_1[_0x31b3ac(0x1ca)][_0x31b3ac(0x1a2)]),this[_0x31b3ac(0x1e8)]=typedi_1[_0x31b3ac(0x1a0)][_0x31b3ac(0x1f1)](providers_tokens_1['Tokens'][_0x31b3ac(0x1e8)]),await this[_0x31b3ac(0x1a4)](),this[_0x31b3ac(0x1b9)]=await this[_0x31b3ac(0x1e7)][_0x31b3ac(0x192)](this[_0x31b3ac(0x1d0)][_0x31b3ac(0x1c0)]),this['branch']=await this['repository'][_0x31b3ac(0x1d8)]['getOne'](this['repositoryData'][_0x31b3ac(0x1d7)]),this[_0x31b3ac(0x1bf)]=typedi_1[_0x31b3ac(0x1a0)][_0x31b3ac(0x1f1)](providers_tokens_1[_0x31b3ac(0x1ca)][_0x31b3ac(0x1db)]),this[_0x31b3ac(0x18f)]=_0x31b3ac(0x198)+this[_0x31b3ac(0x1e8)][_0x31b3ac(0x1e1)][_0x31b3ac(0x1a8)]()+']\x20[Repository:\x20'+this[_0x31b3ac(0x1d0)][_0x31b3ac(0x1c0)]+_0x31b3ac(0x1c9)+this[_0x31b3ac(0x1d0)][_0x31b3ac(0x1d7)]+']\x20['+FlosumCommitJob_1[_0x31b3ac(0x1c8)]+']';if(!this[_0x31b3ac(0x1d0)])throw new bad_request_error_1[(_0x31b3ac(0x1b0))](errors_1[_0x31b3ac(0x1ed)]);await this[_0x31b3ac(0x1bf)][_0x31b3ac(0x19b)](this['prefix']+'\x20Start\x20Flosum\x20commit\x20job.')[_0x31b3ac(0x1ba)](),await this[_0x31b3ac(0x1a3)]()[_0x31b3ac(0x1c6)](_0x51e0bd=>this[_0x31b3ac(0x1eb)](_0x51e0bd));}catch(_0xda92b1){this[_0x31b3ac(0x1ee)]=undefined,this[_0x31b3ac(0x1db)][_0x31b3ac(0x1f4)](_0xda92b1);throw _0xda92b1;}}};function a105_0x3de2(_0x2ccec3,_0x678e47){const _0x5b0a90=a105_0x73f6();return a105_0x3de2=function(_0x2f6712,_0x49c552){_0x2f6712=_0x2f6712-0x18c;let _0x73f603=_0x5b0a90[_0x2f6712];return _0x73f603;},a105_0x3de2(_0x2ccec3,_0x678e47);}FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a105_0x43ec09(0x18c),[salesforce_service_1[a105_0x43ec09(0x193)],commit_components_job_1['CommitComponentsJob'],salesforce_sync_service_1['SalesforceSyncService']])],FlosumCommitJob),exports[a105_0x43ec09(0x1ac)]=FlosumCommitJob;