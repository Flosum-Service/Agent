function a105_0x8bda(){const _0x2ebc15=['updateRemoteState','../../../../constants','send','FLOSUM_ATTACHMENT','BadRequestError','838254EJVKag','\x20Update\x20remote\x20state.','Tokens','../../../../constants/errors','getComponentsToWrite','FlosumCommitJob','commitJob','logger','apply','9646390xseFAF','isConvertToSfdx','33519mHLHQK','convertToSFDX','../dto/commit-components.dto','Error','branchName',']\x20[Repository:\x20','salesforceService','message','commitAttachmentId','2tSPLpY','fetchRepositoryData','prefix','design:paramtypes','function','getComponentsToDelete','components','patchObject','getCommitDto','Completed','salesforceSync','../../providers/providers.tokens','2332743wuZyLx','typedi','constructor','catch','object','getBranchRecord','CommitComponentsJob','handleCommitJobError','446918iKXlkp','defineProperty','trim','__metadata','sha','Container','toUpperCase','get','4322907GuWldC','deleteAttachmentId','../../salesforce/services/salesforce.service','getOwnPropertyDescriptor','ERR_UNKNOWN_SYNC_RECORD_ID','decorate','commitData','config','gitApiService','In\x20Progress','sfLogger','deleteAttachment','__decorate','syncBranchId','all','exec','repositoryName','toString','updateLastCommit','repository','default','repo','getOne','gitProvider','getRepositoryRecord','15BLOvHZ','[FLOSUM\x20->\x20GIT]\x20[','../../salesforce/services/salesforce-retriever.service','176SapjFM','(((.+)+)+)+$','user','then','split','SalesforceRetrieverService','search','SalesforceSyncService','provider','repositoryData','setStatus',']\x20[','repoService','metadata',']\x20[Branch:\x20','__esModule','825192ROSQjJ','Logger','gitUrl','retrieveAttachment','name','./commit-components.job','CommitComponentsDto','length','map','run','../../salesforce/services/salesforce-sync.service','gitRepoService','log','branch','error'];a105_0x8bda=function(){return _0x2ebc15;};return a105_0x8bda();}const a105_0x2d90d1=a105_0x2320;(function(_0x1bb223,_0xac5607){const _0x5b7766=a105_0x2320,_0x254050=_0x1bb223();while(!![]){try{const _0x16cc57=-parseInt(_0x5b7766(0x186))/0x1*(-parseInt(_0x5b7766(0x172))/0x2)+parseInt(_0x5b7766(0x169))/0x3*(-parseInt(_0x5b7766(0x1aa))/0x4)+parseInt(_0x5b7766(0x1a7))/0x5*(-parseInt(_0x5b7766(0x1ce))/0x6)+parseInt(_0x5b7766(0x17e))/0x7+-parseInt(_0x5b7766(0x1ba))/0x8+-parseInt(_0x5b7766(0x18e))/0x9+parseInt(_0x5b7766(0x167))/0xa;if(_0x16cc57===_0xac5607)break;else _0x254050['push'](_0x254050['shift']());}catch(_0x533cfb){_0x254050['push'](_0x254050['shift']());}}}(a105_0x8bda,0x3d2e3));const a105_0x2ad54b=(function(){let _0x123c25=!![];return function(_0x53af7a,_0x1cec33){const _0x7b7358=_0x123c25?function(){const _0x5d4c2b=a105_0x2320;if(_0x1cec33){const _0x37940c=_0x1cec33[_0x5d4c2b(0x166)](_0x53af7a,arguments);return _0x1cec33=null,_0x37940c;}}:function(){};return _0x123c25=![],_0x7b7358;};}()),a105_0x40e5bf=a105_0x2ad54b(this,function(){const _0x1950d4=a105_0x2320;return a105_0x40e5bf[_0x1950d4(0x19f)]()[_0x1950d4(0x1b0)](_0x1950d4(0x1ab))[_0x1950d4(0x19f)]()[_0x1950d4(0x180)](a105_0x40e5bf)[_0x1950d4(0x1b0)]('(((.+)+)+)+$');});a105_0x40e5bf();'use strict';var __decorate=this&&this[a105_0x2d90d1(0x19a)]||function(_0x2e2944,_0x14b470,_0x277cbf,_0x5c0f15){const _0x4cd06a=a105_0x2d90d1;var _0x541ed2=arguments[_0x4cd06a(0x1c1)],_0x288fc9=_0x541ed2<0x3?_0x14b470:_0x5c0f15===null?_0x5c0f15=Object[_0x4cd06a(0x191)](_0x14b470,_0x277cbf):_0x5c0f15,_0x186c0c;if(typeof Reflect===_0x4cd06a(0x182)&&typeof Reflect[_0x4cd06a(0x193)]===_0x4cd06a(0x176))_0x288fc9=Reflect[_0x4cd06a(0x193)](_0x2e2944,_0x14b470,_0x277cbf,_0x5c0f15);else{for(var _0x10b55d=_0x2e2944[_0x4cd06a(0x1c1)]-0x1;_0x10b55d>=0x0;_0x10b55d--)if(_0x186c0c=_0x2e2944[_0x10b55d])_0x288fc9=(_0x541ed2<0x3?_0x186c0c(_0x288fc9):_0x541ed2>0x3?_0x186c0c(_0x14b470,_0x277cbf,_0x288fc9):_0x186c0c(_0x14b470,_0x277cbf))||_0x288fc9;}return _0x541ed2>0x3&&_0x288fc9&&Object[_0x4cd06a(0x187)](_0x14b470,_0x277cbf,_0x288fc9),_0x288fc9;},__metadata=this&&this[a105_0x2d90d1(0x189)]||function(_0x2eb705,_0x3c755c){const _0x3c3466=a105_0x2d90d1;if(typeof Reflect===_0x3c3466(0x182)&&typeof Reflect[_0x3c3466(0x1b7)]===_0x3c3466(0x176))return Reflect['metadata'](_0x2eb705,_0x3c755c);},__importDefault=this&&this['__importDefault']||function(_0x1b82ad){const _0x1531fa=a105_0x2d90d1;return _0x1b82ad&&_0x1b82ad[_0x1531fa(0x1b9)]?_0x1b82ad:{'default':_0x1b82ad};},FlosumCommitJob_1;Object[a105_0x2d90d1(0x187)](exports,'__esModule',{'value':!![]}),exports[a105_0x2d90d1(0x1d3)]=void 0x0;const core_1=require('../../../../core'),salesforce_service_1=require(a105_0x2d90d1(0x190)),typedi_1=require(a105_0x2d90d1(0x17f)),errors_1=require(a105_0x2d90d1(0x1d1)),bad_request_error_1=require('../../../../core/errors/bad-request.error'),salesforce_retriever_service_1=require(a105_0x2d90d1(0x1a9)),salesforce_sync_service_1=require(a105_0x2d90d1(0x1c4)),commit_components_dto_1=require(a105_0x2d90d1(0x16b)),commit_components_job_1=require(a105_0x2d90d1(0x1bf)),constants_1=require(a105_0x2d90d1(0x1ca)),shortid_1=__importDefault(require('shortid')),providers_tokens_1=require(a105_0x2d90d1(0x17d));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x4414e7,_0x4ab06e,_0x5913e5){const _0x519b49=a105_0x2d90d1;this[_0x519b49(0x16f)]=_0x4414e7,this['commitJob']=_0x4ab06e,this[_0x519b49(0x17c)]=_0x5913e5,this[_0x519b49(0x165)]=new core_1[(_0x519b49(0x1bb))](FlosumCommitJob_1[_0x519b49(0x1be)]);}async[a105_0x2d90d1(0x173)](){const _0xead776=a105_0x2d90d1;try{if(this['commitData']['syncRepositoryId'])this[_0xead776(0x1b3)]=await this[_0xead776(0x17c)][_0xead776(0x1a6)](this['commitData']['syncRepositoryId']);else this[_0xead776(0x194)][_0xead776(0x19b)]&&(this[_0xead776(0x1b3)]=await this[_0xead776(0x17c)][_0xead776(0x183)](this['commitData']['syncBranchId']));}catch(_0x427287){throw new bad_request_error_1[(_0xead776(0x1cd))](errors_1['ERR_INVALID_SYNC_RECORD_ID']);}}async[a105_0x2d90d1(0x1d2)](){const _0x352df5=a105_0x2d90d1;if(!this[_0x352df5(0x194)]['commitAttachmentId'])return[];await this[_0x352df5(0x16f)][_0x352df5(0x179)](constants_1[_0x352df5(0x1cc)],this['commitData']['commitAttachmentId'],{'Name':(0x0,shortid_1[_0x352df5(0x1a2)])()});const _0x3295be=await this['salesforceService'][_0x352df5(0x1bd)](this[_0x352df5(0x194)]['commitAttachmentId'])[_0x352df5(0x1ad)](_0x449e75=>_0x449e75[_0x352df5(0x1ae)]('\x20')[_0x352df5(0x1c2)](_0x40a54e=>_0x40a54e[_0x352df5(0x188)]()));await this[_0x352df5(0x16f)][_0x352df5(0x199)](this[_0x352df5(0x194)][_0x352df5(0x171)]);const _0x3e6742=new salesforce_retriever_service_1[(_0x352df5(0x1af))](this[_0x352df5(0x16f)]);return await _0x3e6742[_0x352df5(0x1c3)](_0x3295be);}async[a105_0x2d90d1(0x177)](){const _0x477314=a105_0x2d90d1;if(!this['commitData'][_0x477314(0x18f)])return[];await this['salesforceService'][_0x477314(0x179)](constants_1['FLOSUM_ATTACHMENT'],this[_0x477314(0x194)][_0x477314(0x18f)],{'Name':(0x0,shortid_1[_0x477314(0x1a2)])()});const _0x301703=await this['salesforceService'][_0x477314(0x1bd)](this[_0x477314(0x194)][_0x477314(0x18f)]);return await this['salesforceService'][_0x477314(0x199)](this[_0x477314(0x194)][_0x477314(0x18f)]),_0x301703;}async[a105_0x2d90d1(0x17a)](){const _0x13f27d=a105_0x2d90d1,_0x98d607=new commit_components_dto_1[(_0x13f27d(0x1c0))](),[_0x47a88d,_0x1effd3]=await Promise[_0x13f27d(0x19c)]([this[_0x13f27d(0x1d2)](),this['getComponentsToDelete']()]);return _0x98d607[_0x13f27d(0x170)]=this[_0x13f27d(0x194)]['message'],_0x98d607[_0x13f27d(0x1ac)]=this['commitData']['user'],_0x98d607[_0x13f27d(0x178)]={'writed':_0x47a88d,'deleted':_0x1effd3},_0x98d607[_0x13f27d(0x16a)]=this[_0x13f27d(0x195)][_0x13f27d(0x168)],_0x98d607[_0x13f27d(0x1a3)]=this[_0x13f27d(0x1a1)],_0x98d607[_0x13f27d(0x1c7)]=this[_0x13f27d(0x1c7)],_0x98d607[_0x13f27d(0x1b2)]=this[_0x13f27d(0x195)][_0x13f27d(0x1a5)],_0x98d607;}async['updateLastCommit'](_0x57ae59=![]){const _0x1d679d=a105_0x2d90d1;if(_0x57ae59)await this[_0x1d679d(0x17c)][_0x1d679d(0x1c9)](this[_0x1d679d(0x1b3)],{});else{const _0x46c5fe=await this[_0x1d679d(0x1a1)]['branches'][_0x1d679d(0x1a4)](this[_0x1d679d(0x1c7)][_0x1d679d(0x1be)]);this[_0x1d679d(0x198)]['log'](this['prefix']+_0x1d679d(0x1cf));const _0xd0f78c={[this['repository'][_0x1d679d(0x1bc)]]:{'lastCommit':_0x46c5fe[_0x1d679d(0x18a)]}};await this['salesforceSync'][_0x1d679d(0x1c9)](this[_0x1d679d(0x1b3)],_0xd0f78c);}}async[a105_0x2d90d1(0x19d)](){const _0x3466da=a105_0x2d90d1,_0x263392=await this[_0x3466da(0x17a)]();await this[_0x3466da(0x17c)]['setStatus'](this[_0x3466da(0x1b3)],_0x3466da(0x197)),await this[_0x3466da(0x164)][_0x3466da(0x1c3)](_0x263392,this[_0x3466da(0x174)]),await this[_0x3466da(0x1a0)](),await this[_0x3466da(0x17c)][_0x3466da(0x1b4)](this[_0x3466da(0x1b3)],_0x3466da(0x17b));}async['handleCommitJobError'](_0x29efd1){const _0x7c8cdd=a105_0x2d90d1;try{this['sfLogger'][_0x7c8cdd(0x1c8)](''+_0x29efd1),await this['sfLogger'][_0x7c8cdd(0x1cb)](),await this[_0x7c8cdd(0x1a0)](!![]),await this[_0x7c8cdd(0x17c)][_0x7c8cdd(0x1b4)](this[_0x7c8cdd(0x1b3)],_0x7c8cdd(0x16c));}catch(_0x1d9d4e){this[_0x7c8cdd(0x165)][_0x7c8cdd(0x1c8)](_0x1d9d4e);}}async[a105_0x2d90d1(0x1c3)](_0x3a254d){const _0x5940f2=a105_0x2d90d1;try{this[_0x5940f2(0x194)]=_0x3a254d,this[_0x5940f2(0x196)]=typedi_1[_0x5940f2(0x18b)][_0x5940f2(0x18d)](providers_tokens_1['Tokens']['gitApiService']),this[_0x5940f2(0x1b6)]=typedi_1[_0x5940f2(0x18b)][_0x5940f2(0x18d)](providers_tokens_1[_0x5940f2(0x1d0)][_0x5940f2(0x1c5)]),this['config']=typedi_1['Container'][_0x5940f2(0x18d)](providers_tokens_1[_0x5940f2(0x1d0)][_0x5940f2(0x195)]),await this[_0x5940f2(0x173)](),this[_0x5940f2(0x1a1)]=await this[_0x5940f2(0x1b6)][_0x5940f2(0x1a4)](this['repositoryData']['repositoryName']),this[_0x5940f2(0x1c7)]=await this[_0x5940f2(0x1a1)]['branches'][_0x5940f2(0x1a4)](this[_0x5940f2(0x1b3)][_0x5940f2(0x16d)]),this[_0x5940f2(0x198)]=typedi_1[_0x5940f2(0x18b)][_0x5940f2(0x18d)](providers_tokens_1[_0x5940f2(0x1d0)]['logger']),this[_0x5940f2(0x174)]=_0x5940f2(0x1a8)+this[_0x5940f2(0x195)][_0x5940f2(0x1a5)][_0x5940f2(0x18c)]()+_0x5940f2(0x16e)+this[_0x5940f2(0x1b3)][_0x5940f2(0x19e)]+_0x5940f2(0x1b8)+this[_0x5940f2(0x1b3)][_0x5940f2(0x16d)]+_0x5940f2(0x1b5)+FlosumCommitJob_1[_0x5940f2(0x1be)]+']';if(!this[_0x5940f2(0x1b3)])throw new bad_request_error_1[(_0x5940f2(0x1cd))](errors_1[_0x5940f2(0x192)]);await this['sfLogger'][_0x5940f2(0x1c6)](this[_0x5940f2(0x174)]+'\x20Start\x20Flosum\x20commit\x20job.')['send'](),await this[_0x5940f2(0x19d)]()[_0x5940f2(0x181)](_0x4a350d=>this[_0x5940f2(0x185)](_0x4a350d));}catch(_0x3cba7c){this[_0x5940f2(0x194)]=undefined,this[_0x5940f2(0x165)][_0x5940f2(0x1c8)](_0x3cba7c);throw _0x3cba7c;}}};function a105_0x2320(_0x401d4f,_0x1fcdcf){const _0x231988=a105_0x8bda();return a105_0x2320=function(_0x40e5bf,_0x2ad54b){_0x40e5bf=_0x40e5bf-0x164;let _0x8bda5c=_0x231988[_0x40e5bf];return _0x8bda5c;},a105_0x2320(_0x401d4f,_0x1fcdcf);}FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a105_0x2d90d1(0x175),[salesforce_service_1['SalesforceService'],commit_components_job_1[a105_0x2d90d1(0x184)],salesforce_sync_service_1[a105_0x2d90d1(0x1b1)]])],FlosumCommitJob),exports['FlosumCommitJob']=FlosumCommitJob;