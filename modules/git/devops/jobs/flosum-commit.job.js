function a104_0x4bea(){const _0x76267f=['branchName','2169VyjQFW','Container','toString','repository','logger','exec','../../salesforce/services/salesforce.service','commitData','syncRepositoryId','design:paramtypes','ERR_INVALID_SYNC_RECORD_ID','CommitComponentsDto','provider','prefix','11514PbhBTG','apply','705AzQMHr','\x20Start\x20Flosum\x20commit\x20job.','24093800CQNeYu','branches','setStatus','CommitComponentsJob','In\x20Progress','send','config','4370576YatBIQ','deleteAttachmentId',']\x20[Branch:\x20','patchObject','../../salesforce/services/salesforce-sync.service','__esModule','handleCommitJobError','split','object','deleteAttachment','salesforceService','run','gitRepoService','11832cAcHPn','47000wHPHpu','../dto/commit-components.dto','shortid','BadRequestError','fetchRepositoryData','gitApiService',']\x20[Repository:\x20','trim','commitAttachmentId','../../salesforce/services/salesforce-retriever.service','updateLastCommit','message','gitUrl','length','repositoryData',']\x20[','name','182qbCRVx','\x20Update\x20remote\x20state.','../../providers/providers.tokens','search','salesforceSync','Service','FLOSUM_ATTACHMENT','defineProperty','Completed','__decorate','./commit-components.job','SalesforceRetrieverService','(((.+)+)+)+$','sfLogger','getComponentsToWrite','constructor','getOne','then','getOwnPropertyDescriptor','get','updateRemoteState','repositoryName','sha','decorate','Error','error','all','default','SalesforceService','844137pIgwRB','getRepositoryRecord','../../../../core/errors/bad-request.error','[FLOSUM\x20->\x20GIT]\x20[','metadata','repo','280OZsPBK','toUpperCase','function','branch','Tokens','retrieveAttachment','components','ERR_UNKNOWN_SYNC_RECORD_ID','convertToSFDX','repoService','getCommitDto','log','isConvertToSfdx'];a104_0x4bea=function(){return _0x76267f;};return a104_0x4bea();}const a104_0x42779c=a104_0x4f96;(function(_0x5204a9,_0x56b638){const _0x3ebb81=a104_0x4f96,_0xba6e4=_0x5204a9();while(!![]){try{const _0x1ef737=-parseInt(_0x3ebb81(0x1bb))/0x1+parseInt(_0x3ebb81(0x19e))/0x2*(-parseInt(_0x3ebb81(0x176))/0x3)+-parseInt(_0x3ebb81(0x18d))/0x4*(parseInt(_0x3ebb81(0x1c1))/0x5)+parseInt(_0x3ebb81(0x174))/0x6+-parseInt(_0x3ebb81(0x17f))/0x7+-parseInt(_0x3ebb81(0x18c))/0x8*(-parseInt(_0x3ebb81(0x1cf))/0x9)+parseInt(_0x3ebb81(0x178))/0xa;if(_0x1ef737===_0x56b638)break;else _0xba6e4['push'](_0xba6e4['shift']());}catch(_0x159e75){_0xba6e4['push'](_0xba6e4['shift']());}}}(a104_0x4bea,0x97548));const a104_0x3238d0=(function(){let _0x28048d=!![];return function(_0x3b22c4,_0x102c40){const _0x52de51=_0x28048d?function(){const _0x34b794=a104_0x4f96;if(_0x102c40){const _0x4e17fb=_0x102c40[_0x34b794(0x175)](_0x3b22c4,arguments);return _0x102c40=null,_0x4e17fb;}}:function(){};return _0x28048d=![],_0x52de51;};}()),a104_0x5a8412=a104_0x3238d0(this,function(){const _0x283a96=a104_0x4f96;return a104_0x5a8412[_0x283a96(0x1d1)]()[_0x283a96(0x1a1)](_0x283a96(0x1aa))[_0x283a96(0x1d1)]()[_0x283a96(0x1ad)](a104_0x5a8412)[_0x283a96(0x1a1)](_0x283a96(0x1aa));});a104_0x5a8412();'use strict';var __decorate=this&&this[a104_0x42779c(0x1a7)]||function(_0x419efc,_0x8fe5f3,_0x1ad558,_0x4de19b){const _0x5c25f1=a104_0x42779c;var _0x2b3cd3=arguments[_0x5c25f1(0x19a)],_0x15a73d=_0x2b3cd3<0x3?_0x8fe5f3:_0x4de19b===null?_0x4de19b=Object[_0x5c25f1(0x1b0)](_0x8fe5f3,_0x1ad558):_0x4de19b,_0x434127;if(typeof Reflect===_0x5c25f1(0x187)&&typeof Reflect[_0x5c25f1(0x1b5)]===_0x5c25f1(0x1c3))_0x15a73d=Reflect['decorate'](_0x419efc,_0x8fe5f3,_0x1ad558,_0x4de19b);else{for(var _0x8490=_0x419efc[_0x5c25f1(0x19a)]-0x1;_0x8490>=0x0;_0x8490--)if(_0x434127=_0x419efc[_0x8490])_0x15a73d=(_0x2b3cd3<0x3?_0x434127(_0x15a73d):_0x2b3cd3>0x3?_0x434127(_0x8fe5f3,_0x1ad558,_0x15a73d):_0x434127(_0x8fe5f3,_0x1ad558))||_0x15a73d;}return _0x2b3cd3>0x3&&_0x15a73d&&Object['defineProperty'](_0x8fe5f3,_0x1ad558,_0x15a73d),_0x15a73d;},__metadata=this&&this['__metadata']||function(_0x30b5ca,_0x322ae9){const _0x3a507c=a104_0x42779c;if(typeof Reflect===_0x3a507c(0x187)&&typeof Reflect['metadata']==='function')return Reflect[_0x3a507c(0x1bf)](_0x30b5ca,_0x322ae9);},__importDefault=this&&this['__importDefault']||function(_0xcbc673){const _0x363971=a104_0x42779c;return _0xcbc673&&_0xcbc673[_0x363971(0x184)]?_0xcbc673:{'default':_0xcbc673};},FlosumCommitJob_1;Object[a104_0x42779c(0x1a5)](exports,a104_0x42779c(0x184),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;function a104_0x4f96(_0x20aeb9,_0x285b21){const _0x2f391b=a104_0x4bea();return a104_0x4f96=function(_0x5a8412,_0x3238d0){_0x5a8412=_0x5a8412-0x169;let _0x4beada=_0x2f391b[_0x5a8412];return _0x4beada;},a104_0x4f96(_0x20aeb9,_0x285b21);}const core_1=require('../../../../core'),salesforce_service_1=require(a104_0x42779c(0x16c)),typedi_1=require('typedi'),errors_1=require('../../../../constants/errors'),bad_request_error_1=require(a104_0x42779c(0x1bd)),salesforce_retriever_service_1=require(a104_0x42779c(0x196)),salesforce_sync_service_1=require(a104_0x42779c(0x183)),commit_components_dto_1=require(a104_0x42779c(0x18e)),commit_components_job_1=require(a104_0x42779c(0x1a8)),constants_1=require('../../../../constants'),shortid_1=__importDefault(require(a104_0x42779c(0x18f))),providers_tokens_1=require(a104_0x42779c(0x1a0));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x19f2a2,_0x157057,_0xc95901){const _0x295ab1=a104_0x42779c;this['salesforceService']=_0x19f2a2,this['commitJob']=_0x157057,this[_0x295ab1(0x1a2)]=_0xc95901,this[_0x295ab1(0x16a)]=new core_1['Logger'](FlosumCommitJob_1[_0x295ab1(0x19d)]);}async[a104_0x42779c(0x191)](){const _0x279a7e=a104_0x42779c;try{if(this['commitData'][_0x279a7e(0x16e)])this['repositoryData']=await this['salesforceSync'][_0x279a7e(0x1bc)](this[_0x279a7e(0x16d)][_0x279a7e(0x16e)]);else this[_0x279a7e(0x16d)]['syncBranchId']&&(this[_0x279a7e(0x19b)]=await this[_0x279a7e(0x1a2)]['getBranchRecord'](this[_0x279a7e(0x16d)]['syncBranchId']));}catch(_0x1c2cee){throw new bad_request_error_1[(_0x279a7e(0x190))](errors_1[_0x279a7e(0x170)]);}}async[a104_0x42779c(0x1ac)](){const _0x34f759=a104_0x42779c;if(!this[_0x34f759(0x16d)][_0x34f759(0x195)])return[];await this[_0x34f759(0x189)][_0x34f759(0x182)](constants_1[_0x34f759(0x1a4)],this[_0x34f759(0x16d)][_0x34f759(0x195)],{'Name':(0x0,shortid_1[_0x34f759(0x1b9)])()});const _0x3bf5fb=await this[_0x34f759(0x189)][_0x34f759(0x1c6)](this[_0x34f759(0x16d)]['commitAttachmentId'])[_0x34f759(0x1af)](_0x1ec0d9=>_0x1ec0d9[_0x34f759(0x186)]('\x20')['map'](_0x3c2b44=>_0x3c2b44[_0x34f759(0x194)]()));await this[_0x34f759(0x189)][_0x34f759(0x188)](this['commitData']['commitAttachmentId']);const _0x94df1c=new salesforce_retriever_service_1[(_0x34f759(0x1a9))](this[_0x34f759(0x189)]);return await _0x94df1c[_0x34f759(0x18a)](_0x3bf5fb);}async['getComponentsToDelete'](){const _0x3e0d94=a104_0x42779c;if(!this['commitData']['deleteAttachmentId'])return[];await this[_0x3e0d94(0x189)]['patchObject'](constants_1[_0x3e0d94(0x1a4)],this['commitData'][_0x3e0d94(0x180)],{'Name':(0x0,shortid_1['default'])()});const _0x4fd7e1=await this['salesforceService'][_0x3e0d94(0x1c6)](this['commitData'][_0x3e0d94(0x180)]);return await this[_0x3e0d94(0x189)][_0x3e0d94(0x188)](this['commitData']['deleteAttachmentId']),_0x4fd7e1;}async[a104_0x42779c(0x1cb)](){const _0x17128f=a104_0x42779c,_0x3e0c10=new commit_components_dto_1[(_0x17128f(0x171))](),[_0x5c4c1c,_0x4ef2a1]=await Promise[_0x17128f(0x1b8)]([this[_0x17128f(0x1ac)](),this['getComponentsToDelete']()]);return _0x3e0c10[_0x17128f(0x198)]=this[_0x17128f(0x16d)]['message'],_0x3e0c10['user']=this[_0x17128f(0x16d)]['user'],_0x3e0c10[_0x17128f(0x1c7)]={'writed':_0x5c4c1c,'deleted':_0x4ef2a1},_0x3e0c10[_0x17128f(0x1c9)]=this[_0x17128f(0x17e)][_0x17128f(0x1cd)],_0x3e0c10[_0x17128f(0x1c0)]=this['repository'],_0x3e0c10[_0x17128f(0x1c4)]=this[_0x17128f(0x1c4)],_0x3e0c10[_0x17128f(0x172)]=this[_0x17128f(0x17e)]['gitProvider'],_0x3e0c10;}async[a104_0x42779c(0x197)](_0x337dd5=![]){const _0x3bef5b=a104_0x42779c;if(_0x337dd5)await this[_0x3bef5b(0x1a2)]['updateRemoteState'](this[_0x3bef5b(0x19b)],{});else{const _0x34eb55=await this[_0x3bef5b(0x169)][_0x3bef5b(0x179)][_0x3bef5b(0x1ae)](this[_0x3bef5b(0x1c4)][_0x3bef5b(0x19d)]);this['sfLogger']['log'](this['prefix']+_0x3bef5b(0x19f));const _0x59e2c4={[this[_0x3bef5b(0x169)][_0x3bef5b(0x199)]]:{'lastCommit':_0x34eb55[_0x3bef5b(0x1b4)]}};await this['salesforceSync'][_0x3bef5b(0x1b2)](this[_0x3bef5b(0x19b)],_0x59e2c4);}}async[a104_0x42779c(0x16b)](){const _0x238fd5=a104_0x42779c,_0x1b2915=await this['getCommitDto']();await this[_0x238fd5(0x1a2)][_0x238fd5(0x17a)](this['repositoryData'],_0x238fd5(0x17c)),await this['commitJob'][_0x238fd5(0x18a)](_0x1b2915,this[_0x238fd5(0x173)]),await this['updateLastCommit'](),await this['salesforceSync']['setStatus'](this[_0x238fd5(0x19b)],_0x238fd5(0x1a6));}async[a104_0x42779c(0x185)](_0x5bf0c1){const _0x1269db=a104_0x42779c;try{this[_0x1269db(0x1ab)][_0x1269db(0x1b7)](''+_0x5bf0c1),await this['sfLogger'][_0x1269db(0x17d)](),await this[_0x1269db(0x197)](!![]),await this[_0x1269db(0x1a2)][_0x1269db(0x17a)](this[_0x1269db(0x19b)],_0x1269db(0x1b6));}catch(_0x459e68){this[_0x1269db(0x16a)][_0x1269db(0x1b7)](_0x459e68);}}async[a104_0x42779c(0x18a)](_0x2d4158){const _0x12b725=a104_0x42779c;try{this[_0x12b725(0x16d)]=_0x2d4158,this[_0x12b725(0x192)]=typedi_1[_0x12b725(0x1d0)]['get'](providers_tokens_1[_0x12b725(0x1c5)]['gitApiService']),this['repoService']=typedi_1[_0x12b725(0x1d0)][_0x12b725(0x1b1)](providers_tokens_1[_0x12b725(0x1c5)][_0x12b725(0x18b)]),this['config']=typedi_1[_0x12b725(0x1d0)][_0x12b725(0x1b1)](providers_tokens_1[_0x12b725(0x1c5)]['config']),await this['fetchRepositoryData'](),this[_0x12b725(0x169)]=await this[_0x12b725(0x1ca)][_0x12b725(0x1ae)](this['repositoryData'][_0x12b725(0x1b3)]),this[_0x12b725(0x1c4)]=await this['repository'][_0x12b725(0x179)]['getOne'](this[_0x12b725(0x19b)][_0x12b725(0x1ce)]),this['sfLogger']=typedi_1['Container']['get'](providers_tokens_1[_0x12b725(0x1c5)]['logger']),this[_0x12b725(0x173)]=_0x12b725(0x1be)+this['config']['gitProvider'][_0x12b725(0x1c2)]()+_0x12b725(0x193)+this[_0x12b725(0x19b)][_0x12b725(0x1b3)]+_0x12b725(0x181)+this['repositoryData']['branchName']+_0x12b725(0x19c)+FlosumCommitJob_1['name']+']';if(!this[_0x12b725(0x19b)])throw new bad_request_error_1[(_0x12b725(0x190))](errors_1[_0x12b725(0x1c8)]);await this[_0x12b725(0x1ab)][_0x12b725(0x1cc)](this['prefix']+_0x12b725(0x177))[_0x12b725(0x17d)](),await this[_0x12b725(0x16b)]()['catch'](_0xbc8601=>this[_0x12b725(0x185)](_0xbc8601));}catch(_0x19b31a){this[_0x12b725(0x16d)]=undefined,this[_0x12b725(0x16a)]['error'](_0x19b31a);throw _0x19b31a;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1[a104_0x42779c(0x1a3)])({'transient':!![]}),__metadata(a104_0x42779c(0x16f),[salesforce_service_1[a104_0x42779c(0x1ba)],commit_components_job_1[a104_0x42779c(0x17b)],salesforce_sync_service_1['SalesforceSyncService']])],FlosumCommitJob),exports['FlosumCommitJob']=FlosumCommitJob;