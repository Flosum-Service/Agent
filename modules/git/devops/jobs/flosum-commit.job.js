function a105_0x4539(){const _0xb2612b=['message','1534467elYjKv','321eXamqN','setStatus','decorate','getRepositoryRecord','In\x20Progress','272694LphxrK','repo','provider','exec','getComponentsToDelete','SalesforceRetrieverService','../../../../core','commitAttachmentId','patchObject','updateLastCommit','./commit-components.job','Service','handleCommitJobError','getCommitDto','commitData','repositoryData','catch','getComponentsToWrite','\x20Start\x20Flosum\x20commit\x20job.','logger','branches','function','search','8JCBGzH','config','gitApiService','parse','deleteAttachmentId','gitRepoService','2760080JysvQY','262090DpNGSh','../../salesforce/services/salesforce-retriever.service','components','prefix','1900aJGkcD','retrieveAttachment','metadata','syncBranchId','__decorate','apply','(((.+)+)+)+$',']\x20[','defineProperty','deleteAttachment','getOne','[FLOSUM\x20->\x20GIT]\x20[','toUpperCase','662232DMPQwI','get','../../../../constants/errors','getOwnPropertyDescriptor','FlosumCommitJob','toString','length','object','branchName','fetchRepositoryData','trim','branch','Container','run','user','syncRepositoryId','../../salesforce/services/salesforce.service',']\x20[Repository:\x20','repoService','Completed','design:paramtypes','\x20Update\x20remote\x20state.','Tokens','send','shortid','name','ERR_UNKNOWN_SYNC_RECORD_ID','map','default','getBranchRecord','log','sfLogger','error','convertToSFDX','../../../../core/errors/bad-request.error','BadRequestError','split','__esModule','SalesforceService','SalesforceSyncService','FLOSUM_ATTACHMENT','salesforceSync','../../../../constants','Logger','gitProvider','__importDefault','gitUrl','repository','__metadata','salesforceService','commitJob','repositoryName','2875941gwYZuy','2sbVZoK','7LMbBIg'];a105_0x4539=function(){return _0xb2612b;};return a105_0x4539();}const a105_0xe13527=a105_0x1b72;(function(_0x36f516,_0x43b5d2){const _0x16d675=a105_0x1b72,_0x402161=_0x36f516();while(!![]){try{const _0x26f6b3=parseInt(_0x16d675(0x1c8))/0x1*(parseInt(_0x16d675(0x1d1))/0x2)+-parseInt(_0x16d675(0x1cc))/0x3*(-parseInt(_0x16d675(0x1f3))/0x4)+parseInt(_0x16d675(0x1ef))/0x5+-parseInt(_0x16d675(0x200))/0x6*(parseInt(_0x16d675(0x1c9))/0x7)+-parseInt(_0x16d675(0x1e8))/0x8*(-parseInt(_0x16d675(0x1c7))/0x9)+-parseInt(_0x16d675(0x1ee))/0xa+-parseInt(_0x16d675(0x1cb))/0xb;if(_0x26f6b3===_0x43b5d2)break;else _0x402161['push'](_0x402161['shift']());}catch(_0x1c3d46){_0x402161['push'](_0x402161['shift']());}}}(a105_0x4539,0x29689));const a105_0x347507=(function(){let _0x1eb164=!![];return function(_0x5ce74d,_0x24ca47){const _0xb5ef85=_0x1eb164?function(){const _0x33c520=a105_0x1b72;if(_0x24ca47){const _0x4c357e=_0x24ca47[_0x33c520(0x1f8)](_0x5ce74d,arguments);return _0x24ca47=null,_0x4c357e;}}:function(){};return _0x1eb164=![],_0xb5ef85;};}()),a105_0x3755d4=a105_0x347507(this,function(){const _0x4ad781=a105_0x1b72;return a105_0x3755d4[_0x4ad781(0x198)]()[_0x4ad781(0x1e7)](_0x4ad781(0x1f9))['toString']()['constructor'](a105_0x3755d4)[_0x4ad781(0x1e7)](_0x4ad781(0x1f9));});a105_0x3755d4();'use strict';var __decorate=this&&this[a105_0xe13527(0x1f7)]||function(_0x37faff,_0x3a050e,_0x217fd3,_0x4820d2){const _0x4dec1c=a105_0xe13527;var _0x377a86=arguments[_0x4dec1c(0x199)],_0x43a72c=_0x377a86<0x3?_0x3a050e:_0x4820d2===null?_0x4820d2=Object[_0x4dec1c(0x196)](_0x3a050e,_0x217fd3):_0x4820d2,_0x2acd52;if(typeof Reflect===_0x4dec1c(0x19a)&&typeof Reflect[_0x4dec1c(0x1ce)]===_0x4dec1c(0x1e6))_0x43a72c=Reflect[_0x4dec1c(0x1ce)](_0x37faff,_0x3a050e,_0x217fd3,_0x4820d2);else{for(var _0x4f9db8=_0x37faff[_0x4dec1c(0x199)]-0x1;_0x4f9db8>=0x0;_0x4f9db8--)if(_0x2acd52=_0x37faff[_0x4f9db8])_0x43a72c=(_0x377a86<0x3?_0x2acd52(_0x43a72c):_0x377a86>0x3?_0x2acd52(_0x3a050e,_0x217fd3,_0x43a72c):_0x2acd52(_0x3a050e,_0x217fd3))||_0x43a72c;}return _0x377a86>0x3&&_0x43a72c&&Object[_0x4dec1c(0x1fb)](_0x3a050e,_0x217fd3,_0x43a72c),_0x43a72c;},__metadata=this&&this[a105_0xe13527(0x1c3)]||function(_0x20a551,_0x50034a){const _0x14ba60=a105_0xe13527;if(typeof Reflect==='object'&&typeof Reflect[_0x14ba60(0x1f5)]===_0x14ba60(0x1e6))return Reflect[_0x14ba60(0x1f5)](_0x20a551,_0x50034a);},__importDefault=this&&this[a105_0xe13527(0x1c0)]||function(_0x57c931){return _0x57c931&&_0x57c931['__esModule']?_0x57c931:{'default':_0x57c931};},FlosumCommitJob_1;Object[a105_0xe13527(0x1fb)](exports,a105_0xe13527(0x1b8),{'value':!![]}),exports[a105_0xe13527(0x197)]=void 0x0;const core_1=require(a105_0xe13527(0x1d7)),salesforce_service_1=require(a105_0xe13527(0x1a3)),typedi_1=require('typedi'),errors_1=require(a105_0xe13527(0x202)),bad_request_error_1=require(a105_0xe13527(0x1b5)),salesforce_retriever_service_1=require(a105_0xe13527(0x1f0)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a105_0xe13527(0x1db)),constants_1=require(a105_0xe13527(0x1bd)),shortid_1=__importDefault(require(a105_0xe13527(0x1ab))),providers_tokens_1=require('../../providers/providers.tokens');let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x14fdac,_0x393ab6,_0x4f6f32){const _0x1e365f=a105_0xe13527;this[_0x1e365f(0x1c4)]=_0x14fdac,this[_0x1e365f(0x1c5)]=_0x393ab6,this[_0x1e365f(0x1bc)]=_0x4f6f32,this[_0x1e365f(0x1e4)]=new core_1[(_0x1e365f(0x1be))](FlosumCommitJob_1[_0x1e365f(0x1ac)]);}async[a105_0xe13527(0x19c)](){const _0x2c6ed2=a105_0xe13527;try{if(this[_0x2c6ed2(0x1df)]['syncRepositoryId'])this[_0x2c6ed2(0x1e0)]=await this[_0x2c6ed2(0x1bc)][_0x2c6ed2(0x1cf)](this[_0x2c6ed2(0x1df)][_0x2c6ed2(0x1a2)]);else this[_0x2c6ed2(0x1df)][_0x2c6ed2(0x1f6)]&&(this[_0x2c6ed2(0x1e0)]=await this[_0x2c6ed2(0x1bc)][_0x2c6ed2(0x1b0)](this[_0x2c6ed2(0x1df)]['syncBranchId']));}catch(_0x345b3f){throw new bad_request_error_1[(_0x2c6ed2(0x1b6))](errors_1['ERR_INVALID_SYNC_RECORD_ID']);}}async['getComponentsToWrite'](){const _0x38e204=a105_0xe13527;if(!this['commitData'][_0x38e204(0x1d8)])return[];await this[_0x38e204(0x1c4)][_0x38e204(0x1d9)](constants_1[_0x38e204(0x1bb)],this['commitData'][_0x38e204(0x1d8)],{'Name':(0x0,shortid_1[_0x38e204(0x1af)])()});const _0x4ac963=await this['salesforceService'][_0x38e204(0x1f4)](this['commitData'][_0x38e204(0x1d8)])['then'](_0x45ce2f=>_0x45ce2f[_0x38e204(0x1b7)]('\x20')[_0x38e204(0x1ae)](_0x3c9709=>_0x3c9709[_0x38e204(0x19d)]()));await this[_0x38e204(0x1c4)][_0x38e204(0x1fc)](this[_0x38e204(0x1df)][_0x38e204(0x1d8)]);const _0x274dcc=new salesforce_retriever_service_1[(_0x38e204(0x1d6))](this[_0x38e204(0x1c4)]);return await _0x274dcc[_0x38e204(0x1a0)](_0x4ac963);}async[a105_0xe13527(0x1d5)](){const _0x28b2fd=a105_0xe13527;if(!this[_0x28b2fd(0x1df)][_0x28b2fd(0x1ec)])return[];await this[_0x28b2fd(0x1c4)][_0x28b2fd(0x1d9)](constants_1['FLOSUM_ATTACHMENT'],this['commitData'][_0x28b2fd(0x1ec)],{'Name':(0x0,shortid_1['default'])()});const _0x5044c3=await this[_0x28b2fd(0x1c4)][_0x28b2fd(0x1f4)](this[_0x28b2fd(0x1df)]['deleteAttachmentId']),_0x1fd37d=JSON[_0x28b2fd(0x1eb)](_0x5044c3);return await this[_0x28b2fd(0x1c4)]['deleteAttachment'](this[_0x28b2fd(0x1df)][_0x28b2fd(0x1ec)]),_0x1fd37d;}async[a105_0xe13527(0x1de)](){const _0x5b8446=a105_0xe13527,_0x175aa2=new commit_components_dto_1['CommitComponentsDto'](),[_0x3f4ae0,_0x17ba1b]=await Promise['all']([this[_0x5b8446(0x1e2)](),this[_0x5b8446(0x1d5)]()]);return _0x175aa2[_0x5b8446(0x1ca)]=this[_0x5b8446(0x1df)]['message'],_0x175aa2[_0x5b8446(0x1a1)]=this['commitData'][_0x5b8446(0x1a1)],_0x175aa2[_0x5b8446(0x1f1)]={'writed':_0x3f4ae0,'deleted':_0x17ba1b},_0x175aa2[_0x5b8446(0x1b4)]=this[_0x5b8446(0x1e9)]['isConvertToSfdx'],_0x175aa2[_0x5b8446(0x1d2)]=this['repository'],_0x175aa2[_0x5b8446(0x19e)]=this[_0x5b8446(0x19e)],_0x175aa2[_0x5b8446(0x1d3)]=this[_0x5b8446(0x1e9)][_0x5b8446(0x1bf)],_0x175aa2;}async[a105_0xe13527(0x1da)](_0x43c0b7=![]){const _0x5f47eb=a105_0xe13527;if(_0x43c0b7)await this[_0x5f47eb(0x1bc)]['updateRemoteState'](this[_0x5f47eb(0x1e0)],{});else{const _0x1fd5fc=await this[_0x5f47eb(0x1c2)][_0x5f47eb(0x1e5)]['getOne'](this[_0x5f47eb(0x19e)][_0x5f47eb(0x1ac)]);this[_0x5f47eb(0x1b2)]['log'](this['prefix']+_0x5f47eb(0x1a8));const _0x773edc={[this[_0x5f47eb(0x1c2)][_0x5f47eb(0x1c1)]]:{'lastCommit':_0x1fd5fc['sha']}};await this[_0x5f47eb(0x1bc)]['updateRemoteState'](this['repositoryData'],_0x773edc);}}async['exec'](){const _0x425a54=a105_0xe13527,_0x942a79=await this[_0x425a54(0x1de)]();await this[_0x425a54(0x1bc)]['setStatus'](this[_0x425a54(0x1e0)],_0x425a54(0x1d0)),await this[_0x425a54(0x1c5)][_0x425a54(0x1a0)](_0x942a79,this[_0x425a54(0x1f2)]),await this[_0x425a54(0x1da)](),await this[_0x425a54(0x1bc)][_0x425a54(0x1cd)](this[_0x425a54(0x1e0)],_0x425a54(0x1a6));}async[a105_0xe13527(0x1dd)](_0xcea95f){const _0x5ad2bc=a105_0xe13527;try{this['sfLogger']['error'](''+_0xcea95f),await this['sfLogger'][_0x5ad2bc(0x1aa)](),await this['updateLastCommit'](!![]),await this[_0x5ad2bc(0x1bc)][_0x5ad2bc(0x1cd)](this[_0x5ad2bc(0x1e0)],'Error');}catch(_0x3fba16){this[_0x5ad2bc(0x1e4)][_0x5ad2bc(0x1b3)](_0x3fba16);}}async[a105_0xe13527(0x1a0)](_0x2afc23){const _0x47eaaf=a105_0xe13527;try{this[_0x47eaaf(0x1df)]=_0x2afc23,this[_0x47eaaf(0x1ea)]=typedi_1['Container'][_0x47eaaf(0x201)](providers_tokens_1[_0x47eaaf(0x1a9)][_0x47eaaf(0x1ea)]),this[_0x47eaaf(0x1a5)]=typedi_1[_0x47eaaf(0x19f)][_0x47eaaf(0x201)](providers_tokens_1[_0x47eaaf(0x1a9)][_0x47eaaf(0x1ed)]),this['config']=typedi_1[_0x47eaaf(0x19f)][_0x47eaaf(0x201)](providers_tokens_1[_0x47eaaf(0x1a9)][_0x47eaaf(0x1e9)]),await this[_0x47eaaf(0x19c)](),this[_0x47eaaf(0x1c2)]=await this[_0x47eaaf(0x1a5)][_0x47eaaf(0x1fd)](this[_0x47eaaf(0x1e0)]['repositoryName']),this['branch']=await this[_0x47eaaf(0x1c2)][_0x47eaaf(0x1e5)][_0x47eaaf(0x1fd)](this[_0x47eaaf(0x1e0)][_0x47eaaf(0x19b)]),this[_0x47eaaf(0x1b2)]=typedi_1['Container'][_0x47eaaf(0x201)](providers_tokens_1['Tokens']['logger']),this[_0x47eaaf(0x1f2)]=_0x47eaaf(0x1fe)+this[_0x47eaaf(0x1e9)][_0x47eaaf(0x1bf)][_0x47eaaf(0x1ff)]()+_0x47eaaf(0x1a4)+this['repositoryData'][_0x47eaaf(0x1c6)]+']\x20[Branch:\x20'+this[_0x47eaaf(0x1e0)][_0x47eaaf(0x19b)]+_0x47eaaf(0x1fa)+FlosumCommitJob_1[_0x47eaaf(0x1ac)]+']';if(!this[_0x47eaaf(0x1e0)])throw new bad_request_error_1[(_0x47eaaf(0x1b6))](errors_1[_0x47eaaf(0x1ad)]);await this[_0x47eaaf(0x1b2)][_0x47eaaf(0x1b1)](this[_0x47eaaf(0x1f2)]+_0x47eaaf(0x1e3))[_0x47eaaf(0x1aa)](),await this[_0x47eaaf(0x1d4)]()[_0x47eaaf(0x1e1)](_0x4bb0d2=>this[_0x47eaaf(0x1dd)](_0x4bb0d2));}catch(_0x4a2ade){this[_0x47eaaf(0x1df)]=undefined,this['logger']['error'](_0x4a2ade);throw _0x4a2ade;}}};function a105_0x1b72(_0x30d6f6,_0x4980f4){const _0x211e82=a105_0x4539();return a105_0x1b72=function(_0x3755d4,_0x347507){_0x3755d4=_0x3755d4-0x196;let _0x4539ce=_0x211e82[_0x3755d4];return _0x4539ce;},a105_0x1b72(_0x30d6f6,_0x4980f4);}FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1[a105_0xe13527(0x1dc)])({'transient':!![]}),__metadata(a105_0xe13527(0x1a7),[salesforce_service_1[a105_0xe13527(0x1b9)],commit_components_job_1['CommitComponentsJob'],salesforce_sync_service_1[a105_0xe13527(0x1ba)]])],FlosumCommitJob),exports[a105_0xe13527(0x197)]=FlosumCommitJob;