function a74_0x55bd(){const _0x1b51c9=['commitJob','../../providers/providers.tokens','1784nZWeCx','\x20Start\x20Flosum\x20commit\x20job.','sfLogger','deleteAttachmentId','object','gitProvider','__metadata','(((.+)+)+)+$','gitRepoService','21uxKYun','function','gitApiService','__importDefault','provider','isConvertToSfdx','740514jgaiZV','branchName','240zqGrmZ','sha','repositoryData','exec','commitData','getOne','syncRepositoryId','logger','repository','default','name','Completed','apply','Container','../../salesforce/services/salesforce.service','../../../../constants','message','repositoryName','user','getComponentsToDelete','FLOSUM_ATTACHMENT','SalesforceSyncService','retrieveAttachment','decorate','patchObject','Service','setStatus','getOwnPropertyDescriptor','getComponentsToWrite','components','get','convertToSFDX',']\x20[Branch:\x20','36819VJCjMk','__decorate','getCommitDto','salesforceService','143907ROOmrO','repo','constructor','defineProperty','ERR_UNKNOWN_SYNC_RECORD_ID','updateLastCommit','Error','length','[FLOSUM\x20->\x20GIT]\x20[','\x20Update\x20remote\x20state.','catch','3912845wHeFUW','../../../../core/errors/bad-request.error','log','toUpperCase','toString','../../../../core','36RTPmCv','handleCommitJobError','592189WTzVum','branch','./commit-components.job','commitAttachmentId','prefix',']\x20[Repository:\x20','8UGfdCf','deleteAttachment','getBranchRecord',']\x20[','BadRequestError','syncBranchId','branches','repoService','ERR_INVALID_SYNC_RECORD_ID','../dto/commit-components.dto','send','20hYQxAW','shortid','error','metadata','Tokens','config','__esModule','SalesforceService','search','4936778yKUzeA','salesforceSync','../../salesforce/services/salesforce-retriever.service','80974owCecE','map','FlosumCommitJob','run'];a74_0x55bd=function(){return _0x1b51c9;};return a74_0x55bd();}const a74_0x5de30e=a74_0x4706;(function(_0x4cc10e,_0x4e2f0a){const _0x253db3=a74_0x4706,_0x496f26=_0x4cc10e();while(!![]){try{const _0x2554da=-parseInt(_0x253db3(0x12a))/0x1*(parseInt(_0x253db3(0x17f))/0x2)+parseInt(_0x253db3(0x166))/0x3*(-parseInt(_0x253db3(0x177))/0x4)+parseInt(_0x253db3(0x171))/0x5+parseInt(_0x253db3(0x13f))/0x6*(-parseInt(_0x253db3(0x139))/0x7)+-parseInt(_0x253db3(0x130))/0x8*(-parseInt(_0x253db3(0x162))/0x9)+parseInt(_0x253db3(0x18a))/0xa*(parseInt(_0x253db3(0x127))/0xb)+parseInt(_0x253db3(0x141))/0xc*(-parseInt(_0x253db3(0x179))/0xd);if(_0x2554da===_0x4e2f0a)break;else _0x496f26['push'](_0x496f26['shift']());}catch(_0x179e82){_0x496f26['push'](_0x496f26['shift']());}}}(a74_0x55bd,0x87a04));function a74_0x4706(_0x25bb9d,_0x2cb0ba){const _0x2896aa=a74_0x55bd();return a74_0x4706=function(_0x1504dd,_0x1a5292){_0x1504dd=_0x1504dd-0x121;let _0x55bd17=_0x2896aa[_0x1504dd];return _0x55bd17;},a74_0x4706(_0x25bb9d,_0x2cb0ba);}const a74_0x1a5292=(function(){let _0x25ad2e=!![];return function(_0x10bef2,_0x3f1e1a){const _0x4cd903=_0x25ad2e?function(){const _0x2fc14a=a74_0x4706;if(_0x3f1e1a){const _0x3c15fa=_0x3f1e1a[_0x2fc14a(0x14d)](_0x10bef2,arguments);return _0x3f1e1a=null,_0x3c15fa;}}:function(){};return _0x25ad2e=![],_0x4cd903;};}()),a74_0x1504dd=a74_0x1a5292(this,function(){const _0x309008=a74_0x4706;return a74_0x1504dd[_0x309008(0x175)]()[_0x309008(0x126)](_0x309008(0x137))[_0x309008(0x175)]()[_0x309008(0x168)](a74_0x1504dd)['search'](_0x309008(0x137));});a74_0x1504dd();'use strict';var __decorate=this&&this[a74_0x5de30e(0x163)]||function(_0x49fb03,_0x4a8678,_0x372322,_0x2931d4){const _0x2d81bf=a74_0x5de30e;var _0x4f55e5=arguments[_0x2d81bf(0x16d)],_0x3c25ef=_0x4f55e5<0x3?_0x4a8678:_0x2931d4===null?_0x2931d4=Object[_0x2d81bf(0x15c)](_0x4a8678,_0x372322):_0x2931d4,_0x108b6f;if(typeof Reflect===_0x2d81bf(0x134)&&typeof Reflect[_0x2d81bf(0x158)]===_0x2d81bf(0x13a))_0x3c25ef=Reflect[_0x2d81bf(0x158)](_0x49fb03,_0x4a8678,_0x372322,_0x2931d4);else{for(var _0x3d2ab4=_0x49fb03[_0x2d81bf(0x16d)]-0x1;_0x3d2ab4>=0x0;_0x3d2ab4--)if(_0x108b6f=_0x49fb03[_0x3d2ab4])_0x3c25ef=(_0x4f55e5<0x3?_0x108b6f(_0x3c25ef):_0x4f55e5>0x3?_0x108b6f(_0x4a8678,_0x372322,_0x3c25ef):_0x108b6f(_0x4a8678,_0x372322))||_0x3c25ef;}return _0x4f55e5>0x3&&_0x3c25ef&&Object[_0x2d81bf(0x169)](_0x4a8678,_0x372322,_0x3c25ef),_0x3c25ef;},__metadata=this&&this[a74_0x5de30e(0x136)]||function(_0x191b5a,_0x1c2f06){const _0x10a19e=a74_0x5de30e;if(typeof Reflect===_0x10a19e(0x134)&&typeof Reflect[_0x10a19e(0x121)]===_0x10a19e(0x13a))return Reflect[_0x10a19e(0x121)](_0x191b5a,_0x1c2f06);},__importDefault=this&&this[a74_0x5de30e(0x13c)]||function(_0x5eb920){const _0x579ee=a74_0x5de30e;return _0x5eb920&&_0x5eb920[_0x579ee(0x124)]?_0x5eb920:{'default':_0x5eb920};},FlosumCommitJob_1;Object[a74_0x5de30e(0x169)](exports,a74_0x5de30e(0x124),{'value':!![]}),exports[a74_0x5de30e(0x12c)]=void 0x0;const core_1=require(a74_0x5de30e(0x176)),salesforce_service_1=require(a74_0x5de30e(0x14f)),typedi_1=require('typedi'),errors_1=require('../../../../constants/errors'),bad_request_error_1=require(a74_0x5de30e(0x172)),salesforce_retriever_service_1=require(a74_0x5de30e(0x129)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),commit_components_dto_1=require(a74_0x5de30e(0x188)),commit_components_job_1=require(a74_0x5de30e(0x17b)),constants_1=require(a74_0x5de30e(0x150)),shortid_1=__importDefault(require(a74_0x5de30e(0x18b))),providers_tokens_1=require(a74_0x5de30e(0x12f));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x57d7ab,_0x133698,_0x1d2711){const _0x20b0ef=a74_0x5de30e;this[_0x20b0ef(0x165)]=_0x57d7ab,this['commitJob']=_0x133698,this[_0x20b0ef(0x128)]=_0x1d2711,this[_0x20b0ef(0x148)]=new core_1['Logger'](FlosumCommitJob_1['name']);}async['fetchRepositoryData'](){const _0x1b7fb2=a74_0x5de30e;try{if(this['commitData'][_0x1b7fb2(0x147)])this['repositoryData']=await this['salesforceSync']['getRepositoryRecord'](this[_0x1b7fb2(0x145)][_0x1b7fb2(0x147)]);else this[_0x1b7fb2(0x145)]['syncBranchId']&&(this[_0x1b7fb2(0x143)]=await this['salesforceSync'][_0x1b7fb2(0x181)](this[_0x1b7fb2(0x145)][_0x1b7fb2(0x184)]));}catch(_0x59edb9){throw new bad_request_error_1[(_0x1b7fb2(0x183))](errors_1[_0x1b7fb2(0x187)]);}}async[a74_0x5de30e(0x15d)](){const _0x5316f4=a74_0x5de30e;if(!this[_0x5316f4(0x145)][_0x5316f4(0x17c)])return[];await this[_0x5316f4(0x165)][_0x5316f4(0x159)](constants_1[_0x5316f4(0x155)],this[_0x5316f4(0x145)][_0x5316f4(0x17c)],{'Name':(0x0,shortid_1[_0x5316f4(0x14a)])()});const _0x19a745=await this['salesforceService'][_0x5316f4(0x157)](this[_0x5316f4(0x145)][_0x5316f4(0x17c)])['then'](_0x32a93e=>_0x32a93e['split']('\x20')[_0x5316f4(0x12b)](_0xcdd236=>_0xcdd236['trim']()));await this[_0x5316f4(0x165)][_0x5316f4(0x180)](this[_0x5316f4(0x145)][_0x5316f4(0x17c)]);const _0x14e4f7=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x5316f4(0x165)]);return await _0x14e4f7[_0x5316f4(0x12d)](_0x19a745);}async[a74_0x5de30e(0x154)](){const _0x5aec14=a74_0x5de30e;if(!this[_0x5aec14(0x145)][_0x5aec14(0x133)])return[];await this[_0x5aec14(0x165)][_0x5aec14(0x159)](constants_1[_0x5aec14(0x155)],this[_0x5aec14(0x145)][_0x5aec14(0x133)],{'Name':(0x0,shortid_1[_0x5aec14(0x14a)])()});const _0x189cff=await this[_0x5aec14(0x165)][_0x5aec14(0x157)](this[_0x5aec14(0x145)][_0x5aec14(0x133)]);return await this[_0x5aec14(0x165)][_0x5aec14(0x180)](this[_0x5aec14(0x145)][_0x5aec14(0x133)]),_0x189cff;}async[a74_0x5de30e(0x164)](){const _0x42b056=a74_0x5de30e,_0x53002e=new commit_components_dto_1['CommitComponentsDto'](),[_0x1923a8,_0x1804cb]=await Promise['all']([this['getComponentsToWrite'](),this['getComponentsToDelete']()]);return _0x53002e[_0x42b056(0x151)]=this['commitData']['message'],_0x53002e[_0x42b056(0x153)]=this[_0x42b056(0x145)][_0x42b056(0x153)],_0x53002e[_0x42b056(0x15e)]={'writed':_0x1923a8,'deleted':_0x1804cb},_0x53002e[_0x42b056(0x160)]=this[_0x42b056(0x123)][_0x42b056(0x13e)],_0x53002e[_0x42b056(0x167)]=this[_0x42b056(0x149)],_0x53002e[_0x42b056(0x17a)]=this[_0x42b056(0x17a)],_0x53002e[_0x42b056(0x13d)]=this[_0x42b056(0x123)]['gitProvider'],_0x53002e;}async[a74_0x5de30e(0x16b)](_0x279800=![]){const _0x30ef28=a74_0x5de30e;if(_0x279800)await this[_0x30ef28(0x128)]['updateRemoteState'](this[_0x30ef28(0x143)],{});else{const _0xcd1a90=await this['repository'][_0x30ef28(0x185)][_0x30ef28(0x146)](this['branch'][_0x30ef28(0x14b)]);this[_0x30ef28(0x132)]['log'](this[_0x30ef28(0x17d)]+_0x30ef28(0x16f));const _0x3ce76={[this[_0x30ef28(0x149)]['gitUrl']]:{'lastCommit':_0xcd1a90[_0x30ef28(0x142)]}};await this[_0x30ef28(0x128)]['updateRemoteState'](this[_0x30ef28(0x143)],_0x3ce76);}}async[a74_0x5de30e(0x144)](){const _0x50c3d6=a74_0x5de30e,_0x1dbcbe=await this[_0x50c3d6(0x164)]();await this[_0x50c3d6(0x128)][_0x50c3d6(0x15b)](this[_0x50c3d6(0x143)],'In\x20Progress'),await this[_0x50c3d6(0x12e)]['run'](_0x1dbcbe,this[_0x50c3d6(0x17d)]),await this[_0x50c3d6(0x16b)](),await this[_0x50c3d6(0x128)][_0x50c3d6(0x15b)](this[_0x50c3d6(0x143)],_0x50c3d6(0x14c));}async[a74_0x5de30e(0x178)](_0x4c4f50){const _0x255ec2=a74_0x5de30e;try{this[_0x255ec2(0x132)][_0x255ec2(0x18c)](''+_0x4c4f50),await this[_0x255ec2(0x132)][_0x255ec2(0x189)](),await this[_0x255ec2(0x16b)](!![]),await this['salesforceSync'][_0x255ec2(0x15b)](this[_0x255ec2(0x143)],_0x255ec2(0x16c));}catch(_0x57f484){this[_0x255ec2(0x148)][_0x255ec2(0x18c)](_0x57f484);}}async[a74_0x5de30e(0x12d)](_0x2782ec){const _0x3e3852=a74_0x5de30e;try{this['commitData']=_0x2782ec,this[_0x3e3852(0x13b)]=typedi_1[_0x3e3852(0x14e)][_0x3e3852(0x15f)](providers_tokens_1[_0x3e3852(0x122)]['gitApiService']),this[_0x3e3852(0x186)]=typedi_1[_0x3e3852(0x14e)][_0x3e3852(0x15f)](providers_tokens_1[_0x3e3852(0x122)][_0x3e3852(0x138)]),this[_0x3e3852(0x123)]=typedi_1[_0x3e3852(0x14e)][_0x3e3852(0x15f)](providers_tokens_1[_0x3e3852(0x122)][_0x3e3852(0x123)]),await this['fetchRepositoryData'](),this[_0x3e3852(0x149)]=await this['repoService']['getOne'](this['repositoryData'][_0x3e3852(0x152)]),this['branch']=await this[_0x3e3852(0x149)][_0x3e3852(0x185)][_0x3e3852(0x146)](this[_0x3e3852(0x143)][_0x3e3852(0x140)]),this[_0x3e3852(0x132)]=typedi_1[_0x3e3852(0x14e)][_0x3e3852(0x15f)](providers_tokens_1['Tokens']['logger']),this[_0x3e3852(0x17d)]=_0x3e3852(0x16e)+this[_0x3e3852(0x123)][_0x3e3852(0x135)][_0x3e3852(0x174)]()+_0x3e3852(0x17e)+this['repositoryData'][_0x3e3852(0x152)]+_0x3e3852(0x161)+this[_0x3e3852(0x143)]['branchName']+_0x3e3852(0x182)+FlosumCommitJob_1[_0x3e3852(0x14b)]+']';if(!this[_0x3e3852(0x143)])throw new bad_request_error_1[(_0x3e3852(0x183))](errors_1[_0x3e3852(0x16a)]);await this[_0x3e3852(0x132)][_0x3e3852(0x173)](this[_0x3e3852(0x17d)]+_0x3e3852(0x131))['send'](),await this['exec']()[_0x3e3852(0x170)](_0x9fb06e=>this[_0x3e3852(0x178)](_0x9fb06e));}catch(_0x259877){this['commitData']=undefined,this['logger'][_0x3e3852(0x18c)](_0x259877);throw _0x259877;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1[a74_0x5de30e(0x15a)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1[a74_0x5de30e(0x125)],commit_components_job_1['CommitComponentsJob'],salesforce_sync_service_1[a74_0x5de30e(0x156)]])],FlosumCommitJob),exports[a74_0x5de30e(0x12c)]=FlosumCommitJob;