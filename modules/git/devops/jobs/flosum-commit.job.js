function a74_0xcdff(_0x366738,_0x2ebe58){const _0x54929a=a74_0x96f6();return a74_0xcdff=function(_0x47df8c,_0x3ad8f3){_0x47df8c=_0x47df8c-0x106;let _0x96f6ee=_0x54929a[_0x47df8c];return _0x96f6ee;},a74_0xcdff(_0x366738,_0x2ebe58);}const a74_0x153baf=a74_0xcdff;(function(_0x1aad6d,_0xbedddc){const _0x5c3287=a74_0xcdff,_0x157ce1=_0x1aad6d();while(!![]){try{const _0x423c2c=parseInt(_0x5c3287(0x14a))/0x1+parseInt(_0x5c3287(0x164))/0x2*(parseInt(_0x5c3287(0x111))/0x3)+-parseInt(_0x5c3287(0x136))/0x4+parseInt(_0x5c3287(0x16c))/0x5+parseInt(_0x5c3287(0x167))/0x6+parseInt(_0x5c3287(0x141))/0x7+-parseInt(_0x5c3287(0x151))/0x8;if(_0x423c2c===_0xbedddc)break;else _0x157ce1['push'](_0x157ce1['shift']());}catch(_0x16673c){_0x157ce1['push'](_0x157ce1['shift']());}}}(a74_0x96f6,0xf40be));const a74_0x3ad8f3=(function(){let _0x1c919b=!![];return function(_0x52aa08,_0x26adb7){const _0x3146c0=_0x1c919b?function(){const _0x280e5f=a74_0xcdff;if(_0x26adb7){const _0x561cb2=_0x26adb7[_0x280e5f(0x121)](_0x52aa08,arguments);return _0x26adb7=null,_0x561cb2;}}:function(){};return _0x1c919b=![],_0x3146c0;};}()),a74_0x47df8c=a74_0x3ad8f3(this,function(){const _0x41f5f1=a74_0xcdff;return a74_0x47df8c[_0x41f5f1(0x144)]()[_0x41f5f1(0x126)](_0x41f5f1(0x16b))[_0x41f5f1(0x144)]()[_0x41f5f1(0x125)](a74_0x47df8c)[_0x41f5f1(0x126)](_0x41f5f1(0x16b));});function a74_0x96f6(){const _0x11c557=['./commit-components.job','Service','name','4231560tZbeKt','__esModule','repoService','user','__importDefault','branch','BadRequestError','../../../../core','length','catch','Logger','convertToSFDX','SalesforceRetrieverService','../dto/commit-components.dto','getComponentsToDelete','CommitComponentsJob','repository','trim','../../salesforce/services/salesforce-sync.service','954796ONwyOA','repositoryName','run','1825050vmecKW','function','../../salesforce/services/salesforce-retriever.service','prefix','(((.+)+)+)+$','223750nklQUI','all',']\x20[Branch:\x20','[FLOSUM\x20->\x20GIT]\x20[','sha','decorate','../../../../core/errors/bad-request.error','fetchRepositoryData','syncRepositoryId','../../salesforce/services/salesforce.service','commitData','provider','6ftGKBd','../../providers/providers.tokens','commitAttachmentId','commitJob','syncBranchId','patchObject','getOne','Tokens','components','salesforceSync','updateRemoteState','setStatus','repositoryData','message','In\x20Progress','branches','apply','error',']\x20[Repository:\x20','getBranchRecord','constructor','search','then','default','metadata','sfLogger','exec','deleteAttachmentId','ERR_UNKNOWN_SYNC_RECORD_ID','send','gitProvider','gitApiService','salesforceService','FlosumCommitJob','deleteAttachment','getCommitDto','typedi','7676720mZYMor','config','FLOSUM_ATTACHMENT','get','SalesforceSyncService','object','../../../../constants/errors','gitUrl','log','design:paramtypes','retrieveAttachment','3397205umuYjo','updateLastCommit','SalesforceService','toString','handleCommitJobError','\x20Update\x20remote\x20state.','Container','getComponentsToWrite','Completed','1658703qnyauN','getRepositoryRecord','gitRepoService','logger'];a74_0x96f6=function(){return _0x11c557;};return a74_0x96f6();}a74_0x47df8c();'use strict';var __decorate=this&&this['__decorate']||function(_0x2c492b,_0x5455bf,_0x3b2bb0,_0x2edb40){const _0x47cc55=a74_0xcdff;var _0x1acfac=arguments[_0x47cc55(0x159)],_0x4347ff=_0x1acfac<0x3?_0x5455bf:_0x2edb40===null?_0x2edb40=Object['getOwnPropertyDescriptor'](_0x5455bf,_0x3b2bb0):_0x2edb40,_0x550a84;if(typeof Reflect===_0x47cc55(0x13b)&&typeof Reflect[_0x47cc55(0x10a)]===_0x47cc55(0x168))_0x4347ff=Reflect[_0x47cc55(0x10a)](_0x2c492b,_0x5455bf,_0x3b2bb0,_0x2edb40);else{for(var _0x1191fb=_0x2c492b['length']-0x1;_0x1191fb>=0x0;_0x1191fb--)if(_0x550a84=_0x2c492b[_0x1191fb])_0x4347ff=(_0x1acfac<0x3?_0x550a84(_0x4347ff):_0x1acfac>0x3?_0x550a84(_0x5455bf,_0x3b2bb0,_0x4347ff):_0x550a84(_0x5455bf,_0x3b2bb0))||_0x4347ff;}return _0x1acfac>0x3&&_0x4347ff&&Object['defineProperty'](_0x5455bf,_0x3b2bb0,_0x4347ff),_0x4347ff;},__metadata=this&&this['__metadata']||function(_0x3e21e0,_0x214f24){const _0x4b090b=a74_0xcdff;if(typeof Reflect===_0x4b090b(0x13b)&&typeof Reflect[_0x4b090b(0x129)]===_0x4b090b(0x168))return Reflect[_0x4b090b(0x129)](_0x3e21e0,_0x214f24);},__importDefault=this&&this[a74_0x153baf(0x155)]||function(_0x3ca0d8){const _0x43ceca=a74_0x153baf;return _0x3ca0d8&&_0x3ca0d8[_0x43ceca(0x152)]?_0x3ca0d8:{'default':_0x3ca0d8};},FlosumCommitJob_1;Object['defineProperty'](exports,a74_0x153baf(0x152),{'value':!![]}),exports[a74_0x153baf(0x132)]=void 0x0;const core_1=require(a74_0x153baf(0x158)),salesforce_service_1=require(a74_0x153baf(0x10e)),typedi_1=require(a74_0x153baf(0x135)),errors_1=require(a74_0x153baf(0x13c)),bad_request_error_1=require(a74_0x153baf(0x10b)),salesforce_retriever_service_1=require(a74_0x153baf(0x169)),salesforce_sync_service_1=require(a74_0x153baf(0x163)),commit_components_dto_1=require(a74_0x153baf(0x15e)),commit_components_job_1=require(a74_0x153baf(0x14e)),constants_1=require('../../../../constants'),shortid_1=__importDefault(require('shortid')),providers_tokens_1=require(a74_0x153baf(0x112));let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x419b9b,_0x2d60cb,_0x333349){const _0x4ad5ed=a74_0x153baf;this['salesforceService']=_0x419b9b,this[_0x4ad5ed(0x114)]=_0x2d60cb,this[_0x4ad5ed(0x11a)]=_0x333349,this['logger']=new core_1[(_0x4ad5ed(0x15b))](FlosumCommitJob_1[_0x4ad5ed(0x150)]);}async['fetchRepositoryData'](){const _0x47fe4b=a74_0x153baf;try{if(this['commitData']['syncRepositoryId'])this[_0x47fe4b(0x11d)]=await this['salesforceSync'][_0x47fe4b(0x14b)](this[_0x47fe4b(0x10f)][_0x47fe4b(0x10d)]);else this['commitData'][_0x47fe4b(0x115)]&&(this[_0x47fe4b(0x11d)]=await this[_0x47fe4b(0x11a)][_0x47fe4b(0x124)](this[_0x47fe4b(0x10f)][_0x47fe4b(0x115)]));}catch(_0x17be28){throw new bad_request_error_1[(_0x47fe4b(0x157))](errors_1['ERR_INVALID_SYNC_RECORD_ID']);}}async[a74_0x153baf(0x148)](){const _0x5e418e=a74_0x153baf;if(!this[_0x5e418e(0x10f)][_0x5e418e(0x113)])return[];await this[_0x5e418e(0x131)][_0x5e418e(0x116)](constants_1[_0x5e418e(0x138)],this[_0x5e418e(0x10f)][_0x5e418e(0x113)],{'Name':(0x0,shortid_1[_0x5e418e(0x128)])()});const _0x54a136=await this['salesforceService'][_0x5e418e(0x140)](this[_0x5e418e(0x10f)][_0x5e418e(0x113)])[_0x5e418e(0x127)](_0x393a6a=>_0x393a6a['split']('\x20')['map'](_0x3ff686=>_0x3ff686[_0x5e418e(0x162)]()));await this[_0x5e418e(0x131)][_0x5e418e(0x133)](this[_0x5e418e(0x10f)][_0x5e418e(0x113)]);const _0x4126cc=new salesforce_retriever_service_1[(_0x5e418e(0x15d))](this[_0x5e418e(0x131)]);return await _0x4126cc[_0x5e418e(0x166)](_0x54a136);}async[a74_0x153baf(0x15f)](){const _0x5a5480=a74_0x153baf;if(!this[_0x5a5480(0x10f)][_0x5a5480(0x12c)])return[];await this[_0x5a5480(0x131)][_0x5a5480(0x116)](constants_1[_0x5a5480(0x138)],this[_0x5a5480(0x10f)]['deleteAttachmentId'],{'Name':(0x0,shortid_1[_0x5a5480(0x128)])()});const _0x284125=await this['salesforceService'][_0x5a5480(0x140)](this[_0x5a5480(0x10f)][_0x5a5480(0x12c)]);return await this['salesforceService'][_0x5a5480(0x133)](this[_0x5a5480(0x10f)][_0x5a5480(0x12c)]),_0x284125;}async['getCommitDto'](){const _0x4dbc75=a74_0x153baf,_0x4893fb=new commit_components_dto_1['CommitComponentsDto'](),[_0x531304,_0x5ec071]=await Promise[_0x4dbc75(0x106)]([this[_0x4dbc75(0x148)](),this[_0x4dbc75(0x15f)]()]);return _0x4893fb['message']=this[_0x4dbc75(0x10f)][_0x4dbc75(0x11e)],_0x4893fb[_0x4dbc75(0x154)]=this[_0x4dbc75(0x10f)][_0x4dbc75(0x154)],_0x4893fb[_0x4dbc75(0x119)]={'writed':_0x531304,'deleted':_0x5ec071},_0x4893fb[_0x4dbc75(0x15c)]=this[_0x4dbc75(0x137)]['isConvertToSfdx'],_0x4893fb['repo']=this[_0x4dbc75(0x161)],_0x4893fb['branch']=this[_0x4dbc75(0x156)],_0x4893fb[_0x4dbc75(0x110)]=this[_0x4dbc75(0x137)]['gitProvider'],_0x4893fb;}async['updateLastCommit'](_0x3c6f86=![]){const _0x4b8783=a74_0x153baf;if(_0x3c6f86)await this['salesforceSync'][_0x4b8783(0x11b)](this['repositoryData'],{});else{const _0x42001e=await this[_0x4b8783(0x161)][_0x4b8783(0x120)][_0x4b8783(0x117)](this[_0x4b8783(0x156)][_0x4b8783(0x150)]);this[_0x4b8783(0x12a)][_0x4b8783(0x13e)](this[_0x4b8783(0x16a)]+_0x4b8783(0x146));const _0x1b635f={[this[_0x4b8783(0x161)][_0x4b8783(0x13d)]]:{'lastCommit':_0x42001e[_0x4b8783(0x109)]}};await this[_0x4b8783(0x11a)][_0x4b8783(0x11b)](this[_0x4b8783(0x11d)],_0x1b635f);}}async['exec'](){const _0xf677fe=a74_0x153baf,_0x1855fc=await this[_0xf677fe(0x134)]();await this[_0xf677fe(0x11a)][_0xf677fe(0x11c)](this['repositoryData'],_0xf677fe(0x11f)),await this[_0xf677fe(0x114)][_0xf677fe(0x166)](_0x1855fc,this[_0xf677fe(0x16a)]),await this[_0xf677fe(0x142)](),await this[_0xf677fe(0x11a)][_0xf677fe(0x11c)](this[_0xf677fe(0x11d)],_0xf677fe(0x149));}async[a74_0x153baf(0x145)](_0x3a4018){const _0x3d2b08=a74_0x153baf;try{this['sfLogger'][_0x3d2b08(0x122)](''+_0x3a4018),await this[_0x3d2b08(0x12a)][_0x3d2b08(0x12e)](),await this[_0x3d2b08(0x142)](!![]),await this[_0x3d2b08(0x11a)][_0x3d2b08(0x11c)](this[_0x3d2b08(0x11d)],'Error');}catch(_0x58daaa){this[_0x3d2b08(0x14d)][_0x3d2b08(0x122)](_0x58daaa);}}async['run'](_0x576b13){const _0x1f4e21=a74_0x153baf;try{this[_0x1f4e21(0x10f)]=_0x576b13,this[_0x1f4e21(0x130)]=typedi_1[_0x1f4e21(0x147)]['get'](providers_tokens_1[_0x1f4e21(0x118)][_0x1f4e21(0x130)]),this[_0x1f4e21(0x153)]=typedi_1[_0x1f4e21(0x147)][_0x1f4e21(0x139)](providers_tokens_1[_0x1f4e21(0x118)][_0x1f4e21(0x14c)]),this['config']=typedi_1[_0x1f4e21(0x147)]['get'](providers_tokens_1[_0x1f4e21(0x118)][_0x1f4e21(0x137)]),await this[_0x1f4e21(0x10c)](),this[_0x1f4e21(0x161)]=await this['repoService']['getOne'](this[_0x1f4e21(0x11d)][_0x1f4e21(0x165)]),this[_0x1f4e21(0x156)]=await this[_0x1f4e21(0x161)][_0x1f4e21(0x120)][_0x1f4e21(0x117)](this[_0x1f4e21(0x11d)]['branchName']),this['sfLogger']=typedi_1['Container'][_0x1f4e21(0x139)](providers_tokens_1[_0x1f4e21(0x118)][_0x1f4e21(0x14d)]),this['prefix']=_0x1f4e21(0x108)+this[_0x1f4e21(0x137)][_0x1f4e21(0x12f)]['toUpperCase']()+_0x1f4e21(0x123)+this['repositoryData'][_0x1f4e21(0x165)]+_0x1f4e21(0x107)+this[_0x1f4e21(0x11d)]['branchName']+']\x20['+FlosumCommitJob_1[_0x1f4e21(0x150)]+']';if(!this['repositoryData'])throw new bad_request_error_1[(_0x1f4e21(0x157))](errors_1[_0x1f4e21(0x12d)]);await this[_0x1f4e21(0x12a)]['log'](this['prefix']+'\x20Start\x20Flosum\x20commit\x20job.')[_0x1f4e21(0x12e)](),await this[_0x1f4e21(0x12b)]()[_0x1f4e21(0x15a)](_0x78f012=>this['handleCommitJobError'](_0x78f012));}catch(_0x123799){this['commitData']=undefined,this[_0x1f4e21(0x14d)][_0x1f4e21(0x122)](_0x123799);throw _0x123799;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1[a74_0x153baf(0x14f)])({'transient':!![]}),__metadata(a74_0x153baf(0x13f),[salesforce_service_1[a74_0x153baf(0x143)],commit_components_job_1[a74_0x153baf(0x160)],salesforce_sync_service_1[a74_0x153baf(0x13a)]])],FlosumCommitJob),exports[a74_0x153baf(0x132)]=FlosumCommitJob;