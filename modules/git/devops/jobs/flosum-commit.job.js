function a105_0x32c4(){const _0x3147fc=['setStatus','typedi','salesforceService','map','21184506DTIThd','deleteAttachment','SalesforceRetrieverService','handleCommitJobError','exec','error','../../../../core','Error','apply','../../../../core/errors/bad-request.error','repoService','catch','SalesforceService','object','SalesforceSyncService','search','branches','default','salesforceSync','trim','branchName','branch','then','Service','../../salesforce/services/salesforce.service','../../salesforce/services/salesforce-retriever.service','log','[FLOSUM\x20->\x20GIT]\x20[','In\x20Progress','logger','getBranchRecord','get','1024801NVNGly','6gdHmBT','CommitComponentsDto','Tokens','constructor','length','retrieveAttachment','split','sfLogger','20CFrcVL','decorate','459524lHSrbO','repositoryData','message','patchObject','isConvertToSfdx','commitJob','__metadata','provider','../../salesforce/services/salesforce-sync.service','../../../../constants/errors','__decorate','getComponentsToWrite','config','(((.+)+)+)+$','FlosumCommitJob','design:paramtypes','getOwnPropertyDescriptor','2240006xfTkOL','convertToSFDX','updateLastCommit','__importDefault','syncRepositoryId','Completed','ERR_INVALID_SYNC_RECORD_ID','sha','metadata','7515845PaWkqL','18XzToyS','repo','gitRepoService','gitProvider',']\x20[Repository:\x20','send','shortid','fetchRepositoryData','name','defineProperty','toString','ERR_UNKNOWN_SYNC_RECORD_ID','toUpperCase','Logger','FLOSUM_ATTACHMENT','syncBranchId','commitData','components','2321767ehAESS','\x20Start\x20Flosum\x20commit\x20job.','user','12666288VSDMjG','updateRemoteState','commitAttachmentId','function','__esModule','Container','run','getCommitDto','prefix','repositoryName','getComponentsToDelete','BadRequestError','deleteAttachmentId','repository'];a105_0x32c4=function(){return _0x3147fc;};return a105_0x32c4();}const a105_0x8b185e=a105_0x3066;(function(_0x592c77,_0x397adc){const _0x4cdd23=a105_0x3066,_0x4ca8fc=_0x592c77();while(!![]){try{const _0x1bbe08=parseInt(_0x4cdd23(0x1ef))/0x1+parseInt(_0x4cdd23(0x19e))/0x2+-parseInt(_0x4cdd23(0x1a8))/0x3*(-parseInt(_0x4cdd23(0x1fa))/0x4)+-parseInt(_0x4cdd23(0x1a7))/0x5*(-parseInt(_0x4cdd23(0x1f0))/0x6)+-parseInt(_0x4cdd23(0x1ba))/0x7+parseInt(_0x4cdd23(0x1bd))/0x8+-parseInt(_0x4cdd23(0x1cf))/0x9*(parseInt(_0x4cdd23(0x1f8))/0xa);if(_0x1bbe08===_0x397adc)break;else _0x4ca8fc['push'](_0x4ca8fc['shift']());}catch(_0x3de990){_0x4ca8fc['push'](_0x4ca8fc['shift']());}}}(a105_0x32c4,0xd722c));const a105_0x29e2da=(function(){let _0x23711c=!![];return function(_0x47db07,_0x2fdd31){const _0x147643=_0x23711c?function(){const _0x2273a0=a105_0x3066;if(_0x2fdd31){const _0x4bd12f=_0x2fdd31[_0x2273a0(0x1d7)](_0x47db07,arguments);return _0x2fdd31=null,_0x4bd12f;}}:function(){};return _0x23711c=![],_0x147643;};}()),a105_0x5d70a4=a105_0x29e2da(this,function(){const _0x482c54=a105_0x3066;return a105_0x5d70a4[_0x482c54(0x1b2)]()[_0x482c54(0x1de)](_0x482c54(0x19a))['toString']()[_0x482c54(0x1f3)](a105_0x5d70a4)['search']('(((.+)+)+)+$');});a105_0x5d70a4();'use strict';var __decorate=this&&this[a105_0x8b185e(0x204)]||function(_0x460ba2,_0x2c87fe,_0x5b56a9,_0x3849c8){const _0x35ad82=a105_0x8b185e;var _0x287526=arguments[_0x35ad82(0x1f4)],_0x3269a0=_0x287526<0x3?_0x2c87fe:_0x3849c8===null?_0x3849c8=Object[_0x35ad82(0x19d)](_0x2c87fe,_0x5b56a9):_0x3849c8,_0x39304f;if(typeof Reflect===_0x35ad82(0x1dc)&&typeof Reflect['decorate']===_0x35ad82(0x1c0))_0x3269a0=Reflect[_0x35ad82(0x1f9)](_0x460ba2,_0x2c87fe,_0x5b56a9,_0x3849c8);else{for(var _0x161cae=_0x460ba2['length']-0x1;_0x161cae>=0x0;_0x161cae--)if(_0x39304f=_0x460ba2[_0x161cae])_0x3269a0=(_0x287526<0x3?_0x39304f(_0x3269a0):_0x287526>0x3?_0x39304f(_0x2c87fe,_0x5b56a9,_0x3269a0):_0x39304f(_0x2c87fe,_0x5b56a9))||_0x3269a0;}return _0x287526>0x3&&_0x3269a0&&Object[_0x35ad82(0x1b1)](_0x2c87fe,_0x5b56a9,_0x3269a0),_0x3269a0;},__metadata=this&&this[a105_0x8b185e(0x200)]||function(_0x94ff1,_0x196431){const _0x15de1d=a105_0x8b185e;if(typeof Reflect==='object'&&typeof Reflect[_0x15de1d(0x1a6)]===_0x15de1d(0x1c0))return Reflect['metadata'](_0x94ff1,_0x196431);},__importDefault=this&&this[a105_0x8b185e(0x1a1)]||function(_0x28dc04){const _0x3e3f59=a105_0x8b185e;return _0x28dc04&&_0x28dc04[_0x3e3f59(0x1c1)]?_0x28dc04:{'default':_0x28dc04};},FlosumCommitJob_1;function a105_0x3066(_0x5813ed,_0x4a4277){const _0x389dfe=a105_0x32c4();return a105_0x3066=function(_0x5d70a4,_0x29e2da){_0x5d70a4=_0x5d70a4-0x19a;let _0x32c477=_0x389dfe[_0x5d70a4];return _0x32c477;},a105_0x3066(_0x5813ed,_0x4a4277);}Object[a105_0x8b185e(0x1b1)](exports,a105_0x8b185e(0x1c1),{'value':!![]}),exports[a105_0x8b185e(0x19b)]=void 0x0;const core_1=require(a105_0x8b185e(0x1d5)),salesforce_service_1=require(a105_0x8b185e(0x1e7)),typedi_1=require(a105_0x8b185e(0x1cc)),errors_1=require(a105_0x8b185e(0x203)),bad_request_error_1=require(a105_0x8b185e(0x1d8)),salesforce_retriever_service_1=require(a105_0x8b185e(0x1e8)),salesforce_sync_service_1=require(a105_0x8b185e(0x202)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job'),constants_1=require('../../../../constants'),shortid_1=__importDefault(require(a105_0x8b185e(0x1ae))),providers_tokens_1=require('../../providers/providers.tokens');let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x4dd067,_0x45381c,_0x36d5f7){const _0x5c57e6=a105_0x8b185e;this[_0x5c57e6(0x1cd)]=_0x4dd067,this[_0x5c57e6(0x1ff)]=_0x45381c,this['salesforceSync']=_0x36d5f7,this[_0x5c57e6(0x1ec)]=new core_1[(_0x5c57e6(0x1b5))](FlosumCommitJob_1[_0x5c57e6(0x1b0)]);}async[a105_0x8b185e(0x1af)](){const _0x5ad3fe=a105_0x8b185e;try{if(this[_0x5ad3fe(0x1b8)][_0x5ad3fe(0x1a2)])this[_0x5ad3fe(0x1fb)]=await this['salesforceSync']['getRepositoryRecord'](this[_0x5ad3fe(0x1b8)][_0x5ad3fe(0x1a2)]);else this[_0x5ad3fe(0x1b8)][_0x5ad3fe(0x1b7)]&&(this[_0x5ad3fe(0x1fb)]=await this[_0x5ad3fe(0x1e1)][_0x5ad3fe(0x1ed)](this[_0x5ad3fe(0x1b8)][_0x5ad3fe(0x1b7)]));}catch(_0x3e3fdc){throw new bad_request_error_1[(_0x5ad3fe(0x1c8))](errors_1[_0x5ad3fe(0x1a4)]);}}async[a105_0x8b185e(0x205)](){const _0x2725ff=a105_0x8b185e;if(!this['commitData'][_0x2725ff(0x1bf)])return[];await this[_0x2725ff(0x1cd)][_0x2725ff(0x1fd)](constants_1['FLOSUM_ATTACHMENT'],this[_0x2725ff(0x1b8)][_0x2725ff(0x1bf)],{'Name':(0x0,shortid_1['default'])()});const _0x266ba1=await this[_0x2725ff(0x1cd)][_0x2725ff(0x1f5)](this[_0x2725ff(0x1b8)][_0x2725ff(0x1bf)])[_0x2725ff(0x1e5)](_0xd9934e=>_0xd9934e[_0x2725ff(0x1f6)]('\x20')[_0x2725ff(0x1ce)](_0x33091d=>_0x33091d[_0x2725ff(0x1e2)]()));await this[_0x2725ff(0x1cd)][_0x2725ff(0x1d0)](this['commitData'][_0x2725ff(0x1bf)]);const _0x774450=new salesforce_retriever_service_1[(_0x2725ff(0x1d1))](this['salesforceService']);return await _0x774450[_0x2725ff(0x1c3)](_0x266ba1);}async[a105_0x8b185e(0x1c7)](){const _0x170485=a105_0x8b185e;if(!this[_0x170485(0x1b8)]['deleteAttachmentId'])return[];await this[_0x170485(0x1cd)]['patchObject'](constants_1[_0x170485(0x1b6)],this[_0x170485(0x1b8)][_0x170485(0x1c9)],{'Name':(0x0,shortid_1[_0x170485(0x1e0)])()});const _0x39dc70=await this[_0x170485(0x1cd)]['retrieveAttachment'](this[_0x170485(0x1b8)][_0x170485(0x1c9)]);return await this[_0x170485(0x1cd)]['deleteAttachment'](this['commitData'][_0x170485(0x1c9)]),_0x39dc70;}async[a105_0x8b185e(0x1c4)](){const _0x1e6e82=a105_0x8b185e,_0x2200b5=new commit_components_dto_1[(_0x1e6e82(0x1f1))](),[_0x268cc7,_0x5298f2]=await Promise['all']([this['getComponentsToWrite'](),this['getComponentsToDelete']()]);return _0x2200b5[_0x1e6e82(0x1fc)]=this['commitData']['message'],_0x2200b5[_0x1e6e82(0x1bc)]=this['commitData'][_0x1e6e82(0x1bc)],_0x2200b5[_0x1e6e82(0x1b9)]={'writed':_0x268cc7,'deleted':_0x5298f2},_0x2200b5[_0x1e6e82(0x19f)]=this['config'][_0x1e6e82(0x1fe)],_0x2200b5[_0x1e6e82(0x1a9)]=this[_0x1e6e82(0x1ca)],_0x2200b5[_0x1e6e82(0x1e4)]=this[_0x1e6e82(0x1e4)],_0x2200b5[_0x1e6e82(0x201)]=this[_0x1e6e82(0x206)][_0x1e6e82(0x1ab)],_0x2200b5;}async[a105_0x8b185e(0x1a0)](_0x49bef4=![]){const _0x3d39c2=a105_0x8b185e;if(_0x49bef4)await this[_0x3d39c2(0x1e1)][_0x3d39c2(0x1be)](this[_0x3d39c2(0x1fb)],{});else{const _0x5f0787=await this[_0x3d39c2(0x1ca)][_0x3d39c2(0x1df)]['getOne'](this[_0x3d39c2(0x1e4)][_0x3d39c2(0x1b0)]);this[_0x3d39c2(0x1f7)]['log'](this[_0x3d39c2(0x1c5)]+'\x20Update\x20remote\x20state.');const _0x59e080={[this[_0x3d39c2(0x1ca)]['gitUrl']]:{'lastCommit':_0x5f0787[_0x3d39c2(0x1a5)]}};await this['salesforceSync'][_0x3d39c2(0x1be)](this[_0x3d39c2(0x1fb)],_0x59e080);}}async[a105_0x8b185e(0x1d3)](){const _0x25f2a3=a105_0x8b185e,_0x3c1af3=await this['getCommitDto']();await this[_0x25f2a3(0x1e1)][_0x25f2a3(0x1cb)](this[_0x25f2a3(0x1fb)],_0x25f2a3(0x1eb)),await this[_0x25f2a3(0x1ff)][_0x25f2a3(0x1c3)](_0x3c1af3,this['prefix']),await this[_0x25f2a3(0x1a0)](),await this[_0x25f2a3(0x1e1)]['setStatus'](this['repositoryData'],_0x25f2a3(0x1a3));}async[a105_0x8b185e(0x1d2)](_0x37538a){const _0x5888f1=a105_0x8b185e;try{this[_0x5888f1(0x1f7)][_0x5888f1(0x1d4)](''+_0x37538a),await this['sfLogger']['send'](),await this['updateLastCommit'](!![]),await this['salesforceSync']['setStatus'](this[_0x5888f1(0x1fb)],_0x5888f1(0x1d6));}catch(_0x49a461){this[_0x5888f1(0x1ec)]['error'](_0x49a461);}}async[a105_0x8b185e(0x1c3)](_0x3a1473){const _0x58dd29=a105_0x8b185e;try{this['commitData']=_0x3a1473,this['gitApiService']=typedi_1[_0x58dd29(0x1c2)][_0x58dd29(0x1ee)](providers_tokens_1[_0x58dd29(0x1f2)]['gitApiService']),this[_0x58dd29(0x1d9)]=typedi_1[_0x58dd29(0x1c2)][_0x58dd29(0x1ee)](providers_tokens_1[_0x58dd29(0x1f2)][_0x58dd29(0x1aa)]),this[_0x58dd29(0x206)]=typedi_1[_0x58dd29(0x1c2)][_0x58dd29(0x1ee)](providers_tokens_1['Tokens'][_0x58dd29(0x206)]),await this['fetchRepositoryData'](),this[_0x58dd29(0x1ca)]=await this[_0x58dd29(0x1d9)]['getOne'](this[_0x58dd29(0x1fb)][_0x58dd29(0x1c6)]),this[_0x58dd29(0x1e4)]=await this[_0x58dd29(0x1ca)][_0x58dd29(0x1df)]['getOne'](this[_0x58dd29(0x1fb)][_0x58dd29(0x1e3)]),this[_0x58dd29(0x1f7)]=typedi_1['Container'][_0x58dd29(0x1ee)](providers_tokens_1[_0x58dd29(0x1f2)][_0x58dd29(0x1ec)]),this[_0x58dd29(0x1c5)]=_0x58dd29(0x1ea)+this[_0x58dd29(0x206)]['gitProvider'][_0x58dd29(0x1b4)]()+_0x58dd29(0x1ac)+this[_0x58dd29(0x1fb)][_0x58dd29(0x1c6)]+']\x20[Branch:\x20'+this['repositoryData'][_0x58dd29(0x1e3)]+']\x20['+FlosumCommitJob_1[_0x58dd29(0x1b0)]+']';if(!this[_0x58dd29(0x1fb)])throw new bad_request_error_1[(_0x58dd29(0x1c8))](errors_1[_0x58dd29(0x1b3)]);await this[_0x58dd29(0x1f7)][_0x58dd29(0x1e9)](this[_0x58dd29(0x1c5)]+_0x58dd29(0x1bb))[_0x58dd29(0x1ad)](),await this['exec']()[_0x58dd29(0x1da)](_0x53dd88=>this[_0x58dd29(0x1d2)](_0x53dd88));}catch(_0x531992){this['commitData']=undefined,this[_0x58dd29(0x1ec)][_0x58dd29(0x1d4)](_0x531992);throw _0x531992;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([(0x0,typedi_1[a105_0x8b185e(0x1e6)])({'transient':!![]}),__metadata(a105_0x8b185e(0x19c),[salesforce_service_1[a105_0x8b185e(0x1db)],commit_components_job_1['CommitComponentsJob'],salesforce_sync_service_1[a105_0x8b185e(0x1dd)]])],FlosumCommitJob),exports[a105_0x8b185e(0x19b)]=FlosumCommitJob;