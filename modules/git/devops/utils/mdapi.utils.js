const a122_0x1b7a2e=a122_0x3497;(function(_0x47b284,_0x24244e){const _0x35c31b=a122_0x3497,_0x29285b=_0x47b284();while(!![]){try{const _0x1bde7a=parseInt(_0x35c31b(0xdd))/0x1+-parseInt(_0x35c31b(0xf6))/0x2*(parseInt(_0x35c31b(0xe7))/0x3)+parseInt(_0x35c31b(0xd6))/0x4+parseInt(_0x35c31b(0xfc))/0x5+parseInt(_0x35c31b(0xcb))/0x6+parseInt(_0x35c31b(0xe8))/0x7+-parseInt(_0x35c31b(0xe4))/0x8;if(_0x1bde7a===_0x24244e)break;else _0x29285b['push'](_0x29285b['shift']());}catch(_0x9e625d){_0x29285b['push'](_0x29285b['shift']());}}}(a122_0x3d9e,0xdd693));const a122_0x468c48=(function(){let _0x58bc5f=!![];return function(_0x3bb394,_0x69f81e){const _0x15e526=_0x58bc5f?function(){const _0x1831e1=a122_0x3497;if(_0x69f81e){const _0x2a6988=_0x69f81e[_0x1831e1(0xd2)](_0x3bb394,arguments);return _0x69f81e=null,_0x2a6988;}}:function(){};return _0x58bc5f=![],_0x15e526;};}()),a122_0x3a1afd=a122_0x468c48(this,function(){const _0x35aeef=a122_0x3497;return a122_0x3a1afd[_0x35aeef(0xff)]()[_0x35aeef(0xd5)](_0x35aeef(0xfd))['toString']()[_0x35aeef(0xed)](a122_0x3a1afd)['search']('(((.+)+)+)+$');});a122_0x3a1afd();'use strict';var __createBinding=this&&this[a122_0x1b7a2e(0xdf)]||(Object[a122_0x1b7a2e(0xd9)]?function(_0x2329fd,_0x59aaea,_0x5a7921,_0x473b86){const _0x4ae70d=a122_0x1b7a2e;if(_0x473b86===undefined)_0x473b86=_0x5a7921;var _0xc6bcf5=Object[_0x4ae70d(0xde)](_0x59aaea,_0x5a7921);(!_0xc6bcf5||('get'in _0xc6bcf5?!_0x59aaea['__esModule']:_0xc6bcf5['writable']||_0xc6bcf5['configurable']))&&(_0xc6bcf5={'enumerable':!![],'get':function(){return _0x59aaea[_0x5a7921];}}),Object['defineProperty'](_0x2329fd,_0x473b86,_0xc6bcf5);}:function(_0x532832,_0x11c0f4,_0x1428fe,_0x33fd2f){if(_0x33fd2f===undefined)_0x33fd2f=_0x1428fe;_0x532832[_0x33fd2f]=_0x11c0f4[_0x1428fe];}),__setModuleDefault=this&&this[a122_0x1b7a2e(0xcc)]||(Object[a122_0x1b7a2e(0xd9)]?function(_0x208201,_0x32d9ed){const _0x41aad8=a122_0x1b7a2e;Object[_0x41aad8(0xc8)](_0x208201,_0x41aad8(0xec),{'enumerable':!![],'value':_0x32d9ed});}:function(_0x3f7077,_0x411758){const _0x1bbd9f=a122_0x1b7a2e;_0x3f7077[_0x1bbd9f(0xec)]=_0x411758;}),__importStar=this&&this['__importStar']||function(_0x4d2c4d){const _0x53f55a=a122_0x1b7a2e;if(_0x4d2c4d&&_0x4d2c4d[_0x53f55a(0xf7)])return _0x4d2c4d;var _0x33cb70={};if(_0x4d2c4d!=null){for(var _0x450f36 in _0x4d2c4d)if(_0x450f36!==_0x53f55a(0xec)&&Object[_0x53f55a(0xeb)][_0x53f55a(0xc0)][_0x53f55a(0xd7)](_0x4d2c4d,_0x450f36))__createBinding(_0x33cb70,_0x4d2c4d,_0x450f36);}return __setModuleDefault(_0x33cb70,_0x4d2c4d),_0x33cb70;},__importDefault=this&&this['__importDefault']||function(_0x25196c){const _0x42e469=a122_0x1b7a2e;return _0x25196c&&_0x25196c[_0x42e469(0xf7)]?_0x25196c:{'default':_0x25196c};};function a122_0x3497(_0x30ad46,_0x2f84c6){const _0x2a8bd8=a122_0x3d9e();return a122_0x3497=function(_0x3a1afd,_0x468c48){_0x3a1afd=_0x3a1afd-0xbe;let _0x3d9e78=_0x2a8bd8[_0x3a1afd];return _0x3d9e78;},a122_0x3497(_0x30ad46,_0x2f84c6);}Object['defineProperty'](exports,a122_0x1b7a2e(0xf7),{'value':!![]}),exports[a122_0x1b7a2e(0xdc)]=void 0x0;function a122_0x3d9e(){const _0x43b083=['join','removeDir','defineProperty','../../internal/shell.internal','exists','2425704LjHtbo','__setModuleDefault','isEmptyDir','cwd','mdapi-utils','cp\x20-r\x20','/force-app','apply','../../internal/fs.internal','SFDXUtils','search','3999964qexCjj','call','removeComponents','create','exec','../../../../core','MDApiUtils','1775645hqFKim','getOwnPropertyDescriptor','__createBinding','shortid','start','SFDX','[copyMdapiTo]\x20Source\x20forlder\x20not\x20found\x20-\x20','28881792gxhCbj','mdapi','writeFlosumComponents','1293mAfsuy','2490985BRQsDN','./sfdx.utils','../../salesforce/utils/sfdx.utils','prototype','default','constructor','fullDirName','Logger','detected\x20sfdx\x20project\x20convert\x20to\x20mdapi','removeFile','.temp','skipChildErrors','isSFDXProject','uniqueId','1966qkklBp','__esModule','/.git','/*\x20','copy\x20mdapi\x20to\x20temp\x20dir','prepareMdapi','7025105anBMyA','(((.+)+)+)+$','dir','toString','makeDir','log','createEmptyProject','/force-app\x20','hasOwnProperty','../../parsers/mdapi','sfdx','MDApiWriter','Shell','copyVlocityComponents'];a122_0x3d9e=function(){return _0x43b083;};return a122_0x3d9e();}const path_1=__importStar(require('path')),core_1=require(a122_0x1b7a2e(0xdb)),fs_internal_1=require(a122_0x1b7a2e(0xd3)),shell_internal_1=require(a122_0x1b7a2e(0xc9)),mdapi_1=require(a122_0x1b7a2e(0xc1)),mdapi_2=require('../../parsers/mdapi'),sfdx_utils_1=require(a122_0x1b7a2e(0xea)),shortid_1=__importDefault(require(a122_0x1b7a2e(0xe0))),sfdx_utils_2=require(a122_0x1b7a2e(0xe9)),constants_1=require('../../../../constants'),logger=new core_1[(a122_0x1b7a2e(0xef))](a122_0x1b7a2e(0xcf));class MDApiUtils{constructor(){const _0x3c93f4=a122_0x1b7a2e;this[_0x3c93f4(0xf5)]=(0x0,shortid_1[_0x3c93f4(0xec)])();}get[a122_0x1b7a2e(0xee)](){return''+this['uniqueId'];}get[a122_0x1b7a2e(0xfe)](){const _0x4054b9=a122_0x1b7a2e;return path_1[_0x4054b9(0xec)][_0x4054b9(0xc6)](process[_0x4054b9(0xce)](),_0x4054b9(0xf2),_0x4054b9(0xe5),this[_0x4054b9(0xee)]);}async[a122_0x1b7a2e(0xfb)](_0x4932f3){const _0x2a3a0b=a122_0x1b7a2e;if(await sfdx_utils_1['SFDX'][_0x2a3a0b(0xf4)](_0x4932f3)){const _0x2a34a8=(0x0,path_1[_0x2a3a0b(0xc6)])(_0x4932f3,'..','..',_0x2a3a0b(0xc2));try{logger[_0x2a3a0b(0x101)](_0x2a3a0b(0xf0)),await fs_internal_1['FS'][_0x2a3a0b(0x100)]((0x0,path_1[_0x2a3a0b(0xc6)])(_0x2a34a8,this[_0x2a3a0b(0xee)])),await sfdx_utils_1['SFDX'][_0x2a3a0b(0xbe)](_0x2a34a8,this[_0x2a3a0b(0xee)]);await fs_internal_1['FS']['exists'](_0x4932f3+_0x2a3a0b(0xd1))&&await shell_internal_1[_0x2a3a0b(0xc4)][_0x2a3a0b(0xda)](_0x2a3a0b(0xd0)+_0x4932f3+_0x2a3a0b(0xbf)+(0x0,path_1['join'])(_0x2a34a8,this['fullDirName']));await sfdx_utils_1[_0x2a3a0b(0xe2)]['sourceToMdapi']((0x0,path_1[_0x2a3a0b(0xc6)])(_0x2a34a8,this[_0x2a3a0b(0xee)]),this['dir']);const _0x2fa0bf=new sfdx_utils_2[(_0x2a3a0b(0xd4))]();await _0x2fa0bf[_0x2a3a0b(0xc5)]((0x0,path_1[_0x2a3a0b(0xc6)])(_0x2a34a8,this['fullDirName'],constants_1['FORCE_APP_DEFAULT_DIR']),this[_0x2a3a0b(0xfe)]),await fs_internal_1['FS']['removeDir']((0x0,path_1[_0x2a3a0b(0xc6)])(_0x2a34a8,this[_0x2a3a0b(0xee)]));}catch(_0x1a8f47){await fs_internal_1['FS'][_0x2a3a0b(0xc7)]((0x0,path_1['join'])(_0x2a34a8,this[_0x2a3a0b(0xee)]));throw _0x1a8f47;}}else{logger[_0x2a3a0b(0x101)](_0x2a3a0b(0xfa)),await fs_internal_1['FS'][_0x2a3a0b(0x100)](this[_0x2a3a0b(0xfe)]);try{await shell_internal_1[_0x2a3a0b(0xc4)]['exec'](_0x2a3a0b(0xd0)+_0x4932f3+'/*\x20'+this[_0x2a3a0b(0xfe)]),await fs_internal_1['FS'][_0x2a3a0b(0xc7)](this[_0x2a3a0b(0xfe)]+_0x2a3a0b(0xf8));}catch(_0xf4f5db){}}}async['copyMdapiTo'](_0x5664ce){const _0x3f11b1=a122_0x1b7a2e;if(!await fs_internal_1['FS'][_0x3f11b1(0xca)](_0x5664ce))throw new Error(_0x3f11b1(0xe3)+_0x5664ce);!await fs_internal_1['FS'][_0x3f11b1(0xcd)](''+this['dir'])&&(await fs_internal_1['FS'][_0x3f11b1(0xf1)](this[_0x3f11b1(0xfe)]+'/package.xml'),await shell_internal_1[_0x3f11b1(0xc4)][_0x3f11b1(0xda)](_0x3f11b1(0xd0)+this['dir']+_0x3f11b1(0xf9)+_0x5664ce));}async['removeDir'](){const _0x263d08=a122_0x1b7a2e;await fs_internal_1['FS'][_0x263d08(0xc7)](this[_0x263d08(0xfe)]);}async[a122_0x1b7a2e(0xe6)](_0x18435e,_0x4463f9){const _0x49945e=a122_0x1b7a2e,_0xaa7723=new mdapi_1[(_0x49945e(0xc3))]({'components':_0x18435e,'sourceDir':this[_0x49945e(0xfe)],'skipChildErrors':_0x4463f9===null||_0x4463f9===void 0x0?void 0x0:_0x4463f9[_0x49945e(0xf3)]});await _0xaa7723[_0x49945e(0xe1)]();}async[a122_0x1b7a2e(0xd8)](_0x51a3d3){const _0x548982=a122_0x1b7a2e,_0x3d14fe=new mdapi_2['MDApiRemover'](_0x51a3d3,this['dir']);await _0x3d14fe[_0x548982(0xe1)]();}}exports[a122_0x1b7a2e(0xdc)]=MDApiUtils;