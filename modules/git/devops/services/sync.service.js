function a112_0x377d(_0x38c88b,_0x733dfb){const _0x1d85d0=a112_0x21e8();return a112_0x377d=function(_0x85b2bc,_0x4749c3){_0x85b2bc=_0x85b2bc-0x1dc;let _0x21e899=_0x1d85d0[_0x85b2bc];return _0x21e899;},a112_0x377d(_0x38c88b,_0x733dfb);}const a112_0x4a70b5=a112_0x377d;(function(_0x429729,_0x2bd530){const _0x19b112=a112_0x377d,_0x10a475=_0x429729();while(!![]){try{const _0x337e48=parseInt(_0x19b112(0x1f3))/0x1*(-parseInt(_0x19b112(0x212))/0x2)+parseInt(_0x19b112(0x21f))/0x3+-parseInt(_0x19b112(0x228))/0x4+parseInt(_0x19b112(0x211))/0x5+parseInt(_0x19b112(0x20f))/0x6+-parseInt(_0x19b112(0x1fd))/0x7*(-parseInt(_0x19b112(0x20b))/0x8)+parseInt(_0x19b112(0x1dd))/0x9*(parseInt(_0x19b112(0x254))/0xa);if(_0x337e48===_0x2bd530)break;else _0x10a475['push'](_0x10a475['shift']());}catch(_0x462842){_0x10a475['push'](_0x10a475['shift']());}}}(a112_0x21e8,0xc3d85));const a112_0x4749c3=(function(){let _0x298eaf=!![];return function(_0x5006e2,_0x1619ca){const _0x1ae8e1=_0x298eaf?function(){const _0x22aa3e=a112_0x377d;if(_0x1619ca){const _0x54a67a=_0x1619ca[_0x22aa3e(0x1df)](_0x5006e2,arguments);return _0x1619ca=null,_0x54a67a;}}:function(){};return _0x298eaf=![],_0x1ae8e1;};}()),a112_0x85b2bc=a112_0x4749c3(this,function(){const _0x1460a0=a112_0x377d;return a112_0x85b2bc[_0x1460a0(0x24c)]()[_0x1460a0(0x203)](_0x1460a0(0x253))[_0x1460a0(0x24c)]()[_0x1460a0(0x1e1)](a112_0x85b2bc)['search'](_0x1460a0(0x253));});a112_0x85b2bc();'use strict';var __decorate=this&&this[a112_0x4a70b5(0x1e2)]||function(_0x4b835e,_0x39fd15,_0x24521c,_0x21df87){const _0x382b04=a112_0x4a70b5;var _0x264680=arguments[_0x382b04(0x1f5)],_0x3b18d5=_0x264680<0x3?_0x39fd15:_0x21df87===null?_0x21df87=Object[_0x382b04(0x1f6)](_0x39fd15,_0x24521c):_0x21df87,_0x2e4579;if(typeof Reflect===_0x382b04(0x23e)&&typeof Reflect[_0x382b04(0x1ed)]==='function')_0x3b18d5=Reflect[_0x382b04(0x1ed)](_0x4b835e,_0x39fd15,_0x24521c,_0x21df87);else{for(var _0x3820dc=_0x4b835e['length']-0x1;_0x3820dc>=0x0;_0x3820dc--)if(_0x2e4579=_0x4b835e[_0x3820dc])_0x3b18d5=(_0x264680<0x3?_0x2e4579(_0x3b18d5):_0x264680>0x3?_0x2e4579(_0x39fd15,_0x24521c,_0x3b18d5):_0x2e4579(_0x39fd15,_0x24521c))||_0x3b18d5;}return _0x264680>0x3&&_0x3b18d5&&Object[_0x382b04(0x217)](_0x39fd15,_0x24521c,_0x3b18d5),_0x3b18d5;},__metadata=this&&this[a112_0x4a70b5(0x248)]||function(_0x3cae55,_0x3e5a02){const _0x7a59e9=a112_0x4a70b5;if(typeof Reflect==='object'&&typeof Reflect[_0x7a59e9(0x221)]===_0x7a59e9(0x1ef))return Reflect[_0x7a59e9(0x221)](_0x3cae55,_0x3e5a02);},SyncService_1;Object[a112_0x4a70b5(0x217)](exports,a112_0x4a70b5(0x259),{'value':!![]}),exports['SyncService']=void 0x0;const constants_1=require(a112_0x4a70b5(0x230)),core_1=require('../../../../core'),too_many_requests_error_1=require(a112_0x4a70b5(0x22c)),flosum_repository_sync_dto_1=require(a112_0x4a70b5(0x204)),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),salesforce_sync_service_1=require(a112_0x4a70b5(0x22a)),salesforce_service_1=require(a112_0x4a70b5(0x235)),utils_1=require('../../../shared/utils'),typedi_1=require('typedi'),hooks_utils_1=require(a112_0x4a70b5(0x218)),git_branch_not_found_error_1=require(a112_0x4a70b5(0x20c)),flosum_sync_job_1=require(a112_0x4a70b5(0x1fa)),git_sync_job_1=require(a112_0x4a70b5(0x201)),providers_tokens_1=require('../../providers/providers.tokens'),bad_request_error_1=require(a112_0x4a70b5(0x206));let SyncService=SyncService_1=class SyncService{constructor(_0x38cefe,_0x4886e2){const _0x1f467f=a112_0x4a70b5;this['salesforceService']=_0x38cefe,this[_0x1f467f(0x209)]=_0x4886e2,this['logger']=new core_1[(_0x1f467f(0x255))](SyncService_1['name']),this[_0x1f467f(0x257)]={},this['repoList']=[];}async['handleRecordSyncError'](_0x38ca21,_0x487267){const _0xb7c013=a112_0x4a70b5;if(_0x487267 instanceof git_branch_not_found_error_1[_0xb7c013(0x250)]){await this['salesforceSync']['setStatus'](_0x38ca21,'Not\x20Synchronized');return;}if(_0x487267 instanceof too_many_requests_error_1[_0xb7c013(0x24e)]){await this['salesforceSync'][_0xb7c013(0x246)](_0x38ca21,'Waiting');throw _0x487267;}try{await this['sfLogger'][_0xb7c013(0x1f0)](this['prefix']+_0xb7c013(0x227)+_0x38ca21[_0xb7c013(0x205)]+_0xb7c013(0x1eb)+_0x38ca21['branchName']+_0xb7c013(0x23b)+_0x487267+'.')[_0xb7c013(0x236)](),await this[_0xb7c013(0x209)][_0xb7c013(0x229)](_0x38ca21,{}),await this[_0xb7c013(0x209)]['setStatus'](_0x38ca21,_0xb7c013(0x1e6));}catch(_0x1536b9){if(_0x1536b9 instanceof salesforce_error_1[_0xb7c013(0x224)])throw _0x1536b9;}}async[a112_0x4a70b5(0x25a)](_0x259e78){const _0x241bc8=a112_0x4a70b5;if(_0x259e78[_0x241bc8(0x249)]){const _0x591a65=_0x259e78[_0x241bc8(0x205)][_0x241bc8(0x21e)](),_0x5c6175=this[_0x241bc8(0x257)][_0x591a65];if(!_0x5c6175)this['repositoriesIntersections'][_0x591a65]=_0x259e78[_0x241bc8(0x205)];else{if(_0x5c6175&&_0x5c6175!==_0x259e78['repositoryName'])return await this[_0x241bc8(0x22d)](_0x259e78,new Error(_0x241bc8(0x251)+_0x259e78[_0x241bc8(0x205)]+'\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27'+_0x591a65+'\x27\x20-\x20\x27'+_0x5c6175+'\x27')),!![];}}return![];}async[a112_0x4a70b5(0x1e8)](_0x59c0ca){const _0x43b186=a112_0x4a70b5;if(!constants_1[_0x43b186(0x1fe)]['test'](_0x59c0ca[_0x43b186(0x205)]))return await this[_0x43b186(0x22d)](_0x59c0ca,new Error(_0x43b186(0x251)+_0x59c0ca[_0x43b186(0x205)]+_0x43b186(0x219))),![];if(!constants_1[_0x43b186(0x1f7)][_0x43b186(0x20e)](_0x59c0ca['branchName']))return await this['handleRecordSyncError'](_0x59c0ca,new Error(_0x43b186(0x220)+_0x59c0ca[_0x43b186(0x237)]+'\x27\x20in\x20repository\x20\x27'+_0x59c0ca[_0x43b186(0x205)]+_0x43b186(0x22e))),![];return!![];}async[a112_0x4a70b5(0x210)](_0x5988c2,_0x32587f){const _0x14aea7=a112_0x4a70b5;let _0x59ec38=this[_0x14aea7(0x1f9)][_0x14aea7(0x245)](_0x138582=>_0x5988c2[_0x14aea7(0x205)]===_0x138582['name']);!_0x59ec38&&(this[_0x14aea7(0x1fb)][_0x14aea7(0x243)](this[_0x14aea7(0x223)]+_0x14aea7(0x23d)+_0x5988c2[_0x14aea7(0x205)]+_0x14aea7(0x1dc)),_0x59ec38=await this[_0x14aea7(0x200)]['create']({'name':_0x5988c2[_0x14aea7(0x205)],'autoInit':!![],'defaultBranch':_0x5988c2[_0x14aea7(0x237)],'private':!![],'createHook':typedi_1[_0x14aea7(0x1e3)][_0x14aea7(0x20a)](providers_tokens_1[_0x14aea7(0x1e0)]['config'])['isBidirectionalSynchronization']}));if(this[_0x14aea7(0x1e5)]['isBidirectionalSynchronization']){const _0x532325=await _0x59ec38[_0x14aea7(0x258)][_0x14aea7(0x213)]();!_0x532325[_0x14aea7(0x245)](_0xc94c6d=>_0xc94c6d[_0x14aea7(0x1ee)]===hooks_utils_1[_0x14aea7(0x22b)][_0x14aea7(0x1de)](this[_0x14aea7(0x1e5)][_0x14aea7(0x216)],this[_0x14aea7(0x1e5)]['applicationUrl'],_0x32587f))&&(this[_0x14aea7(0x1fb)][_0x14aea7(0x243)](this[_0x14aea7(0x223)]+_0x14aea7(0x23d)+_0x5988c2[_0x14aea7(0x205)]+_0x14aea7(0x239)),await _0x59ec38[_0x14aea7(0x258)][_0x14aea7(0x241)](hooks_utils_1[_0x14aea7(0x22b)][_0x14aea7(0x232)](this[_0x14aea7(0x1e5)][_0x14aea7(0x216)],_0x59ec38[_0x14aea7(0x258)],this['config'][_0x14aea7(0x21a)],_0x32587f)));}return this[_0x14aea7(0x1f9)]['push'](_0x59ec38),_0x59ec38;}async[a112_0x4a70b5(0x23a)](){const _0x169769=a112_0x4a70b5;this[_0x169769(0x215)]=typedi_1['Container'][_0x169769(0x20a)](providers_tokens_1[_0x169769(0x1e0)][_0x169769(0x215)]),this[_0x169769(0x200)]=typedi_1[_0x169769(0x1e3)][_0x169769(0x20a)](providers_tokens_1[_0x169769(0x1e0)][_0x169769(0x202)]),this[_0x169769(0x1e5)]=typedi_1['Container'][_0x169769(0x20a)](providers_tokens_1[_0x169769(0x1e0)][_0x169769(0x1e5)]),this['sfLogger']=typedi_1[_0x169769(0x1e3)][_0x169769(0x20a)](providers_tokens_1[_0x169769(0x1e0)][_0x169769(0x1ea)]),this[_0x169769(0x223)]='['+SyncService_1[_0x169769(0x24d)]+_0x169769(0x24b)+this[_0x169769(0x1e5)][_0x169769(0x216)][_0x169769(0x233)]()+']',this[_0x169769(0x1ec)]['setLoggerId'](this[_0x169769(0x1fb)]['getLoggerId']());try{this[_0x169769(0x1fb)][_0x169769(0x243)](this[_0x169769(0x223)]+'\x20Start\x20sync\x20job.'),await this[_0x169769(0x1fb)][_0x169769(0x243)](this['prefix']+_0x169769(0x231))[_0x169769(0x236)]();const _0x3e78e7=await this[_0x169769(0x209)][_0x169769(0x207)](typedi_1[_0x169769(0x1e3)][_0x169769(0x20a)](providers_tokens_1[_0x169769(0x1e0)]['connectionId']));if(!_0x3e78e7[_0x169769(0x1f5)])throw new bad_request_error_1['BadRequestError'](this[_0x169769(0x223)]+_0x169769(0x226));await this['sfLogger'][_0x169769(0x243)](this[_0x169769(0x223)]+'\x20Getting\x20branch\x20records.')['send']();const _0x63ec9d=await this[_0x169769(0x209)][_0x169769(0x214)](_0x3e78e7[_0x169769(0x22f)](_0x4b465a=>'\x27'+_0x4b465a[_0x169769(0x249)]+'\x27')[_0x169769(0x21d)](','));await this[_0x169769(0x1fb)][_0x169769(0x243)](this[_0x169769(0x223)]+_0x169769(0x1fc))[_0x169769(0x236)](),this[_0x169769(0x1f9)]=await this[_0x169769(0x200)][_0x169769(0x213)]();const _0x54ac61=[..._0x3e78e7,..._0x63ec9d];this[_0x169769(0x1fb)][_0x169769(0x243)](this[_0x169769(0x223)]+_0x169769(0x256)+_0x54ac61[_0x169769(0x1f5)]+_0x169769(0x1f4));for(const _0xb1f292 of _0x54ac61){this[_0x169769(0x1ea)][_0x169769(0x243)](_0x169769(0x20d)+_0xb1f292[_0x169769(0x205)]+'['+_0xb1f292[_0x169769(0x249)]+_0x169769(0x222)+_0xb1f292[_0x169769(0x237)]+'['+_0xb1f292[_0x169769(0x1e7)]+_0x169769(0x208)),this[_0x169769(0x1fb)][_0x169769(0x243)](this[_0x169769(0x223)]+_0x169769(0x1e9)+_0xb1f292[_0x169769(0x205)]+_0x169769(0x23c)+_0xb1f292['branchName']+'\x22.'),this[_0x169769(0x1fb)][_0x169769(0x243)](this['prefix']+_0x169769(0x23f));const _0x3099fd=await this[_0x169769(0x1e8)](_0xb1f292);if(!_0x3099fd)continue;this[_0x169769(0x1fb)][_0x169769(0x243)](this[_0x169769(0x223)]+_0x169769(0x1e4));const _0x29e96b=await this['isIntersects'](_0xb1f292);if(_0x29e96b)continue;await this[_0x169769(0x1fb)][_0x169769(0x236)]();let _0x9144b5;try{await this[_0x169769(0x1fb)]['log'](this[_0x169769(0x223)]+_0x169769(0x1ff))[_0x169769(0x236)](),_0x9144b5=await this[_0x169769(0x210)](_0xb1f292,typedi_1['Container'][_0x169769(0x20a)](providers_tokens_1[_0x169769(0x1e0)]['connectionId']));}catch(_0x38abdc){await this[_0x169769(0x22d)](_0xb1f292,_0x38abdc instanceof too_many_requests_error_1[_0x169769(0x24e)]?_0x38abdc:new Error('[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20'+_0x38abdc));continue;}await this['sfLogger'][_0x169769(0x243)](this[_0x169769(0x223)]+'\x20Completed\x20prepare\x20to\x20syncing.')[_0x169769(0x236)]();if(_0xb1f292[_0x169769(0x247)]===flosum_repository_sync_dto_1[_0x169769(0x24f)][_0x169769(0x21b)]){const _0xf47778=typedi_1[_0x169769(0x1e3)][_0x169769(0x20a)](flosum_sync_job_1[_0x169769(0x24a)]);await _0xf47778['run']({'repository':_0x9144b5,'convertToSFDX':this[_0x169769(0x1e5)][_0x169769(0x242)],'syncRecord':_0xb1f292,'provider':this[_0x169769(0x1e5)][_0x169769(0x216)]})[_0x169769(0x1f8)](_0x1855bc=>this[_0x169769(0x22d)](_0xb1f292,_0x1855bc));}else{const _0x424666=typedi_1[_0x169769(0x1e3)][_0x169769(0x20a)](git_sync_job_1[_0x169769(0x238)]);await _0x424666[_0x169769(0x23a)]({'repository':_0x9144b5,'branch':_0xb1f292['branchName'],'provider':this[_0x169769(0x1e5)][_0x169769(0x216)],'repositoryGit':_0x9144b5['gitUrl'],'syncRecord':_0xb1f292})[_0x169769(0x1f8)](_0x10bb53=>this[_0x169769(0x22d)](_0xb1f292,_0x10bb53));}}}catch(_0x7b5f40){this[_0x169769(0x1ea)][_0x169769(0x1f0)](_0x7b5f40);_0x7b5f40 instanceof too_many_requests_error_1[_0x169769(0x24e)]?(await this[_0x169769(0x1fb)][_0x169769(0x243)](this[_0x169769(0x223)]+_0x169769(0x21c))[_0x169769(0x236)](),await(0x0,utils_1[_0x169769(0x240)])(0x3c*0x3c*0x3e8),this[_0x169769(0x23a)]()):await this[_0x169769(0x1fb)][_0x169769(0x1f0)](this['prefix']+_0x169769(0x234)+_0x7b5f40)[_0x169769(0x236)]();return;}await this[_0x169769(0x1fb)]['log'](this[_0x169769(0x223)]+_0x169769(0x1f1))['send'](),await this[_0x169769(0x209)][_0x169769(0x252)](typedi_1['Container'][_0x169769(0x20a)](providers_tokens_1[_0x169769(0x1e0)]['connectionId']))[_0x169769(0x1f8)](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a112_0x4a70b5(0x225),[salesforce_service_1['SalesforceService'],salesforce_sync_service_1[a112_0x4a70b5(0x244)]])],SyncService),exports[a112_0x4a70b5(0x1f2)]=SyncService;function a112_0x21e8(){const _0x1831ae=['../../../../constants','\x20Getting\x20repository\x20records.','createHookPayload','toUpperCase','\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','../../salesforce/services/salesforce.service','send','branchName','GitSyncJob','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.','run',']\x20due\x20error\x20-\x20','\x22\x20branch:\x20\x22','\x20Repository\x20\x22','object','\x20Checking\x20valid\x20name.','sleep','create','isConvertToSfdx','log','SalesforceSyncService','find','setStatus','direction','__metadata','repositoryId','FlosumSyncJob',']\x20[','toString','name','TooManyRequests','SyncDirection','GitBranchNotFoundError','Unable\x20to\x20synchronize\x20repository\x20\x27','disableSync','(((.+)+)+)+$','5191330YJZzia','Logger','\x20Have\x20to\x20synchronize\x20','repositoriesIntersections','hooks','__esModule','isIntersects','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','18udbzbt','getHookLinkFor','apply','Tokens','constructor','__decorate','Container','\x20Checking\x20intersects.','config','Error','branchId','checkValidNaming','\x20Syncing\x20repository:\x20\x22','logger','\x27\x20[','salesforceService','decorate','url','function','error','\x20Sync\x20job\x20done.','SyncService','577292iBMzMN','\x20branches.','length','getOwnPropertyDescriptor','BRANCH_NAME_REGEXP','catch','repoList','../jobs/flosum-sync.job','sfLogger','\x20Getting\x20repositories\x20from\x20git\x20service.','7dpIIOq','REPOSITORY_NAME_REGEXP','\x20Getting\x20Flosum\x20repository','repoService','../jobs/git-sync.job','gitRepoService','search','../../salesforce/dto/flosum-repository-sync.dto','repositoryName','../../../../core/errors/bad-request.error','getRepositoryRecords',']\x20branch.','salesforceSync','get','1271992YjKkdX','../errors/git-branch-not-found.error','Syncing\x20','test','2563590yIbIOE','getOrCreateRepo','3254465sMwhYs','4TlkYBs','getAll','getBranchRecords','gitApiService','gitProvider','defineProperty','../../providers/web-hooks/hooks.utils','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','applicationUrl','FlosumToGit','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','join','toLowerCase','1842054ktTJCu','Unable\x20to\x20synchronize\x20branch\x20\x27','metadata',']\x20repository\x20','prefix','SalesforceError','design:paramtypes','\x20No\x20repositories\x20to\x20sync.','\x20Stop\x20sync\x20job\x20for\x20\x27','3730704TxEhcx','updateRemoteState','../../salesforce/services/salesforce-sync.service','HooksUtils','../../../../core/errors/too-many-requests.error','handleRecordSyncError','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','map'];a112_0x21e8=function(){return _0x1831ae;};return a112_0x21e8();}