function a110_0x4dab(_0x2a4c32,_0xae5dd1){const _0x2fc2c2=a110_0x54f5();return a110_0x4dab=function(_0x477ade,_0x3f56ef){_0x477ade=_0x477ade-0x14f;let _0x54f53a=_0x2fc2c2[_0x477ade];return _0x54f53a;},a110_0x4dab(_0x2a4c32,_0xae5dd1);}function a110_0x54f5(){const _0x4d980a=['test','checkValidNaming','getBranchRecords','REPOSITORY_NAME_REGEXP','catch','sfLogger','\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','(((.+)+)+)+$','SalesforceService','../../../../core/errors/bad-request.error','14tvOOqw','run','isConvertToSfdx','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','get','setLoggerId','gitProvider','\x20Repository\x20\x22','\x20Completed\x20prepare\x20to\x20syncing.','\x20Getting\x20Flosum\x20repository','../../salesforce/services/salesforce-sync.service','map','BadRequestError','Error','1431920ONuZqh','connectionId','Tokens','\x20No\x20repositories\x20to\x20sync.','repositoryName','Unable\x20to\x20synchronize\x20repository\x20\x27','Container','Syncing\x20','config','../../../../core','find','getRepositoryRecords','length','Unable\x20to\x20synchronize\x20branch\x20\x27','salesforceSync','12288rfxkgM','gitRepoService','constructor','\x20Stop\x20sync\x20job\x20for\x20\x27','\x20Syncing\x20repository:\x20\x22','__metadata','../../../shared/utils','getOrCreateRepo','../../salesforce/errors/salesforce.error','logger','TooManyRequests','direction','Service','../errors/git-branch-not-found.error','search','gitApiService','push','createHookPayload','1685pTndYx','30496609BJJxzd','decorate','name','url','SalesforceSyncService','\x20Getting\x20repositories\x20from\x20git\x20service.','\x27\x20-\x20\x27','send','getLoggerId','applicationUrl','updateRemoteState','branchId','6219gREQcW','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','../jobs/git-sync.job','getAll','125007iblJWq','52kObClV','object','branchName','../../salesforce/dto/flosum-repository-sync.dto','Not\x20Synchronized','defineProperty','../jobs/flosum-sync.job','create','../../../../core/errors/too-many-requests.error','\x20Start\x20sync\x20job.','SyncService','\x20branches.','typedi','SyncDirection','gitUrl','BRANCH_NAME_REGEXP','\x22\x20branch:\x20\x22','repoService','salesforceService','hooks','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.','10232XJvfCA','\x27\x20[','join','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','error','isBidirectionalSynchronization','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','repositoriesIntersections','disableSync','toString','handleRecordSyncError','setStatus','../../providers/web-hooks/hooks.utils','repositoryId','log','repoList','\x20Getting\x20repository\x20records.','\x20Sync\x20job\x20done.',']\x20branch.','prefix','getHookLinkFor','../../../../constants','HooksUtils','1270180tfEbfq','\x20Checking\x20intersects.','__decorate','244011YwhdcK',']\x20due\x20error\x20-\x20'];a110_0x54f5=function(){return _0x4d980a;};return a110_0x54f5();}const a110_0x263780=a110_0x4dab;(function(_0x376c23,_0x35f44e){const _0x2db51d=a110_0x4dab,_0x77aba2=_0x376c23();while(!![]){try{const _0xb22941=parseInt(_0x2db51d(0x197))/0x1*(-parseInt(_0x2db51d(0x157))/0x2)+parseInt(_0x2db51d(0x1c7))/0x3*(-parseInt(_0x2db51d(0x198))/0x4)+-parseInt(_0x2db51d(0x186))/0x5*(-parseInt(_0x2db51d(0x174))/0x6)+-parseInt(_0x2db51d(0x165))/0x7+-parseInt(_0x2db51d(0x1ad))/0x8*(parseInt(_0x2db51d(0x193))/0x9)+parseInt(_0x2db51d(0x1c4))/0xa+parseInt(_0x2db51d(0x187))/0xb;if(_0xb22941===_0x35f44e)break;else _0x77aba2['push'](_0x77aba2['shift']());}catch(_0x349ac9){_0x77aba2['push'](_0x77aba2['shift']());}}}(a110_0x54f5,0x8ae02));const a110_0x3f56ef=(function(){let _0x3903bc=!![];return function(_0x51a86e,_0x3c74dd){const _0x56153d=_0x3903bc?function(){if(_0x3c74dd){const _0xc9dc4e=_0x3c74dd['apply'](_0x51a86e,arguments);return _0x3c74dd=null,_0xc9dc4e;}}:function(){};return _0x3903bc=![],_0x56153d;};}()),a110_0x477ade=a110_0x3f56ef(this,function(){const _0x56d1c8=a110_0x4dab;return a110_0x477ade[_0x56d1c8(0x1b6)]()[_0x56d1c8(0x182)]('(((.+)+)+)+$')[_0x56d1c8(0x1b6)]()[_0x56d1c8(0x176)](a110_0x477ade)['search'](_0x56d1c8(0x154));});a110_0x477ade();'use strict';var __decorate=this&&this[a110_0x263780(0x1c6)]||function(_0x14680e,_0x35d5b0,_0x4acbd4,_0xbae2dc){const _0x388694=a110_0x263780;var _0x481803=arguments[_0x388694(0x171)],_0x377fe3=_0x481803<0x3?_0x35d5b0:_0xbae2dc===null?_0xbae2dc=Object['getOwnPropertyDescriptor'](_0x35d5b0,_0x4acbd4):_0xbae2dc,_0x29b7ea;if(typeof Reflect===_0x388694(0x199)&&typeof Reflect[_0x388694(0x188)]==='function')_0x377fe3=Reflect['decorate'](_0x14680e,_0x35d5b0,_0x4acbd4,_0xbae2dc);else{for(var _0x42e3f2=_0x14680e[_0x388694(0x171)]-0x1;_0x42e3f2>=0x0;_0x42e3f2--)if(_0x29b7ea=_0x14680e[_0x42e3f2])_0x377fe3=(_0x481803<0x3?_0x29b7ea(_0x377fe3):_0x481803>0x3?_0x29b7ea(_0x35d5b0,_0x4acbd4,_0x377fe3):_0x29b7ea(_0x35d5b0,_0x4acbd4))||_0x377fe3;}return _0x481803>0x3&&_0x377fe3&&Object['defineProperty'](_0x35d5b0,_0x4acbd4,_0x377fe3),_0x377fe3;},__metadata=this&&this[a110_0x263780(0x179)]||function(_0x45cdf6,_0x56c8d8){if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x45cdf6,_0x56c8d8);},SyncService_1;Object[a110_0x263780(0x19d)](exports,'__esModule',{'value':!![]}),exports[a110_0x263780(0x1a2)]=void 0x0;const constants_1=require(a110_0x263780(0x1c2)),core_1=require(a110_0x263780(0x16e)),too_many_requests_error_1=require(a110_0x263780(0x1a0)),flosum_repository_sync_dto_1=require(a110_0x263780(0x19b)),salesforce_error_1=require(a110_0x263780(0x17c)),salesforce_sync_service_1=require(a110_0x263780(0x161)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),utils_1=require(a110_0x263780(0x17a)),typedi_1=require(a110_0x263780(0x1a4)),hooks_utils_1=require(a110_0x263780(0x1b9)),git_branch_not_found_error_1=require(a110_0x263780(0x181)),flosum_sync_job_1=require(a110_0x263780(0x19e)),git_sync_job_1=require(a110_0x263780(0x195)),providers_tokens_1=require('../../providers/providers.tokens'),bad_request_error_1=require(a110_0x263780(0x156));let SyncService=SyncService_1=class SyncService{constructor(_0x55ef03,_0x316539){const _0x4f00a6=a110_0x263780;this[_0x4f00a6(0x1aa)]=_0x55ef03,this[_0x4f00a6(0x173)]=_0x316539,this['logger']=new core_1['Logger'](SyncService_1[_0x4f00a6(0x189)]),this['repositoriesIntersections']={},this['repoList']=[];}async['handleRecordSyncError'](_0x5aa9b3,_0x393688){const _0x1fb058=a110_0x263780;if(_0x393688 instanceof git_branch_not_found_error_1['GitBranchNotFoundError']){await this[_0x1fb058(0x173)]['setStatus'](_0x5aa9b3,_0x1fb058(0x19c));return;}if(_0x393688 instanceof too_many_requests_error_1[_0x1fb058(0x17e)]){await this['salesforceSync'][_0x1fb058(0x1b8)](_0x5aa9b3,'Waiting');throw _0x393688;}try{await this['sfLogger'][_0x1fb058(0x1b1)](this[_0x1fb058(0x1c0)]+_0x1fb058(0x177)+_0x5aa9b3['repositoryName']+_0x1fb058(0x1ae)+_0x5aa9b3[_0x1fb058(0x19a)]+_0x1fb058(0x1c8)+_0x393688+'.')['send'](),await this[_0x1fb058(0x173)][_0x1fb058(0x191)](_0x5aa9b3,{}),await this[_0x1fb058(0x173)][_0x1fb058(0x1b8)](_0x5aa9b3,_0x1fb058(0x164));}catch(_0x4502e6){if(_0x4502e6 instanceof salesforce_error_1['SalesforceError'])throw _0x4502e6;}}async['isIntersects'](_0x554651){const _0xa9e801=a110_0x263780;if(_0x554651[_0xa9e801(0x1ba)]){const _0x1b6b9d=_0x554651[_0xa9e801(0x169)]['toLowerCase'](),_0x5b537c=this[_0xa9e801(0x1b4)][_0x1b6b9d];if(!_0x5b537c)this['repositoriesIntersections'][_0x1b6b9d]=_0x554651[_0xa9e801(0x169)];else{if(_0x5b537c&&_0x5b537c!==_0x554651[_0xa9e801(0x169)])return await this[_0xa9e801(0x1b7)](_0x554651,new Error(_0xa9e801(0x16a)+_0x554651[_0xa9e801(0x169)]+_0xa9e801(0x1b3)+_0x1b6b9d+_0xa9e801(0x18d)+_0x5b537c+'\x27')),!![];}}return![];}async[a110_0x263780(0x1ca)](_0x6a3839){const _0x35faa6=a110_0x263780;if(!constants_1[_0x35faa6(0x150)][_0x35faa6(0x1c9)](_0x6a3839['repositoryName']))return await this[_0x35faa6(0x1b7)](_0x6a3839,new Error('Unable\x20to\x20synchronize\x20repository\x20\x27'+_0x6a3839[_0x35faa6(0x169)]+'\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.')),![];if(!constants_1[_0x35faa6(0x1a7)][_0x35faa6(0x1c9)](_0x6a3839[_0x35faa6(0x19a)]))return await this[_0x35faa6(0x1b7)](_0x6a3839,new Error(_0x35faa6(0x172)+_0x6a3839['branchName']+'\x27\x20in\x20repository\x20\x27'+_0x6a3839[_0x35faa6(0x169)]+_0x35faa6(0x194))),![];return!![];}async[a110_0x263780(0x17b)](_0xc57ee9,_0x1706bf){const _0x23e82b=a110_0x263780;let _0x4194b4=this[_0x23e82b(0x1bc)][_0x23e82b(0x16f)](_0x3894bb=>_0xc57ee9[_0x23e82b(0x169)]===_0x3894bb[_0x23e82b(0x189)]);!_0x4194b4&&(this['sfLogger']['log'](this[_0x23e82b(0x1c0)]+_0x23e82b(0x15e)+_0xc57ee9['repositoryName']+_0x23e82b(0x1b0)),_0x4194b4=await this[_0x23e82b(0x1a9)][_0x23e82b(0x19f)]({'name':_0xc57ee9[_0x23e82b(0x169)],'autoInit':!![],'defaultBranch':_0xc57ee9['branchName'],'private':!![],'createHook':typedi_1[_0x23e82b(0x16b)][_0x23e82b(0x15b)](providers_tokens_1['Tokens']['config'])[_0x23e82b(0x1b2)]}));if(this[_0x23e82b(0x16d)]['isBidirectionalSynchronization']){const _0x43932f=await _0x4194b4[_0x23e82b(0x1ab)][_0x23e82b(0x196)]();!_0x43932f[_0x23e82b(0x16f)](_0x2913a8=>_0x2913a8[_0x23e82b(0x18a)]===hooks_utils_1[_0x23e82b(0x1c3)][_0x23e82b(0x1c1)](this[_0x23e82b(0x16d)][_0x23e82b(0x15d)],this[_0x23e82b(0x16d)][_0x23e82b(0x190)],_0x1706bf))&&(this[_0x23e82b(0x152)][_0x23e82b(0x1bb)](this[_0x23e82b(0x1c0)]+_0x23e82b(0x15e)+_0xc57ee9[_0x23e82b(0x169)]+_0x23e82b(0x1ac)),await _0x4194b4[_0x23e82b(0x1ab)][_0x23e82b(0x19f)](hooks_utils_1[_0x23e82b(0x1c3)][_0x23e82b(0x185)](this[_0x23e82b(0x16d)][_0x23e82b(0x15d)],_0x4194b4[_0x23e82b(0x1ab)],this[_0x23e82b(0x16d)][_0x23e82b(0x190)],_0x1706bf)));}return this['repoList'][_0x23e82b(0x184)](_0x4194b4),_0x4194b4;}async[a110_0x263780(0x158)](){const _0x5e2b9a=a110_0x263780;this[_0x5e2b9a(0x183)]=typedi_1[_0x5e2b9a(0x16b)]['get'](providers_tokens_1[_0x5e2b9a(0x167)][_0x5e2b9a(0x183)]),this[_0x5e2b9a(0x1a9)]=typedi_1[_0x5e2b9a(0x16b)][_0x5e2b9a(0x15b)](providers_tokens_1[_0x5e2b9a(0x167)][_0x5e2b9a(0x175)]),this[_0x5e2b9a(0x16d)]=typedi_1[_0x5e2b9a(0x16b)]['get'](providers_tokens_1[_0x5e2b9a(0x167)][_0x5e2b9a(0x16d)]),this[_0x5e2b9a(0x152)]=typedi_1[_0x5e2b9a(0x16b)][_0x5e2b9a(0x15b)](providers_tokens_1['Tokens'][_0x5e2b9a(0x17d)]),this['prefix']='['+SyncService_1['name']+']\x20['+this[_0x5e2b9a(0x16d)][_0x5e2b9a(0x15d)]['toUpperCase']()+']',this[_0x5e2b9a(0x1aa)][_0x5e2b9a(0x15c)](this[_0x5e2b9a(0x152)][_0x5e2b9a(0x18f)]());try{this[_0x5e2b9a(0x152)][_0x5e2b9a(0x1bb)](this[_0x5e2b9a(0x1c0)]+_0x5e2b9a(0x1a1)),await this[_0x5e2b9a(0x152)][_0x5e2b9a(0x1bb)](this['prefix']+_0x5e2b9a(0x1bd))[_0x5e2b9a(0x18e)]();const _0x38e6c9=await this['salesforceSync'][_0x5e2b9a(0x170)](typedi_1['Container'][_0x5e2b9a(0x15b)](providers_tokens_1[_0x5e2b9a(0x167)][_0x5e2b9a(0x166)]));if(!_0x38e6c9['length'])throw new bad_request_error_1[(_0x5e2b9a(0x163))](this[_0x5e2b9a(0x1c0)]+_0x5e2b9a(0x168));await this['sfLogger']['log'](this[_0x5e2b9a(0x1c0)]+'\x20Getting\x20branch\x20records.')[_0x5e2b9a(0x18e)]();const _0x3fb6e2=await this[_0x5e2b9a(0x173)][_0x5e2b9a(0x14f)](_0x38e6c9[_0x5e2b9a(0x162)](_0x4cd897=>'\x27'+_0x4cd897[_0x5e2b9a(0x1ba)]+'\x27')[_0x5e2b9a(0x1af)](','));await this[_0x5e2b9a(0x152)]['log'](this['prefix']+_0x5e2b9a(0x18c))[_0x5e2b9a(0x18e)](),this[_0x5e2b9a(0x1bc)]=await this[_0x5e2b9a(0x1a9)]['getAll']();const _0x3a7845=[..._0x38e6c9,..._0x3fb6e2];this['sfLogger']['log'](this[_0x5e2b9a(0x1c0)]+'\x20Have\x20to\x20synchronize\x20'+_0x3a7845[_0x5e2b9a(0x171)]+_0x5e2b9a(0x1a3));for(const _0x42ab93 of _0x3a7845){this['logger']['log'](_0x5e2b9a(0x16c)+_0x42ab93['repositoryName']+'['+_0x42ab93[_0x5e2b9a(0x1ba)]+']\x20repository\x20'+_0x42ab93[_0x5e2b9a(0x19a)]+'['+_0x42ab93[_0x5e2b9a(0x192)]+_0x5e2b9a(0x1bf)),this['sfLogger'][_0x5e2b9a(0x1bb)](this[_0x5e2b9a(0x1c0)]+_0x5e2b9a(0x178)+_0x42ab93[_0x5e2b9a(0x169)]+_0x5e2b9a(0x1a8)+_0x42ab93[_0x5e2b9a(0x19a)]+'\x22.'),this[_0x5e2b9a(0x152)][_0x5e2b9a(0x1bb)](this[_0x5e2b9a(0x1c0)]+'\x20Checking\x20valid\x20name.');const _0x2163e5=await this[_0x5e2b9a(0x1ca)](_0x42ab93);if(!_0x2163e5)continue;this['sfLogger'][_0x5e2b9a(0x1bb)](this[_0x5e2b9a(0x1c0)]+_0x5e2b9a(0x1c5));const _0x300ba7=await this['isIntersects'](_0x42ab93);if(_0x300ba7)continue;await this[_0x5e2b9a(0x152)][_0x5e2b9a(0x18e)]();let _0x3c56e7;try{await this['sfLogger'][_0x5e2b9a(0x1bb)](this[_0x5e2b9a(0x1c0)]+_0x5e2b9a(0x160))[_0x5e2b9a(0x18e)](),_0x3c56e7=await this[_0x5e2b9a(0x17b)](_0x42ab93,typedi_1[_0x5e2b9a(0x16b)][_0x5e2b9a(0x15b)](providers_tokens_1[_0x5e2b9a(0x167)][_0x5e2b9a(0x166)]));}catch(_0x44aa40){await this[_0x5e2b9a(0x1b7)](_0x42ab93,_0x44aa40 instanceof too_many_requests_error_1[_0x5e2b9a(0x17e)]?_0x44aa40:new Error('[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20'+_0x44aa40));continue;}await this['sfLogger'][_0x5e2b9a(0x1bb)](this['prefix']+_0x5e2b9a(0x15f))[_0x5e2b9a(0x18e)]();if(_0x42ab93[_0x5e2b9a(0x17f)]===flosum_repository_sync_dto_1[_0x5e2b9a(0x1a5)]['FlosumToGit']){const _0x3bff9d=typedi_1[_0x5e2b9a(0x16b)][_0x5e2b9a(0x15b)](flosum_sync_job_1['FlosumSyncJob']);await _0x3bff9d[_0x5e2b9a(0x158)]({'repository':_0x3c56e7,'convertToSFDX':this[_0x5e2b9a(0x16d)][_0x5e2b9a(0x159)],'syncRecord':_0x42ab93,'provider':this[_0x5e2b9a(0x16d)][_0x5e2b9a(0x15d)]})[_0x5e2b9a(0x151)](_0x3a27da=>this[_0x5e2b9a(0x1b7)](_0x42ab93,_0x3a27da));}else{const _0x3bb28d=typedi_1['Container']['get'](git_sync_job_1['GitSyncJob']);await _0x3bb28d[_0x5e2b9a(0x158)]({'repository':_0x3c56e7,'branch':_0x42ab93[_0x5e2b9a(0x19a)],'provider':this[_0x5e2b9a(0x16d)][_0x5e2b9a(0x15d)],'repositoryGit':_0x3c56e7[_0x5e2b9a(0x1a6)],'syncRecord':_0x42ab93})[_0x5e2b9a(0x151)](_0x1e37c9=>this['handleRecordSyncError'](_0x42ab93,_0x1e37c9));}}}catch(_0x5c498c){this['logger'][_0x5e2b9a(0x1b1)](_0x5c498c);_0x5c498c instanceof too_many_requests_error_1[_0x5e2b9a(0x17e)]?(await this[_0x5e2b9a(0x152)][_0x5e2b9a(0x1bb)](this['prefix']+_0x5e2b9a(0x15a))[_0x5e2b9a(0x18e)](),await(0x0,utils_1['sleep'])(0x3c*0x3c*0x3e8),this['run']()):await this[_0x5e2b9a(0x152)][_0x5e2b9a(0x1b1)](this[_0x5e2b9a(0x1c0)]+_0x5e2b9a(0x153)+_0x5c498c)[_0x5e2b9a(0x18e)]();return;}await this[_0x5e2b9a(0x152)]['log'](this[_0x5e2b9a(0x1c0)]+_0x5e2b9a(0x1be))[_0x5e2b9a(0x18e)](),await this[_0x5e2b9a(0x173)][_0x5e2b9a(0x1b5)](typedi_1[_0x5e2b9a(0x16b)][_0x5e2b9a(0x15b)](providers_tokens_1[_0x5e2b9a(0x167)]['connectionId']))[_0x5e2b9a(0x151)](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1[a110_0x263780(0x180)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1[a110_0x263780(0x155)],salesforce_sync_service_1[a110_0x263780(0x18b)]])],SyncService),exports[a110_0x263780(0x1a2)]=SyncService;