function a111_0x2213(_0x38148e,_0x9d29cc){const _0x32ad7f=a111_0x2df5();return a111_0x2213=function(_0xf06235,_0x4fc61b){_0xf06235=_0xf06235-0xe4;let _0x2df54d=_0x32ad7f[_0xf06235];return _0x2df54d;},a111_0x2213(_0x38148e,_0x9d29cc);}const a111_0x429cf6=a111_0x2213;(function(_0x18717d,_0x1d4bd3){const _0x4fdbcc=a111_0x2213,_0x5b3d3d=_0x18717d();while(!![]){try{const _0x477998=-parseInt(_0x4fdbcc(0x121))/0x1*(-parseInt(_0x4fdbcc(0x10f))/0x2)+-parseInt(_0x4fdbcc(0x107))/0x3+parseInt(_0x4fdbcc(0x13d))/0x4+-parseInt(_0x4fdbcc(0xf3))/0x5+parseInt(_0x4fdbcc(0x137))/0x6+parseInt(_0x4fdbcc(0x118))/0x7*(-parseInt(_0x4fdbcc(0x119))/0x8)+parseInt(_0x4fdbcc(0xea))/0x9;if(_0x477998===_0x1d4bd3)break;else _0x5b3d3d['push'](_0x5b3d3d['shift']());}catch(_0x2067f6){_0x5b3d3d['push'](_0x5b3d3d['shift']());}}}(a111_0x2df5,0xe8506));const a111_0x4fc61b=(function(){let _0xa6930=!![];return function(_0x3f3550,_0xd753e){const _0x2a2178=_0xa6930?function(){const _0x4ff6b0=a111_0x2213;if(_0xd753e){const _0x2ab2db=_0xd753e[_0x4ff6b0(0x100)](_0x3f3550,arguments);return _0xd753e=null,_0x2ab2db;}}:function(){};return _0xa6930=![],_0x2a2178;};}()),a111_0xf06235=a111_0x4fc61b(this,function(){const _0x2c82b4=a111_0x2213;return a111_0xf06235['toString']()['search'](_0x2c82b4(0x12d))[_0x2c82b4(0x12f)]()[_0x2c82b4(0x134)](a111_0xf06235)[_0x2c82b4(0xeb)](_0x2c82b4(0x12d));});a111_0xf06235();'use strict';var __decorate=this&&this[a111_0x429cf6(0x114)]||function(_0x4dffe0,_0x9f5daa,_0x326bbf,_0x467e94){const _0x8a2c8d=a111_0x429cf6;var _0x9b3156=arguments[_0x8a2c8d(0xed)],_0x44b883=_0x9b3156<0x3?_0x9f5daa:_0x467e94===null?_0x467e94=Object[_0x8a2c8d(0x155)](_0x9f5daa,_0x326bbf):_0x467e94,_0x13c695;if(typeof Reflect===_0x8a2c8d(0x15b)&&typeof Reflect[_0x8a2c8d(0x132)]===_0x8a2c8d(0x154))_0x44b883=Reflect[_0x8a2c8d(0x132)](_0x4dffe0,_0x9f5daa,_0x326bbf,_0x467e94);else{for(var _0x369753=_0x4dffe0['length']-0x1;_0x369753>=0x0;_0x369753--)if(_0x13c695=_0x4dffe0[_0x369753])_0x44b883=(_0x9b3156<0x3?_0x13c695(_0x44b883):_0x9b3156>0x3?_0x13c695(_0x9f5daa,_0x326bbf,_0x44b883):_0x13c695(_0x9f5daa,_0x326bbf))||_0x44b883;}return _0x9b3156>0x3&&_0x44b883&&Object[_0x8a2c8d(0xec)](_0x9f5daa,_0x326bbf,_0x44b883),_0x44b883;},__metadata=this&&this['__metadata']||function(_0x473d4b,_0x50858e){const _0x31b862=a111_0x429cf6;if(typeof Reflect===_0x31b862(0x15b)&&typeof Reflect[_0x31b862(0x11b)]===_0x31b862(0x154))return Reflect[_0x31b862(0x11b)](_0x473d4b,_0x50858e);},SyncService_1;Object[a111_0x429cf6(0xec)](exports,a111_0x429cf6(0x108),{'value':!![]}),exports[a111_0x429cf6(0x143)]=void 0x0;function a111_0x2df5(){const _0x5be977=['length',']\x20repository\x20','../../../../core/errors/too-many-requests.error','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','gitApiService','direction','9420725yrCXkd','repoService','handleRecordSyncError','Service','hooks','GitSyncJob','createHookPayload','salesforceService','SalesforceService','branchId','Syncing\x20','getOrCreateRepo','\x20Repository\x20\x22','apply','sfLogger','applicationUrl',']\x20branch.','getBranchRecords','Unable\x20to\x20synchronize\x20repository\x20\x27','getLoggerId','3108906pimojP','__esModule','repositoriesIntersections','repositoryId','\x20Getting\x20repositories\x20from\x20git\x20service.','connectionId','../../../../core/errors/bad-request.error','log','265450SKtCDx','catch','toUpperCase','disableSync','SalesforceSyncService','__decorate','checkValidNaming','\x20Syncing\x20repository:\x20\x22','logger','166299ymHKGE','592sxTiVd','\x20Getting\x20branch\x20records.','metadata','../../../shared/utils','../../../../constants','Tokens','\x20branches.','SalesforceError','2IOEiXA','../jobs/flosum-sync.job','FlosumToGit','config','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','salesforceSync','getRepositoryRecords','isConvertToSfdx','\x20Sync\x20job\x20done.','\x20Have\x20to\x20synchronize\x20','name','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.','(((.+)+)+)+$','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','toString','gitProvider','sleep','decorate','../../providers/web-hooks/hooks.utils','constructor','design:paramtypes','GitBranchNotFoundError','10810548LAcnBt','BRANCH_NAME_REGEXP','branchName','isIntersects','Container','Waiting','4713144sMOeZk','\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20',']\x20[','\x20Checking\x20intersects.','getAll','\x20Getting\x20Flosum\x20repository','SyncService','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','Not\x20Synchronized','../../salesforce/services/salesforce.service','../jobs/git-sync.job','\x20No\x20repositories\x20to\x20sync.','\x27\x20in\x20repository\x20\x27','\x22\x20branch:\x20\x22','updateRemoteState','run','Unable\x20to\x20synchronize\x20branch\x20\x27','SyncDirection','find','typedi',']\x20due\x20error\x20-\x20','FlosumSyncJob','HooksUtils','function','getOwnPropertyDescriptor','prefix','setStatus','\x27\x20[','send','TooManyRequests','object','\x20Start\x20sync\x20job.','repositoryName','\x20Checking\x20valid\x20name.','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','repoList','error','join','../../salesforce/dto/flosum-repository-sync.dto','get','Logger','../errors/git-branch-not-found.error','21460761jDJYyF','search','defineProperty'];a111_0x2df5=function(){return _0x5be977;};return a111_0x2df5();}const constants_1=require(a111_0x429cf6(0x11d)),core_1=require('../../../../core'),too_many_requests_error_1=require(a111_0x429cf6(0xef)),flosum_repository_sync_dto_1=require(a111_0x429cf6(0xe6)),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a111_0x429cf6(0x146)),utils_1=require(a111_0x429cf6(0x11c)),typedi_1=require(a111_0x429cf6(0x150)),hooks_utils_1=require(a111_0x429cf6(0x133)),git_branch_not_found_error_1=require(a111_0x429cf6(0xe9)),flosum_sync_job_1=require(a111_0x429cf6(0x122)),git_sync_job_1=require(a111_0x429cf6(0x147)),providers_tokens_1=require('../../providers/providers.tokens'),bad_request_error_1=require(a111_0x429cf6(0x10d));let SyncService=SyncService_1=class SyncService{constructor(_0x1c3f76,_0x3b5d47){const _0x54551f=a111_0x429cf6;this[_0x54551f(0xfa)]=_0x1c3f76,this['salesforceSync']=_0x3b5d47,this[_0x54551f(0x117)]=new core_1[(_0x54551f(0xe8))](SyncService_1['name']),this[_0x54551f(0x109)]={},this[_0x54551f(0x160)]=[];}async['handleRecordSyncError'](_0x165bd9,_0x489be2){const _0x1ca39c=a111_0x429cf6;if(_0x489be2 instanceof git_branch_not_found_error_1[_0x1ca39c(0x136)]){await this['salesforceSync']['setStatus'](_0x165bd9,_0x1ca39c(0x145));return;}if(_0x489be2 instanceof too_many_requests_error_1['TooManyRequests']){await this[_0x1ca39c(0x126)]['setStatus'](_0x165bd9,_0x1ca39c(0x13c));throw _0x489be2;}try{await this[_0x1ca39c(0x101)][_0x1ca39c(0xe4)](this['prefix']+'\x20Stop\x20sync\x20job\x20for\x20\x27'+_0x165bd9['repositoryName']+_0x1ca39c(0x158)+_0x165bd9[_0x1ca39c(0x139)]+_0x1ca39c(0x151)+_0x489be2+'.')[_0x1ca39c(0x159)](),await this[_0x1ca39c(0x126)][_0x1ca39c(0x14b)](_0x165bd9,{}),await this['salesforceSync'][_0x1ca39c(0x157)](_0x165bd9,'Error');}catch(_0x584059){if(_0x584059 instanceof salesforce_error_1[_0x1ca39c(0x120)])throw _0x584059;}}async[a111_0x429cf6(0x13a)](_0x40ac17){const _0x26fe08=a111_0x429cf6;if(_0x40ac17['repositoryId']){const _0x395ad1=_0x40ac17['repositoryName']['toLowerCase'](),_0x391f04=this['repositoriesIntersections'][_0x395ad1];if(!_0x391f04)this[_0x26fe08(0x109)][_0x395ad1]=_0x40ac17[_0x26fe08(0x15d)];else{if(_0x391f04&&_0x391f04!==_0x40ac17['repositoryName'])return await this[_0x26fe08(0xf5)](_0x40ac17,new Error(_0x26fe08(0x105)+_0x40ac17[_0x26fe08(0x15d)]+_0x26fe08(0x144)+_0x395ad1+'\x27\x20-\x20\x27'+_0x391f04+'\x27')),!![];}}return![];}async[a111_0x429cf6(0x115)](_0xaf28f5){const _0x37e952=a111_0x429cf6;if(!constants_1['REPOSITORY_NAME_REGEXP']['test'](_0xaf28f5[_0x37e952(0x15d)]))return await this[_0x37e952(0xf5)](_0xaf28f5,new Error(_0x37e952(0x105)+_0xaf28f5[_0x37e952(0x15d)]+_0x37e952(0x15f))),![];if(!constants_1[_0x37e952(0x138)]['test'](_0xaf28f5[_0x37e952(0x139)]))return await this[_0x37e952(0xf5)](_0xaf28f5,new Error(_0x37e952(0x14d)+_0xaf28f5[_0x37e952(0x139)]+_0x37e952(0x149)+_0xaf28f5['repositoryName']+'\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.')),![];return!![];}async[a111_0x429cf6(0xfe)](_0x445e37,_0x31c0de){const _0x24fb68=a111_0x429cf6;let _0x41470b=this[_0x24fb68(0x160)][_0x24fb68(0x14f)](_0x44f5a4=>_0x445e37[_0x24fb68(0x15d)]===_0x44f5a4[_0x24fb68(0x12b)]);!_0x41470b&&(this[_0x24fb68(0x101)][_0x24fb68(0x10e)](this[_0x24fb68(0x156)]+_0x24fb68(0xff)+_0x445e37[_0x24fb68(0x15d)]+_0x24fb68(0x12e)),_0x41470b=await this[_0x24fb68(0xf4)]['create']({'name':_0x445e37[_0x24fb68(0x15d)],'autoInit':!![],'defaultBranch':_0x445e37['branchName'],'private':!![],'createHook':typedi_1['Container'][_0x24fb68(0xe7)](providers_tokens_1[_0x24fb68(0x11e)][_0x24fb68(0x124)])['isBidirectionalSynchronization']}));if(this[_0x24fb68(0x124)]['isBidirectionalSynchronization']){const _0x5cc836=await _0x41470b[_0x24fb68(0xf7)][_0x24fb68(0x141)]();!_0x5cc836[_0x24fb68(0x14f)](_0x157cfc=>_0x157cfc['url']===hooks_utils_1[_0x24fb68(0x153)]['getHookLinkFor'](this[_0x24fb68(0x124)]['gitProvider'],this[_0x24fb68(0x124)][_0x24fb68(0x102)],_0x31c0de))&&(this[_0x24fb68(0x101)][_0x24fb68(0x10e)](this[_0x24fb68(0x156)]+'\x20Repository\x20\x22'+_0x445e37[_0x24fb68(0x15d)]+_0x24fb68(0x12c)),await _0x41470b[_0x24fb68(0xf7)]['create'](hooks_utils_1[_0x24fb68(0x153)][_0x24fb68(0xf9)](this[_0x24fb68(0x124)][_0x24fb68(0x130)],_0x41470b[_0x24fb68(0xf7)],this['config']['applicationUrl'],_0x31c0de)));}return this['repoList']['push'](_0x41470b),_0x41470b;}async['run'](){const _0x3897bd=a111_0x429cf6;this[_0x3897bd(0xf1)]=typedi_1[_0x3897bd(0x13b)]['get'](providers_tokens_1[_0x3897bd(0x11e)][_0x3897bd(0xf1)]),this['repoService']=typedi_1[_0x3897bd(0x13b)][_0x3897bd(0xe7)](providers_tokens_1[_0x3897bd(0x11e)]['gitRepoService']),this['config']=typedi_1[_0x3897bd(0x13b)][_0x3897bd(0xe7)](providers_tokens_1[_0x3897bd(0x11e)][_0x3897bd(0x124)]),this['sfLogger']=typedi_1[_0x3897bd(0x13b)][_0x3897bd(0xe7)](providers_tokens_1[_0x3897bd(0x11e)]['logger']),this[_0x3897bd(0x156)]='['+SyncService_1[_0x3897bd(0x12b)]+_0x3897bd(0x13f)+this['config'][_0x3897bd(0x130)][_0x3897bd(0x111)]()+']',this[_0x3897bd(0xfa)]['setLoggerId'](this[_0x3897bd(0x101)][_0x3897bd(0x106)]());try{this[_0x3897bd(0x101)]['log'](this['prefix']+_0x3897bd(0x15c)),await this[_0x3897bd(0x101)][_0x3897bd(0x10e)](this[_0x3897bd(0x156)]+'\x20Getting\x20repository\x20records.')['send']();const _0x593759=await this[_0x3897bd(0x126)][_0x3897bd(0x127)](typedi_1['Container'][_0x3897bd(0xe7)](providers_tokens_1['Tokens'][_0x3897bd(0x10c)]));if(!_0x593759[_0x3897bd(0xed)])throw new bad_request_error_1['BadRequestError'](this[_0x3897bd(0x156)]+_0x3897bd(0x148));await this['sfLogger'][_0x3897bd(0x10e)](this[_0x3897bd(0x156)]+_0x3897bd(0x11a))[_0x3897bd(0x159)]();const _0x412f11=await this[_0x3897bd(0x126)][_0x3897bd(0x104)](_0x593759['map'](_0x2e0bae=>'\x27'+_0x2e0bae[_0x3897bd(0x10a)]+'\x27')[_0x3897bd(0xe5)](','));await this[_0x3897bd(0x101)][_0x3897bd(0x10e)](this[_0x3897bd(0x156)]+_0x3897bd(0x10b))[_0x3897bd(0x159)](),this[_0x3897bd(0x160)]=await this[_0x3897bd(0xf4)][_0x3897bd(0x141)]();const _0x33b4a6=[..._0x593759,..._0x412f11];this['sfLogger']['log'](this['prefix']+_0x3897bd(0x12a)+_0x33b4a6[_0x3897bd(0xed)]+_0x3897bd(0x11f));for(const _0x2ba321 of _0x33b4a6){this['logger'][_0x3897bd(0x10e)](_0x3897bd(0xfd)+_0x2ba321[_0x3897bd(0x15d)]+'['+_0x2ba321[_0x3897bd(0x10a)]+_0x3897bd(0xee)+_0x2ba321['branchName']+'['+_0x2ba321[_0x3897bd(0xfc)]+_0x3897bd(0x103)),this['sfLogger']['log'](this['prefix']+_0x3897bd(0x116)+_0x2ba321[_0x3897bd(0x15d)]+_0x3897bd(0x14a)+_0x2ba321[_0x3897bd(0x139)]+'\x22.'),this['sfLogger']['log'](this['prefix']+_0x3897bd(0x15e));const _0x10f4ce=await this[_0x3897bd(0x115)](_0x2ba321);if(!_0x10f4ce)continue;this['sfLogger']['log'](this[_0x3897bd(0x156)]+_0x3897bd(0x140));const _0x2d7e79=await this[_0x3897bd(0x13a)](_0x2ba321);if(_0x2d7e79)continue;await this[_0x3897bd(0x101)][_0x3897bd(0x159)]();let _0x17acc2;try{await this[_0x3897bd(0x101)]['log'](this[_0x3897bd(0x156)]+_0x3897bd(0x142))[_0x3897bd(0x159)](),_0x17acc2=await this[_0x3897bd(0xfe)](_0x2ba321,typedi_1[_0x3897bd(0x13b)][_0x3897bd(0xe7)](providers_tokens_1['Tokens'][_0x3897bd(0x10c)]));}catch(_0x5224ca){await this[_0x3897bd(0xf5)](_0x2ba321,_0x5224ca instanceof too_many_requests_error_1[_0x3897bd(0x15a)]?_0x5224ca:new Error(_0x3897bd(0xf0)+_0x5224ca));continue;}await this[_0x3897bd(0x101)][_0x3897bd(0x10e)](this[_0x3897bd(0x156)]+'\x20Completed\x20prepare\x20to\x20syncing.')[_0x3897bd(0x159)]();if(_0x2ba321[_0x3897bd(0xf2)]===flosum_repository_sync_dto_1[_0x3897bd(0x14e)][_0x3897bd(0x123)]){const _0x524f1c=typedi_1[_0x3897bd(0x13b)][_0x3897bd(0xe7)](flosum_sync_job_1[_0x3897bd(0x152)]);await _0x524f1c[_0x3897bd(0x14c)]({'repository':_0x17acc2,'convertToSFDX':this[_0x3897bd(0x124)][_0x3897bd(0x128)],'syncRecord':_0x2ba321,'provider':this[_0x3897bd(0x124)][_0x3897bd(0x130)]})[_0x3897bd(0x110)](_0xd3d9ef=>this[_0x3897bd(0xf5)](_0x2ba321,_0xd3d9ef));}else{const _0x2089e8=typedi_1[_0x3897bd(0x13b)][_0x3897bd(0xe7)](git_sync_job_1[_0x3897bd(0xf8)]);await _0x2089e8[_0x3897bd(0x14c)]({'repository':_0x17acc2,'branch':_0x2ba321['branchName'],'provider':this[_0x3897bd(0x124)][_0x3897bd(0x130)],'repositoryGit':_0x17acc2['gitUrl'],'syncRecord':_0x2ba321})[_0x3897bd(0x110)](_0x544e6b=>this[_0x3897bd(0xf5)](_0x2ba321,_0x544e6b));}}}catch(_0x5767a4){this['logger']['error'](_0x5767a4);_0x5767a4 instanceof too_many_requests_error_1[_0x3897bd(0x15a)]?(await this[_0x3897bd(0x101)]['log'](this[_0x3897bd(0x156)]+_0x3897bd(0x125))[_0x3897bd(0x159)](),await(0x0,utils_1[_0x3897bd(0x131)])(0x3c*0x3c*0x3e8),this[_0x3897bd(0x14c)]()):await this[_0x3897bd(0x101)][_0x3897bd(0xe4)](this['prefix']+_0x3897bd(0x13e)+_0x5767a4)[_0x3897bd(0x159)]();return;}await this[_0x3897bd(0x101)][_0x3897bd(0x10e)](this['prefix']+_0x3897bd(0x129))[_0x3897bd(0x159)](),await this['salesforceSync'][_0x3897bd(0x112)](typedi_1[_0x3897bd(0x13b)][_0x3897bd(0xe7)](providers_tokens_1[_0x3897bd(0x11e)][_0x3897bd(0x10c)]))['catch'](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1[a111_0x429cf6(0xf6)])({'transient':!![]}),__metadata(a111_0x429cf6(0x135),[salesforce_service_1[a111_0x429cf6(0xfb)],salesforce_sync_service_1[a111_0x429cf6(0x113)]])],SyncService),exports[a111_0x429cf6(0x143)]=SyncService;