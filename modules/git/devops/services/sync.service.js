function a110_0x37af(){const _0x2754d7=['object','connectionId','search','146943FXlASo','\x22\x20branch:\x20\x22','../../../shared/utils','../../providers/web-hooks/hooks.utils','error','\x20Getting\x20branch\x20records.','4233201GyIufl','length','\x20Repository\x20\x22','prefix','push','Service','function','map','test','../errors/git-branch-not-found.error','\x27\x20in\x20repository\x20\x27','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','Logger','typedi','2808876XkxiKs','handleRecordSyncError','__metadata','applicationUrl','\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','\x20Stop\x20sync\x20job\x20for\x20\x27','setLoggerId','__esModule','log','getOwnPropertyDescriptor','catch','repositoryName','Waiting','send','repositoriesIntersections','2644128vPcaeD','gitApiService','\x20No\x20repositories\x20to\x20sync.','branchId','805ebWVVz','sfLogger','../../../../core','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','toLowerCase','\x20Completed\x20prepare\x20to\x20syncing.','TooManyRequests','create','hooks','../../providers/providers.tokens','isBidirectionalSynchronization','../../salesforce/services/salesforce.service','(((.+)+)+)+$','../jobs/flosum-sync.job','disableSync','createHookPayload','\x27\x20[','defineProperty','gitProvider','config','Tokens',']\x20[','constructor','run','8kCqTDc','salesforceService','getRepositoryRecords',']\x20repository\x20','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','toUpperCase','\x20Have\x20to\x20synchronize\x20','../../salesforce/errors/salesforce.error','getAll','Container','name','742232xXalPs','26776JYhlbm','\x20Checking\x20intersects.','repoService','metadata','Unable\x20to\x20synchronize\x20repository\x20\x27','BRANCH_NAME_REGEXP','join','31775910ZVqILd','sleep','GitBranchNotFoundError','find','apply','toString','\x20Getting\x20Flosum\x20repository','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','get','design:paramtypes','\x20Getting\x20repository\x20records.','../../../../core/errors/bad-request.error','BadRequestError','decorate',']\x20branch.','repositoryId','Syncing\x20','\x20Sync\x20job\x20done.','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','gitUrl','checkValidNaming','../../../../constants','../jobs/git-sync.job','salesforceSync','HooksUtils','\x20branches.','isIntersects','branchName','getOrCreateRepo','../../../../core/errors/too-many-requests.error','\x20Start\x20sync\x20job.','gitRepoService','2wvQTvz','logger','updateRemoteState','SyncService','direction','\x20Getting\x20repositories\x20from\x20git\x20service.','SalesforceSyncService','repoList','\x20Syncing\x20repository:\x20\x22'];a110_0x37af=function(){return _0x2754d7;};return a110_0x37af();}const a110_0x34aac6=a110_0x5c81;(function(_0x445fbe,_0x1dfeba){const _0xad80d=a110_0x5c81,_0x44ae52=_0x445fbe();while(!![]){try{const _0x520467=parseInt(_0xad80d(0x1d6))/0x1*(-parseInt(_0xad80d(0x1fe))/0x2)+-parseInt(_0xad80d(0x1af))/0x3+-parseInt(_0xad80d(0x1d7))/0x4*(parseInt(_0xad80d(0x1b3))/0x5)+-parseInt(_0xad80d(0x1a0))/0x6+parseInt(_0xad80d(0x210))/0x7*(parseInt(_0xad80d(0x1cb))/0x8)+parseInt(_0xad80d(0x20a))/0x9+parseInt(_0xad80d(0x1de))/0xa;if(_0x520467===_0x1dfeba)break;else _0x44ae52['push'](_0x44ae52['shift']());}catch(_0x19ba36){_0x44ae52['push'](_0x44ae52['shift']());}}}(a110_0x37af,0x999b5));const a110_0x4e89df=(function(){let _0x502429=!![];return function(_0x1d4ef6,_0x168a9d){const _0x482753=_0x502429?function(){const _0x26f36d=a110_0x5c81;if(_0x168a9d){const _0x21d5a4=_0x168a9d[_0x26f36d(0x1e2)](_0x1d4ef6,arguments);return _0x168a9d=null,_0x21d5a4;}}:function(){};return _0x502429=![],_0x482753;};}()),a110_0x14905a=a110_0x4e89df(this,function(){const _0x17c91f=a110_0x5c81;return a110_0x14905a[_0x17c91f(0x1e3)]()[_0x17c91f(0x209)](_0x17c91f(0x1bf))[_0x17c91f(0x1e3)]()[_0x17c91f(0x1c9)](a110_0x14905a)['search']('(((.+)+)+)+$');});a110_0x14905a();'use strict';var __decorate=this&&this['__decorate']||function(_0x45a081,_0x500f3e,_0x1d8cf3,_0x2f4881){const _0x6bc0a3=a110_0x5c81;var _0x426167=arguments[_0x6bc0a3(0x211)],_0x257290=_0x426167<0x3?_0x500f3e:_0x2f4881===null?_0x2f4881=Object[_0x6bc0a3(0x1a9)](_0x500f3e,_0x1d8cf3):_0x2f4881,_0x551baa;if(typeof Reflect===_0x6bc0a3(0x207)&&typeof Reflect[_0x6bc0a3(0x1eb)]===_0x6bc0a3(0x198))_0x257290=Reflect[_0x6bc0a3(0x1eb)](_0x45a081,_0x500f3e,_0x1d8cf3,_0x2f4881);else{for(var _0x26a47e=_0x45a081['length']-0x1;_0x26a47e>=0x0;_0x26a47e--)if(_0x551baa=_0x45a081[_0x26a47e])_0x257290=(_0x426167<0x3?_0x551baa(_0x257290):_0x426167>0x3?_0x551baa(_0x500f3e,_0x1d8cf3,_0x257290):_0x551baa(_0x500f3e,_0x1d8cf3))||_0x257290;}return _0x426167>0x3&&_0x257290&&Object[_0x6bc0a3(0x1c4)](_0x500f3e,_0x1d8cf3,_0x257290),_0x257290;},__metadata=this&&this[a110_0x34aac6(0x1a2)]||function(_0x5673e0,_0x6d2a0c){const _0x4007ad=a110_0x34aac6;if(typeof Reflect===_0x4007ad(0x207)&&typeof Reflect[_0x4007ad(0x1da)]===_0x4007ad(0x198))return Reflect[_0x4007ad(0x1da)](_0x5673e0,_0x6d2a0c);},SyncService_1;function a110_0x5c81(_0x1f375d,_0xcdf67b){const _0x105a5c=a110_0x37af();return a110_0x5c81=function(_0x14905a,_0x4e89df){_0x14905a=_0x14905a-0x194;let _0x37af84=_0x105a5c[_0x14905a];return _0x37af84;},a110_0x5c81(_0x1f375d,_0xcdf67b);}Object['defineProperty'](exports,a110_0x34aac6(0x1a7),{'value':!![]}),exports[a110_0x34aac6(0x201)]=void 0x0;const constants_1=require(a110_0x34aac6(0x1f3)),core_1=require(a110_0x34aac6(0x1b5)),too_many_requests_error_1=require(a110_0x34aac6(0x1fb)),flosum_repository_sync_dto_1=require('../../salesforce/dto/flosum-repository-sync.dto'),salesforce_error_1=require(a110_0x34aac6(0x1d2)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a110_0x34aac6(0x1be)),utils_1=require(a110_0x34aac6(0x20c)),typedi_1=require(a110_0x34aac6(0x19f)),hooks_utils_1=require(a110_0x34aac6(0x20d)),git_branch_not_found_error_1=require(a110_0x34aac6(0x19b)),flosum_sync_job_1=require(a110_0x34aac6(0x1c0)),git_sync_job_1=require(a110_0x34aac6(0x1f4)),providers_tokens_1=require(a110_0x34aac6(0x1bc)),bad_request_error_1=require(a110_0x34aac6(0x1e9));let SyncService=SyncService_1=class SyncService{constructor(_0x39cc53,_0x55e0e4){const _0x3f2dbe=a110_0x34aac6;this[_0x3f2dbe(0x1cc)]=_0x39cc53,this['salesforceSync']=_0x55e0e4,this[_0x3f2dbe(0x1ff)]=new core_1[(_0x3f2dbe(0x19e))](SyncService_1['name']),this[_0x3f2dbe(0x1ae)]={},this['repoList']=[];}async['handleRecordSyncError'](_0x1cd8a5,_0x259b0a){const _0x5de08d=a110_0x34aac6;if(_0x259b0a instanceof git_branch_not_found_error_1[_0x5de08d(0x1e0)]){await this[_0x5de08d(0x1f5)]['setStatus'](_0x1cd8a5,'Not\x20Synchronized');return;}if(_0x259b0a instanceof too_many_requests_error_1[_0x5de08d(0x1b9)]){await this[_0x5de08d(0x1f5)]['setStatus'](_0x1cd8a5,_0x5de08d(0x1ac));throw _0x259b0a;}try{await this['sfLogger'][_0x5de08d(0x20e)](this[_0x5de08d(0x195)]+_0x5de08d(0x1a5)+_0x1cd8a5[_0x5de08d(0x1ab)]+_0x5de08d(0x1c3)+_0x1cd8a5[_0x5de08d(0x1f9)]+']\x20due\x20error\x20-\x20'+_0x259b0a+'.')[_0x5de08d(0x1ad)](),await this['salesforceSync'][_0x5de08d(0x200)](_0x1cd8a5,{}),await this[_0x5de08d(0x1f5)]['setStatus'](_0x1cd8a5,'Error');}catch(_0x3cd4e0){if(_0x3cd4e0 instanceof salesforce_error_1['SalesforceError'])throw _0x3cd4e0;}}async['isIntersects'](_0x3f9d2a){const _0x8ed906=a110_0x34aac6;if(_0x3f9d2a[_0x8ed906(0x1ed)]){const _0x2a7de3=_0x3f9d2a['repositoryName'][_0x8ed906(0x1b7)](),_0x549e1a=this[_0x8ed906(0x1ae)][_0x2a7de3];if(!_0x549e1a)this[_0x8ed906(0x1ae)][_0x2a7de3]=_0x3f9d2a[_0x8ed906(0x1ab)];else{if(_0x549e1a&&_0x549e1a!==_0x3f9d2a[_0x8ed906(0x1ab)])return await this[_0x8ed906(0x1a1)](_0x3f9d2a,new Error(_0x8ed906(0x1db)+_0x3f9d2a[_0x8ed906(0x1ab)]+_0x8ed906(0x1e5)+_0x2a7de3+'\x27\x20-\x20\x27'+_0x549e1a+'\x27')),!![];}}return![];}async[a110_0x34aac6(0x1f2)](_0x1f5f1f){const _0x3a8b4c=a110_0x34aac6;if(!constants_1['REPOSITORY_NAME_REGEXP'][_0x3a8b4c(0x19a)](_0x1f5f1f[_0x3a8b4c(0x1ab)]))return await this['handleRecordSyncError'](_0x1f5f1f,new Error(_0x3a8b4c(0x1db)+_0x1f5f1f[_0x3a8b4c(0x1ab)]+_0x3a8b4c(0x1b6))),![];if(!constants_1[_0x3a8b4c(0x1dc)][_0x3a8b4c(0x19a)](_0x1f5f1f[_0x3a8b4c(0x1f9)]))return await this[_0x3a8b4c(0x1a1)](_0x1f5f1f,new Error('Unable\x20to\x20synchronize\x20branch\x20\x27'+_0x1f5f1f[_0x3a8b4c(0x1f9)]+_0x3a8b4c(0x19c)+_0x1f5f1f[_0x3a8b4c(0x1ab)]+_0x3a8b4c(0x19d))),![];return!![];}async[a110_0x34aac6(0x1fa)](_0x317f34,_0x26ef33){const _0x416d5a=a110_0x34aac6;let _0x59791a=this[_0x416d5a(0x205)][_0x416d5a(0x1e1)](_0x5b5807=>_0x317f34['repositoryName']===_0x5b5807[_0x416d5a(0x1d5)]);!_0x59791a&&(this[_0x416d5a(0x1b4)][_0x416d5a(0x1a8)](this[_0x416d5a(0x195)]+_0x416d5a(0x194)+_0x317f34[_0x416d5a(0x1ab)]+'\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.'),_0x59791a=await this[_0x416d5a(0x1d9)][_0x416d5a(0x1ba)]({'name':_0x317f34['repositoryName'],'autoInit':!![],'defaultBranch':_0x317f34[_0x416d5a(0x1f9)],'private':!![],'createHook':typedi_1['Container'][_0x416d5a(0x1e6)](providers_tokens_1[_0x416d5a(0x1c7)][_0x416d5a(0x1c6)])[_0x416d5a(0x1bd)]}));if(this[_0x416d5a(0x1c6)]['isBidirectionalSynchronization']){const _0x19310f=await _0x59791a['hooks'][_0x416d5a(0x1d3)]();!_0x19310f[_0x416d5a(0x1e1)](_0x43bcbc=>_0x43bcbc['url']===hooks_utils_1[_0x416d5a(0x1f6)]['getHookLinkFor'](this[_0x416d5a(0x1c6)]['gitProvider'],this[_0x416d5a(0x1c6)]['applicationUrl'],_0x26ef33))&&(this[_0x416d5a(0x1b4)][_0x416d5a(0x1a8)](this[_0x416d5a(0x195)]+_0x416d5a(0x194)+_0x317f34['repositoryName']+'\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.'),await _0x59791a[_0x416d5a(0x1bb)][_0x416d5a(0x1ba)](hooks_utils_1['HooksUtils'][_0x416d5a(0x1c2)](this['config'][_0x416d5a(0x1c5)],_0x59791a[_0x416d5a(0x1bb)],this[_0x416d5a(0x1c6)][_0x416d5a(0x1a3)],_0x26ef33)));}return this[_0x416d5a(0x205)][_0x416d5a(0x196)](_0x59791a),_0x59791a;}async['run'](){const _0x4dcc25=a110_0x34aac6;this[_0x4dcc25(0x1b0)]=typedi_1['Container'][_0x4dcc25(0x1e6)](providers_tokens_1[_0x4dcc25(0x1c7)][_0x4dcc25(0x1b0)]),this[_0x4dcc25(0x1d9)]=typedi_1[_0x4dcc25(0x1d4)][_0x4dcc25(0x1e6)](providers_tokens_1[_0x4dcc25(0x1c7)][_0x4dcc25(0x1fd)]),this['config']=typedi_1[_0x4dcc25(0x1d4)][_0x4dcc25(0x1e6)](providers_tokens_1[_0x4dcc25(0x1c7)][_0x4dcc25(0x1c6)]),this[_0x4dcc25(0x1b4)]=typedi_1[_0x4dcc25(0x1d4)][_0x4dcc25(0x1e6)](providers_tokens_1[_0x4dcc25(0x1c7)][_0x4dcc25(0x1ff)]),this[_0x4dcc25(0x195)]='['+SyncService_1['name']+_0x4dcc25(0x1c8)+this['config'][_0x4dcc25(0x1c5)][_0x4dcc25(0x1d0)]()+']',this[_0x4dcc25(0x1cc)][_0x4dcc25(0x1a6)](this[_0x4dcc25(0x1b4)]['getLoggerId']());try{this[_0x4dcc25(0x1b4)][_0x4dcc25(0x1a8)](this[_0x4dcc25(0x195)]+_0x4dcc25(0x1fc)),await this[_0x4dcc25(0x1b4)][_0x4dcc25(0x1a8)](this[_0x4dcc25(0x195)]+_0x4dcc25(0x1e8))[_0x4dcc25(0x1ad)]();const _0x271fe4=await this['salesforceSync'][_0x4dcc25(0x1cd)](typedi_1['Container'][_0x4dcc25(0x1e6)](providers_tokens_1['Tokens'][_0x4dcc25(0x208)]));if(!_0x271fe4[_0x4dcc25(0x211)])throw new bad_request_error_1[(_0x4dcc25(0x1ea))](this[_0x4dcc25(0x195)]+_0x4dcc25(0x1b1));await this[_0x4dcc25(0x1b4)][_0x4dcc25(0x1a8)](this['prefix']+_0x4dcc25(0x20f))[_0x4dcc25(0x1ad)]();const _0x599da8=await this[_0x4dcc25(0x1f5)]['getBranchRecords'](_0x271fe4[_0x4dcc25(0x199)](_0x4d21f9=>'\x27'+_0x4d21f9[_0x4dcc25(0x1ed)]+'\x27')[_0x4dcc25(0x1dd)](','));await this[_0x4dcc25(0x1b4)][_0x4dcc25(0x1a8)](this[_0x4dcc25(0x195)]+_0x4dcc25(0x203))['send'](),this[_0x4dcc25(0x205)]=await this[_0x4dcc25(0x1d9)][_0x4dcc25(0x1d3)]();const _0x389a0a=[..._0x271fe4,..._0x599da8];this['sfLogger']['log'](this[_0x4dcc25(0x195)]+_0x4dcc25(0x1d1)+_0x389a0a[_0x4dcc25(0x211)]+_0x4dcc25(0x1f7));for(const _0x2356fa of _0x389a0a){this[_0x4dcc25(0x1ff)][_0x4dcc25(0x1a8)](_0x4dcc25(0x1ee)+_0x2356fa[_0x4dcc25(0x1ab)]+'['+_0x2356fa[_0x4dcc25(0x1ed)]+_0x4dcc25(0x1ce)+_0x2356fa['branchName']+'['+_0x2356fa[_0x4dcc25(0x1b2)]+_0x4dcc25(0x1ec)),this[_0x4dcc25(0x1b4)][_0x4dcc25(0x1a8)](this['prefix']+_0x4dcc25(0x206)+_0x2356fa[_0x4dcc25(0x1ab)]+_0x4dcc25(0x20b)+_0x2356fa[_0x4dcc25(0x1f9)]+'\x22.'),this['sfLogger'][_0x4dcc25(0x1a8)](this[_0x4dcc25(0x195)]+'\x20Checking\x20valid\x20name.');const _0x315f4a=await this[_0x4dcc25(0x1f2)](_0x2356fa);if(!_0x315f4a)continue;this[_0x4dcc25(0x1b4)][_0x4dcc25(0x1a8)](this['prefix']+_0x4dcc25(0x1d8));const _0x93aa68=await this[_0x4dcc25(0x1f8)](_0x2356fa);if(_0x93aa68)continue;await this[_0x4dcc25(0x1b4)]['send']();let _0x4a7568;try{await this[_0x4dcc25(0x1b4)][_0x4dcc25(0x1a8)](this['prefix']+_0x4dcc25(0x1e4))[_0x4dcc25(0x1ad)](),_0x4a7568=await this[_0x4dcc25(0x1fa)](_0x2356fa,typedi_1['Container']['get'](providers_tokens_1['Tokens'][_0x4dcc25(0x208)]));}catch(_0x440d1a){await this[_0x4dcc25(0x1a1)](_0x2356fa,_0x440d1a instanceof too_many_requests_error_1['TooManyRequests']?_0x440d1a:new Error(_0x4dcc25(0x1cf)+_0x440d1a));continue;}await this['sfLogger'][_0x4dcc25(0x1a8)](this['prefix']+_0x4dcc25(0x1b8))[_0x4dcc25(0x1ad)]();if(_0x2356fa[_0x4dcc25(0x202)]===flosum_repository_sync_dto_1['SyncDirection']['FlosumToGit']){const _0x2b53c7=typedi_1[_0x4dcc25(0x1d4)]['get'](flosum_sync_job_1['FlosumSyncJob']);await _0x2b53c7[_0x4dcc25(0x1ca)]({'repository':_0x4a7568,'convertToSFDX':this[_0x4dcc25(0x1c6)]['isConvertToSfdx'],'syncRecord':_0x2356fa,'provider':this['config']['gitProvider']})[_0x4dcc25(0x1aa)](_0x3cce4d=>this[_0x4dcc25(0x1a1)](_0x2356fa,_0x3cce4d));}else{const _0x4c2105=typedi_1[_0x4dcc25(0x1d4)][_0x4dcc25(0x1e6)](git_sync_job_1['GitSyncJob']);await _0x4c2105[_0x4dcc25(0x1ca)]({'repository':_0x4a7568,'branch':_0x2356fa[_0x4dcc25(0x1f9)],'provider':this[_0x4dcc25(0x1c6)][_0x4dcc25(0x1c5)],'repositoryGit':_0x4a7568[_0x4dcc25(0x1f1)],'syncRecord':_0x2356fa})[_0x4dcc25(0x1aa)](_0x45573d=>this['handleRecordSyncError'](_0x2356fa,_0x45573d));}}}catch(_0x2de2d5){this[_0x4dcc25(0x1ff)][_0x4dcc25(0x20e)](_0x2de2d5);_0x2de2d5 instanceof too_many_requests_error_1[_0x4dcc25(0x1b9)]?(await this['sfLogger']['log'](this[_0x4dcc25(0x195)]+_0x4dcc25(0x1f0))['send'](),await(0x0,utils_1[_0x4dcc25(0x1df)])(0x3c*0x3c*0x3e8),this[_0x4dcc25(0x1ca)]()):await this[_0x4dcc25(0x1b4)][_0x4dcc25(0x20e)](this[_0x4dcc25(0x195)]+_0x4dcc25(0x1a4)+_0x2de2d5)[_0x4dcc25(0x1ad)]();return;}await this[_0x4dcc25(0x1b4)]['log'](this[_0x4dcc25(0x195)]+_0x4dcc25(0x1ef))[_0x4dcc25(0x1ad)](),await this[_0x4dcc25(0x1f5)][_0x4dcc25(0x1c1)](typedi_1[_0x4dcc25(0x1d4)][_0x4dcc25(0x1e6)](providers_tokens_1[_0x4dcc25(0x1c7)]['connectionId']))[_0x4dcc25(0x1aa)](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1[a110_0x34aac6(0x197)])({'transient':!![]}),__metadata(a110_0x34aac6(0x1e7),[salesforce_service_1['SalesforceService'],salesforce_sync_service_1[a110_0x34aac6(0x204)]])],SyncService),exports[a110_0x34aac6(0x201)]=SyncService;