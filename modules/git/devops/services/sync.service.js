function a111_0x1157(){const _0x9f41cc=['../../salesforce/errors/salesforce.error','BadRequestError','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','2244KCqbEQ','salesforceSync','3ZRPtTg','Logger','Tokens','sleep','\x20No\x20repositories\x20to\x20sync.','FlosumToGit','REPOSITORY_NAME_REGEXP','__esModule',']\x20branch.','setStatus','run','\x20Checking\x20valid\x20name.','config','direction','TooManyRequests','10135cwHiEZ','(((.+)+)+)+$','getRepositoryRecords','798236hdRwBT','applicationUrl','\x27\x20-\x20\x27','gitProvider','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','get','Error','handleRecordSyncError','Container','catch','45qmBqDn','checkValidNaming','\x20Getting\x20branch\x20records.','repositoryName','Syncing\x20','isConvertToSfdx','__metadata','392488TcuXVt','\x20Getting\x20repository\x20records.','GitSyncJob','../../salesforce/dto/flosum-repository-sync.dto','toString','gitRepoService','../../../shared/utils','2107HBCYIG','\x20Start\x20sync\x20job.','sfLogger','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','392894XCkAxt','length','metadata',']\x20due\x20error\x20-\x20','isIntersects','\x20Syncing\x20repository:\x20\x22','\x20Getting\x20Flosum\x20repository','typedi','../../../../core/errors/too-many-requests.error','repositoriesIntersections','error','repositoryId','getOwnPropertyDescriptor','SyncDirection','../../providers/providers.tokens','branchName','\x27\x20in\x20repository\x20\x27','../../../../core/errors/bad-request.error','hooks','design:paramtypes','name','Not\x20Synchronized','getHookLinkFor','BRANCH_NAME_REGEXP','8508TuMjuD','constructor','disableSync','send','create','isBidirectionalSynchronization','12467BgABSO','object','createHookPayload','\x20Sync\x20job\x20done.','SyncService','setLoggerId','repoList','push','toUpperCase','gitUrl','\x20Getting\x20repositories\x20from\x20git\x20service.','branchId','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','log','\x20Repository\x20\x22','search','toLowerCase','salesforceService','defineProperty','21558kLEynU','__decorate','../../../../core','Unable\x20to\x20synchronize\x20repository\x20\x27','decorate','getAll','../../salesforce/services/salesforce.service','find','test','connectionId','join',']\x20[','1700kEdvCt','HooksUtils','../../salesforce/services/salesforce-sync.service','getOrCreateRepo','gitApiService','logger','getBranchRecords','../../providers/web-hooks/hooks.utils','Waiting','function','prefix','repoService','44286kLYjae','\x20branches.'];a111_0x1157=function(){return _0x9f41cc;};return a111_0x1157();}const a111_0x56d2fb=a111_0x4a55;(function(_0x2be91e,_0x474820){const _0x1e8d64=a111_0x4a55,_0x209d2d=_0x2be91e();while(!![]){try{const _0x5a0e59=-parseInt(_0x1e8d64(0x7b))/0x1+-parseInt(_0x1e8d64(0x98))/0x2*(-parseInt(_0x1e8d64(0xe8))/0x3)+-parseInt(_0x1e8d64(0xe6))/0x4*(-parseInt(_0x1e8d64(0x78))/0x5)+parseInt(_0x1e8d64(0xc9))/0x6*(-parseInt(_0x1e8d64(0x94))/0x7)+-parseInt(_0x1e8d64(0x8d))/0x8*(parseInt(_0x1e8d64(0x86))/0x9)+parseInt(_0x1e8d64(0xd5))/0xa*(parseInt(_0x1e8d64(0xe1))/0xb)+parseInt(_0x1e8d64(0xb0))/0xc*(parseInt(_0x1e8d64(0xb6))/0xd);if(_0x5a0e59===_0x474820)break;else _0x209d2d['push'](_0x209d2d['shift']());}catch(_0x1c8408){_0x209d2d['push'](_0x209d2d['shift']());}}}(a111_0x1157,0x8bdef));function a111_0x4a55(_0x38c7ca,_0x1b5db3){const _0xe6573f=a111_0x1157();return a111_0x4a55=function(_0x17a3f1,_0x44422b){_0x17a3f1=_0x17a3f1-0x72;let _0x115797=_0xe6573f[_0x17a3f1];return _0x115797;},a111_0x4a55(_0x38c7ca,_0x1b5db3);}const a111_0x44422b=(function(){let _0x51c673=!![];return function(_0x4e8df9,_0x1716eb){const _0x123efe=_0x51c673?function(){if(_0x1716eb){const _0x26fb99=_0x1716eb['apply'](_0x4e8df9,arguments);return _0x1716eb=null,_0x26fb99;}}:function(){};return _0x51c673=![],_0x123efe;};}()),a111_0x17a3f1=a111_0x44422b(this,function(){const _0x42ce13=a111_0x4a55;return a111_0x17a3f1[_0x42ce13(0x91)]()['search'](_0x42ce13(0x79))['toString']()[_0x42ce13(0xb1)](a111_0x17a3f1)[_0x42ce13(0xc5)](_0x42ce13(0x79));});a111_0x17a3f1();'use strict';var __decorate=this&&this[a111_0x56d2fb(0xca)]||function(_0x163b34,_0x548c97,_0x52d51f,_0x151981){const _0x45f484=a111_0x56d2fb;var _0x46e45f=arguments[_0x45f484(0x99)],_0x5e838f=_0x46e45f<0x3?_0x548c97:_0x151981===null?_0x151981=Object[_0x45f484(0xa4)](_0x548c97,_0x52d51f):_0x151981,_0x15a034;if(typeof Reflect===_0x45f484(0xb7)&&typeof Reflect[_0x45f484(0xcd)]===_0x45f484(0xde))_0x5e838f=Reflect['decorate'](_0x163b34,_0x548c97,_0x52d51f,_0x151981);else{for(var _0x2e17ee=_0x163b34['length']-0x1;_0x2e17ee>=0x0;_0x2e17ee--)if(_0x15a034=_0x163b34[_0x2e17ee])_0x5e838f=(_0x46e45f<0x3?_0x15a034(_0x5e838f):_0x46e45f>0x3?_0x15a034(_0x548c97,_0x52d51f,_0x5e838f):_0x15a034(_0x548c97,_0x52d51f))||_0x5e838f;}return _0x46e45f>0x3&&_0x5e838f&&Object['defineProperty'](_0x548c97,_0x52d51f,_0x5e838f),_0x5e838f;},__metadata=this&&this[a111_0x56d2fb(0x8c)]||function(_0x1dee3d,_0x40f1e8){const _0x2fa85c=a111_0x56d2fb;if(typeof Reflect===_0x2fa85c(0xb7)&&typeof Reflect[_0x2fa85c(0x9a)]===_0x2fa85c(0xde))return Reflect['metadata'](_0x1dee3d,_0x40f1e8);},SyncService_1;Object[a111_0x56d2fb(0xc8)](exports,a111_0x56d2fb(0xef),{'value':!![]}),exports[a111_0x56d2fb(0xba)]=void 0x0;const constants_1=require('../../../../constants'),core_1=require(a111_0x56d2fb(0xcb)),too_many_requests_error_1=require(a111_0x56d2fb(0xa0)),flosum_repository_sync_dto_1=require(a111_0x56d2fb(0x90)),salesforce_error_1=require(a111_0x56d2fb(0xe3)),salesforce_sync_service_1=require(a111_0x56d2fb(0xd7)),salesforce_service_1=require(a111_0x56d2fb(0xcf)),utils_1=require(a111_0x56d2fb(0x93)),typedi_1=require(a111_0x56d2fb(0x9f)),hooks_utils_1=require(a111_0x56d2fb(0xdc)),git_branch_not_found_error_1=require('../errors/git-branch-not-found.error'),flosum_sync_job_1=require('../jobs/flosum-sync.job'),git_sync_job_1=require('../jobs/git-sync.job'),providers_tokens_1=require(a111_0x56d2fb(0xa6)),bad_request_error_1=require(a111_0x56d2fb(0xa9));let SyncService=SyncService_1=class SyncService{constructor(_0xeb4e77,_0x466279){const _0x52a22e=a111_0x56d2fb;this[_0x52a22e(0xc7)]=_0xeb4e77,this[_0x52a22e(0xe7)]=_0x466279,this['logger']=new core_1[(_0x52a22e(0xe9))](SyncService_1[_0x52a22e(0xac)]),this[_0x52a22e(0xa1)]={},this[_0x52a22e(0xbc)]=[];}async[a111_0x56d2fb(0x83)](_0x3464b0,_0xdc25ef){const _0x45d23a=a111_0x56d2fb;if(_0xdc25ef instanceof git_branch_not_found_error_1['GitBranchNotFoundError']){await this[_0x45d23a(0xe7)]['setStatus'](_0x3464b0,_0x45d23a(0xad));return;}if(_0xdc25ef instanceof too_many_requests_error_1[_0x45d23a(0x77)]){await this[_0x45d23a(0xe7)][_0x45d23a(0x72)](_0x3464b0,_0x45d23a(0xdd));throw _0xdc25ef;}try{await this[_0x45d23a(0x96)][_0x45d23a(0xa2)](this[_0x45d23a(0xdf)]+'\x20Stop\x20sync\x20job\x20for\x20\x27'+_0x3464b0[_0x45d23a(0x89)]+'\x27\x20['+_0x3464b0[_0x45d23a(0xa7)]+_0x45d23a(0x9b)+_0xdc25ef+'.')['send'](),await this[_0x45d23a(0xe7)]['updateRemoteState'](_0x3464b0,{}),await this[_0x45d23a(0xe7)]['setStatus'](_0x3464b0,_0x45d23a(0x82));}catch(_0x13bfc3){if(_0x13bfc3 instanceof salesforce_error_1['SalesforceError'])throw _0x13bfc3;}}async[a111_0x56d2fb(0x9c)](_0x1b0208){const _0x5c63b4=a111_0x56d2fb;if(_0x1b0208[_0x5c63b4(0xa3)]){const _0x201b1c=_0x1b0208['repositoryName'][_0x5c63b4(0xc6)](),_0x1deac3=this[_0x5c63b4(0xa1)][_0x201b1c];if(!_0x1deac3)this[_0x5c63b4(0xa1)][_0x201b1c]=_0x1b0208[_0x5c63b4(0x89)];else{if(_0x1deac3&&_0x1deac3!==_0x1b0208[_0x5c63b4(0x89)])return await this[_0x5c63b4(0x83)](_0x1b0208,new Error(_0x5c63b4(0xcc)+_0x1b0208[_0x5c63b4(0x89)]+_0x5c63b4(0xc2)+_0x201b1c+_0x5c63b4(0x7d)+_0x1deac3+'\x27')),!![];}}return![];}async[a111_0x56d2fb(0x87)](_0x143783){const _0x2507b5=a111_0x56d2fb;if(!constants_1[_0x2507b5(0xee)][_0x2507b5(0xd1)](_0x143783['repositoryName']))return await this[_0x2507b5(0x83)](_0x143783,new Error(_0x2507b5(0xcc)+_0x143783[_0x2507b5(0x89)]+_0x2507b5(0xe5))),![];if(!constants_1[_0x2507b5(0xaf)][_0x2507b5(0xd1)](_0x143783[_0x2507b5(0xa7)]))return await this['handleRecordSyncError'](_0x143783,new Error('Unable\x20to\x20synchronize\x20branch\x20\x27'+_0x143783['branchName']+_0x2507b5(0xa8)+_0x143783['repositoryName']+_0x2507b5(0x7f))),![];return!![];}async['getOrCreateRepo'](_0x181173,_0x48997a){const _0x565534=a111_0x56d2fb;let _0x3db0de=this[_0x565534(0xbc)][_0x565534(0xd0)](_0x56872a=>_0x181173[_0x565534(0x89)]===_0x56872a[_0x565534(0xac)]);!_0x3db0de&&(this['sfLogger'][_0x565534(0xc3)](this[_0x565534(0xdf)]+_0x565534(0xc4)+_0x181173[_0x565534(0x89)]+_0x565534(0x97)),_0x3db0de=await this[_0x565534(0xe0)][_0x565534(0xb4)]({'name':_0x181173['repositoryName'],'autoInit':!![],'defaultBranch':_0x181173[_0x565534(0xa7)],'private':!![],'createHook':typedi_1['Container'][_0x565534(0x81)](providers_tokens_1['Tokens'][_0x565534(0x75)])[_0x565534(0xb5)]}));if(this[_0x565534(0x75)][_0x565534(0xb5)]){const _0x26185e=await _0x3db0de['hooks'][_0x565534(0xce)]();!_0x26185e[_0x565534(0xd0)](_0x2b3125=>_0x2b3125['url']===hooks_utils_1['HooksUtils'][_0x565534(0xae)](this[_0x565534(0x75)]['gitProvider'],this[_0x565534(0x75)][_0x565534(0x7c)],_0x48997a))&&(this[_0x565534(0x96)][_0x565534(0xc3)](this['prefix']+_0x565534(0xc4)+_0x181173['repositoryName']+'\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.'),await _0x3db0de[_0x565534(0xaa)]['create'](hooks_utils_1[_0x565534(0xd6)][_0x565534(0xb8)](this['config']['gitProvider'],_0x3db0de[_0x565534(0xaa)],this['config'][_0x565534(0x7c)],_0x48997a)));}return this['repoList'][_0x565534(0xbd)](_0x3db0de),_0x3db0de;}async[a111_0x56d2fb(0x73)](){const _0x467af0=a111_0x56d2fb;this[_0x467af0(0xd9)]=typedi_1[_0x467af0(0x84)][_0x467af0(0x81)](providers_tokens_1[_0x467af0(0xea)][_0x467af0(0xd9)]),this['repoService']=typedi_1[_0x467af0(0x84)][_0x467af0(0x81)](providers_tokens_1[_0x467af0(0xea)][_0x467af0(0x92)]),this[_0x467af0(0x75)]=typedi_1['Container']['get'](providers_tokens_1[_0x467af0(0xea)][_0x467af0(0x75)]),this[_0x467af0(0x96)]=typedi_1[_0x467af0(0x84)][_0x467af0(0x81)](providers_tokens_1['Tokens']['logger']),this[_0x467af0(0xdf)]='['+SyncService_1[_0x467af0(0xac)]+_0x467af0(0xd4)+this['config'][_0x467af0(0x7e)][_0x467af0(0xbe)]()+']',this['salesforceService'][_0x467af0(0xbb)](this[_0x467af0(0x96)]['getLoggerId']());try{this[_0x467af0(0x96)][_0x467af0(0xc3)](this[_0x467af0(0xdf)]+_0x467af0(0x95)),await this[_0x467af0(0x96)][_0x467af0(0xc3)](this[_0x467af0(0xdf)]+_0x467af0(0x8e))[_0x467af0(0xb3)]();const _0x541e48=await this['salesforceSync'][_0x467af0(0x7a)](typedi_1[_0x467af0(0x84)][_0x467af0(0x81)](providers_tokens_1[_0x467af0(0xea)][_0x467af0(0xd2)]));if(!_0x541e48[_0x467af0(0x99)])throw new bad_request_error_1[(_0x467af0(0xe4))](this[_0x467af0(0xdf)]+_0x467af0(0xec));await this[_0x467af0(0x96)][_0x467af0(0xc3)](this['prefix']+_0x467af0(0x88))[_0x467af0(0xb3)]();const _0x4f7bb7=await this['salesforceSync'][_0x467af0(0xdb)](_0x541e48['map'](_0x107594=>'\x27'+_0x107594[_0x467af0(0xa3)]+'\x27')[_0x467af0(0xd3)](','));await this['sfLogger'][_0x467af0(0xc3)](this['prefix']+_0x467af0(0xc0))[_0x467af0(0xb3)](),this[_0x467af0(0xbc)]=await this[_0x467af0(0xe0)][_0x467af0(0xce)]();const _0x203d5b=[..._0x541e48,..._0x4f7bb7];this[_0x467af0(0x96)][_0x467af0(0xc3)](this['prefix']+'\x20Have\x20to\x20synchronize\x20'+_0x203d5b['length']+_0x467af0(0xe2));for(const _0x4b71e7 of _0x203d5b){this[_0x467af0(0xda)]['log'](_0x467af0(0x8a)+_0x4b71e7[_0x467af0(0x89)]+'['+_0x4b71e7[_0x467af0(0xa3)]+']\x20repository\x20'+_0x4b71e7['branchName']+'['+_0x4b71e7[_0x467af0(0xc1)]+_0x467af0(0xf0)),this[_0x467af0(0x96)]['log'](this[_0x467af0(0xdf)]+_0x467af0(0x9d)+_0x4b71e7['repositoryName']+'\x22\x20branch:\x20\x22'+_0x4b71e7[_0x467af0(0xa7)]+'\x22.'),this[_0x467af0(0x96)][_0x467af0(0xc3)](this['prefix']+_0x467af0(0x74));const _0x20e308=await this['checkValidNaming'](_0x4b71e7);if(!_0x20e308)continue;this['sfLogger'][_0x467af0(0xc3)](this[_0x467af0(0xdf)]+'\x20Checking\x20intersects.');const _0x1055f4=await this[_0x467af0(0x9c)](_0x4b71e7);if(_0x1055f4)continue;await this[_0x467af0(0x96)][_0x467af0(0xb3)]();let _0x22c4fc;try{await this[_0x467af0(0x96)][_0x467af0(0xc3)](this[_0x467af0(0xdf)]+_0x467af0(0x9e))[_0x467af0(0xb3)](),_0x22c4fc=await this[_0x467af0(0xd8)](_0x4b71e7,typedi_1[_0x467af0(0x84)][_0x467af0(0x81)](providers_tokens_1[_0x467af0(0xea)]['connectionId']));}catch(_0x2dfd59){await this['handleRecordSyncError'](_0x4b71e7,_0x2dfd59 instanceof too_many_requests_error_1['TooManyRequests']?_0x2dfd59:new Error('[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20'+_0x2dfd59));continue;}await this['sfLogger']['log'](this[_0x467af0(0xdf)]+'\x20Completed\x20prepare\x20to\x20syncing.')[_0x467af0(0xb3)]();if(_0x4b71e7[_0x467af0(0x76)]===flosum_repository_sync_dto_1[_0x467af0(0xa5)][_0x467af0(0xed)]){const _0x34a370=typedi_1[_0x467af0(0x84)][_0x467af0(0x81)](flosum_sync_job_1['FlosumSyncJob']);await _0x34a370[_0x467af0(0x73)]({'repository':_0x22c4fc,'convertToSFDX':this['config'][_0x467af0(0x8b)],'syncRecord':_0x4b71e7,'provider':this[_0x467af0(0x75)]['gitProvider']})[_0x467af0(0x85)](_0x4ad827=>this[_0x467af0(0x83)](_0x4b71e7,_0x4ad827));}else{const _0xea7f8d=typedi_1[_0x467af0(0x84)]['get'](git_sync_job_1[_0x467af0(0x8f)]);await _0xea7f8d[_0x467af0(0x73)]({'repository':_0x22c4fc,'branch':_0x4b71e7[_0x467af0(0xa7)],'provider':this[_0x467af0(0x75)][_0x467af0(0x7e)],'repositoryGit':_0x22c4fc[_0x467af0(0xbf)],'syncRecord':_0x4b71e7})[_0x467af0(0x85)](_0x373174=>this['handleRecordSyncError'](_0x4b71e7,_0x373174));}}}catch(_0x242edc){this[_0x467af0(0xda)]['error'](_0x242edc);_0x242edc instanceof too_many_requests_error_1[_0x467af0(0x77)]?(await this[_0x467af0(0x96)][_0x467af0(0xc3)](this['prefix']+_0x467af0(0x80))[_0x467af0(0xb3)](),await(0x0,utils_1[_0x467af0(0xeb)])(0x3c*0x3c*0x3e8),this[_0x467af0(0x73)]()):await this[_0x467af0(0x96)][_0x467af0(0xa2)](this[_0x467af0(0xdf)]+'\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20'+_0x242edc)[_0x467af0(0xb3)]();return;}await this[_0x467af0(0x96)][_0x467af0(0xc3)](this[_0x467af0(0xdf)]+_0x467af0(0xb9))['send'](),await this[_0x467af0(0xe7)][_0x467af0(0xb2)](typedi_1['Container'][_0x467af0(0x81)](providers_tokens_1[_0x467af0(0xea)][_0x467af0(0xd2)]))[_0x467af0(0x85)](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a111_0x56d2fb(0xab),[salesforce_service_1['SalesforceService'],salesforce_sync_service_1['SalesforceSyncService']])],SyncService),exports[a111_0x56d2fb(0xba)]=SyncService;