function a128_0x299b(){const _0x26a52a=['getLoggerId','BadRequestError','../../providers/providers.tokens','../jobs/flosum-sync.job','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','logger','\x22\x20branch:\x20\x22','getHookLinkFor','decorate','\x20Getting\x20repository\x20records.','run','REPOSITORY_NAME_REGEXP','error','Unable\x20to\x20synchronize\x20repository\x20\x27','salesforceSync','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','map','SalesforceService','Error','hooks','TooManyRequests','../../salesforce/services/salesforce.service','../../../../constants','getBranchRecords','../../../../core/errors/too-many-requests.error','salesforceService','toUpperCase','isIntersects','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.','repoService','url','841110uAwSep','../../../shared/utils','prefix','send','setStatus','../../providers/web-hooks/hooks.utils','Unable\x20to\x20synchronize\x20branch\x20\x27','\x20No\x20repositories\x20to\x20sync.','repositoriesIntersections','object','Syncing\x20','1232398KMnRTA','catch','length','connectionId','\x27\x20in\x20repository\x20\x27','Container','\x20Repository\x20\x22','gitApiService','defineProperty','\x20Start\x20sync\x20job.','__decorate','25270100ctrpbj','name','repositoryId','\x20Stop\x20sync\x20job\x20for\x20\x27','repositoryName','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','metadata','applicationUrl','repoList','getOrCreateRepo','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','\x20Getting\x20repositories\x20from\x20git\x20service.','log','Service','isBidirectionalSynchronization','../../../../core/errors/bad-request.error','direction','gitRepoService','get','96035isftjB','push','SyncService','branchName','config','sfLogger','create','handleRecordSyncError','Logger','getRepositoryRecords','(((.+)+)+)+$','createHookPayload','getAll','function','HooksUtils',']\x20due\x20error\x20-\x20',']\x20branch.','Tokens','../jobs/git-sync.job','gitProvider','typedi','104bacKwl','find','Not\x20Synchronized','apply','4546624nnIVlt','7oqtaMQ','__metadata','sleep','disableSync','\x20Syncing\x20repository:\x20\x22','gitUrl','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','\x20Sync\x20job\x20done.','../../salesforce/dto/flosum-repository-sync.dto','search','\x20Getting\x20Flosum\x20repository','437364PgcfFV','SalesforceError','\x27\x20[','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','SalesforceSyncService','46oMjafJ','GitSyncJob','setLoggerId','\x20Getting\x20branch\x20records.','../errors/git-branch-not-found.error','FlosumToGit','189093gJFcdE','test','GitBranchNotFoundError','toString','Waiting','constructor'];a128_0x299b=function(){return _0x26a52a;};return a128_0x299b();}const a128_0x48ea4e=a128_0x50aa;(function(_0x26c612,_0x47cda8){const _0x3bb32c=a128_0x50aa,_0x5904fe=_0x26c612();while(!![]){try{const _0xfe0f6f=parseInt(_0x3bb32c(0xc5))/0x1+-parseInt(_0x3bb32c(0x10d))/0x2*(-parseInt(_0x3bb32c(0x95))/0x3)+parseInt(_0x3bb32c(0xfc))/0x4+parseInt(_0x3bb32c(0xe3))/0x5+parseInt(_0x3bb32c(0xba))/0x6*(parseInt(_0x3bb32c(0xfd))/0x7)+parseInt(_0x3bb32c(0xf8))/0x8*(-parseInt(_0x3bb32c(0x108))/0x9)+-parseInt(_0x3bb32c(0xd0))/0xa;if(_0xfe0f6f===_0x47cda8)break;else _0x5904fe['push'](_0x5904fe['shift']());}catch(_0x2cb839){_0x5904fe['push'](_0x5904fe['shift']());}}}(a128_0x299b,0xc80c9));function a128_0x50aa(_0x2423a7,_0x40993){const _0x1e604a=a128_0x299b();return a128_0x50aa=function(_0xf67ecd,_0x2ad090){_0xf67ecd=_0xf67ecd-0x95;let _0x299b89=_0x1e604a[_0xf67ecd];return _0x299b89;},a128_0x50aa(_0x2423a7,_0x40993);}const a128_0x2ad090=(function(){let _0x5b2939=!![];return function(_0x2c1ef3,_0x5dbd1c){const _0x62841a=_0x5b2939?function(){const _0x1ed500=a128_0x50aa;if(_0x5dbd1c){const _0x50367f=_0x5dbd1c[_0x1ed500(0xfb)](_0x2c1ef3,arguments);return _0x5dbd1c=null,_0x50367f;}}:function(){};return _0x5b2939=![],_0x62841a;};}()),a128_0xf67ecd=a128_0x2ad090(this,function(){const _0x45954f=a128_0x50aa;return a128_0xf67ecd[_0x45954f(0x98)]()[_0x45954f(0x106)](_0x45954f(0xed))[_0x45954f(0x98)]()[_0x45954f(0x9a)](a128_0xf67ecd)[_0x45954f(0x106)]('(((.+)+)+)+$');});a128_0xf67ecd();'use strict';var __decorate=this&&this[a128_0x48ea4e(0xcf)]||function(_0xaed579,_0x18b736,_0x2c5a83,_0x2905d6){const _0xedadbe=a128_0x48ea4e;var _0x2b6378=arguments['length'],_0xc16ef1=_0x2b6378<0x3?_0x18b736:_0x2905d6===null?_0x2905d6=Object['getOwnPropertyDescriptor'](_0x18b736,_0x2c5a83):_0x2905d6,_0x1609ce;if(typeof Reflect==='object'&&typeof Reflect[_0xedadbe(0xa3)]===_0xedadbe(0xf0))_0xc16ef1=Reflect[_0xedadbe(0xa3)](_0xaed579,_0x18b736,_0x2c5a83,_0x2905d6);else{for(var _0x456fb4=_0xaed579[_0xedadbe(0xc7)]-0x1;_0x456fb4>=0x0;_0x456fb4--)if(_0x1609ce=_0xaed579[_0x456fb4])_0xc16ef1=(_0x2b6378<0x3?_0x1609ce(_0xc16ef1):_0x2b6378>0x3?_0x1609ce(_0x18b736,_0x2c5a83,_0xc16ef1):_0x1609ce(_0x18b736,_0x2c5a83))||_0xc16ef1;}return _0x2b6378>0x3&&_0xc16ef1&&Object[_0xedadbe(0xcd)](_0x18b736,_0x2c5a83,_0xc16ef1),_0xc16ef1;},__metadata=this&&this[a128_0x48ea4e(0xfe)]||function(_0x2e844d,_0x3be001){const _0x57c7ed=a128_0x48ea4e;if(typeof Reflect===_0x57c7ed(0xc3)&&typeof Reflect[_0x57c7ed(0xd6)]===_0x57c7ed(0xf0))return Reflect[_0x57c7ed(0xd6)](_0x2e844d,_0x3be001);},SyncService_1;Object[a128_0x48ea4e(0xcd)](exports,'__esModule',{'value':!![]}),exports[a128_0x48ea4e(0xe5)]=void 0x0;const constants_1=require(a128_0x48ea4e(0xb1)),core_1=require('../../../../core'),too_many_requests_error_1=require(a128_0x48ea4e(0xb3)),flosum_repository_sync_dto_1=require(a128_0x48ea4e(0x105)),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a128_0x48ea4e(0xb0)),utils_1=require(a128_0x48ea4e(0xbb)),typedi_1=require(a128_0x48ea4e(0xf7)),hooks_utils_1=require(a128_0x48ea4e(0xbf)),git_branch_not_found_error_1=require(a128_0x48ea4e(0x111)),flosum_sync_job_1=require(a128_0x48ea4e(0x9e)),git_sync_job_1=require(a128_0x48ea4e(0xf5)),providers_tokens_1=require(a128_0x48ea4e(0x9d)),bad_request_error_1=require(a128_0x48ea4e(0xdf));let SyncService=SyncService_1=class SyncService{constructor(_0x2a4089,_0x560af4){const _0x113f5b=a128_0x48ea4e;this[_0x113f5b(0xb4)]=_0x2a4089,this[_0x113f5b(0xa9)]=_0x560af4,this['logger']=new core_1[(_0x113f5b(0xeb))](SyncService_1[_0x113f5b(0xd1)]),this[_0x113f5b(0xc2)]={},this[_0x113f5b(0xd8)]=[];}async[a128_0x48ea4e(0xea)](_0x2e080c,_0x269f2d){const _0x3f8986=a128_0x48ea4e;if(_0x269f2d instanceof git_branch_not_found_error_1[_0x3f8986(0x97)]){await this['salesforceSync'][_0x3f8986(0xbe)](_0x2e080c,_0x3f8986(0xfa));return;}if(_0x269f2d instanceof too_many_requests_error_1[_0x3f8986(0xaf)]){await this[_0x3f8986(0xa9)]['setStatus'](_0x2e080c,_0x3f8986(0x99));throw _0x269f2d;}try{await this[_0x3f8986(0xe8)][_0x3f8986(0xa7)](this['prefix']+_0x3f8986(0xd3)+_0x2e080c[_0x3f8986(0xd4)]+_0x3f8986(0x10a)+_0x2e080c['branchName']+_0x3f8986(0xf2)+_0x269f2d+'.')['send'](),await this[_0x3f8986(0xa9)]['updateRemoteState'](_0x2e080c,{}),await this[_0x3f8986(0xa9)]['setStatus'](_0x2e080c,_0x3f8986(0xad));}catch(_0x3b24c2){if(_0x3b24c2 instanceof salesforce_error_1[_0x3f8986(0x109)])throw _0x3b24c2;}}async[a128_0x48ea4e(0xb6)](_0x2bef62){const _0x5d4b11=a128_0x48ea4e;if(_0x2bef62[_0x5d4b11(0xd2)]){const _0x401fc6=_0x2bef62['repositoryName']['toLowerCase'](),_0x3db104=this['repositoriesIntersections'][_0x401fc6];if(!_0x3db104)this[_0x5d4b11(0xc2)][_0x401fc6]=_0x2bef62[_0x5d4b11(0xd4)];else{if(_0x3db104&&_0x3db104!==_0x2bef62[_0x5d4b11(0xd4)])return await this[_0x5d4b11(0xea)](_0x2bef62,new Error(_0x5d4b11(0xa8)+_0x2bef62[_0x5d4b11(0xd4)]+_0x5d4b11(0x103)+_0x401fc6+'\x27\x20-\x20\x27'+_0x3db104+'\x27')),!![];}}return![];}async['checkValidNaming'](_0x2a0afb){const _0x383300=a128_0x48ea4e;if(!constants_1[_0x383300(0xa6)][_0x383300(0x96)](_0x2a0afb['repositoryName']))return await this[_0x383300(0xea)](_0x2a0afb,new Error(_0x383300(0xa8)+_0x2a0afb['repositoryName']+_0x383300(0xd5))),![];if(!constants_1['BRANCH_NAME_REGEXP']['test'](_0x2a0afb[_0x383300(0xe6)]))return await this[_0x383300(0xea)](_0x2a0afb,new Error(_0x383300(0xc0)+_0x2a0afb[_0x383300(0xe6)]+_0x383300(0xc9)+_0x2a0afb[_0x383300(0xd4)]+_0x383300(0xda))),![];return!![];}async[a128_0x48ea4e(0xd9)](_0x50ab29,_0x58b811){const _0x3aa669=a128_0x48ea4e;let _0x4e8dd6=this[_0x3aa669(0xd8)][_0x3aa669(0xf9)](_0x23c357=>_0x50ab29[_0x3aa669(0xd4)]===_0x23c357[_0x3aa669(0xd1)]);!_0x4e8dd6&&(this[_0x3aa669(0xe8)][_0x3aa669(0xdc)](this[_0x3aa669(0xbc)]+_0x3aa669(0xcb)+_0x50ab29[_0x3aa669(0xd4)]+_0x3aa669(0x9f)),_0x4e8dd6=await this[_0x3aa669(0xb8)][_0x3aa669(0xe9)]({'name':_0x50ab29[_0x3aa669(0xd4)],'autoInit':!![],'defaultBranch':_0x50ab29[_0x3aa669(0xe6)],'private':!![],'createHook':typedi_1[_0x3aa669(0xca)][_0x3aa669(0xe2)](providers_tokens_1[_0x3aa669(0xf4)][_0x3aa669(0xe7)])[_0x3aa669(0xde)]}));if(this['config']['isBidirectionalSynchronization']){const _0xb9ba3c=await _0x4e8dd6['hooks'][_0x3aa669(0xef)]();!_0xb9ba3c[_0x3aa669(0xf9)](_0x351cc7=>_0x351cc7[_0x3aa669(0xb9)]===hooks_utils_1[_0x3aa669(0xf1)][_0x3aa669(0xa2)](this['config']['gitProvider'],this['config']['applicationUrl'],_0x58b811))&&(this[_0x3aa669(0xe8)][_0x3aa669(0xdc)](this[_0x3aa669(0xbc)]+_0x3aa669(0xcb)+_0x50ab29['repositoryName']+_0x3aa669(0xb7)),await _0x4e8dd6['hooks'][_0x3aa669(0xe9)](hooks_utils_1['HooksUtils'][_0x3aa669(0xee)](this[_0x3aa669(0xe7)][_0x3aa669(0xf6)],_0x4e8dd6[_0x3aa669(0xae)],this[_0x3aa669(0xe7)][_0x3aa669(0xd7)],_0x58b811)));}return this[_0x3aa669(0xd8)][_0x3aa669(0xe4)](_0x4e8dd6),_0x4e8dd6;}async[a128_0x48ea4e(0xa5)](){const _0x15dc9a=a128_0x48ea4e;this[_0x15dc9a(0xcc)]=typedi_1['Container'][_0x15dc9a(0xe2)](providers_tokens_1[_0x15dc9a(0xf4)][_0x15dc9a(0xcc)]),this['repoService']=typedi_1[_0x15dc9a(0xca)][_0x15dc9a(0xe2)](providers_tokens_1[_0x15dc9a(0xf4)][_0x15dc9a(0xe1)]),this['config']=typedi_1[_0x15dc9a(0xca)]['get'](providers_tokens_1[_0x15dc9a(0xf4)][_0x15dc9a(0xe7)]),this['sfLogger']=typedi_1['Container'][_0x15dc9a(0xe2)](providers_tokens_1[_0x15dc9a(0xf4)][_0x15dc9a(0xa0)]),this['prefix']='['+SyncService_1[_0x15dc9a(0xd1)]+']\x20['+this[_0x15dc9a(0xe7)][_0x15dc9a(0xf6)][_0x15dc9a(0xb5)]()+']',this[_0x15dc9a(0xb4)][_0x15dc9a(0x10f)](this[_0x15dc9a(0xe8)][_0x15dc9a(0x9b)]());try{this[_0x15dc9a(0xe8)][_0x15dc9a(0xdc)](this['prefix']+_0x15dc9a(0xce)),await this[_0x15dc9a(0xe8)][_0x15dc9a(0xdc)](this[_0x15dc9a(0xbc)]+_0x15dc9a(0xa4))[_0x15dc9a(0xbd)]();const _0x348eb1=await this[_0x15dc9a(0xa9)][_0x15dc9a(0xec)](typedi_1[_0x15dc9a(0xca)][_0x15dc9a(0xe2)](providers_tokens_1[_0x15dc9a(0xf4)]['connectionId']));if(!_0x348eb1['length'])throw new bad_request_error_1[(_0x15dc9a(0x9c))](this[_0x15dc9a(0xbc)]+_0x15dc9a(0xc1));await this[_0x15dc9a(0xe8)]['log'](this['prefix']+_0x15dc9a(0x110))[_0x15dc9a(0xbd)]();const _0x41a7d1=await this[_0x15dc9a(0xa9)][_0x15dc9a(0xb2)](_0x348eb1[_0x15dc9a(0xab)](_0x430adc=>'\x27'+_0x430adc[_0x15dc9a(0xd2)]+'\x27')['join'](','));await this['sfLogger'][_0x15dc9a(0xdc)](this[_0x15dc9a(0xbc)]+_0x15dc9a(0xdb))[_0x15dc9a(0xbd)](),this['repoList']=await this[_0x15dc9a(0xb8)]['getAll']();const _0x3f1821=[..._0x348eb1,..._0x41a7d1];this[_0x15dc9a(0xe8)]['log'](this[_0x15dc9a(0xbc)]+'\x20Have\x20to\x20synchronize\x20'+_0x3f1821['length']+'\x20branches.');for(const _0x434161 of _0x3f1821){this[_0x15dc9a(0xa0)][_0x15dc9a(0xdc)](_0x15dc9a(0xc4)+_0x434161[_0x15dc9a(0xd4)]+'['+_0x434161[_0x15dc9a(0xd2)]+']\x20repository\x20'+_0x434161[_0x15dc9a(0xe6)]+'['+_0x434161['branchId']+_0x15dc9a(0xf3)),this[_0x15dc9a(0xe8)][_0x15dc9a(0xdc)](this[_0x15dc9a(0xbc)]+_0x15dc9a(0x101)+_0x434161[_0x15dc9a(0xd4)]+_0x15dc9a(0xa1)+_0x434161[_0x15dc9a(0xe6)]+'\x22.'),this[_0x15dc9a(0xe8)][_0x15dc9a(0xdc)](this[_0x15dc9a(0xbc)]+'\x20Checking\x20valid\x20name.');const _0x47ab2f=await this['checkValidNaming'](_0x434161);if(!_0x47ab2f)continue;this[_0x15dc9a(0xe8)]['log'](this[_0x15dc9a(0xbc)]+'\x20Checking\x20intersects.');const _0x4b8c43=await this[_0x15dc9a(0xb6)](_0x434161);if(_0x4b8c43)continue;await this[_0x15dc9a(0xe8)][_0x15dc9a(0xbd)]();let _0x119cc2;try{await this['sfLogger'][_0x15dc9a(0xdc)](this['prefix']+_0x15dc9a(0x107))[_0x15dc9a(0xbd)](),_0x119cc2=await this[_0x15dc9a(0xd9)](_0x434161,typedi_1[_0x15dc9a(0xca)][_0x15dc9a(0xe2)](providers_tokens_1[_0x15dc9a(0xf4)]['connectionId']));}catch(_0x3dfbd8){await this['handleRecordSyncError'](_0x434161,_0x3dfbd8 instanceof too_many_requests_error_1[_0x15dc9a(0xaf)]?_0x3dfbd8:new Error(_0x15dc9a(0x10b)+_0x3dfbd8));continue;}await this['sfLogger'][_0x15dc9a(0xdc)](this['prefix']+'\x20Completed\x20prepare\x20to\x20syncing.')['send']();if(_0x434161[_0x15dc9a(0xe0)]===flosum_repository_sync_dto_1['SyncDirection'][_0x15dc9a(0x112)]){const _0x35b8b4=typedi_1['Container'][_0x15dc9a(0xe2)](flosum_sync_job_1['FlosumSyncJob']);await _0x35b8b4[_0x15dc9a(0xa5)]({'repository':_0x119cc2,'convertToSFDX':this[_0x15dc9a(0xe7)]['isConvertToSfdx'],'syncRecord':_0x434161,'provider':this[_0x15dc9a(0xe7)]['gitProvider']})[_0x15dc9a(0xc6)](_0x12bef6=>this[_0x15dc9a(0xea)](_0x434161,_0x12bef6));}else{const _0x4a6cc2=typedi_1['Container']['get'](git_sync_job_1[_0x15dc9a(0x10e)]);await _0x4a6cc2[_0x15dc9a(0xa5)]({'repository':_0x119cc2,'branch':_0x434161[_0x15dc9a(0xe6)],'provider':this[_0x15dc9a(0xe7)][_0x15dc9a(0xf6)],'repositoryGit':_0x119cc2[_0x15dc9a(0x102)],'syncRecord':_0x434161})[_0x15dc9a(0xc6)](_0x3efcd4=>this[_0x15dc9a(0xea)](_0x434161,_0x3efcd4));}}}catch(_0x1af3d9){this[_0x15dc9a(0xa0)][_0x15dc9a(0xa7)](_0x1af3d9);_0x1af3d9 instanceof too_many_requests_error_1[_0x15dc9a(0xaf)]?(await this[_0x15dc9a(0xe8)][_0x15dc9a(0xdc)](this[_0x15dc9a(0xbc)]+_0x15dc9a(0xaa))['send'](),await(0x0,utils_1[_0x15dc9a(0xff)])(0x3c*0x3c*0x3e8),this['run']()):await this[_0x15dc9a(0xe8)][_0x15dc9a(0xa7)](this[_0x15dc9a(0xbc)]+'\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20'+_0x1af3d9)[_0x15dc9a(0xbd)]();return;}await this[_0x15dc9a(0xe8)][_0x15dc9a(0xdc)](this[_0x15dc9a(0xbc)]+_0x15dc9a(0x104))[_0x15dc9a(0xbd)](),await this[_0x15dc9a(0xa9)][_0x15dc9a(0x100)](typedi_1[_0x15dc9a(0xca)][_0x15dc9a(0xe2)](providers_tokens_1[_0x15dc9a(0xf4)][_0x15dc9a(0xc8)]))['catch'](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1[a128_0x48ea4e(0xdd)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1[a128_0x48ea4e(0xac)],salesforce_sync_service_1[a128_0x48ea4e(0x10c)]])],SyncService),exports[a128_0x48ea4e(0xe5)]=SyncService;