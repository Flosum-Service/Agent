function a111_0x4931(){const _0x292e69=['setStatus','config','\x20Checking\x20intersects.','salesforceService','\x20Start\x20sync\x20job.','repositoryName','4059783eIcIjL','function','gitApiService','branchId','typedi','\x20Getting\x20repositories\x20from\x20git\x20service.','isBidirectionalSynchronization','search','../../salesforce/services/salesforce-sync.service','FlosumToGit','toUpperCase','17593780fNhVmG','isConvertToSfdx','__esModule','\x27\x20in\x20repository\x20\x27','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','SyncDirection','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','FlosumSyncJob','checkValidNaming','\x27\x20[','prefix','getBranchRecords','Unable\x20to\x20synchronize\x20repository\x20\x27','sleep','\x20Have\x20to\x20synchronize\x20','Tokens','length','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','\x20Sync\x20job\x20done.','toString','\x20Repository\x20\x22','9VzyFZW','../../salesforce/dto/flosum-repository-sync.dto','BRANCH_NAME_REGEXP','sfLogger','hooks','metadata','getOrCreateRepo','SalesforceService','gitRepoService','\x20Completed\x20prepare\x20to\x20syncing.','logger','203885TnfXEQ','__decorate','log','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','test','salesforceSync','name','\x20Checking\x20valid\x20name.','Logger','getAll','applicationUrl','isIntersects',']\x20repository\x20','repoService','Syncing\x20','getRepositoryRecords','find','repositoriesIntersections','getHookLinkFor','Service','HooksUtils','url','760566YKvwPq','\x20Getting\x20Flosum\x20repository','1098472GxSvOC',']\x20due\x20error\x20-\x20','3176QNxgOZ','setLoggerId','(((.+)+)+)+$','createHookPayload','\x27\x20-\x20\x27','BadRequestError','connectionId',']\x20[','\x20No\x20repositories\x20to\x20sync.','../jobs/flosum-sync.job','\x20Stop\x20sync\x20job\x20for\x20\x27','../../providers/web-hooks/hooks.utils','../../../../core','decorate','gitProvider','error','object','get','1026306UMATov','../../../../core/errors/bad-request.error','catch','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','\x20Getting\x20repository\x20records.','repoList','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','../jobs/git-sync.job','Waiting','21329YGRBiB','116NPYFVk','repositoryId','branchName','disableSync','design:paramtypes','gitUrl','handleRecordSyncError','send','push','\x20Getting\x20branch\x20records.','TooManyRequests','toLowerCase','../../salesforce/errors/salesforce.error','create','REPOSITORY_NAME_REGEXP','SyncService','apply','run','Container','map','../errors/git-branch-not-found.error'];a111_0x4931=function(){return _0x292e69;};return a111_0x4931();}const a111_0x4498df=a111_0x58d2;function a111_0x58d2(_0x2d9f9b,_0x5e5aef){const _0x406449=a111_0x4931();return a111_0x58d2=function(_0x1fa41e,_0x9bbd70){_0x1fa41e=_0x1fa41e-0xb5;let _0x49310a=_0x406449[_0x1fa41e];return _0x49310a;},a111_0x58d2(_0x2d9f9b,_0x5e5aef);}(function(_0x427ed9,_0x442712){const _0x15b7e1=a111_0x58d2,_0x208ae0=_0x427ed9();while(!![]){try{const _0x155051=parseInt(_0x15b7e1(0x107))/0x1+-parseInt(_0x15b7e1(0x109))/0x2+-parseInt(_0x15b7e1(0xc6))/0x3+-parseInt(_0x15b7e1(0x127))/0x4*(-parseInt(_0x15b7e1(0xf1))/0x5)+parseInt(_0x15b7e1(0x11d))/0x6+-parseInt(_0x15b7e1(0x126))/0x7*(parseInt(_0x15b7e1(0x10b))/0x8)+parseInt(_0x15b7e1(0xe6))/0x9*(parseInt(_0x15b7e1(0xd1))/0xa);if(_0x155051===_0x442712)break;else _0x208ae0['push'](_0x208ae0['shift']());}catch(_0x3ac351){_0x208ae0['push'](_0x208ae0['shift']());}}}(a111_0x4931,0xb9e1c));const a111_0x9bbd70=(function(){let _0x2c51de=!![];return function(_0x509520,_0x3bf57e){const _0x1b249e=_0x2c51de?function(){const _0x385025=a111_0x58d2;if(_0x3bf57e){const _0x4f03ef=_0x3bf57e[_0x385025(0xbb)](_0x509520,arguments);return _0x3bf57e=null,_0x4f03ef;}}:function(){};return _0x2c51de=![],_0x1b249e;};}()),a111_0x1fa41e=a111_0x9bbd70(this,function(){const _0x588040=a111_0x58d2;return a111_0x1fa41e['toString']()[_0x588040(0xcd)](_0x588040(0x10d))[_0x588040(0xe4)]()['constructor'](a111_0x1fa41e)[_0x588040(0xcd)](_0x588040(0x10d));});a111_0x1fa41e();'use strict';var __decorate=this&&this[a111_0x4498df(0xf2)]||function(_0x49df10,_0x3d800c,_0x285425,_0x8c54c8){const _0x16e4a1=a111_0x4498df;var _0x32d1a6=arguments[_0x16e4a1(0xe1)],_0x49f10f=_0x32d1a6<0x3?_0x3d800c:_0x8c54c8===null?_0x8c54c8=Object['getOwnPropertyDescriptor'](_0x3d800c,_0x285425):_0x8c54c8,_0x13cf00;if(typeof Reflect===_0x16e4a1(0x11b)&&typeof Reflect[_0x16e4a1(0x118)]===_0x16e4a1(0xc7))_0x49f10f=Reflect[_0x16e4a1(0x118)](_0x49df10,_0x3d800c,_0x285425,_0x8c54c8);else{for(var _0x457bef=_0x49df10['length']-0x1;_0x457bef>=0x0;_0x457bef--)if(_0x13cf00=_0x49df10[_0x457bef])_0x49f10f=(_0x32d1a6<0x3?_0x13cf00(_0x49f10f):_0x32d1a6>0x3?_0x13cf00(_0x3d800c,_0x285425,_0x49f10f):_0x13cf00(_0x3d800c,_0x285425))||_0x49f10f;}return _0x32d1a6>0x3&&_0x49f10f&&Object['defineProperty'](_0x3d800c,_0x285425,_0x49f10f),_0x49f10f;},__metadata=this&&this['__metadata']||function(_0x2c887b,_0x5cc170){const _0x42153f=a111_0x4498df;if(typeof Reflect===_0x42153f(0x11b)&&typeof Reflect['metadata']===_0x42153f(0xc7))return Reflect[_0x42153f(0xeb)](_0x2c887b,_0x5cc170);},SyncService_1;Object['defineProperty'](exports,a111_0x4498df(0xd3),{'value':!![]}),exports[a111_0x4498df(0xba)]=void 0x0;const constants_1=require('../../../../constants'),core_1=require(a111_0x4498df(0x117)),too_many_requests_error_1=require('../../../../core/errors/too-many-requests.error'),flosum_repository_sync_dto_1=require(a111_0x4498df(0xe7)),salesforce_error_1=require(a111_0x4498df(0xb7)),salesforce_sync_service_1=require(a111_0x4498df(0xce)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),utils_1=require('../../../shared/utils'),typedi_1=require(a111_0x4498df(0xca)),hooks_utils_1=require(a111_0x4498df(0x116)),git_branch_not_found_error_1=require(a111_0x4498df(0xbf)),flosum_sync_job_1=require(a111_0x4498df(0x114)),git_sync_job_1=require(a111_0x4498df(0x124)),providers_tokens_1=require('../../providers/providers.tokens'),bad_request_error_1=require(a111_0x4498df(0x11e));let SyncService=SyncService_1=class SyncService{constructor(_0x16f662,_0x22d9a3){const _0x2fa89d=a111_0x4498df;this[_0x2fa89d(0xc3)]=_0x16f662,this[_0x2fa89d(0xf6)]=_0x22d9a3,this[_0x2fa89d(0xf0)]=new core_1[(_0x2fa89d(0xf9))](SyncService_1[_0x2fa89d(0xf7)]),this[_0x2fa89d(0x102)]={},this[_0x2fa89d(0x122)]=[];}async[a111_0x4498df(0x12d)](_0x2e2684,_0x4360c4){const _0x7be2c0=a111_0x4498df;if(_0x4360c4 instanceof git_branch_not_found_error_1['GitBranchNotFoundError']){await this[_0x7be2c0(0xf6)][_0x7be2c0(0xc0)](_0x2e2684,'Not\x20Synchronized');return;}if(_0x4360c4 instanceof too_many_requests_error_1[_0x7be2c0(0xb5)]){await this[_0x7be2c0(0xf6)]['setStatus'](_0x2e2684,_0x7be2c0(0x125));throw _0x4360c4;}try{await this[_0x7be2c0(0xe9)][_0x7be2c0(0x11a)](this[_0x7be2c0(0xdb)]+_0x7be2c0(0x115)+_0x2e2684[_0x7be2c0(0xc5)]+_0x7be2c0(0xda)+_0x2e2684['branchName']+_0x7be2c0(0x10a)+_0x4360c4+'.')[_0x7be2c0(0x12e)](),await this[_0x7be2c0(0xf6)]['updateRemoteState'](_0x2e2684,{}),await this[_0x7be2c0(0xf6)]['setStatus'](_0x2e2684,'Error');}catch(_0x4fa13d){if(_0x4fa13d instanceof salesforce_error_1['SalesforceError'])throw _0x4fa13d;}}async['isIntersects'](_0x443c39){const _0x78c4fc=a111_0x4498df;if(_0x443c39[_0x78c4fc(0x128)]){const _0x4327c3=_0x443c39[_0x78c4fc(0xc5)][_0x78c4fc(0xb6)](),_0x380f4e=this[_0x78c4fc(0x102)][_0x4327c3];if(!_0x380f4e)this['repositoriesIntersections'][_0x4327c3]=_0x443c39[_0x78c4fc(0xc5)];else{if(_0x380f4e&&_0x380f4e!==_0x443c39[_0x78c4fc(0xc5)])return await this[_0x78c4fc(0x12d)](_0x443c39,new Error(_0x78c4fc(0xdd)+_0x443c39[_0x78c4fc(0xc5)]+_0x78c4fc(0xe2)+_0x4327c3+_0x78c4fc(0x10f)+_0x380f4e+'\x27')),!![];}}return![];}async[a111_0x4498df(0xd9)](_0x26a62b){const _0x4f7005=a111_0x4498df;if(!constants_1[_0x4f7005(0xb9)][_0x4f7005(0xf5)](_0x26a62b['repositoryName']))return await this[_0x4f7005(0x12d)](_0x26a62b,new Error(_0x4f7005(0xdd)+_0x26a62b[_0x4f7005(0xc5)]+_0x4f7005(0x120))),![];if(!constants_1[_0x4f7005(0xe8)][_0x4f7005(0xf5)](_0x26a62b[_0x4f7005(0x129)]))return await this[_0x4f7005(0x12d)](_0x26a62b,new Error('Unable\x20to\x20synchronize\x20branch\x20\x27'+_0x26a62b['branchName']+_0x4f7005(0xd4)+_0x26a62b[_0x4f7005(0xc5)]+_0x4f7005(0xd5))),![];return!![];}async[a111_0x4498df(0xec)](_0x4a8f7d,_0x5d97e3){const _0xfc4ea6=a111_0x4498df;let _0x2c29b9=this[_0xfc4ea6(0x122)]['find'](_0x265f9e=>_0x4a8f7d[_0xfc4ea6(0xc5)]===_0x265f9e[_0xfc4ea6(0xf7)]);!_0x2c29b9&&(this[_0xfc4ea6(0xe9)][_0xfc4ea6(0xf3)](this['prefix']+_0xfc4ea6(0xe5)+_0x4a8f7d[_0xfc4ea6(0xc5)]+_0xfc4ea6(0x123)),_0x2c29b9=await this[_0xfc4ea6(0xfe)]['create']({'name':_0x4a8f7d[_0xfc4ea6(0xc5)],'autoInit':!![],'defaultBranch':_0x4a8f7d[_0xfc4ea6(0x129)],'private':!![],'createHook':typedi_1['Container'][_0xfc4ea6(0x11c)](providers_tokens_1[_0xfc4ea6(0xe0)][_0xfc4ea6(0xc1)])[_0xfc4ea6(0xcc)]}));if(this[_0xfc4ea6(0xc1)][_0xfc4ea6(0xcc)]){const _0x5abfa1=await _0x2c29b9[_0xfc4ea6(0xea)]['getAll']();!_0x5abfa1[_0xfc4ea6(0x101)](_0x23b3bc=>_0x23b3bc[_0xfc4ea6(0x106)]===hooks_utils_1[_0xfc4ea6(0x105)][_0xfc4ea6(0x103)](this[_0xfc4ea6(0xc1)][_0xfc4ea6(0x119)],this[_0xfc4ea6(0xc1)][_0xfc4ea6(0xfb)],_0x5d97e3))&&(this['sfLogger'][_0xfc4ea6(0xf3)](this[_0xfc4ea6(0xdb)]+_0xfc4ea6(0xe5)+_0x4a8f7d[_0xfc4ea6(0xc5)]+'\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.'),await _0x2c29b9[_0xfc4ea6(0xea)][_0xfc4ea6(0xb8)](hooks_utils_1[_0xfc4ea6(0x105)][_0xfc4ea6(0x10e)](this[_0xfc4ea6(0xc1)][_0xfc4ea6(0x119)],_0x2c29b9['hooks'],this[_0xfc4ea6(0xc1)][_0xfc4ea6(0xfb)],_0x5d97e3)));}return this[_0xfc4ea6(0x122)][_0xfc4ea6(0x12f)](_0x2c29b9),_0x2c29b9;}async[a111_0x4498df(0xbc)](){const _0x22bef3=a111_0x4498df;this[_0x22bef3(0xc8)]=typedi_1[_0x22bef3(0xbd)]['get'](providers_tokens_1[_0x22bef3(0xe0)][_0x22bef3(0xc8)]),this['repoService']=typedi_1[_0x22bef3(0xbd)][_0x22bef3(0x11c)](providers_tokens_1[_0x22bef3(0xe0)][_0x22bef3(0xee)]),this['config']=typedi_1['Container']['get'](providers_tokens_1[_0x22bef3(0xe0)][_0x22bef3(0xc1)]),this[_0x22bef3(0xe9)]=typedi_1[_0x22bef3(0xbd)]['get'](providers_tokens_1[_0x22bef3(0xe0)][_0x22bef3(0xf0)]),this[_0x22bef3(0xdb)]='['+SyncService_1[_0x22bef3(0xf7)]+_0x22bef3(0x112)+this[_0x22bef3(0xc1)]['gitProvider'][_0x22bef3(0xd0)]()+']',this[_0x22bef3(0xc3)][_0x22bef3(0x10c)](this[_0x22bef3(0xe9)]['getLoggerId']());try{this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+_0x22bef3(0xc4)),await this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this['prefix']+_0x22bef3(0x121))[_0x22bef3(0x12e)]();const _0x7f2131=await this[_0x22bef3(0xf6)][_0x22bef3(0x100)](typedi_1[_0x22bef3(0xbd)][_0x22bef3(0x11c)](providers_tokens_1[_0x22bef3(0xe0)][_0x22bef3(0x111)]));if(!_0x7f2131[_0x22bef3(0xe1)])throw new bad_request_error_1[(_0x22bef3(0x110))](this['prefix']+_0x22bef3(0x113));await this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+_0x22bef3(0x130))[_0x22bef3(0x12e)]();const _0x4b19f1=await this['salesforceSync'][_0x22bef3(0xdc)](_0x7f2131[_0x22bef3(0xbe)](_0x2d8930=>'\x27'+_0x2d8930[_0x22bef3(0x128)]+'\x27')['join'](','));await this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+_0x22bef3(0xcb))[_0x22bef3(0x12e)](),this[_0x22bef3(0x122)]=await this[_0x22bef3(0xfe)][_0x22bef3(0xfa)]();const _0x4638a5=[..._0x7f2131,..._0x4b19f1];this['sfLogger'][_0x22bef3(0xf3)](this['prefix']+_0x22bef3(0xdf)+_0x4638a5['length']+'\x20branches.');for(const _0x53758d of _0x4638a5){this[_0x22bef3(0xf0)][_0x22bef3(0xf3)](_0x22bef3(0xff)+_0x53758d['repositoryName']+'['+_0x53758d[_0x22bef3(0x128)]+_0x22bef3(0xfd)+_0x53758d[_0x22bef3(0x129)]+'['+_0x53758d[_0x22bef3(0xc9)]+']\x20branch.'),this['sfLogger'][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+'\x20Syncing\x20repository:\x20\x22'+_0x53758d[_0x22bef3(0xc5)]+'\x22\x20branch:\x20\x22'+_0x53758d[_0x22bef3(0x129)]+'\x22.'),this['sfLogger']['log'](this[_0x22bef3(0xdb)]+_0x22bef3(0xf8));const _0x4d8199=await this[_0x22bef3(0xd9)](_0x53758d);if(!_0x4d8199)continue;this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+_0x22bef3(0xc2));const _0x5dcb44=await this[_0x22bef3(0xfc)](_0x53758d);if(_0x5dcb44)continue;await this[_0x22bef3(0xe9)][_0x22bef3(0x12e)]();let _0x3d0371;try{await this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+_0x22bef3(0x108))['send'](),_0x3d0371=await this['getOrCreateRepo'](_0x53758d,typedi_1['Container']['get'](providers_tokens_1[_0x22bef3(0xe0)]['connectionId']));}catch(_0x37c4cc){await this[_0x22bef3(0x12d)](_0x53758d,_0x37c4cc instanceof too_many_requests_error_1[_0x22bef3(0xb5)]?_0x37c4cc:new Error(_0x22bef3(0xf4)+_0x37c4cc));continue;}await this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+_0x22bef3(0xef))['send']();if(_0x53758d['direction']===flosum_repository_sync_dto_1[_0x22bef3(0xd6)][_0x22bef3(0xcf)]){const _0x210fef=typedi_1[_0x22bef3(0xbd)][_0x22bef3(0x11c)](flosum_sync_job_1[_0x22bef3(0xd8)]);await _0x210fef[_0x22bef3(0xbc)]({'repository':_0x3d0371,'convertToSFDX':this[_0x22bef3(0xc1)][_0x22bef3(0xd2)],'syncRecord':_0x53758d,'provider':this[_0x22bef3(0xc1)][_0x22bef3(0x119)]})[_0x22bef3(0x11f)](_0x33ea33=>this[_0x22bef3(0x12d)](_0x53758d,_0x33ea33));}else{const _0x4c02f0=typedi_1[_0x22bef3(0xbd)]['get'](git_sync_job_1['GitSyncJob']);await _0x4c02f0[_0x22bef3(0xbc)]({'repository':_0x3d0371,'branch':_0x53758d[_0x22bef3(0x129)],'provider':this['config'][_0x22bef3(0x119)],'repositoryGit':_0x3d0371[_0x22bef3(0x12c)],'syncRecord':_0x53758d})[_0x22bef3(0x11f)](_0x4379c3=>this[_0x22bef3(0x12d)](_0x53758d,_0x4379c3));}}}catch(_0x1a828b){this['logger']['error'](_0x1a828b);_0x1a828b instanceof too_many_requests_error_1[_0x22bef3(0xb5)]?(await this['sfLogger']['log'](this[_0x22bef3(0xdb)]+_0x22bef3(0xd7))['send'](),await(0x0,utils_1[_0x22bef3(0xde)])(0x3c*0x3c*0x3e8),this['run']()):await this[_0x22bef3(0xe9)][_0x22bef3(0x11a)](this[_0x22bef3(0xdb)]+'\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20'+_0x1a828b)[_0x22bef3(0x12e)]();return;}await this[_0x22bef3(0xe9)][_0x22bef3(0xf3)](this[_0x22bef3(0xdb)]+_0x22bef3(0xe3))[_0x22bef3(0x12e)](),await this[_0x22bef3(0xf6)][_0x22bef3(0x12a)](typedi_1[_0x22bef3(0xbd)]['get'](providers_tokens_1['Tokens'][_0x22bef3(0x111)]))[_0x22bef3(0x11f)](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1[a111_0x4498df(0x104)])({'transient':!![]}),__metadata(a111_0x4498df(0x12b),[salesforce_service_1[a111_0x4498df(0xed)],salesforce_sync_service_1['SalesforceSyncService']])],SyncService),exports[a111_0x4498df(0xba)]=SyncService;