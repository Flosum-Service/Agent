function a111_0x3aac(){const _0xa1a56f=['find','254570FsfSgA','77delaIx','applicationUrl','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','name','handleRecordSyncError','REPOSITORY_NAME_REGEXP','toString','salesforceService','192NepSuK','4498910aWWZVh','error','push','isConvertToSfdx','branchName','Container','149102hiGdNf','design:paramtypes','../jobs/git-sync.job','Logger','catch','../../salesforce/services/salesforce.service','branchId','\x20Getting\x20Flosum\x20repository','setStatus','../errors/git-branch-not-found.error','../../salesforce/dto/flosum-repository-sync.dto','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','\x27\x20-\x20\x27','typedi','gitProvider','Unable\x20to\x20synchronize\x20repository\x20\x27','logger','url','SalesforceService','hooks','gitApiService','\x27\x20[',']\x20branch.','test','metadata','setLoggerId','defineProperty','repoService','repositoryName','1229268OwJktE','repositoriesIntersections','function','prefix','isBidirectionalSynchronization','log','Tokens','\x20Syncing\x20repository:\x20\x22','\x20Checking\x20intersects.','../../../../core','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','direction','(((.+)+)+)+$','../../salesforce/errors/salesforce.error','checkValidNaming','create','sfLogger','isIntersects','length','../../providers/providers.tokens','connectionId','../../salesforce/services/salesforce-sync.service','SalesforceSyncService','join','\x20Stop\x20sync\x20job\x20for\x20\x27','get','decorate','../jobs/flosum-sync.job','FlosumSyncJob','gitRepoService','\x20Have\x20to\x20synchronize\x20','SalesforceError','repositoryId','sleep','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','run','20685IGPXXR','__metadata','getRepositoryRecords','updateRemoteState','TooManyRequests','1003956iTMyCL','15OvPtbs','../../providers/web-hooks/hooks.utils','9oKKnHw','config','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.','getOrCreateRepo','\x20Getting\x20branch\x20records.','getAll','425870MSQNSr','\x20Getting\x20repository\x20records.','salesforceSync','send','SyncService','\x20Getting\x20repositories\x20from\x20git\x20service.','repoList','GitSyncJob','search','60efDSLt','../../../../core/errors/too-many-requests.error','HooksUtils','GitBranchNotFoundError',']\x20repository\x20'];a111_0x3aac=function(){return _0xa1a56f;};return a111_0x3aac();}const a111_0x131ab7=a111_0x1729;(function(_0x432665,_0x2cf567){const _0x20bafe=a111_0x1729,_0x4c7c7c=_0x432665();while(!![]){try{const _0xf4ae81=parseInt(_0x20bafe(0x13e))/0x1+parseInt(_0x20bafe(0x15d))/0x2*(-parseInt(_0x20bafe(0x136))/0x3)+-parseInt(_0x20bafe(0x147))/0x4*(-parseInt(_0x20bafe(0x14d))/0x5)+-parseInt(_0x20bafe(0x17a))/0x6+-parseInt(_0x20bafe(0x130))/0x7*(parseInt(_0x20bafe(0x156))/0x8)+parseInt(_0x20bafe(0x138))/0x9*(parseInt(_0x20bafe(0x157))/0xa)+-parseInt(_0x20bafe(0x14e))/0xb*(parseInt(_0x20bafe(0x135))/0xc);if(_0xf4ae81===_0x2cf567)break;else _0x4c7c7c['push'](_0x4c7c7c['shift']());}catch(_0x7ea015){_0x4c7c7c['push'](_0x4c7c7c['shift']());}}}(a111_0x3aac,0x62f1d));const a111_0x1c2ba5=(function(){let _0x55c3ba=!![];return function(_0x122d8e,_0x3bc1a9){const _0x4a1936=_0x55c3ba?function(){if(_0x3bc1a9){const _0x3e7f5f=_0x3bc1a9['apply'](_0x122d8e,arguments);return _0x3bc1a9=null,_0x3e7f5f;}}:function(){};return _0x55c3ba=![],_0x4a1936;};}()),a111_0x3311b1=a111_0x1c2ba5(this,function(){const _0x1e7b0e=a111_0x1729;return a111_0x3311b1[_0x1e7b0e(0x154)]()[_0x1e7b0e(0x146)](_0x1e7b0e(0x186))[_0x1e7b0e(0x154)]()['constructor'](a111_0x3311b1)[_0x1e7b0e(0x146)](_0x1e7b0e(0x186));});a111_0x3311b1();'use strict';var __decorate=this&&this['__decorate']||function(_0x10e676,_0xeefe48,_0x1ab61b,_0x32343f){const _0x31f023=a111_0x1729;var _0x57f5a9=arguments['length'],_0x1476f8=_0x57f5a9<0x3?_0xeefe48:_0x32343f===null?_0x32343f=Object['getOwnPropertyDescriptor'](_0xeefe48,_0x1ab61b):_0x32343f,_0x55635e;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x31f023(0x17c))_0x1476f8=Reflect[_0x31f023(0x194)](_0x10e676,_0xeefe48,_0x1ab61b,_0x32343f);else{for(var _0x117670=_0x10e676[_0x31f023(0x18c)]-0x1;_0x117670>=0x0;_0x117670--)if(_0x55635e=_0x10e676[_0x117670])_0x1476f8=(_0x57f5a9<0x3?_0x55635e(_0x1476f8):_0x57f5a9>0x3?_0x55635e(_0xeefe48,_0x1ab61b,_0x1476f8):_0x55635e(_0xeefe48,_0x1ab61b))||_0x1476f8;}return _0x57f5a9>0x3&&_0x1476f8&&Object[_0x31f023(0x177)](_0xeefe48,_0x1ab61b,_0x1476f8),_0x1476f8;},__metadata=this&&this[a111_0x131ab7(0x131)]||function(_0x37a149,_0x514ba0){const _0x3ad529=a111_0x131ab7;if(typeof Reflect==='object'&&typeof Reflect[_0x3ad529(0x175)]===_0x3ad529(0x17c))return Reflect['metadata'](_0x37a149,_0x514ba0);},SyncService_1;Object[a111_0x131ab7(0x177)](exports,'__esModule',{'value':!![]}),exports[a111_0x131ab7(0x142)]=void 0x0;const constants_1=require('../../../../constants'),core_1=require(a111_0x131ab7(0x183)),too_many_requests_error_1=require(a111_0x131ab7(0x148)),flosum_repository_sync_dto_1=require(a111_0x131ab7(0x167)),salesforce_error_1=require(a111_0x131ab7(0x187)),salesforce_sync_service_1=require(a111_0x131ab7(0x18f)),salesforce_service_1=require(a111_0x131ab7(0x162)),utils_1=require('../../../shared/utils'),typedi_1=require(a111_0x131ab7(0x16a)),hooks_utils_1=require(a111_0x131ab7(0x137)),git_branch_not_found_error_1=require(a111_0x131ab7(0x166)),flosum_sync_job_1=require(a111_0x131ab7(0x195)),git_sync_job_1=require(a111_0x131ab7(0x15f)),providers_tokens_1=require(a111_0x131ab7(0x18d)),bad_request_error_1=require('../../../../core/errors/bad-request.error');function a111_0x1729(_0x32e925,_0x5537fa){const _0x3b022d=a111_0x3aac();return a111_0x1729=function(_0x3311b1,_0x1c2ba5){_0x3311b1=_0x3311b1-0x12b;let _0x3aac58=_0x3b022d[_0x3311b1];return _0x3aac58;},a111_0x1729(_0x32e925,_0x5537fa);}let SyncService=SyncService_1=class SyncService{constructor(_0x4e1d4d,_0x43aeeb){const _0x5ce15f=a111_0x131ab7;this[_0x5ce15f(0x155)]=_0x4e1d4d,this['salesforceSync']=_0x43aeeb,this['logger']=new core_1[(_0x5ce15f(0x160))](SyncService_1[_0x5ce15f(0x151)]),this[_0x5ce15f(0x17b)]={},this[_0x5ce15f(0x144)]=[];}async[a111_0x131ab7(0x152)](_0x9924bb,_0x55431e){const _0x44f1ea=a111_0x131ab7;if(_0x55431e instanceof git_branch_not_found_error_1[_0x44f1ea(0x14a)]){await this[_0x44f1ea(0x140)][_0x44f1ea(0x165)](_0x9924bb,'Not\x20Synchronized');return;}if(_0x55431e instanceof too_many_requests_error_1[_0x44f1ea(0x134)]){await this['salesforceSync'][_0x44f1ea(0x165)](_0x9924bb,'Waiting');throw _0x55431e;}try{await this[_0x44f1ea(0x18a)][_0x44f1ea(0x158)](this[_0x44f1ea(0x17d)]+_0x44f1ea(0x192)+_0x9924bb['repositoryName']+_0x44f1ea(0x172)+_0x9924bb['branchName']+']\x20due\x20error\x20-\x20'+_0x55431e+'.')['send'](),await this[_0x44f1ea(0x140)][_0x44f1ea(0x133)](_0x9924bb,{}),await this[_0x44f1ea(0x140)][_0x44f1ea(0x165)](_0x9924bb,'Error');}catch(_0x2a1d34){if(_0x2a1d34 instanceof salesforce_error_1[_0x44f1ea(0x12b)])throw _0x2a1d34;}}async['isIntersects'](_0x18cc8c){const _0x2e4420=a111_0x131ab7;if(_0x18cc8c[_0x2e4420(0x12c)]){const _0x657f02=_0x18cc8c['repositoryName']['toLowerCase'](),_0x36d4b5=this[_0x2e4420(0x17b)][_0x657f02];if(!_0x36d4b5)this[_0x2e4420(0x17b)][_0x657f02]=_0x18cc8c[_0x2e4420(0x179)];else{if(_0x36d4b5&&_0x36d4b5!==_0x18cc8c[_0x2e4420(0x179)])return await this[_0x2e4420(0x152)](_0x18cc8c,new Error(_0x2e4420(0x16c)+_0x18cc8c[_0x2e4420(0x179)]+_0x2e4420(0x150)+_0x657f02+_0x2e4420(0x169)+_0x36d4b5+'\x27')),!![];}}return![];}async[a111_0x131ab7(0x188)](_0x1aeedc){const _0x442498=a111_0x131ab7;if(!constants_1[_0x442498(0x153)]['test'](_0x1aeedc[_0x442498(0x179)]))return await this['handleRecordSyncError'](_0x1aeedc,new Error(_0x442498(0x16c)+_0x1aeedc[_0x442498(0x179)]+_0x442498(0x168))),![];if(!constants_1['BRANCH_NAME_REGEXP'][_0x442498(0x174)](_0x1aeedc[_0x442498(0x15b)]))return await this[_0x442498(0x152)](_0x1aeedc,new Error('Unable\x20to\x20synchronize\x20branch\x20\x27'+_0x1aeedc[_0x442498(0x15b)]+'\x27\x20in\x20repository\x20\x27'+_0x1aeedc[_0x442498(0x179)]+'\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.')),![];return!![];}async['getOrCreateRepo'](_0x1bcbba,_0x144c9d){const _0x46396b=a111_0x131ab7;let _0x566a5f=this[_0x46396b(0x144)][_0x46396b(0x14c)](_0x537d82=>_0x1bcbba['repositoryName']===_0x537d82[_0x46396b(0x151)]);!_0x566a5f&&(this[_0x46396b(0x18a)][_0x46396b(0x17f)](this['prefix']+'\x20Repository\x20\x22'+_0x1bcbba['repositoryName']+'\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.'),_0x566a5f=await this[_0x46396b(0x178)][_0x46396b(0x189)]({'name':_0x1bcbba['repositoryName'],'autoInit':!![],'defaultBranch':_0x1bcbba[_0x46396b(0x15b)],'private':!![],'createHook':typedi_1[_0x46396b(0x15c)][_0x46396b(0x193)](providers_tokens_1[_0x46396b(0x180)][_0x46396b(0x139)])[_0x46396b(0x17e)]}));if(this[_0x46396b(0x139)][_0x46396b(0x17e)]){const _0x2a22ff=await _0x566a5f[_0x46396b(0x170)][_0x46396b(0x13d)]();!_0x2a22ff[_0x46396b(0x14c)](_0x3a5ada=>_0x3a5ada[_0x46396b(0x16e)]===hooks_utils_1[_0x46396b(0x149)]['getHookLinkFor'](this[_0x46396b(0x139)][_0x46396b(0x16b)],this['config'][_0x46396b(0x14f)],_0x144c9d))&&(this[_0x46396b(0x18a)][_0x46396b(0x17f)](this[_0x46396b(0x17d)]+'\x20Repository\x20\x22'+_0x1bcbba[_0x46396b(0x179)]+_0x46396b(0x13a)),await _0x566a5f['hooks'][_0x46396b(0x189)](hooks_utils_1[_0x46396b(0x149)]['createHookPayload'](this['config'][_0x46396b(0x16b)],_0x566a5f[_0x46396b(0x170)],this[_0x46396b(0x139)][_0x46396b(0x14f)],_0x144c9d)));}return this['repoList'][_0x46396b(0x159)](_0x566a5f),_0x566a5f;}async[a111_0x131ab7(0x12f)](){const _0x4456f9=a111_0x131ab7;this['gitApiService']=typedi_1[_0x4456f9(0x15c)][_0x4456f9(0x193)](providers_tokens_1[_0x4456f9(0x180)][_0x4456f9(0x171)]),this[_0x4456f9(0x178)]=typedi_1['Container'][_0x4456f9(0x193)](providers_tokens_1[_0x4456f9(0x180)][_0x4456f9(0x197)]),this[_0x4456f9(0x139)]=typedi_1['Container'][_0x4456f9(0x193)](providers_tokens_1['Tokens'][_0x4456f9(0x139)]),this[_0x4456f9(0x18a)]=typedi_1[_0x4456f9(0x15c)]['get'](providers_tokens_1[_0x4456f9(0x180)][_0x4456f9(0x16d)]),this[_0x4456f9(0x17d)]='['+SyncService_1[_0x4456f9(0x151)]+']\x20['+this['config']['gitProvider']['toUpperCase']()+']',this[_0x4456f9(0x155)][_0x4456f9(0x176)](this[_0x4456f9(0x18a)]['getLoggerId']());try{this[_0x4456f9(0x18a)][_0x4456f9(0x17f)](this[_0x4456f9(0x17d)]+'\x20Start\x20sync\x20job.'),await this[_0x4456f9(0x18a)][_0x4456f9(0x17f)](this['prefix']+_0x4456f9(0x13f))[_0x4456f9(0x141)]();const _0x312654=await this[_0x4456f9(0x140)][_0x4456f9(0x132)](typedi_1[_0x4456f9(0x15c)][_0x4456f9(0x193)](providers_tokens_1[_0x4456f9(0x180)][_0x4456f9(0x18e)]));if(!_0x312654[_0x4456f9(0x18c)])throw new bad_request_error_1['BadRequestError'](this[_0x4456f9(0x17d)]+'\x20No\x20repositories\x20to\x20sync.');await this[_0x4456f9(0x18a)][_0x4456f9(0x17f)](this[_0x4456f9(0x17d)]+_0x4456f9(0x13c))[_0x4456f9(0x141)]();const _0x2ed1c8=await this[_0x4456f9(0x140)]['getBranchRecords'](_0x312654['map'](_0x375204=>'\x27'+_0x375204[_0x4456f9(0x12c)]+'\x27')[_0x4456f9(0x191)](','));await this['sfLogger'][_0x4456f9(0x17f)](this[_0x4456f9(0x17d)]+_0x4456f9(0x143))[_0x4456f9(0x141)](),this['repoList']=await this[_0x4456f9(0x178)]['getAll']();const _0x34ca4b=[..._0x312654,..._0x2ed1c8];this['sfLogger'][_0x4456f9(0x17f)](this['prefix']+_0x4456f9(0x198)+_0x34ca4b[_0x4456f9(0x18c)]+'\x20branches.');for(const _0x2f4399 of _0x34ca4b){this[_0x4456f9(0x16d)]['log']('Syncing\x20'+_0x2f4399[_0x4456f9(0x179)]+'['+_0x2f4399[_0x4456f9(0x12c)]+_0x4456f9(0x14b)+_0x2f4399[_0x4456f9(0x15b)]+'['+_0x2f4399[_0x4456f9(0x163)]+_0x4456f9(0x173)),this[_0x4456f9(0x18a)][_0x4456f9(0x17f)](this['prefix']+_0x4456f9(0x181)+_0x2f4399[_0x4456f9(0x179)]+'\x22\x20branch:\x20\x22'+_0x2f4399['branchName']+'\x22.'),this[_0x4456f9(0x18a)][_0x4456f9(0x17f)](this[_0x4456f9(0x17d)]+'\x20Checking\x20valid\x20name.');const _0x5e67c5=await this['checkValidNaming'](_0x2f4399);if(!_0x5e67c5)continue;this[_0x4456f9(0x18a)][_0x4456f9(0x17f)](this['prefix']+_0x4456f9(0x182));const _0x585fa7=await this[_0x4456f9(0x18b)](_0x2f4399);if(_0x585fa7)continue;await this['sfLogger'][_0x4456f9(0x141)]();let _0x116ec3;try{await this['sfLogger'][_0x4456f9(0x17f)](this[_0x4456f9(0x17d)]+_0x4456f9(0x164))[_0x4456f9(0x141)](),_0x116ec3=await this[_0x4456f9(0x13b)](_0x2f4399,typedi_1['Container']['get'](providers_tokens_1[_0x4456f9(0x180)][_0x4456f9(0x18e)]));}catch(_0x5cc212){await this[_0x4456f9(0x152)](_0x2f4399,_0x5cc212 instanceof too_many_requests_error_1[_0x4456f9(0x134)]?_0x5cc212:new Error(_0x4456f9(0x184)+_0x5cc212));continue;}await this[_0x4456f9(0x18a)]['log'](this[_0x4456f9(0x17d)]+'\x20Completed\x20prepare\x20to\x20syncing.')[_0x4456f9(0x141)]();if(_0x2f4399[_0x4456f9(0x185)]===flosum_repository_sync_dto_1['SyncDirection']['FlosumToGit']){const _0x5a53c6=typedi_1[_0x4456f9(0x15c)][_0x4456f9(0x193)](flosum_sync_job_1[_0x4456f9(0x196)]);await _0x5a53c6[_0x4456f9(0x12f)]({'repository':_0x116ec3,'convertToSFDX':this[_0x4456f9(0x139)][_0x4456f9(0x15a)],'syncRecord':_0x2f4399,'provider':this['config'][_0x4456f9(0x16b)]})[_0x4456f9(0x161)](_0x4a064c=>this[_0x4456f9(0x152)](_0x2f4399,_0x4a064c));}else{const _0x1d294d=typedi_1['Container'][_0x4456f9(0x193)](git_sync_job_1[_0x4456f9(0x145)]);await _0x1d294d[_0x4456f9(0x12f)]({'repository':_0x116ec3,'branch':_0x2f4399[_0x4456f9(0x15b)],'provider':this['config'][_0x4456f9(0x16b)],'repositoryGit':_0x116ec3['gitUrl'],'syncRecord':_0x2f4399})[_0x4456f9(0x161)](_0x328cad=>this[_0x4456f9(0x152)](_0x2f4399,_0x328cad));}}}catch(_0x165f95){this[_0x4456f9(0x16d)]['error'](_0x165f95);_0x165f95 instanceof too_many_requests_error_1[_0x4456f9(0x134)]?(await this['sfLogger'][_0x4456f9(0x17f)](this[_0x4456f9(0x17d)]+_0x4456f9(0x12e))[_0x4456f9(0x141)](),await(0x0,utils_1[_0x4456f9(0x12d)])(0x3c*0x3c*0x3e8),this['run']()):await this[_0x4456f9(0x18a)][_0x4456f9(0x158)](this[_0x4456f9(0x17d)]+'\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20'+_0x165f95)[_0x4456f9(0x141)]();return;}await this['sfLogger'][_0x4456f9(0x17f)](this['prefix']+'\x20Sync\x20job\x20done.')['send'](),await this[_0x4456f9(0x140)]['disableSync'](typedi_1[_0x4456f9(0x15c)][_0x4456f9(0x193)](providers_tokens_1[_0x4456f9(0x180)]['connectionId']))[_0x4456f9(0x161)](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a111_0x131ab7(0x15e),[salesforce_service_1[a111_0x131ab7(0x16f)],salesforce_sync_service_1[a111_0x131ab7(0x190)]])],SyncService),exports[a111_0x131ab7(0x142)]=SyncService;