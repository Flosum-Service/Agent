function a111_0x15ac(_0x4fda0f,_0x6fd5d4){const _0xea3602=a111_0x3241();return a111_0x15ac=function(_0x1bdc6c,_0x5694b5){_0x1bdc6c=_0x1bdc6c-0xa7;let _0x32415b=_0xea3602[_0x1bdc6c];return _0x32415b;},a111_0x15ac(_0x4fda0f,_0x6fd5d4);}const a111_0x17a9c3=a111_0x15ac;function a111_0x3241(){const _0x14c34d=['\x20No\x20repositories\x20to\x20sync.','isIntersects','SyncDirection','../../salesforce/services/salesforce.service','8195011gaUhiP','catch','Service','repoService','\x22\x20branch:\x20\x22','hooks','defineProperty','logger','updateRemoteState','Not\x20Synchronized','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','getHookLinkFor','6ImPWgI','__esModule','\x20Start\x20sync\x20job.','map','search','salesforceService','direction','../../../../core/errors/too-many-requests.error','7DDpdwd','\x20Checking\x20valid\x20name.','repositoriesIntersections','object','BRANCH_NAME_REGEXP','gitApiService','117NFIHMm','getOrCreateRepo','../../providers/providers.tokens','\x20branches.','SyncService','\x20Getting\x20repositories\x20from\x20git\x20service.','(((.+)+)+)+$','../jobs/git-sync.job','createHookPayload','repositoryId','error','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','repoList','../../../../constants','TooManyRequests','gitRepoService','Logger','485852MuzMrl','GitBranchNotFoundError','\x20Repository\x20\x22','create','getRepositoryRecords','function','setStatus','../errors/git-branch-not-found.error','\x20Syncing\x20repository:\x20\x22','salesforceSync','../../../../core/errors/bad-request.error','test','SalesforceError','20MegEzE','repositoryName','constructor','10927971hoeRnx','run','Container','connectionId','6453840oyiYRv','../../../shared/utils','SalesforceService','REPOSITORY_NAME_REGEXP','disableSync','prefix','HooksUtils','\x20Getting\x20repository\x20records.','get','toString','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.','length','BadRequestError','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','metadata','applicationUrl','../../../../core','getLoggerId','8ZeKATb','setLoggerId','30yIalLU','../../salesforce/services/salesforce-sync.service','Syncing\x20','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','\x20Checking\x20intersects.','FlosumToGit','sfLogger','gitProvider','GitSyncJob','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','Tokens','find','__metadata','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','branchId','join','getAll','push','\x27\x20-\x20\x27','../../salesforce/errors/salesforce.error','../../salesforce/dto/flosum-repository-sync.dto','1605813OJqgCM','log','../../providers/web-hooks/hooks.utils','\x20Getting\x20Flosum\x20repository','SalesforceSyncService','checkValidNaming','config','\x20Getting\x20branch\x20records.','\x20Have\x20to\x20synchronize\x20','2241912fFiDKu','273142tnOQiy','typedi','Unable\x20to\x20synchronize\x20repository\x20\x27','send','Waiting','branchName','toUpperCase','decorate',']\x20due\x20error\x20-\x20','isConvertToSfdx','handleRecordSyncError',']\x20[','name',']\x20branch.'];a111_0x3241=function(){return _0x14c34d;};return a111_0x3241();}(function(_0xf29d4,_0xd6d073){const _0x3d7477=a111_0x15ac,_0x57a862=_0xf29d4();while(!![]){try{const _0x2d96f2=parseInt(_0x3d7477(0x103))/0x1+-parseInt(_0x3d7477(0x10d))/0x2*(-parseInt(_0x3d7477(0xa7))/0x3)+parseInt(_0x3d7477(0xc6))/0x4*(parseInt(_0x3d7477(0xee))/0x5)+parseInt(_0x3d7477(0x10c))/0x6*(parseInt(_0x3d7477(0xaf))/0x7)+-parseInt(_0x3d7477(0xec))/0x8*(-parseInt(_0x3d7477(0xd6))/0x9)+parseInt(_0x3d7477(0xd3))/0xa*(parseInt(_0x3d7477(0x11f))/0xb)+parseInt(_0x3d7477(0xda))/0xc*(-parseInt(_0x3d7477(0xb5))/0xd);if(_0x2d96f2===_0xd6d073)break;else _0x57a862['push'](_0x57a862['shift']());}catch(_0x2e0a77){_0x57a862['push'](_0x57a862['shift']());}}}(a111_0x3241,0xce5aa));const a111_0x5694b5=(function(){let _0x2ed7fb=!![];return function(_0x44f90f,_0x52c209){const _0x18b27f=_0x2ed7fb?function(){if(_0x52c209){const _0x4b9a91=_0x52c209['apply'](_0x44f90f,arguments);return _0x52c209=null,_0x4b9a91;}}:function(){};return _0x2ed7fb=![],_0x18b27f;};}()),a111_0x1bdc6c=a111_0x5694b5(this,function(){const _0x278498=a111_0x15ac;return a111_0x1bdc6c[_0x278498(0xe3)]()[_0x278498(0xab)](_0x278498(0xbb))['toString']()[_0x278498(0xd5)](a111_0x1bdc6c)['search'](_0x278498(0xbb));});a111_0x1bdc6c();'use strict';var __decorate=this&&this['__decorate']||function(_0x2e287e,_0xf0da99,_0x573542,_0x552289){const _0x415624=a111_0x15ac;var _0x3f8451=arguments[_0x415624(0xe5)],_0xa01bf3=_0x3f8451<0x3?_0xf0da99:_0x552289===null?_0x552289=Object['getOwnPropertyDescriptor'](_0xf0da99,_0x573542):_0x552289,_0x2c2400;if(typeof Reflect===_0x415624(0xb2)&&typeof Reflect[_0x415624(0x114)]==='function')_0xa01bf3=Reflect[_0x415624(0x114)](_0x2e287e,_0xf0da99,_0x573542,_0x552289);else{for(var _0x5adb4b=_0x2e287e[_0x415624(0xe5)]-0x1;_0x5adb4b>=0x0;_0x5adb4b--)if(_0x2c2400=_0x2e287e[_0x5adb4b])_0xa01bf3=(_0x3f8451<0x3?_0x2c2400(_0xa01bf3):_0x3f8451>0x3?_0x2c2400(_0xf0da99,_0x573542,_0xa01bf3):_0x2c2400(_0xf0da99,_0x573542))||_0xa01bf3;}return _0x3f8451>0x3&&_0xa01bf3&&Object[_0x415624(0x125)](_0xf0da99,_0x573542,_0xa01bf3),_0xa01bf3;},__metadata=this&&this[a111_0x17a9c3(0xfa)]||function(_0x4976a2,_0x3d8bc2){const _0x4ecd2f=a111_0x17a9c3;if(typeof Reflect===_0x4ecd2f(0xb2)&&typeof Reflect[_0x4ecd2f(0xe8)]===_0x4ecd2f(0xcb))return Reflect[_0x4ecd2f(0xe8)](_0x4976a2,_0x3d8bc2);},SyncService_1;Object[a111_0x17a9c3(0x125)](exports,a111_0x17a9c3(0xa8),{'value':!![]}),exports['SyncService']=void 0x0;const constants_1=require(a111_0x17a9c3(0xc2)),core_1=require(a111_0x17a9c3(0xea)),too_many_requests_error_1=require(a111_0x17a9c3(0xae)),flosum_repository_sync_dto_1=require(a111_0x17a9c3(0x102)),salesforce_error_1=require(a111_0x17a9c3(0x101)),salesforce_sync_service_1=require(a111_0x17a9c3(0xef)),salesforce_service_1=require(a111_0x17a9c3(0x11e)),utils_1=require(a111_0x17a9c3(0xdb)),typedi_1=require(a111_0x17a9c3(0x10e)),hooks_utils_1=require(a111_0x17a9c3(0x105)),git_branch_not_found_error_1=require(a111_0x17a9c3(0xcd)),flosum_sync_job_1=require('../jobs/flosum-sync.job'),git_sync_job_1=require(a111_0x17a9c3(0xbc)),providers_tokens_1=require(a111_0x17a9c3(0xb7)),bad_request_error_1=require(a111_0x17a9c3(0xd0));let SyncService=SyncService_1=class SyncService{constructor(_0x5dbc5a,_0x443119){const _0x3a648d=a111_0x17a9c3;this[_0x3a648d(0xac)]=_0x5dbc5a,this[_0x3a648d(0xcf)]=_0x443119,this[_0x3a648d(0x126)]=new core_1[(_0x3a648d(0xc5))](SyncService_1[_0x3a648d(0x119)]),this[_0x3a648d(0xb1)]={},this[_0x3a648d(0xc1)]=[];}async[a111_0x17a9c3(0x117)](_0x843be0,_0x1227c0){const _0x412860=a111_0x17a9c3;if(_0x1227c0 instanceof git_branch_not_found_error_1[_0x412860(0xc7)]){await this['salesforceSync'][_0x412860(0xcc)](_0x843be0,_0x412860(0x128));return;}if(_0x1227c0 instanceof too_many_requests_error_1[_0x412860(0xc3)]){await this['salesforceSync'][_0x412860(0xcc)](_0x843be0,_0x412860(0x111));throw _0x1227c0;}try{await this[_0x412860(0xf4)][_0x412860(0xbf)](this['prefix']+'\x20Stop\x20sync\x20job\x20for\x20\x27'+_0x843be0[_0x412860(0xd4)]+'\x27\x20['+_0x843be0[_0x412860(0x112)]+_0x412860(0x115)+_0x1227c0+'.')['send'](),await this[_0x412860(0xcf)][_0x412860(0x127)](_0x843be0,{}),await this[_0x412860(0xcf)][_0x412860(0xcc)](_0x843be0,'Error');}catch(_0x14d90e){if(_0x14d90e instanceof salesforce_error_1[_0x412860(0xd2)])throw _0x14d90e;}}async[a111_0x17a9c3(0x11c)](_0xd025a4){const _0x332f9d=a111_0x17a9c3;if(_0xd025a4[_0x332f9d(0xbe)]){const _0x5a8923=_0xd025a4['repositoryName']['toLowerCase'](),_0x25adfa=this[_0x332f9d(0xb1)][_0x5a8923];if(!_0x25adfa)this[_0x332f9d(0xb1)][_0x5a8923]=_0xd025a4[_0x332f9d(0xd4)];else{if(_0x25adfa&&_0x25adfa!==_0xd025a4[_0x332f9d(0xd4)])return await this[_0x332f9d(0x117)](_0xd025a4,new Error('Unable\x20to\x20synchronize\x20repository\x20\x27'+_0xd025a4['repositoryName']+_0x332f9d(0x129)+_0x5a8923+_0x332f9d(0x100)+_0x25adfa+'\x27')),!![];}}return![];}async[a111_0x17a9c3(0x108)](_0xb48e2d){const _0x2976f4=a111_0x17a9c3;if(!constants_1[_0x2976f4(0xdd)][_0x2976f4(0xd1)](_0xb48e2d[_0x2976f4(0xd4)]))return await this[_0x2976f4(0x117)](_0xb48e2d,new Error(_0x2976f4(0x10f)+_0xb48e2d[_0x2976f4(0xd4)]+_0x2976f4(0xf1))),![];if(!constants_1[_0x2976f4(0xb3)][_0x2976f4(0xd1)](_0xb48e2d[_0x2976f4(0x112)]))return await this[_0x2976f4(0x117)](_0xb48e2d,new Error('Unable\x20to\x20synchronize\x20branch\x20\x27'+_0xb48e2d[_0x2976f4(0x112)]+'\x27\x20in\x20repository\x20\x27'+_0xb48e2d[_0x2976f4(0xd4)]+_0x2976f4(0xc0))),![];return!![];}async['getOrCreateRepo'](_0x268164,_0x66cc6e){const _0x2aac6c=a111_0x17a9c3;let _0x4366ff=this['repoList'][_0x2aac6c(0xf9)](_0x180c6f=>_0x268164[_0x2aac6c(0xd4)]===_0x180c6f['name']);!_0x4366ff&&(this[_0x2aac6c(0xf4)][_0x2aac6c(0x104)](this[_0x2aac6c(0xdf)]+_0x2aac6c(0xc8)+_0x268164[_0x2aac6c(0xd4)]+_0x2aac6c(0xe7)),_0x4366ff=await this[_0x2aac6c(0x122)][_0x2aac6c(0xc9)]({'name':_0x268164[_0x2aac6c(0xd4)],'autoInit':!![],'defaultBranch':_0x268164[_0x2aac6c(0x112)],'private':!![],'createHook':typedi_1[_0x2aac6c(0xd8)][_0x2aac6c(0xe2)](providers_tokens_1['Tokens'][_0x2aac6c(0x109)])['isBidirectionalSynchronization']}));if(this[_0x2aac6c(0x109)]['isBidirectionalSynchronization']){const _0x28b85c=await _0x4366ff[_0x2aac6c(0x124)]['getAll']();!_0x28b85c[_0x2aac6c(0xf9)](_0x14d83e=>_0x14d83e['url']===hooks_utils_1[_0x2aac6c(0xe0)][_0x2aac6c(0x12a)](this[_0x2aac6c(0x109)]['gitProvider'],this[_0x2aac6c(0x109)][_0x2aac6c(0xe9)],_0x66cc6e))&&(this[_0x2aac6c(0xf4)][_0x2aac6c(0x104)](this[_0x2aac6c(0xdf)]+'\x20Repository\x20\x22'+_0x268164[_0x2aac6c(0xd4)]+_0x2aac6c(0xe4)),await _0x4366ff[_0x2aac6c(0x124)][_0x2aac6c(0xc9)](hooks_utils_1['HooksUtils'][_0x2aac6c(0xbd)](this[_0x2aac6c(0x109)]['gitProvider'],_0x4366ff[_0x2aac6c(0x124)],this[_0x2aac6c(0x109)][_0x2aac6c(0xe9)],_0x66cc6e)));}return this[_0x2aac6c(0xc1)][_0x2aac6c(0xff)](_0x4366ff),_0x4366ff;}async[a111_0x17a9c3(0xd7)](){const _0x17266b=a111_0x17a9c3;this[_0x17266b(0xb4)]=typedi_1[_0x17266b(0xd8)][_0x17266b(0xe2)](providers_tokens_1[_0x17266b(0xf8)][_0x17266b(0xb4)]),this[_0x17266b(0x122)]=typedi_1[_0x17266b(0xd8)][_0x17266b(0xe2)](providers_tokens_1[_0x17266b(0xf8)][_0x17266b(0xc4)]),this['config']=typedi_1[_0x17266b(0xd8)][_0x17266b(0xe2)](providers_tokens_1[_0x17266b(0xf8)][_0x17266b(0x109)]),this[_0x17266b(0xf4)]=typedi_1['Container'][_0x17266b(0xe2)](providers_tokens_1['Tokens'][_0x17266b(0x126)]),this[_0x17266b(0xdf)]='['+SyncService_1['name']+_0x17266b(0x118)+this[_0x17266b(0x109)][_0x17266b(0xf5)][_0x17266b(0x113)]()+']',this['salesforceService'][_0x17266b(0xed)](this[_0x17266b(0xf4)][_0x17266b(0xeb)]());try{this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0xa9)),await this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0xe1))[_0x17266b(0x110)]();const _0x3b577d=await this[_0x17266b(0xcf)][_0x17266b(0xca)](typedi_1['Container'][_0x17266b(0xe2)](providers_tokens_1[_0x17266b(0xf8)][_0x17266b(0xd9)]));if(!_0x3b577d['length'])throw new bad_request_error_1[(_0x17266b(0xe6))](this[_0x17266b(0xdf)]+_0x17266b(0x11b));await this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0x10a))[_0x17266b(0x110)]();const _0x475cb2=await this[_0x17266b(0xcf)]['getBranchRecords'](_0x3b577d[_0x17266b(0xaa)](_0x223291=>'\x27'+_0x223291[_0x17266b(0xbe)]+'\x27')[_0x17266b(0xfd)](','));await this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0xba))['send'](),this['repoList']=await this[_0x17266b(0x122)][_0x17266b(0xfe)]();const _0x3249b6=[..._0x3b577d,..._0x475cb2];this['sfLogger']['log'](this[_0x17266b(0xdf)]+_0x17266b(0x10b)+_0x3249b6[_0x17266b(0xe5)]+_0x17266b(0xb8));for(const _0x2312ae of _0x3249b6){this[_0x17266b(0x126)][_0x17266b(0x104)](_0x17266b(0xf0)+_0x2312ae[_0x17266b(0xd4)]+'['+_0x2312ae[_0x17266b(0xbe)]+']\x20repository\x20'+_0x2312ae['branchName']+'['+_0x2312ae[_0x17266b(0xfc)]+_0x17266b(0x11a)),this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0xce)+_0x2312ae['repositoryName']+_0x17266b(0x123)+_0x2312ae[_0x17266b(0x112)]+'\x22.'),this['sfLogger']['log'](this[_0x17266b(0xdf)]+_0x17266b(0xb0));const _0x260e84=await this[_0x17266b(0x108)](_0x2312ae);if(!_0x260e84)continue;this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0xf2));const _0x4ba1b0=await this[_0x17266b(0x11c)](_0x2312ae);if(_0x4ba1b0)continue;await this[_0x17266b(0xf4)]['send']();let _0x52782c;try{await this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0x106))[_0x17266b(0x110)](),_0x52782c=await this[_0x17266b(0xb6)](_0x2312ae,typedi_1[_0x17266b(0xd8)][_0x17266b(0xe2)](providers_tokens_1[_0x17266b(0xf8)]['connectionId']));}catch(_0x98bae0){await this[_0x17266b(0x117)](_0x2312ae,_0x98bae0 instanceof too_many_requests_error_1[_0x17266b(0xc3)]?_0x98bae0:new Error(_0x17266b(0xf7)+_0x98bae0));continue;}await this[_0x17266b(0xf4)]['log'](this[_0x17266b(0xdf)]+'\x20Completed\x20prepare\x20to\x20syncing.')['send']();if(_0x2312ae[_0x17266b(0xad)]===flosum_repository_sync_dto_1[_0x17266b(0x11d)][_0x17266b(0xf3)]){const _0x388d9b=typedi_1['Container']['get'](flosum_sync_job_1['FlosumSyncJob']);await _0x388d9b['run']({'repository':_0x52782c,'convertToSFDX':this[_0x17266b(0x109)][_0x17266b(0x116)],'syncRecord':_0x2312ae,'provider':this[_0x17266b(0x109)]['gitProvider']})[_0x17266b(0x120)](_0x416931=>this['handleRecordSyncError'](_0x2312ae,_0x416931));}else{const _0x4c9020=typedi_1[_0x17266b(0xd8)][_0x17266b(0xe2)](git_sync_job_1[_0x17266b(0xf6)]);await _0x4c9020[_0x17266b(0xd7)]({'repository':_0x52782c,'branch':_0x2312ae[_0x17266b(0x112)],'provider':this['config']['gitProvider'],'repositoryGit':_0x52782c['gitUrl'],'syncRecord':_0x2312ae})['catch'](_0x687383=>this[_0x17266b(0x117)](_0x2312ae,_0x687383));}}}catch(_0x5cdf9f){this[_0x17266b(0x126)]['error'](_0x5cdf9f);_0x5cdf9f instanceof too_many_requests_error_1[_0x17266b(0xc3)]?(await this[_0x17266b(0xf4)][_0x17266b(0x104)](this[_0x17266b(0xdf)]+_0x17266b(0xfb))[_0x17266b(0x110)](),await(0x0,utils_1['sleep'])(0x3c*0x3c*0x3e8),this[_0x17266b(0xd7)]()):await this[_0x17266b(0xf4)][_0x17266b(0xbf)](this[_0x17266b(0xdf)]+'\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20'+_0x5cdf9f)[_0x17266b(0x110)]();return;}await this[_0x17266b(0xf4)][_0x17266b(0x104)](this['prefix']+'\x20Sync\x20job\x20done.')[_0x17266b(0x110)](),await this[_0x17266b(0xcf)][_0x17266b(0xde)](typedi_1[_0x17266b(0xd8)]['get'](providers_tokens_1[_0x17266b(0xf8)][_0x17266b(0xd9)]))[_0x17266b(0x120)](()=>null);}};SyncService=SyncService_1=__decorate([(0x0,typedi_1[a111_0x17a9c3(0x121)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1[a111_0x17a9c3(0xdc)],salesforce_sync_service_1[a111_0x17a9c3(0x107)]])],SyncService),exports[a111_0x17a9c3(0xb9)]=SyncService;