function a67_0x4133(){const _0x2e9f86=['getOrCreateRepo','error','../../salesforce/services/salesforce-sync.service','getAll','name','isIntersects','../../salesforce/errors/salesforce.error','catch','logger','repoList','createFromContext','toString','FlosumSyncJob','../../providers/providers.tokens','join','Tokens','2188076MhGzXS','metadata','decorate','../../../../constants','getLoggerId','createFromConnection','typedi','test','HooksUtils','direction','566070sQlJmB','\x27\x20in\x20repository\x20\x27','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','\x20Getting\x20repository\x20records.','setLoggerId','../../providers/web-hooks/hooks.utils','7317576KlNnpT','run','\x20Checking\x20intersects.','function','\x20branches.','sfLogger','\x20Repository\x20\x22','gitApiService','repoService','url','search','6762ZcfWMh','\x20Stop\x20sync\x20job\x20for\x20\x27','get','RepositoryFactory','getRepositoryRecords','send','../../providers/repositories/repository.factory','GitBranchNotFoundError','length','salesforceSync','__metadata','disableSync','gitUrl','Unable\x20to\x20synchronize\x20repository\x20\x27','__decorate','../../salesforce/services/salesforce.service','\x22\x20does\x20not\x20exists.\x20Creating\x20it\x20on\x20git\x20service.','\x20[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.','../../salesforce/dto/flosum-repository-sync.dto','324mkOOZz','40236GDnPgt','\x20Sync\x20job\x20done.','\x20Getting\x20Flosum\x20repository','getHookLinkFor','checkValidNaming','branchName','Container','../jobs/flosum-sync.job','push','35kyqqkZ',']\x20[','TooManyRequests','isBidirectionalSynchronization','applicationUrl','repositoryId','__esModule','GitSyncJob','prefix',']\x20due\x20error\x20-\x20','config','\x22\x20branch:\x20\x22','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','\x20Start\x20sync\x20job.','design:paramtypes','../../../../core/errors/too-many-requests.error','log','hooks','\x20Getting\x20repositories\x20from\x20git\x20service.','1412ooBilt','Syncing\x20','\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','handleRecordSyncError','gitProvider','salesforceService','BRANCH_NAME_REGEXP','REPOSITORY_NAME_REGEXP','setStatus','defineProperty','SyncDirection','create','Logger','8728696NCstPH','FlosumToGit','apply','\x20Have\x20to\x20synchronize\x20','../errors/git-branch-not-found.error','SalesforceSyncService','(((.+)+)+)+$','repositoryName','\x22\x20does\x27t\x20has\x20the\x20agent\x20webhook.\x20Agent\x20will\x20create\x20new\x20repository\x20webhook\x20to\x20enable\x20back\x20sync.',']\x20repository\x20','../../../../core','SalesforceError','SalesforceService','object','providersFactory','map','Unable\x20to\x20synchronize\x20branch\x20\x27','Error','1396770ZkfHhW','updateRemoteState','repositoriesIntersections','SyncService','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','find'];a67_0x4133=function(){return _0x2e9f86;};return a67_0x4133();}const a67_0x26591d=a67_0x2f98;(function(_0x31207a,_0x21ab7b){const _0x485f52=a67_0x2f98,_0x459c33=_0x31207a();while(!![]){try{const _0x1844ed=-parseInt(_0x485f52(0x1e8))/0x1+parseInt(_0x485f52(0x1fe))/0x2+parseInt(_0x485f52(0x219))/0x3*(-parseInt(_0x485f52(0x1c9))/0x4)+parseInt(_0x485f52(0x236))/0x5*(-parseInt(_0x485f52(0x22d))/0x6)+-parseInt(_0x485f52(0x20e))/0x7+parseInt(_0x485f52(0x1d6))/0x8+parseInt(_0x485f52(0x22c))/0x9*(parseInt(_0x485f52(0x208))/0xa);if(_0x1844ed===_0x21ab7b)break;else _0x459c33['push'](_0x459c33['shift']());}catch(_0x2223df){_0x459c33['push'](_0x459c33['shift']());}}}(a67_0x4133,0xe50fb));const a67_0x18f308=(function(){let _0x3fb6b3=!![];return function(_0x38540,_0x5314e0){const _0x25adfb=_0x3fb6b3?function(){const _0xfe144d=a67_0x2f98;if(_0x5314e0){const _0x387c33=_0x5314e0[_0xfe144d(0x1d8)](_0x38540,arguments);return _0x5314e0=null,_0x387c33;}}:function(){};return _0x3fb6b3=![],_0x25adfb;};}()),a67_0x451aef=a67_0x18f308(this,function(){const _0x171162=a67_0x2f98;return a67_0x451aef[_0x171162(0x1f9)]()[_0x171162(0x218)](_0x171162(0x1dc))[_0x171162(0x1f9)]()['constructor'](a67_0x451aef)[_0x171162(0x218)](_0x171162(0x1dc));});a67_0x451aef();function a67_0x2f98(_0x3c442d,_0x313ebe){const _0x7be602=a67_0x4133();return a67_0x2f98=function(_0x451aef,_0x18f308){_0x451aef=_0x451aef-0x1b8;let _0x41336c=_0x7be602[_0x451aef];return _0x41336c;},a67_0x2f98(_0x3c442d,_0x313ebe);}'use strict';var __decorate=this&&this[a67_0x26591d(0x227)]||function(_0x2e8488,_0x26f467,_0x3bd6dc,_0x1e3e61){const _0x1c9d48=a67_0x26591d;var _0x1289ef=arguments['length'],_0x47b32d=_0x1289ef<0x3?_0x26f467:_0x1e3e61===null?_0x1e3e61=Object['getOwnPropertyDescriptor'](_0x26f467,_0x3bd6dc):_0x1e3e61,_0x44605d;if(typeof Reflect===_0x1c9d48(0x1e3)&&typeof Reflect[_0x1c9d48(0x200)]==='function')_0x47b32d=Reflect[_0x1c9d48(0x200)](_0x2e8488,_0x26f467,_0x3bd6dc,_0x1e3e61);else{for(var _0x70e0cd=_0x2e8488[_0x1c9d48(0x221)]-0x1;_0x70e0cd>=0x0;_0x70e0cd--)if(_0x44605d=_0x2e8488[_0x70e0cd])_0x47b32d=(_0x1289ef<0x3?_0x44605d(_0x47b32d):_0x1289ef>0x3?_0x44605d(_0x26f467,_0x3bd6dc,_0x47b32d):_0x44605d(_0x26f467,_0x3bd6dc))||_0x47b32d;}return _0x1289ef>0x3&&_0x47b32d&&Object[_0x1c9d48(0x1d2)](_0x26f467,_0x3bd6dc,_0x47b32d),_0x47b32d;},__metadata=this&&this[a67_0x26591d(0x223)]||function(_0x550f6a,_0x25a850){const _0x363987=a67_0x26591d;if(typeof Reflect===_0x363987(0x1e3)&&typeof Reflect[_0x363987(0x1ff)]===_0x363987(0x211))return Reflect[_0x363987(0x1ff)](_0x550f6a,_0x25a850);},SyncService_1;Object['defineProperty'](exports,a67_0x26591d(0x1bc),{'value':!![]}),exports[a67_0x26591d(0x1eb)]=void 0x0;const constants_1=require(a67_0x26591d(0x201)),core_1=require(a67_0x26591d(0x1e0)),too_many_requests_error_1=require(a67_0x26591d(0x1c5)),flosum_repository_sync_dto_1=require(a67_0x26591d(0x22b)),salesforce_error_1=require(a67_0x26591d(0x1f4)),salesforce_sync_service_1=require(a67_0x26591d(0x1f0)),salesforce_service_1=require(a67_0x26591d(0x228)),utils_1=require('../../../shared/utils'),typedi_1=require(a67_0x26591d(0x204)),hooks_utils_1=require(a67_0x26591d(0x20d)),git_branch_not_found_error_1=require(a67_0x26591d(0x1da)),flosum_sync_job_1=require(a67_0x26591d(0x234)),git_sync_job_1=require('../jobs/git-sync.job'),repository_factory_1=require(a67_0x26591d(0x21f)),connection_1=require('../utils/connection'),providers_tokens_1=require(a67_0x26591d(0x1fb));let SyncService=SyncService_1=class SyncService{constructor(_0x1fe94f,_0x25bbe1,_0x509e02){const _0x455562=a67_0x26591d;this['salesforceService']=_0x1fe94f,this[_0x455562(0x222)]=_0x25bbe1,this[_0x455562(0x1e4)]=_0x509e02,this[_0x455562(0x1f6)]=new core_1[(_0x455562(0x1d5))](SyncService_1[_0x455562(0x1f2)]),this[_0x455562(0x1ea)]={},this[_0x455562(0x1f7)]=[];}async[a67_0x26591d(0x1cc)](_0xece4a1,_0x14f376){const _0x948dd8=a67_0x26591d;if(_0x14f376 instanceof git_branch_not_found_error_1[_0x948dd8(0x220)]){await this[_0x948dd8(0x222)]['setStatus'](_0xece4a1,'Not\x20Synchronized');return;}if(_0x14f376 instanceof too_many_requests_error_1[_0x948dd8(0x1b8)]){await this[_0x948dd8(0x222)]['setStatus'](_0xece4a1,'Waiting');throw _0x14f376;}try{await this[_0x948dd8(0x213)][_0x948dd8(0x1ef)](this[_0x948dd8(0x1be)]+_0x948dd8(0x21a)+_0xece4a1[_0x948dd8(0x1dd)]+'\x27\x20['+_0xece4a1[_0x948dd8(0x232)]+_0x948dd8(0x1bf)+_0x14f376+'.')[_0x948dd8(0x21e)](),await this['salesforceSync'][_0x948dd8(0x1e9)](_0xece4a1,{}),await this[_0x948dd8(0x222)][_0x948dd8(0x1d1)](_0xece4a1,_0x948dd8(0x1e7));}catch(_0x549706){if(_0x549706 instanceof salesforce_error_1[_0x948dd8(0x1e1)])throw _0x549706;}}async[a67_0x26591d(0x1f3)](_0x13cc31){const _0x2026bd=a67_0x26591d;if(_0x13cc31[_0x2026bd(0x1bb)]){const _0x4833d5=_0x13cc31[_0x2026bd(0x1dd)]['toLowerCase'](),_0x43e02c=this[_0x2026bd(0x1ea)][_0x4833d5];if(!_0x43e02c)this[_0x2026bd(0x1ea)][_0x4833d5]=_0x13cc31[_0x2026bd(0x1dd)];else{if(_0x43e02c&&_0x43e02c!==_0x13cc31[_0x2026bd(0x1dd)])return await this[_0x2026bd(0x1cc)](_0x13cc31,new Error('Unable\x20to\x20synchronize\x20repository\x20\x27'+_0x13cc31[_0x2026bd(0x1dd)]+'\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27'+_0x4833d5+'\x27\x20-\x20\x27'+_0x43e02c+'\x27')),!![];}}return![];}async['checkValidNaming'](_0x51ee37){const _0x50604f=a67_0x26591d;if(!constants_1[_0x50604f(0x1d0)][_0x50604f(0x205)](_0x51ee37[_0x50604f(0x1dd)]))return await this['handleRecordSyncError'](_0x51ee37,new Error(_0x50604f(0x226)+_0x51ee37[_0x50604f(0x1dd)]+_0x50604f(0x1ec))),![];if(!constants_1[_0x50604f(0x1cf)][_0x50604f(0x205)](_0x51ee37[_0x50604f(0x232)]))return await this[_0x50604f(0x1cc)](_0x51ee37,new Error(_0x50604f(0x1e6)+_0x51ee37[_0x50604f(0x232)]+_0x50604f(0x209)+_0x51ee37[_0x50604f(0x1dd)]+_0x50604f(0x1c2))),![];return!![];}async[a67_0x26591d(0x1ee)](_0x41357e,_0x1a1b3c){const _0x12a522=a67_0x26591d;let _0xd553d1=this[_0x12a522(0x1f7)][_0x12a522(0x1ed)](_0x364fae=>_0x41357e[_0x12a522(0x1dd)]===_0x364fae[_0x12a522(0x1f2)]);!_0xd553d1&&(this[_0x12a522(0x213)][_0x12a522(0x1c6)](this['prefix']+_0x12a522(0x214)+_0x41357e[_0x12a522(0x1dd)]+_0x12a522(0x229)),_0xd553d1=await this[_0x12a522(0x216)][_0x12a522(0x1d4)]({'name':_0x41357e[_0x12a522(0x1dd)],'autoInit':!![],'defaultBranch':_0x41357e['branchName'],'private':!![],'createHook':typedi_1[_0x12a522(0x233)][_0x12a522(0x21b)](providers_tokens_1[_0x12a522(0x1fd)][_0x12a522(0x1c0)])[_0x12a522(0x1b9)]}));if(this[_0x12a522(0x1c0)][_0x12a522(0x1b9)]){const _0x4ab8fc=await _0xd553d1['hooks'][_0x12a522(0x1f1)]();!_0x4ab8fc['find'](_0x244841=>_0x244841[_0x12a522(0x217)]===hooks_utils_1[_0x12a522(0x206)][_0x12a522(0x230)](this[_0x12a522(0x1c0)]['gitProvider'],this[_0x12a522(0x1c0)][_0x12a522(0x1ba)],_0x1a1b3c))&&(this[_0x12a522(0x213)][_0x12a522(0x1c6)](this[_0x12a522(0x1be)]+'\x20Repository\x20\x22'+_0x41357e['repositoryName']+_0x12a522(0x1de)),await _0xd553d1[_0x12a522(0x1c7)][_0x12a522(0x1d4)](hooks_utils_1[_0x12a522(0x206)]['createHookPayload'](this[_0x12a522(0x1c0)][_0x12a522(0x1cd)],_0xd553d1[_0x12a522(0x1c7)],this['config'][_0x12a522(0x1ba)],_0x1a1b3c)));}return this[_0x12a522(0x1f7)][_0x12a522(0x235)](_0xd553d1),_0xd553d1;}async[a67_0x26591d(0x20f)](_0x1ae097){const _0x3ea578=a67_0x26591d;this[_0x3ea578(0x215)]=await this[_0x3ea578(0x1e4)][_0x3ea578(0x203)](_0x1ae097),this[_0x3ea578(0x216)]=await repository_factory_1[_0x3ea578(0x21c)][_0x3ea578(0x1f8)](typedi_1[_0x3ea578(0x233)]),this[_0x3ea578(0x1c0)]=typedi_1[_0x3ea578(0x233)][_0x3ea578(0x21b)](providers_tokens_1[_0x3ea578(0x1fd)][_0x3ea578(0x1c0)]),this[_0x3ea578(0x213)]=typedi_1[_0x3ea578(0x233)][_0x3ea578(0x21b)](providers_tokens_1[_0x3ea578(0x1fd)][_0x3ea578(0x1f6)]),this['prefix']='['+SyncService_1[_0x3ea578(0x1f2)]+_0x3ea578(0x237)+this[_0x3ea578(0x1c0)][_0x3ea578(0x1cd)]['toUpperCase']()+']',this[_0x3ea578(0x1ce)][_0x3ea578(0x20c)](this['sfLogger'][_0x3ea578(0x202)]());try{this[_0x3ea578(0x213)][_0x3ea578(0x1c6)](this['prefix']+_0x3ea578(0x1c3)),await this[_0x3ea578(0x213)][_0x3ea578(0x1c6)](this[_0x3ea578(0x1be)]+_0x3ea578(0x20b))[_0x3ea578(0x21e)]();const _0x1d895c=await this[_0x3ea578(0x222)][_0x3ea578(0x21d)](_0x1ae097);await this['sfLogger'][_0x3ea578(0x1c6)](this['prefix']+'\x20Getting\x20branch\x20records.')[_0x3ea578(0x21e)]();const _0x14d6ee=await this[_0x3ea578(0x222)]['getBranchRecords'](_0x1d895c[_0x3ea578(0x1e5)](_0x381047=>'\x27'+_0x381047[_0x3ea578(0x1bb)]+'\x27')[_0x3ea578(0x1fc)](','));await this[_0x3ea578(0x213)][_0x3ea578(0x1c6)](this['prefix']+_0x3ea578(0x1c8))[_0x3ea578(0x21e)](),this[_0x3ea578(0x1f7)]=await this[_0x3ea578(0x216)][_0x3ea578(0x1f1)]();const _0x549230=[..._0x1d895c,..._0x14d6ee];this['sfLogger'][_0x3ea578(0x1c6)](this[_0x3ea578(0x1be)]+_0x3ea578(0x1d9)+_0x549230[_0x3ea578(0x221)]+_0x3ea578(0x212));for(const _0x44b08c of _0x549230){this['logger'][_0x3ea578(0x1c6)](_0x3ea578(0x1ca)+_0x44b08c[_0x3ea578(0x1dd)]+'['+_0x44b08c['repositoryId']+_0x3ea578(0x1df)+_0x44b08c[_0x3ea578(0x232)]+'['+_0x44b08c['branchId']+']\x20branch.'),this['sfLogger'][_0x3ea578(0x1c6)](this[_0x3ea578(0x1be)]+'\x20Syncing\x20repository:\x20\x22'+_0x44b08c[_0x3ea578(0x1dd)]+_0x3ea578(0x1c1)+_0x44b08c['branchName']+'\x22.'),this[_0x3ea578(0x213)][_0x3ea578(0x1c6)](this[_0x3ea578(0x1be)]+'\x20Checking\x20valid\x20name.');const _0x116055=await this[_0x3ea578(0x231)](_0x44b08c);if(!_0x116055)continue;this['sfLogger'][_0x3ea578(0x1c6)](this['prefix']+_0x3ea578(0x210));const _0x29cd6a=await this[_0x3ea578(0x1f3)](_0x44b08c);if(_0x29cd6a)continue;await this[_0x3ea578(0x213)][_0x3ea578(0x21e)]();let _0x3d55d3;try{await this[_0x3ea578(0x213)][_0x3ea578(0x1c6)](this[_0x3ea578(0x1be)]+_0x3ea578(0x22f))[_0x3ea578(0x21e)](),_0x3d55d3=await this[_0x3ea578(0x1ee)](_0x44b08c,_0x1ae097);}catch(_0x338142){await this['handleRecordSyncError'](_0x44b08c,_0x338142 instanceof too_many_requests_error_1[_0x3ea578(0x1b8)]?_0x338142:new Error(_0x3ea578(0x20a)+_0x338142));continue;}await this[_0x3ea578(0x213)][_0x3ea578(0x1c6)](this[_0x3ea578(0x1be)]+'\x20Completed\x20prepare\x20to\x20syncing.')[_0x3ea578(0x21e)]();if(_0x44b08c[_0x3ea578(0x207)]===flosum_repository_sync_dto_1[_0x3ea578(0x1d3)][_0x3ea578(0x1d7)]){const _0x19d5f7=typedi_1[_0x3ea578(0x233)][_0x3ea578(0x21b)](flosum_sync_job_1[_0x3ea578(0x1fa)]);await _0x19d5f7[_0x3ea578(0x20f)]({'repository':_0x3d55d3,'convertToSFDX':this[_0x3ea578(0x1c0)]['isConvertToSfdx'],'syncRecord':_0x44b08c,'provider':this[_0x3ea578(0x1c0)][_0x3ea578(0x1cd)]})['catch'](_0x543de9=>this['handleRecordSyncError'](_0x44b08c,_0x543de9));}else{const _0x155fb9=typedi_1[_0x3ea578(0x233)][_0x3ea578(0x21b)](git_sync_job_1[_0x3ea578(0x1bd)]);await _0x155fb9[_0x3ea578(0x20f)]({'repository':_0x3d55d3,'branch':_0x44b08c['branchName'],'provider':this[_0x3ea578(0x1c0)][_0x3ea578(0x1cd)],'repositoryGit':_0x3d55d3[_0x3ea578(0x225)],'syncRecord':_0x44b08c})[_0x3ea578(0x1f5)](_0x52638b=>this[_0x3ea578(0x1cc)](_0x44b08c,_0x52638b));}}}catch(_0x4596b3){this['logger'][_0x3ea578(0x1ef)](_0x4596b3);_0x4596b3 instanceof too_many_requests_error_1['TooManyRequests']?(await this[_0x3ea578(0x213)]['log'](this[_0x3ea578(0x1be)]+_0x3ea578(0x22a))[_0x3ea578(0x21e)](),await utils_1['sleep'](0x3c*0x3c*0x3e8),this['run'](this[_0x3ea578(0x1c0)][_0x3ea578(0x1cd)])):await this[_0x3ea578(0x213)][_0x3ea578(0x1ef)](this[_0x3ea578(0x1be)]+_0x3ea578(0x1cb)+_0x4596b3)[_0x3ea578(0x21e)]();return;}await this[_0x3ea578(0x213)][_0x3ea578(0x1c6)](this[_0x3ea578(0x1be)]+_0x3ea578(0x22e))[_0x3ea578(0x21e)](),await this[_0x3ea578(0x222)][_0x3ea578(0x224)](_0x1ae097)['catch'](()=>null);}};SyncService=SyncService_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a67_0x26591d(0x1c4),[salesforce_service_1[a67_0x26591d(0x1e2)],salesforce_sync_service_1[a67_0x26591d(0x1db)],connection_1['ProvidersFactory']])],SyncService),exports[a67_0x26591d(0x1eb)]=SyncService;