const a110_0x5e816b=a110_0xd873;function a110_0x4722(){const _0x148c97=['927260ZiUpzE','find','../../salesforce/services/salesforce.service','metadata','28578NWeXHl','componentsMetadata','length','design:paramtypes','../../salesforce/services/salesforce-git-sync.service','fileName','search','salesforceGitSync','../../parsers/mdapi/parser-v2','filter','fetchRepositoryOrBranchData','GitCommitService','8WEVhsh','replace','proceedFile','setCommitDto','(((.+)+)+)+$','push','toString','fetchRepositoryComponents','getRepositoryRecordByName','crc32','1121163TnrwGV','readFilesByFilename','repositoryGit','__esModule','__metadata','match','parse','patch','constructor','salesforceRest','../../parsers/utils','252bLrpsx','syncRecord','fetchBranchComponents','repositoryId','retrieveAttachment','type','branch','then','indexOf','recordTypes','getRecordTypes','getUnusedComponentsFilePaths','Synchronization_Status__c','salesforceSync','defineProperty','__decorate','fileNames','FLOSUM_GIT_NAMESPACE','now','force','master','TASKS_PER_TICK','lastCommit','splice','11942792PiFZhg','crc','68260EtIAep','catch','Last_Updated_On__c','updateStatus','Service','fetchRepositoryComponentsByFilenames','updateRemoteState','48FxZFBz','salesforce','fetchComponentsMetadata','META_XML_EXTENSION','name','([./-]{1}|$)','object','branchId','createCommit','apply','typedi','gitCommit','map','SalesforceSyncService','../../salesforce/services/salesforce-sync.service','1131438YLmPMv','../../../../constants','FLOSUM_NAMESPACE','10850931GCClDR','function','string'];a110_0x4722=function(){return _0x148c97;};return a110_0x4722();}(function(_0x5b4643,_0x565e4c){const _0x44a12b=a110_0xd873,_0x22c6ac=_0x5b4643();while(!![]){try{const _0xd255df=-parseInt(_0x44a12b(0xc3))/0x1+parseInt(_0x44a12b(0xcd))/0x2+-parseInt(_0x44a12b(0xe3))/0x3*(parseInt(_0x44a12b(0xd9))/0x4)+-parseInt(_0x44a12b(0xad))/0x5*(-parseInt(_0x44a12b(0xb4))/0x6)+-parseInt(_0x44a12b(0xc6))/0x7+parseInt(_0x44a12b(0xab))/0x8+-parseInt(_0x44a12b(0xee))/0x9*(-parseInt(_0x44a12b(0xc9))/0xa);if(_0xd255df===_0x565e4c)break;else _0x22c6ac['push'](_0x22c6ac['shift']());}catch(_0x7d33b8){_0x22c6ac['push'](_0x22c6ac['shift']());}}}(a110_0x4722,0xbf535));const a110_0x3902fb=(function(){let _0xfff34d=!![];return function(_0x4e30d3,_0x273fa7){const _0x320866=_0xfff34d?function(){const _0x4df927=a110_0xd873;if(_0x273fa7){const _0x1741da=_0x273fa7[_0x4df927(0xbd)](_0x4e30d3,arguments);return _0x273fa7=null,_0x1741da;}}:function(){};return _0xfff34d=![],_0x320866;};}()),a110_0x9912c4=a110_0x3902fb(this,function(){const _0x1edb0d=a110_0xd873;return a110_0x9912c4[_0x1edb0d(0xdf)]()[_0x1edb0d(0xd3)](_0x1edb0d(0xdd))[_0x1edb0d(0xdf)]()[_0x1edb0d(0xeb)](a110_0x9912c4)[_0x1edb0d(0xd3)](_0x1edb0d(0xdd));});a110_0x9912c4();'use strict';var __decorate=this&&this[a110_0x5e816b(0xa2)]||function(_0x5e427e,_0x3a1f25,_0x4f9dd9,_0x18774d){const _0x25094c=a110_0x5e816b;var _0x26396c=arguments[_0x25094c(0xcf)],_0x13e2cf=_0x26396c<0x3?_0x3a1f25:_0x18774d===null?_0x18774d=Object['getOwnPropertyDescriptor'](_0x3a1f25,_0x4f9dd9):_0x18774d,_0x1f44b7;if(typeof Reflect===_0x25094c(0xba)&&typeof Reflect['decorate']===_0x25094c(0xc7))_0x13e2cf=Reflect['decorate'](_0x5e427e,_0x3a1f25,_0x4f9dd9,_0x18774d);else{for(var _0x12735c=_0x5e427e[_0x25094c(0xcf)]-0x1;_0x12735c>=0x0;_0x12735c--)if(_0x1f44b7=_0x5e427e[_0x12735c])_0x13e2cf=(_0x26396c<0x3?_0x1f44b7(_0x13e2cf):_0x26396c>0x3?_0x1f44b7(_0x3a1f25,_0x4f9dd9,_0x13e2cf):_0x1f44b7(_0x3a1f25,_0x4f9dd9))||_0x13e2cf;}return _0x26396c>0x3&&_0x13e2cf&&Object[_0x25094c(0xa1)](_0x3a1f25,_0x4f9dd9,_0x13e2cf),_0x13e2cf;},__metadata=this&&this[a110_0x5e816b(0xe7)]||function(_0x383b5c,_0xdcaf35){const _0x49add8=a110_0x5e816b;if(typeof Reflect===_0x49add8(0xba)&&typeof Reflect[_0x49add8(0xcc)]==='function')return Reflect[_0x49add8(0xcc)](_0x383b5c,_0xdcaf35);};Object['defineProperty'](exports,a110_0x5e816b(0xe6),{'value':!![]}),exports[a110_0x5e816b(0xd8)]=void 0x0;function a110_0xd873(_0x1841ec,_0x1dc64a){const _0x5bd8a8=a110_0x4722();return a110_0xd873=function(_0x9912c4,_0x3902fb){_0x9912c4=_0x9912c4-0x9c;let _0x472200=_0x5bd8a8[_0x9912c4];return _0x472200;},a110_0xd873(_0x1841ec,_0x1dc64a);}const constants_1=require(a110_0x5e816b(0xc4)),salesforce_git_sync_service_1=require(a110_0x5e816b(0xd1)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a110_0x5e816b(0xbe)),salesforce_sync_service_1=require(a110_0x5e816b(0xc2)),salesforce_service_1=require(a110_0x5e816b(0xcb)),parser_v2_1=require(a110_0x5e816b(0xd5)),utils_1=require(a110_0x5e816b(0xed));let GitCommitService=class GitCommitService{constructor(_0x5cd839,_0x566d50,_0x383637,_0x5aeccb){const _0x140d9d=a110_0x5e816b;this[_0x140d9d(0xd4)]=_0x5cd839,this[_0x140d9d(0xec)]=_0x566d50,this[_0x140d9d(0xa0)]=_0x383637,this[_0x140d9d(0xb5)]=_0x5aeccb,this[_0x140d9d(0xa8)]=0xc8;}get[a110_0x5e816b(0xf1)](){const _0x2037e2=a110_0x5e816b;var _0xeb680b;return((_0xeb680b=this[_0x2037e2(0xef)])===null||_0xeb680b===void 0x0?void 0x0:_0xeb680b['repositoryId'])||'';}get[a110_0x5e816b(0xbb)](){const _0x388a5c=a110_0x5e816b;var _0x31e5aa;return((_0x31e5aa=this[_0x388a5c(0xef)])===null||_0x31e5aa===void 0x0?void 0x0:_0x31e5aa[_0x388a5c(0xbb)])||'';}async[a110_0x5e816b(0xbc)](_0x477833){const _0x54e2d5=a110_0x5e816b;return this['salesforceGitSync'][_0x54e2d5(0xbc)](_0x477833,this[_0x54e2d5(0xf1)]);}async['checkSyncStatus'](_0x3a2e3a){const _0x378a39=a110_0x5e816b;if(this['syncRecord']){const _0x1632d2=await this[_0x378a39(0xa0)]['getRemoteStateAttachmentId'](this[_0x378a39(0xef)]),_0x548a46=await this[_0x378a39(0xb5)][_0x378a39(0xf2)](_0x1632d2)[_0x378a39(0xf5)](_0x34bd4c=>typeof _0x34bd4c===_0x378a39(0xc8)?JSON[_0x378a39(0xe9)](_0x34bd4c):_0x34bd4c)[_0x378a39(0xae)](()=>({}));if(_0x548a46[this[_0x378a39(0xbf)]['repositoryGit']]){if(_0x548a46[this['gitCommit'][_0x378a39(0xe5)]][_0x378a39(0xa9)]===_0x3a2e3a)return!![];}return![];}return![];}async[a110_0x5e816b(0xb3)](_0x2c2aa6){const _0x258414=a110_0x5e816b;this[_0x258414(0xef)]&&await this[_0x258414(0xa0)][_0x258414(0xb3)](this[_0x258414(0xef)],_0x2c2aa6);}[a110_0x5e816b(0x9e)](){const _0x556566=a110_0x5e816b;return this['componentsMetadata'][_0x556566(0xc0)](({fileName:_0x30c31a})=>_0x30c31a);}async[a110_0x5e816b(0xdb)](_0xf4da95,_0x31c319,_0x2ba2d9){const _0x49d937=a110_0x5e816b,_0x3382c4=new RegExp('^'+_0xf4da95+_0x49d937(0xb9));let _0x204ebc=[_0xf4da95];_0x2ba2d9&&(_0x204ebc=(0x0,utils_1['filterParserPaths'])(await(0x0,utils_1[_0x49d937(0xe4)])(_0xf4da95,_0x31c319)['catch'](()=>[])));const _0x23a347=_0x2ba2d9?this[_0x49d937(0xce)][_0x49d937(0xd6)](_0x14db05=>_0x14db05[_0x49d937(0xd2)][_0x49d937(0xe8)](_0x3382c4)):this['componentsMetadata']['filter'](_0x121ba8=>_0x121ba8[_0x49d937(0xd2)]===_0xf4da95||_0x121ba8[_0x49d937(0xd2)]===_0xf4da95[_0x49d937(0xda)](constants_1[_0x49d937(0xb7)],'')),_0x10e929=new parser_v2_1['MDApiParserV2'](_0x31c319,_0x204ebc),_0x16a968=await _0x10e929['parse'](),_0x5108a1=[],_0x1b3d7a=[];for(const _0x59b715 of _0x16a968){const _0x337809=_0x23a347[_0x49d937(0xca)](_0x342930=>_0x342930[_0x49d937(0xb8)]===_0x59b715[_0x49d937(0xb8)]&&_0x342930['type']===_0x59b715[_0x49d937(0xf3)]);if(!_0x337809){_0x5108a1[_0x49d937(0xde)](_0x59b715);continue;}_0x59b715[_0x49d937(0xac)]!==_0x337809[_0x49d937(0xe2)]&&_0x1b3d7a['push']({'meta':_0x337809,'component':_0x59b715}),_0x23a347['splice'](_0x23a347[_0x49d937(0xf6)](_0x337809),0x1);}return{'inserted':_0x5108a1,'modified':_0x1b3d7a,'removed':_0x23a347};}async[a110_0x5e816b(0xd7)](){const _0x482aca=a110_0x5e816b;this['syncRecord']=this[_0x482aca(0xbf)][_0x482aca(0xf4)]===_0x482aca(0xa7)?await this[_0x482aca(0xa0)][_0x482aca(0xe1)](this[_0x482aca(0xbf)]['repository']):await this[_0x482aca(0xa0)]['getBranchRecordByName'](this['gitCommit'][_0x482aca(0xf4)]),this[_0x482aca(0x9c)]=await this[_0x482aca(0xd4)]['getComponentRecordTypes']();}async[a110_0x5e816b(0xb6)](_0x576324){const _0x46b7c4=a110_0x5e816b;if(this[_0x46b7c4(0xbf)][_0x46b7c4(0xa6)]||_0x576324){this[_0x46b7c4(0xce)]=this[_0x46b7c4(0xbb)]?await this[_0x46b7c4(0xd4)][_0x46b7c4(0xf0)](this[_0x46b7c4(0xbb)]):await this[_0x46b7c4(0xd4)][_0x46b7c4(0xe0)](this[_0x46b7c4(0xf1)]);return;}const _0x27877c=[...new Set(this[_0x46b7c4(0xbf)][_0x46b7c4(0xa3)][_0x46b7c4(0xc0)](_0x3d0b2d=>_0x3d0b2d['replace'](constants_1[_0x46b7c4(0xb7)],'')))];this[_0x46b7c4(0xce)]=[];while(_0x27877c[_0x46b7c4(0xcf)]){const _0xb2847b=_0x27877c[_0x46b7c4(0xaa)](0x0,this[_0x46b7c4(0xa8)]),_0x3d25a0=this[_0x46b7c4(0xbb)]?await this['salesforceGitSync']['fetchBranchComponentsByFilenames'](_0xb2847b,this['branchId']):await this[_0x46b7c4(0xd4)][_0x46b7c4(0xb2)](_0xb2847b,this['repositoryId']);this[_0x46b7c4(0xce)][_0x46b7c4(0xde)](..._0x3d25a0);}}async[a110_0x5e816b(0xb0)](_0x14bcb3){const _0xc7c8e9=a110_0x5e816b;this['branchId']?await this[_0xc7c8e9(0xec)][_0xc7c8e9(0xea)](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0xc7c8e9(0x9f)]:_0x14bcb3,[constants_1[_0xc7c8e9(0xc5)]+_0xc7c8e9(0xaf)]:Date[_0xc7c8e9(0xa5)]()}):await this[_0xc7c8e9(0xec)][_0xc7c8e9(0xea)](constants_1['FLOSUM_REPOSITORY'],this['repositoryId'],{[constants_1[_0xc7c8e9(0xa4)]+_0xc7c8e9(0x9f)]:_0x14bcb3});}[a110_0x5e816b(0xdc)](_0x506289){const _0x17a7f5=a110_0x5e816b;this[_0x17a7f5(0xbf)]=_0x506289;}[a110_0x5e816b(0x9d)](){const _0x1b538e=a110_0x5e816b;return this[_0x1b538e(0x9c)];}['getRepositoryId'](){return this['repositoryId'];}['getBranchId'](){const _0x165139=a110_0x5e816b;return this[_0x165139(0xbb)];}};GitCommitService=__decorate([(0x0,typedi_1[a110_0x5e816b(0xb1)])({'transient':!![]}),__metadata(a110_0x5e816b(0xd0),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a110_0x5e816b(0xc1)],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a110_0x5e816b(0xd8)]=GitCommitService;