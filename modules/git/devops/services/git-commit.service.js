const a79_0x59be7d=a79_0x54e6;(function(_0x39b0fa,_0x2804ef){const _0x118db5=a79_0x54e6,_0x54ad0a=_0x39b0fa();while(!![]){try{const _0x27334b=-parseInt(_0x118db5(0x183))/0x1+parseInt(_0x118db5(0x188))/0x2+-parseInt(_0x118db5(0x18c))/0x3+-parseInt(_0x118db5(0x1bf))/0x4*(parseInt(_0x118db5(0x1a9))/0x5)+parseInt(_0x118db5(0x172))/0x6*(parseInt(_0x118db5(0x1b8))/0x7)+parseInt(_0x118db5(0x1bd))/0x8*(parseInt(_0x118db5(0x19b))/0x9)+-parseInt(_0x118db5(0x1b0))/0xa*(-parseInt(_0x118db5(0x175))/0xb);if(_0x27334b===_0x2804ef)break;else _0x54ad0a['push'](_0x54ad0a['shift']());}catch(_0x5c75db){_0x54ad0a['push'](_0x54ad0a['shift']());}}}(a79_0x1888,0x7fe68));function a79_0x1888(){const _0x580ccb=['salesforceSync','patch','fileName','search','filter','FLOSUM_REPOSITORY','Synchronization_Status__c','563251viNtJH','getRepositoryRecordByName','componentsMetadata','defineProperty','fetchBranchComponents','1971386InaXjJ','proceedFile','getBranchId','checkSyncStatus','1667871PPquoQ','typedi','replace','push','design:paramtypes','createCommit','find','META_XML_EXTENSION','length','getOwnPropertyDescriptor','toString','syncRecord','fetchRepositoryOrBranchData','then','fetchRepositoryComponents','225GdGakF','SalesforceSyncService','getRepositoryId','repositoryId','../../../../constants','function','TASKS_PER_TICK','SalesforceRestService','fetchBranchComponentsByFilenames','GitCommitService','recordTypes','Service','updateStatus','../../parsers/utils','5kToKJQ','fetchRepositoryComponentsByFilenames','gitCommit','salesforceGitSync','indexOf','salesforce','salesforceRest','340dljcYQ','metadata','splice','filterParserPaths','parse','now','../../salesforce/services/salesforce-rest.service','../../salesforce/services/salesforce-sync.service','1689359efkQta','FLOSUM_NAMESPACE','object','master','type','263152RFchnQ','getRecordTypes','1828760XYPdHX','updateRemoteState','getComponentRecordTypes','(((.+)+)+)+$','match','getRemoteStateAttachmentId','MDApiParserV2','readFilesByFilename','FLOSUM_GIT_NAMESPACE','name','__metadata','([./-]{1}|$)','6TxUtud','branch','branchId','16467QIWVQs','crc','repository','catch','repositoryGit','crc32','force'];a79_0x1888=function(){return _0x580ccb;};return a79_0x1888();}const a79_0x4ca9bb=(function(){let _0x362a5a=!![];return function(_0x4b23a1,_0x2b29e8){const _0x36f110=_0x362a5a?function(){if(_0x2b29e8){const _0x5e39d9=_0x2b29e8['apply'](_0x4b23a1,arguments);return _0x2b29e8=null,_0x5e39d9;}}:function(){};return _0x362a5a=![],_0x36f110;};}()),a79_0x52c420=a79_0x4ca9bb(this,function(){const _0x36a4e5=a79_0x54e6;return a79_0x52c420['toString']()[_0x36a4e5(0x17f)](_0x36a4e5(0x1c2))[_0x36a4e5(0x196)]()['constructor'](a79_0x52c420)['search'](_0x36a4e5(0x1c2));});a79_0x52c420();'use strict';var __decorate=this&&this['__decorate']||function(_0x45979e,_0x2e718d,_0x56abcc,_0x2cd3b9){const _0x2d0174=a79_0x54e6;var _0x4e4b7c=arguments[_0x2d0174(0x194)],_0x3b0fad=_0x4e4b7c<0x3?_0x2e718d:_0x2cd3b9===null?_0x2cd3b9=Object[_0x2d0174(0x195)](_0x2e718d,_0x56abcc):_0x2cd3b9,_0x455f6c;if(typeof Reflect===_0x2d0174(0x1ba)&&typeof Reflect['decorate']===_0x2d0174(0x1a0))_0x3b0fad=Reflect['decorate'](_0x45979e,_0x2e718d,_0x56abcc,_0x2cd3b9);else{for(var _0x4479e7=_0x45979e[_0x2d0174(0x194)]-0x1;_0x4479e7>=0x0;_0x4479e7--)if(_0x455f6c=_0x45979e[_0x4479e7])_0x3b0fad=(_0x4e4b7c<0x3?_0x455f6c(_0x3b0fad):_0x4e4b7c>0x3?_0x455f6c(_0x2e718d,_0x56abcc,_0x3b0fad):_0x455f6c(_0x2e718d,_0x56abcc))||_0x3b0fad;}return _0x4e4b7c>0x3&&_0x3b0fad&&Object[_0x2d0174(0x186)](_0x2e718d,_0x56abcc,_0x3b0fad),_0x3b0fad;},__metadata=this&&this[a79_0x59be7d(0x1c9)]||function(_0x4dfe3f,_0x12d33d){const _0x5dc475=a79_0x59be7d;if(typeof Reflect===_0x5dc475(0x1ba)&&typeof Reflect[_0x5dc475(0x1b1)]===_0x5dc475(0x1a0))return Reflect['metadata'](_0x4dfe3f,_0x12d33d);};Object[a79_0x59be7d(0x186)](exports,'__esModule',{'value':!![]}),exports[a79_0x59be7d(0x1a4)]=void 0x0;const constants_1=require(a79_0x59be7d(0x19f)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a79_0x59be7d(0x1b6)),typedi_1=require(a79_0x59be7d(0x18d)),salesforce_sync_service_1=require(a79_0x59be7d(0x1b7)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require(a79_0x59be7d(0x1a8));let GitCommitService=class GitCommitService{constructor(_0x3d841d,_0x4be625,_0x1e1c95,_0x4ba060){const _0x1d78a5=a79_0x59be7d;this[_0x1d78a5(0x1ac)]=_0x3d841d,this[_0x1d78a5(0x1af)]=_0x4be625,this[_0x1d78a5(0x17c)]=_0x1e1c95,this[_0x1d78a5(0x1ae)]=_0x4ba060,this['TASKS_PER_TICK']=0xc8;}get[a79_0x59be7d(0x19e)](){const _0xa74222=a79_0x59be7d;var _0x1b5114;return((_0x1b5114=this[_0xa74222(0x197)])===null||_0x1b5114===void 0x0?void 0x0:_0x1b5114[_0xa74222(0x19e)])||'';}get['branchId'](){const _0x40265d=a79_0x59be7d;var _0x18069a;return((_0x18069a=this[_0x40265d(0x197)])===null||_0x18069a===void 0x0?void 0x0:_0x18069a[_0x40265d(0x174)])||'';}async['createCommit'](_0x11ef4c){const _0x30a74c=a79_0x59be7d;return this[_0x30a74c(0x1ac)][_0x30a74c(0x191)](_0x11ef4c,this[_0x30a74c(0x19e)]);}async[a79_0x59be7d(0x18b)](_0x20e9f7){const _0x4b8ff4=a79_0x59be7d;if(this[_0x4b8ff4(0x197)]){const _0x1653d0=await this[_0x4b8ff4(0x17c)][_0x4b8ff4(0x1c4)](this[_0x4b8ff4(0x197)]),_0x348634=await this[_0x4b8ff4(0x1ae)]['retrieveAttachment'](_0x1653d0)[_0x4b8ff4(0x199)](_0x45315f=>typeof _0x45315f==='string'?JSON[_0x4b8ff4(0x1b4)](_0x45315f):_0x45315f)[_0x4b8ff4(0x178)](()=>({}));if(_0x348634[this[_0x4b8ff4(0x1ab)]['repositoryGit']]){if(_0x348634[this[_0x4b8ff4(0x1ab)][_0x4b8ff4(0x179)]]['lastCommit']===_0x20e9f7)return!![];}return![];}return![];}async['updateRemoteState'](_0x5818e7){const _0xff46c3=a79_0x59be7d;this[_0xff46c3(0x197)]&&await this['salesforceSync'][_0xff46c3(0x1c0)](this[_0xff46c3(0x197)],_0x5818e7);}['getUnusedComponentsFilePaths'](){const _0x4feba4=a79_0x59be7d;return this[_0x4feba4(0x185)]['map'](({fileName:_0x5228f7})=>_0x5228f7);}async[a79_0x59be7d(0x189)](_0x397b9c,_0x5d0ad,_0x36bcb7){const _0x5857d5=a79_0x59be7d,_0x4e62de=new RegExp('^'+_0x397b9c+_0x5857d5(0x171));let _0x164541=[_0x397b9c];_0x36bcb7&&(_0x164541=(0x0,utils_1[_0x5857d5(0x1b3)])(await(0x0,utils_1[_0x5857d5(0x1c6)])(_0x397b9c,_0x5d0ad)[_0x5857d5(0x178)](()=>[])));const _0x15ab80=_0x36bcb7?this[_0x5857d5(0x185)][_0x5857d5(0x180)](_0x3edd1c=>_0x3edd1c[_0x5857d5(0x17e)][_0x5857d5(0x1c3)](_0x4e62de)):this[_0x5857d5(0x185)][_0x5857d5(0x180)](_0x2e6540=>_0x2e6540[_0x5857d5(0x17e)]===_0x397b9c||_0x2e6540['fileName']===_0x397b9c[_0x5857d5(0x18e)](constants_1[_0x5857d5(0x193)],'')),_0x5520ba=new parser_v2_1[(_0x5857d5(0x1c5))](_0x5d0ad,_0x164541),_0x53379b=await _0x5520ba['parse'](),_0x381eac=[],_0x285a70=[];for(const _0x3aaf2c of _0x53379b){const _0x300f0d=_0x15ab80[_0x5857d5(0x192)](_0x435032=>_0x435032[_0x5857d5(0x1c8)]===_0x3aaf2c[_0x5857d5(0x1c8)]&&_0x435032[_0x5857d5(0x1bc)]===_0x3aaf2c[_0x5857d5(0x1bc)]);if(!_0x300f0d){_0x381eac[_0x5857d5(0x18f)](_0x3aaf2c);continue;}_0x3aaf2c[_0x5857d5(0x176)]!==_0x300f0d[_0x5857d5(0x17a)]&&_0x285a70[_0x5857d5(0x18f)]({'meta':_0x300f0d,'component':_0x3aaf2c}),_0x15ab80[_0x5857d5(0x1b2)](_0x15ab80[_0x5857d5(0x1ad)](_0x300f0d),0x1);}return{'inserted':_0x381eac,'modified':_0x285a70,'removed':_0x15ab80};}async[a79_0x59be7d(0x198)](){const _0x2c3b50=a79_0x59be7d;this[_0x2c3b50(0x197)]=this[_0x2c3b50(0x1ab)][_0x2c3b50(0x173)]===_0x2c3b50(0x1bb)?await this[_0x2c3b50(0x17c)][_0x2c3b50(0x184)](this[_0x2c3b50(0x1ab)][_0x2c3b50(0x177)]):await this[_0x2c3b50(0x17c)]['getBranchRecordByName'](this[_0x2c3b50(0x1ab)][_0x2c3b50(0x173)]),this[_0x2c3b50(0x1a5)]=await this[_0x2c3b50(0x1ac)][_0x2c3b50(0x1c1)]();}async['fetchComponentsMetadata'](_0x251d4f){const _0x43f2c3=a79_0x59be7d;if(this[_0x43f2c3(0x1ab)][_0x43f2c3(0x17b)]||_0x251d4f){this[_0x43f2c3(0x185)]=this[_0x43f2c3(0x174)]?await this['salesforceGitSync'][_0x43f2c3(0x187)](this[_0x43f2c3(0x174)]):await this[_0x43f2c3(0x1ac)][_0x43f2c3(0x19a)](this[_0x43f2c3(0x19e)]);return;}const _0x33fcbf=[...new Set(this['gitCommit']['fileNames']['map'](_0x11fdfd=>_0x11fdfd['replace'](constants_1[_0x43f2c3(0x193)],'')))];this['componentsMetadata']=[];while(_0x33fcbf[_0x43f2c3(0x194)]){const _0x465570=_0x33fcbf['splice'](0x0,this[_0x43f2c3(0x1a1)]),_0x387ffb=this[_0x43f2c3(0x174)]?await this[_0x43f2c3(0x1ac)][_0x43f2c3(0x1a3)](_0x465570,this[_0x43f2c3(0x174)]):await this[_0x43f2c3(0x1ac)][_0x43f2c3(0x1aa)](_0x465570,this[_0x43f2c3(0x19e)]);this[_0x43f2c3(0x185)][_0x43f2c3(0x18f)](..._0x387ffb);}}async[a79_0x59be7d(0x1a7)](_0x4856ea){const _0x23fbee=a79_0x59be7d;this[_0x23fbee(0x174)]?await this[_0x23fbee(0x1af)][_0x23fbee(0x17d)](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x23fbee(0x182)]:_0x4856ea,[constants_1[_0x23fbee(0x1b9)]+'Last_Updated_On__c']:Date[_0x23fbee(0x1b5)]()}):await this['salesforceRest'][_0x23fbee(0x17d)](constants_1[_0x23fbee(0x181)],this[_0x23fbee(0x19e)],{[constants_1[_0x23fbee(0x1c7)]+'Synchronization_Status__c']:_0x4856ea});}['setCommitDto'](_0x3e5c33){this['gitCommit']=_0x3e5c33;}[a79_0x59be7d(0x1be)](){const _0x184470=a79_0x59be7d;return this[_0x184470(0x1a5)];}[a79_0x59be7d(0x19d)](){const _0x39ddaf=a79_0x59be7d;return this[_0x39ddaf(0x19e)];}[a79_0x59be7d(0x18a)](){return this['branchId'];}};function a79_0x54e6(_0x14198a,_0xc5b2ce){const _0x4d06ac=a79_0x1888();return a79_0x54e6=function(_0x52c420,_0x4ca9bb){_0x52c420=_0x52c420-0x171;let _0x188895=_0x4d06ac[_0x52c420];return _0x188895;},a79_0x54e6(_0x14198a,_0xc5b2ce);}GitCommitService=__decorate([(0x0,typedi_1[a79_0x59be7d(0x1a6)])({'transient':!![]}),__metadata(a79_0x59be7d(0x190),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a79_0x59be7d(0x1a2)],salesforce_sync_service_1[a79_0x59be7d(0x19c)],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a79_0x59be7d(0x1a4)]=GitCommitService;