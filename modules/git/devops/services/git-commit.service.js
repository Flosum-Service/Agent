const a112_0x49b2b0=a112_0x4226;(function(_0x1284ac,_0x444841){const _0x30a1f0=a112_0x4226,_0x390c66=_0x1284ac();while(!![]){try{const _0x9aeefa=-parseInt(_0x30a1f0(0x1ef))/0x1+parseInt(_0x30a1f0(0x20e))/0x2*(parseInt(_0x30a1f0(0x1e5))/0x3)+parseInt(_0x30a1f0(0x1e6))/0x4+-parseInt(_0x30a1f0(0x1f7))/0x5+parseInt(_0x30a1f0(0x22b))/0x6+-parseInt(_0x30a1f0(0x1e9))/0x7+parseInt(_0x30a1f0(0x207))/0x8*(parseInt(_0x30a1f0(0x1d4))/0x9);if(_0x9aeefa===_0x444841)break;else _0x390c66['push'](_0x390c66['shift']());}catch(_0x318cc1){_0x390c66['push'](_0x390c66['shift']());}}}(a112_0x56d8,0x42d7e));const a112_0x4df11d=(function(){let _0x4e1224=!![];return function(_0x86b054,_0x273abe){const _0x5ef388=_0x4e1224?function(){const _0x3f6620=a112_0x4226;if(_0x273abe){const _0x117cbf=_0x273abe[_0x3f6620(0x217)](_0x86b054,arguments);return _0x273abe=null,_0x117cbf;}}:function(){};return _0x4e1224=![],_0x5ef388;};}()),a112_0x1f5343=a112_0x4df11d(this,function(){const _0x3154dc=a112_0x4226;return a112_0x1f5343[_0x3154dc(0x1ec)]()[_0x3154dc(0x1fc)](_0x3154dc(0x209))[_0x3154dc(0x1ec)]()[_0x3154dc(0x20a)](a112_0x1f5343)[_0x3154dc(0x1fc)]('(((.+)+)+)+$');});a112_0x1f5343();'use strict';var __decorate=this&&this[a112_0x49b2b0(0x1d5)]||function(_0x368f5d,_0x4713b0,_0x28e453,_0x58b986){const _0x1da9d5=a112_0x49b2b0;var _0x5c9cc2=arguments[_0x1da9d5(0x1fe)],_0x3e51fe=_0x5c9cc2<0x3?_0x4713b0:_0x58b986===null?_0x58b986=Object['getOwnPropertyDescriptor'](_0x4713b0,_0x28e453):_0x58b986,_0x3b32d9;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1da9d5(0x1d6))_0x3e51fe=Reflect[_0x1da9d5(0x229)](_0x368f5d,_0x4713b0,_0x28e453,_0x58b986);else{for(var _0x547ea9=_0x368f5d[_0x1da9d5(0x1fe)]-0x1;_0x547ea9>=0x0;_0x547ea9--)if(_0x3b32d9=_0x368f5d[_0x547ea9])_0x3e51fe=(_0x5c9cc2<0x3?_0x3b32d9(_0x3e51fe):_0x5c9cc2>0x3?_0x3b32d9(_0x4713b0,_0x28e453,_0x3e51fe):_0x3b32d9(_0x4713b0,_0x28e453))||_0x3e51fe;}return _0x5c9cc2>0x3&&_0x3e51fe&&Object[_0x1da9d5(0x1f2)](_0x4713b0,_0x28e453,_0x3e51fe),_0x3e51fe;},__metadata=this&&this[a112_0x49b2b0(0x1de)]||function(_0x2d6837,_0x3dc4b7){const _0x510271=a112_0x49b2b0;if(typeof Reflect===_0x510271(0x211)&&typeof Reflect[_0x510271(0x1eb)]==='function')return Reflect[_0x510271(0x1eb)](_0x2d6837,_0x3dc4b7);};Object[a112_0x49b2b0(0x1f2)](exports,a112_0x49b2b0(0x228),{'value':!![]}),exports[a112_0x49b2b0(0x201)]=void 0x0;function a112_0x4226(_0x306ba3,_0x173951){const _0x23a795=a112_0x56d8();return a112_0x4226=function(_0x1f5343,_0x4df11d){_0x1f5343=_0x1f5343-0x1d4;let _0x56d89d=_0x23a795[_0x1f5343];return _0x56d89d;},a112_0x4226(_0x306ba3,_0x173951);}const constants_1=require(a112_0x49b2b0(0x1df)),salesforce_git_sync_service_1=require(a112_0x49b2b0(0x1e0)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require('typedi'),salesforce_sync_service_1=require(a112_0x49b2b0(0x1e7)),salesforce_service_1=require(a112_0x49b2b0(0x1f6)),factory_parser_1=require(a112_0x49b2b0(0x1f9)),path_utils_1=require('../utils/path.utils'),components_utils_1=require('../utils/components.utils');let GitCommitService=class GitCommitService{constructor(_0x21961b,_0x3078ad,_0x41fede,_0x461b26){const _0xdaf6c=a112_0x49b2b0;this[_0xdaf6c(0x22e)]=_0x21961b,this[_0xdaf6c(0x22a)]=_0x3078ad,this['salesforceSync']=_0x41fede,this['salesforce']=_0x461b26,this['TASKS_PER_TICK']=0xc8;}get['repositoryId'](){const _0x502c73=a112_0x49b2b0;var _0x1e71e6;return((_0x1e71e6=this[_0x502c73(0x221)])===null||_0x1e71e6===void 0x0?void 0x0:_0x1e71e6['repositoryId'])||'';}get[a112_0x49b2b0(0x224)](){const _0x5635c8=a112_0x49b2b0;var _0x58270d;return((_0x58270d=this[_0x5635c8(0x221)])===null||_0x58270d===void 0x0?void 0x0:_0x58270d[_0x5635c8(0x224)])||'';}get['recordType'](){const _0x4b5335=a112_0x49b2b0;return this[_0x4b5335(0x221)][_0x4b5335(0x1e3)];}async[a112_0x49b2b0(0x1e1)](_0x2839a6){const _0x378b7b=a112_0x49b2b0;return this['salesforceGitSync'][_0x378b7b(0x1e1)](_0x2839a6,this['repositoryId']);}async['checkSyncStatus'](_0x1da399){const _0x185efe=a112_0x49b2b0;if(this['syncRecord']){const _0x5e95c0=await this[_0x185efe(0x222)][_0x185efe(0x1e8)](this[_0x185efe(0x221)]),_0x3b784d=await this[_0x185efe(0x206)][_0x185efe(0x21b)](_0x5e95c0)[_0x185efe(0x1db)](_0xbb9a0d=>typeof _0xbb9a0d===_0x185efe(0x20b)?JSON[_0x185efe(0x21d)](_0xbb9a0d):_0xbb9a0d)[_0x185efe(0x203)](()=>({}));if(_0x3b784d[this[_0x185efe(0x1fb)][_0x185efe(0x223)]]){if(_0x3b784d[this[_0x185efe(0x1fb)][_0x185efe(0x223)]][_0x185efe(0x200)]===_0x1da399)return!![];}return![];}return![];}async[a112_0x49b2b0(0x21e)](_0x4de3fd){const _0x30c7df=a112_0x49b2b0;this[_0x30c7df(0x221)]&&await this['salesforceSync']['updateRemoteState'](this[_0x30c7df(0x221)],_0x4de3fd);}[a112_0x49b2b0(0x21a)](){const _0x5e3982=a112_0x49b2b0;return this['componentsMetadata'][_0x5e3982(0x1fa)](({fileName:_0x4a0f16})=>_0x4a0f16);}async[a112_0x49b2b0(0x215)](_0x1182a0,_0x3a9156,_0x16e594){const _0x5aa0b1=a112_0x49b2b0,_0x48c358=await path_utils_1['PathUtils'][_0x5aa0b1(0x213)](this[_0x5aa0b1(0x221)][_0x5aa0b1(0x1e3)],_0x1182a0,_0x3a9156,_0x16e594),_0x3db1dc=components_utils_1[_0x5aa0b1(0x1dc)][_0x5aa0b1(0x220)](this[_0x5aa0b1(0x1e2)],_0x1182a0,_0x16e594,this[_0x5aa0b1(0x221)][_0x5aa0b1(0x1e3)]),_0xb7c541=factory_parser_1[_0x5aa0b1(0x202)][_0x5aa0b1(0x22c)]({'recordType':this[_0x5aa0b1(0x221)][_0x5aa0b1(0x1e3)],'sourceDir':_0x3a9156,'paths':_0x48c358}),_0x26c0c5=await _0xb7c541[_0x5aa0b1(0x1dd)](),_0x20b62a=[],_0x4d1998=[];for(const _0x278f0d of _0x26c0c5){const _0x5ad8e0=_0x3db1dc['find'](_0x35c932=>_0x35c932[_0x5aa0b1(0x216)]===_0x278f0d[_0x5aa0b1(0x216)]&&_0x35c932[_0x5aa0b1(0x218)]===_0x278f0d[_0x5aa0b1(0x218)]);if(!_0x5ad8e0){_0x20b62a[_0x5aa0b1(0x226)](_0x278f0d);continue;}_0x278f0d[_0x5aa0b1(0x21f)]!==_0x5ad8e0['crc32']&&_0x4d1998['push']({'meta':_0x5ad8e0,'component':_0x278f0d}),_0x3db1dc['splice'](_0x3db1dc[_0x5aa0b1(0x204)](_0x5ad8e0),0x1);}return{'inserted':_0x20b62a,'modified':_0x4d1998,'removed':_0x3db1dc};}async[a112_0x49b2b0(0x1f5)](){const _0x85751f=a112_0x49b2b0;this[_0x85751f(0x221)]=this['gitCommit'][_0x85751f(0x1e4)]==='master'?await this[_0x85751f(0x222)][_0x85751f(0x210)](this['gitCommit']['repository']):await this[_0x85751f(0x222)][_0x85751f(0x20c)](this[_0x85751f(0x1fb)]['branch']),this['recordTypes']=await this[_0x85751f(0x22e)]['getComponentRecordTypes']();}async[a112_0x49b2b0(0x1ff)](_0x3fef20){const _0x3a5621=a112_0x49b2b0;if(this[_0x3a5621(0x1fb)][_0x3a5621(0x1f0)]||_0x3fef20){this[_0x3a5621(0x1e2)]=this[_0x3a5621(0x224)]?await this[_0x3a5621(0x22e)][_0x3a5621(0x1d8)](this[_0x3a5621(0x224)]):await this[_0x3a5621(0x22e)][_0x3a5621(0x1ea)](this[_0x3a5621(0x20d)]);return;}const _0x2481de=components_utils_1['ComponentsUtils'][_0x3a5621(0x20f)](this['gitCommit'][_0x3a5621(0x21c)],this['syncRecord'][_0x3a5621(0x1e3)]);this[_0x3a5621(0x1e2)]=[];while(_0x2481de[_0x3a5621(0x1fe)]){const _0x2f5694=_0x2481de[_0x3a5621(0x1d9)](0x0,this[_0x3a5621(0x22d)]),_0x3ce9ff=this[_0x3a5621(0x224)]?await this[_0x3a5621(0x22e)][_0x3a5621(0x1ed)](_0x2f5694,this[_0x3a5621(0x224)]):await this[_0x3a5621(0x22e)][_0x3a5621(0x227)](_0x2f5694,this[_0x3a5621(0x20d)]);this[_0x3a5621(0x1e2)]['push'](..._0x3ce9ff);}}async[a112_0x49b2b0(0x214)](_0xbe3ad0){const _0x36cee1=a112_0x49b2b0;this[_0x36cee1(0x224)]?await this[_0x36cee1(0x22a)]['patch'](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1[_0x36cee1(0x219)]+_0x36cee1(0x1f3)]:_0xbe3ad0,[constants_1[_0x36cee1(0x1d7)]+'Last_Updated_On__c']:Date[_0x36cee1(0x212)]()}):await this[_0x36cee1(0x22a)][_0x36cee1(0x1da)](constants_1[_0x36cee1(0x1fd)],this['repositoryId'],{[constants_1[_0x36cee1(0x219)]+'Synchronization_Status__c']:_0xbe3ad0});}['setCommitDto'](_0x5133bb){const _0x1c3940=a112_0x49b2b0;this[_0x1c3940(0x1fb)]=_0x5133bb;}[a112_0x49b2b0(0x1f1)](){return this['recordTypes'];}[a112_0x49b2b0(0x208)](){const _0x282bde=a112_0x49b2b0;return this[_0x282bde(0x20d)];}['getBranchId'](){return this['branchId'];}};function a112_0x56d8(){const _0x444d8a=['push','fetchRepositoryComponentsByFilenames','__esModule','decorate','salesforceRest','1574592gTytSS','create','TASKS_PER_TICK','salesforceGitSync','45nkuuKk','__decorate','function','FLOSUM_NAMESPACE','fetchBranchComponents','splice','patch','then','ComponentsUtils','execute','__metadata','../../../../constants','../../salesforce/services/salesforce-git-sync.service','createCommit','componentsMetadata','recordTypeName','branch','3xekqSm','1842152OXTndz','../../salesforce/services/salesforce-sync.service','getRemoteStateAttachmentId','426573MEugba','fetchRepositoryComponents','metadata','toString','fetchBranchComponentsByFilenames','SalesforceSyncService','443676OSJbpl','force','getRecordTypes','defineProperty','Synchronization_Status__c','design:paramtypes','fetchRepositoryOrBranchData','../../salesforce/services/salesforce.service','92925SUJtkC','SalesforceRestService','../../parsers/factory.parser','map','gitCommit','search','FLOSUM_REPOSITORY','length','fetchComponentsMetadata','lastCommit','GitCommitService','FactoryParser','catch','indexOf','Service','salesforce','116856iGVREn','getRepositoryId','(((.+)+)+)+$','constructor','string','getBranchRecordByName','repositoryId','1970OwhZBI','prepareComponentNamesForFetchMetadata','getRepositoryRecordByName','object','now','readComponentPaths','updateStatus','proceedFile','name','apply','type','FLOSUM_GIT_NAMESPACE','getUnusedComponentsFilePaths','retrieveAttachment','fileNames','parse','updateRemoteState','crc','filterMetadataComponents','syncRecord','salesforceSync','repositoryGit','branchId','SalesforceService'];a112_0x56d8=function(){return _0x444d8a;};return a112_0x56d8();}GitCommitService=__decorate([(0x0,typedi_1[a112_0x49b2b0(0x205)])({'transient':!![]}),__metadata(a112_0x49b2b0(0x1f4),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a112_0x49b2b0(0x1f8)],salesforce_sync_service_1[a112_0x49b2b0(0x1ee)],salesforce_service_1[a112_0x49b2b0(0x225)]])],GitCommitService),exports[a112_0x49b2b0(0x201)]=GitCommitService;