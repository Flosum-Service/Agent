const a110_0x233009=a110_0x278b;(function(_0xac1439,_0x2cb19e){const _0x62338b=a110_0x278b,_0x2ff617=_0xac1439();while(!![]){try{const _0x12bd1e=parseInt(_0x62338b(0x1c6))/0x1*(parseInt(_0x62338b(0x1da))/0x2)+-parseInt(_0x62338b(0x1ef))/0x3+-parseInt(_0x62338b(0x217))/0x4*(parseInt(_0x62338b(0x1f1))/0x5)+parseInt(_0x62338b(0x21a))/0x6+parseInt(_0x62338b(0x210))/0x7+parseInt(_0x62338b(0x1eb))/0x8*(-parseInt(_0x62338b(0x1c5))/0x9)+parseInt(_0x62338b(0x1fb))/0xa;if(_0x12bd1e===_0x2cb19e)break;else _0x2ff617['push'](_0x2ff617['shift']());}catch(_0x55fdb0){_0x2ff617['push'](_0x2ff617['shift']());}}}(a110_0x4bff,0xd3e40));const a110_0x26c4b3=(function(){let _0x4a1ce3=!![];return function(_0x31d2a6,_0x12ddd0){const _0x413c05=_0x4a1ce3?function(){const _0x52dc6b=a110_0x278b;if(_0x12ddd0){const _0x3c11ab=_0x12ddd0[_0x52dc6b(0x21d)](_0x31d2a6,arguments);return _0x12ddd0=null,_0x3c11ab;}}:function(){};return _0x4a1ce3=![],_0x413c05;};}()),a110_0x37c83b=a110_0x26c4b3(this,function(){const _0x1a9511=a110_0x278b;return a110_0x37c83b[_0x1a9511(0x1f3)]()[_0x1a9511(0x1e4)](_0x1a9511(0x20c))[_0x1a9511(0x1f3)]()[_0x1a9511(0x1c9)](a110_0x37c83b)[_0x1a9511(0x1e4)]('(((.+)+)+)+$');});a110_0x37c83b();'use strict';function a110_0x278b(_0xee0dab,_0x6972a9){const _0x3e6aff=a110_0x4bff();return a110_0x278b=function(_0x37c83b,_0x26c4b3){_0x37c83b=_0x37c83b-0x1c5;let _0x4bff3e=_0x3e6aff[_0x37c83b];return _0x4bff3e;},a110_0x278b(_0xee0dab,_0x6972a9);}var __decorate=this&&this[a110_0x233009(0x1f2)]||function(_0x1a2251,_0x34123a,_0x5a728f,_0x46fd08){const _0x4736e2=a110_0x233009;var _0x286334=arguments[_0x4736e2(0x225)],_0x1f5af1=_0x286334<0x3?_0x34123a:_0x46fd08===null?_0x46fd08=Object[_0x4736e2(0x213)](_0x34123a,_0x5a728f):_0x46fd08,_0x55ee01;if(typeof Reflect===_0x4736e2(0x1ca)&&typeof Reflect['decorate']===_0x4736e2(0x212))_0x1f5af1=Reflect[_0x4736e2(0x1cd)](_0x1a2251,_0x34123a,_0x5a728f,_0x46fd08);else{for(var _0x5496a2=_0x1a2251[_0x4736e2(0x225)]-0x1;_0x5496a2>=0x0;_0x5496a2--)if(_0x55ee01=_0x1a2251[_0x5496a2])_0x1f5af1=(_0x286334<0x3?_0x55ee01(_0x1f5af1):_0x286334>0x3?_0x55ee01(_0x34123a,_0x5a728f,_0x1f5af1):_0x55ee01(_0x34123a,_0x5a728f))||_0x1f5af1;}return _0x286334>0x3&&_0x1f5af1&&Object[_0x4736e2(0x1d1)](_0x34123a,_0x5a728f,_0x1f5af1),_0x1f5af1;},__metadata=this&&this['__metadata']||function(_0x34bbb2,_0x2ede22){const _0x2577f3=a110_0x233009;if(typeof Reflect===_0x2577f3(0x1ca)&&typeof Reflect[_0x2577f3(0x21c)]===_0x2577f3(0x212))return Reflect[_0x2577f3(0x21c)](_0x34bbb2,_0x2ede22);};Object[a110_0x233009(0x1d1)](exports,a110_0x233009(0x1cf),{'value':!![]}),exports[a110_0x233009(0x1db)]=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a110_0x233009(0x1ea)),salesforce_rest_service_1=require(a110_0x233009(0x1e5)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a110_0x233009(0x207)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),utils_1=require(a110_0x233009(0x1ce)),factory_parser_1=require(a110_0x233009(0x1c8)),vlocity_1=require(a110_0x233009(0x1e8));function a110_0x4bff(){const _0x5a4ede=['crc','push','META_XML_EXTENSION','salesforceRest','string','length','fileName','13158513peyAby','523790lZUwrf','map','../../parsers/mdapi/factory.parser','constructor','object','fileNames','FLOSUM_BRANCH','decorate','../../parsers/utils','__esModule','readFilesByFilename','defineProperty','syncRecord','repositoryGit','componentsMetadata','recordTypes','branchId','FLOSUM_NAMESPACE','now','gitCommit','4NcPeuo','GitCommitService','lastCommit','getComponentRecordTypes','salesforceSync','checkSyncStatus','name','fetchRepositoryComponents','getRecordTypes','FLOSUM_GIT_NAMESPACE','search','../../salesforce/services/salesforce-rest.service','Last_Updated_On__c','Service','../../parsers/utils/vlocity','fetchRepositoryComponentsByFilenames','../../salesforce/services/salesforce-git-sync.service','8GVBiyi','parse','Synchronization_Status__c','getUnusedComponentsFilePaths','4089456UvYDOt','SalesforceRestService','979985LgBTLy','__decorate','toString','design:paramtypes','FactoryParser','getRepositoryId','indexOf','updateRemoteState','getBranchId','SalesforceService','9566000FHtPLH','type','getRemoteStateAttachmentId','fetchRepositoryOrBranchData','retrieveAttachment','patch','crc32','branch','repositoryId','updateStatus','setCommitDto','salesforce','../../salesforce/services/salesforce-sync.service','filter','fetchComponentsMetadata','master','splice','(((.+)+)+)+$','salesforceGitSync','force','then','9348500UByQxT','SalesforceSyncService','function','getOwnPropertyDescriptor','find','proceedFile','FLOSUM_REPOSITORY','8wKRApK','create','createCommit','4472562lUMdKI','catch','metadata','apply','fetchBranchComponentsByFilenames','replace'];a110_0x4bff=function(){return _0x5a4ede;};return a110_0x4bff();}let GitCommitService=class GitCommitService{constructor(_0x5ed0b3,_0x27c314,_0x5ece1b,_0x338cd6){const _0x2d71c9=a110_0x233009;this['salesforceGitSync']=_0x5ed0b3,this[_0x2d71c9(0x223)]=_0x27c314,this[_0x2d71c9(0x1de)]=_0x5ece1b,this[_0x2d71c9(0x206)]=_0x338cd6,this['TASKS_PER_TICK']=0xc8;}get[a110_0x233009(0x203)](){const _0xd9958f=a110_0x233009;var _0x5685ea;return((_0x5685ea=this[_0xd9958f(0x1d2)])===null||_0x5685ea===void 0x0?void 0x0:_0x5685ea[_0xd9958f(0x203)])||'';}get[a110_0x233009(0x1d6)](){const _0x3f3f17=a110_0x233009;var _0x4c158f;return((_0x4c158f=this[_0x3f3f17(0x1d2)])===null||_0x4c158f===void 0x0?void 0x0:_0x4c158f['branchId'])||'';}async[a110_0x233009(0x219)](_0x46d443){const _0x323925=a110_0x233009;return this[_0x323925(0x20d)][_0x323925(0x219)](_0x46d443,this[_0x323925(0x203)]);}async[a110_0x233009(0x1df)](_0x109522){const _0x5b78d2=a110_0x233009;if(this['syncRecord']){const _0x1ab1d8=await this[_0x5b78d2(0x1de)][_0x5b78d2(0x1fd)](this[_0x5b78d2(0x1d2)]),_0x52fb74=await this['salesforce'][_0x5b78d2(0x1ff)](_0x1ab1d8)[_0x5b78d2(0x20f)](_0xd500d6=>typeof _0xd500d6===_0x5b78d2(0x224)?JSON[_0x5b78d2(0x1ec)](_0xd500d6):_0xd500d6)[_0x5b78d2(0x21b)](()=>({}));if(_0x52fb74[this[_0x5b78d2(0x1d9)]['repositoryGit']]){if(_0x52fb74[this[_0x5b78d2(0x1d9)][_0x5b78d2(0x1d3)]][_0x5b78d2(0x1dc)]===_0x109522)return!![];}return![];}return![];}async[a110_0x233009(0x1f8)](_0x453619){const _0x4b153b=a110_0x233009;this[_0x4b153b(0x1d2)]&&await this[_0x4b153b(0x1de)]['updateRemoteState'](this[_0x4b153b(0x1d2)],_0x453619);}[a110_0x233009(0x1ee)](){const _0x1d1177=a110_0x233009;return this[_0x1d1177(0x1d4)][_0x1d1177(0x1c7)](({fileName:_0x425ce2})=>_0x425ce2);}async[a110_0x233009(0x215)](_0x2857f2,_0x25f731,_0x30fa7b){const _0x39395f=a110_0x233009,_0x3761ae=new RegExp('^'+_0x2857f2+'([./-]{1}|$)');let _0x38b940=[_0x2857f2];_0x30fa7b&&!(0x0,vlocity_1['isVlocityComponent'])(_0x2857f2)&&(_0x38b940=(0x0,utils_1['filterParserPaths'])(await(0x0,utils_1[_0x39395f(0x1d0)])(_0x2857f2,_0x25f731)[_0x39395f(0x21b)](()=>[])));const _0x300cac=_0x30fa7b?this['componentsMetadata'][_0x39395f(0x208)](_0x134bc6=>_0x134bc6[_0x39395f(0x226)]['match'](_0x3761ae)):this['componentsMetadata'][_0x39395f(0x208)](_0x222510=>_0x222510['fileName']===_0x2857f2||_0x222510[_0x39395f(0x226)]===_0x2857f2['replace'](constants_1[_0x39395f(0x222)],'')),_0x316256=factory_parser_1[_0x39395f(0x1f5)][_0x39395f(0x218)](_0x25f731,_0x38b940),_0xe9a625=await _0x316256['parse'](),_0x1f3371=[],_0x3722c0=[];for(const _0x1bd1e2 of _0xe9a625){const _0x106550=_0x300cac[_0x39395f(0x214)](_0x11db7a=>_0x11db7a['name']===_0x1bd1e2[_0x39395f(0x1e0)]&&_0x11db7a[_0x39395f(0x1fc)]===_0x1bd1e2[_0x39395f(0x1fc)]);if(!_0x106550){_0x1f3371[_0x39395f(0x221)](_0x1bd1e2);continue;}_0x1bd1e2[_0x39395f(0x220)]!==_0x106550[_0x39395f(0x201)]&&_0x3722c0['push']({'meta':_0x106550,'component':_0x1bd1e2}),_0x300cac[_0x39395f(0x20b)](_0x300cac[_0x39395f(0x1f7)](_0x106550),0x1);}return{'inserted':_0x1f3371,'modified':_0x3722c0,'removed':_0x300cac};}async[a110_0x233009(0x1fe)](){const _0x3702a9=a110_0x233009;this[_0x3702a9(0x1d2)]=this[_0x3702a9(0x1d9)][_0x3702a9(0x202)]===_0x3702a9(0x20a)?await this[_0x3702a9(0x1de)]['getRepositoryRecordByName'](this['gitCommit']['repository']):await this[_0x3702a9(0x1de)]['getBranchRecordByName'](this[_0x3702a9(0x1d9)][_0x3702a9(0x202)]),this[_0x3702a9(0x1d5)]=await this[_0x3702a9(0x20d)][_0x3702a9(0x1dd)]();}async[a110_0x233009(0x209)](_0x289028){const _0x3ce606=a110_0x233009;if(this[_0x3ce606(0x1d9)][_0x3ce606(0x20e)]||_0x289028){this[_0x3ce606(0x1d4)]=this['branchId']?await this[_0x3ce606(0x20d)]['fetchBranchComponents'](this[_0x3ce606(0x1d6)]):await this[_0x3ce606(0x20d)][_0x3ce606(0x1e1)](this[_0x3ce606(0x203)]);return;}const _0x2d8796=[...new Set(this[_0x3ce606(0x1d9)][_0x3ce606(0x1cb)][_0x3ce606(0x1c7)](_0x528ea8=>_0x528ea8[_0x3ce606(0x21f)](constants_1[_0x3ce606(0x222)],'')))];this[_0x3ce606(0x1d4)]=[];while(_0x2d8796['length']){const _0x5a6597=_0x2d8796[_0x3ce606(0x20b)](0x0,this['TASKS_PER_TICK']),_0x10ba8c=this[_0x3ce606(0x1d6)]?await this['salesforceGitSync'][_0x3ce606(0x21e)](_0x5a6597,this[_0x3ce606(0x1d6)]):await this[_0x3ce606(0x20d)][_0x3ce606(0x1e9)](_0x5a6597,this['repositoryId']);this[_0x3ce606(0x1d4)][_0x3ce606(0x221)](..._0x10ba8c);}}async[a110_0x233009(0x204)](_0x544310){const _0x2e2043=a110_0x233009;this[_0x2e2043(0x1d6)]?await this['salesforceRest']['patch'](constants_1[_0x2e2043(0x1cc)],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x2e2043(0x1ed)]:_0x544310,[constants_1[_0x2e2043(0x1d7)]+_0x2e2043(0x1e6)]:Date[_0x2e2043(0x1d8)]()}):await this[_0x2e2043(0x223)][_0x2e2043(0x200)](constants_1[_0x2e2043(0x216)],this[_0x2e2043(0x203)],{[constants_1[_0x2e2043(0x1e3)]+'Synchronization_Status__c']:_0x544310});}[a110_0x233009(0x205)](_0x545774){const _0x2a8407=a110_0x233009;this[_0x2a8407(0x1d9)]=_0x545774;}[a110_0x233009(0x1e2)](){return this['recordTypes'];}[a110_0x233009(0x1f6)](){return this['repositoryId'];}[a110_0x233009(0x1f9)](){const _0x103506=a110_0x233009;return this[_0x103506(0x1d6)];}};GitCommitService=__decorate([(0x0,typedi_1[a110_0x233009(0x1e7)])({'transient':!![]}),__metadata(a110_0x233009(0x1f4),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a110_0x233009(0x1f0)],salesforce_sync_service_1[a110_0x233009(0x211)],salesforce_service_1[a110_0x233009(0x1fa)]])],GitCommitService),exports['GitCommitService']=GitCommitService;