const a109_0x2c35bd=a109_0x1fb7;(function(_0x5c23ed,_0xef08a3){const _0x1c466d=a109_0x1fb7,_0x2a6afa=_0x5c23ed();while(!![]){try{const _0x11d711=parseInt(_0x1c466d(0x155))/0x1*(parseInt(_0x1c466d(0x114))/0x2)+parseInt(_0x1c466d(0x13d))/0x3*(parseInt(_0x1c466d(0x137))/0x4)+parseInt(_0x1c466d(0x131))/0x5*(parseInt(_0x1c466d(0x161))/0x6)+parseInt(_0x1c466d(0x123))/0x7*(parseInt(_0x1c466d(0x149))/0x8)+-parseInt(_0x1c466d(0x13b))/0x9*(parseInt(_0x1c466d(0x119))/0xa)+-parseInt(_0x1c466d(0x142))/0xb+-parseInt(_0x1c466d(0x16f))/0xc*(-parseInt(_0x1c466d(0x143))/0xd);if(_0x11d711===_0xef08a3)break;else _0x2a6afa['push'](_0x2a6afa['shift']());}catch(_0x58b8f1){_0x2a6afa['push'](_0x2a6afa['shift']());}}}(a109_0x123a,0x1cd8a));const a109_0x5f51ee=(function(){let _0x49c5ed=!![];return function(_0x1c260c,_0x2146e2){const _0x52e6ac=_0x49c5ed?function(){const _0x2b5f46=a109_0x1fb7;if(_0x2146e2){const _0x2c09a3=_0x2146e2[_0x2b5f46(0x141)](_0x1c260c,arguments);return _0x2146e2=null,_0x2c09a3;}}:function(){};return _0x49c5ed=![],_0x52e6ac;};}()),a109_0x95f43d=a109_0x5f51ee(this,function(){const _0xeed7f=a109_0x1fb7;return a109_0x95f43d[_0xeed7f(0x132)]()[_0xeed7f(0x11e)]('(((.+)+)+)+$')['toString']()[_0xeed7f(0x166)](a109_0x95f43d)['search'](_0xeed7f(0x164));});a109_0x95f43d();'use strict';var __decorate=this&&this[a109_0x2c35bd(0x140)]||function(_0x539e82,_0x5eefcc,_0x409cf9,_0x5bf285){const _0x5f041a=a109_0x2c35bd;var _0xa14084=arguments[_0x5f041a(0x167)],_0x19cd82=_0xa14084<0x3?_0x5eefcc:_0x5bf285===null?_0x5bf285=Object['getOwnPropertyDescriptor'](_0x5eefcc,_0x409cf9):_0x5bf285,_0x5d4c03;if(typeof Reflect===_0x5f041a(0x11a)&&typeof Reflect['decorate']===_0x5f041a(0x170))_0x19cd82=Reflect['decorate'](_0x539e82,_0x5eefcc,_0x409cf9,_0x5bf285);else{for(var _0x177deb=_0x539e82['length']-0x1;_0x177deb>=0x0;_0x177deb--)if(_0x5d4c03=_0x539e82[_0x177deb])_0x19cd82=(_0xa14084<0x3?_0x5d4c03(_0x19cd82):_0xa14084>0x3?_0x5d4c03(_0x5eefcc,_0x409cf9,_0x19cd82):_0x5d4c03(_0x5eefcc,_0x409cf9))||_0x19cd82;}return _0xa14084>0x3&&_0x19cd82&&Object[_0x5f041a(0x11b)](_0x5eefcc,_0x409cf9,_0x19cd82),_0x19cd82;},__metadata=this&&this[a109_0x2c35bd(0x14d)]||function(_0x5da3ad,_0x4359cf){const _0x4f94e1=a109_0x2c35bd;if(typeof Reflect==='object'&&typeof Reflect[_0x4f94e1(0x15c)]===_0x4f94e1(0x170))return Reflect['metadata'](_0x5da3ad,_0x4359cf);};function a109_0x123a(){const _0x4e896e=['getComponentRecordTypes','branch','([./-]{1}|$)','192ZqzRFd','function','../../parsers/utils','FLOSUM_GIT_NAMESPACE','890juUslL','setCommitDto','force','now','getUnusedComponentsFilePaths','93970lJjzxN','object','defineProperty','SalesforceRestService','retrieveAttachment','search','syncRecord','push','../../salesforce/services/salesforce-sync.service','crc32','7Gkwkdo','lastCommit','salesforceRest','design:paramtypes','getBranchId','repositoryGit','filter','type','map','fetchRepositoryOrBranchData','SalesforceGitSyncService','__esModule','MDApiParserV2','Service','5eGpABC','toString','componentsMetadata','parse','catch','FLOSUM_BRANCH','136204eBpXSw','../../salesforce/services/salesforce.service','TASKS_PER_TICK','SalesforceSyncService','198fbqHPi','branchId','6GVDBXa','../../salesforce/services/salesforce-rest.service','salesforceGitSync','__decorate','apply','1943865gYVLBu','205244eADdZx','SalesforceService','getBranchRecordByName','filterParserPaths','typedi','getRemoteStateAttachmentId','404904aBzJAb','checkSyncStatus','gitCommit','salesforceSync','__metadata','recordTypes','fetchBranchComponents','createCommit','patch','META_XML_EXTENSION','fetchRepositoryComponents','readFilesByFilename','119RAuWCN','Synchronization_Status__c','GitCommitService','proceedFile','fileNames','match','salesforce','metadata','string','then','replace','repositoryId','463950PrhSli','fileName','name','(((.+)+)+)+$','splice','constructor','length','updateStatus','find','../../salesforce/services/salesforce-git-sync.service','repository'];a109_0x123a=function(){return _0x4e896e;};return a109_0x123a();}Object[a109_0x2c35bd(0x11b)](exports,a109_0x2c35bd(0x12e),{'value':!![]}),exports[a109_0x2c35bd(0x157)]=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a109_0x2c35bd(0x16a)),salesforce_rest_service_1=require(a109_0x2c35bd(0x13e)),typedi_1=require(a109_0x2c35bd(0x147)),salesforce_sync_service_1=require(a109_0x2c35bd(0x121)),salesforce_service_1=require(a109_0x2c35bd(0x138)),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require(a109_0x2c35bd(0x112));let GitCommitService=class GitCommitService{constructor(_0x44acd2,_0x3e7cc9,_0x4da26c,_0x2b1379){const _0x2f97bd=a109_0x2c35bd;this[_0x2f97bd(0x13f)]=_0x44acd2,this[_0x2f97bd(0x125)]=_0x3e7cc9,this[_0x2f97bd(0x14c)]=_0x4da26c,this['salesforce']=_0x2b1379,this[_0x2f97bd(0x139)]=0xc8;}get[a109_0x2c35bd(0x160)](){const _0x52a301=a109_0x2c35bd;var _0x4d22e5;return((_0x4d22e5=this[_0x52a301(0x11f)])===null||_0x4d22e5===void 0x0?void 0x0:_0x4d22e5[_0x52a301(0x160)])||'';}get[a109_0x2c35bd(0x13c)](){const _0x44c126=a109_0x2c35bd;var _0x4feefc;return((_0x4feefc=this['syncRecord'])===null||_0x4feefc===void 0x0?void 0x0:_0x4feefc[_0x44c126(0x13c)])||'';}async[a109_0x2c35bd(0x150)](_0x353927){const _0x1b6c4a=a109_0x2c35bd;return this[_0x1b6c4a(0x13f)][_0x1b6c4a(0x150)](_0x353927,this[_0x1b6c4a(0x160)]);}async[a109_0x2c35bd(0x14a)](_0x38b54d){const _0x3fe7d7=a109_0x2c35bd;if(this[_0x3fe7d7(0x11f)]){const _0x56853f=await this[_0x3fe7d7(0x14c)][_0x3fe7d7(0x148)](this[_0x3fe7d7(0x11f)]),_0x48b275=await this[_0x3fe7d7(0x15b)][_0x3fe7d7(0x11d)](_0x56853f)[_0x3fe7d7(0x15e)](_0x3d61e0=>typeof _0x3d61e0===_0x3fe7d7(0x15d)?JSON[_0x3fe7d7(0x134)](_0x3d61e0):_0x3d61e0)['catch'](()=>({}));if(_0x48b275[this['gitCommit']['repositoryGit']]){if(_0x48b275[this[_0x3fe7d7(0x14b)][_0x3fe7d7(0x128)]][_0x3fe7d7(0x124)]===_0x38b54d)return!![];}return![];}return![];}async['updateRemoteState'](_0x12c0ef){const _0x444cd1=a109_0x2c35bd;this['syncRecord']&&await this[_0x444cd1(0x14c)]['updateRemoteState'](this[_0x444cd1(0x11f)],_0x12c0ef);}[a109_0x2c35bd(0x118)](){const _0x4491bf=a109_0x2c35bd;return this[_0x4491bf(0x133)]['map'](({fileName:_0x2aa36c})=>_0x2aa36c);}async[a109_0x2c35bd(0x158)](_0x4f7e43,_0x50e2fe,_0xa0606f){const _0x30474e=a109_0x2c35bd,_0x5d6814=new RegExp('^'+_0x4f7e43+_0x30474e(0x16e));let _0x5dc44b=[_0x4f7e43];_0xa0606f&&(_0x5dc44b=(0x0,utils_1[_0x30474e(0x146)])(await(0x0,utils_1[_0x30474e(0x154)])(_0x4f7e43,_0x50e2fe)[_0x30474e(0x135)](()=>[])));const _0x2fa14d=_0xa0606f?this['componentsMetadata']['filter'](_0x165572=>_0x165572[_0x30474e(0x162)][_0x30474e(0x15a)](_0x5d6814)):this['componentsMetadata'][_0x30474e(0x129)](_0xc744b1=>_0xc744b1[_0x30474e(0x162)]===_0x4f7e43||_0xc744b1[_0x30474e(0x162)]===_0x4f7e43[_0x30474e(0x15f)](constants_1[_0x30474e(0x152)],'')),_0x216b0d=new parser_v2_1[(_0x30474e(0x12f))](_0x50e2fe,_0x5dc44b),_0x2c41e6=await _0x216b0d[_0x30474e(0x134)](),_0x5541b5=[],_0x173d6d=[];for(const _0x41db68 of _0x2c41e6){const _0xaa45f8=_0x2fa14d[_0x30474e(0x169)](_0x2ace95=>_0x2ace95[_0x30474e(0x163)]===_0x41db68[_0x30474e(0x163)]&&_0x2ace95[_0x30474e(0x12a)]===_0x41db68[_0x30474e(0x12a)]);if(!_0xaa45f8){_0x5541b5['push'](_0x41db68);continue;}_0x41db68['crc']!==_0xaa45f8[_0x30474e(0x122)]&&_0x173d6d[_0x30474e(0x120)]({'meta':_0xaa45f8,'component':_0x41db68}),_0x2fa14d[_0x30474e(0x165)](_0x2fa14d['indexOf'](_0xaa45f8),0x1);}return{'inserted':_0x5541b5,'modified':_0x173d6d,'removed':_0x2fa14d};}async[a109_0x2c35bd(0x12c)](){const _0x2143b9=a109_0x2c35bd;this[_0x2143b9(0x11f)]=this[_0x2143b9(0x14b)]['branch']==='master'?await this[_0x2143b9(0x14c)]['getRepositoryRecordByName'](this[_0x2143b9(0x14b)][_0x2143b9(0x16b)]):await this['salesforceSync'][_0x2143b9(0x145)](this[_0x2143b9(0x14b)][_0x2143b9(0x16d)]),this[_0x2143b9(0x14e)]=await this[_0x2143b9(0x13f)][_0x2143b9(0x16c)]();}async['fetchComponentsMetadata'](_0x3b386f){const _0x18bca2=a109_0x2c35bd;if(this[_0x18bca2(0x14b)][_0x18bca2(0x116)]||_0x3b386f){this[_0x18bca2(0x133)]=this[_0x18bca2(0x13c)]?await this[_0x18bca2(0x13f)][_0x18bca2(0x14f)](this[_0x18bca2(0x13c)]):await this[_0x18bca2(0x13f)][_0x18bca2(0x153)](this[_0x18bca2(0x160)]);return;}const _0x54e62c=[...new Set(this[_0x18bca2(0x14b)][_0x18bca2(0x159)][_0x18bca2(0x12b)](_0x43c92f=>_0x43c92f[_0x18bca2(0x15f)](constants_1['META_XML_EXTENSION'],'')))];this[_0x18bca2(0x133)]=[];while(_0x54e62c[_0x18bca2(0x167)]){const _0x1edd9f=_0x54e62c[_0x18bca2(0x165)](0x0,this[_0x18bca2(0x139)]),_0x33f3e0=this[_0x18bca2(0x13c)]?await this[_0x18bca2(0x13f)]['fetchBranchComponentsByFilenames'](_0x1edd9f,this[_0x18bca2(0x13c)]):await this['salesforceGitSync']['fetchRepositoryComponentsByFilenames'](_0x1edd9f,this[_0x18bca2(0x160)]);this[_0x18bca2(0x133)][_0x18bca2(0x120)](..._0x33f3e0);}}async[a109_0x2c35bd(0x168)](_0x3e2189){const _0x2827ef=a109_0x2c35bd;this[_0x2827ef(0x13c)]?await this[_0x2827ef(0x125)][_0x2827ef(0x151)](constants_1[_0x2827ef(0x136)],this[_0x2827ef(0x13c)],{[constants_1[_0x2827ef(0x113)]+_0x2827ef(0x156)]:_0x3e2189,[constants_1['FLOSUM_NAMESPACE']+'Last_Updated_On__c']:Date[_0x2827ef(0x117)]()}):await this[_0x2827ef(0x125)]['patch'](constants_1['FLOSUM_REPOSITORY'],this[_0x2827ef(0x160)],{[constants_1[_0x2827ef(0x113)]+_0x2827ef(0x156)]:_0x3e2189});}[a109_0x2c35bd(0x115)](_0x4f22f7){const _0x4529a7=a109_0x2c35bd;this[_0x4529a7(0x14b)]=_0x4f22f7;}['getRecordTypes'](){const _0x11131c=a109_0x2c35bd;return this[_0x11131c(0x14e)];}['getRepositoryId'](){const _0x7be3e5=a109_0x2c35bd;return this[_0x7be3e5(0x160)];}[a109_0x2c35bd(0x127)](){return this['branchId'];}};function a109_0x1fb7(_0x19d91a,_0x26b24d){const _0xb40f0e=a109_0x123a();return a109_0x1fb7=function(_0x95f43d,_0x5f51ee){_0x95f43d=_0x95f43d-0x112;let _0x123a88=_0xb40f0e[_0x95f43d];return _0x123a88;},a109_0x1fb7(_0x19d91a,_0x26b24d);}GitCommitService=__decorate([(0x0,typedi_1[a109_0x2c35bd(0x130)])({'transient':!![]}),__metadata(a109_0x2c35bd(0x126),[salesforce_git_sync_service_1[a109_0x2c35bd(0x12d)],salesforce_rest_service_1[a109_0x2c35bd(0x11c)],salesforce_sync_service_1[a109_0x2c35bd(0x13a)],salesforce_service_1[a109_0x2c35bd(0x144)]])],GitCommitService),exports[a109_0x2c35bd(0x157)]=GitCommitService;