const a129_0x425302=a129_0x3cfb;(function(_0x298eaa,_0x33944f){const _0x5d970b=a129_0x3cfb,_0x4e9139=_0x298eaa();while(!![]){try{const _0x2b6232=-parseInt(_0x5d970b(0x128))/0x1*(-parseInt(_0x5d970b(0x101))/0x2)+-parseInt(_0x5d970b(0x112))/0x3*(-parseInt(_0x5d970b(0x10a))/0x4)+parseInt(_0x5d970b(0xf0))/0x5+-parseInt(_0x5d970b(0xfc))/0x6*(-parseInt(_0x5d970b(0xef))/0x7)+-parseInt(_0x5d970b(0x107))/0x8+-parseInt(_0x5d970b(0xd9))/0x9*(parseInt(_0x5d970b(0x100))/0xa)+-parseInt(_0x5d970b(0x12d))/0xb;if(_0x2b6232===_0x33944f)break;else _0x4e9139['push'](_0x4e9139['shift']());}catch(_0x604e0f){_0x4e9139['push'](_0x4e9139['shift']());}}}(a129_0x19e0,0xe3f76));function a129_0x3cfb(_0xce7bb2,_0x4e54d5){const _0x5b43a8=a129_0x19e0();return a129_0x3cfb=function(_0x5c4854,_0x8c2d52){_0x5c4854=_0x5c4854-0xd6;let _0x19e0b1=_0x5b43a8[_0x5c4854];return _0x19e0b1;},a129_0x3cfb(_0xce7bb2,_0x4e54d5);}const a129_0x8c2d52=(function(){let _0x182a41=!![];return function(_0x4722d1,_0x1f7725){const _0x5dfb71=_0x182a41?function(){const _0x1f4169=a129_0x3cfb;if(_0x1f7725){const _0x389523=_0x1f7725[_0x1f4169(0x117)](_0x4722d1,arguments);return _0x1f7725=null,_0x389523;}}:function(){};return _0x182a41=![],_0x5dfb71;};}()),a129_0x5c4854=a129_0x8c2d52(this,function(){const _0x3fe5b2=a129_0x3cfb;return a129_0x5c4854[_0x3fe5b2(0xf8)]()[_0x3fe5b2(0x123)](_0x3fe5b2(0xdb))['toString']()[_0x3fe5b2(0x12a)](a129_0x5c4854)[_0x3fe5b2(0x123)](_0x3fe5b2(0xdb));});a129_0x5c4854();'use strict';function a129_0x19e0(){const _0x4eab35=['search','gitCommit','lastCommit','FLOSUM_NAMESPACE','../../parsers/factory.parser','1bdldzt','find','constructor','then','metadata','19273342pjSNJj','object','getBranchRecordByName','salesforce','__decorate','splice','salesforceSync','string','9Qstcek','Synchronization_Status__c','(((.+)+)+)+$','getComponentRecordTypes','SalesforceRestService','recordTypeName','branchId','FLOSUM_REPOSITORY','master','../../salesforce/services/salesforce-git-sync.service','Last_Updated_On__c','getRecordTypes','fetchRepositoryComponentsByFilenames','prepareComponentNamesForFetchMetadata','length','GitCommitService','getRemoteStateAttachmentId','design:paramtypes','salesforceRest','FLOSUM_BRANCH','repositoryGit','TASKS_PER_TICK','1393LgTiAP','6453775ViKJvF','function','repositoryId','syncRecord','PathUtils','push','checkSyncStatus','FLOSUM_GIT_NAMESPACE','toString','../utils/components.utils','fetchComponentsMetadata','fetchBranchComponents','5778YJDzoa','FactoryParser','crc','parse','2231480jarxKr','1827014lNvdgV','type','crc32','getOwnPropertyDescriptor','retrieveAttachment','__esModule','2875400sAyOmm','updateRemoteState','readComponentPaths','8FJvRyA','ComponentsUtils','fetchRepositoryOrBranchData','now','updateStatus','branch','SalesforceService','salesforceGitSync','1308819LeuWQW','getRepositoryRecordByName','../../salesforce/services/salesforce.service','patch','setCommitDto','apply','recordType','fetchBranchComponentsByFilenames','componentsMetadata','defineProperty','createCommit','decorate','create','force','filterMetadataComponents','SalesforceSyncService','getBranchId'];a129_0x19e0=function(){return _0x4eab35;};return a129_0x19e0();}var __decorate=this&&this[a129_0x425302(0x131)]||function(_0x17ff7b,_0x41ac68,_0x25c217,_0x4067e8){const _0x3a1142=a129_0x425302;var _0x650e2f=arguments[_0x3a1142(0xe7)],_0x569692=_0x650e2f<0x3?_0x41ac68:_0x4067e8===null?_0x4067e8=Object[_0x3a1142(0x104)](_0x41ac68,_0x25c217):_0x4067e8,_0x558fae;if(typeof Reflect===_0x3a1142(0x12e)&&typeof Reflect['decorate']===_0x3a1142(0xf1))_0x569692=Reflect[_0x3a1142(0x11d)](_0x17ff7b,_0x41ac68,_0x25c217,_0x4067e8);else{for(var _0x5309b7=_0x17ff7b[_0x3a1142(0xe7)]-0x1;_0x5309b7>=0x0;_0x5309b7--)if(_0x558fae=_0x17ff7b[_0x5309b7])_0x569692=(_0x650e2f<0x3?_0x558fae(_0x569692):_0x650e2f>0x3?_0x558fae(_0x41ac68,_0x25c217,_0x569692):_0x558fae(_0x41ac68,_0x25c217))||_0x569692;}return _0x650e2f>0x3&&_0x569692&&Object[_0x3a1142(0x11b)](_0x41ac68,_0x25c217,_0x569692),_0x569692;},__metadata=this&&this['__metadata']||function(_0x5cf1f3,_0x2b0a17){const _0x4172bb=a129_0x425302;if(typeof Reflect===_0x4172bb(0x12e)&&typeof Reflect[_0x4172bb(0x12c)]==='function')return Reflect[_0x4172bb(0x12c)](_0x5cf1f3,_0x2b0a17);};Object['defineProperty'](exports,a129_0x425302(0x106),{'value':!![]}),exports[a129_0x425302(0xe8)]=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a129_0x425302(0xe2)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require('typedi'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a129_0x425302(0x114)),factory_parser_1=require(a129_0x425302(0x127)),path_utils_1=require('../utils/path.utils'),components_utils_1=require(a129_0x425302(0xf9));let GitCommitService=class GitCommitService{constructor(_0x523c2f,_0x29d1e0,_0x6f16b3,_0xac8176){const _0x5d48d1=a129_0x425302;this['salesforceGitSync']=_0x523c2f,this[_0x5d48d1(0xeb)]=_0x29d1e0,this[_0x5d48d1(0xd7)]=_0x6f16b3,this[_0x5d48d1(0x130)]=_0xac8176,this[_0x5d48d1(0xee)]=0xc8;}get[a129_0x425302(0xf2)](){const _0x46cd4d=a129_0x425302;var _0x454587;return((_0x454587=this[_0x46cd4d(0xf3)])===null||_0x454587===void 0x0?void 0x0:_0x454587[_0x46cd4d(0xf2)])||'';}get[a129_0x425302(0xdf)](){const _0x13e601=a129_0x425302;var _0x40fbac;return((_0x40fbac=this[_0x13e601(0xf3)])===null||_0x40fbac===void 0x0?void 0x0:_0x40fbac[_0x13e601(0xdf)])||'';}get[a129_0x425302(0x118)](){const _0x3ef8dc=a129_0x425302;return this[_0x3ef8dc(0xf3)]['recordTypeName'];}async[a129_0x425302(0x11c)](_0x13573e){const _0x446805=a129_0x425302;return this['salesforceGitSync']['createCommit'](_0x13573e,this[_0x446805(0xf2)]);}async[a129_0x425302(0xf6)](_0x4f13c4){const _0x15f9c7=a129_0x425302;if(this['syncRecord']){const _0x4c348a=await this['salesforceSync'][_0x15f9c7(0xe9)](this[_0x15f9c7(0xf3)]),_0x467f09=await this[_0x15f9c7(0x130)][_0x15f9c7(0x105)](_0x4c348a)[_0x15f9c7(0x12b)](_0xf27c0=>typeof _0xf27c0===_0x15f9c7(0xd8)?JSON[_0x15f9c7(0xff)](_0xf27c0):_0xf27c0)['catch'](()=>({}));if(_0x467f09[this[_0x15f9c7(0x124)][_0x15f9c7(0xed)]]){if(_0x467f09[this[_0x15f9c7(0x124)][_0x15f9c7(0xed)]][_0x15f9c7(0x125)]===_0x4f13c4)return!![];}return![];}return![];}async['updateRemoteState'](_0x157284){const _0x2c50a3=a129_0x425302;this['syncRecord']&&await this['salesforceSync'][_0x2c50a3(0x108)](this[_0x2c50a3(0xf3)],_0x157284);}['getUnusedComponentsFilePaths'](){return this['componentsMetadata']['map'](({fileName:_0x4f6d29})=>_0x4f6d29);}async['proceedFile'](_0x412f47,_0x2bb43a,_0x48de81){const _0x5cd7da=a129_0x425302,_0x4cebeb=await path_utils_1[_0x5cd7da(0xf4)][_0x5cd7da(0x109)](this['syncRecord'][_0x5cd7da(0xde)],_0x412f47,_0x2bb43a,_0x48de81),_0x6d86=components_utils_1['ComponentsUtils'][_0x5cd7da(0x120)](this['componentsMetadata'],_0x412f47,_0x48de81,this[_0x5cd7da(0xf3)]['recordTypeName']),_0x3ca167=factory_parser_1[_0x5cd7da(0xfd)][_0x5cd7da(0x11e)]({'recordType':this[_0x5cd7da(0xf3)][_0x5cd7da(0xde)],'sourceDir':_0x2bb43a,'paths':_0x4cebeb}),_0x269c98=await _0x3ca167['execute'](),_0x3f15f3=[],_0x11b8ea=[];for(const _0x28d0fa of _0x269c98){const _0xa00907=_0x6d86[_0x5cd7da(0x129)](_0xea631=>_0xea631['name']===_0x28d0fa['name']&&_0xea631[_0x5cd7da(0x102)]===_0x28d0fa[_0x5cd7da(0x102)]);if(!_0xa00907){_0x3f15f3[_0x5cd7da(0xf5)](_0x28d0fa);continue;}_0x28d0fa[_0x5cd7da(0xfe)]!==_0xa00907[_0x5cd7da(0x103)]&&_0x11b8ea[_0x5cd7da(0xf5)]({'meta':_0xa00907,'component':_0x28d0fa}),_0x6d86[_0x5cd7da(0xd6)](_0x6d86['indexOf'](_0xa00907),0x1);}return{'inserted':_0x3f15f3,'modified':_0x11b8ea,'removed':_0x6d86};}async[a129_0x425302(0x10c)](){const _0x213708=a129_0x425302;this['syncRecord']=this[_0x213708(0x124)][_0x213708(0x10f)]===_0x213708(0xe1)?await this['salesforceSync'][_0x213708(0x113)](this[_0x213708(0x124)]['repository']):await this[_0x213708(0xd7)][_0x213708(0x12f)](this['gitCommit'][_0x213708(0x10f)]),this['recordTypes']=await this[_0x213708(0x111)][_0x213708(0xdc)]();}async[a129_0x425302(0xfa)](_0xa511bb){const _0x3bffa7=a129_0x425302;if(this[_0x3bffa7(0x124)][_0x3bffa7(0x11f)]||_0xa511bb){this['componentsMetadata']=this[_0x3bffa7(0xdf)]?await this[_0x3bffa7(0x111)][_0x3bffa7(0xfb)](this['branchId']):await this[_0x3bffa7(0x111)]['fetchRepositoryComponents'](this[_0x3bffa7(0xf2)]);return;}const _0x263576=components_utils_1[_0x3bffa7(0x10b)][_0x3bffa7(0xe6)](this[_0x3bffa7(0x124)]['fileNames'],this['syncRecord'][_0x3bffa7(0xde)]);this[_0x3bffa7(0x11a)]=[];while(_0x263576['length']){const _0x1e773f=_0x263576[_0x3bffa7(0xd6)](0x0,this[_0x3bffa7(0xee)]),_0x4b0612=this['branchId']?await this[_0x3bffa7(0x111)][_0x3bffa7(0x119)](_0x1e773f,this[_0x3bffa7(0xdf)]):await this[_0x3bffa7(0x111)][_0x3bffa7(0xe5)](_0x1e773f,this[_0x3bffa7(0xf2)]);this[_0x3bffa7(0x11a)]['push'](..._0x4b0612);}}async[a129_0x425302(0x10e)](_0x50345c){const _0x46bd69=a129_0x425302;this[_0x46bd69(0xdf)]?await this[_0x46bd69(0xeb)][_0x46bd69(0x115)](constants_1[_0x46bd69(0xec)],this[_0x46bd69(0xdf)],{[constants_1[_0x46bd69(0xf7)]+'Synchronization_Status__c']:_0x50345c,[constants_1[_0x46bd69(0x126)]+_0x46bd69(0xe3)]:Date[_0x46bd69(0x10d)]()}):await this[_0x46bd69(0xeb)][_0x46bd69(0x115)](constants_1[_0x46bd69(0xe0)],this[_0x46bd69(0xf2)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x46bd69(0xda)]:_0x50345c});}[a129_0x425302(0x116)](_0x2548d3){const _0x4bb18b=a129_0x425302;this[_0x4bb18b(0x124)]=_0x2548d3;}[a129_0x425302(0xe4)](){return this['recordTypes'];}['getRepositoryId'](){const _0x628854=a129_0x425302;return this[_0x628854(0xf2)];}[a129_0x425302(0x122)](){const _0x1a1be6=a129_0x425302;return this[_0x1a1be6(0xdf)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a129_0x425302(0xea),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a129_0x425302(0xdd)],salesforce_sync_service_1[a129_0x425302(0x121)],salesforce_service_1[a129_0x425302(0x110)]])],GitCommitService),exports[a129_0x425302(0xe8)]=GitCommitService;