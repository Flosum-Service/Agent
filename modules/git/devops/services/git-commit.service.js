const a109_0x4512cc=a109_0x4f50;(function(_0x4c6bf8,_0x1bba04){const _0x1a0447=a109_0x4f50,_0x2ba87d=_0x4c6bf8();while(!![]){try{const _0x27c131=parseInt(_0x1a0447(0x133))/0x1+parseInt(_0x1a0447(0x110))/0x2*(-parseInt(_0x1a0447(0x10d))/0x3)+parseInt(_0x1a0447(0x128))/0x4*(parseInt(_0x1a0447(0x112))/0x5)+-parseInt(_0x1a0447(0x111))/0x6*(parseInt(_0x1a0447(0x150))/0x7)+parseInt(_0x1a0447(0x10a))/0x8*(parseInt(_0x1a0447(0x152))/0x9)+parseInt(_0x1a0447(0x142))/0xa+parseInt(_0x1a0447(0x134))/0xb*(-parseInt(_0x1a0447(0x14d))/0xc);if(_0x27c131===_0x1bba04)break;else _0x2ba87d['push'](_0x2ba87d['shift']());}catch(_0x625438){_0x2ba87d['push'](_0x2ba87d['shift']());}}}(a109_0x5c76,0x3e71e));function a109_0x4f50(_0x18e34c,_0x436882){const _0x5b6214=a109_0x5c76();return a109_0x4f50=function(_0x526d73,_0x3d0f98){_0x526d73=_0x526d73-0x103;let _0x5c7626=_0x5b6214[_0x526d73];return _0x5c7626;},a109_0x4f50(_0x18e34c,_0x436882);}const a109_0x3d0f98=(function(){let _0x49f27f=!![];return function(_0x467573,_0x4e63d8){const _0xed239c=_0x49f27f?function(){const _0x3e4548=a109_0x4f50;if(_0x4e63d8){const _0x231bf3=_0x4e63d8[_0x3e4548(0x115)](_0x467573,arguments);return _0x4e63d8=null,_0x231bf3;}}:function(){};return _0x49f27f=![],_0xed239c;};}()),a109_0x526d73=a109_0x3d0f98(this,function(){const _0x1c0699=a109_0x4f50;return a109_0x526d73[_0x1c0699(0x160)]()[_0x1c0699(0x11e)](_0x1c0699(0x13e))['toString']()[_0x1c0699(0x125)](a109_0x526d73)[_0x1c0699(0x11e)](_0x1c0699(0x13e));});a109_0x526d73();'use strict';var __decorate=this&&this[a109_0x4512cc(0x15a)]||function(_0x36275f,_0x9d818e,_0x2effe7,_0x560039){const _0x5e4fcc=a109_0x4512cc;var _0x4b820b=arguments[_0x5e4fcc(0x135)],_0x5f58cb=_0x4b820b<0x3?_0x9d818e:_0x560039===null?_0x560039=Object[_0x5e4fcc(0x14c)](_0x9d818e,_0x2effe7):_0x560039,_0x702efc;if(typeof Reflect===_0x5e4fcc(0x161)&&typeof Reflect[_0x5e4fcc(0x132)]===_0x5e4fcc(0x136))_0x5f58cb=Reflect[_0x5e4fcc(0x132)](_0x36275f,_0x9d818e,_0x2effe7,_0x560039);else{for(var _0x49e313=_0x36275f['length']-0x1;_0x49e313>=0x0;_0x49e313--)if(_0x702efc=_0x36275f[_0x49e313])_0x5f58cb=(_0x4b820b<0x3?_0x702efc(_0x5f58cb):_0x4b820b>0x3?_0x702efc(_0x9d818e,_0x2effe7,_0x5f58cb):_0x702efc(_0x9d818e,_0x2effe7))||_0x5f58cb;}return _0x4b820b>0x3&&_0x5f58cb&&Object['defineProperty'](_0x9d818e,_0x2effe7,_0x5f58cb),_0x5f58cb;},__metadata=this&&this[a109_0x4512cc(0x141)]||function(_0x31a045,_0x374838){const _0x11510=a109_0x4512cc;if(typeof Reflect===_0x11510(0x161)&&typeof Reflect['metadata']===_0x11510(0x136))return Reflect[_0x11510(0x121)](_0x31a045,_0x374838);};function a109_0x5c76(){const _0x3e9cd6=['__decorate','now','crc32','syncRecord','salesforceSync','indexOf','toString','object','splice','FLOSUM_BRANCH','fileName','fetchComponentsMetadata','fetchRepositoryOrBranchData','../../salesforce/services/salesforce-git-sync.service','fetchRepositoryComponentsByFilenames','find','8ZchuRt','../../salesforce/services/salesforce.service','map','156189CekVoS','repository','updateRemoteState','16olZQbC','66GYklMY','50ropfiQ','Service','proceedFile','apply','replace','type','name','createCommit','([./-]{1}|$)','salesforceRest','getUnusedComponentsFilePaths','MDApiParserV2','search','design:paramtypes','getRepositoryRecordByName','metadata','filterParserPaths','SalesforceSyncService','SalesforceGitSyncService','constructor','FLOSUM_GIT_NAMESPACE','getRepositoryId','175468nnIjVn','match','getComponentRecordTypes','GitCommitService','Synchronization_Status__c','typedi','string','getRecordTypes','../../parsers/utils','SalesforceRestService','decorate','400971OSzDqV','44csJTYr','length','function','branch','salesforce','SalesforceService','FLOSUM_REPOSITORY','repositoryGit','TASKS_PER_TICK','parse','(((.+)+)+)+$','push','gitCommit','__metadata','454240YjKhxf','FLOSUM_NAMESPACE','componentsMetadata','fetchBranchComponentsByFilenames','Last_Updated_On__c','recordTypes','branchId','repositoryId','setCommitDto','salesforceGitSync','getOwnPropertyDescriptor','910428UyGLRr','catch','updateStatus','134785xLZyVT','patch','2722446lZzzHf','../../parsers/mdapi/parser-v2','META_XML_EXTENSION','crc','getBranchRecordByName','defineProperty','force','__esModule'];a109_0x5c76=function(){return _0x3e9cd6;};return a109_0x5c76();}Object[a109_0x4512cc(0x157)](exports,a109_0x4512cc(0x159),{'value':!![]}),exports[a109_0x4512cc(0x12b)]=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a109_0x4512cc(0x107)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a109_0x4512cc(0x12d)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a109_0x4512cc(0x10b)),parser_v2_1=require(a109_0x4512cc(0x153)),utils_1=require(a109_0x4512cc(0x130));let GitCommitService=class GitCommitService{constructor(_0x14ea65,_0x4b3f32,_0x46ed29,_0x565d28){const _0x4498d8=a109_0x4512cc;this['salesforceGitSync']=_0x14ea65,this[_0x4498d8(0x11b)]=_0x4b3f32,this['salesforceSync']=_0x46ed29,this[_0x4498d8(0x138)]=_0x565d28,this[_0x4498d8(0x13c)]=0xc8;}get[a109_0x4512cc(0x149)](){const _0x5b0991=a109_0x4512cc;var _0x5079a0;return((_0x5079a0=this[_0x5b0991(0x15d)])===null||_0x5079a0===void 0x0?void 0x0:_0x5079a0[_0x5b0991(0x149)])||'';}get[a109_0x4512cc(0x148)](){const _0x2a1b9b=a109_0x4512cc;var _0x2d0e2a;return((_0x2d0e2a=this[_0x2a1b9b(0x15d)])===null||_0x2d0e2a===void 0x0?void 0x0:_0x2d0e2a[_0x2a1b9b(0x148)])||'';}async[a109_0x4512cc(0x119)](_0x4a7fb4){const _0x3d56f7=a109_0x4512cc;return this[_0x3d56f7(0x14b)][_0x3d56f7(0x119)](_0x4a7fb4,this[_0x3d56f7(0x149)]);}async['checkSyncStatus'](_0x5c56ac){const _0x2feb9f=a109_0x4512cc;if(this[_0x2feb9f(0x15d)]){const _0xa6a023=await this[_0x2feb9f(0x15e)]['getRemoteStateAttachmentId'](this[_0x2feb9f(0x15d)]),_0x4e3c04=await this[_0x2feb9f(0x138)]['retrieveAttachment'](_0xa6a023)['then'](_0x2afcb2=>typeof _0x2afcb2===_0x2feb9f(0x12e)?JSON[_0x2feb9f(0x13d)](_0x2afcb2):_0x2afcb2)[_0x2feb9f(0x14e)](()=>({}));if(_0x4e3c04[this[_0x2feb9f(0x140)][_0x2feb9f(0x13b)]]){if(_0x4e3c04[this[_0x2feb9f(0x140)]['repositoryGit']]['lastCommit']===_0x5c56ac)return!![];}return![];}return![];}async[a109_0x4512cc(0x10f)](_0x5bb93f){const _0x219b31=a109_0x4512cc;this[_0x219b31(0x15d)]&&await this[_0x219b31(0x15e)]['updateRemoteState'](this[_0x219b31(0x15d)],_0x5bb93f);}[a109_0x4512cc(0x11c)](){const _0x106f30=a109_0x4512cc;return this[_0x106f30(0x144)][_0x106f30(0x10c)](({fileName:_0x445e27})=>_0x445e27);}async[a109_0x4512cc(0x114)](_0x283de5,_0x2a4705,_0x328021){const _0x29935c=a109_0x4512cc,_0xd14747=new RegExp('^'+_0x283de5+_0x29935c(0x11a));let _0x42eb33=[_0x283de5];_0x328021&&(_0x42eb33=(0x0,utils_1[_0x29935c(0x122)])(await(0x0,utils_1['readFilesByFilename'])(_0x283de5,_0x2a4705)[_0x29935c(0x14e)](()=>[])));const _0x5f62d3=_0x328021?this[_0x29935c(0x144)]['filter'](_0x5cfd3e=>_0x5cfd3e[_0x29935c(0x104)][_0x29935c(0x129)](_0xd14747)):this[_0x29935c(0x144)]['filter'](_0x4ea81f=>_0x4ea81f[_0x29935c(0x104)]===_0x283de5||_0x4ea81f[_0x29935c(0x104)]===_0x283de5[_0x29935c(0x116)](constants_1[_0x29935c(0x154)],'')),_0x506203=new parser_v2_1[(_0x29935c(0x11d))](_0x2a4705,_0x42eb33),_0x599050=await _0x506203[_0x29935c(0x13d)](),_0x32f089=[],_0x2865ac=[];for(const _0x31d64a of _0x599050){const _0x5e6b36=_0x5f62d3[_0x29935c(0x109)](_0x3a6025=>_0x3a6025['name']===_0x31d64a[_0x29935c(0x118)]&&_0x3a6025[_0x29935c(0x117)]===_0x31d64a[_0x29935c(0x117)]);if(!_0x5e6b36){_0x32f089[_0x29935c(0x13f)](_0x31d64a);continue;}_0x31d64a[_0x29935c(0x155)]!==_0x5e6b36[_0x29935c(0x15c)]&&_0x2865ac[_0x29935c(0x13f)]({'meta':_0x5e6b36,'component':_0x31d64a}),_0x5f62d3[_0x29935c(0x162)](_0x5f62d3[_0x29935c(0x15f)](_0x5e6b36),0x1);}return{'inserted':_0x32f089,'modified':_0x2865ac,'removed':_0x5f62d3};}async[a109_0x4512cc(0x106)](){const _0x33aa58=a109_0x4512cc;this[_0x33aa58(0x15d)]=this['gitCommit']['branch']==='master'?await this['salesforceSync'][_0x33aa58(0x120)](this[_0x33aa58(0x140)][_0x33aa58(0x10e)]):await this[_0x33aa58(0x15e)][_0x33aa58(0x156)](this['gitCommit'][_0x33aa58(0x137)]),this[_0x33aa58(0x147)]=await this[_0x33aa58(0x14b)][_0x33aa58(0x12a)]();}async[a109_0x4512cc(0x105)](_0x500705){const _0x209fdc=a109_0x4512cc;if(this[_0x209fdc(0x140)][_0x209fdc(0x158)]||_0x500705){this[_0x209fdc(0x144)]=this[_0x209fdc(0x148)]?await this[_0x209fdc(0x14b)]['fetchBranchComponents'](this['branchId']):await this['salesforceGitSync']['fetchRepositoryComponents'](this[_0x209fdc(0x149)]);return;}const _0x4529d0=[...new Set(this[_0x209fdc(0x140)]['fileNames'][_0x209fdc(0x10c)](_0x30e63d=>_0x30e63d[_0x209fdc(0x116)](constants_1[_0x209fdc(0x154)],'')))];this[_0x209fdc(0x144)]=[];while(_0x4529d0[_0x209fdc(0x135)]){const _0x477d35=_0x4529d0[_0x209fdc(0x162)](0x0,this['TASKS_PER_TICK']),_0x2993b2=this[_0x209fdc(0x148)]?await this['salesforceGitSync'][_0x209fdc(0x145)](_0x477d35,this[_0x209fdc(0x148)]):await this['salesforceGitSync'][_0x209fdc(0x108)](_0x477d35,this[_0x209fdc(0x149)]);this[_0x209fdc(0x144)][_0x209fdc(0x13f)](..._0x2993b2);}}async[a109_0x4512cc(0x14f)](_0xefcdc8){const _0xe54169=a109_0x4512cc;this[_0xe54169(0x148)]?await this[_0xe54169(0x11b)][_0xe54169(0x151)](constants_1[_0xe54169(0x103)],this['branchId'],{[constants_1[_0xe54169(0x126)]+_0xe54169(0x12c)]:_0xefcdc8,[constants_1[_0xe54169(0x143)]+_0xe54169(0x146)]:Date[_0xe54169(0x15b)]()}):await this[_0xe54169(0x11b)][_0xe54169(0x151)](constants_1[_0xe54169(0x13a)],this[_0xe54169(0x149)],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0xefcdc8});}[a109_0x4512cc(0x14a)](_0x3211d4){const _0x3b19a8=a109_0x4512cc;this[_0x3b19a8(0x140)]=_0x3211d4;}[a109_0x4512cc(0x12f)](){return this['recordTypes'];}[a109_0x4512cc(0x127)](){const _0x5efc76=a109_0x4512cc;return this[_0x5efc76(0x149)];}['getBranchId'](){const _0x2e1cb6=a109_0x4512cc;return this[_0x2e1cb6(0x148)];}};GitCommitService=__decorate([(0x0,typedi_1[a109_0x4512cc(0x113)])({'transient':!![]}),__metadata(a109_0x4512cc(0x11f),[salesforce_git_sync_service_1[a109_0x4512cc(0x124)],salesforce_rest_service_1[a109_0x4512cc(0x131)],salesforce_sync_service_1[a109_0x4512cc(0x123)],salesforce_service_1[a109_0x4512cc(0x139)]])],GitCommitService),exports[a109_0x4512cc(0x12b)]=GitCommitService;