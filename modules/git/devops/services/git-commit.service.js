const a110_0x3d2439=a110_0x3940;(function(_0x3ad9e5,_0xde7dd4){const _0x9544ff=a110_0x3940,_0x448e86=_0x3ad9e5();while(!![]){try{const _0x5d482c=parseInt(_0x9544ff(0x1ea))/0x1+parseInt(_0x9544ff(0x1cb))/0x2*(parseInt(_0x9544ff(0x1e9))/0x3)+parseInt(_0x9544ff(0x1ef))/0x4+parseInt(_0x9544ff(0x1d7))/0x5+-parseInt(_0x9544ff(0x1d2))/0x6*(-parseInt(_0x9544ff(0x1e3))/0x7)+-parseInt(_0x9544ff(0x1a9))/0x8+parseInt(_0x9544ff(0x1ad))/0x9*(-parseInt(_0x9544ff(0x1f5))/0xa);if(_0x5d482c===_0xde7dd4)break;else _0x448e86['push'](_0x448e86['shift']());}catch(_0x549579){_0x448e86['push'](_0x448e86['shift']());}}}(a110_0xd2a5,0xabe63));const a110_0x55526c=(function(){let _0x73846a=!![];return function(_0x3a9335,_0x14248e){const _0x4f5ca4=_0x73846a?function(){if(_0x14248e){const _0x1743f5=_0x14248e['apply'](_0x3a9335,arguments);return _0x14248e=null,_0x1743f5;}}:function(){};return _0x73846a=![],_0x4f5ca4;};}()),a110_0xbedcc=a110_0x55526c(this,function(){const _0x30190b=a110_0x3940;return a110_0xbedcc[_0x30190b(0x1ca)]()[_0x30190b(0x1a7)]('(((.+)+)+)+$')[_0x30190b(0x1ca)]()['constructor'](a110_0xbedcc)['search'](_0x30190b(0x1b2));});a110_0xbedcc();'use strict';var __decorate=this&&this['__decorate']||function(_0x14f47b,_0x4069b5,_0x4681f9,_0x3bc98d){const _0x235281=a110_0x3940;var _0x28fd47=arguments['length'],_0x2326e9=_0x28fd47<0x3?_0x4069b5:_0x3bc98d===null?_0x3bc98d=Object[_0x235281(0x1ae)](_0x4069b5,_0x4681f9):_0x3bc98d,_0x350c8a;if(typeof Reflect==='object'&&typeof Reflect[_0x235281(0x1dd)]===_0x235281(0x1b7))_0x2326e9=Reflect[_0x235281(0x1dd)](_0x14f47b,_0x4069b5,_0x4681f9,_0x3bc98d);else{for(var _0x59a8b1=_0x14f47b[_0x235281(0x1bf)]-0x1;_0x59a8b1>=0x0;_0x59a8b1--)if(_0x350c8a=_0x14f47b[_0x59a8b1])_0x2326e9=(_0x28fd47<0x3?_0x350c8a(_0x2326e9):_0x28fd47>0x3?_0x350c8a(_0x4069b5,_0x4681f9,_0x2326e9):_0x350c8a(_0x4069b5,_0x4681f9))||_0x2326e9;}return _0x28fd47>0x3&&_0x2326e9&&Object[_0x235281(0x1be)](_0x4069b5,_0x4681f9,_0x2326e9),_0x2326e9;},__metadata=this&&this[a110_0x3d2439(0x1b6)]||function(_0x518a3e,_0x717363){const _0x3d09f8=a110_0x3d2439;if(typeof Reflect==='object'&&typeof Reflect[_0x3d09f8(0x1bd)]===_0x3d09f8(0x1b7))return Reflect[_0x3d09f8(0x1bd)](_0x518a3e,_0x717363);};Object['defineProperty'](exports,a110_0x3d2439(0x1cc),{'value':!![]}),exports[a110_0x3d2439(0x1a4)]=void 0x0;function a110_0xd2a5(){const _0x4b7178=['215505yadczX','getOwnPropertyDescriptor','repositoryId','salesforceRest','SalesforceRestService','(((.+)+)+)+$','repository','name','string','__metadata','function','createCommit','salesforceGitSync','Synchronization_Status__c','([./-]{1}|$)','fetchRepositoryComponentsByFilenames','metadata','defineProperty','length','SalesforceSyncService','replace','proceedFile','FLOSUM_BRANCH','fetchBranchComponents','repositoryGit','../../salesforce/services/salesforce-rest.service','getComponentRecordTypes','updateStatus','design:paramtypes','toString','2ZbpMrO','__esModule','FLOSUM_NAMESPACE','indexOf','FLOSUM_REPOSITORY','getRemoteStateAttachmentId','META_XML_EXTENSION','18198UKHECb','../../parsers/utils','../../salesforce/services/salesforce-sync.service','match','now','5736775YczXGJ','lastCommit','force','branchId','filter','fetchRepositoryOrBranchData','decorate','getRecordTypes','splice','getBranchRecordByName','../../parsers/utils/vlocity','TASKS_PER_TICK','2926ZfWUMQ','create','recordTypes','catch','syncRecord','../../salesforce/services/salesforce.service','3184437yNOOEj','312553XxrnOm','retrieveAttachment','componentsMetadata','Service','updateRemoteState','4731144ZEFLWn','map','../../../../constants','fileNames','find','readFilesByFilename','1670lcGbqF','isVlocityComponent','crc32','fetchRepositoryComponents','crc','then','salesforceSync','getBranchId','parse','gitCommit','patch','getUnusedComponentsFilePaths','FLOSUM_GIT_NAMESPACE','GitCommitService','fileName','SalesforceGitSyncService','search','getRepositoryId','2152424BtepiR','push','fetchComponentsMetadata','SalesforceService'];a110_0xd2a5=function(){return _0x4b7178;};return a110_0xd2a5();}const constants_1=require(a110_0x3d2439(0x1f1)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a110_0x3d2439(0x1c6)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a110_0x3d2439(0x1d4)),salesforce_service_1=require(a110_0x3d2439(0x1e8)),utils_1=require(a110_0x3d2439(0x1d3)),factory_parser_1=require('../../parsers/mdapi/factory.parser'),vlocity_1=require(a110_0x3d2439(0x1e1));function a110_0x3940(_0x3d5ea4,_0xc52ed){const _0x5587bb=a110_0xd2a5();return a110_0x3940=function(_0xbedcc,_0x55526c){_0xbedcc=_0xbedcc-0x1a4;let _0xd2a58d=_0x5587bb[_0xbedcc];return _0xd2a58d;},a110_0x3940(_0x3d5ea4,_0xc52ed);}let GitCommitService=class GitCommitService{constructor(_0x4b5f88,_0x5a38bd,_0x557633,_0x3406f9){const _0x257054=a110_0x3d2439;this[_0x257054(0x1b9)]=_0x4b5f88,this[_0x257054(0x1b0)]=_0x5a38bd,this[_0x257054(0x1fb)]=_0x557633,this['salesforce']=_0x3406f9,this[_0x257054(0x1e2)]=0xc8;}get[a110_0x3d2439(0x1af)](){const _0x57b06c=a110_0x3d2439;var _0x536756;return((_0x536756=this['syncRecord'])===null||_0x536756===void 0x0?void 0x0:_0x536756[_0x57b06c(0x1af)])||'';}get[a110_0x3d2439(0x1da)](){const _0xc418b3=a110_0x3d2439;var _0x89e45a;return((_0x89e45a=this[_0xc418b3(0x1e7)])===null||_0x89e45a===void 0x0?void 0x0:_0x89e45a[_0xc418b3(0x1da)])||'';}async['createCommit'](_0x4dd815){const _0x45b741=a110_0x3d2439;return this[_0x45b741(0x1b9)][_0x45b741(0x1b8)](_0x4dd815,this[_0x45b741(0x1af)]);}async['checkSyncStatus'](_0x17e2fc){const _0x59c740=a110_0x3d2439;if(this[_0x59c740(0x1e7)]){const _0x169ce1=await this[_0x59c740(0x1fb)][_0x59c740(0x1d0)](this[_0x59c740(0x1e7)]),_0x599173=await this['salesforce'][_0x59c740(0x1eb)](_0x169ce1)[_0x59c740(0x1fa)](_0x187450=>typeof _0x187450===_0x59c740(0x1b5)?JSON[_0x59c740(0x1fd)](_0x187450):_0x187450)[_0x59c740(0x1e6)](()=>({}));if(_0x599173[this[_0x59c740(0x1fe)][_0x59c740(0x1c5)]]){if(_0x599173[this[_0x59c740(0x1fe)][_0x59c740(0x1c5)]][_0x59c740(0x1d8)]===_0x17e2fc)return!![];}return![];}return![];}async['updateRemoteState'](_0x345b69){const _0xfde588=a110_0x3d2439;this[_0xfde588(0x1e7)]&&await this['salesforceSync'][_0xfde588(0x1ee)](this['syncRecord'],_0x345b69);}[a110_0x3d2439(0x200)](){const _0xfa2a03=a110_0x3d2439;return this['componentsMetadata'][_0xfa2a03(0x1f0)](({fileName:_0x3638a2})=>_0x3638a2);}async[a110_0x3d2439(0x1c2)](_0x19a6fe,_0x2a0784,_0x5750bf){const _0x4c9e4a=a110_0x3d2439,_0x57f8c9=new RegExp('^'+_0x19a6fe+_0x4c9e4a(0x1bb));let _0x1e05a2=[_0x19a6fe];_0x5750bf&&!(0x0,vlocity_1[_0x4c9e4a(0x1f6)])(_0x19a6fe)&&(_0x1e05a2=(0x0,utils_1['filterParserPaths'])(await(0x0,utils_1[_0x4c9e4a(0x1f4)])(_0x19a6fe,_0x2a0784)[_0x4c9e4a(0x1e6)](()=>[])));const _0x3435ce=_0x5750bf?this[_0x4c9e4a(0x1ec)][_0x4c9e4a(0x1db)](_0x428114=>_0x428114[_0x4c9e4a(0x1a5)][_0x4c9e4a(0x1d5)](_0x57f8c9)):this[_0x4c9e4a(0x1ec)]['filter'](_0x25089a=>_0x25089a['fileName']===_0x19a6fe||_0x25089a['fileName']===_0x19a6fe[_0x4c9e4a(0x1c1)](constants_1[_0x4c9e4a(0x1d1)],'')),_0xb9ba26=factory_parser_1['FactoryParser'][_0x4c9e4a(0x1e4)](_0x2a0784,_0x1e05a2),_0x1f9155=await _0xb9ba26[_0x4c9e4a(0x1fd)](),_0xcbe85d=[],_0x46265f=[];for(const _0x3decca of _0x1f9155){const _0x2716aa=_0x3435ce[_0x4c9e4a(0x1f3)](_0x57ec17=>_0x57ec17[_0x4c9e4a(0x1b4)]===_0x3decca[_0x4c9e4a(0x1b4)]&&_0x57ec17['type']===_0x3decca['type']);if(!_0x2716aa){_0xcbe85d[_0x4c9e4a(0x1aa)](_0x3decca);continue;}_0x3decca[_0x4c9e4a(0x1f9)]!==_0x2716aa[_0x4c9e4a(0x1f7)]&&_0x46265f[_0x4c9e4a(0x1aa)]({'meta':_0x2716aa,'component':_0x3decca}),_0x3435ce[_0x4c9e4a(0x1df)](_0x3435ce[_0x4c9e4a(0x1ce)](_0x2716aa),0x1);}return{'inserted':_0xcbe85d,'modified':_0x46265f,'removed':_0x3435ce};}async[a110_0x3d2439(0x1dc)](){const _0x2bb00e=a110_0x3d2439;this[_0x2bb00e(0x1e7)]=this[_0x2bb00e(0x1fe)]['branch']==='master'?await this[_0x2bb00e(0x1fb)]['getRepositoryRecordByName'](this[_0x2bb00e(0x1fe)][_0x2bb00e(0x1b3)]):await this[_0x2bb00e(0x1fb)][_0x2bb00e(0x1e0)](this[_0x2bb00e(0x1fe)]['branch']),this[_0x2bb00e(0x1e5)]=await this['salesforceGitSync'][_0x2bb00e(0x1c7)]();}async[a110_0x3d2439(0x1ab)](_0x202a7c){const _0x234b94=a110_0x3d2439;if(this['gitCommit'][_0x234b94(0x1d9)]||_0x202a7c){this[_0x234b94(0x1ec)]=this['branchId']?await this[_0x234b94(0x1b9)][_0x234b94(0x1c4)](this[_0x234b94(0x1da)]):await this[_0x234b94(0x1b9)][_0x234b94(0x1f8)](this['repositoryId']);return;}const _0x377165=[...new Set(this[_0x234b94(0x1fe)][_0x234b94(0x1f2)][_0x234b94(0x1f0)](_0x139c8c=>_0x139c8c['replace'](constants_1[_0x234b94(0x1d1)],'')))];this['componentsMetadata']=[];while(_0x377165['length']){const _0x48764d=_0x377165[_0x234b94(0x1df)](0x0,this['TASKS_PER_TICK']),_0x1de0a8=this[_0x234b94(0x1da)]?await this[_0x234b94(0x1b9)]['fetchBranchComponentsByFilenames'](_0x48764d,this[_0x234b94(0x1da)]):await this[_0x234b94(0x1b9)][_0x234b94(0x1bc)](_0x48764d,this[_0x234b94(0x1af)]);this['componentsMetadata'][_0x234b94(0x1aa)](..._0x1de0a8);}}async[a110_0x3d2439(0x1c8)](_0x4735a0){const _0x5946dd=a110_0x3d2439;this[_0x5946dd(0x1da)]?await this[_0x5946dd(0x1b0)]['patch'](constants_1[_0x5946dd(0x1c3)],this[_0x5946dd(0x1da)],{[constants_1[_0x5946dd(0x201)]+'Synchronization_Status__c']:_0x4735a0,[constants_1[_0x5946dd(0x1cd)]+'Last_Updated_On__c']:Date[_0x5946dd(0x1d6)]()}):await this[_0x5946dd(0x1b0)][_0x5946dd(0x1ff)](constants_1[_0x5946dd(0x1cf)],this[_0x5946dd(0x1af)],{[constants_1[_0x5946dd(0x201)]+_0x5946dd(0x1ba)]:_0x4735a0});}['setCommitDto'](_0x2bfcda){const _0x5da6a7=a110_0x3d2439;this[_0x5da6a7(0x1fe)]=_0x2bfcda;}[a110_0x3d2439(0x1de)](){const _0x246ae2=a110_0x3d2439;return this[_0x246ae2(0x1e5)];}[a110_0x3d2439(0x1a8)](){const _0x5c6432=a110_0x3d2439;return this[_0x5c6432(0x1af)];}[a110_0x3d2439(0x1fc)](){const _0x7039ae=a110_0x3d2439;return this[_0x7039ae(0x1da)];}};GitCommitService=__decorate([(0x0,typedi_1[a110_0x3d2439(0x1ed)])({'transient':!![]}),__metadata(a110_0x3d2439(0x1c9),[salesforce_git_sync_service_1[a110_0x3d2439(0x1a6)],salesforce_rest_service_1[a110_0x3d2439(0x1b1)],salesforce_sync_service_1[a110_0x3d2439(0x1c0)],salesforce_service_1[a110_0x3d2439(0x1ac)]])],GitCommitService),exports[a110_0x3d2439(0x1a4)]=GitCommitService;