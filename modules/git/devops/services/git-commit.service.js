const a127_0x24fb44=a127_0x5552;(function(_0x4c9153,_0x5503b4){const _0x38c27a=a127_0x5552,_0x2c1703=_0x4c9153();while(!![]){try{const _0x2f814d=parseInt(_0x38c27a(0x216))/0x1+parseInt(_0x38c27a(0x1e4))/0x2+-parseInt(_0x38c27a(0x211))/0x3*(parseInt(_0x38c27a(0x201))/0x4)+parseInt(_0x38c27a(0x1f6))/0x5*(-parseInt(_0x38c27a(0x1ef))/0x6)+-parseInt(_0x38c27a(0x22a))/0x7*(-parseInt(_0x38c27a(0x1fb))/0x8)+parseInt(_0x38c27a(0x1fa))/0x9*(parseInt(_0x38c27a(0x1e0))/0xa)+parseInt(_0x38c27a(0x213))/0xb;if(_0x2f814d===_0x5503b4)break;else _0x2c1703['push'](_0x2c1703['shift']());}catch(_0x27785e){_0x2c1703['push'](_0x2c1703['shift']());}}}(a127_0x208c,0xa35e0));function a127_0x208c(){const _0x304598=['decorate','salesforceGitSync','constructor','getUnusedComponentsFilePaths','prepareComponentNamesForFetchMetadata','fetchRepositoryComponents','toString','__metadata','gitCommit','getOwnPropertyDescriptor','lastCommit','7DjZzMA','getRecordTypes','function','FactoryParser','metadata','getComponentRecordTypes','../../salesforce/services/salesforce.service','getRepositoryRecordByName','design:paramtypes','string','branchId','fileNames','patch','SalesforceSyncService','object','SalesforceService','fetchBranchComponents','salesforceSync','FLOSUM_NAMESPACE','FLOSUM_REPOSITORY','2830lbCTiX','length','typedi','indexOf','119342uGaSiO','getBranchRecordByName','__esModule','(((.+)+)+)+$','push','fetchRepositoryComponentsByFilenames','GitCommitService','syncRecord','salesforceRest','Last_Updated_On__c','__decorate','32202hEuvZY','parse','recordTypes','SalesforceGitSyncService','TASKS_PER_TICK','createCommit','find','940wAiJSn','proceedFile','master','salesforce','2178qRrZuK','5515088AxDRdO','componentsMetadata','PathUtils','readComponentPaths','repositoryId','filterMetadataComponents','10832OzEJoS','getRemoteStateAttachmentId','search','type','updateStatus','getRepositoryId','recordTypeName','name','../../salesforce/services/salesforce-git-sync.service','FLOSUM_BRANCH','recordType','FLOSUM_GIT_NAMESPACE','fetchComponentsMetadata','now','setCommitDto','defineProperty','1470TEOvyg','../../parsers/factory.parser','17429467NlovGj','SalesforceRestService','fetchRepositoryOrBranchData','603028DDrzCX','updateRemoteState','Synchronization_Status__c','ComponentsUtils','../../salesforce/services/salesforce-rest.service','crc32','repositoryGit','execute','splice'];a127_0x208c=function(){return _0x304598;};return a127_0x208c();}function a127_0x5552(_0x27e205,_0x39932a){const _0x27f043=a127_0x208c();return a127_0x5552=function(_0x2e3c82,_0x979a30){_0x2e3c82=_0x2e3c82-0x1cd;let _0x208c70=_0x27f043[_0x2e3c82];return _0x208c70;},a127_0x5552(_0x27e205,_0x39932a);}const a127_0x979a30=(function(){let _0x369f54=!![];return function(_0x2e7fc4,_0x2946c2){const _0x435ff5=_0x369f54?function(){if(_0x2946c2){const _0x1ba96e=_0x2946c2['apply'](_0x2e7fc4,arguments);return _0x2946c2=null,_0x1ba96e;}}:function(){};return _0x369f54=![],_0x435ff5;};}()),a127_0x2e3c82=a127_0x979a30(this,function(){const _0x31c82=a127_0x5552;return a127_0x2e3c82[_0x31c82(0x225)]()[_0x31c82(0x203)]('(((.+)+)+)+$')['toString']()[_0x31c82(0x221)](a127_0x2e3c82)['search'](_0x31c82(0x1e7));});a127_0x2e3c82();'use strict';var __decorate=this&&this[a127_0x24fb44(0x1ee)]||function(_0x5da4fa,_0x1b9b45,_0x5ca250,_0x40194b){const _0x1df95b=a127_0x24fb44;var _0x54e83f=arguments[_0x1df95b(0x1e1)],_0x3b0e78=_0x54e83f<0x3?_0x1b9b45:_0x40194b===null?_0x40194b=Object[_0x1df95b(0x228)](_0x1b9b45,_0x5ca250):_0x40194b,_0x3c644e;if(typeof Reflect==='object'&&typeof Reflect[_0x1df95b(0x21f)]===_0x1df95b(0x1ce))_0x3b0e78=Reflect['decorate'](_0x5da4fa,_0x1b9b45,_0x5ca250,_0x40194b);else{for(var _0x1a709f=_0x5da4fa['length']-0x1;_0x1a709f>=0x0;_0x1a709f--)if(_0x3c644e=_0x5da4fa[_0x1a709f])_0x3b0e78=(_0x54e83f<0x3?_0x3c644e(_0x3b0e78):_0x54e83f>0x3?_0x3c644e(_0x1b9b45,_0x5ca250,_0x3b0e78):_0x3c644e(_0x1b9b45,_0x5ca250))||_0x3b0e78;}return _0x54e83f>0x3&&_0x3b0e78&&Object[_0x1df95b(0x210)](_0x1b9b45,_0x5ca250,_0x3b0e78),_0x3b0e78;},__metadata=this&&this[a127_0x24fb44(0x226)]||function(_0x10837e,_0x34dd3d){const _0x1879f9=a127_0x24fb44;if(typeof Reflect===_0x1879f9(0x1da)&&typeof Reflect[_0x1879f9(0x1d0)]===_0x1879f9(0x1ce))return Reflect[_0x1879f9(0x1d0)](_0x10837e,_0x34dd3d);};Object['defineProperty'](exports,a127_0x24fb44(0x1e6),{'value':!![]}),exports[a127_0x24fb44(0x1ea)]=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a127_0x24fb44(0x209)),salesforce_rest_service_1=require(a127_0x24fb44(0x21a)),typedi_1=require(a127_0x24fb44(0x1e2)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a127_0x24fb44(0x1d2)),factory_parser_1=require(a127_0x24fb44(0x212)),path_utils_1=require('../utils/path.utils'),components_utils_1=require('../utils/components.utils');let GitCommitService=class GitCommitService{constructor(_0x41fc20,_0x9cc8e3,_0x349c1,_0x1eb81e){const _0x478fe5=a127_0x24fb44;this[_0x478fe5(0x220)]=_0x41fc20,this[_0x478fe5(0x1ec)]=_0x9cc8e3,this[_0x478fe5(0x1dd)]=_0x349c1,this[_0x478fe5(0x1f9)]=_0x1eb81e,this[_0x478fe5(0x1f3)]=0xc8;}get['repositoryId'](){const _0x196cf2=a127_0x24fb44;var _0x6833;return((_0x6833=this[_0x196cf2(0x1eb)])===null||_0x6833===void 0x0?void 0x0:_0x6833['repositoryId'])||'';}get[a127_0x24fb44(0x1d6)](){const _0x282076=a127_0x24fb44;var _0x59a04f;return((_0x59a04f=this[_0x282076(0x1eb)])===null||_0x59a04f===void 0x0?void 0x0:_0x59a04f['branchId'])||'';}get[a127_0x24fb44(0x20b)](){const _0x256e73=a127_0x24fb44;return this[_0x256e73(0x1eb)]['recordTypeName'];}async[a127_0x24fb44(0x1f4)](_0x3e5541){const _0xc3ea00=a127_0x24fb44;return this[_0xc3ea00(0x220)][_0xc3ea00(0x1f4)](_0x3e5541,this[_0xc3ea00(0x1ff)]);}async['checkSyncStatus'](_0x401cf6){const _0x131b6a=a127_0x24fb44;if(this['syncRecord']){const _0xf8ad75=await this[_0x131b6a(0x1dd)][_0x131b6a(0x202)](this['syncRecord']),_0x43bee2=await this[_0x131b6a(0x1f9)]['retrieveAttachment'](_0xf8ad75)['then'](_0x8f322a=>typeof _0x8f322a===_0x131b6a(0x1d5)?JSON[_0x131b6a(0x1f0)](_0x8f322a):_0x8f322a)['catch'](()=>({}));if(_0x43bee2[this[_0x131b6a(0x227)][_0x131b6a(0x21c)]]){if(_0x43bee2[this[_0x131b6a(0x227)][_0x131b6a(0x21c)]][_0x131b6a(0x229)]===_0x401cf6)return!![];}return![];}return![];}async[a127_0x24fb44(0x217)](_0xa9ad25){const _0x145994=a127_0x24fb44;this['syncRecord']&&await this['salesforceSync']['updateRemoteState'](this[_0x145994(0x1eb)],_0xa9ad25);}[a127_0x24fb44(0x222)](){const _0x28e783=a127_0x24fb44;return this[_0x28e783(0x1fc)]['map'](({fileName:_0x2134c0})=>_0x2134c0);}async[a127_0x24fb44(0x1f7)](_0x536092,_0x3f698b,_0x2d25a1){const _0x5b7761=a127_0x24fb44,_0x6d843=await path_utils_1[_0x5b7761(0x1fd)][_0x5b7761(0x1fe)](this[_0x5b7761(0x1eb)][_0x5b7761(0x207)],_0x536092,_0x3f698b,_0x2d25a1),_0xdd9046=components_utils_1['ComponentsUtils'][_0x5b7761(0x200)](this[_0x5b7761(0x1fc)],_0x536092,_0x2d25a1,this[_0x5b7761(0x1eb)][_0x5b7761(0x207)]),_0x1629bd=factory_parser_1[_0x5b7761(0x1cf)]['create']({'recordType':this[_0x5b7761(0x1eb)][_0x5b7761(0x207)],'sourceDir':_0x3f698b,'paths':_0x6d843}),_0xe08017=await _0x1629bd[_0x5b7761(0x21d)](),_0x4c45e6=[],_0x3e40cc=[];for(const _0xba47c0 of _0xe08017){const _0x20266a=_0xdd9046[_0x5b7761(0x1f5)](_0x3a2c36=>_0x3a2c36[_0x5b7761(0x208)]===_0xba47c0[_0x5b7761(0x208)]&&_0x3a2c36[_0x5b7761(0x204)]===_0xba47c0[_0x5b7761(0x204)]);if(!_0x20266a){_0x4c45e6[_0x5b7761(0x1e8)](_0xba47c0);continue;}_0xba47c0['crc']!==_0x20266a[_0x5b7761(0x21b)]&&_0x3e40cc['push']({'meta':_0x20266a,'component':_0xba47c0}),_0xdd9046[_0x5b7761(0x21e)](_0xdd9046[_0x5b7761(0x1e3)](_0x20266a),0x1);}return{'inserted':_0x4c45e6,'modified':_0x3e40cc,'removed':_0xdd9046};}async[a127_0x24fb44(0x215)](){const _0x350ac1=a127_0x24fb44;this['syncRecord']=this[_0x350ac1(0x227)]['branch']===_0x350ac1(0x1f8)?await this[_0x350ac1(0x1dd)][_0x350ac1(0x1d3)](this[_0x350ac1(0x227)]['repository']):await this[_0x350ac1(0x1dd)][_0x350ac1(0x1e5)](this[_0x350ac1(0x227)]['branch']),this['recordTypes']=await this[_0x350ac1(0x220)][_0x350ac1(0x1d1)]();}async[a127_0x24fb44(0x20d)](_0x4c1ae5){const _0x50d422=a127_0x24fb44;if(this[_0x50d422(0x227)]['force']||_0x4c1ae5){this[_0x50d422(0x1fc)]=this[_0x50d422(0x1d6)]?await this['salesforceGitSync'][_0x50d422(0x1dc)](this[_0x50d422(0x1d6)]):await this['salesforceGitSync'][_0x50d422(0x224)](this[_0x50d422(0x1ff)]);return;}const _0x142bb4=components_utils_1[_0x50d422(0x219)][_0x50d422(0x223)](this['gitCommit'][_0x50d422(0x1d7)],this[_0x50d422(0x1eb)][_0x50d422(0x207)]);this['componentsMetadata']=[];while(_0x142bb4[_0x50d422(0x1e1)]){const _0x4a1a15=_0x142bb4[_0x50d422(0x21e)](0x0,this[_0x50d422(0x1f3)]),_0x50cf0c=this[_0x50d422(0x1d6)]?await this[_0x50d422(0x220)]['fetchBranchComponentsByFilenames'](_0x4a1a15,this[_0x50d422(0x1d6)]):await this['salesforceGitSync'][_0x50d422(0x1e9)](_0x4a1a15,this[_0x50d422(0x1ff)]);this[_0x50d422(0x1fc)][_0x50d422(0x1e8)](..._0x50cf0c);}}async[a127_0x24fb44(0x205)](_0x532fc6){const _0x27fdf1=a127_0x24fb44;this[_0x27fdf1(0x1d6)]?await this[_0x27fdf1(0x1ec)][_0x27fdf1(0x1d8)](constants_1[_0x27fdf1(0x20a)],this[_0x27fdf1(0x1d6)],{[constants_1[_0x27fdf1(0x20c)]+_0x27fdf1(0x218)]:_0x532fc6,[constants_1[_0x27fdf1(0x1de)]+_0x27fdf1(0x1ed)]:Date[_0x27fdf1(0x20e)]()}):await this[_0x27fdf1(0x1ec)][_0x27fdf1(0x1d8)](constants_1[_0x27fdf1(0x1df)],this['repositoryId'],{[constants_1[_0x27fdf1(0x20c)]+'Synchronization_Status__c']:_0x532fc6});}[a127_0x24fb44(0x20f)](_0x42b141){const _0x9eb272=a127_0x24fb44;this[_0x9eb272(0x227)]=_0x42b141;}[a127_0x24fb44(0x1cd)](){const _0x1ee7a5=a127_0x24fb44;return this[_0x1ee7a5(0x1f1)];}[a127_0x24fb44(0x206)](){return this['repositoryId'];}['getBranchId'](){const _0x1f6e14=a127_0x24fb44;return this[_0x1f6e14(0x1d6)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a127_0x24fb44(0x1d4),[salesforce_git_sync_service_1[a127_0x24fb44(0x1f2)],salesforce_rest_service_1[a127_0x24fb44(0x214)],salesforce_sync_service_1[a127_0x24fb44(0x1d9)],salesforce_service_1[a127_0x24fb44(0x1db)]])],GitCommitService),exports[a127_0x24fb44(0x1ea)]=GitCommitService;