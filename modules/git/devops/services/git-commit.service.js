const a130_0x5a57be=a130_0x1a53;(function(_0x317e4d,_0x2a09e2){const _0x3a83dd=a130_0x1a53,_0x1d8317=_0x317e4d();while(!![]){try{const _0x176290=parseInt(_0x3a83dd(0x18c))/0x1*(parseInt(_0x3a83dd(0x1a1))/0x2)+parseInt(_0x3a83dd(0x164))/0x3+parseInt(_0x3a83dd(0x16d))/0x4+parseInt(_0x3a83dd(0x19f))/0x5*(parseInt(_0x3a83dd(0x19d))/0x6)+parseInt(_0x3a83dd(0x155))/0x7*(parseInt(_0x3a83dd(0x185))/0x8)+parseInt(_0x3a83dd(0x188))/0x9*(parseInt(_0x3a83dd(0x1a5))/0xa)+-parseInt(_0x3a83dd(0x182))/0xb;if(_0x176290===_0x2a09e2)break;else _0x1d8317['push'](_0x1d8317['shift']());}catch(_0x44296c){_0x1d8317['push'](_0x1d8317['shift']());}}}(a130_0x338f,0x7e4df));const a130_0x36768f=(function(){let _0x43d809=!![];return function(_0x5f4cc4,_0x4ab68c){const _0x4882e4=_0x43d809?function(){const _0x4cf41a=a130_0x1a53;if(_0x4ab68c){const _0x1b144f=_0x4ab68c[_0x4cf41a(0x184)](_0x5f4cc4,arguments);return _0x4ab68c=null,_0x1b144f;}}:function(){};return _0x43d809=![],_0x4882e4;};}()),a130_0x565d58=a130_0x36768f(this,function(){const _0x32e80d=a130_0x1a53;return a130_0x565d58[_0x32e80d(0x14d)]()[_0x32e80d(0x195)](_0x32e80d(0x166))[_0x32e80d(0x14d)]()[_0x32e80d(0x193)](a130_0x565d58)[_0x32e80d(0x195)](_0x32e80d(0x166));});a130_0x565d58();'use strict';var __decorate=this&&this[a130_0x5a57be(0x17e)]||function(_0x424071,_0x5563f7,_0x3e01b7,_0xb2f414){const _0x1cd38e=a130_0x5a57be;var _0x36b5f9=arguments[_0x1cd38e(0x17b)],_0x44bf2b=_0x36b5f9<0x3?_0x5563f7:_0xb2f414===null?_0xb2f414=Object[_0x1cd38e(0x16f)](_0x5563f7,_0x3e01b7):_0xb2f414,_0x15dad2;if(typeof Reflect===_0x1cd38e(0x1a7)&&typeof Reflect['decorate']==='function')_0x44bf2b=Reflect[_0x1cd38e(0x15a)](_0x424071,_0x5563f7,_0x3e01b7,_0xb2f414);else{for(var _0x433e4e=_0x424071['length']-0x1;_0x433e4e>=0x0;_0x433e4e--)if(_0x15dad2=_0x424071[_0x433e4e])_0x44bf2b=(_0x36b5f9<0x3?_0x15dad2(_0x44bf2b):_0x36b5f9>0x3?_0x15dad2(_0x5563f7,_0x3e01b7,_0x44bf2b):_0x15dad2(_0x5563f7,_0x3e01b7))||_0x44bf2b;}return _0x36b5f9>0x3&&_0x44bf2b&&Object[_0x1cd38e(0x199)](_0x5563f7,_0x3e01b7,_0x44bf2b),_0x44bf2b;},__metadata=this&&this[a130_0x5a57be(0x1a4)]||function(_0x40d3ae,_0x2198bc){const _0x2cd5ff=a130_0x5a57be;if(typeof Reflect==='object'&&typeof Reflect[_0x2cd5ff(0x173)]===_0x2cd5ff(0x156))return Reflect[_0x2cd5ff(0x173)](_0x40d3ae,_0x2198bc);};function a130_0x338f(){const _0x2d4c47=['../../salesforce/services/salesforce.service','32879hRKXTW','function','readComponentPaths','salesforceSync','getComponentRecordTypes','decorate','getBranchRecordByName','proceedFile','gitCommit','type','PathUtils','splice','Last_Updated_On__c','retrieveAttachment','../utils/components.utils','2808384YOZmPj','componentsMetadata','(((.+)+)+)+$','lastCommit','FLOSUM_NAMESPACE','recordTypeName','crc','repositoryGit','TASKS_PER_TICK','3318016HhiGRe','typedi','getOwnPropertyDescriptor','salesforceGitSync','SalesforceSyncService','name','metadata','updateStatus','then','string','Service','../utils/path.utils','../../salesforce/services/salesforce-git-sync.service','filterMetadataComponents','length','recordTypes','Synchronization_Status__c','__decorate','createCommit','salesforce','push','32646889weSugm','create','apply','1256KEsGPM','ComponentsUtils','getRepositoryRecordByName','1332pacEZS','setCommitDto','getRecordTypes','patch','87eIEEkq','../../../../constants','indexOf','fetchRepositoryComponentsByFilenames','find','fileNames','repository','constructor','__esModule','search','design:paramtypes','SalesforceService','salesforceRest','defineProperty','repositoryId','map','updateRemoteState','6kmbQOR','getUnusedComponentsFilePaths','335030uDrJpx','GitCommitService','20882SekJXE','fetchRepositoryOrBranchData','fetchRepositoryComponents','__metadata','460rUBcmz','branchId','object','branch','getBranchId','toString','FLOSUM_GIT_NAMESPACE','recordType','../../parsers/factory.parser','getRepositoryId','syncRecord','fetchBranchComponentsByFilenames'];a130_0x338f=function(){return _0x2d4c47;};return a130_0x338f();}Object[a130_0x5a57be(0x199)](exports,a130_0x5a57be(0x194),{'value':!![]}),exports[a130_0x5a57be(0x1a0)]=void 0x0;const constants_1=require(a130_0x5a57be(0x18d)),salesforce_git_sync_service_1=require(a130_0x5a57be(0x179)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a130_0x5a57be(0x16e)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a130_0x5a57be(0x154)),factory_parser_1=require(a130_0x5a57be(0x150)),path_utils_1=require(a130_0x5a57be(0x178)),components_utils_1=require(a130_0x5a57be(0x163));let GitCommitService=class GitCommitService{constructor(_0x2a955e,_0x564e26,_0x447e4d,_0xc3352a){const _0xe57420=a130_0x5a57be;this['salesforceGitSync']=_0x2a955e,this[_0xe57420(0x198)]=_0x564e26,this[_0xe57420(0x158)]=_0x447e4d,this['salesforce']=_0xc3352a,this[_0xe57420(0x16c)]=0xc8;}get[a130_0x5a57be(0x19a)](){const _0x30d692=a130_0x5a57be;var _0xa1a1f5;return((_0xa1a1f5=this[_0x30d692(0x152)])===null||_0xa1a1f5===void 0x0?void 0x0:_0xa1a1f5[_0x30d692(0x19a)])||'';}get[a130_0x5a57be(0x1a6)](){const _0x2637e7=a130_0x5a57be;var _0x20d9cf;return((_0x20d9cf=this[_0x2637e7(0x152)])===null||_0x20d9cf===void 0x0?void 0x0:_0x20d9cf[_0x2637e7(0x1a6)])||'';}get[a130_0x5a57be(0x14f)](){const _0x2eb84f=a130_0x5a57be;return this[_0x2eb84f(0x152)][_0x2eb84f(0x169)];}async[a130_0x5a57be(0x17f)](_0x4a203e){return this['salesforceGitSync']['createCommit'](_0x4a203e,this['repositoryId']);}async['checkSyncStatus'](_0xe4892c){const _0x20270a=a130_0x5a57be;if(this[_0x20270a(0x152)]){const _0xee4dd2=await this[_0x20270a(0x158)]['getRemoteStateAttachmentId'](this['syncRecord']),_0x1c8907=await this[_0x20270a(0x180)][_0x20270a(0x162)](_0xee4dd2)[_0x20270a(0x175)](_0x55daf2=>typeof _0x55daf2===_0x20270a(0x176)?JSON['parse'](_0x55daf2):_0x55daf2)['catch'](()=>({}));if(_0x1c8907[this[_0x20270a(0x15d)][_0x20270a(0x16b)]]){if(_0x1c8907[this[_0x20270a(0x15d)][_0x20270a(0x16b)]][_0x20270a(0x167)]===_0xe4892c)return!![];}return![];}return![];}async[a130_0x5a57be(0x19c)](_0x1a6abe){const _0x217610=a130_0x5a57be;this[_0x217610(0x152)]&&await this[_0x217610(0x158)][_0x217610(0x19c)](this[_0x217610(0x152)],_0x1a6abe);}[a130_0x5a57be(0x19e)](){const _0x2a9741=a130_0x5a57be;return this['componentsMetadata'][_0x2a9741(0x19b)](({fileName:_0x43248f})=>_0x43248f);}async[a130_0x5a57be(0x15c)](_0x2a04a8,_0xf6760e,_0x50048a){const _0x9ab2ad=a130_0x5a57be,_0x5ef2bf=await path_utils_1[_0x9ab2ad(0x15f)][_0x9ab2ad(0x157)](this[_0x9ab2ad(0x152)]['recordTypeName'],_0x2a04a8,_0xf6760e,_0x50048a),_0x3a0dc2=components_utils_1[_0x9ab2ad(0x186)][_0x9ab2ad(0x17a)](this['componentsMetadata'],_0x2a04a8,_0x50048a,this['syncRecord'][_0x9ab2ad(0x169)]),_0xdb11bc=factory_parser_1['FactoryParser'][_0x9ab2ad(0x183)]({'recordType':this[_0x9ab2ad(0x152)]['recordTypeName'],'sourceDir':_0xf6760e,'paths':_0x5ef2bf}),_0x154c1d=await _0xdb11bc['execute'](),_0x3289f2=[],_0x2ec25b=[];for(const _0x1ceacb of _0x154c1d){const _0x39dd39=_0x3a0dc2[_0x9ab2ad(0x190)](_0x58d8f5=>_0x58d8f5[_0x9ab2ad(0x172)]===_0x1ceacb[_0x9ab2ad(0x172)]&&_0x58d8f5[_0x9ab2ad(0x15e)]===_0x1ceacb[_0x9ab2ad(0x15e)]);if(!_0x39dd39){_0x3289f2[_0x9ab2ad(0x181)](_0x1ceacb);continue;}_0x1ceacb[_0x9ab2ad(0x16a)]!==_0x39dd39['crc32']&&_0x2ec25b[_0x9ab2ad(0x181)]({'meta':_0x39dd39,'component':_0x1ceacb}),_0x3a0dc2['splice'](_0x3a0dc2[_0x9ab2ad(0x18e)](_0x39dd39),0x1);}return{'inserted':_0x3289f2,'modified':_0x2ec25b,'removed':_0x3a0dc2};}async[a130_0x5a57be(0x1a2)](){const _0x87ab60=a130_0x5a57be;this[_0x87ab60(0x152)]=this[_0x87ab60(0x15d)]['branch']==='master'?await this[_0x87ab60(0x158)][_0x87ab60(0x187)](this['gitCommit'][_0x87ab60(0x192)]):await this[_0x87ab60(0x158)][_0x87ab60(0x15b)](this[_0x87ab60(0x15d)][_0x87ab60(0x14b)]),this['recordTypes']=await this[_0x87ab60(0x170)][_0x87ab60(0x159)]();}async['fetchComponentsMetadata'](_0x534d40){const _0x345385=a130_0x5a57be;if(this[_0x345385(0x15d)]['force']||_0x534d40){this[_0x345385(0x165)]=this[_0x345385(0x1a6)]?await this[_0x345385(0x170)]['fetchBranchComponents'](this['branchId']):await this['salesforceGitSync'][_0x345385(0x1a3)](this[_0x345385(0x19a)]);return;}const _0x5308ce=components_utils_1['ComponentsUtils']['prepareComponentNamesForFetchMetadata'](this[_0x345385(0x15d)][_0x345385(0x191)],this[_0x345385(0x152)][_0x345385(0x169)]);this[_0x345385(0x165)]=[];while(_0x5308ce[_0x345385(0x17b)]){const _0x38498a=_0x5308ce[_0x345385(0x160)](0x0,this['TASKS_PER_TICK']),_0x169c3f=this['branchId']?await this[_0x345385(0x170)][_0x345385(0x153)](_0x38498a,this[_0x345385(0x1a6)]):await this[_0x345385(0x170)][_0x345385(0x18f)](_0x38498a,this[_0x345385(0x19a)]);this[_0x345385(0x165)][_0x345385(0x181)](..._0x169c3f);}}async[a130_0x5a57be(0x174)](_0x1e002a){const _0x418922=a130_0x5a57be;this[_0x418922(0x1a6)]?await this[_0x418922(0x198)][_0x418922(0x18b)](constants_1['FLOSUM_BRANCH'],this[_0x418922(0x1a6)],{[constants_1[_0x418922(0x14e)]+_0x418922(0x17d)]:_0x1e002a,[constants_1[_0x418922(0x168)]+_0x418922(0x161)]:Date['now']()}):await this[_0x418922(0x198)][_0x418922(0x18b)](constants_1['FLOSUM_REPOSITORY'],this[_0x418922(0x19a)],{[constants_1[_0x418922(0x14e)]+'Synchronization_Status__c']:_0x1e002a});}[a130_0x5a57be(0x189)](_0xdd15ce){const _0x12d8bd=a130_0x5a57be;this[_0x12d8bd(0x15d)]=_0xdd15ce;}[a130_0x5a57be(0x18a)](){const _0x57f3e3=a130_0x5a57be;return this[_0x57f3e3(0x17c)];}[a130_0x5a57be(0x151)](){const _0x408528=a130_0x5a57be;return this[_0x408528(0x19a)];}[a130_0x5a57be(0x14c)](){const _0x1e8c9c=a130_0x5a57be;return this[_0x1e8c9c(0x1a6)];}};function a130_0x1a53(_0x15aa12,_0x2287fa){const _0x342e13=a130_0x338f();return a130_0x1a53=function(_0x565d58,_0x36768f){_0x565d58=_0x565d58-0x14b;let _0x338fac=_0x342e13[_0x565d58];return _0x338fac;},a130_0x1a53(_0x15aa12,_0x2287fa);}GitCommitService=__decorate([(0x0,typedi_1[a130_0x5a57be(0x177)])({'transient':!![]}),__metadata(a130_0x5a57be(0x196),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a130_0x5a57be(0x171)],salesforce_service_1[a130_0x5a57be(0x197)]])],GitCommitService),exports[a130_0x5a57be(0x1a0)]=GitCommitService;