const a130_0xeb1944=a130_0x5095;(function(_0x565eb5,_0x23db72){const _0x49abd8=a130_0x5095,_0x168d5c=_0x565eb5();while(!![]){try{const _0x5bd073=parseInt(_0x49abd8(0x20e))/0x1+parseInt(_0x49abd8(0x1e1))/0x2+parseInt(_0x49abd8(0x1eb))/0x3+-parseInt(_0x49abd8(0x221))/0x4+-parseInt(_0x49abd8(0x21b))/0x5*(-parseInt(_0x49abd8(0x1e5))/0x6)+-parseInt(_0x49abd8(0x203))/0x7+parseInt(_0x49abd8(0x1e4))/0x8*(-parseInt(_0x49abd8(0x1d1))/0x9);if(_0x5bd073===_0x23db72)break;else _0x168d5c['push'](_0x168d5c['shift']());}catch(_0x1969ca){_0x168d5c['push'](_0x168d5c['shift']());}}}(a130_0x4920,0xde690));const a130_0x38d9d4=(function(){let _0x11b121=!![];return function(_0x263d2f,_0x57a8dc){const _0x40c5fe=_0x11b121?function(){if(_0x57a8dc){const _0x510058=_0x57a8dc['apply'](_0x263d2f,arguments);return _0x57a8dc=null,_0x510058;}}:function(){};return _0x11b121=![],_0x40c5fe;};}()),a130_0x8ebef=a130_0x38d9d4(this,function(){const _0x54787d=a130_0x5095;return a130_0x8ebef['toString']()['search'](_0x54787d(0x1ef))[_0x54787d(0x1e3)]()[_0x54787d(0x210)](a130_0x8ebef)[_0x54787d(0x214)]('(((.+)+)+)+$');});function a130_0x4920(){const _0x1a4425=['updateStatus','PathUtils','fileNames','(((.+)+)+)+$','../../salesforce/services/salesforce-rest.service','defineProperty','__esModule','patch','create','FLOSUM_GIT_NAMESPACE','updateRemoteState','design:paramtypes','getUnusedComponentsFilePaths','salesforce','gitCommit','string','salesforceSync','../../salesforce/services/salesforce-git-sync.service','ComponentsUtils','syncRecord','FLOSUM_NAMESPACE','typedi','repository','6980974JbhLTf','checkSyncStatus','TASKS_PER_TICK','prepareComponentNamesForFetchMetadata','name','componentsMetadata','recordTypeName','Last_Updated_On__c','FLOSUM_REPOSITORY','../../salesforce/services/salesforce.service','SalesforceGitSyncService','1562917tppCBs','getRemoteStateAttachmentId','constructor','function','branchId','SalesforceSyncService','search','FLOSUM_BRANCH','fetchRepositoryOrBranchData','fetchRepositoryComponents','fetchRepositoryComponentsByFilenames','branch','execute','695HUeFrT','parse','retrieveAttachment','type','createCommit','recordType','6669780zgUnQa','../../../../constants','length','GitCommitService','SalesforceRestService','repositoryId','salesforceGitSync','Service','9426933cYvjca','setCommitDto','decorate','lastCommit','salesforceRest','readComponentPaths','fetchBranchComponentsByFilenames','filterMetadataComponents','metadata','getBranchRecordByName','recordTypes','__decorate','catch','splice','FactoryParser','../utils/path.utils','2774032BGZWre','../../salesforce/services/salesforce-sync.service','toString','8lCvpna','51990DavvAp','push','SalesforceService','repositoryGit','find','getBranchId','1406364VJZWDj'];a130_0x4920=function(){return _0x1a4425;};return a130_0x4920();}a130_0x8ebef();'use strict';var __decorate=this&&this[a130_0xeb1944(0x1dc)]||function(_0x160ddc,_0x35c61e,_0x61abb5,_0x2399b7){const _0x1aed62=a130_0xeb1944;var _0x568441=arguments[_0x1aed62(0x1cb)],_0x2fea92=_0x568441<0x3?_0x35c61e:_0x2399b7===null?_0x2399b7=Object['getOwnPropertyDescriptor'](_0x35c61e,_0x61abb5):_0x2399b7,_0x188418;if(typeof Reflect==='object'&&typeof Reflect[_0x1aed62(0x1d3)]==='function')_0x2fea92=Reflect[_0x1aed62(0x1d3)](_0x160ddc,_0x35c61e,_0x61abb5,_0x2399b7);else{for(var _0x1bd07a=_0x160ddc[_0x1aed62(0x1cb)]-0x1;_0x1bd07a>=0x0;_0x1bd07a--)if(_0x188418=_0x160ddc[_0x1bd07a])_0x2fea92=(_0x568441<0x3?_0x188418(_0x2fea92):_0x568441>0x3?_0x188418(_0x35c61e,_0x61abb5,_0x2fea92):_0x188418(_0x35c61e,_0x61abb5))||_0x2fea92;}return _0x568441>0x3&&_0x2fea92&&Object[_0x1aed62(0x1f1)](_0x35c61e,_0x61abb5,_0x2fea92),_0x2fea92;},__metadata=this&&this['__metadata']||function(_0x319662,_0xfd1bea){const _0x1714b0=a130_0xeb1944;if(typeof Reflect==='object'&&typeof Reflect[_0x1714b0(0x1d9)]===_0x1714b0(0x211))return Reflect[_0x1714b0(0x1d9)](_0x319662,_0xfd1bea);};Object['defineProperty'](exports,a130_0xeb1944(0x1f2),{'value':!![]}),exports[a130_0xeb1944(0x1cc)]=void 0x0;const constants_1=require(a130_0xeb1944(0x1ca)),salesforce_git_sync_service_1=require(a130_0xeb1944(0x1fd)),salesforce_rest_service_1=require(a130_0xeb1944(0x1f0)),typedi_1=require(a130_0xeb1944(0x201)),salesforce_sync_service_1=require(a130_0xeb1944(0x1e2)),salesforce_service_1=require(a130_0xeb1944(0x20c)),factory_parser_1=require('../../parsers/factory.parser'),path_utils_1=require(a130_0xeb1944(0x1e0)),components_utils_1=require('../utils/components.utils');function a130_0x5095(_0x343182,_0xad2279){const _0x559095=a130_0x4920();return a130_0x5095=function(_0x8ebef,_0x38d9d4){_0x8ebef=_0x8ebef-0x1ca;let _0x492050=_0x559095[_0x8ebef];return _0x492050;},a130_0x5095(_0x343182,_0xad2279);}let GitCommitService=class GitCommitService{constructor(_0x12f768,_0x5e62a9,_0x664f2a,_0x370a05){const _0x28fc2a=a130_0xeb1944;this[_0x28fc2a(0x1cf)]=_0x12f768,this[_0x28fc2a(0x1d5)]=_0x5e62a9,this[_0x28fc2a(0x1fc)]=_0x664f2a,this['salesforce']=_0x370a05,this[_0x28fc2a(0x205)]=0xc8;}get[a130_0xeb1944(0x1ce)](){const _0x24b64a=a130_0xeb1944;var _0x2e81f7;return((_0x2e81f7=this[_0x24b64a(0x1ff)])===null||_0x2e81f7===void 0x0?void 0x0:_0x2e81f7[_0x24b64a(0x1ce)])||'';}get[a130_0xeb1944(0x212)](){const _0x51611a=a130_0xeb1944;var _0x31217c;return((_0x31217c=this[_0x51611a(0x1ff)])===null||_0x31217c===void 0x0?void 0x0:_0x31217c[_0x51611a(0x212)])||'';}get[a130_0xeb1944(0x220)](){const _0x13e899=a130_0xeb1944;return this[_0x13e899(0x1ff)]['recordTypeName'];}async[a130_0xeb1944(0x21f)](_0x21cd34){const _0x3a0716=a130_0xeb1944;return this[_0x3a0716(0x1cf)]['createCommit'](_0x21cd34,this[_0x3a0716(0x1ce)]);}async[a130_0xeb1944(0x204)](_0xa4dd1f){const _0x2fd1f9=a130_0xeb1944;if(this[_0x2fd1f9(0x1ff)]){const _0x1f2be1=await this[_0x2fd1f9(0x1fc)][_0x2fd1f9(0x20f)](this[_0x2fd1f9(0x1ff)]),_0x1f7e4f=await this[_0x2fd1f9(0x1f9)][_0x2fd1f9(0x21d)](_0x1f2be1)['then'](_0x416bd5=>typeof _0x416bd5===_0x2fd1f9(0x1fb)?JSON[_0x2fd1f9(0x21c)](_0x416bd5):_0x416bd5)[_0x2fd1f9(0x1dd)](()=>({}));if(_0x1f7e4f[this[_0x2fd1f9(0x1fa)][_0x2fd1f9(0x1e8)]]){if(_0x1f7e4f[this['gitCommit'][_0x2fd1f9(0x1e8)]][_0x2fd1f9(0x1d4)]===_0xa4dd1f)return!![];}return![];}return![];}async['updateRemoteState'](_0x12b14b){const _0x2c8b49=a130_0xeb1944;this[_0x2c8b49(0x1ff)]&&await this[_0x2c8b49(0x1fc)][_0x2c8b49(0x1f6)](this[_0x2c8b49(0x1ff)],_0x12b14b);}[a130_0xeb1944(0x1f8)](){const _0x5c786c=a130_0xeb1944;return this[_0x5c786c(0x208)]['map'](({fileName:_0x7803bc})=>_0x7803bc);}async['proceedFile'](_0x194fc5,_0x5723ee,_0x3d4b3b){const _0x29ed0b=a130_0xeb1944,_0x4f8c42=await path_utils_1[_0x29ed0b(0x1ed)][_0x29ed0b(0x1d6)](this[_0x29ed0b(0x1ff)][_0x29ed0b(0x209)],_0x194fc5,_0x5723ee,_0x3d4b3b),_0x2e7854=components_utils_1[_0x29ed0b(0x1fe)][_0x29ed0b(0x1d8)](this[_0x29ed0b(0x208)],_0x194fc5,_0x3d4b3b,this['syncRecord'][_0x29ed0b(0x209)]),_0xbb2abe=factory_parser_1[_0x29ed0b(0x1df)][_0x29ed0b(0x1f4)]({'recordType':this[_0x29ed0b(0x1ff)][_0x29ed0b(0x209)],'sourceDir':_0x5723ee,'paths':_0x4f8c42}),_0x1d5b51=await _0xbb2abe[_0x29ed0b(0x21a)](),_0xd7c2bf=[],_0x54ae84=[];for(const _0x2ca610 of _0x1d5b51){const _0x52d000=_0x2e7854[_0x29ed0b(0x1e9)](_0x59cb8a=>_0x59cb8a['name']===_0x2ca610[_0x29ed0b(0x207)]&&_0x59cb8a[_0x29ed0b(0x21e)]===_0x2ca610[_0x29ed0b(0x21e)]);if(!_0x52d000){_0xd7c2bf[_0x29ed0b(0x1e6)](_0x2ca610);continue;}_0x2ca610['crc']!==_0x52d000['crc32']&&_0x54ae84[_0x29ed0b(0x1e6)]({'meta':_0x52d000,'component':_0x2ca610}),_0x2e7854[_0x29ed0b(0x1de)](_0x2e7854['indexOf'](_0x52d000),0x1);}return{'inserted':_0xd7c2bf,'modified':_0x54ae84,'removed':_0x2e7854};}async[a130_0xeb1944(0x216)](){const _0x5709db=a130_0xeb1944;this[_0x5709db(0x1ff)]=this['gitCommit'][_0x5709db(0x219)]==='master'?await this[_0x5709db(0x1fc)]['getRepositoryRecordByName'](this['gitCommit'][_0x5709db(0x202)]):await this['salesforceSync'][_0x5709db(0x1da)](this[_0x5709db(0x1fa)][_0x5709db(0x219)]),this[_0x5709db(0x1db)]=await this['salesforceGitSync']['getComponentRecordTypes']();}async['fetchComponentsMetadata'](_0x224ec2){const _0x51a7a5=a130_0xeb1944;if(this['gitCommit']['force']||_0x224ec2){this[_0x51a7a5(0x208)]=this[_0x51a7a5(0x212)]?await this[_0x51a7a5(0x1cf)]['fetchBranchComponents'](this[_0x51a7a5(0x212)]):await this[_0x51a7a5(0x1cf)][_0x51a7a5(0x217)](this['repositoryId']);return;}const _0xb55304=components_utils_1[_0x51a7a5(0x1fe)][_0x51a7a5(0x206)](this['gitCommit'][_0x51a7a5(0x1ee)],this[_0x51a7a5(0x1ff)]['recordTypeName']);this['componentsMetadata']=[];while(_0xb55304['length']){const _0x305aba=_0xb55304[_0x51a7a5(0x1de)](0x0,this[_0x51a7a5(0x205)]),_0x2862fb=this['branchId']?await this[_0x51a7a5(0x1cf)][_0x51a7a5(0x1d7)](_0x305aba,this['branchId']):await this['salesforceGitSync'][_0x51a7a5(0x218)](_0x305aba,this[_0x51a7a5(0x1ce)]);this[_0x51a7a5(0x208)][_0x51a7a5(0x1e6)](..._0x2862fb);}}async[a130_0xeb1944(0x1ec)](_0x37807b){const _0x5d79c2=a130_0xeb1944;this[_0x5d79c2(0x212)]?await this[_0x5d79c2(0x1d5)][_0x5d79c2(0x1f3)](constants_1[_0x5d79c2(0x215)],this[_0x5d79c2(0x212)],{[constants_1[_0x5d79c2(0x1f5)]+'Synchronization_Status__c']:_0x37807b,[constants_1[_0x5d79c2(0x200)]+_0x5d79c2(0x20a)]:Date['now']()}):await this['salesforceRest'][_0x5d79c2(0x1f3)](constants_1[_0x5d79c2(0x20b)],this[_0x5d79c2(0x1ce)],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0x37807b});}[a130_0xeb1944(0x1d2)](_0x5d42a2){this['gitCommit']=_0x5d42a2;}['getRecordTypes'](){const _0x1179d3=a130_0xeb1944;return this[_0x1179d3(0x1db)];}['getRepositoryId'](){return this['repositoryId'];}[a130_0xeb1944(0x1ea)](){const _0x5f1212=a130_0xeb1944;return this[_0x5f1212(0x212)];}};GitCommitService=__decorate([(0x0,typedi_1[a130_0xeb1944(0x1d0)])({'transient':!![]}),__metadata(a130_0xeb1944(0x1f7),[salesforce_git_sync_service_1[a130_0xeb1944(0x20d)],salesforce_rest_service_1[a130_0xeb1944(0x1cd)],salesforce_sync_service_1[a130_0xeb1944(0x213)],salesforce_service_1[a130_0xeb1944(0x1e7)]])],GitCommitService),exports[a130_0xeb1944(0x1cc)]=GitCommitService;