const a110_0x364d0e=a110_0x4001;(function(_0x5be852,_0x452d57){const _0x31d51f=a110_0x4001,_0x109cf8=_0x5be852();while(!![]){try{const _0x5a92f0=parseInt(_0x31d51f(0x1d2))/0x1+-parseInt(_0x31d51f(0x207))/0x2+-parseInt(_0x31d51f(0x1f3))/0x3+parseInt(_0x31d51f(0x1fb))/0x4+parseInt(_0x31d51f(0x1fd))/0x5+parseInt(_0x31d51f(0x205))/0x6*(parseInt(_0x31d51f(0x216))/0x7)+parseInt(_0x31d51f(0x214))/0x8;if(_0x5a92f0===_0x452d57)break;else _0x109cf8['push'](_0x109cf8['shift']());}catch(_0x5395a8){_0x109cf8['push'](_0x109cf8['shift']());}}}(a110_0x48c4,0x48c5f));const a110_0x488981=(function(){let _0x4c4afd=!![];return function(_0x51073d,_0x74aa66){const _0xbf0cfe=_0x4c4afd?function(){const _0xf6ed09=a110_0x4001;if(_0x74aa66){const _0x400627=_0x74aa66[_0xf6ed09(0x1ee)](_0x51073d,arguments);return _0x74aa66=null,_0x400627;}}:function(){};return _0x4c4afd=![],_0xbf0cfe;};}()),a110_0x395bc5=a110_0x488981(this,function(){const _0x24bfbb=a110_0x4001;return a110_0x395bc5[_0x24bfbb(0x225)]()[_0x24bfbb(0x1ff)](_0x24bfbb(0x211))[_0x24bfbb(0x225)]()['constructor'](a110_0x395bc5)['search'](_0x24bfbb(0x211));});a110_0x395bc5();function a110_0x48c4(){const _0x1f16e0=['splice','lastCommit','fetchRepositoryComponents','(((.+)+)+)+$','master','componentsMetadata','1664088ZbVGbB','FLOSUM_GIT_NAMESPACE','2268ZxCVmJ','SalesforceService','getRepositoryRecordByName','filter','function','Service','FLOSUM_NAMESPACE','now','salesforceGitSync','GitCommitService','gitCommit','object','([./-]{1}|$)','getRepositoryId','../../parsers/utils','toString','../../salesforce/services/salesforce-git-sync.service','createCommit','Synchronization_Status__c','checkSyncStatus','metadata','design:paramtypes','repositoryId','69655EDDgFu','getRecordTypes','push','fetchRepositoryOrBranchData','getBranchId','FLOSUM_BRANCH','syncRecord','fileNames','fetchRepositoryComponentsByFilenames','name','parse','readFilesByFilename','crc','defineProperty','indexOf','salesforceSync','SalesforceGitSyncService','getUnusedComponentsFilePaths','force','TASKS_PER_TICK','fileName','SalesforceSyncService','salesforce','then','crc32','Last_Updated_On__c','decorate','fetchBranchComponents','apply','updateRemoteState','string','replace','match','1683234yWAawm','META_XML_EXTENSION','../../parsers/mdapi/parser-v2','recordTypes','proceedFile','salesforceRest','branchId','../../../../constants','518044JvJKhH','setCommitDto','2782255wXnMeQ','repositoryGit','search','fetchComponentsMetadata','branch','updateStatus','../../salesforce/services/salesforce.service','patch','6912mpGpck','../../salesforce/services/salesforce-rest.service','955438ReFVKO','getBranchRecordByName','length','catch','getComponentRecordTypes','type','__metadata'];a110_0x48c4=function(){return _0x1f16e0;};return a110_0x48c4();}function a110_0x4001(_0x1c4594,_0x4d3b09){const _0xfc51d3=a110_0x48c4();return a110_0x4001=function(_0x395bc5,_0x488981){_0x395bc5=_0x395bc5-0x1d1;let _0x48c43a=_0xfc51d3[_0x395bc5];return _0x48c43a;},a110_0x4001(_0x1c4594,_0x4d3b09);}'use strict';var __decorate=this&&this['__decorate']||function(_0x3b5316,_0x34e966,_0x59a545,_0x408b7f){const _0xc600db=a110_0x4001;var _0x1a8e0f=arguments['length'],_0x3a7255=_0x1a8e0f<0x3?_0x34e966:_0x408b7f===null?_0x408b7f=Object['getOwnPropertyDescriptor'](_0x34e966,_0x59a545):_0x408b7f,_0x53d32c;if(typeof Reflect===_0xc600db(0x221)&&typeof Reflect[_0xc600db(0x1ec)]==='function')_0x3a7255=Reflect['decorate'](_0x3b5316,_0x34e966,_0x59a545,_0x408b7f);else{for(var _0x6d634b=_0x3b5316['length']-0x1;_0x6d634b>=0x0;_0x6d634b--)if(_0x53d32c=_0x3b5316[_0x6d634b])_0x3a7255=(_0x1a8e0f<0x3?_0x53d32c(_0x3a7255):_0x1a8e0f>0x3?_0x53d32c(_0x34e966,_0x59a545,_0x3a7255):_0x53d32c(_0x34e966,_0x59a545))||_0x3a7255;}return _0x1a8e0f>0x3&&_0x3a7255&&Object[_0xc600db(0x1df)](_0x34e966,_0x59a545,_0x3a7255),_0x3a7255;},__metadata=this&&this[a110_0x364d0e(0x20d)]||function(_0x1ae01c,_0x4bc3ef){const _0x34ef3b=a110_0x364d0e;if(typeof Reflect===_0x34ef3b(0x221)&&typeof Reflect[_0x34ef3b(0x22a)]===_0x34ef3b(0x21a))return Reflect[_0x34ef3b(0x22a)](_0x1ae01c,_0x4bc3ef);};Object[a110_0x364d0e(0x1df)](exports,'__esModule',{'value':!![]}),exports[a110_0x364d0e(0x21f)]=void 0x0;const constants_1=require(a110_0x364d0e(0x1fa)),salesforce_git_sync_service_1=require(a110_0x364d0e(0x226)),salesforce_rest_service_1=require(a110_0x364d0e(0x206)),typedi_1=require('typedi'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a110_0x364d0e(0x203)),parser_v2_1=require(a110_0x364d0e(0x1f5)),utils_1=require(a110_0x364d0e(0x224));let GitCommitService=class GitCommitService{constructor(_0x52548a,_0x3d7035,_0x25918c,_0x49f023){const _0x261659=a110_0x364d0e;this['salesforceGitSync']=_0x52548a,this[_0x261659(0x1f8)]=_0x3d7035,this[_0x261659(0x1e1)]=_0x25918c,this[_0x261659(0x1e8)]=_0x49f023,this['TASKS_PER_TICK']=0xc8;}get['repositoryId'](){const _0x1dc3d9=a110_0x364d0e;var _0x3d20d5;return((_0x3d20d5=this['syncRecord'])===null||_0x3d20d5===void 0x0?void 0x0:_0x3d20d5[_0x1dc3d9(0x1d1)])||'';}get[a110_0x364d0e(0x1f9)](){const _0x1a4223=a110_0x364d0e;var _0x5e20ba;return((_0x5e20ba=this[_0x1a4223(0x1d8)])===null||_0x5e20ba===void 0x0?void 0x0:_0x5e20ba['branchId'])||'';}async['createCommit'](_0x110aa8){const _0x317263=a110_0x364d0e;return this[_0x317263(0x21e)][_0x317263(0x227)](_0x110aa8,this[_0x317263(0x1d1)]);}async[a110_0x364d0e(0x229)](_0x4f8bca){const _0xec0742=a110_0x364d0e;if(this['syncRecord']){const _0x4c452a=await this[_0xec0742(0x1e1)]['getRemoteStateAttachmentId'](this[_0xec0742(0x1d8)]),_0x5177c6=await this[_0xec0742(0x1e8)]['retrieveAttachment'](_0x4c452a)[_0xec0742(0x1e9)](_0x2d71a4=>typeof _0x2d71a4===_0xec0742(0x1f0)?JSON[_0xec0742(0x1dc)](_0x2d71a4):_0x2d71a4)['catch'](()=>({}));if(_0x5177c6[this[_0xec0742(0x220)][_0xec0742(0x1fe)]]){if(_0x5177c6[this[_0xec0742(0x220)][_0xec0742(0x1fe)]][_0xec0742(0x20f)]===_0x4f8bca)return!![];}return![];}return![];}async[a110_0x364d0e(0x1ef)](_0x3babf3){const _0x43ad01=a110_0x364d0e;this[_0x43ad01(0x1d8)]&&await this[_0x43ad01(0x1e1)][_0x43ad01(0x1ef)](this[_0x43ad01(0x1d8)],_0x3babf3);}[a110_0x364d0e(0x1e3)](){const _0x27c751=a110_0x364d0e;return this[_0x27c751(0x213)]['map'](({fileName:_0x4db6cf})=>_0x4db6cf);}async[a110_0x364d0e(0x1f7)](_0x72ff54,_0x10654d,_0x213a9b){const _0x2e23af=a110_0x364d0e,_0x28185f=new RegExp('^'+_0x72ff54+_0x2e23af(0x222));let _0x1d1852=[_0x72ff54];_0x213a9b&&(_0x1d1852=(0x0,utils_1['filterParserPaths'])(await(0x0,utils_1[_0x2e23af(0x1dd)])(_0x72ff54,_0x10654d)[_0x2e23af(0x20a)](()=>[])));const _0x229bc5=_0x213a9b?this[_0x2e23af(0x213)][_0x2e23af(0x219)](_0x4e7981=>_0x4e7981[_0x2e23af(0x1e6)][_0x2e23af(0x1f2)](_0x28185f)):this['componentsMetadata'][_0x2e23af(0x219)](_0x3233d4=>_0x3233d4[_0x2e23af(0x1e6)]===_0x72ff54||_0x3233d4[_0x2e23af(0x1e6)]===_0x72ff54[_0x2e23af(0x1f1)](constants_1[_0x2e23af(0x1f4)],'')),_0x40094f=new parser_v2_1['MDApiParserV2'](_0x10654d,_0x1d1852),_0x4857a2=await _0x40094f[_0x2e23af(0x1dc)](),_0xccd9d0=[],_0x57e107=[];for(const _0x4f1c21 of _0x4857a2){const _0x496d59=_0x229bc5['find'](_0x350f3a=>_0x350f3a[_0x2e23af(0x1db)]===_0x4f1c21[_0x2e23af(0x1db)]&&_0x350f3a['type']===_0x4f1c21[_0x2e23af(0x20c)]);if(!_0x496d59){_0xccd9d0[_0x2e23af(0x1d4)](_0x4f1c21);continue;}_0x4f1c21[_0x2e23af(0x1de)]!==_0x496d59[_0x2e23af(0x1ea)]&&_0x57e107['push']({'meta':_0x496d59,'component':_0x4f1c21}),_0x229bc5[_0x2e23af(0x20e)](_0x229bc5[_0x2e23af(0x1e0)](_0x496d59),0x1);}return{'inserted':_0xccd9d0,'modified':_0x57e107,'removed':_0x229bc5};}async[a110_0x364d0e(0x1d5)](){const _0x306cba=a110_0x364d0e;this[_0x306cba(0x1d8)]=this[_0x306cba(0x220)][_0x306cba(0x201)]===_0x306cba(0x212)?await this['salesforceSync'][_0x306cba(0x218)](this['gitCommit']['repository']):await this['salesforceSync'][_0x306cba(0x208)](this['gitCommit']['branch']),this[_0x306cba(0x1f6)]=await this['salesforceGitSync'][_0x306cba(0x20b)]();}async[a110_0x364d0e(0x200)](_0x27bf97){const _0x145b57=a110_0x364d0e;if(this[_0x145b57(0x220)][_0x145b57(0x1e4)]||_0x27bf97){this['componentsMetadata']=this[_0x145b57(0x1f9)]?await this[_0x145b57(0x21e)][_0x145b57(0x1ed)](this[_0x145b57(0x1f9)]):await this[_0x145b57(0x21e)][_0x145b57(0x210)](this['repositoryId']);return;}const _0x1af741=[...new Set(this[_0x145b57(0x220)][_0x145b57(0x1d9)]['map'](_0x163bdf=>_0x163bdf[_0x145b57(0x1f1)](constants_1[_0x145b57(0x1f4)],'')))];this[_0x145b57(0x213)]=[];while(_0x1af741[_0x145b57(0x209)]){const _0x4b8f20=_0x1af741[_0x145b57(0x20e)](0x0,this[_0x145b57(0x1e5)]),_0x549433=this['branchId']?await this['salesforceGitSync']['fetchBranchComponentsByFilenames'](_0x4b8f20,this[_0x145b57(0x1f9)]):await this[_0x145b57(0x21e)][_0x145b57(0x1da)](_0x4b8f20,this[_0x145b57(0x1d1)]);this[_0x145b57(0x213)][_0x145b57(0x1d4)](..._0x549433);}}async[a110_0x364d0e(0x202)](_0x1f4e28){const _0x2c8df8=a110_0x364d0e;this['branchId']?await this[_0x2c8df8(0x1f8)][_0x2c8df8(0x204)](constants_1[_0x2c8df8(0x1d7)],this[_0x2c8df8(0x1f9)],{[constants_1[_0x2c8df8(0x215)]+_0x2c8df8(0x228)]:_0x1f4e28,[constants_1[_0x2c8df8(0x21c)]+_0x2c8df8(0x1eb)]:Date[_0x2c8df8(0x21d)]()}):await this[_0x2c8df8(0x1f8)]['patch'](constants_1['FLOSUM_REPOSITORY'],this[_0x2c8df8(0x1d1)],{[constants_1[_0x2c8df8(0x215)]+_0x2c8df8(0x228)]:_0x1f4e28});}[a110_0x364d0e(0x1fc)](_0x22358e){const _0x4fbecb=a110_0x364d0e;this[_0x4fbecb(0x220)]=_0x22358e;}[a110_0x364d0e(0x1d3)](){return this['recordTypes'];}[a110_0x364d0e(0x223)](){const _0x15eaf4=a110_0x364d0e;return this[_0x15eaf4(0x1d1)];}[a110_0x364d0e(0x1d6)](){const _0xb9631e=a110_0x364d0e;return this[_0xb9631e(0x1f9)];}};GitCommitService=__decorate([(0x0,typedi_1[a110_0x364d0e(0x21b)])({'transient':!![]}),__metadata(a110_0x364d0e(0x22b),[salesforce_git_sync_service_1[a110_0x364d0e(0x1e2)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a110_0x364d0e(0x1e7)],salesforce_service_1[a110_0x364d0e(0x217)]])],GitCommitService),exports[a110_0x364d0e(0x21f)]=GitCommitService;