function a129_0x5b4c(){const _0x1cdbc7=['4525345hmttHw','fetchRepositoryComponentsByFilenames','getBranchRecordByName','65LQTQWJ','search','then','recordTypes','recordTypeName','salesforceGitSync','repositoryGit','8059EgQbpQ','(((.+)+)+)+$','fileNames','FLOSUM_NAMESPACE','catch','53664BkgumK','decorate','../../salesforce/services/salesforce-sync.service','salesforceRest','getComponentRecordTypes','16VWVmsW','737350ZkbcZb','__metadata','create','filterMetadataComponents','salesforce','getRepositoryId','64024NUOLiH','gitCommit','../utils/components.utils','setCommitDto','type','Service','GitCommitService','../utils/path.utils','../../../../constants','string','patch','readComponentPaths','toString','crc32','../../salesforce/services/salesforce-git-sync.service','typedi','design:paramtypes','parse','__decorate','getRepositoryRecordByName','85176RmPWXH','push','FLOSUM_REPOSITORY','getBranchId','function','Last_Updated_On__c','metadata','object','PathUtils','prepareComponentNamesForFetchMetadata','splice','defineProperty','branchId','ComponentsUtils','length','Synchronization_Status__c','repository','FactoryParser','salesforceSync','lastCommit','fetchComponentsMetadata','16PUTGcL','getOwnPropertyDescriptor','18PRALVO','recordType','force','updateRemoteState','SalesforceService','__esModule','TASKS_PER_TICK','syncRecord','createCommit','map','repositoryId','28UObkXO','now','82854IjEVkM','componentsMetadata'];a129_0x5b4c=function(){return _0x1cdbc7;};return a129_0x5b4c();}const a129_0x452e48=a129_0x1b16;(function(_0x1f49b8,_0x5ef6e1){const _0x571ead=a129_0x1b16,_0x477085=_0x1f49b8();while(!![]){try{const _0x47a2ac=parseInt(_0x571ead(0xa3))/0x1*(-parseInt(_0x571ead(0xad))/0x2)+parseInt(_0x571ead(0xa8))/0x3*(-parseInt(_0x571ead(0x88))/0x4)+-parseInt(_0x571ead(0x9c))/0x5*(-parseInt(_0x571ead(0x97))/0x6)+-parseInt(_0x571ead(0x95))/0x7*(-parseInt(_0x571ead(0xb4))/0x8)+-parseInt(_0x571ead(0x8a))/0x9*(parseInt(_0x571ead(0xae))/0xa)+parseInt(_0x571ead(0x99))/0xb+parseInt(_0x571ead(0xc8))/0xc;if(_0x47a2ac===_0x5ef6e1)break;else _0x477085['push'](_0x477085['shift']());}catch(_0x2ecb78){_0x477085['push'](_0x477085['shift']());}}}(a129_0x5b4c,0x549a0));const a129_0x4e5090=(function(){let _0x44ae26=!![];return function(_0x5b85b6,_0x861a57){const _0x4816a1=_0x44ae26?function(){if(_0x861a57){const _0x2e7276=_0x861a57['apply'](_0x5b85b6,arguments);return _0x861a57=null,_0x2e7276;}}:function(){};return _0x44ae26=![],_0x4816a1;};}()),a129_0x2613cb=a129_0x4e5090(this,function(){const _0x2f6052=a129_0x1b16;return a129_0x2613cb[_0x2f6052(0xc0)]()[_0x2f6052(0x9d)]('(((.+)+)+)+$')[_0x2f6052(0xc0)]()['constructor'](a129_0x2613cb)[_0x2f6052(0x9d)](_0x2f6052(0xa4));});a129_0x2613cb();function a129_0x1b16(_0x39b7d6,_0x584968){const _0x2cc781=a129_0x5b4c();return a129_0x1b16=function(_0x2613cb,_0x4e5090){_0x2613cb=_0x2613cb-0x83;let _0x5b4c38=_0x2cc781[_0x2613cb];return _0x5b4c38;},a129_0x1b16(_0x39b7d6,_0x584968);}'use strict';var __decorate=this&&this[a129_0x452e48(0xc6)]||function(_0xf74e81,_0x7b6aaa,_0x4cd8e5,_0x34a10e){const _0x50f619=a129_0x452e48;var _0xc823b7=arguments[_0x50f619(0xd6)],_0x2db356=_0xc823b7<0x3?_0x7b6aaa:_0x34a10e===null?_0x34a10e=Object[_0x50f619(0x89)](_0x7b6aaa,_0x4cd8e5):_0x34a10e,_0x4eca10;if(typeof Reflect==='object'&&typeof Reflect[_0x50f619(0xa9)]===_0x50f619(0xcc))_0x2db356=Reflect[_0x50f619(0xa9)](_0xf74e81,_0x7b6aaa,_0x4cd8e5,_0x34a10e);else{for(var _0x964e96=_0xf74e81[_0x50f619(0xd6)]-0x1;_0x964e96>=0x0;_0x964e96--)if(_0x4eca10=_0xf74e81[_0x964e96])_0x2db356=(_0xc823b7<0x3?_0x4eca10(_0x2db356):_0xc823b7>0x3?_0x4eca10(_0x7b6aaa,_0x4cd8e5,_0x2db356):_0x4eca10(_0x7b6aaa,_0x4cd8e5))||_0x2db356;}return _0xc823b7>0x3&&_0x2db356&&Object[_0x50f619(0xd3)](_0x7b6aaa,_0x4cd8e5,_0x2db356),_0x2db356;},__metadata=this&&this[a129_0x452e48(0xaf)]||function(_0xc8983f,_0x4818d3){const _0x37558e=a129_0x452e48;if(typeof Reflect===_0x37558e(0xcf)&&typeof Reflect['metadata']===_0x37558e(0xcc))return Reflect[_0x37558e(0xce)](_0xc8983f,_0x4818d3);};Object[a129_0x452e48(0xd3)](exports,a129_0x452e48(0x8f),{'value':!![]}),exports[a129_0x452e48(0xba)]=void 0x0;const constants_1=require(a129_0x452e48(0xbc)),salesforce_git_sync_service_1=require(a129_0x452e48(0xc2)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a129_0x452e48(0xc3)),salesforce_sync_service_1=require(a129_0x452e48(0xaa)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),factory_parser_1=require('../../parsers/factory.parser'),path_utils_1=require(a129_0x452e48(0xbb)),components_utils_1=require(a129_0x452e48(0xb6));let GitCommitService=class GitCommitService{constructor(_0x18c7d5,_0x5bd1cc,_0x3f4fe5,_0xe78aff){const _0x327413=a129_0x452e48;this[_0x327413(0xa1)]=_0x18c7d5,this[_0x327413(0xab)]=_0x5bd1cc,this[_0x327413(0x85)]=_0x3f4fe5,this[_0x327413(0xb2)]=_0xe78aff,this[_0x327413(0x90)]=0xc8;}get[a129_0x452e48(0x94)](){const _0x3301e7=a129_0x452e48;var _0x17c608;return((_0x17c608=this[_0x3301e7(0x91)])===null||_0x17c608===void 0x0?void 0x0:_0x17c608[_0x3301e7(0x94)])||'';}get['branchId'](){const _0x1bb644=a129_0x452e48;var _0x38140b;return((_0x38140b=this[_0x1bb644(0x91)])===null||_0x38140b===void 0x0?void 0x0:_0x38140b[_0x1bb644(0xd4)])||'';}get[a129_0x452e48(0x8b)](){const _0x250eb0=a129_0x452e48;return this[_0x250eb0(0x91)][_0x250eb0(0xa0)];}async[a129_0x452e48(0x92)](_0x50be87){const _0x268a38=a129_0x452e48;return this[_0x268a38(0xa1)][_0x268a38(0x92)](_0x50be87,this[_0x268a38(0x94)]);}async['checkSyncStatus'](_0x30e21f){const _0xee00d8=a129_0x452e48;if(this[_0xee00d8(0x91)]){const _0x5448f9=await this[_0xee00d8(0x85)]['getRemoteStateAttachmentId'](this[_0xee00d8(0x91)]),_0x57f0d1=await this[_0xee00d8(0xb2)]['retrieveAttachment'](_0x5448f9)[_0xee00d8(0x9e)](_0x3fe71c=>typeof _0x3fe71c===_0xee00d8(0xbd)?JSON[_0xee00d8(0xc5)](_0x3fe71c):_0x3fe71c)[_0xee00d8(0xa7)](()=>({}));if(_0x57f0d1[this['gitCommit']['repositoryGit']]){if(_0x57f0d1[this[_0xee00d8(0xb5)][_0xee00d8(0xa2)]][_0xee00d8(0x86)]===_0x30e21f)return!![];}return![];}return![];}async[a129_0x452e48(0x8d)](_0x525762){const _0x5bff9e=a129_0x452e48;this['syncRecord']&&await this['salesforceSync'][_0x5bff9e(0x8d)](this[_0x5bff9e(0x91)],_0x525762);}['getUnusedComponentsFilePaths'](){const _0x1ff4a9=a129_0x452e48;return this[_0x1ff4a9(0x98)][_0x1ff4a9(0x93)](({fileName:_0x533295})=>_0x533295);}async['proceedFile'](_0x27b073,_0x377e40,_0x4c6200){const _0x194170=a129_0x452e48,_0x2f5323=await path_utils_1[_0x194170(0xd0)][_0x194170(0xbf)](this[_0x194170(0x91)]['recordTypeName'],_0x27b073,_0x377e40,_0x4c6200),_0x51535f=components_utils_1[_0x194170(0xd5)][_0x194170(0xb1)](this['componentsMetadata'],_0x27b073,_0x4c6200,this['syncRecord'][_0x194170(0xa0)]),_0x4fa691=factory_parser_1[_0x194170(0x84)][_0x194170(0xb0)]({'recordType':this[_0x194170(0x91)][_0x194170(0xa0)],'sourceDir':_0x377e40,'paths':_0x2f5323}),_0x2751ee=await _0x4fa691['execute'](),_0x4c2d37=[],_0x43993a=[];for(const _0x2f9cf7 of _0x2751ee){const _0x3a49ef=_0x51535f['find'](_0x3e5e54=>_0x3e5e54['name']===_0x2f9cf7['name']&&_0x3e5e54[_0x194170(0xb8)]===_0x2f9cf7[_0x194170(0xb8)]);if(!_0x3a49ef){_0x4c2d37[_0x194170(0xc9)](_0x2f9cf7);continue;}_0x2f9cf7['crc']!==_0x3a49ef[_0x194170(0xc1)]&&_0x43993a[_0x194170(0xc9)]({'meta':_0x3a49ef,'component':_0x2f9cf7}),_0x51535f['splice'](_0x51535f['indexOf'](_0x3a49ef),0x1);}return{'inserted':_0x4c2d37,'modified':_0x43993a,'removed':_0x51535f};}async['fetchRepositoryOrBranchData'](){const _0x44e8ae=a129_0x452e48;this[_0x44e8ae(0x91)]=this['gitCommit']['branch']==='master'?await this[_0x44e8ae(0x85)][_0x44e8ae(0xc7)](this[_0x44e8ae(0xb5)][_0x44e8ae(0x83)]):await this['salesforceSync'][_0x44e8ae(0x9b)](this[_0x44e8ae(0xb5)]['branch']),this[_0x44e8ae(0x9f)]=await this[_0x44e8ae(0xa1)][_0x44e8ae(0xac)]();}async[a129_0x452e48(0x87)](_0x10ad52){const _0x14c914=a129_0x452e48;if(this['gitCommit'][_0x14c914(0x8c)]||_0x10ad52){this[_0x14c914(0x98)]=this[_0x14c914(0xd4)]?await this[_0x14c914(0xa1)]['fetchBranchComponents'](this[_0x14c914(0xd4)]):await this['salesforceGitSync']['fetchRepositoryComponents'](this[_0x14c914(0x94)]);return;}const _0x468bee=components_utils_1[_0x14c914(0xd5)][_0x14c914(0xd1)](this[_0x14c914(0xb5)][_0x14c914(0xa5)],this[_0x14c914(0x91)][_0x14c914(0xa0)]);this[_0x14c914(0x98)]=[];while(_0x468bee[_0x14c914(0xd6)]){const _0x27b5ed=_0x468bee[_0x14c914(0xd2)](0x0,this[_0x14c914(0x90)]),_0x157faa=this[_0x14c914(0xd4)]?await this['salesforceGitSync']['fetchBranchComponentsByFilenames'](_0x27b5ed,this['branchId']):await this[_0x14c914(0xa1)][_0x14c914(0x9a)](_0x27b5ed,this[_0x14c914(0x94)]);this['componentsMetadata'][_0x14c914(0xc9)](..._0x157faa);}}async['updateStatus'](_0x458730){const _0x5714d4=a129_0x452e48;this[_0x5714d4(0xd4)]?await this['salesforceRest'][_0x5714d4(0xbe)](constants_1['FLOSUM_BRANCH'],this[_0x5714d4(0xd4)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x5714d4(0xd7)]:_0x458730,[constants_1[_0x5714d4(0xa6)]+_0x5714d4(0xcd)]:Date[_0x5714d4(0x96)]()}):await this[_0x5714d4(0xab)][_0x5714d4(0xbe)](constants_1[_0x5714d4(0xca)],this['repositoryId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0x458730});}[a129_0x452e48(0xb7)](_0x495bf4){const _0x2e6a71=a129_0x452e48;this[_0x2e6a71(0xb5)]=_0x495bf4;}['getRecordTypes'](){const _0x1ffafe=a129_0x452e48;return this[_0x1ffafe(0x9f)];}[a129_0x452e48(0xb3)](){return this['repositoryId'];}[a129_0x452e48(0xcb)](){const _0x4157d1=a129_0x452e48;return this[_0x4157d1(0xd4)];}};GitCommitService=__decorate([(0x0,typedi_1[a129_0x452e48(0xb9)])({'transient':!![]}),__metadata(a129_0x452e48(0xc4),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a129_0x452e48(0x8e)]])],GitCommitService),exports['GitCommitService']=GitCommitService;