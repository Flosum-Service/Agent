const a110_0x230d0b=a110_0x4a3a;(function(_0x3df6bf,_0x3180b6){const _0xc3ffa6=a110_0x4a3a,_0x1df273=_0x3df6bf();while(!![]){try{const _0x430cfd=-parseInt(_0xc3ffa6(0xd3))/0x1+parseInt(_0xc3ffa6(0x116))/0x2+parseInt(_0xc3ffa6(0x10c))/0x3+parseInt(_0xc3ffa6(0x10f))/0x4+parseInt(_0xc3ffa6(0xc3))/0x5*(parseInt(_0xc3ffa6(0xda))/0x6)+-parseInt(_0xc3ffa6(0xdc))/0x7*(parseInt(_0xc3ffa6(0x111))/0x8)+parseInt(_0xc3ffa6(0xd7))/0x9*(-parseInt(_0xc3ffa6(0x107))/0xa);if(_0x430cfd===_0x3180b6)break;else _0x1df273['push'](_0x1df273['shift']());}catch(_0x28c98c){_0x1df273['push'](_0x1df273['shift']());}}}(a110_0x2d0c,0xce29b));const a110_0x2bfce3=(function(){let _0x542105=!![];return function(_0x5962b0,_0x581a29){const _0x261ead=_0x542105?function(){const _0x1311c7=a110_0x4a3a;if(_0x581a29){const _0x636b08=_0x581a29[_0x1311c7(0xe9)](_0x5962b0,arguments);return _0x581a29=null,_0x636b08;}}:function(){};return _0x542105=![],_0x261ead;};}()),a110_0x1812ba=a110_0x2bfce3(this,function(){const _0x24e9d0=a110_0x4a3a;return a110_0x1812ba[_0x24e9d0(0xfd)]()['search'](_0x24e9d0(0xee))[_0x24e9d0(0xfd)]()[_0x24e9d0(0x106)](a110_0x1812ba)[_0x24e9d0(0x112)](_0x24e9d0(0xee));});a110_0x1812ba();'use strict';function a110_0x4a3a(_0x51466,_0x2191b8){const _0xe04225=a110_0x2d0c();return a110_0x4a3a=function(_0x1812ba,_0x2bfce3){_0x1812ba=_0x1812ba-0xc1;let _0x2d0c7f=_0xe04225[_0x1812ba];return _0x2d0c7f;},a110_0x4a3a(_0x51466,_0x2191b8);}var __decorate=this&&this[a110_0x230d0b(0xde)]||function(_0x4f61bf,_0x439ead,_0x4ef7e2,_0x46a6cf){const _0x48248b=a110_0x230d0b;var _0xd2d527=arguments['length'],_0x14eedd=_0xd2d527<0x3?_0x439ead:_0x46a6cf===null?_0x46a6cf=Object[_0x48248b(0xc2)](_0x439ead,_0x4ef7e2):_0x46a6cf,_0x46bc4c;if(typeof Reflect===_0x48248b(0xeb)&&typeof Reflect[_0x48248b(0x10e)]===_0x48248b(0xe0))_0x14eedd=Reflect[_0x48248b(0x10e)](_0x4f61bf,_0x439ead,_0x4ef7e2,_0x46a6cf);else{for(var _0x320f63=_0x4f61bf[_0x48248b(0xfb)]-0x1;_0x320f63>=0x0;_0x320f63--)if(_0x46bc4c=_0x4f61bf[_0x320f63])_0x14eedd=(_0xd2d527<0x3?_0x46bc4c(_0x14eedd):_0xd2d527>0x3?_0x46bc4c(_0x439ead,_0x4ef7e2,_0x14eedd):_0x46bc4c(_0x439ead,_0x4ef7e2))||_0x14eedd;}return _0xd2d527>0x3&&_0x14eedd&&Object['defineProperty'](_0x439ead,_0x4ef7e2,_0x14eedd),_0x14eedd;},__metadata=this&&this[a110_0x230d0b(0xc8)]||function(_0x3cebb7,_0x515c57){const _0x2ef9bf=a110_0x230d0b;if(typeof Reflect===_0x2ef9bf(0xeb)&&typeof Reflect['metadata']===_0x2ef9bf(0xe0))return Reflect[_0x2ef9bf(0x113)](_0x3cebb7,_0x515c57);};Object[a110_0x230d0b(0xf2)](exports,a110_0x230d0b(0x10d),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a110_0x230d0b(0x104)),salesforce_git_sync_service_1=require(a110_0x230d0b(0xc9)),salesforce_rest_service_1=require(a110_0x230d0b(0xe4)),typedi_1=require(a110_0x230d0b(0xcd)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a110_0x230d0b(0x103)),utils_1=require(a110_0x230d0b(0x115)),factory_parser_1=require(a110_0x230d0b(0xf6)),vlocity_1=require('../../parsers/utils/vlocity');let GitCommitService=class GitCommitService{constructor(_0x38427b,_0x1a5093,_0x3ec688,_0x231432){const _0x19a554=a110_0x230d0b;this[_0x19a554(0xf5)]=_0x38427b,this['salesforceRest']=_0x1a5093,this[_0x19a554(0x11c)]=_0x3ec688,this[_0x19a554(0xe5)]=_0x231432,this[_0x19a554(0x10a)]=0xc8;}get['repositoryId'](){const _0x7a2dc3=a110_0x230d0b;var _0x5a6f99;return((_0x5a6f99=this['syncRecord'])===null||_0x5a6f99===void 0x0?void 0x0:_0x5a6f99[_0x7a2dc3(0xf8)])||'';}get['branchId'](){const _0x57d4ce=a110_0x230d0b;var _0x378b26;return((_0x378b26=this['syncRecord'])===null||_0x378b26===void 0x0?void 0x0:_0x378b26[_0x57d4ce(0xea)])||'';}async[a110_0x230d0b(0xed)](_0x3ba345){const _0x4afd9a=a110_0x230d0b;return this[_0x4afd9a(0xf5)][_0x4afd9a(0xed)](_0x3ba345,this[_0x4afd9a(0xf8)]);}async[a110_0x230d0b(0xf3)](_0x2ec3b7){const _0xa5158d=a110_0x230d0b;if(this[_0xa5158d(0x109)]){const _0x440651=await this[_0xa5158d(0x11c)][_0xa5158d(0xcb)](this[_0xa5158d(0x109)]),_0x22b5d2=await this['salesforce'][_0xa5158d(0x11b)](_0x440651)[_0xa5158d(0xfe)](_0x508ce2=>typeof _0x508ce2===_0xa5158d(0xcc)?JSON['parse'](_0x508ce2):_0x508ce2)[_0xa5158d(0x118)](()=>({}));if(_0x22b5d2[this[_0xa5158d(0xf4)][_0xa5158d(0x119)]]){if(_0x22b5d2[this[_0xa5158d(0xf4)]['repositoryGit']][_0xa5158d(0xd8)]===_0x2ec3b7)return!![];}return![];}return![];}async[a110_0x230d0b(0x108)](_0xe24583){const _0x570ed0=a110_0x230d0b;this[_0x570ed0(0x109)]&&await this[_0x570ed0(0x11c)][_0x570ed0(0x108)](this[_0x570ed0(0x109)],_0xe24583);}[a110_0x230d0b(0xc5)](){const _0x205cf6=a110_0x230d0b;return this['componentsMetadata'][_0x205cf6(0xdf)](({fileName:_0x3a5158})=>_0x3a5158);}async[a110_0x230d0b(0xff)](_0x39c3cf,_0x3779de,_0x4d5af8){const _0x1a8a39=a110_0x230d0b,_0x2711c2=new RegExp('^'+_0x39c3cf+_0x1a8a39(0xdb));let _0x48f2fc=[_0x39c3cf];_0x4d5af8&&!(0x0,vlocity_1['isVlocityComponent'])(_0x39c3cf)&&(_0x48f2fc=(0x0,utils_1[_0x1a8a39(0x117)])(await(0x0,utils_1[_0x1a8a39(0x11a)])(_0x39c3cf,_0x3779de)['catch'](()=>[])));const _0x2100cb=_0x4d5af8?this[_0x1a8a39(0xf7)][_0x1a8a39(0x105)](_0x19c48e=>_0x19c48e['fileName']['match'](_0x2711c2)):this['componentsMetadata'][_0x1a8a39(0x105)](_0x55da77=>_0x55da77[_0x1a8a39(0xc4)]===_0x39c3cf||_0x55da77['fileName']===_0x39c3cf[_0x1a8a39(0xca)](constants_1['META_XML_EXTENSION'],'')),_0x1e7cdb=factory_parser_1[_0x1a8a39(0xd4)]['create'](_0x3779de,_0x48f2fc),_0x1fdd3a=await _0x1e7cdb[_0x1a8a39(0xd9)](),_0x392af8=[],_0x2230ef=[];for(const _0x315c0b of _0x1fdd3a){const _0x224764=_0x2100cb[_0x1a8a39(0xd2)](_0x3114b2=>_0x3114b2[_0x1a8a39(0x101)]===_0x315c0b[_0x1a8a39(0x101)]&&_0x3114b2[_0x1a8a39(0xf1)]===_0x315c0b['type']);if(!_0x224764){_0x392af8[_0x1a8a39(0xdd)](_0x315c0b);continue;}_0x315c0b['crc']!==_0x224764[_0x1a8a39(0x10b)]&&_0x2230ef['push']({'meta':_0x224764,'component':_0x315c0b}),_0x2100cb[_0x1a8a39(0xf9)](_0x2100cb[_0x1a8a39(0xd0)](_0x224764),0x1);}return{'inserted':_0x392af8,'modified':_0x2230ef,'removed':_0x2100cb};}async[a110_0x230d0b(0xc7)](){const _0x18618d=a110_0x230d0b;this[_0x18618d(0x109)]=this[_0x18618d(0xf4)]['branch']===_0x18618d(0xfc)?await this[_0x18618d(0x11c)][_0x18618d(0xd6)](this['gitCommit']['repository']):await this['salesforceSync']['getBranchRecordByName'](this[_0x18618d(0xf4)]['branch']),this[_0x18618d(0xd1)]=await this[_0x18618d(0xf5)][_0x18618d(0xe1)]();}async[a110_0x230d0b(0x100)](_0x1b8b26){const _0x2cd221=a110_0x230d0b;if(this[_0x2cd221(0xf4)]['force']||_0x1b8b26){this[_0x2cd221(0xf7)]=this[_0x2cd221(0xea)]?await this['salesforceGitSync'][_0x2cd221(0xe3)](this[_0x2cd221(0xea)]):await this[_0x2cd221(0xf5)][_0x2cd221(0xfa)](this['repositoryId']);return;}const _0x4c8c22=[...new Set(this[_0x2cd221(0xf4)][_0x2cd221(0xc6)][_0x2cd221(0xdf)](_0x4422b2=>_0x4422b2['replace'](constants_1['META_XML_EXTENSION'],'')))];this[_0x2cd221(0xf7)]=[];while(_0x4c8c22['length']){const _0x2282e0=_0x4c8c22[_0x2cd221(0xf9)](0x0,this['TASKS_PER_TICK']),_0x56aabc=this[_0x2cd221(0xea)]?await this['salesforceGitSync'][_0x2cd221(0xce)](_0x2282e0,this[_0x2cd221(0xea)]):await this[_0x2cd221(0xf5)][_0x2cd221(0x102)](_0x2282e0,this[_0x2cd221(0xf8)]);this['componentsMetadata']['push'](..._0x56aabc);}}async[a110_0x230d0b(0x114)](_0x5e4650){const _0x1db22a=a110_0x230d0b;this[_0x1db22a(0xea)]?await this['salesforceRest']['patch'](constants_1[_0x1db22a(0xec)],this[_0x1db22a(0xea)],{[constants_1[_0x1db22a(0xd5)]+_0x1db22a(0xe7)]:_0x5e4650,[constants_1[_0x1db22a(0xe6)]+'Last_Updated_On__c']:Date[_0x1db22a(0x110)]()}):await this[_0x1db22a(0xcf)]['patch'](constants_1['FLOSUM_REPOSITORY'],this['repositoryId'],{[constants_1[_0x1db22a(0xd5)]+'Synchronization_Status__c']:_0x5e4650});}[a110_0x230d0b(0xf0)](_0xefb0c3){const _0x24de3d=a110_0x230d0b;this[_0x24de3d(0xf4)]=_0xefb0c3;}['getRecordTypes'](){const _0x587c1f=a110_0x230d0b;return this[_0x587c1f(0xd1)];}[a110_0x230d0b(0xe8)](){const _0x44e857=a110_0x230d0b;return this[_0x44e857(0xf8)];}['getBranchId'](){const _0x439d4c=a110_0x230d0b;return this[_0x439d4c(0xea)];}};function a110_0x2d0c(){const _0x480470=['updateRemoteState','syncRecord','TASKS_PER_TICK','crc32','2702337owowQh','__esModule','decorate','1862340mDOqPv','now','1648qrkAEB','search','metadata','updateStatus','../../parsers/utils','3039086IrtfqT','filterParserPaths','catch','repositoryGit','readFilesByFilename','retrieveAttachment','salesforceSync','SalesforceService','getOwnPropertyDescriptor','730bcEfDU','fileName','getUnusedComponentsFilePaths','fileNames','fetchRepositoryOrBranchData','__metadata','../../salesforce/services/salesforce-git-sync.service','replace','getRemoteStateAttachmentId','string','typedi','fetchBranchComponentsByFilenames','salesforceRest','indexOf','recordTypes','find','1292098WFOrzH','FactoryParser','FLOSUM_GIT_NAMESPACE','getRepositoryRecordByName','22806qQMLFf','lastCommit','parse','60186MMLBzH','([./-]{1}|$)','26579DMPWJw','push','__decorate','map','function','getComponentRecordTypes','SalesforceSyncService','fetchBranchComponents','../../salesforce/services/salesforce-rest.service','salesforce','FLOSUM_NAMESPACE','Synchronization_Status__c','getRepositoryId','apply','branchId','object','FLOSUM_BRANCH','createCommit','(((.+)+)+)+$','Service','setCommitDto','type','defineProperty','checkSyncStatus','gitCommit','salesforceGitSync','../../parsers/mdapi/factory.parser','componentsMetadata','repositoryId','splice','fetchRepositoryComponents','length','master','toString','then','proceedFile','fetchComponentsMetadata','name','fetchRepositoryComponentsByFilenames','../../salesforce/services/salesforce.service','../../../../constants','filter','constructor','5650vRoyVa'];a110_0x2d0c=function(){return _0x480470;};return a110_0x2d0c();}GitCommitService=__decorate([(0x0,typedi_1[a110_0x230d0b(0xef)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a110_0x230d0b(0xe2)],salesforce_service_1[a110_0x230d0b(0xc1)]])],GitCommitService),exports['GitCommitService']=GitCommitService;