const a131_0x168832=a131_0x2b9e;(function(_0x64da69,_0x66df5c){const _0x4bcfd3=a131_0x2b9e,_0x491e46=_0x64da69();while(!![]){try{const _0x141914=-parseInt(_0x4bcfd3(0x18e))/0x1*(-parseInt(_0x4bcfd3(0x163))/0x2)+parseInt(_0x4bcfd3(0x1ac))/0x3*(parseInt(_0x4bcfd3(0x16d))/0x4)+parseInt(_0x4bcfd3(0x1b2))/0x5*(-parseInt(_0x4bcfd3(0x19c))/0x6)+-parseInt(_0x4bcfd3(0x18a))/0x7+-parseInt(_0x4bcfd3(0x196))/0x8+-parseInt(_0x4bcfd3(0x162))/0x9+parseInt(_0x4bcfd3(0x187))/0xa;if(_0x141914===_0x66df5c)break;else _0x491e46['push'](_0x491e46['shift']());}catch(_0x16ca81){_0x491e46['push'](_0x491e46['shift']());}}}(a131_0x3885,0x6e8b4));function a131_0x3885(){const _0x2ad3ad=['__esModule','salesforce','repository','(((.+)+)+)+$','fetchRepositoryComponents','1640496TNcFUI','repositoryGit','Synchronization_Status__c','fetchBranchComponents','__decorate','retrieveAttachment','2126712lFOERY','../utils/components.utils','salesforceSync','__metadata','metadata','getRepositoryRecordByName','getBranchId','repositoryId','splice','lastCommit','../../salesforce/services/salesforce-rest.service','then','crc32','constructor','componentsMetadata','recordTypes','46821Mwipwi','master','decorate','length','getBranchRecordByName','patch','10hWqEiN','name','getRemoteStateAttachmentId','FLOSUM_GIT_NAMESPACE','FLOSUM_NAMESPACE','updateStatus','1838241qLfgVP','22kbYrtJ','FactoryParser','execute','now','salesforceRest','FLOSUM_REPOSITORY','toString','fetchRepositoryComponentsByFilenames','salesforceGitSync','../../salesforce/services/salesforce.service','80kCBjxV','ComponentsUtils','string','search','Last_Updated_On__c','find','checkSyncStatus','GitCommitService','object','design:paramtypes','branch','setCommitDto','create','syncRecord','fileNames','../../salesforce/services/salesforce-git-sync.service','filterMetadataComponents','force','TASKS_PER_TICK','fetchBranchComponentsByFilenames','gitCommit','branchId','indexOf','updateRemoteState','apply','PathUtils','9130070sucybc','recordType','SalesforceGitSyncService','613732wgTUCT','SalesforceService','recordTypeName','push','39412cokzit','fetchRepositoryOrBranchData','map'];a131_0x3885=function(){return _0x2ad3ad;};return a131_0x3885();}const a131_0x1898e1=(function(){let _0x62f845=!![];return function(_0x5042b3,_0x125b6c){const _0x274ae9=_0x62f845?function(){const _0x76b869=a131_0x2b9e;if(_0x125b6c){const _0x228719=_0x125b6c[_0x76b869(0x185)](_0x5042b3,arguments);return _0x125b6c=null,_0x228719;}}:function(){};return _0x62f845=![],_0x274ae9;};}()),a131_0x34c035=a131_0x1898e1(this,function(){const _0x3a4a9c=a131_0x2b9e;return a131_0x34c035[_0x3a4a9c(0x169)]()[_0x3a4a9c(0x170)](_0x3a4a9c(0x194))[_0x3a4a9c(0x169)]()[_0x3a4a9c(0x1a9)](a131_0x34c035)[_0x3a4a9c(0x170)]('(((.+)+)+)+$');});a131_0x34c035();'use strict';var __decorate=this&&this[a131_0x168832(0x19a)]||function(_0x5bd425,_0x5f3f90,_0x42b248,_0x13da2d){const _0x2b5bf9=a131_0x168832;var _0x3b64ef=arguments[_0x2b5bf9(0x1af)],_0x214ddd=_0x3b64ef<0x3?_0x5f3f90:_0x13da2d===null?_0x13da2d=Object['getOwnPropertyDescriptor'](_0x5f3f90,_0x42b248):_0x13da2d,_0x3674e6;if(typeof Reflect===_0x2b5bf9(0x175)&&typeof Reflect[_0x2b5bf9(0x1ae)]==='function')_0x214ddd=Reflect[_0x2b5bf9(0x1ae)](_0x5bd425,_0x5f3f90,_0x42b248,_0x13da2d);else{for(var _0x4f4fc1=_0x5bd425[_0x2b5bf9(0x1af)]-0x1;_0x4f4fc1>=0x0;_0x4f4fc1--)if(_0x3674e6=_0x5bd425[_0x4f4fc1])_0x214ddd=(_0x3b64ef<0x3?_0x3674e6(_0x214ddd):_0x3b64ef>0x3?_0x3674e6(_0x5f3f90,_0x42b248,_0x214ddd):_0x3674e6(_0x5f3f90,_0x42b248))||_0x214ddd;}return _0x3b64ef>0x3&&_0x214ddd&&Object['defineProperty'](_0x5f3f90,_0x42b248,_0x214ddd),_0x214ddd;},__metadata=this&&this[a131_0x168832(0x19f)]||function(_0x405012,_0x47d1e9){const _0xd6307d=a131_0x168832;if(typeof Reflect===_0xd6307d(0x175)&&typeof Reflect[_0xd6307d(0x1a0)]==='function')return Reflect['metadata'](_0x405012,_0x47d1e9);};Object['defineProperty'](exports,a131_0x168832(0x191),{'value':!![]}),exports[a131_0x168832(0x174)]=void 0x0;function a131_0x2b9e(_0x4bc21b,_0x114050){const _0x1da374=a131_0x3885();return a131_0x2b9e=function(_0x34c035,_0x1898e1){_0x34c035=_0x34c035-0x162;let _0x3885d3=_0x1da374[_0x34c035];return _0x3885d3;},a131_0x2b9e(_0x4bc21b,_0x114050);}const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a131_0x168832(0x17c)),salesforce_rest_service_1=require(a131_0x168832(0x1a6)),typedi_1=require('typedi'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a131_0x168832(0x16c)),factory_parser_1=require('../../parsers/factory.parser'),path_utils_1=require('../utils/path.utils'),components_utils_1=require(a131_0x168832(0x19d));let GitCommitService=class GitCommitService{constructor(_0x2ad034,_0x1abad4,_0x3fdc94,_0x52d9b8){const _0x2e8cb6=a131_0x168832;this[_0x2e8cb6(0x16b)]=_0x2ad034,this[_0x2e8cb6(0x167)]=_0x1abad4,this[_0x2e8cb6(0x19e)]=_0x3fdc94,this[_0x2e8cb6(0x192)]=_0x52d9b8,this[_0x2e8cb6(0x17f)]=0xc8;}get[a131_0x168832(0x1a3)](){const _0x55f6b6=a131_0x168832;var _0x2a16bf;return((_0x2a16bf=this[_0x55f6b6(0x17a)])===null||_0x2a16bf===void 0x0?void 0x0:_0x2a16bf[_0x55f6b6(0x1a3)])||'';}get[a131_0x168832(0x182)](){const _0x16dc68=a131_0x168832;var _0x17d310;return((_0x17d310=this['syncRecord'])===null||_0x17d310===void 0x0?void 0x0:_0x17d310[_0x16dc68(0x182)])||'';}get[a131_0x168832(0x188)](){const _0xbd6707=a131_0x168832;return this[_0xbd6707(0x17a)]['recordTypeName'];}async['createCommit'](_0x77c303){const _0x2874d1=a131_0x168832;return this[_0x2874d1(0x16b)]['createCommit'](_0x77c303,this['repositoryId']);}async[a131_0x168832(0x173)](_0x2f14d7){const _0x2e361b=a131_0x168832;if(this['syncRecord']){const _0x154ca4=await this[_0x2e361b(0x19e)][_0x2e361b(0x1b4)](this[_0x2e361b(0x17a)]),_0x502da3=await this['salesforce'][_0x2e361b(0x19b)](_0x154ca4)[_0x2e361b(0x1a7)](_0x45a516=>typeof _0x45a516===_0x2e361b(0x16f)?JSON['parse'](_0x45a516):_0x45a516)['catch'](()=>({}));if(_0x502da3[this['gitCommit']['repositoryGit']]){if(_0x502da3[this[_0x2e361b(0x181)][_0x2e361b(0x197)]][_0x2e361b(0x1a5)]===_0x2f14d7)return!![];}return![];}return![];}async[a131_0x168832(0x184)](_0x348d09){const _0x164566=a131_0x168832;this[_0x164566(0x17a)]&&await this[_0x164566(0x19e)]['updateRemoteState'](this[_0x164566(0x17a)],_0x348d09);}['getUnusedComponentsFilePaths'](){const _0x339373=a131_0x168832;return this[_0x339373(0x1aa)][_0x339373(0x190)](({fileName:_0x15fe37})=>_0x15fe37);}async['proceedFile'](_0x1037e1,_0x1992da,_0x4e53bf){const _0x3c07a0=a131_0x168832,_0x4b0677=await path_utils_1[_0x3c07a0(0x186)]['readComponentPaths'](this[_0x3c07a0(0x17a)][_0x3c07a0(0x18c)],_0x1037e1,_0x1992da,_0x4e53bf),_0x26d121=components_utils_1[_0x3c07a0(0x16e)][_0x3c07a0(0x17d)](this['componentsMetadata'],_0x1037e1,_0x4e53bf,this[_0x3c07a0(0x17a)][_0x3c07a0(0x18c)]),_0x27dcc3=factory_parser_1[_0x3c07a0(0x164)][_0x3c07a0(0x179)]({'recordType':this[_0x3c07a0(0x17a)][_0x3c07a0(0x18c)],'sourceDir':_0x1992da,'paths':_0x4b0677}),_0x24f459=await _0x27dcc3[_0x3c07a0(0x165)](),_0x2931fe=[],_0x480c3c=[];for(const _0x3c60ae of _0x24f459){const _0x20a49d=_0x26d121[_0x3c07a0(0x172)](_0x4a28bf=>_0x4a28bf[_0x3c07a0(0x1b3)]===_0x3c60ae[_0x3c07a0(0x1b3)]&&_0x4a28bf['type']===_0x3c60ae['type']);if(!_0x20a49d){_0x2931fe['push'](_0x3c60ae);continue;}_0x3c60ae['crc']!==_0x20a49d[_0x3c07a0(0x1a8)]&&_0x480c3c['push']({'meta':_0x20a49d,'component':_0x3c60ae}),_0x26d121[_0x3c07a0(0x1a4)](_0x26d121[_0x3c07a0(0x183)](_0x20a49d),0x1);}return{'inserted':_0x2931fe,'modified':_0x480c3c,'removed':_0x26d121};}async[a131_0x168832(0x18f)](){const _0x19fc43=a131_0x168832;this[_0x19fc43(0x17a)]=this['gitCommit'][_0x19fc43(0x177)]===_0x19fc43(0x1ad)?await this[_0x19fc43(0x19e)][_0x19fc43(0x1a1)](this[_0x19fc43(0x181)][_0x19fc43(0x193)]):await this[_0x19fc43(0x19e)][_0x19fc43(0x1b0)](this[_0x19fc43(0x181)][_0x19fc43(0x177)]),this[_0x19fc43(0x1ab)]=await this[_0x19fc43(0x16b)]['getComponentRecordTypes']();}async['fetchComponentsMetadata'](_0x4b22e7){const _0x5e2a2b=a131_0x168832;if(this['gitCommit'][_0x5e2a2b(0x17e)]||_0x4b22e7){this[_0x5e2a2b(0x1aa)]=this[_0x5e2a2b(0x182)]?await this['salesforceGitSync'][_0x5e2a2b(0x199)](this['branchId']):await this[_0x5e2a2b(0x16b)][_0x5e2a2b(0x195)](this['repositoryId']);return;}const _0x36b9d2=components_utils_1[_0x5e2a2b(0x16e)]['prepareComponentNamesForFetchMetadata'](this[_0x5e2a2b(0x181)][_0x5e2a2b(0x17b)],this[_0x5e2a2b(0x17a)][_0x5e2a2b(0x18c)]);this[_0x5e2a2b(0x1aa)]=[];while(_0x36b9d2[_0x5e2a2b(0x1af)]){const _0x247d85=_0x36b9d2[_0x5e2a2b(0x1a4)](0x0,this[_0x5e2a2b(0x17f)]),_0x45b9ce=this[_0x5e2a2b(0x182)]?await this[_0x5e2a2b(0x16b)][_0x5e2a2b(0x180)](_0x247d85,this[_0x5e2a2b(0x182)]):await this[_0x5e2a2b(0x16b)][_0x5e2a2b(0x16a)](_0x247d85,this[_0x5e2a2b(0x1a3)]);this[_0x5e2a2b(0x1aa)][_0x5e2a2b(0x18d)](..._0x45b9ce);}}async[a131_0x168832(0x1b7)](_0x272d82){const _0x57ea6c=a131_0x168832;this[_0x57ea6c(0x182)]?await this[_0x57ea6c(0x167)][_0x57ea6c(0x1b1)](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1[_0x57ea6c(0x1b5)]+_0x57ea6c(0x198)]:_0x272d82,[constants_1[_0x57ea6c(0x1b6)]+_0x57ea6c(0x171)]:Date[_0x57ea6c(0x166)]()}):await this[_0x57ea6c(0x167)][_0x57ea6c(0x1b1)](constants_1[_0x57ea6c(0x168)],this[_0x57ea6c(0x1a3)],{[constants_1[_0x57ea6c(0x1b5)]+_0x57ea6c(0x198)]:_0x272d82});}[a131_0x168832(0x178)](_0x356532){const _0xc82dca=a131_0x168832;this[_0xc82dca(0x181)]=_0x356532;}['getRecordTypes'](){const _0x302a4e=a131_0x168832;return this[_0x302a4e(0x1ab)];}['getRepositoryId'](){const _0x3ef64f=a131_0x168832;return this[_0x3ef64f(0x1a3)];}[a131_0x168832(0x1a2)](){const _0x5f4c05=a131_0x168832;return this[_0x5f4c05(0x182)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a131_0x168832(0x176),[salesforce_git_sync_service_1[a131_0x168832(0x189)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a131_0x168832(0x18b)]])],GitCommitService),exports[a131_0x168832(0x174)]=GitCommitService;