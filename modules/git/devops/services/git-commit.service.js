const a131_0x1c312=a131_0x4f2c;(function(_0x5342e5,_0x2ee142){const _0x15b655=a131_0x4f2c,_0x120dc0=_0x5342e5();while(!![]){try{const _0x106be7=-parseInt(_0x15b655(0x208))/0x1*(-parseInt(_0x15b655(0x1c7))/0x2)+parseInt(_0x15b655(0x1ca))/0x3*(parseInt(_0x15b655(0x1eb))/0x4)+-parseInt(_0x15b655(0x1f3))/0x5+-parseInt(_0x15b655(0x20e))/0x6+parseInt(_0x15b655(0x20a))/0x7+-parseInt(_0x15b655(0x1cb))/0x8+parseInt(_0x15b655(0x1e0))/0x9;if(_0x106be7===_0x2ee142)break;else _0x120dc0['push'](_0x120dc0['shift']());}catch(_0x59f843){_0x120dc0['push'](_0x120dc0['shift']());}}}(a131_0x489b,0xb37ec));function a131_0x489b(){const _0x587dcc=['salesforceRest','salesforceSync','constructor','push','string','updateStatus','defineProperty','lastCommit','../../salesforce/services/salesforce-sync.service','componentsMetadata','../../parsers/factory.parser','toString','Synchronization_Status__c','fetchBranchComponentsByFilenames','gitCommit','TASKS_PER_TICK','checkSyncStatus','SalesforceRestService','map','5914uITCCz','repositoryId','retrieveAttachment','3iButBN','4111480MImxtX','../utils/components.utils','getOwnPropertyDescriptor','then','GitCommitService','getUnusedComponentsFilePaths','patch','execute','../../salesforce/services/salesforce-rest.service','design:paramtypes','fetchRepositoryOrBranchData','salesforceGitSync','getRepositoryId','indexOf','branch','search','now','recordTypeName','getBranchId','__metadata','getRecordTypes','14401737JlAWMc','readComponentPaths','updateRemoteState','FLOSUM_GIT_NAMESPACE','createCommit','setCommitDto','__esModule','../utils/path.utils','length','SalesforceSyncService','fetchComponentsMetadata','2472104aPcGFR','(((.+)+)+)+$','fetchRepositoryComponentsByFilenames','SalesforceService','Service','proceedFile','metadata','type','4390375IjWvWd','fetchBranchComponents','splice','../../salesforce/services/salesforce.service','object','repositoryGit','crc32','crc','SalesforceGitSyncService','syncRecord','parse','FactoryParser','getComponentRecordTypes','../../salesforce/services/salesforce-git-sync.service','PathUtils','repository','branchId','Last_Updated_On__c','ComponentsUtils','../../../../constants','catch','349IZeNUA','decorate','2257171UqWlAl','getBranchRecordByName','fetchRepositoryComponents','apply','8672658uAfzFn','salesforce','recordTypes','force','function'];a131_0x489b=function(){return _0x587dcc;};return a131_0x489b();}const a131_0x1d5bcf=(function(){let _0x377432=!![];return function(_0x578dbf,_0x56a35c){const _0x7df459=_0x377432?function(){const _0xfac3bb=a131_0x4f2c;if(_0x56a35c){const _0x1dde99=_0x56a35c[_0xfac3bb(0x20d)](_0x578dbf,arguments);return _0x56a35c=null,_0x1dde99;}}:function(){};return _0x377432=![],_0x7df459;};}()),a131_0x1ad7a6=a131_0x1d5bcf(this,function(){const _0x3018a3=a131_0x4f2c;return a131_0x1ad7a6[_0x3018a3(0x21e)]()[_0x3018a3(0x1da)]('(((.+)+)+)+$')[_0x3018a3(0x21e)]()[_0x3018a3(0x215)](a131_0x1ad7a6)[_0x3018a3(0x1da)](_0x3018a3(0x1ec));});a131_0x1ad7a6();'use strict';var __decorate=this&&this['__decorate']||function(_0x1f829f,_0x304125,_0x21aa09,_0x34020a){const _0x1992fa=a131_0x4f2c;var _0x553a9d=arguments['length'],_0x3b7228=_0x553a9d<0x3?_0x304125:_0x34020a===null?_0x34020a=Object[_0x1992fa(0x1cd)](_0x304125,_0x21aa09):_0x34020a,_0x6d5675;if(typeof Reflect===_0x1992fa(0x1f7)&&typeof Reflect[_0x1992fa(0x209)]===_0x1992fa(0x212))_0x3b7228=Reflect[_0x1992fa(0x209)](_0x1f829f,_0x304125,_0x21aa09,_0x34020a);else{for(var _0x5c370c=_0x1f829f['length']-0x1;_0x5c370c>=0x0;_0x5c370c--)if(_0x6d5675=_0x1f829f[_0x5c370c])_0x3b7228=(_0x553a9d<0x3?_0x6d5675(_0x3b7228):_0x553a9d>0x3?_0x6d5675(_0x304125,_0x21aa09,_0x3b7228):_0x6d5675(_0x304125,_0x21aa09))||_0x3b7228;}return _0x553a9d>0x3&&_0x3b7228&&Object[_0x1992fa(0x219)](_0x304125,_0x21aa09,_0x3b7228),_0x3b7228;},__metadata=this&&this[a131_0x1c312(0x1de)]||function(_0x42d198,_0x3fe6a5){const _0x31379a=a131_0x1c312;if(typeof Reflect===_0x31379a(0x1f7)&&typeof Reflect[_0x31379a(0x1f1)]==='function')return Reflect[_0x31379a(0x1f1)](_0x42d198,_0x3fe6a5);};Object['defineProperty'](exports,a131_0x1c312(0x1e6),{'value':!![]}),exports[a131_0x1c312(0x1cf)]=void 0x0;const constants_1=require(a131_0x1c312(0x206)),salesforce_git_sync_service_1=require(a131_0x1c312(0x200)),salesforce_rest_service_1=require(a131_0x1c312(0x1d3)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a131_0x1c312(0x21b)),salesforce_service_1=require(a131_0x1c312(0x1f6)),factory_parser_1=require(a131_0x1c312(0x21d)),path_utils_1=require(a131_0x1c312(0x1e7)),components_utils_1=require(a131_0x1c312(0x1cc));function a131_0x4f2c(_0x2f219e,_0x2751bb){const _0x1bda09=a131_0x489b();return a131_0x4f2c=function(_0x1ad7a6,_0x1d5bcf){_0x1ad7a6=_0x1ad7a6-0x1c4;let _0x489bce=_0x1bda09[_0x1ad7a6];return _0x489bce;},a131_0x4f2c(_0x2f219e,_0x2751bb);}let GitCommitService=class GitCommitService{constructor(_0x5a8084,_0x54b8e2,_0x3ddff3,_0x2ff9b5){const _0x235771=a131_0x1c312;this[_0x235771(0x1d6)]=_0x5a8084,this[_0x235771(0x213)]=_0x54b8e2,this['salesforceSync']=_0x3ddff3,this[_0x235771(0x20f)]=_0x2ff9b5,this[_0x235771(0x222)]=0xc8;}get[a131_0x1c312(0x1c8)](){var _0x22e794;return((_0x22e794=this['syncRecord'])===null||_0x22e794===void 0x0?void 0x0:_0x22e794['repositoryId'])||'';}get[a131_0x1c312(0x203)](){var _0x31b8b3;return((_0x31b8b3=this['syncRecord'])===null||_0x31b8b3===void 0x0?void 0x0:_0x31b8b3['branchId'])||'';}get['recordType'](){const _0x4298d3=a131_0x1c312;return this['syncRecord'][_0x4298d3(0x1dc)];}async[a131_0x1c312(0x1e4)](_0x30bd86){const _0x11182c=a131_0x1c312;return this['salesforceGitSync']['createCommit'](_0x30bd86,this[_0x11182c(0x1c8)]);}async[a131_0x1c312(0x1c4)](_0x81e0e7){const _0x1e3fa7=a131_0x1c312;if(this[_0x1e3fa7(0x1fc)]){const _0x54dc1d=await this[_0x1e3fa7(0x214)]['getRemoteStateAttachmentId'](this[_0x1e3fa7(0x1fc)]),_0x24e780=await this[_0x1e3fa7(0x20f)][_0x1e3fa7(0x1c9)](_0x54dc1d)[_0x1e3fa7(0x1ce)](_0x31f613=>typeof _0x31f613===_0x1e3fa7(0x217)?JSON[_0x1e3fa7(0x1fd)](_0x31f613):_0x31f613)[_0x1e3fa7(0x207)](()=>({}));if(_0x24e780[this[_0x1e3fa7(0x221)]['repositoryGit']]){if(_0x24e780[this['gitCommit'][_0x1e3fa7(0x1f8)]][_0x1e3fa7(0x21a)]===_0x81e0e7)return!![];}return![];}return![];}async[a131_0x1c312(0x1e2)](_0x3e50ee){const _0x1f7137=a131_0x1c312;this[_0x1f7137(0x1fc)]&&await this[_0x1f7137(0x214)][_0x1f7137(0x1e2)](this['syncRecord'],_0x3e50ee);}[a131_0x1c312(0x1d0)](){const _0x22f945=a131_0x1c312;return this['componentsMetadata'][_0x22f945(0x1c6)](({fileName:_0x8fce59})=>_0x8fce59);}async[a131_0x1c312(0x1f0)](_0x377d8d,_0x533da3,_0x4c8350){const _0x4f6dd3=a131_0x1c312,_0xbfa4e4=await path_utils_1[_0x4f6dd3(0x201)][_0x4f6dd3(0x1e1)](this[_0x4f6dd3(0x1fc)][_0x4f6dd3(0x1dc)],_0x377d8d,_0x533da3,_0x4c8350),_0x354639=components_utils_1[_0x4f6dd3(0x205)]['filterMetadataComponents'](this[_0x4f6dd3(0x21c)],_0x377d8d,_0x4c8350,this[_0x4f6dd3(0x1fc)][_0x4f6dd3(0x1dc)]),_0x50fa4e=factory_parser_1[_0x4f6dd3(0x1fe)]['create']({'recordType':this[_0x4f6dd3(0x1fc)][_0x4f6dd3(0x1dc)],'sourceDir':_0x533da3,'paths':_0xbfa4e4}),_0xc04d20=await _0x50fa4e[_0x4f6dd3(0x1d2)](),_0x4e2531=[],_0x37a040=[];for(const _0x175596 of _0xc04d20){const _0xc1e76a=_0x354639['find'](_0x40187b=>_0x40187b['name']===_0x175596['name']&&_0x40187b[_0x4f6dd3(0x1f2)]===_0x175596[_0x4f6dd3(0x1f2)]);if(!_0xc1e76a){_0x4e2531[_0x4f6dd3(0x216)](_0x175596);continue;}_0x175596[_0x4f6dd3(0x1fa)]!==_0xc1e76a[_0x4f6dd3(0x1f9)]&&_0x37a040[_0x4f6dd3(0x216)]({'meta':_0xc1e76a,'component':_0x175596}),_0x354639[_0x4f6dd3(0x1f5)](_0x354639[_0x4f6dd3(0x1d8)](_0xc1e76a),0x1);}return{'inserted':_0x4e2531,'modified':_0x37a040,'removed':_0x354639};}async[a131_0x1c312(0x1d5)](){const _0x18ab08=a131_0x1c312;this[_0x18ab08(0x1fc)]=this[_0x18ab08(0x221)][_0x18ab08(0x1d9)]==='master'?await this['salesforceSync']['getRepositoryRecordByName'](this[_0x18ab08(0x221)][_0x18ab08(0x202)]):await this[_0x18ab08(0x214)][_0x18ab08(0x20b)](this['gitCommit'][_0x18ab08(0x1d9)]),this[_0x18ab08(0x210)]=await this[_0x18ab08(0x1d6)][_0x18ab08(0x1ff)]();}async[a131_0x1c312(0x1ea)](_0x13533e){const _0x222917=a131_0x1c312;if(this[_0x222917(0x221)][_0x222917(0x211)]||_0x13533e){this['componentsMetadata']=this[_0x222917(0x203)]?await this[_0x222917(0x1d6)][_0x222917(0x1f4)](this['branchId']):await this[_0x222917(0x1d6)][_0x222917(0x20c)](this[_0x222917(0x1c8)]);return;}const _0x424dc3=components_utils_1[_0x222917(0x205)]['prepareComponentNamesForFetchMetadata'](this['gitCommit']['fileNames'],this[_0x222917(0x1fc)][_0x222917(0x1dc)]);this[_0x222917(0x21c)]=[];while(_0x424dc3[_0x222917(0x1e8)]){const _0x2498c2=_0x424dc3['splice'](0x0,this[_0x222917(0x222)]),_0x3ff07f=this[_0x222917(0x203)]?await this[_0x222917(0x1d6)][_0x222917(0x220)](_0x2498c2,this['branchId']):await this[_0x222917(0x1d6)][_0x222917(0x1ed)](_0x2498c2,this[_0x222917(0x1c8)]);this[_0x222917(0x21c)][_0x222917(0x216)](..._0x3ff07f);}}async[a131_0x1c312(0x218)](_0x233173){const _0x51d9ed=a131_0x1c312;this[_0x51d9ed(0x203)]?await this[_0x51d9ed(0x213)][_0x51d9ed(0x1d1)](constants_1['FLOSUM_BRANCH'],this[_0x51d9ed(0x203)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x51d9ed(0x21f)]:_0x233173,[constants_1['FLOSUM_NAMESPACE']+_0x51d9ed(0x204)]:Date[_0x51d9ed(0x1db)]()}):await this[_0x51d9ed(0x213)]['patch'](constants_1['FLOSUM_REPOSITORY'],this['repositoryId'],{[constants_1[_0x51d9ed(0x1e3)]+_0x51d9ed(0x21f)]:_0x233173});}[a131_0x1c312(0x1e5)](_0x25ca7c){const _0x2571f5=a131_0x1c312;this[_0x2571f5(0x221)]=_0x25ca7c;}[a131_0x1c312(0x1df)](){const _0x5c4813=a131_0x1c312;return this[_0x5c4813(0x210)];}[a131_0x1c312(0x1d7)](){return this['repositoryId'];}[a131_0x1c312(0x1dd)](){const _0x29338a=a131_0x1c312;return this[_0x29338a(0x203)];}};GitCommitService=__decorate([(0x0,typedi_1[a131_0x1c312(0x1ef)])({'transient':!![]}),__metadata(a131_0x1c312(0x1d4),[salesforce_git_sync_service_1[a131_0x1c312(0x1fb)],salesforce_rest_service_1[a131_0x1c312(0x1c5)],salesforce_sync_service_1[a131_0x1c312(0x1e9)],salesforce_service_1[a131_0x1c312(0x1ee)]])],GitCommitService),exports[a131_0x1c312(0x1cf)]=GitCommitService;