const a110_0x98f095=a110_0x33c5;(function(_0xf9e7be,_0x3be558){const _0x569b78=a110_0x33c5,_0x3abe75=_0xf9e7be();while(!![]){try{const _0xee2efd=parseInt(_0x569b78(0xb7))/0x1+-parseInt(_0x569b78(0xc6))/0x2+-parseInt(_0x569b78(0xd4))/0x3+-parseInt(_0x569b78(0x105))/0x4+-parseInt(_0x569b78(0xf0))/0x5*(parseInt(_0x569b78(0xb8))/0x6)+-parseInt(_0x569b78(0xd8))/0x7*(-parseInt(_0x569b78(0xda))/0x8)+parseInt(_0x569b78(0xec))/0x9;if(_0xee2efd===_0x3be558)break;else _0x3abe75['push'](_0x3abe75['shift']());}catch(_0x46bba7){_0x3abe75['push'](_0x3abe75['shift']());}}}(a110_0xbc41,0x54887));const a110_0x5132b0=(function(){let _0x15fe06=!![];return function(_0x3e7527,_0x4651ee){const _0x289fbc=_0x15fe06?function(){if(_0x4651ee){const _0x31b313=_0x4651ee['apply'](_0x3e7527,arguments);return _0x4651ee=null,_0x31b313;}}:function(){};return _0x15fe06=![],_0x289fbc;};}()),a110_0x4b61b4=a110_0x5132b0(this,function(){const _0x38fbe4=a110_0x33c5;return a110_0x4b61b4[_0x38fbe4(0xed)]()[_0x38fbe4(0x101)](_0x38fbe4(0xe1))[_0x38fbe4(0xed)]()['constructor'](a110_0x4b61b4)[_0x38fbe4(0x101)](_0x38fbe4(0xe1));});a110_0x4b61b4();function a110_0x33c5(_0x48db5c,_0x1b74ae){const _0x2e9f0f=a110_0xbc41();return a110_0x33c5=function(_0x4b61b4,_0x5132b0){_0x4b61b4=_0x4b61b4-0xb7;let _0xbc4187=_0x2e9f0f[_0x4b61b4];return _0xbc4187;},a110_0x33c5(_0x48db5c,_0x1b74ae);}'use strict';var __decorate=this&&this[a110_0x98f095(0xff)]||function(_0xde2128,_0x1bb607,_0xbb6bc3,_0x5f540e){const _0x150a00=a110_0x98f095;var _0x237702=arguments[_0x150a00(0xc3)],_0x5a236e=_0x237702<0x3?_0x1bb607:_0x5f540e===null?_0x5f540e=Object[_0x150a00(0xfc)](_0x1bb607,_0xbb6bc3):_0x5f540e,_0x56c90e;if(typeof Reflect===_0x150a00(0xee)&&typeof Reflect[_0x150a00(0xc4)]===_0x150a00(0xfd))_0x5a236e=Reflect[_0x150a00(0xc4)](_0xde2128,_0x1bb607,_0xbb6bc3,_0x5f540e);else{for(var _0x50bc6c=_0xde2128[_0x150a00(0xc3)]-0x1;_0x50bc6c>=0x0;_0x50bc6c--)if(_0x56c90e=_0xde2128[_0x50bc6c])_0x5a236e=(_0x237702<0x3?_0x56c90e(_0x5a236e):_0x237702>0x3?_0x56c90e(_0x1bb607,_0xbb6bc3,_0x5a236e):_0x56c90e(_0x1bb607,_0xbb6bc3))||_0x5a236e;}return _0x237702>0x3&&_0x5a236e&&Object['defineProperty'](_0x1bb607,_0xbb6bc3,_0x5a236e),_0x5a236e;},__metadata=this&&this[a110_0x98f095(0xd6)]||function(_0x35c71d,_0x4f3e96){const _0x26d6ff=a110_0x98f095;if(typeof Reflect===_0x26d6ff(0xee)&&typeof Reflect[_0x26d6ff(0x103)]===_0x26d6ff(0xfd))return Reflect['metadata'](_0x35c71d,_0x4f3e96);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a110_0x98f095(0xc7)]=void 0x0;const constants_1=require(a110_0x98f095(0xe5)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a110_0x98f095(0xf3)),typedi_1=require(a110_0x98f095(0xbb)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a110_0x98f095(0xe9)),utils_1=require(a110_0x98f095(0xce)),factory_parser_1=require(a110_0x98f095(0xcd)),vlocity_1=require(a110_0x98f095(0x10b));function a110_0xbc41(){const _0x1d20ea=['filterParserPaths','75SFLDub','getUnusedComponentsFilePaths','fetchBranchComponents','../../salesforce/services/salesforce-rest.service','repositoryGit','salesforce','patch','fileName','repositoryId','match','syncRecord','branch','getOwnPropertyDescriptor','function','fetchRepositoryComponents','__decorate','getBranchId','search','force','metadata','createCommit','2304656GZBsMF','fetchComponentsMetadata','salesforceSync','parse','fileNames','updateStatus','../../parsers/utils/vlocity','getRepositoryId','type','374224OFvWkg','143586DHWhdq','map','FLOSUM_REPOSITORY','typedi','crc','META_XML_EXTENSION','crc32','getRecordTypes','SalesforceGitSyncService','push','salesforceRest','length','decorate','updateRemoteState','777532tGKxFv','GitCommitService','replace','([./-]{1}|$)','FLOSUM_GIT_NAMESPACE','SalesforceRestService','now','../../parsers/mdapi/factory.parser','../../parsers/utils','FactoryParser','FLOSUM_BRANCH','getBranchRecordByName','catch','branchId','1012548vSXWrI','Synchronization_Status__c','__metadata','SalesforceService','14flmcdB','recordTypes','1215320gtPnRM','retrieveAttachment','salesforceGitSync','componentsMetadata','SalesforceSyncService','create','fetchRepositoryOrBranchData','(((.+)+)+)+$','gitCommit','lastCommit','proceedFile','../../../../constants','filter','TASKS_PER_TICK','repository','../../salesforce/services/salesforce.service','name','splice','11966436JixxFq','toString','object'];a110_0xbc41=function(){return _0x1d20ea;};return a110_0xbc41();}let GitCommitService=class GitCommitService{constructor(_0x5c12c6,_0x4bd213,_0x19c11a,_0x14f65f){const _0x4406a9=a110_0x98f095;this[_0x4406a9(0xdc)]=_0x5c12c6,this['salesforceRest']=_0x4bd213,this[_0x4406a9(0x107)]=_0x19c11a,this['salesforce']=_0x14f65f,this[_0x4406a9(0xe7)]=0xc8;}get[a110_0x98f095(0xf8)](){const _0x2ebab3=a110_0x98f095;var _0x324920;return((_0x324920=this[_0x2ebab3(0xfa)])===null||_0x324920===void 0x0?void 0x0:_0x324920[_0x2ebab3(0xf8)])||'';}get[a110_0x98f095(0xd3)](){const _0x2fae5c=a110_0x98f095;var _0x1e0d2d;return((_0x1e0d2d=this['syncRecord'])===null||_0x1e0d2d===void 0x0?void 0x0:_0x1e0d2d[_0x2fae5c(0xd3)])||'';}async['createCommit'](_0x4c5a06){const _0x4266cf=a110_0x98f095;return this['salesforceGitSync'][_0x4266cf(0x104)](_0x4c5a06,this['repositoryId']);}async['checkSyncStatus'](_0x5a340b){const _0x49732b=a110_0x98f095;if(this[_0x49732b(0xfa)]){const _0x2fe422=await this[_0x49732b(0x107)]['getRemoteStateAttachmentId'](this['syncRecord']),_0x4d662d=await this[_0x49732b(0xf5)][_0x49732b(0xdb)](_0x2fe422)['then'](_0x165286=>typeof _0x165286==='string'?JSON[_0x49732b(0x108)](_0x165286):_0x165286)[_0x49732b(0xd2)](()=>({}));if(_0x4d662d[this[_0x49732b(0xe2)][_0x49732b(0xf4)]]){if(_0x4d662d[this[_0x49732b(0xe2)][_0x49732b(0xf4)]][_0x49732b(0xe3)]===_0x5a340b)return!![];}return![];}return![];}async[a110_0x98f095(0xc5)](_0x29fa61){const _0x57ab7b=a110_0x98f095;this[_0x57ab7b(0xfa)]&&await this[_0x57ab7b(0x107)][_0x57ab7b(0xc5)](this[_0x57ab7b(0xfa)],_0x29fa61);}[a110_0x98f095(0xf1)](){const _0x5bbb5a=a110_0x98f095;return this[_0x5bbb5a(0xdd)]['map'](({fileName:_0x5f120d})=>_0x5f120d);}async[a110_0x98f095(0xe4)](_0x2e9817,_0x12c87c,_0xa8007){const _0x4d8902=a110_0x98f095,_0x34e376=new RegExp('^'+_0x2e9817+_0x4d8902(0xc9));let _0x20c7c4=[_0x2e9817];_0xa8007&&!(0x0,vlocity_1['isVlocityComponent'])(_0x2e9817)&&(_0x20c7c4=(0x0,utils_1[_0x4d8902(0xef)])(await(0x0,utils_1['readFilesByFilename'])(_0x2e9817,_0x12c87c)['catch'](()=>[])));const _0x12afb1=_0xa8007?this[_0x4d8902(0xdd)][_0x4d8902(0xe6)](_0x32b2aa=>_0x32b2aa['fileName'][_0x4d8902(0xf9)](_0x34e376)):this[_0x4d8902(0xdd)][_0x4d8902(0xe6)](_0x32e30f=>_0x32e30f[_0x4d8902(0xf7)]===_0x2e9817||_0x32e30f[_0x4d8902(0xf7)]===_0x2e9817[_0x4d8902(0xc8)](constants_1['META_XML_EXTENSION'],'')),_0x41a7de=factory_parser_1[_0x4d8902(0xcf)][_0x4d8902(0xdf)](_0x12c87c,_0x20c7c4),_0x3bb1e4=await _0x41a7de['parse'](),_0xe0cc8f=[],_0x3c8a22=[];for(const _0x4336ee of _0x3bb1e4){const _0x8afb74=_0x12afb1['find'](_0x1764cc=>_0x1764cc[_0x4d8902(0xea)]===_0x4336ee[_0x4d8902(0xea)]&&_0x1764cc['type']===_0x4336ee[_0x4d8902(0x10d)]);if(!_0x8afb74){_0xe0cc8f[_0x4d8902(0xc1)](_0x4336ee);continue;}_0x4336ee[_0x4d8902(0xbc)]!==_0x8afb74[_0x4d8902(0xbe)]&&_0x3c8a22[_0x4d8902(0xc1)]({'meta':_0x8afb74,'component':_0x4336ee}),_0x12afb1[_0x4d8902(0xeb)](_0x12afb1['indexOf'](_0x8afb74),0x1);}return{'inserted':_0xe0cc8f,'modified':_0x3c8a22,'removed':_0x12afb1};}async[a110_0x98f095(0xe0)](){const _0xb03fda=a110_0x98f095;this[_0xb03fda(0xfa)]=this['gitCommit'][_0xb03fda(0xfb)]==='master'?await this['salesforceSync']['getRepositoryRecordByName'](this['gitCommit'][_0xb03fda(0xe8)]):await this[_0xb03fda(0x107)][_0xb03fda(0xd1)](this[_0xb03fda(0xe2)]['branch']),this['recordTypes']=await this[_0xb03fda(0xdc)]['getComponentRecordTypes']();}async[a110_0x98f095(0x106)](_0x48d942){const _0x58a26d=a110_0x98f095;if(this['gitCommit'][_0x58a26d(0x102)]||_0x48d942){this[_0x58a26d(0xdd)]=this['branchId']?await this[_0x58a26d(0xdc)][_0x58a26d(0xf2)](this[_0x58a26d(0xd3)]):await this[_0x58a26d(0xdc)][_0x58a26d(0xfe)](this[_0x58a26d(0xf8)]);return;}const _0x4190b0=[...new Set(this[_0x58a26d(0xe2)][_0x58a26d(0x109)][_0x58a26d(0xb9)](_0x3236df=>_0x3236df[_0x58a26d(0xc8)](constants_1[_0x58a26d(0xbd)],'')))];this[_0x58a26d(0xdd)]=[];while(_0x4190b0[_0x58a26d(0xc3)]){const _0x525b91=_0x4190b0['splice'](0x0,this['TASKS_PER_TICK']),_0xadf60c=this[_0x58a26d(0xd3)]?await this['salesforceGitSync']['fetchBranchComponentsByFilenames'](_0x525b91,this[_0x58a26d(0xd3)]):await this['salesforceGitSync']['fetchRepositoryComponentsByFilenames'](_0x525b91,this[_0x58a26d(0xf8)]);this['componentsMetadata']['push'](..._0xadf60c);}}async[a110_0x98f095(0x10a)](_0x1e5258){const _0x147763=a110_0x98f095;this[_0x147763(0xd3)]?await this[_0x147763(0xc2)]['patch'](constants_1[_0x147763(0xd0)],this[_0x147763(0xd3)],{[constants_1[_0x147763(0xca)]+_0x147763(0xd5)]:_0x1e5258,[constants_1['FLOSUM_NAMESPACE']+'Last_Updated_On__c']:Date[_0x147763(0xcc)]()}):await this[_0x147763(0xc2)][_0x147763(0xf6)](constants_1[_0x147763(0xba)],this[_0x147763(0xf8)],{[constants_1[_0x147763(0xca)]+_0x147763(0xd5)]:_0x1e5258});}['setCommitDto'](_0x482ee6){this['gitCommit']=_0x482ee6;}[a110_0x98f095(0xbf)](){const _0x3c32ef=a110_0x98f095;return this[_0x3c32ef(0xd9)];}[a110_0x98f095(0x10c)](){const _0x62e8af=a110_0x98f095;return this[_0x62e8af(0xf8)];}[a110_0x98f095(0x100)](){return this['branchId'];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a110_0x98f095(0xc0)],salesforce_rest_service_1[a110_0x98f095(0xcb)],salesforce_sync_service_1[a110_0x98f095(0xde)],salesforce_service_1[a110_0x98f095(0xd7)]])],GitCommitService),exports[a110_0x98f095(0xc7)]=GitCommitService;