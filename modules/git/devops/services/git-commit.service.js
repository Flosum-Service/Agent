const a66_0x38a1f4=a66_0x5448;(function(_0x4344a7,_0x5759aa){const _0x4a9bb6=a66_0x5448,_0x24039e=_0x4344a7();while(!![]){try{const _0x5d785d=parseInt(_0x4a9bb6(0x11b))/0x1*(parseInt(_0x4a9bb6(0x134))/0x2)+parseInt(_0x4a9bb6(0x13f))/0x3*(parseInt(_0x4a9bb6(0x11e))/0x4)+parseInt(_0x4a9bb6(0x142))/0x5+parseInt(_0x4a9bb6(0x115))/0x6+parseInt(_0x4a9bb6(0x107))/0x7+-parseInt(_0x4a9bb6(0x10f))/0x8+-parseInt(_0x4a9bb6(0x110))/0x9;if(_0x5d785d===_0x5759aa)break;else _0x24039e['push'](_0x24039e['shift']());}catch(_0x5b7d70){_0x24039e['push'](_0x24039e['shift']());}}}(a66_0x2630,0x69fbc));const a66_0x15682a=(function(){let _0x16d63c=!![];return function(_0x46c6b6,_0x3a6d47){const _0x46b272=_0x16d63c?function(){const _0x227050=a66_0x5448;if(_0x3a6d47){const _0x4596df=_0x3a6d47[_0x227050(0x11f)](_0x46c6b6,arguments);return _0x3a6d47=null,_0x4596df;}}:function(){};return _0x16d63c=![],_0x46b272;};}()),a66_0x508d01=a66_0x15682a(this,function(){const _0x1e33b9=a66_0x5448;return a66_0x508d01[_0x1e33b9(0x145)]()[_0x1e33b9(0x141)](_0x1e33b9(0x108))[_0x1e33b9(0x145)]()[_0x1e33b9(0x150)](a66_0x508d01)[_0x1e33b9(0x141)](_0x1e33b9(0x108));});a66_0x508d01();'use strict';function a66_0x2630(){const _0x59caef=['3704526FAmHjz','(((.+)+)+)+$','FLOSUM_NAMESPACE','splice','../../salesforce/services/salesforce.service','__decorate','repository','FLOSUM_GIT_NAMESPACE','6620640mFTVrV','6425946wKLMQE','filter','length','crc32','FLOSUM_REPOSITORY','1546878rRgEOM','getRepositoryRecordByName','recordTypes','design:paramtypes','metadata','then','1AIkROj','getRepositoryId','Synchronization_Status__c','1124jfpNAT','apply','../../salesforce/services/salesforce-sync.service','salesforceGitSync','master','MDApiParser','syncRecord','push','salesforceSync','getOwnPropertyDescriptor','Service','type','salesforceRest','__esModule','includes','fetchRepositoryComponentsByFilenames','crc','decorate','function','typedi','TASKS_PER_TICK','Last_Updated_On__c','541414lPJZTh','branchId','gitCommit','force','checkSyncStatus','getBranchRecordByName','branch','updateRemoteState','SalesforceGitSyncService','repositoryId','retrieveAttachment','3633HXjfNJ','getRecordTypes','search','2888265ZabDpy','SalesforceRestService','repositoryGit','toString','salesforce','FLOSUM_BRANCH','map','SalesforceService','isPathsEquals','find','defineProperty','fetchBranchComponentsByFilenames','GitCommitService','fetchComponentsMetadata','constructor','parse','filePath','name','lastCommit','updateStatus','string','../../../../constants','__metadata','fetchRepositoryComponents','getBranchId','componentsMetadata','object','createCommit'];a66_0x2630=function(){return _0x59caef;};return a66_0x2630();}function a66_0x5448(_0x2fd210,_0x57efa3){const _0x47d742=a66_0x2630();return a66_0x5448=function(_0x508d01,_0x15682a){_0x508d01=_0x508d01-0xfd;let _0x26307b=_0x47d742[_0x508d01];return _0x26307b;},a66_0x5448(_0x2fd210,_0x57efa3);}var __decorate=this&&this[a66_0x38a1f4(0x10c)]||function(_0x212900,_0x2b7c31,_0x319580,_0x8e20b2){const _0x33dffb=a66_0x38a1f4;var _0x475cc2=arguments[_0x33dffb(0x112)],_0x3c207c=_0x475cc2<0x3?_0x2b7c31:_0x8e20b2===null?_0x8e20b2=Object[_0x33dffb(0x127)](_0x2b7c31,_0x319580):_0x8e20b2,_0x5c37d2;if(typeof Reflect===_0x33dffb(0x105)&&typeof Reflect[_0x33dffb(0x12f)]===_0x33dffb(0x130))_0x3c207c=Reflect[_0x33dffb(0x12f)](_0x212900,_0x2b7c31,_0x319580,_0x8e20b2);else{for(var _0x39be94=_0x212900[_0x33dffb(0x112)]-0x1;_0x39be94>=0x0;_0x39be94--)if(_0x5c37d2=_0x212900[_0x39be94])_0x3c207c=(_0x475cc2<0x3?_0x5c37d2(_0x3c207c):_0x475cc2>0x3?_0x5c37d2(_0x2b7c31,_0x319580,_0x3c207c):_0x5c37d2(_0x2b7c31,_0x319580))||_0x3c207c;}return _0x475cc2>0x3&&_0x3c207c&&Object[_0x33dffb(0x14c)](_0x2b7c31,_0x319580,_0x3c207c),_0x3c207c;},__metadata=this&&this[a66_0x38a1f4(0x101)]||function(_0x5bdf1a,_0x1e10b6){const _0x1b14e6=a66_0x38a1f4;if(typeof Reflect===_0x1b14e6(0x105)&&typeof Reflect[_0x1b14e6(0x119)]==='function')return Reflect[_0x1b14e6(0x119)](_0x5bdf1a,_0x1e10b6);};Object[a66_0x38a1f4(0x14c)](exports,a66_0x38a1f4(0x12b),{'value':!![]}),exports[a66_0x38a1f4(0x14e)]=void 0x0;const constants_1=require(a66_0x38a1f4(0x100)),parser_1=require('../../parsers/mdapi/parser'),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a66_0x38a1f4(0x131)),salesforce_sync_service_1=require(a66_0x38a1f4(0x120)),salesforce_service_1=require(a66_0x38a1f4(0x10b)),git_commit_utils_1=require('../utils/git-commit.utils');let GitCommitService=class GitCommitService{constructor(_0x5e1ca6,_0x3aea5b,_0xbcfca2,_0x334c1a){const _0xfd58a9=a66_0x38a1f4;this[_0xfd58a9(0x121)]=_0x5e1ca6,this[_0xfd58a9(0x12a)]=_0x3aea5b,this[_0xfd58a9(0x126)]=_0xbcfca2,this[_0xfd58a9(0x146)]=_0x334c1a,this[_0xfd58a9(0x132)]=0xc8;}get[a66_0x38a1f4(0x13d)](){const _0x5e1cb7=a66_0x38a1f4;var _0x1666c2;return((_0x1666c2=this[_0x5e1cb7(0x124)])===null||_0x1666c2===void 0x0?void 0x0:_0x1666c2[_0x5e1cb7(0x13d)])||'';}get[a66_0x38a1f4(0x135)](){const _0x18f12d=a66_0x38a1f4;var _0xee6a46;return((_0xee6a46=this[_0x18f12d(0x124)])===null||_0xee6a46===void 0x0?void 0x0:_0xee6a46[_0x18f12d(0x135)])||'';}async[a66_0x38a1f4(0x106)](_0x25cac4){const _0x122106=a66_0x38a1f4;return this['salesforceGitSync'][_0x122106(0x106)](_0x25cac4,this['repositoryId']);}async[a66_0x38a1f4(0x138)](_0x12eb18){const _0x27e701=a66_0x38a1f4;if(this['syncRecord']){const _0x160841=await this[_0x27e701(0x126)]['getRemoteStateAttachmentId'](this[_0x27e701(0x124)]),_0x270037=await this['salesforce'][_0x27e701(0x13e)](_0x160841)[_0x27e701(0x11a)](_0x2fffc=>typeof _0x2fffc===_0x27e701(0xff)?JSON[_0x27e701(0x151)](_0x2fffc):_0x2fffc)['catch'](()=>({}));if(_0x270037[this[_0x27e701(0x136)]['repositoryGit']]){if(_0x270037[this['gitCommit'][_0x27e701(0x144)]][_0x27e701(0xfd)]===_0x12eb18)return!![];}return![];}return![];}async[a66_0x38a1f4(0x13b)](_0x5d292e){const _0x415581=a66_0x38a1f4;this['syncRecord']&&await this['salesforceSync'][_0x415581(0x13b)](this[_0x415581(0x124)],_0x5d292e);}async['proceedFile'](_0x3d8399,_0x2827ed,_0x1be6f2){const _0x3c028e=a66_0x38a1f4,_0x273352=this[_0x3c028e(0x104)][_0x3c028e(0x111)](_0xb8a080=>git_commit_utils_1[_0x3c028e(0x14a)](_0xb8a080['fileName'],_0x3d8399)),_0x428362=[],_0x21246f=[],_0x56da8e=[],_0x15fe76=new parser_1[(_0x3c028e(0x123))](_0x2827ed,[_0x3d8399],_0x1be6f2),_0x2ee96e=await _0x15fe76['parse'](),_0x2ade1d=_0x2ee96e[_0x3c028e(0x148)](_0x5bc4da=>{const _0x4bda49=_0x3c028e,_0x10a635=_0x273352[_0x4bda49(0x14b)](_0x5d2e1e=>_0x5d2e1e['name']===_0x5bc4da[_0x4bda49(0x153)]&&_0x5d2e1e[_0x4bda49(0x129)]===_0x5bc4da[_0x4bda49(0x129)]);if(!_0x10a635){const _0x4f633a={'crc32':_0x5bc4da[_0x4bda49(0x12e)],'fileName':_0x5bc4da[_0x4bda49(0x152)],'id':null,'version':0x1,'name':_0x5bc4da[_0x4bda49(0x153)],'type':_0x5bc4da[_0x4bda49(0x129)]};return this[_0x4bda49(0x104)][_0x4bda49(0x125)](_0x4f633a),_0x273352[_0x4bda49(0x125)](_0x4f633a),_0x56da8e['push'](_0x4f633a),_0x21246f[_0x4bda49(0x125)](_0x5bc4da),null;}_0x56da8e['push'](_0x10a635);if(_0x5bc4da[_0x4bda49(0x12e)]===_0x10a635[_0x4bda49(0x113)])return null;return{'component':_0x5bc4da,'meta':_0x10a635};})['filter'](_0x1b093=>!!_0x1b093);_0x428362[_0x3c028e(0x125)](..._0x2ade1d);const _0x51d664=_0x273352[_0x3c028e(0x111)](_0x50c136=>!_0x56da8e['includes'](_0x50c136));return this['componentsMetadata']=this[_0x3c028e(0x104)][_0x3c028e(0x111)](_0x2bc9f4=>!_0x51d664[_0x3c028e(0x12c)](_0x2bc9f4)),{'inserted':_0x21246f,'modified':_0x428362,'removed':_0x51d664[_0x3c028e(0x148)](({id:_0x11721b,name:_0x16c8e1,type:_0xcf4a80})=>({'id':_0x11721b,'name':_0x16c8e1,'type':_0xcf4a80}))};}async['fetchRepositoryOrBranchData'](){const _0x31bb1e=a66_0x38a1f4;this[_0x31bb1e(0x124)]=this['gitCommit'][_0x31bb1e(0x13a)]===_0x31bb1e(0x122)?await this[_0x31bb1e(0x126)][_0x31bb1e(0x116)](this['gitCommit'][_0x31bb1e(0x10d)]):await this['salesforceSync'][_0x31bb1e(0x139)](this[_0x31bb1e(0x136)][_0x31bb1e(0x13a)]),this[_0x31bb1e(0x117)]=await this[_0x31bb1e(0x121)]['getComponentRecordTypes']();}async[a66_0x38a1f4(0x14f)](_0x1b3ae6){const _0x23d489=a66_0x38a1f4,_0x4d3cdc=[...this['gitCommit']['fileNames']];if(this[_0x23d489(0x136)][_0x23d489(0x137)]||_0x1b3ae6){this[_0x23d489(0x104)]=this[_0x23d489(0x135)]?await this[_0x23d489(0x121)]['fetchBranchComponents'](this[_0x23d489(0x135)]):await this[_0x23d489(0x121)][_0x23d489(0x102)](this['repositoryId']);return;}this[_0x23d489(0x104)]=[];while(_0x4d3cdc['length']){const _0x4b4ecf=_0x4d3cdc[_0x23d489(0x10a)](0x0,this[_0x23d489(0x132)]),_0xa7b0bb=this[_0x23d489(0x135)]?await this['salesforceGitSync'][_0x23d489(0x14d)](_0x4b4ecf,this[_0x23d489(0x135)]):await this['salesforceGitSync'][_0x23d489(0x12d)](_0x4b4ecf,this['repositoryId']);this[_0x23d489(0x104)][_0x23d489(0x125)](..._0xa7b0bb);}}async[a66_0x38a1f4(0xfe)](_0x35df8b){const _0x2be382=a66_0x38a1f4;this['branchId']?await this['salesforceRest']['patch'](constants_1[_0x2be382(0x147)],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x2be382(0x11d)]:_0x35df8b,[constants_1[_0x2be382(0x109)]+_0x2be382(0x133)]:Date['now']()}):await this[_0x2be382(0x12a)]['patch'](constants_1[_0x2be382(0x114)],this[_0x2be382(0x13d)],{[constants_1[_0x2be382(0x10e)]+_0x2be382(0x11d)]:_0x35df8b});}['setCommitDto'](_0x49684b){const _0x48ff38=a66_0x38a1f4;this[_0x48ff38(0x136)]=_0x49684b;}[a66_0x38a1f4(0x140)](){const _0x45c402=a66_0x38a1f4;return this[_0x45c402(0x117)];}[a66_0x38a1f4(0x11c)](){const _0x2af7b5=a66_0x38a1f4;return this[_0x2af7b5(0x13d)];}[a66_0x38a1f4(0x103)](){const _0x70ca93=a66_0x38a1f4;return this[_0x70ca93(0x135)];}};GitCommitService=__decorate([typedi_1[a66_0x38a1f4(0x128)]({'transient':!![]}),__metadata(a66_0x38a1f4(0x118),[salesforce_git_sync_service_1[a66_0x38a1f4(0x13c)],salesforce_rest_service_1[a66_0x38a1f4(0x143)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a66_0x38a1f4(0x149)]])],GitCommitService),exports['GitCommitService']=GitCommitService;