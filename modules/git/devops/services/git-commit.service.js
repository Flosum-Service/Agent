const a131_0x15e6a0=a131_0x3594;(function(_0x5e39c7,_0x4671d3){const _0x216b17=a131_0x3594,_0x5be07d=_0x5e39c7();while(!![]){try{const _0xac1e89=-parseInt(_0x216b17(0x1e2))/0x1+parseInt(_0x216b17(0x1f3))/0x2*(-parseInt(_0x216b17(0x1d9))/0x3)+parseInt(_0x216b17(0x1e4))/0x4*(-parseInt(_0x216b17(0x1e7))/0x5)+parseInt(_0x216b17(0x1bb))/0x6*(-parseInt(_0x216b17(0x1af))/0x7)+-parseInt(_0x216b17(0x208))/0x8+-parseInt(_0x216b17(0x1f8))/0x9+parseInt(_0x216b17(0x1e3))/0xa*(parseInt(_0x216b17(0x20d))/0xb);if(_0xac1e89===_0x4671d3)break;else _0x5be07d['push'](_0x5be07d['shift']());}catch(_0x48c61e){_0x5be07d['push'](_0x5be07d['shift']());}}}(a131_0x81e3,0x5ad40));const a131_0x1aeaa7=(function(){let _0x520db0=!![];return function(_0x4935a3,_0x1f4e08){const _0x27305d=_0x520db0?function(){const _0x14d3df=a131_0x3594;if(_0x1f4e08){const _0x20a14c=_0x1f4e08[_0x14d3df(0x1c5)](_0x4935a3,arguments);return _0x1f4e08=null,_0x20a14c;}}:function(){};return _0x520db0=![],_0x27305d;};}()),a131_0x102a7e=a131_0x1aeaa7(this,function(){const _0x365972=a131_0x3594;return a131_0x102a7e['toString']()[_0x365972(0x203)](_0x365972(0x20c))['toString']()[_0x365972(0x1d4)](a131_0x102a7e)[_0x365972(0x203)]('(((.+)+)+)+$');});a131_0x102a7e();function a131_0x81e3(){const _0x5a26da=['create','SalesforceRestService','design:paramtypes','crc32','updateStatus','lastCommit','metadata','170718ciEIEE','SalesforceService','name','../utils/components.utils','getBranchRecordByName','SalesforceSyncService','PathUtils','SalesforceGitSyncService','force','updateRemoteState','apply','gitCommit','splice','fetchRepositoryOrBranchData','catch','defineProperty','../../salesforce/services/salesforce-rest.service','push','getRecordTypes','recordType','decorate','getOwnPropertyDescriptor','indexOf','syncRecord','now','constructor','type','../../salesforce/services/salesforce-sync.service','length','getComponentRecordTypes','24144Qdkupg','patch','fetchComponentsMetadata','../utils/path.utils','Synchronization_Status__c','../../parsers/factory.parser','recordTypes','__esModule','string','514455ZjkNqn','1630KsJcJw','30724iWswfS','createCommit','repositoryGit','455uVZJgM','repositoryId','FLOSUM_REPOSITORY','__metadata','salesforceSync','getRepositoryId','branchId','branch','map','fetchRepositoryComponents','crc','parse','122NQPbdN','master','__decorate','FLOSUM_GIT_NAMESPACE','filterMetadataComponents','3706758ivmUCM','getRepositoryRecordByName','FLOSUM_BRANCH','fileNames','typedi','object','FactoryParser','ComponentsUtils','execute','fetchBranchComponents','readComponentPaths','search','getRemoteStateAttachmentId','checkSyncStatus','fetchBranchComponentsByFilenames','retrieveAttachment','2837776pvAicL','Service','FLOSUM_NAMESPACE','salesforceRest','(((.+)+)+)+$','207218DSnpuG','../../salesforce/services/salesforce-git-sync.service','getBranchId','recordTypeName','../../salesforce/services/salesforce.service','repository','56CGnDGW','salesforce','TASKS_PER_TICK','salesforceGitSync','componentsMetadata'];a131_0x81e3=function(){return _0x5a26da;};return a131_0x81e3();}'use strict';var __decorate=this&&this[a131_0x15e6a0(0x1f5)]||function(_0x54c1ec,_0x29e272,_0xd88708,_0x139df4){const _0x3ab2eb=a131_0x15e6a0;var _0x49a03e=arguments['length'],_0x5efa28=_0x49a03e<0x3?_0x29e272:_0x139df4===null?_0x139df4=Object[_0x3ab2eb(0x1d0)](_0x29e272,_0xd88708):_0x139df4,_0x5c2e4f;if(typeof Reflect===_0x3ab2eb(0x1fd)&&typeof Reflect['decorate']==='function')_0x5efa28=Reflect[_0x3ab2eb(0x1cf)](_0x54c1ec,_0x29e272,_0xd88708,_0x139df4);else{for(var _0x5a4ff9=_0x54c1ec[_0x3ab2eb(0x1d7)]-0x1;_0x5a4ff9>=0x0;_0x5a4ff9--)if(_0x5c2e4f=_0x54c1ec[_0x5a4ff9])_0x5efa28=(_0x49a03e<0x3?_0x5c2e4f(_0x5efa28):_0x49a03e>0x3?_0x5c2e4f(_0x29e272,_0xd88708,_0x5efa28):_0x5c2e4f(_0x29e272,_0xd88708))||_0x5efa28;}return _0x49a03e>0x3&&_0x5efa28&&Object[_0x3ab2eb(0x1ca)](_0x29e272,_0xd88708,_0x5efa28),_0x5efa28;},__metadata=this&&this[a131_0x15e6a0(0x1ea)]||function(_0x1d919b,_0x5a4c96){const _0x645843=a131_0x15e6a0;if(typeof Reflect===_0x645843(0x1fd)&&typeof Reflect[_0x645843(0x1ba)]==='function')return Reflect['metadata'](_0x1d919b,_0x5a4c96);};Object[a131_0x15e6a0(0x1ca)](exports,a131_0x15e6a0(0x1e0),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a131_0x15e6a0(0x20e)),salesforce_rest_service_1=require(a131_0x15e6a0(0x1cb)),typedi_1=require(a131_0x15e6a0(0x1fc)),salesforce_sync_service_1=require(a131_0x15e6a0(0x1d6)),salesforce_service_1=require(a131_0x15e6a0(0x1ad)),factory_parser_1=require(a131_0x15e6a0(0x1de)),path_utils_1=require(a131_0x15e6a0(0x1dc)),components_utils_1=require(a131_0x15e6a0(0x1be));function a131_0x3594(_0x49ae44,_0x3977ca){const _0x2e973a=a131_0x81e3();return a131_0x3594=function(_0x102a7e,_0x1aeaa7){_0x102a7e=_0x102a7e-0x1ad;let _0x81e318=_0x2e973a[_0x102a7e];return _0x81e318;},a131_0x3594(_0x49ae44,_0x3977ca);}let GitCommitService=class GitCommitService{constructor(_0x205b1c,_0x4e2ae7,_0x2b1893,_0x468361){const _0x2dcefb=a131_0x15e6a0;this['salesforceGitSync']=_0x205b1c,this[_0x2dcefb(0x20b)]=_0x4e2ae7,this[_0x2dcefb(0x1eb)]=_0x2b1893,this[_0x2dcefb(0x1b0)]=_0x468361,this[_0x2dcefb(0x1b1)]=0xc8;}get['repositoryId'](){const _0x451c18=a131_0x15e6a0;var _0x7f6275;return((_0x7f6275=this[_0x451c18(0x1d2)])===null||_0x7f6275===void 0x0?void 0x0:_0x7f6275[_0x451c18(0x1e8)])||'';}get['branchId'](){var _0x3c7675;return((_0x3c7675=this['syncRecord'])===null||_0x3c7675===void 0x0?void 0x0:_0x3c7675['branchId'])||'';}get[a131_0x15e6a0(0x1ce)](){const _0x59cb3a=a131_0x15e6a0;return this[_0x59cb3a(0x1d2)][_0x59cb3a(0x210)];}async[a131_0x15e6a0(0x1e5)](_0xccee2a){const _0x1e6234=a131_0x15e6a0;return this[_0x1e6234(0x1b2)][_0x1e6234(0x1e5)](_0xccee2a,this[_0x1e6234(0x1e8)]);}async[a131_0x15e6a0(0x205)](_0x509ff6){const _0x3a79ba=a131_0x15e6a0;if(this['syncRecord']){const _0x1164b0=await this[_0x3a79ba(0x1eb)][_0x3a79ba(0x204)](this['syncRecord']),_0x31adf7=await this[_0x3a79ba(0x1b0)][_0x3a79ba(0x207)](_0x1164b0)['then'](_0x5e5221=>typeof _0x5e5221===_0x3a79ba(0x1e1)?JSON[_0x3a79ba(0x1f2)](_0x5e5221):_0x5e5221)[_0x3a79ba(0x1c9)](()=>({}));if(_0x31adf7[this[_0x3a79ba(0x1c6)][_0x3a79ba(0x1e6)]]){if(_0x31adf7[this['gitCommit'][_0x3a79ba(0x1e6)]][_0x3a79ba(0x1b9)]===_0x509ff6)return!![];}return![];}return![];}async[a131_0x15e6a0(0x1c4)](_0x289507){const _0x2d7f07=a131_0x15e6a0;this[_0x2d7f07(0x1d2)]&&await this[_0x2d7f07(0x1eb)][_0x2d7f07(0x1c4)](this['syncRecord'],_0x289507);}['getUnusedComponentsFilePaths'](){const _0x37159f=a131_0x15e6a0;return this[_0x37159f(0x1b3)][_0x37159f(0x1ef)](({fileName:_0x43b273})=>_0x43b273);}async['proceedFile'](_0x3e8375,_0xe9a889,_0x27463f){const _0x15c9c3=a131_0x15e6a0,_0x13e8c1=await path_utils_1[_0x15c9c3(0x1c1)][_0x15c9c3(0x202)](this[_0x15c9c3(0x1d2)]['recordTypeName'],_0x3e8375,_0xe9a889,_0x27463f),_0x28fbdb=components_utils_1[_0x15c9c3(0x1ff)][_0x15c9c3(0x1f7)](this[_0x15c9c3(0x1b3)],_0x3e8375,_0x27463f,this[_0x15c9c3(0x1d2)][_0x15c9c3(0x210)]),_0xbbc395=factory_parser_1[_0x15c9c3(0x1fe)][_0x15c9c3(0x1b4)]({'recordType':this[_0x15c9c3(0x1d2)][_0x15c9c3(0x210)],'sourceDir':_0xe9a889,'paths':_0x13e8c1}),_0x541f02=await _0xbbc395[_0x15c9c3(0x200)](),_0x5c2a70=[],_0x419c0b=[];for(const _0x39099b of _0x541f02){const _0x350060=_0x28fbdb['find'](_0x6fa0d2=>_0x6fa0d2['name']===_0x39099b[_0x15c9c3(0x1bd)]&&_0x6fa0d2[_0x15c9c3(0x1d5)]===_0x39099b[_0x15c9c3(0x1d5)]);if(!_0x350060){_0x5c2a70[_0x15c9c3(0x1cc)](_0x39099b);continue;}_0x39099b[_0x15c9c3(0x1f1)]!==_0x350060[_0x15c9c3(0x1b7)]&&_0x419c0b[_0x15c9c3(0x1cc)]({'meta':_0x350060,'component':_0x39099b}),_0x28fbdb[_0x15c9c3(0x1c7)](_0x28fbdb[_0x15c9c3(0x1d1)](_0x350060),0x1);}return{'inserted':_0x5c2a70,'modified':_0x419c0b,'removed':_0x28fbdb};}async[a131_0x15e6a0(0x1c8)](){const _0x5429bf=a131_0x15e6a0;this[_0x5429bf(0x1d2)]=this[_0x5429bf(0x1c6)][_0x5429bf(0x1ee)]===_0x5429bf(0x1f4)?await this[_0x5429bf(0x1eb)][_0x5429bf(0x1f9)](this[_0x5429bf(0x1c6)][_0x5429bf(0x1ae)]):await this['salesforceSync'][_0x5429bf(0x1bf)](this[_0x5429bf(0x1c6)]['branch']),this[_0x5429bf(0x1df)]=await this[_0x5429bf(0x1b2)][_0x5429bf(0x1d8)]();}async[a131_0x15e6a0(0x1db)](_0x30f027){const _0x3b3983=a131_0x15e6a0;if(this[_0x3b3983(0x1c6)][_0x3b3983(0x1c3)]||_0x30f027){this['componentsMetadata']=this['branchId']?await this[_0x3b3983(0x1b2)][_0x3b3983(0x201)](this[_0x3b3983(0x1ed)]):await this[_0x3b3983(0x1b2)][_0x3b3983(0x1f0)](this[_0x3b3983(0x1e8)]);return;}const _0x5ec6d6=components_utils_1['ComponentsUtils']['prepareComponentNamesForFetchMetadata'](this[_0x3b3983(0x1c6)][_0x3b3983(0x1fb)],this[_0x3b3983(0x1d2)]['recordTypeName']);this[_0x3b3983(0x1b3)]=[];while(_0x5ec6d6[_0x3b3983(0x1d7)]){const _0x5bab86=_0x5ec6d6[_0x3b3983(0x1c7)](0x0,this['TASKS_PER_TICK']),_0x8ff4df=this[_0x3b3983(0x1ed)]?await this[_0x3b3983(0x1b2)][_0x3b3983(0x206)](_0x5bab86,this['branchId']):await this[_0x3b3983(0x1b2)]['fetchRepositoryComponentsByFilenames'](_0x5bab86,this[_0x3b3983(0x1e8)]);this['componentsMetadata'][_0x3b3983(0x1cc)](..._0x8ff4df);}}async[a131_0x15e6a0(0x1b8)](_0x2bc424){const _0x2d0f55=a131_0x15e6a0;this[_0x2d0f55(0x1ed)]?await this['salesforceRest'][_0x2d0f55(0x1da)](constants_1[_0x2d0f55(0x1fa)],this[_0x2d0f55(0x1ed)],{[constants_1[_0x2d0f55(0x1f6)]+_0x2d0f55(0x1dd)]:_0x2bc424,[constants_1[_0x2d0f55(0x20a)]+'Last_Updated_On__c']:Date[_0x2d0f55(0x1d3)]()}):await this[_0x2d0f55(0x20b)][_0x2d0f55(0x1da)](constants_1[_0x2d0f55(0x1e9)],this[_0x2d0f55(0x1e8)],{[constants_1[_0x2d0f55(0x1f6)]+_0x2d0f55(0x1dd)]:_0x2bc424});}['setCommitDto'](_0x1146d6){const _0x460687=a131_0x15e6a0;this[_0x460687(0x1c6)]=_0x1146d6;}[a131_0x15e6a0(0x1cd)](){return this['recordTypes'];}[a131_0x15e6a0(0x1ec)](){const _0x40b18d=a131_0x15e6a0;return this[_0x40b18d(0x1e8)];}[a131_0x15e6a0(0x20f)](){return this['branchId'];}};GitCommitService=__decorate([(0x0,typedi_1[a131_0x15e6a0(0x209)])({'transient':!![]}),__metadata(a131_0x15e6a0(0x1b6),[salesforce_git_sync_service_1[a131_0x15e6a0(0x1c2)],salesforce_rest_service_1[a131_0x15e6a0(0x1b5)],salesforce_sync_service_1[a131_0x15e6a0(0x1c0)],salesforce_service_1[a131_0x15e6a0(0x1bc)]])],GitCommitService),exports['GitCommitService']=GitCommitService;