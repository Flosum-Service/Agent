const a78_0x8353ea=a78_0x428e;function a78_0x428e(_0x1b16a5,_0x46687d){const _0x3ebca0=a78_0x2ea0();return a78_0x428e=function(_0x213fa8,_0xb60afa){_0x213fa8=_0x213fa8-0xcd;let _0x2ea090=_0x3ebca0[_0x213fa8];return _0x2ea090;},a78_0x428e(_0x1b16a5,_0x46687d);}(function(_0x5499cf,_0x11705f){const _0x464714=a78_0x428e,_0x331338=_0x5499cf();while(!![]){try{const _0x595157=parseInt(_0x464714(0xf5))/0x1*(-parseInt(_0x464714(0x125))/0x2)+parseInt(_0x464714(0xe6))/0x3*(parseInt(_0x464714(0xee))/0x4)+-parseInt(_0x464714(0x112))/0x5*(-parseInt(_0x464714(0x127))/0x6)+-parseInt(_0x464714(0xd8))/0x7+parseInt(_0x464714(0x11e))/0x8+parseInt(_0x464714(0x117))/0x9*(-parseInt(_0x464714(0xd0))/0xa)+parseInt(_0x464714(0xdd))/0xb*(parseInt(_0x464714(0xda))/0xc);if(_0x595157===_0x11705f)break;else _0x331338['push'](_0x331338['shift']());}catch(_0x3e2250){_0x331338['push'](_0x331338['shift']());}}}(a78_0x2ea0,0x210e6));const a78_0xb60afa=(function(){let _0x8e4d51=!![];return function(_0x3fdb0e,_0x41789f){const _0x4977f1=_0x8e4d51?function(){const _0x25db05=a78_0x428e;if(_0x41789f){const _0x2fb325=_0x41789f[_0x25db05(0xef)](_0x3fdb0e,arguments);return _0x41789f=null,_0x2fb325;}}:function(){};return _0x8e4d51=![],_0x4977f1;};}()),a78_0x213fa8=a78_0xb60afa(this,function(){const _0x33a375=a78_0x428e;return a78_0x213fa8['toString']()[_0x33a375(0xdc)]('(((.+)+)+)+$')[_0x33a375(0x108)]()[_0x33a375(0xf7)](a78_0x213fa8)[_0x33a375(0xdc)](_0x33a375(0xde));});a78_0x213fa8();'use strict';var __decorate=this&&this['__decorate']||function(_0x511b65,_0x4d99f0,_0x1853c0,_0x463048){const _0x181a00=a78_0x428e;var _0x4596f2=arguments['length'],_0x177bd5=_0x4596f2<0x3?_0x4d99f0:_0x463048===null?_0x463048=Object[_0x181a00(0xe8)](_0x4d99f0,_0x1853c0):_0x463048,_0x46cccd;if(typeof Reflect==='object'&&typeof Reflect[_0x181a00(0x102)]===_0x181a00(0xd5))_0x177bd5=Reflect[_0x181a00(0x102)](_0x511b65,_0x4d99f0,_0x1853c0,_0x463048);else{for(var _0x26bfd0=_0x511b65[_0x181a00(0x106)]-0x1;_0x26bfd0>=0x0;_0x26bfd0--)if(_0x46cccd=_0x511b65[_0x26bfd0])_0x177bd5=(_0x4596f2<0x3?_0x46cccd(_0x177bd5):_0x4596f2>0x3?_0x46cccd(_0x4d99f0,_0x1853c0,_0x177bd5):_0x46cccd(_0x4d99f0,_0x1853c0))||_0x177bd5;}return _0x4596f2>0x3&&_0x177bd5&&Object[_0x181a00(0xff)](_0x4d99f0,_0x1853c0,_0x177bd5),_0x177bd5;},__metadata=this&&this[a78_0x8353ea(0xcd)]||function(_0x10dd9d,_0x9596b9){const _0x49913a=a78_0x8353ea;if(typeof Reflect==='object'&&typeof Reflect[_0x49913a(0x118)]===_0x49913a(0xd5))return Reflect[_0x49913a(0x118)](_0x10dd9d,_0x9596b9);};Object[a78_0x8353ea(0xff)](exports,a78_0x8353ea(0x10e),{'value':!![]}),exports[a78_0x8353ea(0xd4)]=void 0x0;function a78_0x2ea0(){const _0x30c1d8=['fetchRepositoryComponentsByFilenames','SalesforceSyncService','decorate','getUnusedComponentsFilePaths','salesforceSync','parse','length','FLOSUM_GIT_NAMESPACE','toString','FLOSUM_BRANCH','branch','crc','TASKS_PER_TICK','fetchRepositoryOrBranchData','__esModule','salesforceGitSync','fetchComponentsMetadata','getRecordTypes','95zpquXw','indexOf','../../salesforce/services/salesforce-rest.service','../../salesforce/services/salesforce-sync.service','../../salesforce/services/salesforce.service','1503BPHnPf','metadata','../../../../constants','SalesforceGitSyncService','Synchronization_Status__c','../../salesforce/services/salesforce-git-sync.service','push','203136SnhPUp','([./-]{1}|$)','recordTypes','name','updateRemoteState','repositoryId','fileName','2iSWhbf','getComponentRecordTypes','30906olbfIO','find','match','replace','__metadata','repositoryGit','FLOSUM_REPOSITORY','10550kbPjit','fetchRepositoryComponents','salesforceRest','Service','GitCommitService','function','filterParserPaths','getBranchRecordByName','172172HrwPNt','typedi','49224VfHVsX','componentsMetadata','search','11UzljeA','(((.+)+)+)+$','branchId','salesforce','now','splice','SalesforceRestService','META_XML_EXTENSION','gitCommit','1911mNHTjR','crc32','getOwnPropertyDescriptor','type','createCommit','proceedFile','syncRecord','checkSyncStatus','1356fMqrCE','apply','repository','patch','filter','then','map','7127FDQLiV','fetchBranchComponents','constructor','Last_Updated_On__c','catch','SalesforceService','MDApiParserV2','updateStatus','FLOSUM_NAMESPACE','retrieveAttachment','defineProperty'];a78_0x2ea0=function(){return _0x30c1d8;};return a78_0x2ea0();}const constants_1=require(a78_0x8353ea(0x119)),salesforce_git_sync_service_1=require(a78_0x8353ea(0x11c)),salesforce_rest_service_1=require(a78_0x8353ea(0x114)),typedi_1=require(a78_0x8353ea(0xd9)),salesforce_sync_service_1=require(a78_0x8353ea(0x115)),salesforce_service_1=require(a78_0x8353ea(0x116)),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require('../../parsers/utils');let GitCommitService=class GitCommitService{constructor(_0x571aee,_0x4606a8,_0x19fc7a,_0x1148a0){const _0xd37410=a78_0x8353ea;this[_0xd37410(0x10f)]=_0x571aee,this[_0xd37410(0xd2)]=_0x4606a8,this[_0xd37410(0x104)]=_0x19fc7a,this[_0xd37410(0xe0)]=_0x1148a0,this[_0xd37410(0x10c)]=0xc8;}get['repositoryId'](){const _0x8cca6b=a78_0x8353ea;var _0x558424;return((_0x558424=this[_0x8cca6b(0xec)])===null||_0x558424===void 0x0?void 0x0:_0x558424['repositoryId'])||'';}get['branchId'](){var _0xd52dbe;return((_0xd52dbe=this['syncRecord'])===null||_0xd52dbe===void 0x0?void 0x0:_0xd52dbe['branchId'])||'';}async[a78_0x8353ea(0xea)](_0x79b951){const _0xe99d3b=a78_0x8353ea;return this[_0xe99d3b(0x10f)]['createCommit'](_0x79b951,this[_0xe99d3b(0x123)]);}async[a78_0x8353ea(0xed)](_0xe6c940){const _0x453a3b=a78_0x8353ea;if(this[_0x453a3b(0xec)]){const _0x3f517d=await this[_0x453a3b(0x104)]['getRemoteStateAttachmentId'](this[_0x453a3b(0xec)]),_0x531f1f=await this[_0x453a3b(0xe0)][_0x453a3b(0xfe)](_0x3f517d)[_0x453a3b(0xf3)](_0x50d9d9=>typeof _0x50d9d9==='string'?JSON[_0x453a3b(0x105)](_0x50d9d9):_0x50d9d9)[_0x453a3b(0xf9)](()=>({}));if(_0x531f1f[this[_0x453a3b(0xe5)][_0x453a3b(0xce)]]){if(_0x531f1f[this['gitCommit'][_0x453a3b(0xce)]]['lastCommit']===_0xe6c940)return!![];}return![];}return![];}async[a78_0x8353ea(0x122)](_0x1eca85){const _0x2a7bf5=a78_0x8353ea;this[_0x2a7bf5(0xec)]&&await this[_0x2a7bf5(0x104)][_0x2a7bf5(0x122)](this['syncRecord'],_0x1eca85);}[a78_0x8353ea(0x103)](){const _0x43c50d=a78_0x8353ea;return this[_0x43c50d(0xdb)][_0x43c50d(0xf4)](({fileName:_0x3d5fdc})=>_0x3d5fdc);}async[a78_0x8353ea(0xeb)](_0x1f3f19,_0x36211c,_0x5392f8){const _0xf14618=a78_0x8353ea,_0x2bd482=new RegExp('^'+_0x1f3f19+_0xf14618(0x11f));let _0x50b94f=[_0x1f3f19];_0x5392f8&&(_0x50b94f=(0x0,utils_1[_0xf14618(0xd6)])(await(0x0,utils_1['readFilesByFilename'])(_0x1f3f19,_0x36211c)[_0xf14618(0xf9)](()=>[])));const _0x5ae7cf=_0x5392f8?this[_0xf14618(0xdb)][_0xf14618(0xf2)](_0x4ef8cc=>_0x4ef8cc[_0xf14618(0x124)][_0xf14618(0x129)](_0x2bd482)):this[_0xf14618(0xdb)][_0xf14618(0xf2)](_0x3facb8=>_0x3facb8[_0xf14618(0x124)]===_0x1f3f19||_0x3facb8[_0xf14618(0x124)]===_0x1f3f19[_0xf14618(0x12a)](constants_1['META_XML_EXTENSION'],'')),_0x161043=new parser_v2_1[(_0xf14618(0xfb))](_0x36211c,_0x50b94f),_0x303404=await _0x161043['parse'](),_0xd45734=[],_0x1fe6d6=[];for(const _0x12c0f8 of _0x303404){const _0x3f21ac=_0x5ae7cf[_0xf14618(0x128)](_0x3fa0b9=>_0x3fa0b9['name']===_0x12c0f8[_0xf14618(0x121)]&&_0x3fa0b9[_0xf14618(0xe9)]===_0x12c0f8['type']);if(!_0x3f21ac){_0xd45734[_0xf14618(0x11d)](_0x12c0f8);continue;}_0x12c0f8[_0xf14618(0x10b)]!==_0x3f21ac[_0xf14618(0xe7)]&&_0x1fe6d6[_0xf14618(0x11d)]({'meta':_0x3f21ac,'component':_0x12c0f8}),_0x5ae7cf[_0xf14618(0xe2)](_0x5ae7cf[_0xf14618(0x113)](_0x3f21ac),0x1);}return{'inserted':_0xd45734,'modified':_0x1fe6d6,'removed':_0x5ae7cf};}async[a78_0x8353ea(0x10d)](){const _0x4423e3=a78_0x8353ea;this['syncRecord']=this[_0x4423e3(0xe5)][_0x4423e3(0x10a)]==='master'?await this[_0x4423e3(0x104)]['getRepositoryRecordByName'](this[_0x4423e3(0xe5)][_0x4423e3(0xf0)]):await this[_0x4423e3(0x104)][_0x4423e3(0xd7)](this[_0x4423e3(0xe5)][_0x4423e3(0x10a)]),this['recordTypes']=await this[_0x4423e3(0x10f)][_0x4423e3(0x126)]();}async[a78_0x8353ea(0x110)](_0x2c0a28){const _0x500b22=a78_0x8353ea;if(this[_0x500b22(0xe5)]['force']||_0x2c0a28){this[_0x500b22(0xdb)]=this[_0x500b22(0xdf)]?await this[_0x500b22(0x10f)][_0x500b22(0xf6)](this[_0x500b22(0xdf)]):await this[_0x500b22(0x10f)][_0x500b22(0xd1)](this[_0x500b22(0x123)]);return;}const _0x5a1c64=[...new Set(this[_0x500b22(0xe5)]['fileNames'][_0x500b22(0xf4)](_0x23989e=>_0x23989e[_0x500b22(0x12a)](constants_1[_0x500b22(0xe4)],'')))];this[_0x500b22(0xdb)]=[];while(_0x5a1c64[_0x500b22(0x106)]){const _0x410459=_0x5a1c64[_0x500b22(0xe2)](0x0,this[_0x500b22(0x10c)]),_0x54167a=this['branchId']?await this[_0x500b22(0x10f)]['fetchBranchComponentsByFilenames'](_0x410459,this[_0x500b22(0xdf)]):await this['salesforceGitSync'][_0x500b22(0x100)](_0x410459,this[_0x500b22(0x123)]);this[_0x500b22(0xdb)][_0x500b22(0x11d)](..._0x54167a);}}async[a78_0x8353ea(0xfc)](_0x1ea123){const _0x260e34=a78_0x8353ea;this[_0x260e34(0xdf)]?await this[_0x260e34(0xd2)]['patch'](constants_1[_0x260e34(0x109)],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x260e34(0x11b)]:_0x1ea123,[constants_1[_0x260e34(0xfd)]+_0x260e34(0xf8)]:Date[_0x260e34(0xe1)]()}):await this[_0x260e34(0xd2)][_0x260e34(0xf1)](constants_1[_0x260e34(0xcf)],this['repositoryId'],{[constants_1[_0x260e34(0x107)]+_0x260e34(0x11b)]:_0x1ea123});}['setCommitDto'](_0x216c71){const _0x37b25e=a78_0x8353ea;this[_0x37b25e(0xe5)]=_0x216c71;}[a78_0x8353ea(0x111)](){const _0x1730fa=a78_0x8353ea;return this[_0x1730fa(0x120)];}['getRepositoryId'](){const _0x2275fe=a78_0x8353ea;return this[_0x2275fe(0x123)];}['getBranchId'](){const _0x4f3dc1=a78_0x8353ea;return this[_0x4f3dc1(0xdf)];}};GitCommitService=__decorate([(0x0,typedi_1[a78_0x8353ea(0xd3)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a78_0x8353ea(0x11a)],salesforce_rest_service_1[a78_0x8353ea(0xe3)],salesforce_sync_service_1[a78_0x8353ea(0x101)],salesforce_service_1[a78_0x8353ea(0xfa)]])],GitCommitService),exports[a78_0x8353ea(0xd4)]=GitCommitService;