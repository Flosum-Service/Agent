const a79_0x103a1f=a79_0x281d;(function(_0x4b534a,_0x78f1ac){const _0x4b8ef1=a79_0x281d,_0xba23c3=_0x4b534a();while(!![]){try{const _0x3dc7df=-parseInt(_0x4b8ef1(0xde))/0x1*(parseInt(_0x4b8ef1(0x80))/0x2)+parseInt(_0x4b8ef1(0xa8))/0x3*(-parseInt(_0x4b8ef1(0xcf))/0x4)+-parseInt(_0x4b8ef1(0x91))/0x5+-parseInt(_0x4b8ef1(0x88))/0x6+-parseInt(_0x4b8ef1(0xcb))/0x7*(-parseInt(_0x4b8ef1(0xc8))/0x8)+parseInt(_0x4b8ef1(0xb1))/0x9+parseInt(_0x4b8ef1(0xbe))/0xa;if(_0x3dc7df===_0x78f1ac)break;else _0xba23c3['push'](_0xba23c3['shift']());}catch(_0x416115){_0xba23c3['push'](_0xba23c3['shift']());}}}(a79_0x20c5,0xb59d9));function a79_0x20c5(){const _0x98f8b9=['../../salesforce/services/salesforce-rest.service','fetchRepositoryOrBranchData','7747146ShjQre','FLOSUM_GIT_NAMESPACE','type','getComponentRecordTypes','../../salesforce/services/salesforce-sync.service','repository','getRecordTypes','GitCommitService','indexOf','7208820VHxXZz','META_XML_EXTENSION','now','([./-]{1}|$)','getRemoteStateAttachmentId','Service','branch','repositoryId','../../parsers/utils','match','patch','FLOSUM_BRANCH','getRepositoryRecordByName','then','../../parsers/mdapi/parser-v2','checkSyncStatus','SalesforceSyncService','name','updateRemoteState','salesforceSync','fileNames','fileName','find','91446cPMApc','__decorate','SalesforceRestService','getOwnPropertyDescriptor','readFilesByFilename','proceedFile','MDApiParserV2','componentsMetadata','string','392400RmTNzw','object','fetchBranchComponentsByFilenames','fetchComponentsMetadata','recordTypes','splice','toString','filterParserPaths','Synchronization_Status__c','metadata','map','setCommitDto','defineProperty','38048850jZyRsg','repositoryGit','crc','fetchRepositoryComponentsByFilenames','search','salesforceRest','Last_Updated_On__c','constructor','typedi','function','8zfNIPi','SalesforceGitSyncService','filter','5104379hVENct','SalesforceService','decorate','createCommit','16PHGoPz','updateStatus','../../../../constants','../../salesforce/services/salesforce-git-sync.service','FLOSUM_REPOSITORY','apply','getUnusedComponentsFilePaths','__metadata','fetchRepositoryComponents','design:paramtypes','getBranchId','force','gitCommit','branchId','crc32','978902fJZzIy','push','salesforceGitSync','TASKS_PER_TICK','fetchBranchComponents','length','(((.+)+)+)+$','master','2KkwPcR','syncRecord','salesforce','replace','__esModule','retrieveAttachment'];a79_0x20c5=function(){return _0x98f8b9;};return a79_0x20c5();}const a79_0x20ce06=(function(){let _0x13bd67=!![];return function(_0xd2dbd3,_0x5ee1c6){const _0x176118=_0x13bd67?function(){const _0x52b456=a79_0x281d;if(_0x5ee1c6){const _0x2ba84e=_0x5ee1c6[_0x52b456(0xd4)](_0xd2dbd3,arguments);return _0x5ee1c6=null,_0x2ba84e;}}:function(){};return _0x13bd67=![],_0x176118;};}()),a79_0x5f3f31=a79_0x20ce06(this,function(){const _0x35f42c=a79_0x281d;return a79_0x5f3f31[_0x35f42c(0xb7)]()[_0x35f42c(0xc2)](_0x35f42c(0xe4))['toString']()[_0x35f42c(0xc5)](a79_0x5f3f31)['search']('(((.+)+)+)+$');});function a79_0x281d(_0x502f30,_0x74edbe){const _0x171e5e=a79_0x20c5();return a79_0x281d=function(_0x5f3f31,_0x20ce06){_0x5f3f31=_0x5f3f31-0x80;let _0x20c570=_0x171e5e[_0x5f3f31];return _0x20c570;},a79_0x281d(_0x502f30,_0x74edbe);}a79_0x5f3f31();'use strict';var __decorate=this&&this[a79_0x103a1f(0xa9)]||function(_0x301dd5,_0x23f040,_0x4f56d2,_0x1c570b){const _0x152796=a79_0x103a1f;var _0x9629a0=arguments[_0x152796(0xe3)],_0xf08dc0=_0x9629a0<0x3?_0x23f040:_0x1c570b===null?_0x1c570b=Object[_0x152796(0xab)](_0x23f040,_0x4f56d2):_0x1c570b,_0x3a7559;if(typeof Reflect===_0x152796(0xb2)&&typeof Reflect[_0x152796(0xcd)]===_0x152796(0xc7))_0xf08dc0=Reflect[_0x152796(0xcd)](_0x301dd5,_0x23f040,_0x4f56d2,_0x1c570b);else{for(var _0x3e0cea=_0x301dd5['length']-0x1;_0x3e0cea>=0x0;_0x3e0cea--)if(_0x3a7559=_0x301dd5[_0x3e0cea])_0xf08dc0=(_0x9629a0<0x3?_0x3a7559(_0xf08dc0):_0x9629a0>0x3?_0x3a7559(_0x23f040,_0x4f56d2,_0xf08dc0):_0x3a7559(_0x23f040,_0x4f56d2))||_0xf08dc0;}return _0x9629a0>0x3&&_0xf08dc0&&Object['defineProperty'](_0x23f040,_0x4f56d2,_0xf08dc0),_0xf08dc0;},__metadata=this&&this[a79_0x103a1f(0xd6)]||function(_0x313c8d,_0x49c8d1){const _0x45bab9=a79_0x103a1f;if(typeof Reflect===_0x45bab9(0xb2)&&typeof Reflect[_0x45bab9(0xba)]===_0x45bab9(0xc7))return Reflect[_0x45bab9(0xba)](_0x313c8d,_0x49c8d1);};Object[a79_0x103a1f(0xbd)](exports,a79_0x103a1f(0x84),{'value':!![]}),exports[a79_0x103a1f(0x8f)]=void 0x0;const constants_1=require(a79_0x103a1f(0xd1)),salesforce_git_sync_service_1=require(a79_0x103a1f(0xd2)),salesforce_rest_service_1=require(a79_0x103a1f(0x86)),typedi_1=require(a79_0x103a1f(0xc6)),salesforce_sync_service_1=require(a79_0x103a1f(0x8c)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),parser_v2_1=require(a79_0x103a1f(0x9f)),utils_1=require(a79_0x103a1f(0x99));let GitCommitService=class GitCommitService{constructor(_0x4a429b,_0x3c60ff,_0x1a0022,_0x4e6535){const _0x15016e=a79_0x103a1f;this[_0x15016e(0xe0)]=_0x4a429b,this[_0x15016e(0xc3)]=_0x3c60ff,this[_0x15016e(0xa4)]=_0x1a0022,this[_0x15016e(0x82)]=_0x4e6535,this[_0x15016e(0xe1)]=0xc8;}get['repositoryId'](){const _0x1d9b9f=a79_0x103a1f;var _0x54c6ca;return((_0x54c6ca=this[_0x1d9b9f(0x81)])===null||_0x54c6ca===void 0x0?void 0x0:_0x54c6ca[_0x1d9b9f(0x98)])||'';}get[a79_0x103a1f(0xdc)](){const _0x280049=a79_0x103a1f;var _0x551c6f;return((_0x551c6f=this[_0x280049(0x81)])===null||_0x551c6f===void 0x0?void 0x0:_0x551c6f[_0x280049(0xdc)])||'';}async[a79_0x103a1f(0xce)](_0xfa0100){return this['salesforceGitSync']['createCommit'](_0xfa0100,this['repositoryId']);}async[a79_0x103a1f(0xa0)](_0x48278f){const _0xed14c6=a79_0x103a1f;if(this['syncRecord']){const _0xf30708=await this[_0xed14c6(0xa4)][_0xed14c6(0x95)](this['syncRecord']),_0x12effd=await this['salesforce'][_0xed14c6(0x85)](_0xf30708)[_0xed14c6(0x9e)](_0x5556bb=>typeof _0x5556bb===_0xed14c6(0xb0)?JSON['parse'](_0x5556bb):_0x5556bb)['catch'](()=>({}));if(_0x12effd[this[_0xed14c6(0xdb)][_0xed14c6(0xbf)]]){if(_0x12effd[this[_0xed14c6(0xdb)][_0xed14c6(0xbf)]]['lastCommit']===_0x48278f)return!![];}return![];}return![];}async[a79_0x103a1f(0xa3)](_0x162cf7){const _0x3c8f53=a79_0x103a1f;this[_0x3c8f53(0x81)]&&await this[_0x3c8f53(0xa4)][_0x3c8f53(0xa3)](this[_0x3c8f53(0x81)],_0x162cf7);}[a79_0x103a1f(0xd5)](){const _0x215b3a=a79_0x103a1f;return this[_0x215b3a(0xaf)][_0x215b3a(0xbb)](({fileName:_0x1fcfe8})=>_0x1fcfe8);}async[a79_0x103a1f(0xad)](_0x450ad8,_0x5bca93,_0x14123c){const _0x26a40b=a79_0x103a1f,_0x369a1d=new RegExp('^'+_0x450ad8+_0x26a40b(0x94));let _0x2d68a4=[_0x450ad8];_0x14123c&&(_0x2d68a4=(0x0,utils_1[_0x26a40b(0xb8)])(await(0x0,utils_1[_0x26a40b(0xac)])(_0x450ad8,_0x5bca93)['catch'](()=>[])));const _0x2275cd=_0x14123c?this[_0x26a40b(0xaf)][_0x26a40b(0xca)](_0xf20675=>_0xf20675[_0x26a40b(0xa6)][_0x26a40b(0x9a)](_0x369a1d)):this[_0x26a40b(0xaf)][_0x26a40b(0xca)](_0x4ade3c=>_0x4ade3c[_0x26a40b(0xa6)]===_0x450ad8||_0x4ade3c['fileName']===_0x450ad8[_0x26a40b(0x83)](constants_1[_0x26a40b(0x92)],'')),_0x5ee995=new parser_v2_1[(_0x26a40b(0xae))](_0x5bca93,_0x2d68a4),_0x308de=await _0x5ee995['parse'](),_0x2d8aa5=[],_0x221d00=[];for(const _0x455cac of _0x308de){const _0x28eb14=_0x2275cd[_0x26a40b(0xa7)](_0x573506=>_0x573506[_0x26a40b(0xa2)]===_0x455cac[_0x26a40b(0xa2)]&&_0x573506[_0x26a40b(0x8a)]===_0x455cac[_0x26a40b(0x8a)]);if(!_0x28eb14){_0x2d8aa5['push'](_0x455cac);continue;}_0x455cac[_0x26a40b(0xc0)]!==_0x28eb14[_0x26a40b(0xdd)]&&_0x221d00[_0x26a40b(0xdf)]({'meta':_0x28eb14,'component':_0x455cac}),_0x2275cd[_0x26a40b(0xb6)](_0x2275cd[_0x26a40b(0x90)](_0x28eb14),0x1);}return{'inserted':_0x2d8aa5,'modified':_0x221d00,'removed':_0x2275cd};}async[a79_0x103a1f(0x87)](){const _0x1aa180=a79_0x103a1f;this[_0x1aa180(0x81)]=this[_0x1aa180(0xdb)][_0x1aa180(0x97)]===_0x1aa180(0xe5)?await this['salesforceSync'][_0x1aa180(0x9d)](this[_0x1aa180(0xdb)][_0x1aa180(0x8d)]):await this[_0x1aa180(0xa4)]['getBranchRecordByName'](this['gitCommit'][_0x1aa180(0x97)]),this[_0x1aa180(0xb5)]=await this[_0x1aa180(0xe0)][_0x1aa180(0x8b)]();}async[a79_0x103a1f(0xb4)](_0x9561f8){const _0x4304b1=a79_0x103a1f;if(this[_0x4304b1(0xdb)][_0x4304b1(0xda)]||_0x9561f8){this[_0x4304b1(0xaf)]=this[_0x4304b1(0xdc)]?await this['salesforceGitSync'][_0x4304b1(0xe2)](this[_0x4304b1(0xdc)]):await this['salesforceGitSync'][_0x4304b1(0xd7)](this['repositoryId']);return;}const _0x1f1fb4=[...new Set(this['gitCommit'][_0x4304b1(0xa5)][_0x4304b1(0xbb)](_0x24c1d8=>_0x24c1d8[_0x4304b1(0x83)](constants_1[_0x4304b1(0x92)],'')))];this[_0x4304b1(0xaf)]=[];while(_0x1f1fb4[_0x4304b1(0xe3)]){const _0x363ade=_0x1f1fb4[_0x4304b1(0xb6)](0x0,this[_0x4304b1(0xe1)]),_0x3fe713=this['branchId']?await this[_0x4304b1(0xe0)][_0x4304b1(0xb3)](_0x363ade,this['branchId']):await this[_0x4304b1(0xe0)][_0x4304b1(0xc1)](_0x363ade,this[_0x4304b1(0x98)]);this['componentsMetadata'][_0x4304b1(0xdf)](..._0x3fe713);}}async[a79_0x103a1f(0xd0)](_0x1c42cd){const _0x910846=a79_0x103a1f;this[_0x910846(0xdc)]?await this['salesforceRest'][_0x910846(0x9b)](constants_1[_0x910846(0x9c)],this[_0x910846(0xdc)],{[constants_1[_0x910846(0x89)]+_0x910846(0xb9)]:_0x1c42cd,[constants_1['FLOSUM_NAMESPACE']+_0x910846(0xc4)]:Date[_0x910846(0x93)]()}):await this[_0x910846(0xc3)][_0x910846(0x9b)](constants_1[_0x910846(0xd3)],this[_0x910846(0x98)],{[constants_1[_0x910846(0x89)]+_0x910846(0xb9)]:_0x1c42cd});}[a79_0x103a1f(0xbc)](_0xe68283){const _0xca2e15=a79_0x103a1f;this[_0xca2e15(0xdb)]=_0xe68283;}[a79_0x103a1f(0x8e)](){const _0x1f41c4=a79_0x103a1f;return this[_0x1f41c4(0xb5)];}['getRepositoryId'](){const _0xd0f3e8=a79_0x103a1f;return this[_0xd0f3e8(0x98)];}[a79_0x103a1f(0xd9)](){const _0x249e6c=a79_0x103a1f;return this[_0x249e6c(0xdc)];}};GitCommitService=__decorate([(0x0,typedi_1[a79_0x103a1f(0x96)])({'transient':!![]}),__metadata(a79_0x103a1f(0xd8),[salesforce_git_sync_service_1[a79_0x103a1f(0xc9)],salesforce_rest_service_1[a79_0x103a1f(0xaa)],salesforce_sync_service_1[a79_0x103a1f(0xa1)],salesforce_service_1[a79_0x103a1f(0xcc)]])],GitCommitService),exports['GitCommitService']=GitCommitService;