const a131_0x1b9094=a131_0x3193;(function(_0x1b6078,_0x4260d3){const _0x5191c9=a131_0x3193,_0x4f5780=_0x1b6078();while(!![]){try{const _0x30e739=-parseInt(_0x5191c9(0x8e))/0x1+parseInt(_0x5191c9(0xa0))/0x2*(-parseInt(_0x5191c9(0x8b))/0x3)+-parseInt(_0x5191c9(0x7c))/0x4+parseInt(_0x5191c9(0xa2))/0x5+parseInt(_0x5191c9(0x9e))/0x6*(-parseInt(_0x5191c9(0x7d))/0x7)+-parseInt(_0x5191c9(0xcb))/0x8+-parseInt(_0x5191c9(0x8f))/0x9*(-parseInt(_0x5191c9(0x89))/0xa);if(_0x30e739===_0x4260d3)break;else _0x4f5780['push'](_0x4f5780['shift']());}catch(_0x5aeef4){_0x4f5780['push'](_0x4f5780['shift']());}}}(a131_0x16b7,0xb6342));const a131_0x2e5723=(function(){let _0x431428=!![];return function(_0x13eb84,_0xf2968b){const _0x5bcb3f=_0x431428?function(){if(_0xf2968b){const _0x5c0f01=_0xf2968b['apply'](_0x13eb84,arguments);return _0xf2968b=null,_0x5c0f01;}}:function(){};return _0x431428=![],_0x5bcb3f;};}()),a131_0x16a43b=a131_0x2e5723(this,function(){const _0x3dfc13=a131_0x3193;return a131_0x16a43b[_0x3dfc13(0xbb)]()['search'](_0x3dfc13(0x9d))[_0x3dfc13(0xbb)]()[_0x3dfc13(0xbf)](a131_0x16a43b)[_0x3dfc13(0xb1)](_0x3dfc13(0x9d));});function a131_0x16b7(){const _0x35c946=['updateRemoteState','10NxUvNE','string','3428240snqeaa','getOwnPropertyDescriptor','SalesforceGitSyncService','execute','gitCommit','parse','find','salesforceRest','Service','patch','componentsMetadata','metadata','repositoryId','Synchronization_Status__c','retrieveAttachment','search','salesforceSync','then','ComponentsUtils','splice','type','repositoryGit','setCommitDto','__esModule','fetchBranchComponents','toString','Last_Updated_On__c','repository','length','constructor','lastCommit','getRepositoryRecordByName','branchId','create','salesforce','force','crc','salesforceGitSync','../utils/components.utils','push','catch','9985432rNGUsH','syncRecord','prepareComponentNamesForFetchMetadata','createCommit','640232LgcJQx','188153gtGuIR','SalesforceRestService','PathUtils','SalesforceSyncService','FLOSUM_NAMESPACE','fetchRepositoryComponentsByFilenames','../../salesforce/services/salesforce-rest.service','defineProperty','design:paramtypes','SalesforceService','TASKS_PER_TICK','object','150ziewrj','__metadata','764202LxrcGw','checkSyncStatus','function','1195993OdYIpn','2734065tGbSNN','indexOf','../../salesforce/services/salesforce-sync.service','FLOSUM_REPOSITORY','recordType','typedi','recordTypeName','proceedFile','decorate','branch','now','filterMetadataComponents','fetchRepositoryComponents','recordTypes','(((.+)+)+)+$','138FmRNCB'];a131_0x16b7=function(){return _0x35c946;};return a131_0x16b7();}a131_0x16a43b();'use strict';var __decorate=this&&this['__decorate']||function(_0x290cfc,_0x28447b,_0x153df4,_0x394087){const _0x405f3b=a131_0x3193;var _0x515fb1=arguments[_0x405f3b(0xbe)],_0x517a59=_0x515fb1<0x3?_0x28447b:_0x394087===null?_0x394087=Object[_0x405f3b(0xa3)](_0x28447b,_0x153df4):_0x394087,_0x2b94a2;if(typeof Reflect===_0x405f3b(0x88)&&typeof Reflect['decorate']==='function')_0x517a59=Reflect[_0x405f3b(0x97)](_0x290cfc,_0x28447b,_0x153df4,_0x394087);else{for(var _0x30a0ee=_0x290cfc['length']-0x1;_0x30a0ee>=0x0;_0x30a0ee--)if(_0x2b94a2=_0x290cfc[_0x30a0ee])_0x517a59=(_0x515fb1<0x3?_0x2b94a2(_0x517a59):_0x515fb1>0x3?_0x2b94a2(_0x28447b,_0x153df4,_0x517a59):_0x2b94a2(_0x28447b,_0x153df4))||_0x517a59;}return _0x515fb1>0x3&&_0x517a59&&Object[_0x405f3b(0x84)](_0x28447b,_0x153df4,_0x517a59),_0x517a59;},__metadata=this&&this[a131_0x1b9094(0x8a)]||function(_0x418606,_0x17e181){const _0x3cfd48=a131_0x1b9094;if(typeof Reflect==='object'&&typeof Reflect[_0x3cfd48(0xad)]===_0x3cfd48(0x8d))return Reflect[_0x3cfd48(0xad)](_0x418606,_0x17e181);};Object[a131_0x1b9094(0x84)](exports,a131_0x1b9094(0xb9),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a131_0x1b9094(0x83)),typedi_1=require(a131_0x1b9094(0x94)),salesforce_sync_service_1=require(a131_0x1b9094(0x91)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),factory_parser_1=require('../../parsers/factory.parser'),path_utils_1=require('../utils/path.utils'),components_utils_1=require(a131_0x1b9094(0xc8));let GitCommitService=class GitCommitService{constructor(_0x2b0fb6,_0x2d905c,_0x1c122b,_0x15a0da){const _0x55d517=a131_0x1b9094;this[_0x55d517(0xc7)]=_0x2b0fb6,this['salesforceRest']=_0x2d905c,this['salesforceSync']=_0x1c122b,this[_0x55d517(0xc4)]=_0x15a0da,this[_0x55d517(0x87)]=0xc8;}get[a131_0x1b9094(0xae)](){const _0x4354ef=a131_0x1b9094;var _0x11aea5;return((_0x11aea5=this[_0x4354ef(0xcc)])===null||_0x11aea5===void 0x0?void 0x0:_0x11aea5[_0x4354ef(0xae)])||'';}get[a131_0x1b9094(0xc2)](){const _0x1b53b2=a131_0x1b9094;var _0xf03403;return((_0xf03403=this[_0x1b53b2(0xcc)])===null||_0xf03403===void 0x0?void 0x0:_0xf03403[_0x1b53b2(0xc2)])||'';}get[a131_0x1b9094(0x93)](){const _0x47d83e=a131_0x1b9094;return this[_0x47d83e(0xcc)][_0x47d83e(0x95)];}async[a131_0x1b9094(0xce)](_0x54e3e4){const _0x19e813=a131_0x1b9094;return this[_0x19e813(0xc7)][_0x19e813(0xce)](_0x54e3e4,this[_0x19e813(0xae)]);}async[a131_0x1b9094(0x8c)](_0x4120cc){const _0x4802fc=a131_0x1b9094;if(this['syncRecord']){const _0x4f464e=await this[_0x4802fc(0xb2)]['getRemoteStateAttachmentId'](this[_0x4802fc(0xcc)]),_0x57b1d7=await this[_0x4802fc(0xc4)][_0x4802fc(0xb0)](_0x4f464e)[_0x4802fc(0xb3)](_0x17edba=>typeof _0x17edba===_0x4802fc(0xa1)?JSON[_0x4802fc(0xa7)](_0x17edba):_0x17edba)[_0x4802fc(0xca)](()=>({}));if(_0x57b1d7[this['gitCommit'][_0x4802fc(0xb7)]]){if(_0x57b1d7[this[_0x4802fc(0xa6)][_0x4802fc(0xb7)]][_0x4802fc(0xc0)]===_0x4120cc)return!![];}return![];}return![];}async[a131_0x1b9094(0x9f)](_0x1fec9c){const _0x3ca4a8=a131_0x1b9094;this['syncRecord']&&await this['salesforceSync'][_0x3ca4a8(0x9f)](this['syncRecord'],_0x1fec9c);}['getUnusedComponentsFilePaths'](){return this['componentsMetadata']['map'](({fileName:_0x26781d})=>_0x26781d);}async[a131_0x1b9094(0x96)](_0x2acf57,_0x5987e3,_0x3b3e37){const _0x337a71=a131_0x1b9094,_0x39fec3=await path_utils_1[_0x337a71(0x7f)]['readComponentPaths'](this['syncRecord'][_0x337a71(0x95)],_0x2acf57,_0x5987e3,_0x3b3e37),_0x421afe=components_utils_1[_0x337a71(0xb4)][_0x337a71(0x9a)](this[_0x337a71(0xac)],_0x2acf57,_0x3b3e37,this[_0x337a71(0xcc)][_0x337a71(0x95)]),_0x31cb8a=factory_parser_1['FactoryParser'][_0x337a71(0xc3)]({'recordType':this[_0x337a71(0xcc)][_0x337a71(0x95)],'sourceDir':_0x5987e3,'paths':_0x39fec3}),_0x452fe2=await _0x31cb8a[_0x337a71(0xa5)](),_0x3d9bf9=[],_0x504c11=[];for(const _0x161554 of _0x452fe2){const _0x3b0353=_0x421afe[_0x337a71(0xa8)](_0x30caa2=>_0x30caa2['name']===_0x161554['name']&&_0x30caa2[_0x337a71(0xb6)]===_0x161554['type']);if(!_0x3b0353){_0x3d9bf9['push'](_0x161554);continue;}_0x161554[_0x337a71(0xc6)]!==_0x3b0353['crc32']&&_0x504c11['push']({'meta':_0x3b0353,'component':_0x161554}),_0x421afe[_0x337a71(0xb5)](_0x421afe[_0x337a71(0x90)](_0x3b0353),0x1);}return{'inserted':_0x3d9bf9,'modified':_0x504c11,'removed':_0x421afe};}async['fetchRepositoryOrBranchData'](){const _0x179883=a131_0x1b9094;this[_0x179883(0xcc)]=this['gitCommit'][_0x179883(0x98)]==='master'?await this['salesforceSync'][_0x179883(0xc1)](this['gitCommit'][_0x179883(0xbd)]):await this[_0x179883(0xb2)]['getBranchRecordByName'](this[_0x179883(0xa6)][_0x179883(0x98)]),this[_0x179883(0x9c)]=await this[_0x179883(0xc7)]['getComponentRecordTypes']();}async['fetchComponentsMetadata'](_0x378faa){const _0x254df6=a131_0x1b9094;if(this[_0x254df6(0xa6)][_0x254df6(0xc5)]||_0x378faa){this[_0x254df6(0xac)]=this[_0x254df6(0xc2)]?await this[_0x254df6(0xc7)][_0x254df6(0xba)](this[_0x254df6(0xc2)]):await this[_0x254df6(0xc7)][_0x254df6(0x9b)](this['repositoryId']);return;}const _0x5bd48c=components_utils_1[_0x254df6(0xb4)][_0x254df6(0xcd)](this[_0x254df6(0xa6)]['fileNames'],this[_0x254df6(0xcc)][_0x254df6(0x95)]);this[_0x254df6(0xac)]=[];while(_0x5bd48c['length']){const _0x59d418=_0x5bd48c[_0x254df6(0xb5)](0x0,this[_0x254df6(0x87)]),_0x549f9c=this['branchId']?await this[_0x254df6(0xc7)]['fetchBranchComponentsByFilenames'](_0x59d418,this['branchId']):await this[_0x254df6(0xc7)][_0x254df6(0x82)](_0x59d418,this[_0x254df6(0xae)]);this['componentsMetadata'][_0x254df6(0xc9)](..._0x549f9c);}}async['updateStatus'](_0x5c2348){const _0x2486eb=a131_0x1b9094;this['branchId']?await this['salesforceRest'][_0x2486eb(0xab)](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x2486eb(0xaf)]:_0x5c2348,[constants_1[_0x2486eb(0x81)]+_0x2486eb(0xbc)]:Date[_0x2486eb(0x99)]()}):await this[_0x2486eb(0xa9)][_0x2486eb(0xab)](constants_1[_0x2486eb(0x92)],this['repositoryId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x2486eb(0xaf)]:_0x5c2348});}[a131_0x1b9094(0xb8)](_0x441f55){const _0x7aaa19=a131_0x1b9094;this[_0x7aaa19(0xa6)]=_0x441f55;}['getRecordTypes'](){const _0x4e39ae=a131_0x1b9094;return this[_0x4e39ae(0x9c)];}['getRepositoryId'](){const _0x5b91b4=a131_0x1b9094;return this[_0x5b91b4(0xae)];}['getBranchId'](){const _0xdf5fc8=a131_0x1b9094;return this[_0xdf5fc8(0xc2)];}};function a131_0x3193(_0x376874,_0x5aab79){const _0x4b0a4e=a131_0x16b7();return a131_0x3193=function(_0x16a43b,_0x2e5723){_0x16a43b=_0x16a43b-0x7c;let _0x16b7e7=_0x4b0a4e[_0x16a43b];return _0x16b7e7;},a131_0x3193(_0x376874,_0x5aab79);}GitCommitService=__decorate([(0x0,typedi_1[a131_0x1b9094(0xaa)])({'transient':!![]}),__metadata(a131_0x1b9094(0x85),[salesforce_git_sync_service_1[a131_0x1b9094(0xa4)],salesforce_rest_service_1[a131_0x1b9094(0x7e)],salesforce_sync_service_1[a131_0x1b9094(0x80)],salesforce_service_1[a131_0x1b9094(0x86)]])],GitCommitService),exports['GitCommitService']=GitCommitService;