const a79_0x4c8dfa=a79_0x2076;(function(_0x547131,_0x1673dc){const _0x5f4271=a79_0x2076,_0x1c47ed=_0x547131();while(!![]){try{const _0x326171=parseInt(_0x5f4271(0xe0))/0x1+parseInt(_0x5f4271(0xc5))/0x2+-parseInt(_0x5f4271(0xbe))/0x3*(-parseInt(_0x5f4271(0xe2))/0x4)+parseInt(_0x5f4271(0xbc))/0x5+-parseInt(_0x5f4271(0xfc))/0x6+-parseInt(_0x5f4271(0xe5))/0x7*(parseInt(_0x5f4271(0xbd))/0x8)+-parseInt(_0x5f4271(0xc7))/0x9;if(_0x326171===_0x1673dc)break;else _0x1c47ed['push'](_0x1c47ed['shift']());}catch(_0x7b04a0){_0x1c47ed['push'](_0x1c47ed['shift']());}}}(a79_0xb0fc,0x895ab));const a79_0x35c301=(function(){let _0x5f08e7=!![];return function(_0x23d5eb,_0x237ce8){const _0xb54889=_0x5f08e7?function(){if(_0x237ce8){const _0x898669=_0x237ce8['apply'](_0x23d5eb,arguments);return _0x237ce8=null,_0x898669;}}:function(){};return _0x5f08e7=![],_0xb54889;};}()),a79_0x297191=a79_0x35c301(this,function(){const _0x2c9ec5=a79_0x2076;return a79_0x297191[_0x2c9ec5(0xd9)]()[_0x2c9ec5(0xf8)](_0x2c9ec5(0xee))[_0x2c9ec5(0xd9)]()[_0x2c9ec5(0xf7)](a79_0x297191)['search'](_0x2c9ec5(0xee));});a79_0x297191();'use strict';function a79_0x2076(_0x402b62,_0x3c8a3d){const _0xd7a4fa=a79_0xb0fc();return a79_0x2076=function(_0x297191,_0x35c301){_0x297191=_0x297191-0xab;let _0xb0fc5=_0xd7a4fa[_0x297191];return _0xb0fc5;},a79_0x2076(_0x402b62,_0x3c8a3d);}var __decorate=this&&this[a79_0x4c8dfa(0x101)]||function(_0xbc2bc5,_0xdd507e,_0x5807bc,_0x125677){const _0x5e3ff8=a79_0x4c8dfa;var _0x1d5632=arguments['length'],_0x45f79c=_0x1d5632<0x3?_0xdd507e:_0x125677===null?_0x125677=Object[_0x5e3ff8(0xd2)](_0xdd507e,_0x5807bc):_0x125677,_0x5b7166;if(typeof Reflect===_0x5e3ff8(0xb2)&&typeof Reflect[_0x5e3ff8(0xf0)]===_0x5e3ff8(0xf1))_0x45f79c=Reflect[_0x5e3ff8(0xf0)](_0xbc2bc5,_0xdd507e,_0x5807bc,_0x125677);else{for(var _0x54a527=_0xbc2bc5[_0x5e3ff8(0xba)]-0x1;_0x54a527>=0x0;_0x54a527--)if(_0x5b7166=_0xbc2bc5[_0x54a527])_0x45f79c=(_0x1d5632<0x3?_0x5b7166(_0x45f79c):_0x1d5632>0x3?_0x5b7166(_0xdd507e,_0x5807bc,_0x45f79c):_0x5b7166(_0xdd507e,_0x5807bc))||_0x45f79c;}return _0x1d5632>0x3&&_0x45f79c&&Object['defineProperty'](_0xdd507e,_0x5807bc,_0x45f79c),_0x45f79c;},__metadata=this&&this['__metadata']||function(_0x2145fb,_0x5671ab){const _0x462409=a79_0x4c8dfa;if(typeof Reflect===_0x462409(0xb2)&&typeof Reflect['metadata']===_0x462409(0xf1))return Reflect[_0x462409(0xe1)](_0x2145fb,_0x5671ab);};Object[a79_0x4c8dfa(0x104)](exports,a79_0x4c8dfa(0xef),{'value':!![]}),exports[a79_0x4c8dfa(0xb6)]=void 0x0;const constants_1=require(a79_0x4c8dfa(0xad)),salesforce_git_sync_service_1=require(a79_0x4c8dfa(0xdd)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a79_0x4c8dfa(0xd6)),salesforce_sync_service_1=require(a79_0x4c8dfa(0xc4)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),parser_v2_1=require(a79_0x4c8dfa(0x100)),utils_1=require(a79_0x4c8dfa(0xb9));let GitCommitService=class GitCommitService{constructor(_0x58db1b,_0x29f83b,_0x4a131f,_0x175c7e){const _0x29b35f=a79_0x4c8dfa;this[_0x29b35f(0xce)]=_0x58db1b,this['salesforceRest']=_0x29f83b,this[_0x29b35f(0xe3)]=_0x4a131f,this[_0x29b35f(0xff)]=_0x175c7e,this[_0x29b35f(0xae)]=0xc8;}get['repositoryId'](){const _0xefa98c=a79_0x4c8dfa;var _0x19b07d;return((_0x19b07d=this[_0xefa98c(0xcb)])===null||_0x19b07d===void 0x0?void 0x0:_0x19b07d[_0xefa98c(0xbb)])||'';}get[a79_0x4c8dfa(0xf3)](){const _0x44be71=a79_0x4c8dfa;var _0x37793d;return((_0x37793d=this[_0x44be71(0xcb)])===null||_0x37793d===void 0x0?void 0x0:_0x37793d[_0x44be71(0xf3)])||'';}async[a79_0x4c8dfa(0xfb)](_0x3efe0c){const _0x3ca6a7=a79_0x4c8dfa;return this[_0x3ca6a7(0xce)][_0x3ca6a7(0xfb)](_0x3efe0c,this[_0x3ca6a7(0xbb)]);}async[a79_0x4c8dfa(0xca)](_0x50d549){const _0x2f970d=a79_0x4c8dfa;if(this['syncRecord']){const _0x2b164c=await this[_0x2f970d(0xe3)][_0x2f970d(0xde)](this[_0x2f970d(0xcb)]),_0x11cb59=await this[_0x2f970d(0xff)][_0x2f970d(0xab)](_0x2b164c)[_0x2f970d(0xed)](_0xaf42ee=>typeof _0xaf42ee===_0x2f970d(0xd3)?JSON[_0x2f970d(0xd7)](_0xaf42ee):_0xaf42ee)['catch'](()=>({}));if(_0x11cb59[this['gitCommit'][_0x2f970d(0xb5)]]){if(_0x11cb59[this[_0x2f970d(0xfa)][_0x2f970d(0xb5)]]['lastCommit']===_0x50d549)return!![];}return![];}return![];}async[a79_0x4c8dfa(0xd4)](_0x5f565b){const _0x38d6ea=a79_0x4c8dfa;this[_0x38d6ea(0xcb)]&&await this['salesforceSync']['updateRemoteState'](this[_0x38d6ea(0xcb)],_0x5f565b);}['getUnusedComponentsFilePaths'](){const _0x230dc9=a79_0x4c8dfa;return this['componentsMetadata'][_0x230dc9(0x102)](({fileName:_0x537688})=>_0x537688);}async[a79_0x4c8dfa(0xf9)](_0x42e588,_0x4ce1ca,_0x14dd90){const _0x5d26d2=a79_0x4c8dfa,_0x76969a=new RegExp('^'+_0x42e588+_0x5d26d2(0xd1));let _0xb436b3=[_0x42e588];_0x14dd90&&(_0xb436b3=(0x0,utils_1[_0x5d26d2(0xc8)])(await(0x0,utils_1[_0x5d26d2(0xfe)])(_0x42e588,_0x4ce1ca)[_0x5d26d2(0xfd)](()=>[])));const _0x502d69=_0x14dd90?this[_0x5d26d2(0xe6)]['filter'](_0x1b6d78=>_0x1b6d78[_0x5d26d2(0xec)]['match'](_0x76969a)):this['componentsMetadata'][_0x5d26d2(0xf6)](_0xd7248c=>_0xd7248c['fileName']===_0x42e588||_0xd7248c[_0x5d26d2(0xec)]===_0x42e588[_0x5d26d2(0xeb)](constants_1['META_XML_EXTENSION'],'')),_0x334bc3=new parser_v2_1[(_0x5d26d2(0xea))](_0x4ce1ca,_0xb436b3),_0x100633=await _0x334bc3[_0x5d26d2(0xd7)](),_0x39a664=[],_0x3eae95=[];for(const _0x376c36 of _0x100633){const _0x14273b=_0x502d69[_0x5d26d2(0xc1)](_0x58424b=>_0x58424b[_0x5d26d2(0xdb)]===_0x376c36[_0x5d26d2(0xdb)]&&_0x58424b[_0x5d26d2(0xb8)]===_0x376c36[_0x5d26d2(0xb8)]);if(!_0x14273b){_0x39a664['push'](_0x376c36);continue;}_0x376c36['crc']!==_0x14273b['crc32']&&_0x3eae95[_0x5d26d2(0xac)]({'meta':_0x14273b,'component':_0x376c36}),_0x502d69['splice'](_0x502d69[_0x5d26d2(0xf2)](_0x14273b),0x1);}return{'inserted':_0x39a664,'modified':_0x3eae95,'removed':_0x502d69};}async[a79_0x4c8dfa(0xc9)](){const _0x544580=a79_0x4c8dfa;this['syncRecord']=this[_0x544580(0xfa)][_0x544580(0xf5)]==='master'?await this[_0x544580(0xe3)][_0x544580(0xe4)](this['gitCommit'][_0x544580(0xb0)]):await this[_0x544580(0xe3)][_0x544580(0xe8)](this['gitCommit']['branch']),this[_0x544580(0xe7)]=await this[_0x544580(0xce)]['getComponentRecordTypes']();}async[a79_0x4c8dfa(0xaf)](_0x19602e){const _0x49a169=a79_0x4c8dfa;if(this[_0x49a169(0xfa)][_0x49a169(0xbf)]||_0x19602e){this[_0x49a169(0xe6)]=this[_0x49a169(0xf3)]?await this[_0x49a169(0xce)]['fetchBranchComponents'](this[_0x49a169(0xf3)]):await this[_0x49a169(0xce)][_0x49a169(0xc3)](this[_0x49a169(0xbb)]);return;}const _0x39a30e=[...new Set(this[_0x49a169(0xfa)][_0x49a169(0xdf)]['map'](_0x5c959e=>_0x5c959e[_0x49a169(0xeb)](constants_1[_0x49a169(0xcc)],'')))];this[_0x49a169(0xe6)]=[];while(_0x39a30e[_0x49a169(0xba)]){const _0x27dc31=_0x39a30e['splice'](0x0,this[_0x49a169(0xae)]),_0x11c400=this[_0x49a169(0xf3)]?await this[_0x49a169(0xce)][_0x49a169(0xc2)](_0x27dc31,this[_0x49a169(0xf3)]):await this[_0x49a169(0xce)]['fetchRepositoryComponentsByFilenames'](_0x27dc31,this['repositoryId']);this[_0x49a169(0xe6)][_0x49a169(0xac)](..._0x11c400);}}async[a79_0x4c8dfa(0x103)](_0x4abe9e){const _0x4fb999=a79_0x4c8dfa;this[_0x4fb999(0xf3)]?await this['salesforceRest'][_0x4fb999(0xe9)](constants_1[_0x4fb999(0xb3)],this['branchId'],{[constants_1[_0x4fb999(0xd0)]+_0x4fb999(0xcf)]:_0x4abe9e,[constants_1[_0x4fb999(0xc0)]+'Last_Updated_On__c']:Date['now']()}):await this[_0x4fb999(0xc6)]['patch'](constants_1[_0x4fb999(0xb7)],this[_0x4fb999(0xbb)],{[constants_1[_0x4fb999(0xd0)]+_0x4fb999(0xcf)]:_0x4abe9e});}['setCommitDto'](_0x2e0869){this['gitCommit']=_0x2e0869;}[a79_0x4c8dfa(0xb4)](){const _0x314707=a79_0x4c8dfa;return this[_0x314707(0xe7)];}[a79_0x4c8dfa(0xb1)](){return this['repositoryId'];}[a79_0x4c8dfa(0xd5)](){const _0x5f5fc2=a79_0x4c8dfa;return this[_0x5f5fc2(0xf3)];}};function a79_0xb0fc(){const _0x7ccab6=['1115017uVapYy','metadata','4BmiSuF','salesforceSync','getRepositoryRecordByName','6881QEqteq','componentsMetadata','recordTypes','getBranchRecordByName','patch','MDApiParserV2','replace','fileName','then','(((.+)+)+)+$','__esModule','decorate','function','indexOf','branchId','design:paramtypes','branch','filter','constructor','search','proceedFile','gitCommit','createCommit','5922258kZbQyP','catch','readFilesByFilename','salesforce','../../parsers/mdapi/parser-v2','__decorate','map','updateStatus','defineProperty','retrieveAttachment','push','../../../../constants','TASKS_PER_TICK','fetchComponentsMetadata','repository','getRepositoryId','object','FLOSUM_BRANCH','getRecordTypes','repositoryGit','GitCommitService','FLOSUM_REPOSITORY','type','../../parsers/utils','length','repositoryId','1630275gfVYze','8480jwvCPx','2898774ZSiVZZ','force','FLOSUM_NAMESPACE','find','fetchBranchComponentsByFilenames','fetchRepositoryComponents','../../salesforce/services/salesforce-sync.service','494474aDpXMp','salesforceRest','566469gIlgMB','filterParserPaths','fetchRepositoryOrBranchData','checkSyncStatus','syncRecord','META_XML_EXTENSION','SalesforceRestService','salesforceGitSync','Synchronization_Status__c','FLOSUM_GIT_NAMESPACE','([./-]{1}|$)','getOwnPropertyDescriptor','string','updateRemoteState','getBranchId','typedi','parse','Service','toString','SalesforceService','name','SalesforceSyncService','../../salesforce/services/salesforce-git-sync.service','getRemoteStateAttachmentId','fileNames'];a79_0xb0fc=function(){return _0x7ccab6;};return a79_0xb0fc();}GitCommitService=__decorate([(0x0,typedi_1[a79_0x4c8dfa(0xd8)])({'transient':!![]}),__metadata(a79_0x4c8dfa(0xf4),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a79_0x4c8dfa(0xcd)],salesforce_sync_service_1[a79_0x4c8dfa(0xdc)],salesforce_service_1[a79_0x4c8dfa(0xda)]])],GitCommitService),exports['GitCommitService']=GitCommitService;