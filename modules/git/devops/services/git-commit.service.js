const a110_0xc8ac0c=a110_0xcb38;function a110_0xcb38(_0x192987,_0x24d363){const _0x26b761=a110_0x4a4b();return a110_0xcb38=function(_0x22b599,_0x55e7b5){_0x22b599=_0x22b599-0x152;let _0x4a4b49=_0x26b761[_0x22b599];return _0x4a4b49;},a110_0xcb38(_0x192987,_0x24d363);}(function(_0x59cba4,_0x3c800b){const _0x272893=a110_0xcb38,_0x155807=_0x59cba4();while(!![]){try{const _0x40919e=-parseInt(_0x272893(0x19e))/0x1+-parseInt(_0x272893(0x16e))/0x2+-parseInt(_0x272893(0x198))/0x3+parseInt(_0x272893(0x1a8))/0x4+parseInt(_0x272893(0x17e))/0x5+-parseInt(_0x272893(0x159))/0x6*(-parseInt(_0x272893(0x1a6))/0x7)+parseInt(_0x272893(0x178))/0x8;if(_0x40919e===_0x3c800b)break;else _0x155807['push'](_0x155807['shift']());}catch(_0x141184){_0x155807['push'](_0x155807['shift']());}}}(a110_0x4a4b,0xf0caa));const a110_0x55e7b5=(function(){let _0x1afb29=!![];return function(_0x2b4586,_0x380405){const _0x5ad352=_0x1afb29?function(){const _0x36fe90=a110_0xcb38;if(_0x380405){const _0x76fe48=_0x380405[_0x36fe90(0x190)](_0x2b4586,arguments);return _0x380405=null,_0x76fe48;}}:function(){};return _0x1afb29=![],_0x5ad352;};}()),a110_0x22b599=a110_0x55e7b5(this,function(){const _0x29fa3d=a110_0xcb38;return a110_0x22b599[_0x29fa3d(0x18c)]()[_0x29fa3d(0x15a)]('(((.+)+)+)+$')['toString']()[_0x29fa3d(0x169)](a110_0x22b599)[_0x29fa3d(0x15a)](_0x29fa3d(0x18a));});a110_0x22b599();'use strict';var __decorate=this&&this['__decorate']||function(_0x483715,_0x262034,_0x56f411,_0x4f62d7){const _0x3fe420=a110_0xcb38;var _0x5bcfb4=arguments[_0x3fe420(0x1aa)],_0x5e4d20=_0x5bcfb4<0x3?_0x262034:_0x4f62d7===null?_0x4f62d7=Object['getOwnPropertyDescriptor'](_0x262034,_0x56f411):_0x4f62d7,_0x34328a;if(typeof Reflect===_0x3fe420(0x172)&&typeof Reflect[_0x3fe420(0x17f)]===_0x3fe420(0x163))_0x5e4d20=Reflect[_0x3fe420(0x17f)](_0x483715,_0x262034,_0x56f411,_0x4f62d7);else{for(var _0x431366=_0x483715[_0x3fe420(0x1aa)]-0x1;_0x431366>=0x0;_0x431366--)if(_0x34328a=_0x483715[_0x431366])_0x5e4d20=(_0x5bcfb4<0x3?_0x34328a(_0x5e4d20):_0x5bcfb4>0x3?_0x34328a(_0x262034,_0x56f411,_0x5e4d20):_0x34328a(_0x262034,_0x56f411))||_0x5e4d20;}return _0x5bcfb4>0x3&&_0x5e4d20&&Object[_0x3fe420(0x18d)](_0x262034,_0x56f411,_0x5e4d20),_0x5e4d20;},__metadata=this&&this[a110_0xc8ac0c(0x184)]||function(_0x239a81,_0x5c760f){const _0x2e140e=a110_0xc8ac0c;if(typeof Reflect===_0x2e140e(0x172)&&typeof Reflect[_0x2e140e(0x182)]===_0x2e140e(0x163))return Reflect['metadata'](_0x239a81,_0x5c760f);};Object['defineProperty'](exports,a110_0xc8ac0c(0x164),{'value':!![]}),exports[a110_0xc8ac0c(0x1a1)]=void 0x0;const constants_1=require(a110_0xc8ac0c(0x187)),salesforce_git_sync_service_1=require(a110_0xc8ac0c(0x160)),salesforce_rest_service_1=require(a110_0xc8ac0c(0x176)),typedi_1=require(a110_0xc8ac0c(0x157)),salesforce_sync_service_1=require(a110_0xc8ac0c(0x197)),salesforce_service_1=require(a110_0xc8ac0c(0x17c)),utils_1=require(a110_0xc8ac0c(0x168)),factory_parser_1=require(a110_0xc8ac0c(0x162)),vlocity_1=require(a110_0xc8ac0c(0x16f));let GitCommitService=class GitCommitService{constructor(_0x3fafd0,_0x57a4ec,_0x2238b0,_0x387949){const _0x2fb0f4=a110_0xc8ac0c;this['salesforceGitSync']=_0x3fafd0,this[_0x2fb0f4(0x189)]=_0x57a4ec,this[_0x2fb0f4(0x17a)]=_0x2238b0,this['salesforce']=_0x387949,this[_0x2fb0f4(0x19b)]=0xc8;}get[a110_0xc8ac0c(0x167)](){const _0x22b1ce=a110_0xc8ac0c;var _0x425237;return((_0x425237=this['syncRecord'])===null||_0x425237===void 0x0?void 0x0:_0x425237[_0x22b1ce(0x167)])||'';}get[a110_0xc8ac0c(0x17b)](){var _0x409eb7;return((_0x409eb7=this['syncRecord'])===null||_0x409eb7===void 0x0?void 0x0:_0x409eb7['branchId'])||'';}async[a110_0xc8ac0c(0x16d)](_0x2059b1){const _0x93eedc=a110_0xc8ac0c;return this['salesforceGitSync'][_0x93eedc(0x16d)](_0x2059b1,this[_0x93eedc(0x167)]);}async['checkSyncStatus'](_0x5f0aa0){const _0x4a2c7e=a110_0xc8ac0c;if(this[_0x4a2c7e(0x19d)]){const _0x1ed737=await this[_0x4a2c7e(0x17a)]['getRemoteStateAttachmentId'](this[_0x4a2c7e(0x19d)]),_0x22ff25=await this[_0x4a2c7e(0x16c)][_0x4a2c7e(0x183)](_0x1ed737)['then'](_0x1a57ca=>typeof _0x1a57ca===_0x4a2c7e(0x174)?JSON[_0x4a2c7e(0x171)](_0x1a57ca):_0x1a57ca)[_0x4a2c7e(0x179)](()=>({}));if(_0x22ff25[this[_0x4a2c7e(0x191)]['repositoryGit']]){if(_0x22ff25[this[_0x4a2c7e(0x191)]['repositoryGit']][_0x4a2c7e(0x15e)]===_0x5f0aa0)return!![];}return![];}return![];}async[a110_0xc8ac0c(0x19f)](_0x4d366b){const _0x4fe580=a110_0xc8ac0c;this[_0x4fe580(0x19d)]&&await this[_0x4fe580(0x17a)][_0x4fe580(0x19f)](this[_0x4fe580(0x19d)],_0x4d366b);}[a110_0xc8ac0c(0x170)](){const _0x566dd7=a110_0xc8ac0c;return this[_0x566dd7(0x16a)]['map'](({fileName:_0x355b2c})=>_0x355b2c);}async[a110_0xc8ac0c(0x199)](_0x10d3f6,_0xea9fcb,_0xcf2ce2){const _0x334d82=a110_0xc8ac0c,_0x5ca2fb=new RegExp('^'+_0x10d3f6+_0x334d82(0x15d));let _0x5e28db=[_0x10d3f6];_0xcf2ce2&&!(0x0,vlocity_1[_0x334d82(0x1a5)])(_0x10d3f6)&&(_0x5e28db=(0x0,utils_1['filterParserPaths'])(await(0x0,utils_1[_0x334d82(0x192)])(_0x10d3f6,_0xea9fcb)['catch'](()=>[])));const _0x3f1c84=_0xcf2ce2?this['componentsMetadata']['filter'](_0x592ac7=>_0x592ac7[_0x334d82(0x166)][_0x334d82(0x158)](_0x5ca2fb)):this[_0x334d82(0x16a)]['filter'](_0xcdefb0=>_0xcdefb0[_0x334d82(0x166)]===_0x10d3f6||_0xcdefb0[_0x334d82(0x166)]===_0x10d3f6['replace'](constants_1[_0x334d82(0x17d)],'')),_0x23f52c=factory_parser_1[_0x334d82(0x196)][_0x334d82(0x1a4)](_0xea9fcb,_0x5e28db),_0x220333=await _0x23f52c[_0x334d82(0x171)](),_0xa0b5c7=[],_0x3ca3fc=[];for(const _0x5767f0 of _0x220333){const _0x35d610=_0x3f1c84['find'](_0x3381da=>_0x3381da[_0x334d82(0x1ab)]===_0x5767f0['name']&&_0x3381da[_0x334d82(0x188)]===_0x5767f0[_0x334d82(0x188)]);if(!_0x35d610){_0xa0b5c7[_0x334d82(0x1a0)](_0x5767f0);continue;}_0x5767f0[_0x334d82(0x1ae)]!==_0x35d610[_0x334d82(0x194)]&&_0x3ca3fc[_0x334d82(0x1a0)]({'meta':_0x35d610,'component':_0x5767f0}),_0x3f1c84[_0x334d82(0x18b)](_0x3f1c84[_0x334d82(0x180)](_0x35d610),0x1);}return{'inserted':_0xa0b5c7,'modified':_0x3ca3fc,'removed':_0x3f1c84};}async['fetchRepositoryOrBranchData'](){const _0x411df0=a110_0xc8ac0c;this[_0x411df0(0x19d)]=this['gitCommit'][_0x411df0(0x193)]===_0x411df0(0x156)?await this[_0x411df0(0x17a)][_0x411df0(0x153)](this[_0x411df0(0x191)]['repository']):await this['salesforceSync'][_0x411df0(0x155)](this['gitCommit'][_0x411df0(0x193)]),this[_0x411df0(0x152)]=await this['salesforceGitSync'][_0x411df0(0x1a7)]();}async[a110_0xc8ac0c(0x18e)](_0x4ef091){const _0x24c253=a110_0xc8ac0c;if(this[_0x24c253(0x191)][_0x24c253(0x15f)]||_0x4ef091){this[_0x24c253(0x16a)]=this[_0x24c253(0x17b)]?await this[_0x24c253(0x165)][_0x24c253(0x1ac)](this['branchId']):await this[_0x24c253(0x165)][_0x24c253(0x1a3)](this[_0x24c253(0x167)]);return;}const _0x49d404=[...new Set(this['gitCommit'][_0x24c253(0x16b)][_0x24c253(0x19a)](_0x19a13f=>_0x19a13f[_0x24c253(0x181)](constants_1[_0x24c253(0x17d)],'')))];this[_0x24c253(0x16a)]=[];while(_0x49d404[_0x24c253(0x1aa)]){const _0x2e8a36=_0x49d404[_0x24c253(0x18b)](0x0,this[_0x24c253(0x19b)]),_0x5be21e=this[_0x24c253(0x17b)]?await this[_0x24c253(0x165)][_0x24c253(0x173)](_0x2e8a36,this[_0x24c253(0x17b)]):await this[_0x24c253(0x165)][_0x24c253(0x186)](_0x2e8a36,this['repositoryId']);this[_0x24c253(0x16a)][_0x24c253(0x1a0)](..._0x5be21e);}}async[a110_0xc8ac0c(0x154)](_0x312671){const _0x375440=a110_0xc8ac0c;this[_0x375440(0x17b)]?await this['salesforceRest'][_0x375440(0x15c)](constants_1['FLOSUM_BRANCH'],this[_0x375440(0x17b)],{[constants_1[_0x375440(0x177)]+_0x375440(0x19c)]:_0x312671,[constants_1['FLOSUM_NAMESPACE']+_0x375440(0x195)]:Date[_0x375440(0x1ad)]()}):await this[_0x375440(0x189)][_0x375440(0x15c)](constants_1[_0x375440(0x1a2)],this[_0x375440(0x167)],{[constants_1[_0x375440(0x177)]+_0x375440(0x19c)]:_0x312671});}[a110_0xc8ac0c(0x18f)](_0x404722){const _0x575efa=a110_0xc8ac0c;this[_0x575efa(0x191)]=_0x404722;}[a110_0xc8ac0c(0x161)](){const _0x4d98ee=a110_0xc8ac0c;return this[_0x4d98ee(0x152)];}[a110_0xc8ac0c(0x175)](){const _0x7a4d9f=a110_0xc8ac0c;return this[_0x7a4d9f(0x167)];}['getBranchId'](){return this['branchId'];}};function a110_0x4a4b(){const _0x4d0132=['619857ZpcdNI','proceedFile','map','TASKS_PER_TICK','Synchronization_Status__c','syncRecord','902134LYHyKU','updateRemoteState','push','GitCommitService','FLOSUM_REPOSITORY','fetchRepositoryComponents','create','isVlocityComponent','422898SuhXvw','getComponentRecordTypes','4729308wGdUIm','SalesforceRestService','length','name','fetchBranchComponents','now','crc','SalesforceSyncService','recordTypes','getRepositoryRecordByName','updateStatus','getBranchRecordByName','master','typedi','match','12QzZSny','search','Service','patch','([./-]{1}|$)','lastCommit','force','../../salesforce/services/salesforce-git-sync.service','getRecordTypes','../../parsers/mdapi/factory.parser','function','__esModule','salesforceGitSync','fileName','repositoryId','../../parsers/utils','constructor','componentsMetadata','fileNames','salesforce','createCommit','1567122KaXwBD','../../parsers/utils/vlocity','getUnusedComponentsFilePaths','parse','object','fetchBranchComponentsByFilenames','string','getRepositoryId','../../salesforce/services/salesforce-rest.service','FLOSUM_GIT_NAMESPACE','10092208chEqkI','catch','salesforceSync','branchId','../../salesforce/services/salesforce.service','META_XML_EXTENSION','1569575vRAabJ','decorate','indexOf','replace','metadata','retrieveAttachment','__metadata','SalesforceGitSyncService','fetchRepositoryComponentsByFilenames','../../../../constants','type','salesforceRest','(((.+)+)+)+$','splice','toString','defineProperty','fetchComponentsMetadata','setCommitDto','apply','gitCommit','readFilesByFilename','branch','crc32','Last_Updated_On__c','FactoryParser','../../salesforce/services/salesforce-sync.service'];a110_0x4a4b=function(){return _0x4d0132;};return a110_0x4a4b();}GitCommitService=__decorate([(0x0,typedi_1[a110_0xc8ac0c(0x15b)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a110_0xc8ac0c(0x185)],salesforce_rest_service_1[a110_0xc8ac0c(0x1a9)],salesforce_sync_service_1[a110_0xc8ac0c(0x1af)],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a110_0xc8ac0c(0x1a1)]=GitCommitService;