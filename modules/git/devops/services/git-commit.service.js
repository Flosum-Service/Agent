const a66_0x2cd7eb=a66_0x49fd;(function(_0x1d24d5,_0x342cc6){const _0x2e75b6=a66_0x49fd,_0x1270af=_0x1d24d5();while(!![]){try{const _0x54e736=-parseInt(_0x2e75b6(0x152))/0x1+-parseInt(_0x2e75b6(0x18a))/0x2*(parseInt(_0x2e75b6(0x144))/0x3)+-parseInt(_0x2e75b6(0x15e))/0x4*(-parseInt(_0x2e75b6(0x18c))/0x5)+-parseInt(_0x2e75b6(0x183))/0x6*(parseInt(_0x2e75b6(0x164))/0x7)+parseInt(_0x2e75b6(0x159))/0x8*(parseInt(_0x2e75b6(0x170))/0x9)+parseInt(_0x2e75b6(0x169))/0xa+-parseInt(_0x2e75b6(0x153))/0xb*(-parseInt(_0x2e75b6(0x147))/0xc);if(_0x54e736===_0x342cc6)break;else _0x1270af['push'](_0x1270af['shift']());}catch(_0x200f24){_0x1270af['push'](_0x1270af['shift']());}}}(a66_0x48d2,0x3d787));function a66_0x48d2(){const _0x14d9e8=['apply','36xezSxt','getBranchId','branch','getBranchRecordByName','../../salesforce/services/salesforce-rest.service','decorate','getRepositoryRecordByName','fetchRepositoryOrBranchData','recordTypes','design:paramtypes','salesforce','359516HdZMsu','1361987eKYQjn','TASKS_PER_TICK','metadata','salesforceGitSync','parse','updateRemoteState','68488tmDRHx','syncRecord','salesforceSync','FLOSUM_GIT_NAMESPACE','__metadata','60404WPdWVC','patch','object','GitCommitService','crc32','defineProperty','28raUUyp','fileName','proceedFile','fetchComponentsMetadata','map','1205420IDhKYj','match','repository','repositoryId','gitCommit','filterParserPaths','catch','333pWpxQn','function','branchId','createCommit','([./-]{1}|$)','__decorate','META_XML_EXTENSION','../../salesforce/services/salesforce-git-sync.service','string','componentsMetadata','salesforceRest','setCommitDto','fetchRepositoryComponents','../../../../constants','Last_Updated_On__c','splice','crc','fetchBranchComponents','getRemoteStateAttachmentId','427860JAUklo','lastCommit','__esModule','name','type','getRepositoryId','repositoryGit','2ubdeNL','Service','150QWznTh','SalesforceGitSyncService','filter','toString','fetchBranchComponentsByFilenames','master','SalesforceService','getUnusedComponentsFilePaths','Synchronization_Status__c','push','checkSyncStatus','getRecordTypes','length','SalesforceSyncService','search','(((.+)+)+)+$','getOwnPropertyDescriptor','replace','1095723kEiely','../../salesforce/services/salesforce-sync.service'];a66_0x48d2=function(){return _0x14d9e8;};return a66_0x48d2();}const a66_0x131744=(function(){let _0x9023a7=!![];return function(_0x5de660,_0x20c03a){const _0x235910=_0x9023a7?function(){const _0x487225=a66_0x49fd;if(_0x20c03a){const _0x32f517=_0x20c03a[_0x487225(0x146)](_0x5de660,arguments);return _0x20c03a=null,_0x32f517;}}:function(){};return _0x9023a7=![],_0x235910;};}()),a66_0x160939=a66_0x131744(this,function(){const _0x112da9=a66_0x49fd;return a66_0x160939[_0x112da9(0x18f)]()[_0x112da9(0x140)](_0x112da9(0x141))[_0x112da9(0x18f)]()['constructor'](a66_0x160939)[_0x112da9(0x140)](_0x112da9(0x141));});function a66_0x49fd(_0x3ad4ae,_0x4fb71b){const _0x179c55=a66_0x48d2();return a66_0x49fd=function(_0x160939,_0x131744){_0x160939=_0x160939-0x13c;let _0x48d20c=_0x179c55[_0x160939];return _0x48d20c;},a66_0x49fd(_0x3ad4ae,_0x4fb71b);}a66_0x160939();'use strict';var __decorate=this&&this[a66_0x2cd7eb(0x175)]||function(_0x2d5858,_0x555a96,_0x2cb47b,_0xd16007){const _0x1a9a0a=a66_0x2cd7eb;var _0x1b2fd4=arguments[_0x1a9a0a(0x13e)],_0x31b364=_0x1b2fd4<0x3?_0x555a96:_0xd16007===null?_0xd16007=Object[_0x1a9a0a(0x142)](_0x555a96,_0x2cb47b):_0xd16007,_0x58acfb;if(typeof Reflect===_0x1a9a0a(0x160)&&typeof Reflect['decorate']===_0x1a9a0a(0x171))_0x31b364=Reflect[_0x1a9a0a(0x14c)](_0x2d5858,_0x555a96,_0x2cb47b,_0xd16007);else{for(var _0xbaf5ee=_0x2d5858[_0x1a9a0a(0x13e)]-0x1;_0xbaf5ee>=0x0;_0xbaf5ee--)if(_0x58acfb=_0x2d5858[_0xbaf5ee])_0x31b364=(_0x1b2fd4<0x3?_0x58acfb(_0x31b364):_0x1b2fd4>0x3?_0x58acfb(_0x555a96,_0x2cb47b,_0x31b364):_0x58acfb(_0x555a96,_0x2cb47b))||_0x31b364;}return _0x1b2fd4>0x3&&_0x31b364&&Object[_0x1a9a0a(0x163)](_0x555a96,_0x2cb47b,_0x31b364),_0x31b364;},__metadata=this&&this[a66_0x2cd7eb(0x15d)]||function(_0x5bb8ed,_0x2cf539){const _0x1c52fe=a66_0x2cd7eb;if(typeof Reflect===_0x1c52fe(0x160)&&typeof Reflect[_0x1c52fe(0x155)]===_0x1c52fe(0x171))return Reflect[_0x1c52fe(0x155)](_0x5bb8ed,_0x2cf539);};Object[a66_0x2cd7eb(0x163)](exports,a66_0x2cd7eb(0x185),{'value':!![]}),exports[a66_0x2cd7eb(0x161)]=void 0x0;const constants_1=require(a66_0x2cd7eb(0x17d)),salesforce_git_sync_service_1=require(a66_0x2cd7eb(0x177)),salesforce_rest_service_1=require(a66_0x2cd7eb(0x14b)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a66_0x2cd7eb(0x145)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require('../../parsers/utils');let GitCommitService=class GitCommitService{constructor(_0x483906,_0x590d9f,_0x15f742,_0x343437){const _0x592124=a66_0x2cd7eb;this[_0x592124(0x156)]=_0x483906,this[_0x592124(0x17a)]=_0x590d9f,this[_0x592124(0x15b)]=_0x15f742,this[_0x592124(0x151)]=_0x343437,this[_0x592124(0x154)]=0xc8;}get[a66_0x2cd7eb(0x16c)](){const _0x243298=a66_0x2cd7eb;var _0xa31532;return((_0xa31532=this[_0x243298(0x15a)])===null||_0xa31532===void 0x0?void 0x0:_0xa31532[_0x243298(0x16c)])||'';}get[a66_0x2cd7eb(0x172)](){const _0x37aa16=a66_0x2cd7eb;var _0x2b4926;return((_0x2b4926=this[_0x37aa16(0x15a)])===null||_0x2b4926===void 0x0?void 0x0:_0x2b4926['branchId'])||'';}async[a66_0x2cd7eb(0x173)](_0x497480){const _0xa02968=a66_0x2cd7eb;return this[_0xa02968(0x156)][_0xa02968(0x173)](_0x497480,this['repositoryId']);}async[a66_0x2cd7eb(0x13c)](_0x4b52ad){const _0x11b1d4=a66_0x2cd7eb;if(this[_0x11b1d4(0x15a)]){const _0x1ef9b2=await this[_0x11b1d4(0x15b)][_0x11b1d4(0x182)](this[_0x11b1d4(0x15a)]),_0x110370=await this[_0x11b1d4(0x151)]['retrieveAttachment'](_0x1ef9b2)['then'](_0x5c8872=>typeof _0x5c8872===_0x11b1d4(0x178)?JSON[_0x11b1d4(0x157)](_0x5c8872):_0x5c8872)['catch'](()=>({}));if(_0x110370[this[_0x11b1d4(0x16d)][_0x11b1d4(0x189)]]){if(_0x110370[this[_0x11b1d4(0x16d)][_0x11b1d4(0x189)]][_0x11b1d4(0x184)]===_0x4b52ad)return!![];}return![];}return![];}async[a66_0x2cd7eb(0x158)](_0x3dd131){const _0x1ec88a=a66_0x2cd7eb;this[_0x1ec88a(0x15a)]&&await this[_0x1ec88a(0x15b)][_0x1ec88a(0x158)](this['syncRecord'],_0x3dd131);}[a66_0x2cd7eb(0x193)](){const _0x10e10f=a66_0x2cd7eb;return this[_0x10e10f(0x179)][_0x10e10f(0x168)](({fileName:_0x2aa32e})=>_0x2aa32e);}async[a66_0x2cd7eb(0x166)](_0x14e9fa,_0x53dcf4,_0x163f24){const _0x40352d=a66_0x2cd7eb,_0x245c16=new RegExp('^'+_0x14e9fa+_0x40352d(0x174));let _0x1b9a2c=[_0x14e9fa];_0x163f24&&(_0x1b9a2c=utils_1[_0x40352d(0x16e)](await utils_1['readFilesByFilename'](_0x14e9fa,_0x53dcf4)[_0x40352d(0x16f)](()=>[])));const _0x283779=_0x163f24?this['componentsMetadata'][_0x40352d(0x18e)](_0x3913b2=>_0x3913b2['fileName'][_0x40352d(0x16a)](_0x245c16)):this['componentsMetadata'][_0x40352d(0x18e)](_0x234ffd=>_0x234ffd[_0x40352d(0x165)]===_0x14e9fa||_0x234ffd[_0x40352d(0x165)]===_0x14e9fa[_0x40352d(0x143)](constants_1[_0x40352d(0x176)],'')),_0x202365=new parser_v2_1['MDApiParserV2'](_0x53dcf4,_0x1b9a2c),_0x404ea8=await _0x202365[_0x40352d(0x157)](),_0x296862=[],_0x386976=[];for(const _0x4828eb of _0x404ea8){const _0x4074ec=_0x283779['find'](_0x27669d=>_0x27669d[_0x40352d(0x186)]===_0x4828eb[_0x40352d(0x186)]&&_0x27669d[_0x40352d(0x187)]===_0x4828eb[_0x40352d(0x187)]);if(!_0x4074ec){_0x296862['push'](_0x4828eb);continue;}_0x4828eb[_0x40352d(0x180)]!==_0x4074ec[_0x40352d(0x162)]&&_0x386976[_0x40352d(0x195)]({'meta':_0x4074ec,'component':_0x4828eb}),_0x283779[_0x40352d(0x17f)](_0x283779['indexOf'](_0x4074ec),0x1);}return{'inserted':_0x296862,'modified':_0x386976,'removed':_0x283779};}async[a66_0x2cd7eb(0x14e)](){const _0x17b94c=a66_0x2cd7eb;this['syncRecord']=this[_0x17b94c(0x16d)]['branch']===_0x17b94c(0x191)?await this[_0x17b94c(0x15b)][_0x17b94c(0x14d)](this[_0x17b94c(0x16d)][_0x17b94c(0x16b)]):await this['salesforceSync'][_0x17b94c(0x14a)](this['gitCommit'][_0x17b94c(0x149)]),this[_0x17b94c(0x14f)]=await this['salesforceGitSync']['getComponentRecordTypes']();}async[a66_0x2cd7eb(0x167)](_0x566b99){const _0x463f2e=a66_0x2cd7eb;if(this[_0x463f2e(0x16d)]['force']||_0x566b99){this[_0x463f2e(0x179)]=this['branchId']?await this[_0x463f2e(0x156)][_0x463f2e(0x181)](this[_0x463f2e(0x172)]):await this['salesforceGitSync'][_0x463f2e(0x17c)](this[_0x463f2e(0x16c)]);return;}const _0xb0d410=[...new Set(this[_0x463f2e(0x16d)]['fileNames'][_0x463f2e(0x168)](_0x5c13c9=>_0x5c13c9['replace'](constants_1[_0x463f2e(0x176)],'')))];this[_0x463f2e(0x179)]=[];while(_0xb0d410[_0x463f2e(0x13e)]){const _0x563e01=_0xb0d410[_0x463f2e(0x17f)](0x0,this[_0x463f2e(0x154)]),_0x2a82a3=this[_0x463f2e(0x172)]?await this['salesforceGitSync'][_0x463f2e(0x190)](_0x563e01,this['branchId']):await this[_0x463f2e(0x156)]['fetchRepositoryComponentsByFilenames'](_0x563e01,this[_0x463f2e(0x16c)]);this[_0x463f2e(0x179)]['push'](..._0x2a82a3);}}async['updateStatus'](_0x207461){const _0x4f616a=a66_0x2cd7eb;this[_0x4f616a(0x172)]?await this[_0x4f616a(0x17a)][_0x4f616a(0x15f)](constants_1['FLOSUM_BRANCH'],this[_0x4f616a(0x172)],{[constants_1[_0x4f616a(0x15c)]+_0x4f616a(0x194)]:_0x207461,[constants_1['FLOSUM_NAMESPACE']+_0x4f616a(0x17e)]:Date['now']()}):await this['salesforceRest'][_0x4f616a(0x15f)](constants_1['FLOSUM_REPOSITORY'],this['repositoryId'],{[constants_1[_0x4f616a(0x15c)]+_0x4f616a(0x194)]:_0x207461});}[a66_0x2cd7eb(0x17b)](_0x2eea3f){const _0x153565=a66_0x2cd7eb;this[_0x153565(0x16d)]=_0x2eea3f;}[a66_0x2cd7eb(0x13d)](){const _0x4305b5=a66_0x2cd7eb;return this[_0x4305b5(0x14f)];}[a66_0x2cd7eb(0x188)](){const _0x31a0e9=a66_0x2cd7eb;return this[_0x31a0e9(0x16c)];}[a66_0x2cd7eb(0x148)](){const _0x18d8b1=a66_0x2cd7eb;return this[_0x18d8b1(0x172)];}};GitCommitService=__decorate([typedi_1[a66_0x2cd7eb(0x18b)]({'transient':!![]}),__metadata(a66_0x2cd7eb(0x150),[salesforce_git_sync_service_1[a66_0x2cd7eb(0x18d)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a66_0x2cd7eb(0x13f)],salesforce_service_1[a66_0x2cd7eb(0x192)]])],GitCommitService),exports[a66_0x2cd7eb(0x161)]=GitCommitService;