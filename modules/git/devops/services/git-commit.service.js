const a110_0x438ebf=a110_0x42bc;(function(_0x358acb,_0x59ddfa){const _0x825eb7=a110_0x42bc,_0x38e63d=_0x358acb();while(!![]){try{const _0x589ee4=parseInt(_0x825eb7(0x182))/0x1+parseInt(_0x825eb7(0x16f))/0x2*(-parseInt(_0x825eb7(0x15f))/0x3)+-parseInt(_0x825eb7(0x16d))/0x4*(parseInt(_0x825eb7(0x158))/0x5)+-parseInt(_0x825eb7(0x17b))/0x6+parseInt(_0x825eb7(0x1a0))/0x7+-parseInt(_0x825eb7(0x14a))/0x8+-parseInt(_0x825eb7(0x160))/0x9*(-parseInt(_0x825eb7(0x169))/0xa);if(_0x589ee4===_0x59ddfa)break;else _0x38e63d['push'](_0x38e63d['shift']());}catch(_0x57ff90){_0x38e63d['push'](_0x38e63d['shift']());}}}(a110_0x300f,0xa2ed9));const a110_0x2f9ffb=(function(){let _0x3d4d06=!![];return function(_0x100530,_0x1ace74){const _0x1040b0=_0x3d4d06?function(){const _0x2dc424=a110_0x42bc;if(_0x1ace74){const _0x59925c=_0x1ace74[_0x2dc424(0x173)](_0x100530,arguments);return _0x1ace74=null,_0x59925c;}}:function(){};return _0x3d4d06=![],_0x1040b0;};}()),a110_0x16de1a=a110_0x2f9ffb(this,function(){const _0x4c2ed5=a110_0x42bc;return a110_0x16de1a['toString']()['search']('(((.+)+)+)+$')[_0x4c2ed5(0x197)]()['constructor'](a110_0x16de1a)[_0x4c2ed5(0x183)](_0x4c2ed5(0x14c));});function a110_0x300f(){const _0x264dbf=['map','force','Last_Updated_On__c','typedi','Service','GitCommitService','syncRecord','toString','readFilesByFilename','defineProperty','lastCommit','componentsMetadata','TASKS_PER_TICK','now','SalesforceGitSyncService','repositoryGit','7392896tGFMEY','patch','../../../../constants','salesforceSync','../../parsers/utils','248912bznGok','filter','(((.+)+)+)+$','../../parsers/mdapi/factory.parser','gitCommit','salesforce','../../salesforce/services/salesforce-sync.service','filterParserPaths','META_XML_EXTENSION','Synchronization_Status__c','function','fetchComponentsMetadata','updateRemoteState','../../salesforce/services/salesforce.service','5970Wfgxns','replace','repository','fetchBranchComponents','splice','fetchRepositoryComponents','getBranchRecordByName','3iRkmAp','8466021ztaOKD','fileName','fetchRepositoryOrBranchData','branchId','object','getOwnPropertyDescriptor','name','updateStatus','salesforceGitSync','10ZcaJdB','branch','push','fetchBranchComponentsByFilenames','3624GEKQEx','getUnusedComponentsFilePaths','300372gmWumr','getRepositoryId','match','type','apply','FLOSUM_BRANCH','checkSyncStatus','FLOSUM_REPOSITORY','length','isVlocityComponent','metadata','crc','3662718hrmzKe','salesforceRest','../../parsers/utils/vlocity','setCommitDto','getRepositoryRecordByName','__esModule','decorate','544073JujBrI','search','retrieveAttachment','indexOf','__decorate','SalesforceRestService','recordTypes','([./-]{1}|$)','master','find','repositoryId','crc32','create','parse'];a110_0x300f=function(){return _0x264dbf;};return a110_0x300f();}a110_0x16de1a();'use strict';var __decorate=this&&this[a110_0x438ebf(0x186)]||function(_0x3e0fa2,_0x244193,_0x4f874d,_0x2d7fb3){const _0x1d2983=a110_0x438ebf;var _0x1a0665=arguments['length'],_0x43f10b=_0x1a0665<0x3?_0x244193:_0x2d7fb3===null?_0x2d7fb3=Object[_0x1d2983(0x165)](_0x244193,_0x4f874d):_0x2d7fb3,_0x303062;if(typeof Reflect===_0x1d2983(0x164)&&typeof Reflect[_0x1d2983(0x181)]===_0x1d2983(0x154))_0x43f10b=Reflect[_0x1d2983(0x181)](_0x3e0fa2,_0x244193,_0x4f874d,_0x2d7fb3);else{for(var _0x184657=_0x3e0fa2[_0x1d2983(0x177)]-0x1;_0x184657>=0x0;_0x184657--)if(_0x303062=_0x3e0fa2[_0x184657])_0x43f10b=(_0x1a0665<0x3?_0x303062(_0x43f10b):_0x1a0665>0x3?_0x303062(_0x244193,_0x4f874d,_0x43f10b):_0x303062(_0x244193,_0x4f874d))||_0x43f10b;}return _0x1a0665>0x3&&_0x43f10b&&Object[_0x1d2983(0x199)](_0x244193,_0x4f874d,_0x43f10b),_0x43f10b;},__metadata=this&&this['__metadata']||function(_0x3a0fec,_0x1c308f){const _0x1e6d78=a110_0x438ebf;if(typeof Reflect===_0x1e6d78(0x164)&&typeof Reflect['metadata']==='function')return Reflect[_0x1e6d78(0x179)](_0x3a0fec,_0x1c308f);};function a110_0x42bc(_0x56d0d4,_0x33a779){const _0x12fc2d=a110_0x300f();return a110_0x42bc=function(_0x16de1a,_0x2f9ffb){_0x16de1a=_0x16de1a-0x14a;let _0x300f40=_0x12fc2d[_0x16de1a];return _0x300f40;},a110_0x42bc(_0x56d0d4,_0x33a779);}Object['defineProperty'](exports,a110_0x438ebf(0x180),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a110_0x438ebf(0x1a2)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a110_0x438ebf(0x193)),salesforce_sync_service_1=require(a110_0x438ebf(0x150)),salesforce_service_1=require(a110_0x438ebf(0x157)),utils_1=require(a110_0x438ebf(0x1a4)),factory_parser_1=require(a110_0x438ebf(0x14d)),vlocity_1=require(a110_0x438ebf(0x17d));let GitCommitService=class GitCommitService{constructor(_0xa70475,_0x1b2255,_0x365aeb,_0x398122){const _0x3a65e6=a110_0x438ebf;this[_0x3a65e6(0x168)]=_0xa70475,this[_0x3a65e6(0x17c)]=_0x1b2255,this[_0x3a65e6(0x1a3)]=_0x365aeb,this[_0x3a65e6(0x14f)]=_0x398122,this['TASKS_PER_TICK']=0xc8;}get['repositoryId'](){const _0x3eb4ed=a110_0x438ebf;var _0x297300;return((_0x297300=this[_0x3eb4ed(0x196)])===null||_0x297300===void 0x0?void 0x0:_0x297300['repositoryId'])||'';}get[a110_0x438ebf(0x163)](){const _0x235985=a110_0x438ebf;var _0x55f3e7;return((_0x55f3e7=this['syncRecord'])===null||_0x55f3e7===void 0x0?void 0x0:_0x55f3e7[_0x235985(0x163)])||'';}async['createCommit'](_0x45d42f){return this['salesforceGitSync']['createCommit'](_0x45d42f,this['repositoryId']);}async[a110_0x438ebf(0x175)](_0x19f5d4){const _0x42c232=a110_0x438ebf;if(this[_0x42c232(0x196)]){const _0x1f716e=await this[_0x42c232(0x1a3)]['getRemoteStateAttachmentId'](this[_0x42c232(0x196)]),_0x3be50e=await this[_0x42c232(0x14f)][_0x42c232(0x184)](_0x1f716e)['then'](_0x4c856c=>typeof _0x4c856c==='string'?JSON[_0x42c232(0x18f)](_0x4c856c):_0x4c856c)['catch'](()=>({}));if(_0x3be50e[this['gitCommit'][_0x42c232(0x19f)]]){if(_0x3be50e[this[_0x42c232(0x14e)]['repositoryGit']][_0x42c232(0x19a)]===_0x19f5d4)return!![];}return![];}return![];}async[a110_0x438ebf(0x156)](_0x17e607){const _0x227a88=a110_0x438ebf;this['syncRecord']&&await this['salesforceSync'][_0x227a88(0x156)](this[_0x227a88(0x196)],_0x17e607);}[a110_0x438ebf(0x16e)](){const _0x2a424a=a110_0x438ebf;return this[_0x2a424a(0x19b)][_0x2a424a(0x190)](({fileName:_0x329f93})=>_0x329f93);}async['proceedFile'](_0x87debc,_0x18d87,_0x2d0dcc){const _0x1d0fee=a110_0x438ebf,_0x13e7aa=new RegExp('^'+_0x87debc+_0x1d0fee(0x189));let _0x216265=[_0x87debc];_0x2d0dcc&&!(0x0,vlocity_1[_0x1d0fee(0x178)])(_0x87debc)&&(_0x216265=(0x0,utils_1[_0x1d0fee(0x151)])(await(0x0,utils_1[_0x1d0fee(0x198)])(_0x87debc,_0x18d87)['catch'](()=>[])));const _0xe9a71d=_0x2d0dcc?this['componentsMetadata'][_0x1d0fee(0x14b)](_0x503526=>_0x503526[_0x1d0fee(0x161)][_0x1d0fee(0x171)](_0x13e7aa)):this['componentsMetadata'][_0x1d0fee(0x14b)](_0xfba859=>_0xfba859['fileName']===_0x87debc||_0xfba859[_0x1d0fee(0x161)]===_0x87debc[_0x1d0fee(0x159)](constants_1[_0x1d0fee(0x152)],'')),_0x288c1d=factory_parser_1['FactoryParser'][_0x1d0fee(0x18e)](_0x18d87,_0x216265),_0x4e5631=await _0x288c1d[_0x1d0fee(0x18f)](),_0x97076f=[],_0x3c1b20=[];for(const _0x1ebdd1 of _0x4e5631){const _0x3c0c53=_0xe9a71d[_0x1d0fee(0x18b)](_0x3776f4=>_0x3776f4[_0x1d0fee(0x166)]===_0x1ebdd1['name']&&_0x3776f4['type']===_0x1ebdd1[_0x1d0fee(0x172)]);if(!_0x3c0c53){_0x97076f[_0x1d0fee(0x16b)](_0x1ebdd1);continue;}_0x1ebdd1[_0x1d0fee(0x17a)]!==_0x3c0c53[_0x1d0fee(0x18d)]&&_0x3c1b20[_0x1d0fee(0x16b)]({'meta':_0x3c0c53,'component':_0x1ebdd1}),_0xe9a71d['splice'](_0xe9a71d[_0x1d0fee(0x185)](_0x3c0c53),0x1);}return{'inserted':_0x97076f,'modified':_0x3c1b20,'removed':_0xe9a71d};}async[a110_0x438ebf(0x162)](){const _0x460aa6=a110_0x438ebf;this[_0x460aa6(0x196)]=this['gitCommit'][_0x460aa6(0x16a)]===_0x460aa6(0x18a)?await this[_0x460aa6(0x1a3)][_0x460aa6(0x17f)](this[_0x460aa6(0x14e)][_0x460aa6(0x15a)]):await this[_0x460aa6(0x1a3)][_0x460aa6(0x15e)](this[_0x460aa6(0x14e)][_0x460aa6(0x16a)]),this[_0x460aa6(0x188)]=await this[_0x460aa6(0x168)]['getComponentRecordTypes']();}async[a110_0x438ebf(0x155)](_0x5b278a){const _0x11d20d=a110_0x438ebf;if(this['gitCommit'][_0x11d20d(0x191)]||_0x5b278a){this[_0x11d20d(0x19b)]=this[_0x11d20d(0x163)]?await this['salesforceGitSync'][_0x11d20d(0x15b)](this[_0x11d20d(0x163)]):await this[_0x11d20d(0x168)][_0x11d20d(0x15d)](this[_0x11d20d(0x18c)]);return;}const _0x460393=[...new Set(this['gitCommit']['fileNames'][_0x11d20d(0x190)](_0x3f1eb5=>_0x3f1eb5[_0x11d20d(0x159)](constants_1[_0x11d20d(0x152)],'')))];this['componentsMetadata']=[];while(_0x460393[_0x11d20d(0x177)]){const _0x1b3760=_0x460393[_0x11d20d(0x15c)](0x0,this[_0x11d20d(0x19c)]),_0x208136=this[_0x11d20d(0x163)]?await this[_0x11d20d(0x168)][_0x11d20d(0x16c)](_0x1b3760,this['branchId']):await this[_0x11d20d(0x168)]['fetchRepositoryComponentsByFilenames'](_0x1b3760,this['repositoryId']);this[_0x11d20d(0x19b)][_0x11d20d(0x16b)](..._0x208136);}}async[a110_0x438ebf(0x167)](_0x42d899){const _0x486a13=a110_0x438ebf;this[_0x486a13(0x163)]?await this['salesforceRest'][_0x486a13(0x1a1)](constants_1[_0x486a13(0x174)],this[_0x486a13(0x163)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x486a13(0x153)]:_0x42d899,[constants_1['FLOSUM_NAMESPACE']+_0x486a13(0x192)]:Date[_0x486a13(0x19d)]()}):await this[_0x486a13(0x17c)][_0x486a13(0x1a1)](constants_1[_0x486a13(0x176)],this[_0x486a13(0x18c)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x486a13(0x153)]:_0x42d899});}[a110_0x438ebf(0x17e)](_0x1aaa89){const _0x4bd7b8=a110_0x438ebf;this[_0x4bd7b8(0x14e)]=_0x1aaa89;}['getRecordTypes'](){const _0x23f11c=a110_0x438ebf;return this[_0x23f11c(0x188)];}[a110_0x438ebf(0x170)](){const _0xbe7914=a110_0x438ebf;return this[_0xbe7914(0x18c)];}['getBranchId'](){const _0x465cfd=a110_0x438ebf;return this[_0x465cfd(0x163)];}};GitCommitService=__decorate([(0x0,typedi_1[a110_0x438ebf(0x194)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a110_0x438ebf(0x19e)],salesforce_rest_service_1[a110_0x438ebf(0x187)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a110_0x438ebf(0x195)]=GitCommitService;