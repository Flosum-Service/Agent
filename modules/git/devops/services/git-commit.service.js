const a110_0x59d04f=a110_0xcc52;(function(_0x420902,_0x44a824){const _0x341b4c=a110_0xcc52,_0x17450a=_0x420902();while(!![]){try{const _0x145714=parseInt(_0x341b4c(0x110))/0x1+parseInt(_0x341b4c(0x12d))/0x2+-parseInt(_0x341b4c(0x115))/0x3*(-parseInt(_0x341b4c(0x10a))/0x4)+-parseInt(_0x341b4c(0xe9))/0x5*(parseInt(_0x341b4c(0xf3))/0x6)+parseInt(_0x341b4c(0x117))/0x7+parseInt(_0x341b4c(0x113))/0x8+-parseInt(_0x341b4c(0x10b))/0x9;if(_0x145714===_0x44a824)break;else _0x17450a['push'](_0x17450a['shift']());}catch(_0x24fae6){_0x17450a['push'](_0x17450a['shift']());}}}(a110_0x35d9,0x8c882));const a110_0x495d7e=(function(){let _0x2f6958=!![];return function(_0x3d1288,_0x377d7d){const _0x3b64d0=_0x2f6958?function(){const _0x2ef5b7=a110_0xcc52;if(_0x377d7d){const _0x33e7bf=_0x377d7d[_0x2ef5b7(0x11e)](_0x3d1288,arguments);return _0x377d7d=null,_0x33e7bf;}}:function(){};return _0x2f6958=![],_0x3b64d0;};}()),a110_0x520476=a110_0x495d7e(this,function(){const _0x35cb5b=a110_0xcc52;return a110_0x520476[_0x35cb5b(0xe2)]()[_0x35cb5b(0xfd)]('(((.+)+)+)+$')[_0x35cb5b(0xe2)]()['constructor'](a110_0x520476)['search'](_0x35cb5b(0xed));});a110_0x520476();'use strict';function a110_0xcc52(_0x52ac2,_0x18aa70){const _0x32cdb0=a110_0x35d9();return a110_0xcc52=function(_0x520476,_0x495d7e){_0x520476=_0x520476-0xe2;let _0x35d922=_0x32cdb0[_0x520476];return _0x35d922;},a110_0xcc52(_0x52ac2,_0x18aa70);}var __decorate=this&&this['__decorate']||function(_0x5eaa4e,_0x5342b6,_0x577d59,_0x489768){const _0x29d6a5=a110_0xcc52;var _0x3470ce=arguments['length'],_0x1e106e=_0x3470ce<0x3?_0x5342b6:_0x489768===null?_0x489768=Object[_0x29d6a5(0xf5)](_0x5342b6,_0x577d59):_0x489768,_0x36ff53;if(typeof Reflect===_0x29d6a5(0xf2)&&typeof Reflect[_0x29d6a5(0xfc)]===_0x29d6a5(0x12a))_0x1e106e=Reflect[_0x29d6a5(0xfc)](_0x5eaa4e,_0x5342b6,_0x577d59,_0x489768);else{for(var _0x2f4752=_0x5eaa4e[_0x29d6a5(0x120)]-0x1;_0x2f4752>=0x0;_0x2f4752--)if(_0x36ff53=_0x5eaa4e[_0x2f4752])_0x1e106e=(_0x3470ce<0x3?_0x36ff53(_0x1e106e):_0x3470ce>0x3?_0x36ff53(_0x5342b6,_0x577d59,_0x1e106e):_0x36ff53(_0x5342b6,_0x577d59))||_0x1e106e;}return _0x3470ce>0x3&&_0x1e106e&&Object[_0x29d6a5(0xe6)](_0x5342b6,_0x577d59,_0x1e106e),_0x1e106e;},__metadata=this&&this['__metadata']||function(_0x471da3,_0x59d8a9){const _0x4b856a=a110_0xcc52;if(typeof Reflect==='object'&&typeof Reflect[_0x4b856a(0x131)]===_0x4b856a(0x12a))return Reflect[_0x4b856a(0x131)](_0x471da3,_0x59d8a9);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a110_0x59d04f(0x106)]=void 0x0;function a110_0x35d9(){const _0xb5e83=['salesforce','SalesforceGitSyncService','5oikEHn','filter','SalesforceSyncService','Service','(((.+)+)+)+$','retrieveAttachment','../../salesforce/services/salesforce-rest.service','catch','updateRemoteState','object','184986WcBafl','parse','getOwnPropertyDescriptor','lastCommit','fetchRepositoryComponentsByFilenames','fetchRepositoryOrBranchData','push','getComponentRecordTypes','componentsMetadata','decorate','search','then','getRepositoryId','fileNames','Synchronization_Status__c','fetchComponentsMetadata','FLOSUM_BRANCH','crc','repositoryId','GitCommitService','patch','master','branch','1620hXwzNU','21198555uLmrTp','FLOSUM_REPOSITORY','name','Last_Updated_On__c','../../parsers/utils','323587Eeqgph','splice','type','4035480tByHLF','setCommitDto','8049kDTKpC','createCommit','711417zQSYLg','../../../../constants','branchId','salesforceGitSync','replace','fileName','SalesforceService','apply','salesforceSync','length','indexOf','../../salesforce/services/salesforce-git-sync.service','syncRecord','typedi','updateStatus','crc32','FLOSUM_GIT_NAMESPACE','force','design:paramtypes','function','match','SalesforceRestService','1891152vWTEjP','META_XML_EXTENSION','getBranchRecordByName','getUnusedComponentsFilePaths','metadata','gitCommit','map','salesforceRest','toString','repositoryGit','string','recordTypes','defineProperty'];a110_0x35d9=function(){return _0xb5e83;};return a110_0x35d9();}const constants_1=require(a110_0x59d04f(0x118)),salesforce_git_sync_service_1=require(a110_0x59d04f(0x122)),salesforce_rest_service_1=require(a110_0x59d04f(0xef)),typedi_1=require(a110_0x59d04f(0x124)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require(a110_0x59d04f(0x10f));let GitCommitService=class GitCommitService{constructor(_0x4fd296,_0x550665,_0x305de7,_0x3d9144){const _0x4c584d=a110_0x59d04f;this[_0x4c584d(0x11a)]=_0x4fd296,this['salesforceRest']=_0x550665,this[_0x4c584d(0x11f)]=_0x305de7,this[_0x4c584d(0xe7)]=_0x3d9144,this['TASKS_PER_TICK']=0xc8;}get[a110_0x59d04f(0x105)](){var _0x1e6c25;return((_0x1e6c25=this['syncRecord'])===null||_0x1e6c25===void 0x0?void 0x0:_0x1e6c25['repositoryId'])||'';}get['branchId'](){const _0x5eeef9=a110_0x59d04f;var _0xd454f2;return((_0xd454f2=this[_0x5eeef9(0x123)])===null||_0xd454f2===void 0x0?void 0x0:_0xd454f2[_0x5eeef9(0x119)])||'';}async[a110_0x59d04f(0x116)](_0x82d2c){const _0x2b82f9=a110_0x59d04f;return this[_0x2b82f9(0x11a)][_0x2b82f9(0x116)](_0x82d2c,this[_0x2b82f9(0x105)]);}async['checkSyncStatus'](_0x56e853){const _0x5e29b9=a110_0x59d04f;if(this['syncRecord']){const _0x167c05=await this[_0x5e29b9(0x11f)]['getRemoteStateAttachmentId'](this[_0x5e29b9(0x123)]),_0x5685cc=await this[_0x5e29b9(0xe7)][_0x5e29b9(0xee)](_0x167c05)[_0x5e29b9(0xfe)](_0x6ecd28=>typeof _0x6ecd28===_0x5e29b9(0xe4)?JSON[_0x5e29b9(0xf4)](_0x6ecd28):_0x6ecd28)[_0x5e29b9(0xf0)](()=>({}));if(_0x5685cc[this[_0x5e29b9(0x132)][_0x5e29b9(0xe3)]]){if(_0x5685cc[this[_0x5e29b9(0x132)][_0x5e29b9(0xe3)]][_0x5e29b9(0xf6)]===_0x56e853)return!![];}return![];}return![];}async[a110_0x59d04f(0xf1)](_0x4da6c9){const _0xc035fa=a110_0x59d04f;this['syncRecord']&&await this['salesforceSync'][_0xc035fa(0xf1)](this[_0xc035fa(0x123)],_0x4da6c9);}[a110_0x59d04f(0x130)](){const _0x319070=a110_0x59d04f;return this[_0x319070(0xfb)]['map'](({fileName:_0x56acf6})=>_0x56acf6);}async['proceedFile'](_0x5591c2,_0x3ae1ad,_0xa7ec35){const _0x14153b=a110_0x59d04f,_0x28659d=new RegExp('^'+_0x5591c2+'([./-]{1}|$)');let _0x5c2a54=[_0x5591c2];_0xa7ec35&&(_0x5c2a54=(0x0,utils_1['filterParserPaths'])(await(0x0,utils_1['readFilesByFilename'])(_0x5591c2,_0x3ae1ad)['catch'](()=>[])));const _0x305b37=_0xa7ec35?this[_0x14153b(0xfb)][_0x14153b(0xea)](_0x422c72=>_0x422c72[_0x14153b(0x11c)][_0x14153b(0x12b)](_0x28659d)):this[_0x14153b(0xfb)][_0x14153b(0xea)](_0x1a1d70=>_0x1a1d70[_0x14153b(0x11c)]===_0x5591c2||_0x1a1d70[_0x14153b(0x11c)]===_0x5591c2[_0x14153b(0x11b)](constants_1[_0x14153b(0x12e)],'')),_0xbeaf5f=new parser_v2_1['MDApiParserV2'](_0x3ae1ad,_0x5c2a54),_0x857ed6=await _0xbeaf5f[_0x14153b(0xf4)](),_0x588457=[],_0x188b39=[];for(const _0x19947a of _0x857ed6){const _0x418317=_0x305b37['find'](_0x4b7166=>_0x4b7166[_0x14153b(0x10d)]===_0x19947a[_0x14153b(0x10d)]&&_0x4b7166['type']===_0x19947a[_0x14153b(0x112)]);if(!_0x418317){_0x588457[_0x14153b(0xf9)](_0x19947a);continue;}_0x19947a[_0x14153b(0x104)]!==_0x418317[_0x14153b(0x126)]&&_0x188b39['push']({'meta':_0x418317,'component':_0x19947a}),_0x305b37[_0x14153b(0x111)](_0x305b37[_0x14153b(0x121)](_0x418317),0x1);}return{'inserted':_0x588457,'modified':_0x188b39,'removed':_0x305b37};}async[a110_0x59d04f(0xf8)](){const _0x434e19=a110_0x59d04f;this[_0x434e19(0x123)]=this[_0x434e19(0x132)][_0x434e19(0x109)]===_0x434e19(0x108)?await this['salesforceSync']['getRepositoryRecordByName'](this[_0x434e19(0x132)]['repository']):await this[_0x434e19(0x11f)][_0x434e19(0x12f)](this['gitCommit'][_0x434e19(0x109)]),this[_0x434e19(0xe5)]=await this[_0x434e19(0x11a)][_0x434e19(0xfa)]();}async[a110_0x59d04f(0x102)](_0x5df991){const _0x42ecc9=a110_0x59d04f;if(this[_0x42ecc9(0x132)][_0x42ecc9(0x128)]||_0x5df991){this['componentsMetadata']=this[_0x42ecc9(0x119)]?await this[_0x42ecc9(0x11a)]['fetchBranchComponents'](this[_0x42ecc9(0x119)]):await this[_0x42ecc9(0x11a)]['fetchRepositoryComponents'](this[_0x42ecc9(0x105)]);return;}const _0x1ed59e=[...new Set(this[_0x42ecc9(0x132)][_0x42ecc9(0x100)][_0x42ecc9(0x133)](_0x3f7ec4=>_0x3f7ec4[_0x42ecc9(0x11b)](constants_1[_0x42ecc9(0x12e)],'')))];this[_0x42ecc9(0xfb)]=[];while(_0x1ed59e[_0x42ecc9(0x120)]){const _0x4d723c=_0x1ed59e[_0x42ecc9(0x111)](0x0,this['TASKS_PER_TICK']),_0xf9c682=this[_0x42ecc9(0x119)]?await this[_0x42ecc9(0x11a)]['fetchBranchComponentsByFilenames'](_0x4d723c,this[_0x42ecc9(0x119)]):await this['salesforceGitSync'][_0x42ecc9(0xf7)](_0x4d723c,this[_0x42ecc9(0x105)]);this[_0x42ecc9(0xfb)][_0x42ecc9(0xf9)](..._0xf9c682);}}async[a110_0x59d04f(0x125)](_0x10358d){const _0x47b908=a110_0x59d04f;this[_0x47b908(0x119)]?await this[_0x47b908(0x134)][_0x47b908(0x107)](constants_1[_0x47b908(0x103)],this[_0x47b908(0x119)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x47b908(0x101)]:_0x10358d,[constants_1['FLOSUM_NAMESPACE']+_0x47b908(0x10e)]:Date['now']()}):await this[_0x47b908(0x134)][_0x47b908(0x107)](constants_1[_0x47b908(0x10c)],this[_0x47b908(0x105)],{[constants_1[_0x47b908(0x127)]+_0x47b908(0x101)]:_0x10358d});}[a110_0x59d04f(0x114)](_0xe5c9e6){const _0x1dfe18=a110_0x59d04f;this[_0x1dfe18(0x132)]=_0xe5c9e6;}['getRecordTypes'](){return this['recordTypes'];}[a110_0x59d04f(0xff)](){const _0x5654d8=a110_0x59d04f;return this[_0x5654d8(0x105)];}['getBranchId'](){const _0x17ee48=a110_0x59d04f;return this[_0x17ee48(0x119)];}};GitCommitService=__decorate([(0x0,typedi_1[a110_0x59d04f(0xec)])({'transient':!![]}),__metadata(a110_0x59d04f(0x129),[salesforce_git_sync_service_1[a110_0x59d04f(0xe8)],salesforce_rest_service_1[a110_0x59d04f(0x12c)],salesforce_sync_service_1[a110_0x59d04f(0xeb)],salesforce_service_1[a110_0x59d04f(0x11d)]])],GitCommitService),exports['GitCommitService']=GitCommitService;