const a66_0x46eece=a66_0x4292;function a66_0x47a5(){const _0x38ba5b=['componentsMetadata','object','repositoryId','84681iQzKZW','replace','fileNames','__esModule','repositoryGit','../../salesforce/services/salesforce-sync.service','148muPYHc','MDApiParserV2','SalesforceGitSyncService','metadata','gitCommit','FLOSUM_BRANCH','indexOf','search','fileName','lastCommit','updateRemoteState','getOwnPropertyDescriptor','fetchBranchComponents','salesforceGitSync','catch','getRepositoryId','FLOSUM_NAMESPACE','salesforce','1819680BuIYFy','readFilesByFilename','design:paramtypes','createCommit','function','FLOSUM_REPOSITORY','crc32','force','typedi','apply','filter','fetchComponentsMetadata','6238870gaSOSE','Service','parse','length','GitCommitService','getRepositoryRecordByName','6SrlfJO','../../salesforce/services/salesforce-rest.service','__metadata','string','filterParserPaths','30HMivgm','type','name','salesforceRest','defineProperty','../../salesforce/services/salesforce.service','FLOSUM_GIT_NAMESPACE','24gKFTuN','../../salesforce/services/salesforce-git-sync.service','branchId','SalesforceSyncService','splice','repository','getComponentRecordTypes','2363910hnpPeY','branch','recordTypes','updateStatus','map','getRecordTypes','(((.+)+)+)+$','decorate','patch','2289413ArOYxb','match','syncRecord','fetchRepositoryComponents','24783SvGNTn','SalesforceService','master','getUnusedComponentsFilePaths','push','TASKS_PER_TICK','Synchronization_Status__c','salesforceSync','([./-]{1}|$)','toString','Last_Updated_On__c','40089qXrTfK'];a66_0x47a5=function(){return _0x38ba5b;};return a66_0x47a5();}(function(_0x12762a,_0x1f874b){const _0x1f0c46=a66_0x4292,_0x28d0eb=_0x12762a();while(!![]){try{const _0x3c02a7=-parseInt(_0x1f0c46(0x144))/0x1*(parseInt(_0x1f0c46(0x125))/0x2)+-parseInt(_0x1f0c46(0x139))/0x3*(-parseInt(_0x1f0c46(0x14e))/0x4)+parseInt(_0x1f0c46(0x12c))/0x5+parseInt(_0x1f0c46(0x119))/0x6*(parseInt(_0x1f0c46(0x135))/0x7)+parseInt(_0x1f0c46(0x107))/0x8+-parseInt(_0x1f0c46(0x148))/0x9*(parseInt(_0x1f0c46(0x11e))/0xa)+-parseInt(_0x1f0c46(0x113))/0xb;if(_0x3c02a7===_0x1f874b)break;else _0x28d0eb['push'](_0x28d0eb['shift']());}catch(_0x5d772f){_0x28d0eb['push'](_0x28d0eb['shift']());}}}(a66_0x47a5,0x3e9ed));const a66_0x14dc69=(function(){let _0x5aebca=!![];return function(_0x3d15f3,_0x52b4e5){const _0x3ccfb8=_0x5aebca?function(){const _0x5eb261=a66_0x4292;if(_0x52b4e5){const _0x3f9577=_0x52b4e5[_0x5eb261(0x110)](_0x3d15f3,arguments);return _0x52b4e5=null,_0x3f9577;}}:function(){};return _0x5aebca=![],_0x3ccfb8;};}()),a66_0x33f4cc=a66_0x14dc69(this,function(){const _0x1eff18=a66_0x4292;return a66_0x33f4cc[_0x1eff18(0x142)]()[_0x1eff18(0x155)](_0x1eff18(0x132))[_0x1eff18(0x142)]()['constructor'](a66_0x33f4cc)[_0x1eff18(0x155)]('(((.+)+)+)+$');});a66_0x33f4cc();'use strict';var __decorate=this&&this['__decorate']||function(_0x1acdcd,_0x46c0e8,_0x46042c,_0x15e74b){const _0xee2d80=a66_0x4292;var _0x52523a=arguments['length'],_0x59e447=_0x52523a<0x3?_0x46c0e8:_0x15e74b===null?_0x15e74b=Object[_0xee2d80(0x159)](_0x46c0e8,_0x46042c):_0x15e74b,_0x26afaa;if(typeof Reflect===_0xee2d80(0x146)&&typeof Reflect[_0xee2d80(0x133)]===_0xee2d80(0x10b))_0x59e447=Reflect['decorate'](_0x1acdcd,_0x46c0e8,_0x46042c,_0x15e74b);else{for(var _0x8cb8b5=_0x1acdcd[_0xee2d80(0x116)]-0x1;_0x8cb8b5>=0x0;_0x8cb8b5--)if(_0x26afaa=_0x1acdcd[_0x8cb8b5])_0x59e447=(_0x52523a<0x3?_0x26afaa(_0x59e447):_0x52523a>0x3?_0x26afaa(_0x46c0e8,_0x46042c,_0x59e447):_0x26afaa(_0x46c0e8,_0x46042c))||_0x59e447;}return _0x52523a>0x3&&_0x59e447&&Object[_0xee2d80(0x122)](_0x46c0e8,_0x46042c,_0x59e447),_0x59e447;},__metadata=this&&this[a66_0x46eece(0x11b)]||function(_0x55ef98,_0x48042e){const _0x343008=a66_0x46eece;if(typeof Reflect==='object'&&typeof Reflect[_0x343008(0x151)]===_0x343008(0x10b))return Reflect[_0x343008(0x151)](_0x55ef98,_0x48042e);};function a66_0x4292(_0x5618be,_0x1d840c){const _0x3dd682=a66_0x47a5();return a66_0x4292=function(_0x33f4cc,_0x14dc69){_0x33f4cc=_0x33f4cc-0x107;let _0x47a5e3=_0x3dd682[_0x33f4cc];return _0x47a5e3;},a66_0x4292(_0x5618be,_0x1d840c);}Object[a66_0x46eece(0x122)](exports,a66_0x46eece(0x14b),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a66_0x46eece(0x126)),salesforce_rest_service_1=require(a66_0x46eece(0x11a)),typedi_1=require(a66_0x46eece(0x10f)),salesforce_sync_service_1=require(a66_0x46eece(0x14d)),salesforce_service_1=require(a66_0x46eece(0x123)),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require('../../parsers/utils');let GitCommitService=class GitCommitService{constructor(_0xe8bbce,_0x55acde,_0x4b1b89,_0x1dc1e0){const _0x5935f0=a66_0x46eece;this[_0x5935f0(0x15b)]=_0xe8bbce,this[_0x5935f0(0x121)]=_0x55acde,this[_0x5935f0(0x140)]=_0x4b1b89,this[_0x5935f0(0x15f)]=_0x1dc1e0,this[_0x5935f0(0x13e)]=0xc8;}get[a66_0x46eece(0x147)](){const _0x44550c=a66_0x46eece;var _0x412467;return((_0x412467=this['syncRecord'])===null||_0x412467===void 0x0?void 0x0:_0x412467[_0x44550c(0x147)])||'';}get[a66_0x46eece(0x127)](){const _0x36e0ee=a66_0x46eece;var _0x243071;return((_0x243071=this[_0x36e0ee(0x137)])===null||_0x243071===void 0x0?void 0x0:_0x243071[_0x36e0ee(0x127)])||'';}async[a66_0x46eece(0x10a)](_0x1dfdce){const _0x38a014=a66_0x46eece;return this[_0x38a014(0x15b)][_0x38a014(0x10a)](_0x1dfdce,this[_0x38a014(0x147)]);}async['checkSyncStatus'](_0x278672){const _0xa5a427=a66_0x46eece;if(this[_0xa5a427(0x137)]){const _0x1df720=await this[_0xa5a427(0x140)]['getRemoteStateAttachmentId'](this[_0xa5a427(0x137)]),_0x2e0f5b=await this[_0xa5a427(0x15f)]['retrieveAttachment'](_0x1df720)['then'](_0x4ae168=>typeof _0x4ae168===_0xa5a427(0x11c)?JSON[_0xa5a427(0x115)](_0x4ae168):_0x4ae168)[_0xa5a427(0x15c)](()=>({}));if(_0x2e0f5b[this[_0xa5a427(0x152)][_0xa5a427(0x14c)]]){if(_0x2e0f5b[this[_0xa5a427(0x152)][_0xa5a427(0x14c)]][_0xa5a427(0x157)]===_0x278672)return!![];}return![];}return![];}async[a66_0x46eece(0x158)](_0x2492f1){const _0x6f1e1e=a66_0x46eece;this[_0x6f1e1e(0x137)]&&await this['salesforceSync'][_0x6f1e1e(0x158)](this['syncRecord'],_0x2492f1);}[a66_0x46eece(0x13c)](){return this['componentsMetadata']['map'](({fileName:_0x1984e2})=>_0x1984e2);}async['proceedFile'](_0x21065c,_0x5c603c,_0x157516){const _0x411a49=a66_0x46eece,_0x84165=new RegExp('^'+_0x21065c+_0x411a49(0x141));let _0x409af3=[_0x21065c];_0x157516&&(_0x409af3=utils_1[_0x411a49(0x11d)](await utils_1[_0x411a49(0x108)](_0x21065c,_0x5c603c)[_0x411a49(0x15c)](()=>[])));const _0x493531=_0x157516?this[_0x411a49(0x145)][_0x411a49(0x111)](_0x52c214=>_0x52c214[_0x411a49(0x156)][_0x411a49(0x136)](_0x84165)):this[_0x411a49(0x145)][_0x411a49(0x111)](_0x15a436=>_0x15a436[_0x411a49(0x156)]===_0x21065c||_0x15a436[_0x411a49(0x156)]===_0x21065c[_0x411a49(0x149)](constants_1['META_XML_EXTENSION'],'')),_0x37fe53=new parser_v2_1[(_0x411a49(0x14f))](_0x5c603c,_0x409af3),_0x1b5c40=await _0x37fe53[_0x411a49(0x115)](),_0x7875fd=[],_0x47621f=[];for(const _0x3044ae of _0x1b5c40){const _0x1ea625=_0x493531['find'](_0x3822d4=>_0x3822d4[_0x411a49(0x120)]===_0x3044ae[_0x411a49(0x120)]&&_0x3822d4[_0x411a49(0x11f)]===_0x3044ae[_0x411a49(0x11f)]);if(!_0x1ea625){_0x7875fd[_0x411a49(0x13d)](_0x3044ae);continue;}_0x3044ae['crc']!==_0x1ea625[_0x411a49(0x10d)]&&_0x47621f[_0x411a49(0x13d)]({'meta':_0x1ea625,'component':_0x3044ae}),_0x493531['splice'](_0x493531[_0x411a49(0x154)](_0x1ea625),0x1);}return{'inserted':_0x7875fd,'modified':_0x47621f,'removed':_0x493531};}async['fetchRepositoryOrBranchData'](){const _0x3e863d=a66_0x46eece;this[_0x3e863d(0x137)]=this['gitCommit'][_0x3e863d(0x12d)]===_0x3e863d(0x13b)?await this[_0x3e863d(0x140)][_0x3e863d(0x118)](this[_0x3e863d(0x152)][_0x3e863d(0x12a)]):await this[_0x3e863d(0x140)]['getBranchRecordByName'](this[_0x3e863d(0x152)][_0x3e863d(0x12d)]),this['recordTypes']=await this[_0x3e863d(0x15b)][_0x3e863d(0x12b)]();}async[a66_0x46eece(0x112)](_0x124a3e){const _0x4cfdb6=a66_0x46eece;if(this['gitCommit'][_0x4cfdb6(0x10e)]||_0x124a3e){this[_0x4cfdb6(0x145)]=this[_0x4cfdb6(0x127)]?await this[_0x4cfdb6(0x15b)][_0x4cfdb6(0x15a)](this[_0x4cfdb6(0x127)]):await this[_0x4cfdb6(0x15b)][_0x4cfdb6(0x138)](this[_0x4cfdb6(0x147)]);return;}const _0xbf4464=[...new Set(this[_0x4cfdb6(0x152)][_0x4cfdb6(0x14a)][_0x4cfdb6(0x130)](_0x4f4bd7=>_0x4f4bd7[_0x4cfdb6(0x149)](constants_1['META_XML_EXTENSION'],'')))];this[_0x4cfdb6(0x145)]=[];while(_0xbf4464['length']){const _0x1f9ac4=_0xbf4464[_0x4cfdb6(0x129)](0x0,this['TASKS_PER_TICK']),_0x9e8264=this[_0x4cfdb6(0x127)]?await this['salesforceGitSync']['fetchBranchComponentsByFilenames'](_0x1f9ac4,this[_0x4cfdb6(0x127)]):await this[_0x4cfdb6(0x15b)]['fetchRepositoryComponentsByFilenames'](_0x1f9ac4,this[_0x4cfdb6(0x147)]);this['componentsMetadata'][_0x4cfdb6(0x13d)](..._0x9e8264);}}async[a66_0x46eece(0x12f)](_0x49e950){const _0x3c5189=a66_0x46eece;this[_0x3c5189(0x127)]?await this[_0x3c5189(0x121)][_0x3c5189(0x134)](constants_1[_0x3c5189(0x153)],this[_0x3c5189(0x127)],{[constants_1[_0x3c5189(0x124)]+_0x3c5189(0x13f)]:_0x49e950,[constants_1[_0x3c5189(0x15e)]+_0x3c5189(0x143)]:Date['now']()}):await this['salesforceRest'][_0x3c5189(0x134)](constants_1[_0x3c5189(0x10c)],this[_0x3c5189(0x147)],{[constants_1[_0x3c5189(0x124)]+_0x3c5189(0x13f)]:_0x49e950});}['setCommitDto'](_0x56b528){this['gitCommit']=_0x56b528;}[a66_0x46eece(0x131)](){const _0xfbe765=a66_0x46eece;return this[_0xfbe765(0x12e)];}[a66_0x46eece(0x15d)](){return this['repositoryId'];}['getBranchId'](){const _0xe919e4=a66_0x46eece;return this[_0xe919e4(0x127)];}};GitCommitService=__decorate([typedi_1[a66_0x46eece(0x114)]({'transient':!![]}),__metadata(a66_0x46eece(0x109),[salesforce_git_sync_service_1[a66_0x46eece(0x150)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a66_0x46eece(0x128)],salesforce_service_1[a66_0x46eece(0x13a)]])],GitCommitService),exports[a66_0x46eece(0x117)]=GitCommitService;