const a79_0x456ed6=a79_0x2f31;(function(_0x1b6a8d,_0x109d5e){const _0xd30ee9=a79_0x2f31,_0x28f5d1=_0x1b6a8d();while(!![]){try{const _0x292f0e=parseInt(_0xd30ee9(0x151))/0x1*(-parseInt(_0xd30ee9(0x164))/0x2)+-parseInt(_0xd30ee9(0x135))/0x3*(parseInt(_0xd30ee9(0x168))/0x4)+parseInt(_0xd30ee9(0x13a))/0x5+parseInt(_0xd30ee9(0x126))/0x6*(-parseInt(_0xd30ee9(0x127))/0x7)+-parseInt(_0xd30ee9(0x14a))/0x8+parseInt(_0xd30ee9(0x145))/0x9+parseInt(_0xd30ee9(0x171))/0xa;if(_0x292f0e===_0x109d5e)break;else _0x28f5d1['push'](_0x28f5d1['shift']());}catch(_0x2ce0e7){_0x28f5d1['push'](_0x28f5d1['shift']());}}}(a79_0x22bd,0x5c8c9));const a79_0x578dad=(function(){let _0x502bb0=!![];return function(_0x1aad01,_0x4867c3){const _0x530d03=_0x502bb0?function(){const _0x44586f=a79_0x2f31;if(_0x4867c3){const _0x9b7185=_0x4867c3[_0x44586f(0x16e)](_0x1aad01,arguments);return _0x4867c3=null,_0x9b7185;}}:function(){};return _0x502bb0=![],_0x530d03;};}()),a79_0x3ec30b=a79_0x578dad(this,function(){const _0x3d421c=a79_0x2f31;return a79_0x3ec30b[_0x3d421c(0x134)]()[_0x3d421c(0x140)]('(((.+)+)+)+$')[_0x3d421c(0x134)]()[_0x3d421c(0x157)](a79_0x3ec30b)[_0x3d421c(0x140)](_0x3d421c(0x132));});function a79_0x2f31(_0x3386fd,_0x5200d8){const _0x105c01=a79_0x22bd();return a79_0x2f31=function(_0x3ec30b,_0x578dad){_0x3ec30b=_0x3ec30b-0x118;let _0x22bd68=_0x105c01[_0x3ec30b];return _0x22bd68;},a79_0x2f31(_0x3386fd,_0x5200d8);}a79_0x3ec30b();'use strict';var __decorate=this&&this[a79_0x456ed6(0x138)]||function(_0x15d941,_0x33962b,_0x4a3492,_0x3176a2){const _0x707cdb=a79_0x456ed6;var _0x40ac71=arguments[_0x707cdb(0x150)],_0x252bfa=_0x40ac71<0x3?_0x33962b:_0x3176a2===null?_0x3176a2=Object['getOwnPropertyDescriptor'](_0x33962b,_0x4a3492):_0x3176a2,_0x28595e;if(typeof Reflect===_0x707cdb(0x12c)&&typeof Reflect['decorate']===_0x707cdb(0x154))_0x252bfa=Reflect[_0x707cdb(0x159)](_0x15d941,_0x33962b,_0x4a3492,_0x3176a2);else{for(var _0x20a9a9=_0x15d941['length']-0x1;_0x20a9a9>=0x0;_0x20a9a9--)if(_0x28595e=_0x15d941[_0x20a9a9])_0x252bfa=(_0x40ac71<0x3?_0x28595e(_0x252bfa):_0x40ac71>0x3?_0x28595e(_0x33962b,_0x4a3492,_0x252bfa):_0x28595e(_0x33962b,_0x4a3492))||_0x252bfa;}return _0x40ac71>0x3&&_0x252bfa&&Object[_0x707cdb(0x152)](_0x33962b,_0x4a3492,_0x252bfa),_0x252bfa;},__metadata=this&&this[a79_0x456ed6(0x16b)]||function(_0x33a646,_0x4f5be6){const _0x143305=a79_0x456ed6;if(typeof Reflect==='object'&&typeof Reflect[_0x143305(0x139)]===_0x143305(0x154))return Reflect[_0x143305(0x139)](_0x33a646,_0x4f5be6);};function a79_0x22bd(){const _0x1e6a9f=['gitCommit','SalesforceGitSyncService','13320780bHlBSl','getRepositoryRecordByName','typedi','getComponentRecordTypes','fetchRepositoryComponents','lastCommit','SalesforceSyncService','../../salesforce/services/salesforce-git-sync.service','retrieveAttachment','../../salesforce/services/salesforce.service','createCommit','indexOf','Synchronization_Status__c','GitCommitService','fetchBranchComponents','79368IQtSnx','175irfqkA','patch','checkSyncStatus','type','crc','object','map','__esModule','TASKS_PER_TICK','updateRemoteState','fetchBranchComponentsByFilenames','(((.+)+)+)+$','fetchRepositoryComponentsByFilenames','toString','3HUiAiZ','name','../../parsers/utils','__decorate','metadata','825275bFHSck','filter','catch','fetchComponentsMetadata','repositoryGit','updateStatus','search','componentsMetadata','string','parse','getBranchId','1499364UnOSmI','salesforceSync','repository','FLOSUM_GIT_NAMESPACE','branch','4480920miyzDi','branchId','MDApiParserV2','find','replace','../../../../constants','length','3JdcUmP','defineProperty','Last_Updated_On__c','function','../../parsers/mdapi/parser-v2','then','constructor','salesforceGitSync','decorate','getRepositoryId','filterParserPaths','readFilesByFilename','proceedFile','META_XML_EXTENSION','now','splice','fetchRepositoryOrBranchData','salesforce','salesforceRest','179480bKBAsC','fileNames','push','fileName','498452cwDZzg','([./-]{1}|$)','syncRecord','__metadata','Service','repositoryId','apply'];a79_0x22bd=function(){return _0x1e6a9f;};return a79_0x22bd();}Object['defineProperty'](exports,a79_0x456ed6(0x12e),{'value':!![]}),exports[a79_0x456ed6(0x124)]=void 0x0;const constants_1=require(a79_0x456ed6(0x14f)),salesforce_git_sync_service_1=require(a79_0x456ed6(0x11e)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a79_0x456ed6(0x119)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a79_0x456ed6(0x120)),parser_v2_1=require(a79_0x456ed6(0x155)),utils_1=require(a79_0x456ed6(0x137));let GitCommitService=class GitCommitService{constructor(_0x408971,_0xf50a86,_0x4035f9,_0x5f4e02){const _0x5ac473=a79_0x456ed6;this[_0x5ac473(0x158)]=_0x408971,this[_0x5ac473(0x163)]=_0xf50a86,this[_0x5ac473(0x146)]=_0x4035f9,this[_0x5ac473(0x162)]=_0x5f4e02,this[_0x5ac473(0x12f)]=0xc8;}get[a79_0x456ed6(0x16d)](){const _0x2b846d=a79_0x456ed6;var _0x37c02d;return((_0x37c02d=this[_0x2b846d(0x16a)])===null||_0x37c02d===void 0x0?void 0x0:_0x37c02d[_0x2b846d(0x16d)])||'';}get['branchId'](){const _0x5a4dc8=a79_0x456ed6;var _0x34bb50;return((_0x34bb50=this[_0x5a4dc8(0x16a)])===null||_0x34bb50===void 0x0?void 0x0:_0x34bb50[_0x5a4dc8(0x14b)])||'';}async[a79_0x456ed6(0x121)](_0x5c635c){const _0xf950eb=a79_0x456ed6;return this[_0xf950eb(0x158)][_0xf950eb(0x121)](_0x5c635c,this[_0xf950eb(0x16d)]);}async[a79_0x456ed6(0x129)](_0x24550a){const _0x46c87b=a79_0x456ed6;if(this[_0x46c87b(0x16a)]){const _0x4dadca=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x46c87b(0x16a)]),_0x31f6c5=await this['salesforce'][_0x46c87b(0x11f)](_0x4dadca)[_0x46c87b(0x156)](_0x3e158a=>typeof _0x3e158a===_0x46c87b(0x142)?JSON[_0x46c87b(0x143)](_0x3e158a):_0x3e158a)[_0x46c87b(0x13c)](()=>({}));if(_0x31f6c5[this['gitCommit'][_0x46c87b(0x13e)]]){if(_0x31f6c5[this[_0x46c87b(0x16f)][_0x46c87b(0x13e)]][_0x46c87b(0x11c)]===_0x24550a)return!![];}return![];}return![];}async[a79_0x456ed6(0x130)](_0x1edd25){const _0x55f4b2=a79_0x456ed6;this[_0x55f4b2(0x16a)]&&await this['salesforceSync'][_0x55f4b2(0x130)](this[_0x55f4b2(0x16a)],_0x1edd25);}['getUnusedComponentsFilePaths'](){const _0x5bcb6a=a79_0x456ed6;return this[_0x5bcb6a(0x141)]['map'](({fileName:_0x3cfe67})=>_0x3cfe67);}async[a79_0x456ed6(0x15d)](_0x485f79,_0x45de5e,_0x49851e){const _0xf9373b=a79_0x456ed6,_0x5db7a2=new RegExp('^'+_0x485f79+_0xf9373b(0x169));let _0x569782=[_0x485f79];_0x49851e&&(_0x569782=(0x0,utils_1[_0xf9373b(0x15b)])(await(0x0,utils_1[_0xf9373b(0x15c)])(_0x485f79,_0x45de5e)[_0xf9373b(0x13c)](()=>[])));const _0x2f512c=_0x49851e?this[_0xf9373b(0x141)][_0xf9373b(0x13b)](_0x1e7b02=>_0x1e7b02[_0xf9373b(0x167)]['match'](_0x5db7a2)):this[_0xf9373b(0x141)]['filter'](_0x534e33=>_0x534e33[_0xf9373b(0x167)]===_0x485f79||_0x534e33['fileName']===_0x485f79[_0xf9373b(0x14e)](constants_1[_0xf9373b(0x15e)],'')),_0x4497a7=new parser_v2_1[(_0xf9373b(0x14c))](_0x45de5e,_0x569782),_0xe60a87=await _0x4497a7[_0xf9373b(0x143)](),_0x5b3028=[],_0x5218a5=[];for(const _0x3c3a0d of _0xe60a87){const _0x4b5950=_0x2f512c[_0xf9373b(0x14d)](_0x4d8aa7=>_0x4d8aa7[_0xf9373b(0x136)]===_0x3c3a0d[_0xf9373b(0x136)]&&_0x4d8aa7['type']===_0x3c3a0d[_0xf9373b(0x12a)]);if(!_0x4b5950){_0x5b3028[_0xf9373b(0x166)](_0x3c3a0d);continue;}_0x3c3a0d[_0xf9373b(0x12b)]!==_0x4b5950['crc32']&&_0x5218a5[_0xf9373b(0x166)]({'meta':_0x4b5950,'component':_0x3c3a0d}),_0x2f512c[_0xf9373b(0x160)](_0x2f512c[_0xf9373b(0x122)](_0x4b5950),0x1);}return{'inserted':_0x5b3028,'modified':_0x5218a5,'removed':_0x2f512c};}async[a79_0x456ed6(0x161)](){const _0x5f3683=a79_0x456ed6;this[_0x5f3683(0x16a)]=this[_0x5f3683(0x16f)][_0x5f3683(0x149)]==='master'?await this[_0x5f3683(0x146)][_0x5f3683(0x118)](this[_0x5f3683(0x16f)][_0x5f3683(0x147)]):await this['salesforceSync']['getBranchRecordByName'](this[_0x5f3683(0x16f)][_0x5f3683(0x149)]),this['recordTypes']=await this[_0x5f3683(0x158)][_0x5f3683(0x11a)]();}async[a79_0x456ed6(0x13d)](_0x3db301){const _0x1f8f24=a79_0x456ed6;if(this[_0x1f8f24(0x16f)]['force']||_0x3db301){this[_0x1f8f24(0x141)]=this['branchId']?await this[_0x1f8f24(0x158)][_0x1f8f24(0x125)](this[_0x1f8f24(0x14b)]):await this[_0x1f8f24(0x158)][_0x1f8f24(0x11b)](this[_0x1f8f24(0x16d)]);return;}const _0x6d7651=[...new Set(this['gitCommit'][_0x1f8f24(0x165)][_0x1f8f24(0x12d)](_0x397c85=>_0x397c85[_0x1f8f24(0x14e)](constants_1['META_XML_EXTENSION'],'')))];this['componentsMetadata']=[];while(_0x6d7651[_0x1f8f24(0x150)]){const _0x35aa6a=_0x6d7651[_0x1f8f24(0x160)](0x0,this[_0x1f8f24(0x12f)]),_0x3a0836=this['branchId']?await this[_0x1f8f24(0x158)][_0x1f8f24(0x131)](_0x35aa6a,this[_0x1f8f24(0x14b)]):await this['salesforceGitSync'][_0x1f8f24(0x133)](_0x35aa6a,this[_0x1f8f24(0x16d)]);this[_0x1f8f24(0x141)]['push'](..._0x3a0836);}}async[a79_0x456ed6(0x13f)](_0x52217f){const _0x178184=a79_0x456ed6;this[_0x178184(0x14b)]?await this[_0x178184(0x163)][_0x178184(0x128)](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1[_0x178184(0x148)]+_0x178184(0x123)]:_0x52217f,[constants_1['FLOSUM_NAMESPACE']+_0x178184(0x153)]:Date[_0x178184(0x15f)]()}):await this[_0x178184(0x163)][_0x178184(0x128)](constants_1['FLOSUM_REPOSITORY'],this['repositoryId'],{[constants_1[_0x178184(0x148)]+_0x178184(0x123)]:_0x52217f});}['setCommitDto'](_0x36a760){const _0xeaadfe=a79_0x456ed6;this[_0xeaadfe(0x16f)]=_0x36a760;}['getRecordTypes'](){return this['recordTypes'];}[a79_0x456ed6(0x15a)](){return this['repositoryId'];}[a79_0x456ed6(0x144)](){const _0x3a4211=a79_0x456ed6;return this[_0x3a4211(0x14b)];}};GitCommitService=__decorate([(0x0,typedi_1[a79_0x456ed6(0x16c)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a79_0x456ed6(0x170)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a79_0x456ed6(0x11d)],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a79_0x456ed6(0x124)]=GitCommitService;