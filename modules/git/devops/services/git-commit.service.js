const a127_0x118be9=a127_0x17d2;(function(_0x4c8cf0,_0x4b50ca){const _0x42cd30=a127_0x17d2,_0x13be65=_0x4c8cf0();while(!![]){try{const _0x57b509=-parseInt(_0x42cd30(0x1a0))/0x1+parseInt(_0x42cd30(0x1de))/0x2*(-parseInt(_0x42cd30(0x1b8))/0x3)+-parseInt(_0x42cd30(0x1b6))/0x4*(-parseInt(_0x42cd30(0x1a1))/0x5)+parseInt(_0x42cd30(0x19c))/0x6*(parseInt(_0x42cd30(0x1ca))/0x7)+-parseInt(_0x42cd30(0x1ad))/0x8+parseInt(_0x42cd30(0x1c1))/0x9+parseInt(_0x42cd30(0x195))/0xa*(parseInt(_0x42cd30(0x194))/0xb);if(_0x57b509===_0x4b50ca)break;else _0x13be65['push'](_0x13be65['shift']());}catch(_0x3a12b3){_0x13be65['push'](_0x13be65['shift']());}}}(a127_0x4bd4,0xa9258));const a127_0x58f49f=(function(){let _0x328fb2=!![];return function(_0x181ab9,_0x551275){const _0xdb78c3=_0x328fb2?function(){const _0x57d808=a127_0x17d2;if(_0x551275){const _0x59a425=_0x551275[_0x57d808(0x18c)](_0x181ab9,arguments);return _0x551275=null,_0x59a425;}}:function(){};return _0x328fb2=![],_0xdb78c3;};}()),a127_0xeb426e=a127_0x58f49f(this,function(){const _0x1c0195=a127_0x17d2;return a127_0xeb426e[_0x1c0195(0x191)]()[_0x1c0195(0x184)](_0x1c0195(0x1ae))['toString']()[_0x1c0195(0x192)](a127_0xeb426e)[_0x1c0195(0x184)](_0x1c0195(0x1ae));});a127_0xeb426e();'use strict';function a127_0x17d2(_0x4e0097,_0x596f7e){const _0x1fa848=a127_0x4bd4();return a127_0x17d2=function(_0xeb426e,_0x58f49f){_0xeb426e=_0xeb426e-0x183;let _0x4bd4c2=_0x1fa848[_0xeb426e];return _0x4bd4c2;},a127_0x17d2(_0x4e0097,_0x596f7e);}var __decorate=this&&this[a127_0x118be9(0x19b)]||function(_0x450fe5,_0x2218a6,_0x46d727,_0x10ddc5){const _0x2d0988=a127_0x118be9;var _0x4f3039=arguments[_0x2d0988(0x1a6)],_0x3b7487=_0x4f3039<0x3?_0x2218a6:_0x10ddc5===null?_0x10ddc5=Object[_0x2d0988(0x1df)](_0x2218a6,_0x46d727):_0x10ddc5,_0x474f71;if(typeof Reflect===_0x2d0988(0x1b3)&&typeof Reflect[_0x2d0988(0x188)]===_0x2d0988(0x1c6))_0x3b7487=Reflect[_0x2d0988(0x188)](_0x450fe5,_0x2218a6,_0x46d727,_0x10ddc5);else{for(var _0x21d566=_0x450fe5[_0x2d0988(0x1a6)]-0x1;_0x21d566>=0x0;_0x21d566--)if(_0x474f71=_0x450fe5[_0x21d566])_0x3b7487=(_0x4f3039<0x3?_0x474f71(_0x3b7487):_0x4f3039>0x3?_0x474f71(_0x2218a6,_0x46d727,_0x3b7487):_0x474f71(_0x2218a6,_0x46d727))||_0x3b7487;}return _0x4f3039>0x3&&_0x3b7487&&Object['defineProperty'](_0x2218a6,_0x46d727,_0x3b7487),_0x3b7487;},__metadata=this&&this['__metadata']||function(_0x3d8f3a,_0x2597fd){const _0x2c3e57=a127_0x118be9;if(typeof Reflect==='object'&&typeof Reflect[_0x2c3e57(0x19d)]===_0x2c3e57(0x1c6))return Reflect[_0x2c3e57(0x19d)](_0x3d8f3a,_0x2597fd);};Object[a127_0x118be9(0x1a9)](exports,a127_0x118be9(0x1bc),{'value':!![]}),exports[a127_0x118be9(0x18b)]=void 0x0;function a127_0x4bd4(){const _0x3c3678=['updateStatus','search','readComponentPaths','salesforceRest','create','decorate','catch','repositoryId','GitCommitService','apply','getUnusedComponentsFilePaths','indexOf','setCommitDto','FactoryParser','toString','constructor','typedi','44DyznDS','197490exWqgt','prepareComponentNamesForFetchMetadata','FLOSUM_GIT_NAMESPACE','fetchComponentsMetadata','../utils/components.utils','checkSyncStatus','__decorate','6xeagYx','metadata','recordType','salesforce','166555YqKEuT','3223145ONIksG','branch','getRepositoryId','createCommit','getRepositoryRecordByName','length','fileNames','force','defineProperty','PathUtils','type','proceedFile','4716416KPwBPX','(((.+)+)+)+$','../../salesforce/services/salesforce-sync.service','find','componentsMetadata','branchId','object','crc32','recordTypeName','4Vxcgbz','../../parsers/factory.parser','3uoUPIY','push','repository','getRemoteStateAttachmentId','__esModule','filterMetadataComponents','parse','Last_Updated_On__c','FLOSUM_NAMESPACE','4641084DRcXUQ','SalesforceService','execute','master','crc','function','syncRecord','name','splice','3289692ANclHh','salesforceGitSync','salesforceSync','gitCommit','patch','recordTypes','getBranchId','repositoryGit','../../salesforce/services/salesforce.service','retrieveAttachment','then','SalesforceRestService','FLOSUM_BRANCH','TASKS_PER_TICK','../../salesforce/services/salesforce-rest.service','string','ComponentsUtils','../../../../constants','now','FLOSUM_REPOSITORY','520652FDdlLl','getOwnPropertyDescriptor'];a127_0x4bd4=function(){return _0x3c3678;};return a127_0x4bd4();}const constants_1=require(a127_0x118be9(0x1db)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a127_0x118be9(0x1d8)),typedi_1=require(a127_0x118be9(0x193)),salesforce_sync_service_1=require(a127_0x118be9(0x1af)),salesforce_service_1=require(a127_0x118be9(0x1d2)),factory_parser_1=require(a127_0x118be9(0x1b7)),path_utils_1=require('../utils/path.utils'),components_utils_1=require(a127_0x118be9(0x199));let GitCommitService=class GitCommitService{constructor(_0x4de517,_0x519fc3,_0x55e80e,_0x2c8939){const _0x55ef10=a127_0x118be9;this[_0x55ef10(0x1cb)]=_0x4de517,this[_0x55ef10(0x186)]=_0x519fc3,this[_0x55ef10(0x1cc)]=_0x55e80e,this[_0x55ef10(0x19f)]=_0x2c8939,this[_0x55ef10(0x1d7)]=0xc8;}get['repositoryId'](){const _0xac1666=a127_0x118be9;var _0x5929d4;return((_0x5929d4=this[_0xac1666(0x1c7)])===null||_0x5929d4===void 0x0?void 0x0:_0x5929d4[_0xac1666(0x18a)])||'';}get[a127_0x118be9(0x1b2)](){const _0x382792=a127_0x118be9;var _0x5b89f4;return((_0x5b89f4=this[_0x382792(0x1c7)])===null||_0x5b89f4===void 0x0?void 0x0:_0x5b89f4['branchId'])||'';}get[a127_0x118be9(0x19e)](){const _0x1385b3=a127_0x118be9;return this['syncRecord'][_0x1385b3(0x1b5)];}async[a127_0x118be9(0x1a4)](_0x2b2799){const _0x5dcf3b=a127_0x118be9;return this[_0x5dcf3b(0x1cb)]['createCommit'](_0x2b2799,this['repositoryId']);}async[a127_0x118be9(0x19a)](_0x1adac6){const _0x686689=a127_0x118be9;if(this[_0x686689(0x1c7)]){const _0x49b13f=await this[_0x686689(0x1cc)][_0x686689(0x1bb)](this[_0x686689(0x1c7)]),_0x40919a=await this[_0x686689(0x19f)][_0x686689(0x1d3)](_0x49b13f)[_0x686689(0x1d4)](_0x4676cf=>typeof _0x4676cf===_0x686689(0x1d9)?JSON[_0x686689(0x1be)](_0x4676cf):_0x4676cf)[_0x686689(0x189)](()=>({}));if(_0x40919a[this['gitCommit'][_0x686689(0x1d1)]]){if(_0x40919a[this[_0x686689(0x1cd)][_0x686689(0x1d1)]]['lastCommit']===_0x1adac6)return!![];}return![];}return![];}async['updateRemoteState'](_0x3f69a9){const _0x33d8c1=a127_0x118be9;this['syncRecord']&&await this['salesforceSync']['updateRemoteState'](this[_0x33d8c1(0x1c7)],_0x3f69a9);}[a127_0x118be9(0x18d)](){return this['componentsMetadata']['map'](({fileName:_0x235760})=>_0x235760);}async[a127_0x118be9(0x1ac)](_0xd710f5,_0x4b7be8,_0x3770b0){const _0x31e9fd=a127_0x118be9,_0x5c6b10=await path_utils_1[_0x31e9fd(0x1aa)][_0x31e9fd(0x185)](this[_0x31e9fd(0x1c7)][_0x31e9fd(0x1b5)],_0xd710f5,_0x4b7be8,_0x3770b0),_0xbc1849=components_utils_1[_0x31e9fd(0x1da)][_0x31e9fd(0x1bd)](this[_0x31e9fd(0x1b1)],_0xd710f5,_0x3770b0,this['syncRecord'][_0x31e9fd(0x1b5)]),_0x372bf6=factory_parser_1[_0x31e9fd(0x190)][_0x31e9fd(0x187)]({'recordType':this[_0x31e9fd(0x1c7)][_0x31e9fd(0x1b5)],'sourceDir':_0x4b7be8,'paths':_0x5c6b10}),_0x249c4b=await _0x372bf6[_0x31e9fd(0x1c3)](),_0x411b47=[],_0x274fde=[];for(const _0x25dd93 of _0x249c4b){const _0x8637b=_0xbc1849[_0x31e9fd(0x1b0)](_0x3a8ec5=>_0x3a8ec5[_0x31e9fd(0x1c8)]===_0x25dd93['name']&&_0x3a8ec5[_0x31e9fd(0x1ab)]===_0x25dd93[_0x31e9fd(0x1ab)]);if(!_0x8637b){_0x411b47[_0x31e9fd(0x1b9)](_0x25dd93);continue;}_0x25dd93[_0x31e9fd(0x1c5)]!==_0x8637b[_0x31e9fd(0x1b4)]&&_0x274fde[_0x31e9fd(0x1b9)]({'meta':_0x8637b,'component':_0x25dd93}),_0xbc1849[_0x31e9fd(0x1c9)](_0xbc1849[_0x31e9fd(0x18e)](_0x8637b),0x1);}return{'inserted':_0x411b47,'modified':_0x274fde,'removed':_0xbc1849};}async['fetchRepositoryOrBranchData'](){const _0x5d50ff=a127_0x118be9;this[_0x5d50ff(0x1c7)]=this[_0x5d50ff(0x1cd)][_0x5d50ff(0x1a2)]===_0x5d50ff(0x1c4)?await this[_0x5d50ff(0x1cc)][_0x5d50ff(0x1a5)](this[_0x5d50ff(0x1cd)][_0x5d50ff(0x1ba)]):await this[_0x5d50ff(0x1cc)]['getBranchRecordByName'](this[_0x5d50ff(0x1cd)][_0x5d50ff(0x1a2)]),this[_0x5d50ff(0x1cf)]=await this[_0x5d50ff(0x1cb)]['getComponentRecordTypes']();}async[a127_0x118be9(0x198)](_0x25cd2a){const _0x40b9d0=a127_0x118be9;if(this[_0x40b9d0(0x1cd)][_0x40b9d0(0x1a8)]||_0x25cd2a){this['componentsMetadata']=this[_0x40b9d0(0x1b2)]?await this[_0x40b9d0(0x1cb)]['fetchBranchComponents'](this[_0x40b9d0(0x1b2)]):await this[_0x40b9d0(0x1cb)]['fetchRepositoryComponents'](this['repositoryId']);return;}const _0x2ba177=components_utils_1[_0x40b9d0(0x1da)][_0x40b9d0(0x196)](this[_0x40b9d0(0x1cd)][_0x40b9d0(0x1a7)],this['syncRecord'][_0x40b9d0(0x1b5)]);this[_0x40b9d0(0x1b1)]=[];while(_0x2ba177[_0x40b9d0(0x1a6)]){const _0x350443=_0x2ba177[_0x40b9d0(0x1c9)](0x0,this[_0x40b9d0(0x1d7)]),_0x985cc9=this[_0x40b9d0(0x1b2)]?await this[_0x40b9d0(0x1cb)]['fetchBranchComponentsByFilenames'](_0x350443,this[_0x40b9d0(0x1b2)]):await this[_0x40b9d0(0x1cb)]['fetchRepositoryComponentsByFilenames'](_0x350443,this[_0x40b9d0(0x18a)]);this['componentsMetadata'][_0x40b9d0(0x1b9)](..._0x985cc9);}}async[a127_0x118be9(0x183)](_0x18a81e){const _0x26534c=a127_0x118be9;this['branchId']?await this[_0x26534c(0x186)]['patch'](constants_1[_0x26534c(0x1d6)],this[_0x26534c(0x1b2)],{[constants_1[_0x26534c(0x197)]+'Synchronization_Status__c']:_0x18a81e,[constants_1[_0x26534c(0x1c0)]+_0x26534c(0x1bf)]:Date[_0x26534c(0x1dc)]()}):await this['salesforceRest'][_0x26534c(0x1ce)](constants_1[_0x26534c(0x1dd)],this[_0x26534c(0x18a)],{[constants_1[_0x26534c(0x197)]+'Synchronization_Status__c']:_0x18a81e});}[a127_0x118be9(0x18f)](_0xcc1b05){const _0x3f0831=a127_0x118be9;this[_0x3f0831(0x1cd)]=_0xcc1b05;}['getRecordTypes'](){const _0x1a200c=a127_0x118be9;return this[_0x1a200c(0x1cf)];}[a127_0x118be9(0x1a3)](){return this['repositoryId'];}[a127_0x118be9(0x1d0)](){const _0x379aa1=a127_0x118be9;return this[_0x379aa1(0x1b2)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a127_0x118be9(0x1d5)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a127_0x118be9(0x1c2)]])],GitCommitService),exports[a127_0x118be9(0x18b)]=GitCommitService;