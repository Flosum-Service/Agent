const a130_0x18b342=a130_0x1a1c;(function(_0x1ba8eb,_0x1cb541){const _0x57c1a1=a130_0x1a1c,_0x19e7a6=_0x1ba8eb();while(!![]){try{const _0xa676fa=-parseInt(_0x57c1a1(0x7d))/0x1+-parseInt(_0x57c1a1(0x94))/0x2*(-parseInt(_0x57c1a1(0xab))/0x3)+parseInt(_0x57c1a1(0xb0))/0x4*(-parseInt(_0x57c1a1(0x8f))/0x5)+-parseInt(_0x57c1a1(0x98))/0x6+-parseInt(_0x57c1a1(0x74))/0x7+-parseInt(_0x57c1a1(0xb4))/0x8+-parseInt(_0x57c1a1(0x7c))/0x9*(-parseInt(_0x57c1a1(0x68))/0xa);if(_0xa676fa===_0x1cb541)break;else _0x19e7a6['push'](_0x19e7a6['shift']());}catch(_0x50d1db){_0x19e7a6['push'](_0x19e7a6['shift']());}}}(a130_0x2ea8,0x473b4));const a130_0x111cfd=(function(){let _0x1d6a39=!![];return function(_0x38cab5,_0x1f2781){const _0x2d3c95=_0x1d6a39?function(){if(_0x1f2781){const _0x38e352=_0x1f2781['apply'](_0x38cab5,arguments);return _0x1f2781=null,_0x38e352;}}:function(){};return _0x1d6a39=![],_0x2d3c95;};}()),a130_0x31e2f1=a130_0x111cfd(this,function(){const _0x3f6e6b=a130_0x1a1c;return a130_0x31e2f1[_0x3f6e6b(0x8d)]()[_0x3f6e6b(0xaa)](_0x3f6e6b(0xb2))[_0x3f6e6b(0x8d)]()[_0x3f6e6b(0x85)](a130_0x31e2f1)['search'](_0x3f6e6b(0xb2));});a130_0x31e2f1();function a130_0x2ea8(){const _0x308b2d=['FLOSUM_NAMESPACE','getRecordTypes','getComponentRecordTypes','createCommit','constructor','now','repositoryId','indexOf','Service','FactoryParser','../../salesforce/services/salesforce-sync.service','branchId','toString','GitCommitService','35ruiBxd','__esModule','syncRecord','branch','push','4878ZHoCmk','componentsMetadata','splice','getRepositoryId','3007410kAzmlC','gitCommit','Synchronization_Status__c','updateRemoteState','salesforceSync','find','TASKS_PER_TICK','repositoryGit','execute','type','fetchBranchComponents','salesforce','__decorate','create','SalesforceService','fetchBranchComponentsByFilenames','getRemoteStateAttachmentId','design:paramtypes','search','318hudMDP','parse','crc32','ComponentsUtils','metadata','6092ltznhJ','length','(((.+)+)+)+$','../../../../constants','4039192HLRPGE','FLOSUM_GIT_NAMESPACE','string','readComponentPaths','fetchRepositoryComponents','salesforceRest','decorate','lastCommit','../../parsers/factory.parser','defineProperty','340stFkGu','force','SalesforceSyncService','proceedFile','recordTypes','setCommitDto','recordTypeName','patch','updateStatus','FLOSUM_REPOSITORY','FLOSUM_BRANCH','__metadata','1132250lkZjps','checkSyncStatus','map','name','getUnusedComponentsFilePaths','salesforceGitSync','recordType','catch','396126peTIqo','284701rCnnoc','function','fileNames','../../salesforce/services/salesforce-rest.service'];a130_0x2ea8=function(){return _0x308b2d;};return a130_0x2ea8();}'use strict';function a130_0x1a1c(_0x141c8c,_0x1c00c8){const _0x18283a=a130_0x2ea8();return a130_0x1a1c=function(_0x31e2f1,_0x111cfd){_0x31e2f1=_0x31e2f1-0x66;let _0x2ea83b=_0x18283a[_0x31e2f1];return _0x2ea83b;},a130_0x1a1c(_0x141c8c,_0x1c00c8);}var __decorate=this&&this[a130_0x18b342(0xa4)]||function(_0x53d643,_0x1fe47a,_0x93531b,_0x3f3728){const _0x1e72ef=a130_0x18b342;var _0x5cefe0=arguments['length'],_0x39866b=_0x5cefe0<0x3?_0x1fe47a:_0x3f3728===null?_0x3f3728=Object['getOwnPropertyDescriptor'](_0x1fe47a,_0x93531b):_0x3f3728,_0x159d93;if(typeof Reflect==='object'&&typeof Reflect[_0x1e72ef(0xba)]===_0x1e72ef(0x7e))_0x39866b=Reflect[_0x1e72ef(0xba)](_0x53d643,_0x1fe47a,_0x93531b,_0x3f3728);else{for(var _0x3b6dfb=_0x53d643['length']-0x1;_0x3b6dfb>=0x0;_0x3b6dfb--)if(_0x159d93=_0x53d643[_0x3b6dfb])_0x39866b=(_0x5cefe0<0x3?_0x159d93(_0x39866b):_0x5cefe0>0x3?_0x159d93(_0x1fe47a,_0x93531b,_0x39866b):_0x159d93(_0x1fe47a,_0x93531b))||_0x39866b;}return _0x5cefe0>0x3&&_0x39866b&&Object[_0x1e72ef(0x67)](_0x1fe47a,_0x93531b,_0x39866b),_0x39866b;},__metadata=this&&this[a130_0x18b342(0x73)]||function(_0x406986,_0x4abf4e){const _0x233213=a130_0x18b342;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x233213(0x7e))return Reflect[_0x233213(0xaf)](_0x406986,_0x4abf4e);};Object[a130_0x18b342(0x67)](exports,a130_0x18b342(0x90),{'value':!![]}),exports[a130_0x18b342(0x8e)]=void 0x0;const constants_1=require(a130_0x18b342(0xb3)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a130_0x18b342(0x80)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a130_0x18b342(0x8b)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),factory_parser_1=require(a130_0x18b342(0x66)),path_utils_1=require('../utils/path.utils'),components_utils_1=require('../utils/components.utils');let GitCommitService=class GitCommitService{constructor(_0x2fc676,_0x4cdf5a,_0xe909e1,_0x5335d1){const _0x1a2bc0=a130_0x18b342;this['salesforceGitSync']=_0x2fc676,this[_0x1a2bc0(0xb9)]=_0x4cdf5a,this[_0x1a2bc0(0x9c)]=_0xe909e1,this[_0x1a2bc0(0xa3)]=_0x5335d1,this[_0x1a2bc0(0x9e)]=0xc8;}get[a130_0x18b342(0x87)](){const _0x1974eb=a130_0x18b342;var _0x2cf87b;return((_0x2cf87b=this[_0x1974eb(0x91)])===null||_0x2cf87b===void 0x0?void 0x0:_0x2cf87b[_0x1974eb(0x87)])||'';}get['branchId'](){const _0x1781ac=a130_0x18b342;var _0xd0f58e;return((_0xd0f58e=this[_0x1781ac(0x91)])===null||_0xd0f58e===void 0x0?void 0x0:_0xd0f58e[_0x1781ac(0x8c)])||'';}get[a130_0x18b342(0x7a)](){const _0x37c046=a130_0x18b342;return this[_0x37c046(0x91)][_0x37c046(0x6e)];}async[a130_0x18b342(0x84)](_0x486a94){const _0x480620=a130_0x18b342;return this[_0x480620(0x79)]['createCommit'](_0x486a94,this[_0x480620(0x87)]);}async[a130_0x18b342(0x75)](_0x4d2013){const _0x53d5b7=a130_0x18b342;if(this[_0x53d5b7(0x91)]){const _0x180c9c=await this['salesforceSync'][_0x53d5b7(0xa8)](this[_0x53d5b7(0x91)]),_0x3ff3ed=await this[_0x53d5b7(0xa3)]['retrieveAttachment'](_0x180c9c)['then'](_0x15102c=>typeof _0x15102c===_0x53d5b7(0xb6)?JSON[_0x53d5b7(0xac)](_0x15102c):_0x15102c)[_0x53d5b7(0x7b)](()=>({}));if(_0x3ff3ed[this[_0x53d5b7(0x99)]['repositoryGit']]){if(_0x3ff3ed[this[_0x53d5b7(0x99)][_0x53d5b7(0x9f)]][_0x53d5b7(0xbb)]===_0x4d2013)return!![];}return![];}return![];}async[a130_0x18b342(0x9b)](_0x57a37b){const _0x49d6c4=a130_0x18b342;this[_0x49d6c4(0x91)]&&await this[_0x49d6c4(0x9c)][_0x49d6c4(0x9b)](this[_0x49d6c4(0x91)],_0x57a37b);}[a130_0x18b342(0x78)](){const _0x29e2ff=a130_0x18b342;return this[_0x29e2ff(0x95)][_0x29e2ff(0x76)](({fileName:_0x2c7fb5})=>_0x2c7fb5);}async[a130_0x18b342(0x6b)](_0x2eb9e7,_0x1053ef,_0x188343){const _0xf38c90=a130_0x18b342,_0x1ba6ec=await path_utils_1['PathUtils'][_0xf38c90(0xb7)](this[_0xf38c90(0x91)][_0xf38c90(0x6e)],_0x2eb9e7,_0x1053ef,_0x188343),_0x5b4e19=components_utils_1[_0xf38c90(0xae)]['filterMetadataComponents'](this['componentsMetadata'],_0x2eb9e7,_0x188343,this[_0xf38c90(0x91)][_0xf38c90(0x6e)]),_0x164f0a=factory_parser_1[_0xf38c90(0x8a)][_0xf38c90(0xa5)]({'recordType':this['syncRecord'][_0xf38c90(0x6e)],'sourceDir':_0x1053ef,'paths':_0x1ba6ec}),_0x3e1c3d=await _0x164f0a[_0xf38c90(0xa0)](),_0x5b8d17=[],_0x4b1f7c=[];for(const _0x4c8721 of _0x3e1c3d){const _0x18b745=_0x5b4e19[_0xf38c90(0x9d)](_0x46b07=>_0x46b07[_0xf38c90(0x77)]===_0x4c8721[_0xf38c90(0x77)]&&_0x46b07[_0xf38c90(0xa1)]===_0x4c8721[_0xf38c90(0xa1)]);if(!_0x18b745){_0x5b8d17[_0xf38c90(0x93)](_0x4c8721);continue;}_0x4c8721['crc']!==_0x18b745[_0xf38c90(0xad)]&&_0x4b1f7c['push']({'meta':_0x18b745,'component':_0x4c8721}),_0x5b4e19[_0xf38c90(0x96)](_0x5b4e19[_0xf38c90(0x88)](_0x18b745),0x1);}return{'inserted':_0x5b8d17,'modified':_0x4b1f7c,'removed':_0x5b4e19};}async['fetchRepositoryOrBranchData'](){const _0x23b01c=a130_0x18b342;this[_0x23b01c(0x91)]=this['gitCommit'][_0x23b01c(0x92)]==='master'?await this[_0x23b01c(0x9c)]['getRepositoryRecordByName'](this['gitCommit']['repository']):await this[_0x23b01c(0x9c)]['getBranchRecordByName'](this[_0x23b01c(0x99)]['branch']),this[_0x23b01c(0x6c)]=await this[_0x23b01c(0x79)][_0x23b01c(0x83)]();}async['fetchComponentsMetadata'](_0x1d1290){const _0x1d421c=a130_0x18b342;if(this[_0x1d421c(0x99)][_0x1d421c(0x69)]||_0x1d1290){this[_0x1d421c(0x95)]=this[_0x1d421c(0x8c)]?await this['salesforceGitSync'][_0x1d421c(0xa2)](this[_0x1d421c(0x8c)]):await this[_0x1d421c(0x79)][_0x1d421c(0xb8)](this[_0x1d421c(0x87)]);return;}const _0x469bd8=components_utils_1[_0x1d421c(0xae)]['prepareComponentNamesForFetchMetadata'](this['gitCommit'][_0x1d421c(0x7f)],this['syncRecord']['recordTypeName']);this[_0x1d421c(0x95)]=[];while(_0x469bd8[_0x1d421c(0xb1)]){const _0x3ac0a0=_0x469bd8[_0x1d421c(0x96)](0x0,this[_0x1d421c(0x9e)]),_0x4afd07=this[_0x1d421c(0x8c)]?await this[_0x1d421c(0x79)][_0x1d421c(0xa7)](_0x3ac0a0,this['branchId']):await this['salesforceGitSync']['fetchRepositoryComponentsByFilenames'](_0x3ac0a0,this[_0x1d421c(0x87)]);this[_0x1d421c(0x95)][_0x1d421c(0x93)](..._0x4afd07);}}async[a130_0x18b342(0x70)](_0x177c19){const _0x56ae12=a130_0x18b342;this['branchId']?await this['salesforceRest'][_0x56ae12(0x6f)](constants_1[_0x56ae12(0x72)],this['branchId'],{[constants_1[_0x56ae12(0xb5)]+_0x56ae12(0x9a)]:_0x177c19,[constants_1[_0x56ae12(0x81)]+'Last_Updated_On__c']:Date[_0x56ae12(0x86)]()}):await this[_0x56ae12(0xb9)][_0x56ae12(0x6f)](constants_1[_0x56ae12(0x71)],this[_0x56ae12(0x87)],{[constants_1[_0x56ae12(0xb5)]+_0x56ae12(0x9a)]:_0x177c19});}[a130_0x18b342(0x6d)](_0x37be84){const _0x197951=a130_0x18b342;this[_0x197951(0x99)]=_0x37be84;}[a130_0x18b342(0x82)](){return this['recordTypes'];}[a130_0x18b342(0x97)](){const _0x59cfaa=a130_0x18b342;return this[_0x59cfaa(0x87)];}['getBranchId'](){return this['branchId'];}};GitCommitService=__decorate([(0x0,typedi_1[a130_0x18b342(0x89)])({'transient':!![]}),__metadata(a130_0x18b342(0xa9),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a130_0x18b342(0x6a)],salesforce_service_1[a130_0x18b342(0xa6)]])],GitCommitService),exports[a130_0x18b342(0x8e)]=GitCommitService;