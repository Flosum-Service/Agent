const a79_0x134dc8=a79_0x5a08;(function(_0x343073,_0x552a7f){const _0x30fc67=a79_0x5a08,_0x53f1a9=_0x343073();while(!![]){try{const _0x15fa8c=parseInt(_0x30fc67(0xf7))/0x1*(-parseInt(_0x30fc67(0xf1))/0x2)+-parseInt(_0x30fc67(0xe4))/0x3*(parseInt(_0x30fc67(0xd1))/0x4)+parseInt(_0x30fc67(0xfe))/0x5+parseInt(_0x30fc67(0xdd))/0x6+parseInt(_0x30fc67(0xcb))/0x7+parseInt(_0x30fc67(0xed))/0x8*(parseInt(_0x30fc67(0x103))/0x9)+-parseInt(_0x30fc67(0xb5))/0xa*(parseInt(_0x30fc67(0x106))/0xb);if(_0x15fa8c===_0x552a7f)break;else _0x53f1a9['push'](_0x53f1a9['shift']());}catch(_0x3a0ffc){_0x53f1a9['push'](_0x53f1a9['shift']());}}}(a79_0x32f6,0x7584e));function a79_0x32f6(){const _0x8c10a7=['lastCommit','fetchRepositoryOrBranchData','patch','fetchBranchComponentsByFilenames','proceedFile','branchId','3623670niTfcS','catch','../../parsers/utils','fetchRepositoryComponentsByFilenames','FLOSUM_BRANCH','9michtN','now','../../../../constants','680812rjAjxG','SalesforceGitSyncService','GitCommitService','MDApiParserV2','checkSyncStatus','createCommit','salesforce','name','getBranchId','([./-]{1}|$)','readFilesByFilename','SalesforceRestService','230nmRkfc','constructor','type','toString','design:paramtypes','typedi','filter','updateRemoteState','SalesforceSyncService','metadata','push','repositoryGit','__decorate','object','getOwnPropertyDescriptor','recordTypes','decorate','filterParserPaths','getComponentRecordTypes','function','setCommitDto','salesforceRest','3630522VFzZcR','getRepositoryId','META_XML_EXTENSION','repositoryId','Synchronization_Status__c','FLOSUM_GIT_NAMESPACE','14996VBRyET','__metadata','componentsMetadata','force','salesforceGitSync','parse','splice','(((.+)+)+)+$','gitCommit','getUnusedComponentsFilePaths','retrieveAttachment','SalesforceService','2818350NVfjRK','fileName','defineProperty','syncRecord','then','branch','fileNames','183BvQHYF','crc32','indexOf','FLOSUM_NAMESPACE','salesforceSync','crc','../../salesforce/services/salesforce.service','match','../../salesforce/services/salesforce-sync.service','5727136fAfzuD','FLOSUM_REPOSITORY','map','TASKS_PER_TICK','590868fHZzLL','getRecordTypes','getBranchRecordByName','../../salesforce/services/salesforce-git-sync.service','search','length','1lELuFY'];a79_0x32f6=function(){return _0x8c10a7;};return a79_0x32f6();}const a79_0x5bbe29=(function(){let _0x515719=!![];return function(_0x1a58e1,_0x3d5cb0){const _0x23d58a=_0x515719?function(){if(_0x3d5cb0){const _0x2f9132=_0x3d5cb0['apply'](_0x1a58e1,arguments);return _0x3d5cb0=null,_0x2f9132;}}:function(){};return _0x515719=![],_0x23d58a;};}()),a79_0x5de96d=a79_0x5bbe29(this,function(){const _0x6704d0=a79_0x5a08;return a79_0x5de96d[_0x6704d0(0xb8)]()[_0x6704d0(0xf5)](_0x6704d0(0xd8))[_0x6704d0(0xb8)]()[_0x6704d0(0xb6)](a79_0x5de96d)[_0x6704d0(0xf5)](_0x6704d0(0xd8));});a79_0x5de96d();'use strict';function a79_0x5a08(_0x5d3df3,_0x8b8cb1){const _0x18ed95=a79_0x32f6();return a79_0x5a08=function(_0x5de96d,_0x5bbe29){_0x5de96d=_0x5de96d-0xac;let _0x32f602=_0x18ed95[_0x5de96d];return _0x32f602;},a79_0x5a08(_0x5d3df3,_0x8b8cb1);}var __decorate=this&&this[a79_0x134dc8(0xc1)]||function(_0x10f1f2,_0xc2aaab,_0x73b16,_0x4fae81){const _0x47167c=a79_0x134dc8;var _0xb6f0e6=arguments[_0x47167c(0xf6)],_0x58c6f2=_0xb6f0e6<0x3?_0xc2aaab:_0x4fae81===null?_0x4fae81=Object[_0x47167c(0xc3)](_0xc2aaab,_0x73b16):_0x4fae81,_0x25763f;if(typeof Reflect===_0x47167c(0xc2)&&typeof Reflect['decorate']===_0x47167c(0xc8))_0x58c6f2=Reflect[_0x47167c(0xc5)](_0x10f1f2,_0xc2aaab,_0x73b16,_0x4fae81);else{for(var _0x1659ad=_0x10f1f2[_0x47167c(0xf6)]-0x1;_0x1659ad>=0x0;_0x1659ad--)if(_0x25763f=_0x10f1f2[_0x1659ad])_0x58c6f2=(_0xb6f0e6<0x3?_0x25763f(_0x58c6f2):_0xb6f0e6>0x3?_0x25763f(_0xc2aaab,_0x73b16,_0x58c6f2):_0x25763f(_0xc2aaab,_0x73b16))||_0x58c6f2;}return _0xb6f0e6>0x3&&_0x58c6f2&&Object[_0x47167c(0xdf)](_0xc2aaab,_0x73b16,_0x58c6f2),_0x58c6f2;},__metadata=this&&this[a79_0x134dc8(0xd2)]||function(_0x35a893,_0xf25f91){const _0x27a6d9=a79_0x134dc8;if(typeof Reflect===_0x27a6d9(0xc2)&&typeof Reflect[_0x27a6d9(0xbe)]===_0x27a6d9(0xc8))return Reflect[_0x27a6d9(0xbe)](_0x35a893,_0xf25f91);};Object[a79_0x134dc8(0xdf)](exports,'__esModule',{'value':!![]}),exports[a79_0x134dc8(0x108)]=void 0x0;const constants_1=require(a79_0x134dc8(0x105)),salesforce_git_sync_service_1=require(a79_0x134dc8(0xf4)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a79_0x134dc8(0xba)),salesforce_sync_service_1=require(a79_0x134dc8(0xec)),salesforce_service_1=require(a79_0x134dc8(0xea)),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require(a79_0x134dc8(0x100));let GitCommitService=class GitCommitService{constructor(_0x2efff0,_0x2cd88e,_0x18b5fd,_0x354374){const _0x4fca18=a79_0x134dc8;this[_0x4fca18(0xd5)]=_0x2efff0,this['salesforceRest']=_0x2cd88e,this[_0x4fca18(0xe8)]=_0x18b5fd,this[_0x4fca18(0xaf)]=_0x354374,this[_0x4fca18(0xf0)]=0xc8;}get[a79_0x134dc8(0xce)](){var _0x2afb17;return((_0x2afb17=this['syncRecord'])===null||_0x2afb17===void 0x0?void 0x0:_0x2afb17['repositoryId'])||'';}get[a79_0x134dc8(0xfd)](){const _0x379091=a79_0x134dc8;var _0x7312dc;return((_0x7312dc=this[_0x379091(0xe0)])===null||_0x7312dc===void 0x0?void 0x0:_0x7312dc[_0x379091(0xfd)])||'';}async[a79_0x134dc8(0xae)](_0x1288b1){const _0x261110=a79_0x134dc8;return this[_0x261110(0xd5)][_0x261110(0xae)](_0x1288b1,this[_0x261110(0xce)]);}async[a79_0x134dc8(0xad)](_0x42571f){const _0x3fa77b=a79_0x134dc8;if(this[_0x3fa77b(0xe0)]){const _0x5a3122=await this[_0x3fa77b(0xe8)]['getRemoteStateAttachmentId'](this[_0x3fa77b(0xe0)]),_0x454b71=await this[_0x3fa77b(0xaf)][_0x3fa77b(0xdb)](_0x5a3122)[_0x3fa77b(0xe1)](_0xf5b03d=>typeof _0xf5b03d==='string'?JSON[_0x3fa77b(0xd6)](_0xf5b03d):_0xf5b03d)[_0x3fa77b(0xff)](()=>({}));if(_0x454b71[this['gitCommit']['repositoryGit']]){if(_0x454b71[this[_0x3fa77b(0xd9)][_0x3fa77b(0xc0)]][_0x3fa77b(0xf8)]===_0x42571f)return!![];}return![];}return![];}async[a79_0x134dc8(0xbc)](_0x2d5782){const _0x4ffd15=a79_0x134dc8;this[_0x4ffd15(0xe0)]&&await this['salesforceSync'][_0x4ffd15(0xbc)](this[_0x4ffd15(0xe0)],_0x2d5782);}[a79_0x134dc8(0xda)](){const _0x1cbd22=a79_0x134dc8;return this[_0x1cbd22(0xd3)][_0x1cbd22(0xef)](({fileName:_0x425a9a})=>_0x425a9a);}async[a79_0x134dc8(0xfc)](_0x584f6d,_0xe5926b,_0x40a730){const _0x2f7278=a79_0x134dc8,_0xc09393=new RegExp('^'+_0x584f6d+_0x2f7278(0xb2));let _0x671daf=[_0x584f6d];_0x40a730&&(_0x671daf=(0x0,utils_1[_0x2f7278(0xc6)])(await(0x0,utils_1[_0x2f7278(0xb3)])(_0x584f6d,_0xe5926b)[_0x2f7278(0xff)](()=>[])));const _0xfe1f37=_0x40a730?this[_0x2f7278(0xd3)][_0x2f7278(0xbb)](_0x32f7d5=>_0x32f7d5[_0x2f7278(0xde)][_0x2f7278(0xeb)](_0xc09393)):this['componentsMetadata']['filter'](_0x33169c=>_0x33169c[_0x2f7278(0xde)]===_0x584f6d||_0x33169c[_0x2f7278(0xde)]===_0x584f6d['replace'](constants_1[_0x2f7278(0xcd)],'')),_0x3d104=new parser_v2_1[(_0x2f7278(0xac))](_0xe5926b,_0x671daf),_0x4b2cf4=await _0x3d104[_0x2f7278(0xd6)](),_0x1e1b43=[],_0x4cf7eb=[];for(const _0x469b2f of _0x4b2cf4){const _0x2086e8=_0xfe1f37['find'](_0x8ff59d=>_0x8ff59d[_0x2f7278(0xb0)]===_0x469b2f['name']&&_0x8ff59d[_0x2f7278(0xb7)]===_0x469b2f[_0x2f7278(0xb7)]);if(!_0x2086e8){_0x1e1b43[_0x2f7278(0xbf)](_0x469b2f);continue;}_0x469b2f[_0x2f7278(0xe9)]!==_0x2086e8[_0x2f7278(0xe5)]&&_0x4cf7eb[_0x2f7278(0xbf)]({'meta':_0x2086e8,'component':_0x469b2f}),_0xfe1f37[_0x2f7278(0xd7)](_0xfe1f37[_0x2f7278(0xe6)](_0x2086e8),0x1);}return{'inserted':_0x1e1b43,'modified':_0x4cf7eb,'removed':_0xfe1f37};}async[a79_0x134dc8(0xf9)](){const _0x15a0f5=a79_0x134dc8;this[_0x15a0f5(0xe0)]=this[_0x15a0f5(0xd9)][_0x15a0f5(0xe2)]==='master'?await this[_0x15a0f5(0xe8)]['getRepositoryRecordByName'](this[_0x15a0f5(0xd9)]['repository']):await this[_0x15a0f5(0xe8)][_0x15a0f5(0xf3)](this[_0x15a0f5(0xd9)][_0x15a0f5(0xe2)]),this[_0x15a0f5(0xc4)]=await this['salesforceGitSync'][_0x15a0f5(0xc7)]();}async['fetchComponentsMetadata'](_0x4dae21){const _0x270fa0=a79_0x134dc8;if(this[_0x270fa0(0xd9)][_0x270fa0(0xd4)]||_0x4dae21){this['componentsMetadata']=this[_0x270fa0(0xfd)]?await this[_0x270fa0(0xd5)]['fetchBranchComponents'](this['branchId']):await this['salesforceGitSync']['fetchRepositoryComponents'](this[_0x270fa0(0xce)]);return;}const _0x21bb67=[...new Set(this[_0x270fa0(0xd9)][_0x270fa0(0xe3)]['map'](_0x3f66be=>_0x3f66be['replace'](constants_1['META_XML_EXTENSION'],'')))];this[_0x270fa0(0xd3)]=[];while(_0x21bb67[_0x270fa0(0xf6)]){const _0x42dd08=_0x21bb67[_0x270fa0(0xd7)](0x0,this[_0x270fa0(0xf0)]),_0x41e0af=this['branchId']?await this[_0x270fa0(0xd5)][_0x270fa0(0xfb)](_0x42dd08,this[_0x270fa0(0xfd)]):await this[_0x270fa0(0xd5)][_0x270fa0(0x101)](_0x42dd08,this[_0x270fa0(0xce)]);this['componentsMetadata'][_0x270fa0(0xbf)](..._0x41e0af);}}async['updateStatus'](_0x5a81bb){const _0xca9150=a79_0x134dc8;this[_0xca9150(0xfd)]?await this[_0xca9150(0xca)][_0xca9150(0xfa)](constants_1[_0xca9150(0x102)],this[_0xca9150(0xfd)],{[constants_1[_0xca9150(0xd0)]+_0xca9150(0xcf)]:_0x5a81bb,[constants_1[_0xca9150(0xe7)]+'Last_Updated_On__c']:Date[_0xca9150(0x104)]()}):await this[_0xca9150(0xca)][_0xca9150(0xfa)](constants_1[_0xca9150(0xee)],this[_0xca9150(0xce)],{[constants_1[_0xca9150(0xd0)]+_0xca9150(0xcf)]:_0x5a81bb});}[a79_0x134dc8(0xc9)](_0x177769){const _0x29a4ae=a79_0x134dc8;this[_0x29a4ae(0xd9)]=_0x177769;}[a79_0x134dc8(0xf2)](){const _0x575320=a79_0x134dc8;return this[_0x575320(0xc4)];}[a79_0x134dc8(0xcc)](){const _0x31e052=a79_0x134dc8;return this[_0x31e052(0xce)];}[a79_0x134dc8(0xb1)](){const _0x543998=a79_0x134dc8;return this[_0x543998(0xfd)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a79_0x134dc8(0xb9),[salesforce_git_sync_service_1[a79_0x134dc8(0x107)],salesforce_rest_service_1[a79_0x134dc8(0xb4)],salesforce_sync_service_1[a79_0x134dc8(0xbd)],salesforce_service_1[a79_0x134dc8(0xdc)]])],GitCommitService),exports[a79_0x134dc8(0x108)]=GitCommitService;