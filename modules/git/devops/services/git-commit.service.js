const a129_0x119af4=a129_0x5d89;(function(_0x2004b9,_0x2ffc8d){const _0x4620b5=a129_0x5d89,_0x31ad57=_0x2004b9();while(!![]){try{const _0x4a7a96=parseInt(_0x4620b5(0x1c0))/0x1*(parseInt(_0x4620b5(0x1dd))/0x2)+-parseInt(_0x4620b5(0x1c3))/0x3+-parseInt(_0x4620b5(0x1b6))/0x4*(-parseInt(_0x4620b5(0x1d3))/0x5)+-parseInt(_0x4620b5(0x1d6))/0x6*(parseInt(_0x4620b5(0x1b2))/0x7)+-parseInt(_0x4620b5(0x195))/0x8+-parseInt(_0x4620b5(0x19f))/0x9*(parseInt(_0x4620b5(0x1bf))/0xa)+parseInt(_0x4620b5(0x1a5))/0xb;if(_0x4a7a96===_0x2ffc8d)break;else _0x31ad57['push'](_0x31ad57['shift']());}catch(_0x5d7282){_0x31ad57['push'](_0x31ad57['shift']());}}}(a129_0x10c4,0xdcedd));const a129_0x15f3cc=(function(){let _0x12a482=!![];return function(_0x1f5ca1,_0x3760f0){const _0x57a18b=_0x12a482?function(){const _0x2da366=a129_0x5d89;if(_0x3760f0){const _0x54dfd9=_0x3760f0[_0x2da366(0x1d4)](_0x1f5ca1,arguments);return _0x3760f0=null,_0x54dfd9;}}:function(){};return _0x12a482=![],_0x57a18b;};}()),a129_0x4ff7a5=a129_0x15f3cc(this,function(){const _0x15568e=a129_0x5d89;return a129_0x4ff7a5[_0x15568e(0x1aa)]()['search'](_0x15568e(0x1bb))[_0x15568e(0x1aa)]()[_0x15568e(0x18d)](a129_0x4ff7a5)[_0x15568e(0x1df)]('(((.+)+)+)+$');});a129_0x4ff7a5();'use strict';var __decorate=this&&this[a129_0x119af4(0x191)]||function(_0x3bd747,_0x5ee75d,_0x35696b,_0x35d35c){const _0xe48def=a129_0x119af4;var _0x5f0140=arguments['length'],_0x2d2bc2=_0x5f0140<0x3?_0x5ee75d:_0x35d35c===null?_0x35d35c=Object['getOwnPropertyDescriptor'](_0x5ee75d,_0x35696b):_0x35d35c,_0x2fdd88;if(typeof Reflect===_0xe48def(0x183)&&typeof Reflect[_0xe48def(0x1ce)]===_0xe48def(0x1b7))_0x2d2bc2=Reflect['decorate'](_0x3bd747,_0x5ee75d,_0x35696b,_0x35d35c);else{for(var _0x4d6774=_0x3bd747[_0xe48def(0x19d)]-0x1;_0x4d6774>=0x0;_0x4d6774--)if(_0x2fdd88=_0x3bd747[_0x4d6774])_0x2d2bc2=(_0x5f0140<0x3?_0x2fdd88(_0x2d2bc2):_0x5f0140>0x3?_0x2fdd88(_0x5ee75d,_0x35696b,_0x2d2bc2):_0x2fdd88(_0x5ee75d,_0x35696b))||_0x2d2bc2;}return _0x5f0140>0x3&&_0x2d2bc2&&Object[_0xe48def(0x197)](_0x5ee75d,_0x35696b,_0x2d2bc2),_0x2d2bc2;},__metadata=this&&this[a129_0x119af4(0x1d0)]||function(_0x1c5cef,_0x5a56f5){const _0x3cb505=a129_0x119af4;if(typeof Reflect===_0x3cb505(0x183)&&typeof Reflect[_0x3cb505(0x1c5)]===_0x3cb505(0x1b7))return Reflect[_0x3cb505(0x1c5)](_0x1c5cef,_0x5a56f5);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a129_0x119af4(0x185)]=void 0x0;function a129_0x5d89(_0x533e57,_0x8b3448){const _0x288820=a129_0x10c4();return a129_0x5d89=function(_0x4ff7a5,_0x15f3cc){_0x4ff7a5=_0x4ff7a5-0x183;let _0x10c49b=_0x288820[_0x4ff7a5];return _0x10c49b;},a129_0x5d89(_0x533e57,_0x8b3448);}const constants_1=require(a129_0x119af4(0x192)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a129_0x119af4(0x1ca)),typedi_1=require(a129_0x119af4(0x1b8)),salesforce_sync_service_1=require(a129_0x119af4(0x1a6)),salesforce_service_1=require(a129_0x119af4(0x1d7)),factory_parser_1=require(a129_0x119af4(0x1de)),path_utils_1=require(a129_0x119af4(0x1cb)),components_utils_1=require(a129_0x119af4(0x18b));let GitCommitService=class GitCommitService{constructor(_0x2ea361,_0x4981ab,_0x176905,_0x1b0fd6){const _0x4df74b=a129_0x119af4;this['salesforceGitSync']=_0x2ea361,this['salesforceRest']=_0x4981ab,this[_0x4df74b(0x1a3)]=_0x176905,this[_0x4df74b(0x190)]=_0x1b0fd6,this[_0x4df74b(0x1bd)]=0xc8;}get[a129_0x119af4(0x1b1)](){const _0x2ff2a4=a129_0x119af4;var _0x566dd5;return((_0x566dd5=this[_0x2ff2a4(0x1c1)])===null||_0x566dd5===void 0x0?void 0x0:_0x566dd5[_0x2ff2a4(0x1b1)])||'';}get['branchId'](){const _0xb11413=a129_0x119af4;var _0x20b059;return((_0x20b059=this[_0xb11413(0x1c1)])===null||_0x20b059===void 0x0?void 0x0:_0x20b059[_0xb11413(0x18e)])||'';}get[a129_0x119af4(0x1cd)](){const _0x5b21c0=a129_0x119af4;return this[_0x5b21c0(0x1c1)][_0x5b21c0(0x1a4)];}async['createCommit'](_0x30b719){const _0x3ab781=a129_0x119af4;return this[_0x3ab781(0x1d8)][_0x3ab781(0x194)](_0x30b719,this['repositoryId']);}async[a129_0x119af4(0x1be)](_0x102e73){const _0x3ab915=a129_0x119af4;if(this[_0x3ab915(0x1c1)]){const _0x3771d9=await this['salesforceSync'][_0x3ab915(0x1cf)](this[_0x3ab915(0x1c1)]),_0x4256b5=await this[_0x3ab915(0x190)][_0x3ab915(0x1a0)](_0x3771d9)[_0x3ab915(0x1dc)](_0x23c447=>typeof _0x23c447===_0x3ab915(0x193)?JSON[_0x3ab915(0x1c9)](_0x23c447):_0x23c447)[_0x3ab915(0x1af)](()=>({}));if(_0x4256b5[this[_0x3ab915(0x1cc)]['repositoryGit']]){if(_0x4256b5[this[_0x3ab915(0x1cc)][_0x3ab915(0x1a1)]]['lastCommit']===_0x102e73)return!![];}return![];}return![];}async[a129_0x119af4(0x18c)](_0x22c2ce){const _0x4ae727=a129_0x119af4;this[_0x4ae727(0x1c1)]&&await this['salesforceSync']['updateRemoteState'](this[_0x4ae727(0x1c1)],_0x22c2ce);}[a129_0x119af4(0x1ba)](){const _0x151fa6=a129_0x119af4;return this[_0x151fa6(0x1db)][_0x151fa6(0x1a2)](({fileName:_0x3d5fa8})=>_0x3d5fa8);}async[a129_0x119af4(0x186)](_0x454423,_0x29326f,_0x556d5f){const _0x1db46e=a129_0x119af4,_0x4258cf=await path_utils_1[_0x1db46e(0x1b0)][_0x1db46e(0x1d2)](this['syncRecord'][_0x1db46e(0x1a4)],_0x454423,_0x29326f,_0x556d5f),_0x484092=components_utils_1['ComponentsUtils'][_0x1db46e(0x184)](this[_0x1db46e(0x1db)],_0x454423,_0x556d5f,this['syncRecord'][_0x1db46e(0x1a4)]),_0x24be7a=factory_parser_1['FactoryParser'][_0x1db46e(0x187)]({'recordType':this['syncRecord'][_0x1db46e(0x1a4)],'sourceDir':_0x29326f,'paths':_0x4258cf}),_0x4e23d0=await _0x24be7a[_0x1db46e(0x189)](),_0x1ef774=[],_0x323568=[];for(const _0x23909e of _0x4e23d0){const _0x3f9b0e=_0x484092[_0x1db46e(0x198)](_0x318746=>_0x318746['name']===_0x23909e['name']&&_0x318746['type']===_0x23909e['type']);if(!_0x3f9b0e){_0x1ef774[_0x1db46e(0x196)](_0x23909e);continue;}_0x23909e['crc']!==_0x3f9b0e[_0x1db46e(0x1ab)]&&_0x323568['push']({'meta':_0x3f9b0e,'component':_0x23909e}),_0x484092[_0x1db46e(0x1c8)](_0x484092[_0x1db46e(0x1b5)](_0x3f9b0e),0x1);}return{'inserted':_0x1ef774,'modified':_0x323568,'removed':_0x484092};}async[a129_0x119af4(0x1ac)](){const _0x4b0425=a129_0x119af4;this['syncRecord']=this[_0x4b0425(0x1cc)][_0x4b0425(0x1a9)]===_0x4b0425(0x1c6)?await this[_0x4b0425(0x1a3)][_0x4b0425(0x1c7)](this[_0x4b0425(0x1cc)]['repository']):await this[_0x4b0425(0x1a3)][_0x4b0425(0x1b4)](this['gitCommit'][_0x4b0425(0x1a9)]),this['recordTypes']=await this[_0x4b0425(0x1d8)][_0x4b0425(0x199)]();}async[a129_0x119af4(0x1ae)](_0x3cc248){const _0x5d851e=a129_0x119af4;if(this[_0x5d851e(0x1cc)][_0x5d851e(0x19b)]||_0x3cc248){this[_0x5d851e(0x1db)]=this['branchId']?await this[_0x5d851e(0x1d8)][_0x5d851e(0x18f)](this[_0x5d851e(0x18e)]):await this[_0x5d851e(0x1d8)]['fetchRepositoryComponents'](this[_0x5d851e(0x1b1)]);return;}const _0x2d037e=components_utils_1['ComponentsUtils'][_0x5d851e(0x19c)](this[_0x5d851e(0x1cc)][_0x5d851e(0x1a8)],this['syncRecord'][_0x5d851e(0x1a4)]);this[_0x5d851e(0x1db)]=[];while(_0x2d037e[_0x5d851e(0x19d)]){const _0x4db50a=_0x2d037e['splice'](0x0,this[_0x5d851e(0x1bd)]),_0x4ece35=this['branchId']?await this[_0x5d851e(0x1d8)][_0x5d851e(0x1c2)](_0x4db50a,this[_0x5d851e(0x18e)]):await this[_0x5d851e(0x1d8)]['fetchRepositoryComponentsByFilenames'](_0x4db50a,this[_0x5d851e(0x1b1)]);this[_0x5d851e(0x1db)][_0x5d851e(0x196)](..._0x4ece35);}}async[a129_0x119af4(0x1c4)](_0x132b9f){const _0x3891e2=a129_0x119af4;this[_0x3891e2(0x18e)]?await this[_0x3891e2(0x1b3)][_0x3891e2(0x1da)](constants_1['FLOSUM_BRANCH'],this[_0x3891e2(0x18e)],{[constants_1[_0x3891e2(0x19e)]+_0x3891e2(0x18a)]:_0x132b9f,[constants_1['FLOSUM_NAMESPACE']+_0x3891e2(0x1d5)]:Date[_0x3891e2(0x1bc)]()}):await this[_0x3891e2(0x1b3)][_0x3891e2(0x1da)](constants_1[_0x3891e2(0x1b9)],this[_0x3891e2(0x1b1)],{[constants_1[_0x3891e2(0x19e)]+_0x3891e2(0x18a)]:_0x132b9f});}[a129_0x119af4(0x188)](_0x392491){const _0x2aad84=a129_0x119af4;this[_0x2aad84(0x1cc)]=_0x392491;}[a129_0x119af4(0x1d1)](){return this['recordTypes'];}['getRepositoryId'](){const _0x2ef2d4=a129_0x119af4;return this[_0x2ef2d4(0x1b1)];}['getBranchId'](){const _0x54cc0e=a129_0x119af4;return this[_0x54cc0e(0x18e)];}};function a129_0x10c4(){const _0x451d83=['metadata','master','getRepositoryRecordByName','splice','parse','../../salesforce/services/salesforce-rest.service','../utils/path.utils','gitCommit','recordType','decorate','getRemoteStateAttachmentId','__metadata','getRecordTypes','readComponentPaths','2811265jJsoAy','apply','Last_Updated_On__c','6lfANNt','../../salesforce/services/salesforce.service','salesforceGitSync','SalesforceService','patch','componentsMetadata','then','2018hODfwm','../../parsers/factory.parser','search','object','filterMetadataComponents','GitCommitService','proceedFile','create','setCommitDto','execute','Synchronization_Status__c','../utils/components.utils','updateRemoteState','constructor','branchId','fetchBranchComponents','salesforce','__decorate','../../../../constants','string','createCommit','9912272CoJCXr','push','defineProperty','find','getComponentRecordTypes','SalesforceRestService','force','prepareComponentNamesForFetchMetadata','length','FLOSUM_GIT_NAMESPACE','49581mmHaFi','retrieveAttachment','repositoryGit','map','salesforceSync','recordTypeName','21980244WoiUuL','../../salesforce/services/salesforce-sync.service','SalesforceSyncService','fileNames','branch','toString','crc32','fetchRepositoryOrBranchData','SalesforceGitSyncService','fetchComponentsMetadata','catch','PathUtils','repositoryId','7401037QXlmdG','salesforceRest','getBranchRecordByName','indexOf','12AZZXRH','function','typedi','FLOSUM_REPOSITORY','getUnusedComponentsFilePaths','(((.+)+)+)+$','now','TASKS_PER_TICK','checkSyncStatus','670AJOoMI','563rPpmMx','syncRecord','fetchBranchComponentsByFilenames','2048031gwRKdv','updateStatus'];a129_0x10c4=function(){return _0x451d83;};return a129_0x10c4();}GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a129_0x119af4(0x1ad)],salesforce_rest_service_1[a129_0x119af4(0x19a)],salesforce_sync_service_1[a129_0x119af4(0x1a7)],salesforce_service_1[a129_0x119af4(0x1d9)]])],GitCommitService),exports['GitCommitService']=GitCommitService;