const a110_0x12911e=a110_0x28e4;(function(_0x460e75,_0x2921a6){const _0x5a5cdd=a110_0x28e4,_0x10d576=_0x460e75();while(!![]){try{const _0x18833d=parseInt(_0x5a5cdd(0x182))/0x1+-parseInt(_0x5a5cdd(0x169))/0x2+-parseInt(_0x5a5cdd(0x17e))/0x3+-parseInt(_0x5a5cdd(0x176))/0x4*(parseInt(_0x5a5cdd(0x15c))/0x5)+-parseInt(_0x5a5cdd(0x16a))/0x6+-parseInt(_0x5a5cdd(0x193))/0x7*(parseInt(_0x5a5cdd(0x18d))/0x8)+-parseInt(_0x5a5cdd(0x1a4))/0x9*(-parseInt(_0x5a5cdd(0x188))/0xa);if(_0x18833d===_0x2921a6)break;else _0x10d576['push'](_0x10d576['shift']());}catch(_0x5b01b1){_0x10d576['push'](_0x10d576['shift']());}}}(a110_0xb6ad,0x73ab8));const a110_0x30cc6f=(function(){let _0x1d13ce=!![];return function(_0x45eba3,_0x23b2a1){const _0x7a6eb1=_0x1d13ce?function(){const _0x11b9fa=a110_0x28e4;if(_0x23b2a1){const _0x209612=_0x23b2a1[_0x11b9fa(0x1a7)](_0x45eba3,arguments);return _0x23b2a1=null,_0x209612;}}:function(){};return _0x1d13ce=![],_0x7a6eb1;};}()),a110_0x16c6a4=a110_0x30cc6f(this,function(){const _0x159ee1=a110_0x28e4;return a110_0x16c6a4['toString']()[_0x159ee1(0x196)](_0x159ee1(0x15b))[_0x159ee1(0x199)]()[_0x159ee1(0x1af)](a110_0x16c6a4)[_0x159ee1(0x196)]('(((.+)+)+)+$');});a110_0x16c6a4();function a110_0x28e4(_0x277d53,_0xbe1dfe){const _0x1e1ba3=a110_0xb6ad();return a110_0x28e4=function(_0x16c6a4,_0x30cc6f){_0x16c6a4=_0x16c6a4-0x151;let _0xb6ade3=_0x1e1ba3[_0x16c6a4];return _0xb6ade3;},a110_0x28e4(_0x277d53,_0xbe1dfe);}function a110_0xb6ad(){const _0x1d498b=['FLOSUM_GIT_NAMESPACE','SalesforceService','length','typedi','Service','getRecordTypes','../../salesforce/services/salesforce-git-sync.service','7105761PHKGwz','lastCommit','parse','apply','master','now','catch','fetchRepositoryComponentsByFilenames','getRepositoryRecordByName','../../../../constants','repositoryGit','constructor','getBranchId','type','setCommitDto','gitCommit','SalesforceGitSyncService','fetchBranchComponentsByFilenames','readFilesByFilename','force','fetchRepositoryComponents','getRepositoryId','(((.+)+)+)+$','40405stWZvf','map','SalesforceSyncService','salesforce','retrieveAttachment','recordTypes','fileName','filter','string','__esModule','SalesforceRestService','function','FLOSUM_NAMESPACE','662996ZkspJo','985446elMsdk','crc','filterParserPaths','FLOSUM_BRANCH','updateRemoteState','../../salesforce/services/salesforce.service','fileNames','([./-]{1}|$)','splice','branchId','then','updateStatus','8ySYGlt','repositoryId','checkSyncStatus','defineProperty','replace','fetchBranchComponents','createCommit','metadata','891888pZGsPS','GitCommitService','decorate','syncRecord','428528XmcfWu','META_XML_EXTENSION','TASKS_PER_TICK','getComponentRecordTypes','../../parsers/utils','componentsMetadata','20LvcWpO','branch','match','find','Last_Updated_On__c','55208FRYCLD','getUnusedComponentsFilePaths','patch','FLOSUM_REPOSITORY','fetchRepositoryOrBranchData','salesforceRest','735itUMgh','push','__decorate','search','repository','salesforceGitSync','toString','name','fetchComponentsMetadata','salesforceSync'];a110_0xb6ad=function(){return _0x1d498b;};return a110_0xb6ad();}'use strict';var __decorate=this&&this[a110_0x12911e(0x195)]||function(_0x1be85a,_0x5ac7e3,_0x17391d,_0x40491a){const _0x5560ba=a110_0x12911e;var _0x1066e9=arguments['length'],_0x3c1e74=_0x1066e9<0x3?_0x5ac7e3:_0x40491a===null?_0x40491a=Object['getOwnPropertyDescriptor'](_0x5ac7e3,_0x17391d):_0x40491a,_0x270e35;if(typeof Reflect==='object'&&typeof Reflect[_0x5560ba(0x180)]===_0x5560ba(0x167))_0x3c1e74=Reflect[_0x5560ba(0x180)](_0x1be85a,_0x5ac7e3,_0x17391d,_0x40491a);else{for(var _0x1c9f15=_0x1be85a[_0x5560ba(0x19f)]-0x1;_0x1c9f15>=0x0;_0x1c9f15--)if(_0x270e35=_0x1be85a[_0x1c9f15])_0x3c1e74=(_0x1066e9<0x3?_0x270e35(_0x3c1e74):_0x1066e9>0x3?_0x270e35(_0x5ac7e3,_0x17391d,_0x3c1e74):_0x270e35(_0x5ac7e3,_0x17391d))||_0x3c1e74;}return _0x1066e9>0x3&&_0x3c1e74&&Object[_0x5560ba(0x179)](_0x5ac7e3,_0x17391d,_0x3c1e74),_0x3c1e74;},__metadata=this&&this['__metadata']||function(_0x39114f,_0x2cfe5e){const _0x2df791=a110_0x12911e;if(typeof Reflect==='object'&&typeof Reflect[_0x2df791(0x17d)]===_0x2df791(0x167))return Reflect[_0x2df791(0x17d)](_0x39114f,_0x2cfe5e);};Object[a110_0x12911e(0x179)](exports,a110_0x12911e(0x165),{'value':!![]}),exports[a110_0x12911e(0x17f)]=void 0x0;const constants_1=require(a110_0x12911e(0x1ad)),salesforce_git_sync_service_1=require(a110_0x12911e(0x1a3)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a110_0x12911e(0x1a0)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a110_0x12911e(0x16f)),utils_1=require(a110_0x12911e(0x186)),factory_parser_1=require('../../parsers/mdapi/factory.parser'),vlocity_1=require('../../parsers/utils/vlocity');let GitCommitService=class GitCommitService{constructor(_0xfa574f,_0x379ce4,_0x453b7d,_0x17555a){const _0x5eb182=a110_0x12911e;this[_0x5eb182(0x198)]=_0xfa574f,this[_0x5eb182(0x192)]=_0x379ce4,this[_0x5eb182(0x19c)]=_0x453b7d,this[_0x5eb182(0x15f)]=_0x17555a,this['TASKS_PER_TICK']=0xc8;}get[a110_0x12911e(0x177)](){const _0x3188dc=a110_0x12911e;var _0x3917c1;return((_0x3917c1=this[_0x3188dc(0x181)])===null||_0x3917c1===void 0x0?void 0x0:_0x3917c1[_0x3188dc(0x177)])||'';}get[a110_0x12911e(0x173)](){const _0x346302=a110_0x12911e;var _0x1972d9;return((_0x1972d9=this[_0x346302(0x181)])===null||_0x1972d9===void 0x0?void 0x0:_0x1972d9[_0x346302(0x173)])||'';}async[a110_0x12911e(0x17c)](_0x47f6f5){const _0x51d071=a110_0x12911e;return this[_0x51d071(0x198)][_0x51d071(0x17c)](_0x47f6f5,this[_0x51d071(0x177)]);}async[a110_0x12911e(0x178)](_0x5d87ac){const _0x2103ed=a110_0x12911e;if(this[_0x2103ed(0x181)]){const _0x228641=await this[_0x2103ed(0x19c)]['getRemoteStateAttachmentId'](this[_0x2103ed(0x181)]),_0x403efe=await this['salesforce'][_0x2103ed(0x160)](_0x228641)[_0x2103ed(0x174)](_0x1784d7=>typeof _0x1784d7===_0x2103ed(0x164)?JSON['parse'](_0x1784d7):_0x1784d7)[_0x2103ed(0x1aa)](()=>({}));if(_0x403efe[this['gitCommit'][_0x2103ed(0x1ae)]]){if(_0x403efe[this[_0x2103ed(0x154)][_0x2103ed(0x1ae)]][_0x2103ed(0x1a5)]===_0x5d87ac)return!![];}return![];}return![];}async[a110_0x12911e(0x16e)](_0x59e5ce){const _0x2c362a=a110_0x12911e;this[_0x2c362a(0x181)]&&await this[_0x2c362a(0x19c)]['updateRemoteState'](this[_0x2c362a(0x181)],_0x59e5ce);}[a110_0x12911e(0x18e)](){const _0x4aa25f=a110_0x12911e;return this['componentsMetadata'][_0x4aa25f(0x15d)](({fileName:_0x2b1e95})=>_0x2b1e95);}async['proceedFile'](_0x1df236,_0x3ad7cc,_0x83a11){const _0x1d39a1=a110_0x12911e,_0xd0ab7e=new RegExp('^'+_0x1df236+_0x1d39a1(0x171));let _0x2c50ac=[_0x1df236];_0x83a11&&!(0x0,vlocity_1['isVlocityComponent'])(_0x1df236)&&(_0x2c50ac=(0x0,utils_1[_0x1d39a1(0x16c)])(await(0x0,utils_1[_0x1d39a1(0x157)])(_0x1df236,_0x3ad7cc)[_0x1d39a1(0x1aa)](()=>[])));const _0x4d9617=_0x83a11?this[_0x1d39a1(0x187)][_0x1d39a1(0x163)](_0x15e978=>_0x15e978[_0x1d39a1(0x162)][_0x1d39a1(0x18a)](_0xd0ab7e)):this[_0x1d39a1(0x187)]['filter'](_0xd04f6c=>_0xd04f6c[_0x1d39a1(0x162)]===_0x1df236||_0xd04f6c[_0x1d39a1(0x162)]===_0x1df236[_0x1d39a1(0x17a)](constants_1[_0x1d39a1(0x183)],'')),_0x1d80bc=factory_parser_1['FactoryParser']['create'](_0x3ad7cc,_0x2c50ac),_0x4875d7=await _0x1d80bc[_0x1d39a1(0x1a6)](),_0x3a6f32=[],_0x45d195=[];for(const _0x5aafe1 of _0x4875d7){const _0x2c09a2=_0x4d9617[_0x1d39a1(0x18b)](_0x1748e1=>_0x1748e1[_0x1d39a1(0x19a)]===_0x5aafe1[_0x1d39a1(0x19a)]&&_0x1748e1[_0x1d39a1(0x152)]===_0x5aafe1[_0x1d39a1(0x152)]);if(!_0x2c09a2){_0x3a6f32[_0x1d39a1(0x194)](_0x5aafe1);continue;}_0x5aafe1[_0x1d39a1(0x16b)]!==_0x2c09a2['crc32']&&_0x45d195[_0x1d39a1(0x194)]({'meta':_0x2c09a2,'component':_0x5aafe1}),_0x4d9617[_0x1d39a1(0x172)](_0x4d9617['indexOf'](_0x2c09a2),0x1);}return{'inserted':_0x3a6f32,'modified':_0x45d195,'removed':_0x4d9617};}async[a110_0x12911e(0x191)](){const _0x320623=a110_0x12911e;this['syncRecord']=this[_0x320623(0x154)][_0x320623(0x189)]===_0x320623(0x1a8)?await this[_0x320623(0x19c)][_0x320623(0x1ac)](this[_0x320623(0x154)][_0x320623(0x197)]):await this['salesforceSync']['getBranchRecordByName'](this['gitCommit'][_0x320623(0x189)]),this[_0x320623(0x161)]=await this[_0x320623(0x198)][_0x320623(0x185)]();}async[a110_0x12911e(0x19b)](_0x442094){const _0x41181f=a110_0x12911e;if(this[_0x41181f(0x154)][_0x41181f(0x158)]||_0x442094){this['componentsMetadata']=this[_0x41181f(0x173)]?await this[_0x41181f(0x198)][_0x41181f(0x17b)](this[_0x41181f(0x173)]):await this[_0x41181f(0x198)][_0x41181f(0x159)](this[_0x41181f(0x177)]);return;}const _0x5092dd=[...new Set(this[_0x41181f(0x154)][_0x41181f(0x170)][_0x41181f(0x15d)](_0xb214d5=>_0xb214d5['replace'](constants_1[_0x41181f(0x183)],'')))];this[_0x41181f(0x187)]=[];while(_0x5092dd['length']){const _0x1920fe=_0x5092dd[_0x41181f(0x172)](0x0,this[_0x41181f(0x184)]),_0x724c2c=this[_0x41181f(0x173)]?await this['salesforceGitSync'][_0x41181f(0x156)](_0x1920fe,this['branchId']):await this['salesforceGitSync'][_0x41181f(0x1ab)](_0x1920fe,this[_0x41181f(0x177)]);this[_0x41181f(0x187)][_0x41181f(0x194)](..._0x724c2c);}}async[a110_0x12911e(0x175)](_0x597d82){const _0x4d40ac=a110_0x12911e;this[_0x4d40ac(0x173)]?await this[_0x4d40ac(0x192)]['patch'](constants_1[_0x4d40ac(0x16d)],this[_0x4d40ac(0x173)],{[constants_1[_0x4d40ac(0x19d)]+'Synchronization_Status__c']:_0x597d82,[constants_1[_0x4d40ac(0x168)]+_0x4d40ac(0x18c)]:Date[_0x4d40ac(0x1a9)]()}):await this[_0x4d40ac(0x192)][_0x4d40ac(0x18f)](constants_1[_0x4d40ac(0x190)],this[_0x4d40ac(0x177)],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0x597d82});}[a110_0x12911e(0x153)](_0x559ff4){const _0x57fd5b=a110_0x12911e;this[_0x57fd5b(0x154)]=_0x559ff4;}[a110_0x12911e(0x1a2)](){return this['recordTypes'];}[a110_0x12911e(0x15a)](){const _0x2fc2e0=a110_0x12911e;return this[_0x2fc2e0(0x177)];}[a110_0x12911e(0x151)](){const _0x11855c=a110_0x12911e;return this[_0x11855c(0x173)];}};GitCommitService=__decorate([(0x0,typedi_1[a110_0x12911e(0x1a1)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a110_0x12911e(0x155)],salesforce_rest_service_1[a110_0x12911e(0x166)],salesforce_sync_service_1[a110_0x12911e(0x15e)],salesforce_service_1[a110_0x12911e(0x19e)]])],GitCommitService),exports[a110_0x12911e(0x17f)]=GitCommitService;