const a110_0x432d72=a110_0x4ef3;(function(_0x32d2fd,_0x2bcbad){const _0x501b7d=a110_0x4ef3,_0x566c62=_0x32d2fd();while(!![]){try{const _0x32e379=parseInt(_0x501b7d(0xe0))/0x1+-parseInt(_0x501b7d(0xba))/0x2+-parseInt(_0x501b7d(0xf9))/0x3+parseInt(_0x501b7d(0xe4))/0x4+parseInt(_0x501b7d(0xf7))/0x5*(-parseInt(_0x501b7d(0xaf))/0x6)+parseInt(_0x501b7d(0xdb))/0x7*(-parseInt(_0x501b7d(0xf8))/0x8)+parseInt(_0x501b7d(0xa2))/0x9;if(_0x32e379===_0x2bcbad)break;else _0x566c62['push'](_0x566c62['shift']());}catch(_0x5b920b){_0x566c62['push'](_0x566c62['shift']());}}}(a110_0x563e,0xed094));const a110_0x16ab7d=(function(){let _0x5614fc=!![];return function(_0x5e418f,_0xe7a39){const _0x944674=_0x5614fc?function(){if(_0xe7a39){const _0x43e2c3=_0xe7a39['apply'](_0x5e418f,arguments);return _0xe7a39=null,_0x43e2c3;}}:function(){};return _0x5614fc=![],_0x944674;};}()),a110_0x2fd8bb=a110_0x16ab7d(this,function(){const _0x108295=a110_0x4ef3;return a110_0x2fd8bb[_0x108295(0xb8)]()[_0x108295(0xa7)](_0x108295(0xcb))[_0x108295(0xb8)]()['constructor'](a110_0x2fd8bb)[_0x108295(0xa7)](_0x108295(0xcb));});function a110_0x563e(){const _0x56fe23=['filterParserPaths','14hTSEbA','FLOSUM_REPOSITORY','type','salesforce','map','574995lcPOBt','fileNames','__metadata','object','1743612GDIrlS','__esModule','crc32','isVlocityComponent','META_XML_EXTENSION','branchId','catch','decorate','SalesforceSyncService','defineProperty','fetchRepositoryComponentsByFilenames','SalesforceGitSyncService','find','checkSyncStatus','../../salesforce/services/salesforce-rest.service','crc','FactoryParser','getRemoteStateAttachmentId','salesforceSync','15Dhfwct','2884040yeEthI','4658880ILyLOB','proceedFile','patch','../../parsers/utils','../../salesforce/services/salesforce-sync.service','41409234DJlOIZ','fetchRepositoryComponents','FLOSUM_GIT_NAMESPACE','Last_Updated_On__c','force','search','FLOSUM_BRANCH','getUnusedComponentsFilePaths','fetchBranchComponents','repositoryGit','FLOSUM_NAMESPACE','getRecordTypes','getRepositoryRecordByName','2445234HsMHRE','parse','../../../../constants','then','GitCommitService','updateRemoteState','__decorate','salesforceGitSync','recordTypes','toString','SalesforceService','2288874jtoOxw','../../salesforce/services/salesforce.service','repositoryId','splice','getComponentRecordTypes','metadata','Synchronization_Status__c','TASKS_PER_TICK','setCommitDto','now','design:paramtypes','create','fileName','fetchComponentsMetadata','../../salesforce/services/salesforce-git-sync.service','salesforceRest','function','(((.+)+)+)+$','gitCommit','SalesforceRestService','push','branch','getRepositoryId','length','master','replace','syncRecord','updateStatus','componentsMetadata','filter','createCommit','../../parsers/utils/vlocity'];a110_0x563e=function(){return _0x56fe23;};return a110_0x563e();}a110_0x2fd8bb();'use strict';var __decorate=this&&this[a110_0x432d72(0xb5)]||function(_0x23188c,_0x5c8e14,_0x31e0ff,_0x544ee2){const _0x1b45a4=a110_0x432d72;var _0x5eb904=arguments[_0x1b45a4(0xd1)],_0x55f9ec=_0x5eb904<0x3?_0x5c8e14:_0x544ee2===null?_0x544ee2=Object['getOwnPropertyDescriptor'](_0x5c8e14,_0x31e0ff):_0x544ee2,_0x51f6c5;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1b45a4(0xca))_0x55f9ec=Reflect[_0x1b45a4(0xeb)](_0x23188c,_0x5c8e14,_0x31e0ff,_0x544ee2);else{for(var _0x580212=_0x23188c[_0x1b45a4(0xd1)]-0x1;_0x580212>=0x0;_0x580212--)if(_0x51f6c5=_0x23188c[_0x580212])_0x55f9ec=(_0x5eb904<0x3?_0x51f6c5(_0x55f9ec):_0x5eb904>0x3?_0x51f6c5(_0x5c8e14,_0x31e0ff,_0x55f9ec):_0x51f6c5(_0x5c8e14,_0x31e0ff))||_0x55f9ec;}return _0x5eb904>0x3&&_0x55f9ec&&Object[_0x1b45a4(0xed)](_0x5c8e14,_0x31e0ff,_0x55f9ec),_0x55f9ec;},__metadata=this&&this[a110_0x432d72(0xe2)]||function(_0x7f6dc7,_0x3fd92d){const _0x500eb9=a110_0x432d72;if(typeof Reflect===_0x500eb9(0xe3)&&typeof Reflect[_0x500eb9(0xbf)]===_0x500eb9(0xca))return Reflect[_0x500eb9(0xbf)](_0x7f6dc7,_0x3fd92d);};Object[a110_0x432d72(0xed)](exports,a110_0x432d72(0xe5),{'value':!![]}),exports[a110_0x432d72(0xb3)]=void 0x0;function a110_0x4ef3(_0x570d24,_0x2fad85){const _0x304bf0=a110_0x563e();return a110_0x4ef3=function(_0x2fd8bb,_0x16ab7d){_0x2fd8bb=_0x2fd8bb-0xa0;let _0x563ec1=_0x304bf0[_0x2fd8bb];return _0x563ec1;},a110_0x4ef3(_0x570d24,_0x2fad85);}const constants_1=require(a110_0x432d72(0xb1)),salesforce_git_sync_service_1=require(a110_0x432d72(0xc8)),salesforce_rest_service_1=require(a110_0x432d72(0xf2)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a110_0x432d72(0xa1)),salesforce_service_1=require(a110_0x432d72(0xbb)),utils_1=require(a110_0x432d72(0xa0)),factory_parser_1=require('../../parsers/mdapi/factory.parser'),vlocity_1=require(a110_0x432d72(0xd9));let GitCommitService=class GitCommitService{constructor(_0x54ec3a,_0x48fa4e,_0x153ce2,_0x331d3f){const _0x25af8f=a110_0x432d72;this['salesforceGitSync']=_0x54ec3a,this[_0x25af8f(0xc9)]=_0x48fa4e,this['salesforceSync']=_0x153ce2,this['salesforce']=_0x331d3f,this[_0x25af8f(0xc1)]=0xc8;}get[a110_0x432d72(0xbc)](){var _0x59a626;return((_0x59a626=this['syncRecord'])===null||_0x59a626===void 0x0?void 0x0:_0x59a626['repositoryId'])||'';}get[a110_0x432d72(0xe9)](){const _0x45938e=a110_0x432d72;var _0x250582;return((_0x250582=this[_0x45938e(0xd4)])===null||_0x250582===void 0x0?void 0x0:_0x250582['branchId'])||'';}async['createCommit'](_0x438f31){const _0x40f0c6=a110_0x432d72;return this[_0x40f0c6(0xb6)][_0x40f0c6(0xd8)](_0x438f31,this['repositoryId']);}async[a110_0x432d72(0xf1)](_0xb278ed){const _0x460940=a110_0x432d72;if(this[_0x460940(0xd4)]){const _0x2177b1=await this[_0x460940(0xf6)][_0x460940(0xf5)](this[_0x460940(0xd4)]),_0xbd1ae0=await this[_0x460940(0xde)]['retrieveAttachment'](_0x2177b1)[_0x460940(0xb2)](_0x53056f=>typeof _0x53056f==='string'?JSON[_0x460940(0xb0)](_0x53056f):_0x53056f)[_0x460940(0xea)](()=>({}));if(_0xbd1ae0[this[_0x460940(0xcc)]['repositoryGit']]){if(_0xbd1ae0[this[_0x460940(0xcc)][_0x460940(0xab)]]['lastCommit']===_0xb278ed)return!![];}return![];}return![];}async['updateRemoteState'](_0xd9b315){const _0x56bd8a=a110_0x432d72;this[_0x56bd8a(0xd4)]&&await this['salesforceSync'][_0x56bd8a(0xb4)](this[_0x56bd8a(0xd4)],_0xd9b315);}[a110_0x432d72(0xa9)](){const _0x5b3b8a=a110_0x432d72;return this[_0x5b3b8a(0xd6)][_0x5b3b8a(0xdf)](({fileName:_0x27dc9b})=>_0x27dc9b);}async[a110_0x432d72(0xfa)](_0x20eef5,_0x51f97b,_0xd6d610){const _0x59c9e5=a110_0x432d72,_0x178bc6=new RegExp('^'+_0x20eef5+'([./-]{1}|$)');let _0x580894=[_0x20eef5];_0xd6d610&&!(0x0,vlocity_1[_0x59c9e5(0xe7)])(_0x20eef5)&&(_0x580894=(0x0,utils_1[_0x59c9e5(0xda)])(await(0x0,utils_1['readFilesByFilename'])(_0x20eef5,_0x51f97b)[_0x59c9e5(0xea)](()=>[])));const _0x344f02=_0xd6d610?this[_0x59c9e5(0xd6)][_0x59c9e5(0xd7)](_0x54556f=>_0x54556f[_0x59c9e5(0xc6)]['match'](_0x178bc6)):this[_0x59c9e5(0xd6)]['filter'](_0x5a5e9b=>_0x5a5e9b[_0x59c9e5(0xc6)]===_0x20eef5||_0x5a5e9b[_0x59c9e5(0xc6)]===_0x20eef5[_0x59c9e5(0xd3)](constants_1['META_XML_EXTENSION'],'')),_0x3c848e=factory_parser_1[_0x59c9e5(0xf4)][_0x59c9e5(0xc5)](_0x51f97b,_0x580894),_0x418bf8=await _0x3c848e[_0x59c9e5(0xb0)](),_0x58a2dc=[],_0x28847d=[];for(const _0x171781 of _0x418bf8){const _0x48a825=_0x344f02[_0x59c9e5(0xf0)](_0x4e626c=>_0x4e626c['name']===_0x171781['name']&&_0x4e626c[_0x59c9e5(0xdd)]===_0x171781[_0x59c9e5(0xdd)]);if(!_0x48a825){_0x58a2dc[_0x59c9e5(0xce)](_0x171781);continue;}_0x171781[_0x59c9e5(0xf3)]!==_0x48a825[_0x59c9e5(0xe6)]&&_0x28847d['push']({'meta':_0x48a825,'component':_0x171781}),_0x344f02[_0x59c9e5(0xbd)](_0x344f02['indexOf'](_0x48a825),0x1);}return{'inserted':_0x58a2dc,'modified':_0x28847d,'removed':_0x344f02};}async['fetchRepositoryOrBranchData'](){const _0x56c0d0=a110_0x432d72;this[_0x56c0d0(0xd4)]=this[_0x56c0d0(0xcc)][_0x56c0d0(0xcf)]===_0x56c0d0(0xd2)?await this[_0x56c0d0(0xf6)][_0x56c0d0(0xae)](this[_0x56c0d0(0xcc)]['repository']):await this[_0x56c0d0(0xf6)]['getBranchRecordByName'](this[_0x56c0d0(0xcc)][_0x56c0d0(0xcf)]),this[_0x56c0d0(0xb7)]=await this[_0x56c0d0(0xb6)][_0x56c0d0(0xbe)]();}async[a110_0x432d72(0xc7)](_0x2b65b8){const _0x4b7272=a110_0x432d72;if(this[_0x4b7272(0xcc)][_0x4b7272(0xa6)]||_0x2b65b8){this[_0x4b7272(0xd6)]=this['branchId']?await this[_0x4b7272(0xb6)][_0x4b7272(0xaa)](this[_0x4b7272(0xe9)]):await this[_0x4b7272(0xb6)][_0x4b7272(0xa3)](this['repositoryId']);return;}const _0x47a9d3=[...new Set(this[_0x4b7272(0xcc)][_0x4b7272(0xe1)][_0x4b7272(0xdf)](_0x5c9ca4=>_0x5c9ca4['replace'](constants_1[_0x4b7272(0xe8)],'')))];this[_0x4b7272(0xd6)]=[];while(_0x47a9d3[_0x4b7272(0xd1)]){const _0xa76d31=_0x47a9d3[_0x4b7272(0xbd)](0x0,this[_0x4b7272(0xc1)]),_0x138940=this[_0x4b7272(0xe9)]?await this[_0x4b7272(0xb6)]['fetchBranchComponentsByFilenames'](_0xa76d31,this[_0x4b7272(0xe9)]):await this[_0x4b7272(0xb6)][_0x4b7272(0xee)](_0xa76d31,this[_0x4b7272(0xbc)]);this[_0x4b7272(0xd6)][_0x4b7272(0xce)](..._0x138940);}}async[a110_0x432d72(0xd5)](_0x576a57){const _0x543922=a110_0x432d72;this['branchId']?await this[_0x543922(0xc9)][_0x543922(0xfb)](constants_1[_0x543922(0xa8)],this[_0x543922(0xe9)],{[constants_1[_0x543922(0xa4)]+'Synchronization_Status__c']:_0x576a57,[constants_1[_0x543922(0xac)]+_0x543922(0xa5)]:Date[_0x543922(0xc3)]()}):await this['salesforceRest'][_0x543922(0xfb)](constants_1[_0x543922(0xdc)],this['repositoryId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x543922(0xc0)]:_0x576a57});}[a110_0x432d72(0xc2)](_0x16fdec){const _0x5c17e4=a110_0x432d72;this[_0x5c17e4(0xcc)]=_0x16fdec;}[a110_0x432d72(0xad)](){const _0x5438d1=a110_0x432d72;return this[_0x5438d1(0xb7)];}[a110_0x432d72(0xd0)](){const _0x11d345=a110_0x432d72;return this[_0x11d345(0xbc)];}['getBranchId'](){const _0x3b4374=a110_0x432d72;return this[_0x3b4374(0xe9)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a110_0x432d72(0xc4),[salesforce_git_sync_service_1[a110_0x432d72(0xef)],salesforce_rest_service_1[a110_0x432d72(0xcd)],salesforce_sync_service_1[a110_0x432d72(0xec)],salesforce_service_1[a110_0x432d72(0xb9)]])],GitCommitService),exports[a110_0x432d72(0xb3)]=GitCommitService;