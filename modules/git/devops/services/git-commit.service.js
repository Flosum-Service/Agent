const a130_0x5c8e2c=a130_0x312b;(function(_0x14f47b,_0x5d73d8){const _0x27a9c9=a130_0x312b,_0xfd2321=_0x14f47b();while(!![]){try{const _0x146eaa=parseInt(_0x27a9c9(0x100))/0x1+-parseInt(_0x27a9c9(0xf4))/0x2+parseInt(_0x27a9c9(0x11c))/0x3+parseInt(_0x27a9c9(0x101))/0x4+-parseInt(_0x27a9c9(0xf9))/0x5+parseInt(_0x27a9c9(0x14d))/0x6+parseInt(_0x27a9c9(0x120))/0x7*(-parseInt(_0x27a9c9(0x128))/0x8);if(_0x146eaa===_0x5d73d8)break;else _0xfd2321['push'](_0xfd2321['shift']());}catch(_0x20baaa){_0xfd2321['push'](_0xfd2321['shift']());}}}(a130_0x36dc,0x9db16));const a130_0x1e7622=(function(){let _0x382f47=!![];return function(_0x3b3db0,_0x4e62c8){const _0x2d662f=_0x382f47?function(){const _0x5670e3=a130_0x312b;if(_0x4e62c8){const _0x15bba3=_0x4e62c8[_0x5670e3(0x13e)](_0x3b3db0,arguments);return _0x4e62c8=null,_0x15bba3;}}:function(){};return _0x382f47=![],_0x2d662f;};}()),a130_0x38db6b=a130_0x1e7622(this,function(){const _0x134fda=a130_0x312b;return a130_0x38db6b[_0x134fda(0x11f)]()[_0x134fda(0x138)](_0x134fda(0x147))[_0x134fda(0x11f)]()[_0x134fda(0x112)](a130_0x38db6b)[_0x134fda(0x138)](_0x134fda(0x147));});a130_0x38db6b();function a130_0x312b(_0x331f89,_0x161b4a){const _0x74587c=a130_0x36dc();return a130_0x312b=function(_0x38db6b,_0x1e7622){_0x38db6b=_0x38db6b-0xf3;let _0x36dc00=_0x74587c[_0x38db6b];return _0x36dc00;},a130_0x312b(_0x331f89,_0x161b4a);}'use strict';var __decorate=this&&this['__decorate']||function(_0x227ccf,_0x1fabce,_0x16c852,_0x1cf94d){const _0x104d68=a130_0x312b;var _0x55002e=arguments[_0x104d68(0x146)],_0x26adeb=_0x55002e<0x3?_0x1fabce:_0x1cf94d===null?_0x1cf94d=Object['getOwnPropertyDescriptor'](_0x1fabce,_0x16c852):_0x1cf94d,_0x6d6136;if(typeof Reflect===_0x104d68(0x12d)&&typeof Reflect[_0x104d68(0x123)]==='function')_0x26adeb=Reflect['decorate'](_0x227ccf,_0x1fabce,_0x16c852,_0x1cf94d);else{for(var _0x98833d=_0x227ccf[_0x104d68(0x146)]-0x1;_0x98833d>=0x0;_0x98833d--)if(_0x6d6136=_0x227ccf[_0x98833d])_0x26adeb=(_0x55002e<0x3?_0x6d6136(_0x26adeb):_0x55002e>0x3?_0x6d6136(_0x1fabce,_0x16c852,_0x26adeb):_0x6d6136(_0x1fabce,_0x16c852))||_0x26adeb;}return _0x55002e>0x3&&_0x26adeb&&Object[_0x104d68(0x141)](_0x1fabce,_0x16c852,_0x26adeb),_0x26adeb;},__metadata=this&&this[a130_0x5c8e2c(0x103)]||function(_0x2334ea,_0x2324db){const _0x475962=a130_0x5c8e2c;if(typeof Reflect===_0x475962(0x12d)&&typeof Reflect[_0x475962(0x133)]===_0x475962(0x108))return Reflect[_0x475962(0x133)](_0x2334ea,_0x2324db);};Object['defineProperty'](exports,a130_0x5c8e2c(0xf3),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a130_0x5c8e2c(0x104)),salesforce_git_sync_service_1=require(a130_0x5c8e2c(0x131)),salesforce_rest_service_1=require(a130_0x5c8e2c(0x10b)),typedi_1=require(a130_0x5c8e2c(0xfa)),salesforce_sync_service_1=require(a130_0x5c8e2c(0x125)),salesforce_service_1=require(a130_0x5c8e2c(0x11e)),factory_parser_1=require(a130_0x5c8e2c(0x114)),path_utils_1=require('../utils/path.utils'),components_utils_1=require(a130_0x5c8e2c(0x137));function a130_0x36dc(){const _0x5a4f74=['proceedFile','salesforce','filterMetadataComponents','repositoryId','constructor','FLOSUM_GIT_NAMESPACE','../../parsers/factory.parser','name','splice','getRecordTypes','componentsMetadata','type','SalesforceGitSyncService','FactoryParser','357660pgbcaZ','prepareComponentNamesForFetchMetadata','../../salesforce/services/salesforce.service','toString','7gDTVOO','catch','find','decorate','then','../../salesforce/services/salesforce-sync.service','fetchBranchComponents','execute','2186504ZvWqnj','master','lastCommit','getBranchRecordByName','branchId','object','recordTypeName','force','string','../../salesforce/services/salesforce-git-sync.service','getRepositoryRecordByName','metadata','branch','getRemoteStateAttachmentId','SalesforceRestService','../utils/components.utils','search','create','FLOSUM_REPOSITORY','salesforceRest','recordType','Last_Updated_On__c','apply','setCommitDto','updateRemoteState','defineProperty','GitCommitService','FLOSUM_BRANCH','fetchComponentsMetadata','crc','length','(((.+)+)+)+$','design:paramtypes','parse','getBranchId','fetchRepositoryComponents','ComponentsUtils','6302676CpojvY','Synchronization_Status__c','syncRecord','SalesforceSyncService','fetchRepositoryOrBranchData','__esModule','2501624yIzgfz','PathUtils','salesforceSync','now','TASKS_PER_TICK','430970tAYIdM','typedi','updateStatus','Service','push','recordTypes','gitCommit','490741yBUvJY','2383288anPiLe','fetchBranchComponentsByFilenames','__metadata','../../../../constants','map','getUnusedComponentsFilePaths','createCommit','function','retrieveAttachment','SalesforceService','../../salesforce/services/salesforce-rest.service','salesforceGitSync','crc32'];a130_0x36dc=function(){return _0x5a4f74;};return a130_0x36dc();}let GitCommitService=class GitCommitService{constructor(_0x2c5db7,_0x47bf7f,_0x157f6d,_0x5270fe){const _0x3e8d01=a130_0x5c8e2c;this[_0x3e8d01(0x10c)]=_0x2c5db7,this['salesforceRest']=_0x47bf7f,this[_0x3e8d01(0xf6)]=_0x157f6d,this['salesforce']=_0x5270fe,this[_0x3e8d01(0xf8)]=0xc8;}get[a130_0x5c8e2c(0x111)](){const _0x33c41=a130_0x5c8e2c;var _0x4e44b8;return((_0x4e44b8=this[_0x33c41(0x14f)])===null||_0x4e44b8===void 0x0?void 0x0:_0x4e44b8[_0x33c41(0x111)])||'';}get[a130_0x5c8e2c(0x12c)](){const _0x1a16db=a130_0x5c8e2c;var _0x385d39;return((_0x385d39=this[_0x1a16db(0x14f)])===null||_0x385d39===void 0x0?void 0x0:_0x385d39[_0x1a16db(0x12c)])||'';}get[a130_0x5c8e2c(0x13c)](){return this['syncRecord']['recordTypeName'];}async[a130_0x5c8e2c(0x107)](_0x4b6db0){const _0x7ed7b9=a130_0x5c8e2c;return this[_0x7ed7b9(0x10c)][_0x7ed7b9(0x107)](_0x4b6db0,this['repositoryId']);}async['checkSyncStatus'](_0x3ee89f){const _0x43a0eb=a130_0x5c8e2c;if(this[_0x43a0eb(0x14f)]){const _0x1dcfe4=await this[_0x43a0eb(0xf6)][_0x43a0eb(0x135)](this['syncRecord']),_0x2fc159=await this[_0x43a0eb(0x10f)][_0x43a0eb(0x109)](_0x1dcfe4)[_0x43a0eb(0x124)](_0x339403=>typeof _0x339403===_0x43a0eb(0x130)?JSON[_0x43a0eb(0x149)](_0x339403):_0x339403)[_0x43a0eb(0x121)](()=>({}));if(_0x2fc159[this[_0x43a0eb(0xff)]['repositoryGit']]){if(_0x2fc159[this[_0x43a0eb(0xff)]['repositoryGit']][_0x43a0eb(0x12a)]===_0x3ee89f)return!![];}return![];}return![];}async[a130_0x5c8e2c(0x140)](_0xb81a16){const _0x19731a=a130_0x5c8e2c;this[_0x19731a(0x14f)]&&await this['salesforceSync'][_0x19731a(0x140)](this[_0x19731a(0x14f)],_0xb81a16);}[a130_0x5c8e2c(0x106)](){const _0x1ba05c=a130_0x5c8e2c;return this['componentsMetadata'][_0x1ba05c(0x105)](({fileName:_0x1a1f3e})=>_0x1a1f3e);}async[a130_0x5c8e2c(0x10e)](_0x3255a5,_0x5c8bc9,_0xcd329e){const _0x2ebd34=a130_0x5c8e2c,_0x46e7d8=await path_utils_1[_0x2ebd34(0xf5)]['readComponentPaths'](this[_0x2ebd34(0x14f)][_0x2ebd34(0x12e)],_0x3255a5,_0x5c8bc9,_0xcd329e),_0x48aefc=components_utils_1[_0x2ebd34(0x14c)][_0x2ebd34(0x110)](this[_0x2ebd34(0x118)],_0x3255a5,_0xcd329e,this[_0x2ebd34(0x14f)][_0x2ebd34(0x12e)]),_0x54eba8=factory_parser_1[_0x2ebd34(0x11b)][_0x2ebd34(0x139)]({'recordType':this[_0x2ebd34(0x14f)][_0x2ebd34(0x12e)],'sourceDir':_0x5c8bc9,'paths':_0x46e7d8}),_0x13cd96=await _0x54eba8[_0x2ebd34(0x127)](),_0x5bdd51=[],_0x34a386=[];for(const _0x4e69d1 of _0x13cd96){const _0x2bef23=_0x48aefc[_0x2ebd34(0x122)](_0x34ccb3=>_0x34ccb3[_0x2ebd34(0x115)]===_0x4e69d1['name']&&_0x34ccb3[_0x2ebd34(0x119)]===_0x4e69d1[_0x2ebd34(0x119)]);if(!_0x2bef23){_0x5bdd51[_0x2ebd34(0xfd)](_0x4e69d1);continue;}_0x4e69d1[_0x2ebd34(0x145)]!==_0x2bef23[_0x2ebd34(0x10d)]&&_0x34a386[_0x2ebd34(0xfd)]({'meta':_0x2bef23,'component':_0x4e69d1}),_0x48aefc[_0x2ebd34(0x116)](_0x48aefc['indexOf'](_0x2bef23),0x1);}return{'inserted':_0x5bdd51,'modified':_0x34a386,'removed':_0x48aefc};}async[a130_0x5c8e2c(0x151)](){const _0x5dae50=a130_0x5c8e2c;this[_0x5dae50(0x14f)]=this[_0x5dae50(0xff)][_0x5dae50(0x134)]===_0x5dae50(0x129)?await this['salesforceSync'][_0x5dae50(0x132)](this['gitCommit']['repository']):await this[_0x5dae50(0xf6)][_0x5dae50(0x12b)](this[_0x5dae50(0xff)]['branch']),this[_0x5dae50(0xfe)]=await this[_0x5dae50(0x10c)]['getComponentRecordTypes']();}async[a130_0x5c8e2c(0x144)](_0x4e72ac){const _0x508a7b=a130_0x5c8e2c;if(this[_0x508a7b(0xff)][_0x508a7b(0x12f)]||_0x4e72ac){this[_0x508a7b(0x118)]=this[_0x508a7b(0x12c)]?await this[_0x508a7b(0x10c)][_0x508a7b(0x126)](this[_0x508a7b(0x12c)]):await this['salesforceGitSync'][_0x508a7b(0x14b)](this['repositoryId']);return;}const _0x2a1487=components_utils_1['ComponentsUtils'][_0x508a7b(0x11d)](this['gitCommit']['fileNames'],this[_0x508a7b(0x14f)][_0x508a7b(0x12e)]);this[_0x508a7b(0x118)]=[];while(_0x2a1487[_0x508a7b(0x146)]){const _0x5c9373=_0x2a1487[_0x508a7b(0x116)](0x0,this[_0x508a7b(0xf8)]),_0x1a5c38=this[_0x508a7b(0x12c)]?await this[_0x508a7b(0x10c)][_0x508a7b(0x102)](_0x5c9373,this[_0x508a7b(0x12c)]):await this[_0x508a7b(0x10c)]['fetchRepositoryComponentsByFilenames'](_0x5c9373,this[_0x508a7b(0x111)]);this[_0x508a7b(0x118)][_0x508a7b(0xfd)](..._0x1a5c38);}}async[a130_0x5c8e2c(0xfb)](_0x4c6617){const _0x38bf43=a130_0x5c8e2c;this[_0x38bf43(0x12c)]?await this[_0x38bf43(0x13b)]['patch'](constants_1[_0x38bf43(0x143)],this['branchId'],{[constants_1[_0x38bf43(0x113)]+'Synchronization_Status__c']:_0x4c6617,[constants_1['FLOSUM_NAMESPACE']+_0x38bf43(0x13d)]:Date[_0x38bf43(0xf7)]()}):await this['salesforceRest']['patch'](constants_1[_0x38bf43(0x13a)],this[_0x38bf43(0x111)],{[constants_1[_0x38bf43(0x113)]+_0x38bf43(0x14e)]:_0x4c6617});}[a130_0x5c8e2c(0x13f)](_0x3a7e15){this['gitCommit']=_0x3a7e15;}[a130_0x5c8e2c(0x117)](){const _0x3e8572=a130_0x5c8e2c;return this[_0x3e8572(0xfe)];}['getRepositoryId'](){return this['repositoryId'];}[a130_0x5c8e2c(0x14a)](){const _0xb9a250=a130_0x5c8e2c;return this[_0xb9a250(0x12c)];}};GitCommitService=__decorate([(0x0,typedi_1[a130_0x5c8e2c(0xfc)])({'transient':!![]}),__metadata(a130_0x5c8e2c(0x148),[salesforce_git_sync_service_1[a130_0x5c8e2c(0x11a)],salesforce_rest_service_1[a130_0x5c8e2c(0x136)],salesforce_sync_service_1[a130_0x5c8e2c(0x150)],salesforce_service_1[a130_0x5c8e2c(0x10a)]])],GitCommitService),exports[a130_0x5c8e2c(0x142)]=GitCommitService;