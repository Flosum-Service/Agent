const a110_0x19a164=a110_0x47f5;(function(_0x2f37cf,_0x1dc076){const _0x2a52df=a110_0x47f5,_0x1ff24a=_0x2f37cf();while(!![]){try{const _0x39e803=-parseInt(_0x2a52df(0x16d))/0x1+-parseInt(_0x2a52df(0x18b))/0x2+parseInt(_0x2a52df(0x152))/0x3*(-parseInt(_0x2a52df(0x15b))/0x4)+-parseInt(_0x2a52df(0x151))/0x5+parseInt(_0x2a52df(0x175))/0x6+parseInt(_0x2a52df(0x17f))/0x7+-parseInt(_0x2a52df(0x158))/0x8*(-parseInt(_0x2a52df(0x199))/0x9);if(_0x39e803===_0x1dc076)break;else _0x1ff24a['push'](_0x1ff24a['shift']());}catch(_0x171a19){_0x1ff24a['push'](_0x1ff24a['shift']());}}}(a110_0x3fb6,0x4aa11));function a110_0x3fb6(){const _0xeda772=['fetchRepositoryComponentsByFilenames','branchId','name','FactoryParser','../../parsers/utils/vlocity','object','function','match','gitCommit','master','map','decorate','recordTypes','getRepositoryId','branch','FLOSUM_BRANCH','salesforceRest','169444ZjdUpa','filterParserPaths','typedi','string','../../parsers/utils','parse','createCommit','fetchRepositoryComponents','1491180Lcsxhk','SalesforceSyncService','toString','TASKS_PER_TICK','FLOSUM_NAMESPACE','proceedFile','search','force','getRecordTypes','fetchRepositoryOrBranchData','1002540BqDeow','push','apply','defineProperty','fileNames','([./-]{1}|$)','now','../../parsers/mdapi/factory.parser','type','SalesforceGitSyncService','getRemoteStateAttachmentId','SalesforceRestService','757644gyYzQW','META_XML_EXTENSION','getBranchRecordByName','updateRemoteState','repositoryId','GitCommitService','../../salesforce/services/salesforce-git-sync.service','setCommitDto','__metadata','../../salesforce/services/salesforce-rest.service','then','crc','readFilesByFilename','length','923877whzzdw','salesforceGitSync','catch','salesforceSync','fetchBranchComponentsByFilenames','metadata','fetchComponentsMetadata','Synchronization_Status__c','FLOSUM_GIT_NAMESPACE','repositoryGit','crc32','indexOf','componentsMetadata','Last_Updated_On__c','splice','__decorate','design:paramtypes','syncRecord','salesforce','repository','replace','FLOSUM_REPOSITORY','fileName','(((.+)+)+)+$','3032575wBozDF','183zpYMvV','filter','constructor','checkSyncStatus','getOwnPropertyDescriptor','lastCommit','104Pdxbkr','create','getUnusedComponentsFilePaths','17428tfHYUc'];a110_0x3fb6=function(){return _0xeda772;};return a110_0x3fb6();}const a110_0x598d42=(function(){let _0x5e654f=!![];return function(_0x58d6b2,_0x51183b){const _0x2a5c90=_0x5e654f?function(){const _0x2c6026=a110_0x47f5;if(_0x51183b){const _0x454790=_0x51183b[_0x2c6026(0x181)](_0x58d6b2,arguments);return _0x51183b=null,_0x454790;}}:function(){};return _0x5e654f=![],_0x2a5c90;};}()),a110_0x5688c7=a110_0x598d42(this,function(){const _0x135f76=a110_0x47f5;return a110_0x5688c7[_0x135f76(0x177)]()[_0x135f76(0x17b)](_0x135f76(0x150))[_0x135f76(0x177)]()[_0x135f76(0x154)](a110_0x5688c7)[_0x135f76(0x17b)](_0x135f76(0x150));});function a110_0x47f5(_0xc8a211,_0x5cdb39){const _0x4c02d=a110_0x3fb6();return a110_0x47f5=function(_0x5688c7,_0x598d42){_0x5688c7=_0x5688c7-0x149;let _0x3fb64f=_0x4c02d[_0x5688c7];return _0x3fb64f;},a110_0x47f5(_0xc8a211,_0x5cdb39);}a110_0x5688c7();'use strict';var __decorate=this&&this[a110_0x19a164(0x1a8)]||function(_0x314e7b,_0x4658d0,_0x56da81,_0x28b401){const _0x4a61f7=a110_0x19a164;var _0x1a405a=arguments[_0x4a61f7(0x198)],_0x6b0b40=_0x1a405a<0x3?_0x4658d0:_0x28b401===null?_0x28b401=Object[_0x4a61f7(0x156)](_0x4658d0,_0x56da81):_0x28b401,_0x310ad0;if(typeof Reflect==='object'&&typeof Reflect[_0x4a61f7(0x167)]===_0x4a61f7(0x162))_0x6b0b40=Reflect[_0x4a61f7(0x167)](_0x314e7b,_0x4658d0,_0x56da81,_0x28b401);else{for(var _0x16a4f7=_0x314e7b[_0x4a61f7(0x198)]-0x1;_0x16a4f7>=0x0;_0x16a4f7--)if(_0x310ad0=_0x314e7b[_0x16a4f7])_0x6b0b40=(_0x1a405a<0x3?_0x310ad0(_0x6b0b40):_0x1a405a>0x3?_0x310ad0(_0x4658d0,_0x56da81,_0x6b0b40):_0x310ad0(_0x4658d0,_0x56da81))||_0x6b0b40;}return _0x1a405a>0x3&&_0x6b0b40&&Object[_0x4a61f7(0x182)](_0x4658d0,_0x56da81,_0x6b0b40),_0x6b0b40;},__metadata=this&&this[a110_0x19a164(0x193)]||function(_0x598bd6,_0x269c4a){const _0x1d6aab=a110_0x19a164;if(typeof Reflect===_0x1d6aab(0x161)&&typeof Reflect[_0x1d6aab(0x19e)]===_0x1d6aab(0x162))return Reflect[_0x1d6aab(0x19e)](_0x598bd6,_0x269c4a);};Object[a110_0x19a164(0x182)](exports,'__esModule',{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a110_0x19a164(0x191)),salesforce_rest_service_1=require(a110_0x19a164(0x194)),typedi_1=require(a110_0x19a164(0x16f)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),utils_1=require(a110_0x19a164(0x171)),factory_parser_1=require(a110_0x19a164(0x186)),vlocity_1=require(a110_0x19a164(0x160));let GitCommitService=class GitCommitService{constructor(_0xf0dd25,_0x3ae1e2,_0x16b357,_0x44663a){const _0x1638dc=a110_0x19a164;this[_0x1638dc(0x19a)]=_0xf0dd25,this['salesforceRest']=_0x3ae1e2,this[_0x1638dc(0x19c)]=_0x16b357,this['salesforce']=_0x44663a,this[_0x1638dc(0x178)]=0xc8;}get[a110_0x19a164(0x18f)](){const _0x6a29ec=a110_0x19a164;var _0x5e04dc;return((_0x5e04dc=this[_0x6a29ec(0x14a)])===null||_0x5e04dc===void 0x0?void 0x0:_0x5e04dc[_0x6a29ec(0x18f)])||'';}get[a110_0x19a164(0x15d)](){const _0x496260=a110_0x19a164;var _0x382ed3;return((_0x382ed3=this[_0x496260(0x14a)])===null||_0x382ed3===void 0x0?void 0x0:_0x382ed3['branchId'])||'';}async[a110_0x19a164(0x173)](_0x57dc19){const _0x5f2a1b=a110_0x19a164;return this[_0x5f2a1b(0x19a)][_0x5f2a1b(0x173)](_0x57dc19,this['repositoryId']);}async[a110_0x19a164(0x155)](_0x282bd7){const _0x2c6d6b=a110_0x19a164;if(this[_0x2c6d6b(0x14a)]){const _0xf5f8ac=await this[_0x2c6d6b(0x19c)][_0x2c6d6b(0x189)](this['syncRecord']),_0xef2997=await this[_0x2c6d6b(0x14b)]['retrieveAttachment'](_0xf5f8ac)[_0x2c6d6b(0x195)](_0x4b6328=>typeof _0x4b6328===_0x2c6d6b(0x170)?JSON['parse'](_0x4b6328):_0x4b6328)[_0x2c6d6b(0x19b)](()=>({}));if(_0xef2997[this['gitCommit'][_0x2c6d6b(0x1a2)]]){if(_0xef2997[this['gitCommit'][_0x2c6d6b(0x1a2)]][_0x2c6d6b(0x157)]===_0x282bd7)return!![];}return![];}return![];}async[a110_0x19a164(0x18e)](_0xea05a9){const _0x22516d=a110_0x19a164;this[_0x22516d(0x14a)]&&await this['salesforceSync']['updateRemoteState'](this[_0x22516d(0x14a)],_0xea05a9);}[a110_0x19a164(0x15a)](){const _0x143752=a110_0x19a164;return this['componentsMetadata'][_0x143752(0x166)](({fileName:_0x167a35})=>_0x167a35);}async[a110_0x19a164(0x17a)](_0x519e0f,_0x498d0c,_0x3b69b5){const _0x16c753=a110_0x19a164,_0x2a7f76=new RegExp('^'+_0x519e0f+_0x16c753(0x184));let _0x3c2b3c=[_0x519e0f];_0x3b69b5&&!(0x0,vlocity_1['isVlocityComponent'])(_0x519e0f)&&(_0x3c2b3c=(0x0,utils_1[_0x16c753(0x16e)])(await(0x0,utils_1[_0x16c753(0x197)])(_0x519e0f,_0x498d0c)['catch'](()=>[])));const _0x53e880=_0x3b69b5?this['componentsMetadata'][_0x16c753(0x153)](_0x435b16=>_0x435b16[_0x16c753(0x14f)][_0x16c753(0x163)](_0x2a7f76)):this[_0x16c753(0x1a5)][_0x16c753(0x153)](_0x305f5f=>_0x305f5f[_0x16c753(0x14f)]===_0x519e0f||_0x305f5f[_0x16c753(0x14f)]===_0x519e0f[_0x16c753(0x14d)](constants_1[_0x16c753(0x18c)],'')),_0x590513=factory_parser_1[_0x16c753(0x15f)][_0x16c753(0x159)](_0x498d0c,_0x3c2b3c),_0x58e704=await _0x590513[_0x16c753(0x172)](),_0xe1416f=[],_0x44a707=[];for(const _0x5210f5 of _0x58e704){const _0x2b49cc=_0x53e880['find'](_0x5f4a2e=>_0x5f4a2e[_0x16c753(0x15e)]===_0x5210f5[_0x16c753(0x15e)]&&_0x5f4a2e[_0x16c753(0x187)]===_0x5210f5['type']);if(!_0x2b49cc){_0xe1416f[_0x16c753(0x180)](_0x5210f5);continue;}_0x5210f5[_0x16c753(0x196)]!==_0x2b49cc[_0x16c753(0x1a3)]&&_0x44a707[_0x16c753(0x180)]({'meta':_0x2b49cc,'component':_0x5210f5}),_0x53e880[_0x16c753(0x1a7)](_0x53e880[_0x16c753(0x1a4)](_0x2b49cc),0x1);}return{'inserted':_0xe1416f,'modified':_0x44a707,'removed':_0x53e880};}async[a110_0x19a164(0x17e)](){const _0x1ccc46=a110_0x19a164;this[_0x1ccc46(0x14a)]=this[_0x1ccc46(0x164)][_0x1ccc46(0x16a)]===_0x1ccc46(0x165)?await this[_0x1ccc46(0x19c)]['getRepositoryRecordByName'](this[_0x1ccc46(0x164)][_0x1ccc46(0x14c)]):await this[_0x1ccc46(0x19c)][_0x1ccc46(0x18d)](this['gitCommit'][_0x1ccc46(0x16a)]),this[_0x1ccc46(0x168)]=await this['salesforceGitSync']['getComponentRecordTypes']();}async[a110_0x19a164(0x19f)](_0x21369e){const _0x57399f=a110_0x19a164;if(this[_0x57399f(0x164)][_0x57399f(0x17c)]||_0x21369e){this[_0x57399f(0x1a5)]=this[_0x57399f(0x15d)]?await this['salesforceGitSync']['fetchBranchComponents'](this[_0x57399f(0x15d)]):await this[_0x57399f(0x19a)][_0x57399f(0x174)](this[_0x57399f(0x18f)]);return;}const _0x336b15=[...new Set(this['gitCommit'][_0x57399f(0x183)][_0x57399f(0x166)](_0x358da1=>_0x358da1[_0x57399f(0x14d)](constants_1[_0x57399f(0x18c)],'')))];this['componentsMetadata']=[];while(_0x336b15[_0x57399f(0x198)]){const _0x339387=_0x336b15[_0x57399f(0x1a7)](0x0,this['TASKS_PER_TICK']),_0x3979c7=this[_0x57399f(0x15d)]?await this[_0x57399f(0x19a)][_0x57399f(0x19d)](_0x339387,this[_0x57399f(0x15d)]):await this[_0x57399f(0x19a)][_0x57399f(0x15c)](_0x339387,this[_0x57399f(0x18f)]);this[_0x57399f(0x1a5)][_0x57399f(0x180)](..._0x3979c7);}}async['updateStatus'](_0x148715){const _0x404c03=a110_0x19a164;this[_0x404c03(0x15d)]?await this[_0x404c03(0x16c)]['patch'](constants_1[_0x404c03(0x16b)],this['branchId'],{[constants_1[_0x404c03(0x1a1)]+_0x404c03(0x1a0)]:_0x148715,[constants_1[_0x404c03(0x179)]+_0x404c03(0x1a6)]:Date[_0x404c03(0x185)]()}):await this[_0x404c03(0x16c)]['patch'](constants_1[_0x404c03(0x14e)],this[_0x404c03(0x18f)],{[constants_1[_0x404c03(0x1a1)]+_0x404c03(0x1a0)]:_0x148715});}[a110_0x19a164(0x192)](_0xbd88d){const _0x50035a=a110_0x19a164;this[_0x50035a(0x164)]=_0xbd88d;}[a110_0x19a164(0x17d)](){return this['recordTypes'];}[a110_0x19a164(0x169)](){return this['repositoryId'];}['getBranchId'](){const _0x517bf6=a110_0x19a164;return this[_0x517bf6(0x15d)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a110_0x19a164(0x149),[salesforce_git_sync_service_1[a110_0x19a164(0x188)],salesforce_rest_service_1[a110_0x19a164(0x18a)],salesforce_sync_service_1[a110_0x19a164(0x176)],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a110_0x19a164(0x190)]=GitCommitService;