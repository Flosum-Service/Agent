const a109_0xb7a298=a109_0x3f2b;(function(_0x35506d,_0x301430){const _0x408007=a109_0x3f2b,_0x31d60b=_0x35506d();while(!![]){try{const _0x4d6e46=-parseInt(_0x408007(0x1dc))/0x1+parseInt(_0x408007(0x238))/0x2*(-parseInt(_0x408007(0x222))/0x3)+parseInt(_0x408007(0x221))/0x4+-parseInt(_0x408007(0x225))/0x5+parseInt(_0x408007(0x203))/0x6+parseInt(_0x408007(0x22c))/0x7*(parseInt(_0x408007(0x1fb))/0x8)+-parseInt(_0x408007(0x1f3))/0x9*(-parseInt(_0x408007(0x1f2))/0xa);if(_0x4d6e46===_0x301430)break;else _0x31d60b['push'](_0x31d60b['shift']());}catch(_0x565fa0){_0x31d60b['push'](_0x31d60b['shift']());}}}(a109_0x3fe5,0xe5c6e));function a109_0x3f2b(_0x28a139,_0x29c94c){const _0x516cd3=a109_0x3fe5();return a109_0x3f2b=function(_0x492ec9,_0x5b38e0){_0x492ec9=_0x492ec9-0x1db;let _0x3fe580=_0x516cd3[_0x492ec9];return _0x3fe580;},a109_0x3f2b(_0x28a139,_0x29c94c);}const a109_0x5b38e0=(function(){let _0x11a852=!![];return function(_0x5101ea,_0x5f2ff6){const _0x1bbcd0=_0x11a852?function(){const _0x1449b2=a109_0x3f2b;if(_0x5f2ff6){const _0xb482e1=_0x5f2ff6[_0x1449b2(0x234)](_0x5101ea,arguments);return _0x5f2ff6=null,_0xb482e1;}}:function(){};return _0x11a852=![],_0x1bbcd0;};}()),a109_0x492ec9=a109_0x5b38e0(this,function(){const _0x11fab8=a109_0x3f2b;return a109_0x492ec9[_0x11fab8(0x21f)]()[_0x11fab8(0x201)](_0x11fab8(0x213))[_0x11fab8(0x21f)]()['constructor'](a109_0x492ec9)[_0x11fab8(0x201)](_0x11fab8(0x213));});a109_0x492ec9();'use strict';var __decorate=this&&this[a109_0xb7a298(0x1e3)]||function(_0x59512b,_0x82d1f4,_0x901339,_0x4c8da8){const _0x12fb23=a109_0xb7a298;var _0x1bc4c3=arguments[_0x12fb23(0x232)],_0x2e0d03=_0x1bc4c3<0x3?_0x82d1f4:_0x4c8da8===null?_0x4c8da8=Object[_0x12fb23(0x1e7)](_0x82d1f4,_0x901339):_0x4c8da8,_0x383fa0;if(typeof Reflect===_0x12fb23(0x214)&&typeof Reflect[_0x12fb23(0x230)]==='function')_0x2e0d03=Reflect['decorate'](_0x59512b,_0x82d1f4,_0x901339,_0x4c8da8);else{for(var _0x1f4114=_0x59512b[_0x12fb23(0x232)]-0x1;_0x1f4114>=0x0;_0x1f4114--)if(_0x383fa0=_0x59512b[_0x1f4114])_0x2e0d03=(_0x1bc4c3<0x3?_0x383fa0(_0x2e0d03):_0x1bc4c3>0x3?_0x383fa0(_0x82d1f4,_0x901339,_0x2e0d03):_0x383fa0(_0x82d1f4,_0x901339))||_0x2e0d03;}return _0x1bc4c3>0x3&&_0x2e0d03&&Object[_0x12fb23(0x212)](_0x82d1f4,_0x901339,_0x2e0d03),_0x2e0d03;},__metadata=this&&this[a109_0xb7a298(0x1f5)]||function(_0x428743,_0x3ff9d8){const _0x4985=a109_0xb7a298;if(typeof Reflect===_0x4985(0x214)&&typeof Reflect[_0x4985(0x235)]===_0x4985(0x215))return Reflect[_0x4985(0x235)](_0x428743,_0x3ff9d8);};Object[a109_0xb7a298(0x212)](exports,'__esModule',{'value':!![]}),exports[a109_0xb7a298(0x22b)]=void 0x0;const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a109_0xb7a298(0x1fa)),salesforce_rest_service_1=require(a109_0xb7a298(0x1fe)),typedi_1=require(a109_0xb7a298(0x20c)),salesforce_sync_service_1=require(a109_0xb7a298(0x1e9)),salesforce_service_1=require(a109_0xb7a298(0x1ed)),parser_v2_1=require('../../parsers/mdapi/parser-v2'),utils_1=require('../../parsers/utils');let GitCommitService=class GitCommitService{constructor(_0xa2e21a,_0x27e4b9,_0x56cae2,_0x208284){const _0x10a173=a109_0xb7a298;this[_0x10a173(0x21a)]=_0xa2e21a,this[_0x10a173(0x1f7)]=_0x27e4b9,this[_0x10a173(0x233)]=_0x56cae2,this[_0x10a173(0x207)]=_0x208284,this[_0x10a173(0x1e8)]=0xc8;}get[a109_0xb7a298(0x1ea)](){const _0x31cbbd=a109_0xb7a298;var _0x4c8592;return((_0x4c8592=this[_0x31cbbd(0x1fd)])===null||_0x4c8592===void 0x0?void 0x0:_0x4c8592[_0x31cbbd(0x1ea)])||'';}get['branchId'](){const _0x111624=a109_0xb7a298;var _0x48219c;return((_0x48219c=this[_0x111624(0x1fd)])===null||_0x48219c===void 0x0?void 0x0:_0x48219c['branchId'])||'';}async['createCommit'](_0x57dd28){const _0x55da00=a109_0xb7a298;return this[_0x55da00(0x21a)]['createCommit'](_0x57dd28,this['repositoryId']);}async[a109_0xb7a298(0x224)](_0x13f645){const _0x3c1b58=a109_0xb7a298;if(this['syncRecord']){const _0xce87b8=await this[_0x3c1b58(0x233)]['getRemoteStateAttachmentId'](this[_0x3c1b58(0x1fd)]),_0x109936=await this[_0x3c1b58(0x207)][_0x3c1b58(0x226)](_0xce87b8)[_0x3c1b58(0x1f1)](_0x5586a0=>typeof _0x5586a0===_0x3c1b58(0x211)?JSON['parse'](_0x5586a0):_0x5586a0)['catch'](()=>({}));if(_0x109936[this[_0x3c1b58(0x1e2)][_0x3c1b58(0x206)]]){if(_0x109936[this[_0x3c1b58(0x1e2)][_0x3c1b58(0x206)]][_0x3c1b58(0x1e0)]===_0x13f645)return!![];}return![];}return![];}async[a109_0xb7a298(0x21e)](_0x1c925e){const _0x269a1a=a109_0xb7a298;this['syncRecord']&&await this[_0x269a1a(0x233)]['updateRemoteState'](this[_0x269a1a(0x1fd)],_0x1c925e);}[a109_0xb7a298(0x237)](){const _0x47ad84=a109_0xb7a298;return this[_0x47ad84(0x208)][_0x47ad84(0x22e)](({fileName:_0xcc9429})=>_0xcc9429);}async[a109_0xb7a298(0x1df)](_0x53f0af,_0x46a17a,_0x4797a1){const _0x48dba8=a109_0xb7a298,_0x539786=new RegExp('^'+_0x53f0af+_0x48dba8(0x1eb));let _0x48aa98=[_0x53f0af];_0x4797a1&&(_0x48aa98=(0x0,utils_1[_0x48dba8(0x1e1)])(await(0x0,utils_1[_0x48dba8(0x205)])(_0x53f0af,_0x46a17a)[_0x48dba8(0x20e)](()=>[])));const _0x403616=_0x4797a1?this['componentsMetadata'][_0x48dba8(0x209)](_0x3fceee=>_0x3fceee[_0x48dba8(0x236)][_0x48dba8(0x1f0)](_0x539786)):this[_0x48dba8(0x208)]['filter'](_0x54e34e=>_0x54e34e[_0x48dba8(0x236)]===_0x53f0af||_0x54e34e[_0x48dba8(0x236)]===_0x53f0af[_0x48dba8(0x20f)](constants_1[_0x48dba8(0x204)],'')),_0x6e43ed=new parser_v2_1[(_0x48dba8(0x21b))](_0x46a17a,_0x48aa98),_0x23f224=await _0x6e43ed[_0x48dba8(0x217)](),_0x24b69a=[],_0x73a9b3=[];for(const _0x383f35 of _0x23f224){const _0x547430=_0x403616[_0x48dba8(0x21c)](_0x31c2e0=>_0x31c2e0[_0x48dba8(0x1ff)]===_0x383f35[_0x48dba8(0x1ff)]&&_0x31c2e0[_0x48dba8(0x220)]===_0x383f35[_0x48dba8(0x220)]);if(!_0x547430){_0x24b69a[_0x48dba8(0x1ef)](_0x383f35);continue;}_0x383f35[_0x48dba8(0x1ee)]!==_0x547430[_0x48dba8(0x1f8)]&&_0x73a9b3[_0x48dba8(0x1ef)]({'meta':_0x547430,'component':_0x383f35}),_0x403616[_0x48dba8(0x1db)](_0x403616['indexOf'](_0x547430),0x1);}return{'inserted':_0x24b69a,'modified':_0x73a9b3,'removed':_0x403616};}async[a109_0xb7a298(0x1e6)](){const _0x444528=a109_0xb7a298;this[_0x444528(0x1fd)]=this[_0x444528(0x1e2)][_0x444528(0x1f6)]===_0x444528(0x1de)?await this['salesforceSync'][_0x444528(0x210)](this['gitCommit']['repository']):await this[_0x444528(0x233)]['getBranchRecordByName'](this[_0x444528(0x1e2)][_0x444528(0x1f6)]),this[_0x444528(0x1f4)]=await this[_0x444528(0x21a)]['getComponentRecordTypes']();}async[a109_0xb7a298(0x218)](_0x2dadeb){const _0x594c52=a109_0xb7a298;if(this[_0x594c52(0x1e2)][_0x594c52(0x216)]||_0x2dadeb){this['componentsMetadata']=this['branchId']?await this[_0x594c52(0x21a)][_0x594c52(0x22a)](this[_0x594c52(0x22f)]):await this['salesforceGitSync'][_0x594c52(0x228)](this['repositoryId']);return;}const _0x2ec95e=[...new Set(this[_0x594c52(0x1e2)][_0x594c52(0x1fc)][_0x594c52(0x22e)](_0x4d6235=>_0x4d6235[_0x594c52(0x20f)](constants_1[_0x594c52(0x204)],'')))];this[_0x594c52(0x208)]=[];while(_0x2ec95e[_0x594c52(0x232)]){const _0x11b29f=_0x2ec95e[_0x594c52(0x1db)](0x0,this[_0x594c52(0x1e8)]),_0xc6203e=this[_0x594c52(0x22f)]?await this[_0x594c52(0x21a)][_0x594c52(0x22d)](_0x11b29f,this[_0x594c52(0x22f)]):await this[_0x594c52(0x21a)][_0x594c52(0x21d)](_0x11b29f,this[_0x594c52(0x1ea)]);this[_0x594c52(0x208)][_0x594c52(0x1ef)](..._0xc6203e);}}async[a109_0xb7a298(0x20b)](_0x484878){const _0x5402f5=a109_0xb7a298;this[_0x5402f5(0x22f)]?await this[_0x5402f5(0x1f7)][_0x5402f5(0x219)](constants_1[_0x5402f5(0x227)],this[_0x5402f5(0x22f)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x5402f5(0x1dd)]:_0x484878,[constants_1['FLOSUM_NAMESPACE']+_0x5402f5(0x20d)]:Date[_0x5402f5(0x200)]()}):await this[_0x5402f5(0x1f7)][_0x5402f5(0x219)](constants_1['FLOSUM_REPOSITORY'],this[_0x5402f5(0x1ea)],{[constants_1[_0x5402f5(0x223)]+_0x5402f5(0x1dd)]:_0x484878});}[a109_0xb7a298(0x231)](_0x1e8e5d){const _0x52eab9=a109_0xb7a298;this[_0x52eab9(0x1e2)]=_0x1e8e5d;}['getRecordTypes'](){const _0xefd62d=a109_0xb7a298;return this[_0xefd62d(0x1f4)];}[a109_0xb7a298(0x1e4)](){const _0x57186a=a109_0xb7a298;return this[_0x57186a(0x1ea)];}[a109_0xb7a298(0x229)](){const _0x1bc6b6=a109_0xb7a298;return this[_0x1bc6b6(0x22f)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a109_0xb7a298(0x202),[salesforce_git_sync_service_1[a109_0xb7a298(0x1f9)],salesforce_rest_service_1[a109_0xb7a298(0x1ec)],salesforce_sync_service_1[a109_0xb7a298(0x1e5)],salesforce_service_1[a109_0xb7a298(0x20a)]])],GitCommitService),exports[a109_0xb7a298(0x22b)]=GitCommitService;function a109_0x3fe5(){const _0x1f9947=['length','salesforceSync','apply','metadata','fileName','getUnusedComponentsFilePaths','46EYJsIy','splice','149889VRgcha','Synchronization_Status__c','master','proceedFile','lastCommit','filterParserPaths','gitCommit','__decorate','getRepositoryId','SalesforceSyncService','fetchRepositoryOrBranchData','getOwnPropertyDescriptor','TASKS_PER_TICK','../../salesforce/services/salesforce-sync.service','repositoryId','([./-]{1}|$)','SalesforceRestService','../../salesforce/services/salesforce.service','crc','push','match','then','50tUlkya','1996299BakvyR','recordTypes','__metadata','branch','salesforceRest','crc32','SalesforceGitSyncService','../../salesforce/services/salesforce-git-sync.service','24rnFoTI','fileNames','syncRecord','../../salesforce/services/salesforce-rest.service','name','now','search','design:paramtypes','2615466CEfoWB','META_XML_EXTENSION','readFilesByFilename','repositoryGit','salesforce','componentsMetadata','filter','SalesforceService','updateStatus','typedi','Last_Updated_On__c','catch','replace','getRepositoryRecordByName','string','defineProperty','(((.+)+)+)+$','object','function','force','parse','fetchComponentsMetadata','patch','salesforceGitSync','MDApiParserV2','find','fetchRepositoryComponentsByFilenames','updateRemoteState','toString','type','1431408IMpTfj','75717HNyepJ','FLOSUM_GIT_NAMESPACE','checkSyncStatus','3462835JuYduF','retrieveAttachment','FLOSUM_BRANCH','fetchRepositoryComponents','getBranchId','fetchBranchComponents','GitCommitService','1076369AgLwyG','fetchBranchComponentsByFilenames','map','branchId','decorate','setCommitDto'];a109_0x3fe5=function(){return _0x1f9947;};return a109_0x3fe5();}