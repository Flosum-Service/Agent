const a129_0x4b5730=a129_0x4305;function a129_0x2e87(){const _0x2d1ae6=['getUnusedComponentsFilePaths','getRepositoryId','setCommitDto','catch','create','repositoryGit','crc32','(((.+)+)+)+$','prepareComponentNamesForFetchMetadata','FLOSUM_BRANCH','type','createCommit','getBranchRecordByName','string','239701IqLsMv','object','__decorate','updateRemoteState','componentsMetadata','patch','execute','find','SalesforceRestService','design:paramtypes','parse','Last_Updated_On__c','push','23576jpludU','../utils/path.utils','defineProperty','Synchronization_Status__c','branch','now','recordType','decorate','156tnwYAM','fetchRepositoryOrBranchData','fetchComponentsMetadata','Service','search','readComponentPaths','getComponentRecordTypes','recordTypes','proceedFile','lastCommit','length','salesforceRest','81rKzzYl','879630VKLIdM','salesforceGitSync','fetchBranchComponents','gitCommit','master','name','recordTypeName','getOwnPropertyDescriptor','syncRecord','repository','GitCommitService','salesforceSync','fetchBranchComponentsByFilenames','fetchRepositoryComponents','FLOSUM_NAMESPACE','crc','__esModule','744JfJLaA','retrieveAttachment','FLOSUM_REPOSITORY','TASKS_PER_TICK','13406RqIKnt','salesforce','getRecordTypes','branchId','filterMetadataComponents','147364zPsYiU','metadata','splice','repositoryId','../../../../constants','ComponentsUtils','../../salesforce/services/salesforce-sync.service','function','getBranchId','indexOf','687224deAHpK','FLOSUM_GIT_NAMESPACE','1057zKyXzS','getRepositoryRecordByName','updateStatus','apply','102GaipsP','4205LboIYH','then'];a129_0x2e87=function(){return _0x2d1ae6;};return a129_0x2e87();}function a129_0x4305(_0x2f11c7,_0x1b04f2){const _0x150411=a129_0x2e87();return a129_0x4305=function(_0x1447be,_0x18adbf){_0x1447be=_0x1447be-0x89;let _0x2e87f4=_0x150411[_0x1447be];return _0x2e87f4;},a129_0x4305(_0x2f11c7,_0x1b04f2);}(function(_0x1b9497,_0x1c85c6){const _0x48a42e=a129_0x4305,_0x26d3ca=_0x1b9497();while(!![]){try{const _0x1c48b4=parseInt(_0x48a42e(0xd4))/0x1+-parseInt(_0x48a42e(0xc5))/0x2*(parseInt(_0x48a42e(0xa3))/0x3)+-parseInt(_0x48a42e(0xca))/0x4+-parseInt(_0x48a42e(0xdb))/0x5*(parseInt(_0x48a42e(0xda))/0x6)+parseInt(_0x48a42e(0xd6))/0x7*(-parseInt(_0x48a42e(0x9b))/0x8)+parseInt(_0x48a42e(0xaf))/0x9*(-parseInt(_0x48a42e(0xb0))/0xa)+parseInt(_0x48a42e(0x8e))/0xb*(parseInt(_0x48a42e(0xc1))/0xc);if(_0x1c48b4===_0x1c85c6)break;else _0x26d3ca['push'](_0x26d3ca['shift']());}catch(_0x45e80d){_0x26d3ca['push'](_0x26d3ca['shift']());}}}(a129_0x2e87,0x621f4));const a129_0x18adbf=(function(){let _0x4a66b4=!![];return function(_0x5228fc,_0x214ce0){const _0x5d3534=_0x4a66b4?function(){const _0x27b5ee=a129_0x4305;if(_0x214ce0){const _0x48733d=_0x214ce0[_0x27b5ee(0xd9)](_0x5228fc,arguments);return _0x214ce0=null,_0x48733d;}}:function(){};return _0x4a66b4=![],_0x5d3534;};}()),a129_0x1447be=a129_0x18adbf(this,function(){const _0x16df18=a129_0x4305;return a129_0x1447be['toString']()['search'](_0x16df18(0xe4))['toString']()['constructor'](a129_0x1447be)[_0x16df18(0xa7)](_0x16df18(0xe4));});a129_0x1447be();'use strict';var __decorate=this&&this[a129_0x4b5730(0x90)]||function(_0x4b8c4b,_0x41b7c7,_0x484a84,_0x5eb8b0){const _0xabf975=a129_0x4b5730;var _0x618af4=arguments['length'],_0x2d7703=_0x618af4<0x3?_0x41b7c7:_0x5eb8b0===null?_0x5eb8b0=Object[_0xabf975(0xb7)](_0x41b7c7,_0x484a84):_0x5eb8b0,_0x2eadf8;if(typeof Reflect===_0xabf975(0x8f)&&typeof Reflect[_0xabf975(0xa2)]===_0xabf975(0xd1))_0x2d7703=Reflect[_0xabf975(0xa2)](_0x4b8c4b,_0x41b7c7,_0x484a84,_0x5eb8b0);else{for(var _0x51db10=_0x4b8c4b[_0xabf975(0xad)]-0x1;_0x51db10>=0x0;_0x51db10--)if(_0x2eadf8=_0x4b8c4b[_0x51db10])_0x2d7703=(_0x618af4<0x3?_0x2eadf8(_0x2d7703):_0x618af4>0x3?_0x2eadf8(_0x41b7c7,_0x484a84,_0x2d7703):_0x2eadf8(_0x41b7c7,_0x484a84))||_0x2d7703;}return _0x618af4>0x3&&_0x2d7703&&Object[_0xabf975(0x9d)](_0x41b7c7,_0x484a84,_0x2d7703),_0x2d7703;},__metadata=this&&this['__metadata']||function(_0x53f91f,_0x3228c7){const _0x130693=a129_0x4b5730;if(typeof Reflect==='object'&&typeof Reflect[_0x130693(0xcb)]==='function')return Reflect[_0x130693(0xcb)](_0x53f91f,_0x3228c7);};Object[a129_0x4b5730(0x9d)](exports,a129_0x4b5730(0xc0),{'value':!![]}),exports[a129_0x4b5730(0xba)]=void 0x0;const constants_1=require(a129_0x4b5730(0xce)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require('typedi'),salesforce_sync_service_1=require(a129_0x4b5730(0xd0)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),factory_parser_1=require('../../parsers/factory.parser'),path_utils_1=require(a129_0x4b5730(0x9c)),components_utils_1=require('../utils/components.utils');let GitCommitService=class GitCommitService{constructor(_0x2f8a93,_0x3d5a5c,_0x25f5a2,_0x463597){const _0x306a57=a129_0x4b5730;this[_0x306a57(0xb1)]=_0x2f8a93,this['salesforceRest']=_0x3d5a5c,this[_0x306a57(0xbb)]=_0x25f5a2,this['salesforce']=_0x463597,this[_0x306a57(0xc4)]=0xc8;}get['repositoryId'](){const _0x3280fb=a129_0x4b5730;var _0x5d415b;return((_0x5d415b=this[_0x3280fb(0xb8)])===null||_0x5d415b===void 0x0?void 0x0:_0x5d415b['repositoryId'])||'';}get[a129_0x4b5730(0xc8)](){const _0x12fd83=a129_0x4b5730;var _0x496e95;return((_0x496e95=this[_0x12fd83(0xb8)])===null||_0x496e95===void 0x0?void 0x0:_0x496e95[_0x12fd83(0xc8)])||'';}get[a129_0x4b5730(0xa1)](){const _0x29c723=a129_0x4b5730;return this['syncRecord'][_0x29c723(0xb6)];}async[a129_0x4b5730(0x8b)](_0x421c2c){const _0x4e21dc=a129_0x4b5730;return this['salesforceGitSync'][_0x4e21dc(0x8b)](_0x421c2c,this['repositoryId']);}async['checkSyncStatus'](_0x1e7918){const _0x296755=a129_0x4b5730;if(this[_0x296755(0xb8)]){const _0x362ecb=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x296755(0xb8)]),_0x1dc68a=await this[_0x296755(0xc6)][_0x296755(0xc2)](_0x362ecb)[_0x296755(0xdc)](_0x2f2004=>typeof _0x2f2004===_0x296755(0x8d)?JSON[_0x296755(0x98)](_0x2f2004):_0x2f2004)[_0x296755(0xe0)](()=>({}));if(_0x1dc68a[this[_0x296755(0xb3)][_0x296755(0xe2)]]){if(_0x1dc68a[this[_0x296755(0xb3)][_0x296755(0xe2)]][_0x296755(0xac)]===_0x1e7918)return!![];}return![];}return![];}async[a129_0x4b5730(0x91)](_0x214e1f){const _0x6405f5=a129_0x4b5730;this[_0x6405f5(0xb8)]&&await this[_0x6405f5(0xbb)][_0x6405f5(0x91)](this[_0x6405f5(0xb8)],_0x214e1f);}[a129_0x4b5730(0xdd)](){const _0x14e7ef=a129_0x4b5730;return this[_0x14e7ef(0x92)]['map'](({fileName:_0x1ad835})=>_0x1ad835);}async[a129_0x4b5730(0xab)](_0x4f1684,_0x3dc404,_0x446cf9){const _0x22b798=a129_0x4b5730,_0x141284=await path_utils_1['PathUtils'][_0x22b798(0xa8)](this[_0x22b798(0xb8)][_0x22b798(0xb6)],_0x4f1684,_0x3dc404,_0x446cf9),_0x20e798=components_utils_1[_0x22b798(0xcf)][_0x22b798(0xc9)](this[_0x22b798(0x92)],_0x4f1684,_0x446cf9,this['syncRecord'][_0x22b798(0xb6)]),_0x4d9294=factory_parser_1['FactoryParser'][_0x22b798(0xe1)]({'recordType':this[_0x22b798(0xb8)][_0x22b798(0xb6)],'sourceDir':_0x3dc404,'paths':_0x141284}),_0x2cbee1=await _0x4d9294[_0x22b798(0x94)](),_0x44e691=[],_0x1377c7=[];for(const _0x32c5bf of _0x2cbee1){const _0x440adc=_0x20e798[_0x22b798(0x95)](_0xa7b9f0=>_0xa7b9f0['name']===_0x32c5bf[_0x22b798(0xb5)]&&_0xa7b9f0[_0x22b798(0x8a)]===_0x32c5bf[_0x22b798(0x8a)]);if(!_0x440adc){_0x44e691[_0x22b798(0x9a)](_0x32c5bf);continue;}_0x32c5bf[_0x22b798(0xbf)]!==_0x440adc[_0x22b798(0xe3)]&&_0x1377c7[_0x22b798(0x9a)]({'meta':_0x440adc,'component':_0x32c5bf}),_0x20e798[_0x22b798(0xcc)](_0x20e798[_0x22b798(0xd3)](_0x440adc),0x1);}return{'inserted':_0x44e691,'modified':_0x1377c7,'removed':_0x20e798};}async[a129_0x4b5730(0xa4)](){const _0x32f4f7=a129_0x4b5730;this[_0x32f4f7(0xb8)]=this[_0x32f4f7(0xb3)][_0x32f4f7(0x9f)]===_0x32f4f7(0xb4)?await this[_0x32f4f7(0xbb)][_0x32f4f7(0xd7)](this[_0x32f4f7(0xb3)][_0x32f4f7(0xb9)]):await this[_0x32f4f7(0xbb)][_0x32f4f7(0x8c)](this['gitCommit'][_0x32f4f7(0x9f)]),this[_0x32f4f7(0xaa)]=await this[_0x32f4f7(0xb1)][_0x32f4f7(0xa9)]();}async[a129_0x4b5730(0xa5)](_0x5cdd8b){const _0x4542e8=a129_0x4b5730;if(this[_0x4542e8(0xb3)]['force']||_0x5cdd8b){this[_0x4542e8(0x92)]=this[_0x4542e8(0xc8)]?await this[_0x4542e8(0xb1)][_0x4542e8(0xb2)](this['branchId']):await this[_0x4542e8(0xb1)][_0x4542e8(0xbd)](this[_0x4542e8(0xcd)]);return;}const _0x567ae7=components_utils_1['ComponentsUtils'][_0x4542e8(0xe5)](this[_0x4542e8(0xb3)]['fileNames'],this[_0x4542e8(0xb8)][_0x4542e8(0xb6)]);this[_0x4542e8(0x92)]=[];while(_0x567ae7[_0x4542e8(0xad)]){const _0x113558=_0x567ae7[_0x4542e8(0xcc)](0x0,this[_0x4542e8(0xc4)]),_0x3d6cc0=this['branchId']?await this[_0x4542e8(0xb1)][_0x4542e8(0xbc)](_0x113558,this['branchId']):await this[_0x4542e8(0xb1)]['fetchRepositoryComponentsByFilenames'](_0x113558,this[_0x4542e8(0xcd)]);this['componentsMetadata'][_0x4542e8(0x9a)](..._0x3d6cc0);}}async[a129_0x4b5730(0xd8)](_0x4f7257){const _0xd43e98=a129_0x4b5730;this[_0xd43e98(0xc8)]?await this[_0xd43e98(0xae)][_0xd43e98(0x93)](constants_1[_0xd43e98(0x89)],this[_0xd43e98(0xc8)],{[constants_1[_0xd43e98(0xd5)]+_0xd43e98(0x9e)]:_0x4f7257,[constants_1[_0xd43e98(0xbe)]+_0xd43e98(0x99)]:Date[_0xd43e98(0xa0)]()}):await this[_0xd43e98(0xae)][_0xd43e98(0x93)](constants_1[_0xd43e98(0xc3)],this[_0xd43e98(0xcd)],{[constants_1[_0xd43e98(0xd5)]+'Synchronization_Status__c']:_0x4f7257});}[a129_0x4b5730(0xdf)](_0x35273f){const _0x471a69=a129_0x4b5730;this[_0x471a69(0xb3)]=_0x35273f;}[a129_0x4b5730(0xc7)](){const _0x4acfef=a129_0x4b5730;return this[_0x4acfef(0xaa)];}[a129_0x4b5730(0xde)](){const _0x16af43=a129_0x4b5730;return this[_0x16af43(0xcd)];}[a129_0x4b5730(0xd2)](){const _0x562686=a129_0x4b5730;return this[_0x562686(0xc8)];}};GitCommitService=__decorate([(0x0,typedi_1[a129_0x4b5730(0xa6)])({'transient':!![]}),__metadata(a129_0x4b5730(0x97),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a129_0x4b5730(0x96)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1['SalesforceService']])],GitCommitService),exports[a129_0x4b5730(0xba)]=GitCommitService;