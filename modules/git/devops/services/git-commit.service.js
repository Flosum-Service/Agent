const a129_0x20e7a4=a129_0x38d5;(function(_0x5e8e1d,_0x4d4094){const _0x55c3c0=a129_0x38d5,_0x586441=_0x5e8e1d();while(!![]){try{const _0x101fcb=parseInt(_0x55c3c0(0x182))/0x1*(-parseInt(_0x55c3c0(0x1a0))/0x2)+-parseInt(_0x55c3c0(0x19b))/0x3+parseInt(_0x55c3c0(0x17a))/0x4*(-parseInt(_0x55c3c0(0x190))/0x5)+parseInt(_0x55c3c0(0x1ac))/0x6+-parseInt(_0x55c3c0(0x160))/0x7+-parseInt(_0x55c3c0(0x15c))/0x8+parseInt(_0x55c3c0(0x178))/0x9;if(_0x101fcb===_0x4d4094)break;else _0x586441['push'](_0x586441['shift']());}catch(_0x4df290){_0x586441['push'](_0x586441['shift']());}}}(a129_0x239c,0x25c58));const a129_0x4d2b14=(function(){let _0x3160c4=!![];return function(_0x5e47ba,_0x3b0a57){const _0x139411=_0x3160c4?function(){const _0x2212dc=a129_0x38d5;if(_0x3b0a57){const _0xcebd63=_0x3b0a57[_0x2212dc(0x180)](_0x5e47ba,arguments);return _0x3b0a57=null,_0xcebd63;}}:function(){};return _0x3160c4=![],_0x139411;};}()),a129_0x512f83=a129_0x4d2b14(this,function(){const _0xd278d7=a129_0x38d5;return a129_0x512f83[_0xd278d7(0x1a8)]()['search'](_0xd278d7(0x1a3))[_0xd278d7(0x1a8)]()[_0xd278d7(0x173)](a129_0x512f83)[_0xd278d7(0x17d)](_0xd278d7(0x1a3));});function a129_0x38d5(_0x3f3cbf,_0x530628){const _0x585e65=a129_0x239c();return a129_0x38d5=function(_0x512f83,_0x4d2b14){_0x512f83=_0x512f83-0x152;let _0x239cf9=_0x585e65[_0x512f83];return _0x239cf9;},a129_0x38d5(_0x3f3cbf,_0x530628);}a129_0x512f83();'use strict';var __decorate=this&&this['__decorate']||function(_0x47cab3,_0x1c6425,_0x358899,_0x416d77){const _0x10b220=a129_0x38d5;var _0xf01b6f=arguments[_0x10b220(0x18f)],_0x54f116=_0xf01b6f<0x3?_0x1c6425:_0x416d77===null?_0x416d77=Object[_0x10b220(0x19a)](_0x1c6425,_0x358899):_0x416d77,_0x74eec;if(typeof Reflect==='object'&&typeof Reflect[_0x10b220(0x197)]===_0x10b220(0x18a))_0x54f116=Reflect[_0x10b220(0x197)](_0x47cab3,_0x1c6425,_0x358899,_0x416d77);else{for(var _0xa49bff=_0x47cab3[_0x10b220(0x18f)]-0x1;_0xa49bff>=0x0;_0xa49bff--)if(_0x74eec=_0x47cab3[_0xa49bff])_0x54f116=(_0xf01b6f<0x3?_0x74eec(_0x54f116):_0xf01b6f>0x3?_0x74eec(_0x1c6425,_0x358899,_0x54f116):_0x74eec(_0x1c6425,_0x358899))||_0x54f116;}return _0xf01b6f>0x3&&_0x54f116&&Object[_0x10b220(0x16d)](_0x1c6425,_0x358899,_0x54f116),_0x54f116;},__metadata=this&&this[a129_0x20e7a4(0x183)]||function(_0x1fd38e,_0x4ed22e){const _0x128973=a129_0x20e7a4;if(typeof Reflect===_0x128973(0x1a7)&&typeof Reflect[_0x128973(0x18c)]===_0x128973(0x18a))return Reflect['metadata'](_0x1fd38e,_0x4ed22e);};Object[a129_0x20e7a4(0x16d)](exports,a129_0x20e7a4(0x158),{'value':!![]}),exports[a129_0x20e7a4(0x166)]=void 0x0;function a129_0x239c(){const _0x2ca75b=['search','find','typedi','apply','fetchBranchComponents','2335TizlJa','__metadata','updateStatus','FLOSUM_GIT_NAMESPACE','execute','branchId','lastCommit','then','function','createCommit','metadata','fetchComponentsMetadata','updateRemoteState','length','115UEqLrZ','getRepositoryId','getRecordTypes','TASKS_PER_TICK','checkSyncStatus','crc','fetchRepositoryComponentsByFilenames','decorate','../utils/components.utils','fetchRepositoryOrBranchData','getOwnPropertyDescriptor','852060OLcNGB','filterMetadataComponents','indexOf','salesforceSync','SalesforceGitSyncService','158lIUhYW','patch','gitCommit','(((.+)+)+)+$','FactoryParser','branch','design:paramtypes','object','toString','recordTypes','setCommitDto','fetchRepositoryComponents','1750608UhdvGm','string','repositoryGit','getRepositoryRecordByName','getComponentRecordTypes','map','getUnusedComponentsFilePaths','componentsMetadata','Synchronization_Status__c','__esModule','SalesforceRestService','crc32','name','986040bYLxsM','repository','push','../../salesforce/services/salesforce-rest.service','925869sZeeBA','type','salesforceRest','parse','PathUtils','salesforceGitSync','GitCommitService','../../salesforce/services/salesforce.service','getBranchId','../../salesforce/services/salesforce-git-sync.service','Service','../utils/path.utils','splice','defineProperty','syncRecord','../../parsers/factory.parser','recordTypeName','repositoryId','FLOSUM_REPOSITORY','constructor','ComponentsUtils','salesforce','../../../../constants','fetchBranchComponentsByFilenames','5406552yOuDOX','SalesforceService','2396kCHhkJ','SalesforceSyncService','recordType'];a129_0x239c=function(){return _0x2ca75b;};return a129_0x239c();}const constants_1=require(a129_0x20e7a4(0x176)),salesforce_git_sync_service_1=require(a129_0x20e7a4(0x169)),salesforce_rest_service_1=require(a129_0x20e7a4(0x15f)),typedi_1=require(a129_0x20e7a4(0x17f)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a129_0x20e7a4(0x167)),factory_parser_1=require(a129_0x20e7a4(0x16f)),path_utils_1=require(a129_0x20e7a4(0x16b)),components_utils_1=require(a129_0x20e7a4(0x198));let GitCommitService=class GitCommitService{constructor(_0x3e4a98,_0x2c6e11,_0x2e0ddf,_0x4be97d){const _0x3f464d=a129_0x20e7a4;this['salesforceGitSync']=_0x3e4a98,this['salesforceRest']=_0x2c6e11,this[_0x3f464d(0x19e)]=_0x2e0ddf,this[_0x3f464d(0x175)]=_0x4be97d,this[_0x3f464d(0x193)]=0xc8;}get[a129_0x20e7a4(0x171)](){const _0x88f54d=a129_0x20e7a4;var _0x34dac2;return((_0x34dac2=this['syncRecord'])===null||_0x34dac2===void 0x0?void 0x0:_0x34dac2[_0x88f54d(0x171)])||'';}get['branchId'](){var _0x1f2249;return((_0x1f2249=this['syncRecord'])===null||_0x1f2249===void 0x0?void 0x0:_0x1f2249['branchId'])||'';}get[a129_0x20e7a4(0x17c)](){const _0x44dad8=a129_0x20e7a4;return this[_0x44dad8(0x16e)]['recordTypeName'];}async[a129_0x20e7a4(0x18b)](_0x26bced){const _0x157f98=a129_0x20e7a4;return this[_0x157f98(0x165)][_0x157f98(0x18b)](_0x26bced,this['repositoryId']);}async[a129_0x20e7a4(0x194)](_0x129b89){const _0x437996=a129_0x20e7a4;if(this['syncRecord']){const _0xf2b568=await this[_0x437996(0x19e)]['getRemoteStateAttachmentId'](this[_0x437996(0x16e)]),_0x588ea3=await this['salesforce']['retrieveAttachment'](_0xf2b568)[_0x437996(0x189)](_0x1bba62=>typeof _0x1bba62===_0x437996(0x1ad)?JSON[_0x437996(0x163)](_0x1bba62):_0x1bba62)['catch'](()=>({}));if(_0x588ea3[this[_0x437996(0x1a2)][_0x437996(0x1ae)]]){if(_0x588ea3[this[_0x437996(0x1a2)][_0x437996(0x1ae)]][_0x437996(0x188)]===_0x129b89)return!![];}return![];}return![];}async[a129_0x20e7a4(0x18e)](_0x7207b1){const _0x21ef57=a129_0x20e7a4;this['syncRecord']&&await this[_0x21ef57(0x19e)]['updateRemoteState'](this[_0x21ef57(0x16e)],_0x7207b1);}[a129_0x20e7a4(0x155)](){const _0x5e5ac1=a129_0x20e7a4;return this[_0x5e5ac1(0x156)][_0x5e5ac1(0x154)](({fileName:_0x388679})=>_0x388679);}async['proceedFile'](_0x2996a1,_0xa4932a,_0x38c55f){const _0x27aef0=a129_0x20e7a4,_0x4b3215=await path_utils_1[_0x27aef0(0x164)]['readComponentPaths'](this[_0x27aef0(0x16e)]['recordTypeName'],_0x2996a1,_0xa4932a,_0x38c55f),_0x109c40=components_utils_1[_0x27aef0(0x174)][_0x27aef0(0x19c)](this[_0x27aef0(0x156)],_0x2996a1,_0x38c55f,this[_0x27aef0(0x16e)][_0x27aef0(0x170)]),_0x418e6b=factory_parser_1[_0x27aef0(0x1a4)]['create']({'recordType':this[_0x27aef0(0x16e)]['recordTypeName'],'sourceDir':_0xa4932a,'paths':_0x4b3215}),_0x3a804e=await _0x418e6b[_0x27aef0(0x186)](),_0x265f75=[],_0x271e80=[];for(const _0x1d5c1f of _0x3a804e){const _0x1de805=_0x109c40[_0x27aef0(0x17e)](_0x30f43e=>_0x30f43e[_0x27aef0(0x15b)]===_0x1d5c1f[_0x27aef0(0x15b)]&&_0x30f43e[_0x27aef0(0x161)]===_0x1d5c1f[_0x27aef0(0x161)]);if(!_0x1de805){_0x265f75[_0x27aef0(0x15e)](_0x1d5c1f);continue;}_0x1d5c1f[_0x27aef0(0x195)]!==_0x1de805[_0x27aef0(0x15a)]&&_0x271e80[_0x27aef0(0x15e)]({'meta':_0x1de805,'component':_0x1d5c1f}),_0x109c40[_0x27aef0(0x16c)](_0x109c40[_0x27aef0(0x19d)](_0x1de805),0x1);}return{'inserted':_0x265f75,'modified':_0x271e80,'removed':_0x109c40};}async[a129_0x20e7a4(0x199)](){const _0x951db=a129_0x20e7a4;this[_0x951db(0x16e)]=this[_0x951db(0x1a2)][_0x951db(0x1a5)]==='master'?await this['salesforceSync'][_0x951db(0x152)](this[_0x951db(0x1a2)][_0x951db(0x15d)]):await this[_0x951db(0x19e)]['getBranchRecordByName'](this['gitCommit']['branch']),this[_0x951db(0x1a9)]=await this['salesforceGitSync'][_0x951db(0x153)]();}async[a129_0x20e7a4(0x18d)](_0x15b39f){const _0x432d8d=a129_0x20e7a4;if(this[_0x432d8d(0x1a2)]['force']||_0x15b39f){this['componentsMetadata']=this[_0x432d8d(0x187)]?await this[_0x432d8d(0x165)][_0x432d8d(0x181)](this[_0x432d8d(0x187)]):await this[_0x432d8d(0x165)][_0x432d8d(0x1ab)](this[_0x432d8d(0x171)]);return;}const _0x2aed6b=components_utils_1['ComponentsUtils']['prepareComponentNamesForFetchMetadata'](this[_0x432d8d(0x1a2)]['fileNames'],this[_0x432d8d(0x16e)]['recordTypeName']);this[_0x432d8d(0x156)]=[];while(_0x2aed6b[_0x432d8d(0x18f)]){const _0x2b07e5=_0x2aed6b[_0x432d8d(0x16c)](0x0,this['TASKS_PER_TICK']),_0x55d362=this[_0x432d8d(0x187)]?await this[_0x432d8d(0x165)][_0x432d8d(0x177)](_0x2b07e5,this[_0x432d8d(0x187)]):await this[_0x432d8d(0x165)][_0x432d8d(0x196)](_0x2b07e5,this[_0x432d8d(0x171)]);this[_0x432d8d(0x156)][_0x432d8d(0x15e)](..._0x55d362);}}async[a129_0x20e7a4(0x184)](_0xea0b88){const _0x18a667=a129_0x20e7a4;this[_0x18a667(0x187)]?await this[_0x18a667(0x162)][_0x18a667(0x1a1)](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1[_0x18a667(0x185)]+_0x18a667(0x157)]:_0xea0b88,[constants_1['FLOSUM_NAMESPACE']+'Last_Updated_On__c']:Date['now']()}):await this[_0x18a667(0x162)][_0x18a667(0x1a1)](constants_1[_0x18a667(0x172)],this[_0x18a667(0x171)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x18a667(0x157)]:_0xea0b88});}[a129_0x20e7a4(0x1aa)](_0x566dd0){this['gitCommit']=_0x566dd0;}[a129_0x20e7a4(0x192)](){const _0x1e77d5=a129_0x20e7a4;return this[_0x1e77d5(0x1a9)];}[a129_0x20e7a4(0x191)](){const _0x253c93=a129_0x20e7a4;return this[_0x253c93(0x171)];}[a129_0x20e7a4(0x168)](){return this['branchId'];}};GitCommitService=__decorate([(0x0,typedi_1[a129_0x20e7a4(0x16a)])({'transient':!![]}),__metadata(a129_0x20e7a4(0x1a6),[salesforce_git_sync_service_1[a129_0x20e7a4(0x19f)],salesforce_rest_service_1[a129_0x20e7a4(0x159)],salesforce_sync_service_1[a129_0x20e7a4(0x17b)],salesforce_service_1[a129_0x20e7a4(0x179)]])],GitCommitService),exports[a129_0x20e7a4(0x166)]=GitCommitService;