const a131_0xaea315=a131_0x1403;(function(_0x497451,_0x21d038){const _0x1cde09=a131_0x1403,_0x13cdac=_0x497451();while(!![]){try{const _0x3e0cda=parseInt(_0x1cde09(0x126))/0x1+-parseInt(_0x1cde09(0x135))/0x2*(parseInt(_0x1cde09(0x138))/0x3)+parseInt(_0x1cde09(0xf6))/0x4+-parseInt(_0x1cde09(0x110))/0x5*(parseInt(_0x1cde09(0x103))/0x6)+-parseInt(_0x1cde09(0xed))/0x7+parseInt(_0x1cde09(0xef))/0x8*(-parseInt(_0x1cde09(0x136))/0x9)+parseInt(_0x1cde09(0x11f))/0xa;if(_0x3e0cda===_0x21d038)break;else _0x13cdac['push'](_0x13cdac['shift']());}catch(_0x444c22){_0x13cdac['push'](_0x13cdac['shift']());}}}(a131_0x1b2f,0x85f81));const a131_0x40e7c7=(function(){let _0x5cd56e=!![];return function(_0x40ef98,_0x4a54f4){const _0x42304b=_0x5cd56e?function(){const _0x137daf=a131_0x1403;if(_0x4a54f4){const _0x3596cf=_0x4a54f4[_0x137daf(0x12b)](_0x40ef98,arguments);return _0x4a54f4=null,_0x3596cf;}}:function(){};return _0x5cd56e=![],_0x42304b;};}()),a131_0x465be6=a131_0x40e7c7(this,function(){const _0x17d470=a131_0x1403;return a131_0x465be6['toString']()['search']('(((.+)+)+)+$')[_0x17d470(0x11c)]()[_0x17d470(0xf2)](a131_0x465be6)[_0x17d470(0x111)](_0x17d470(0x112));});a131_0x465be6();'use strict';var __decorate=this&&this[a131_0xaea315(0x10f)]||function(_0x1816a1,_0x263270,_0x2c18f8,_0x52b7b8){const _0x1e0ae8=a131_0xaea315;var _0x4f87a9=arguments[_0x1e0ae8(0x119)],_0x16d009=_0x4f87a9<0x3?_0x263270:_0x52b7b8===null?_0x52b7b8=Object[_0x1e0ae8(0x13d)](_0x263270,_0x2c18f8):_0x52b7b8,_0x396537;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1e0ae8(0x12c))_0x16d009=Reflect[_0x1e0ae8(0x13e)](_0x1816a1,_0x263270,_0x2c18f8,_0x52b7b8);else{for(var _0x2415dc=_0x1816a1[_0x1e0ae8(0x119)]-0x1;_0x2415dc>=0x0;_0x2415dc--)if(_0x396537=_0x1816a1[_0x2415dc])_0x16d009=(_0x4f87a9<0x3?_0x396537(_0x16d009):_0x4f87a9>0x3?_0x396537(_0x263270,_0x2c18f8,_0x16d009):_0x396537(_0x263270,_0x2c18f8))||_0x16d009;}return _0x4f87a9>0x3&&_0x16d009&&Object[_0x1e0ae8(0x13a)](_0x263270,_0x2c18f8,_0x16d009),_0x16d009;},__metadata=this&&this[a131_0xaea315(0x131)]||function(_0x432784,_0x4f12ac){const _0x167cd5=a131_0xaea315;if(typeof Reflect===_0x167cd5(0x11e)&&typeof Reflect['metadata']===_0x167cd5(0x12c))return Reflect[_0x167cd5(0x117)](_0x432784,_0x4f12ac);};Object['defineProperty'](exports,a131_0xaea315(0x115),{'value':!![]}),exports[a131_0xaea315(0x124)]=void 0x0;function a131_0x1b2f(){const _0x2eb769=['fetchRepositoryComponentsByFilenames','FLOSUM_REPOSITORY','toString','salesforceGitSync','object','13282360NoDqkC','type','typedi','TASKS_PER_TICK','master','GitCommitService','../../salesforce/services/salesforce-sync.service','305518hgbcHX','patch','getRemoteStateAttachmentId','retrieveAttachment','updateRemoteState','apply','function','parse','find','fetchComponentsMetadata','ComponentsUtils','__metadata','filterMetadataComponents','Synchronization_Status__c','fetchBranchComponentsByFilenames','1556060lsRHqR','99SyxqPj','salesforceRest','3QhEfNr','SalesforceService','defineProperty','componentsMetadata','map','getOwnPropertyDescriptor','decorate','syncRecord','repositoryId','FactoryParser','now','SalesforceGitSyncService','recordType','repositoryGit','indexOf','crc32','branch','recordTypes','gitCommit','3053729NfLAeI','salesforceSync','68624iwkYTM','PathUtils','getRepositoryRecordByName','constructor','../../salesforce/services/salesforce-git-sync.service','string','FLOSUM_BRANCH','1971924pucOKq','../../salesforce/services/salesforce.service','getUnusedComponentsFilePaths','SalesforceSyncService','getRecordTypes','FLOSUM_GIT_NAMESPACE','Last_Updated_On__c','checkSyncStatus','crc','prepareComponentNamesForFetchMetadata','getBranchId','setCommitDto','../../parsers/factory.parser','114txpKpf','SalesforceRestService','createCommit','force','recordTypeName','catch','updateStatus','../utils/components.utils','branchId','lastCommit','push','../utils/path.utils','__decorate','70885eQZwfr','search','(((.+)+)+)+$','design:paramtypes','proceedFile','__esModule','splice','metadata','readComponentPaths','length'];a131_0x1b2f=function(){return _0x2eb769;};return a131_0x1b2f();}function a131_0x1403(_0x2a26f7,_0x3933e7){const _0x5bbd04=a131_0x1b2f();return a131_0x1403=function(_0x465be6,_0x40e7c7){_0x465be6=_0x465be6-0xe4;let _0x1b2f07=_0x5bbd04[_0x465be6];return _0x1b2f07;},a131_0x1403(_0x2a26f7,_0x3933e7);}const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require(a131_0xaea315(0xf3)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require(a131_0xaea315(0x121)),salesforce_sync_service_1=require(a131_0xaea315(0x125)),salesforce_service_1=require(a131_0xaea315(0xf7)),factory_parser_1=require(a131_0xaea315(0x102)),path_utils_1=require(a131_0xaea315(0x10e)),components_utils_1=require(a131_0xaea315(0x10a));let GitCommitService=class GitCommitService{constructor(_0x25eafe,_0x21feff,_0x5c1ce2,_0x15ce2c){const _0x589160=a131_0xaea315;this[_0x589160(0x11d)]=_0x25eafe,this[_0x589160(0x137)]=_0x21feff,this[_0x589160(0xee)]=_0x5c1ce2,this['salesforce']=_0x15ce2c,this[_0x589160(0x122)]=0xc8;}get[a131_0xaea315(0x140)](){const _0x1e6e1f=a131_0xaea315;var _0x242f33;return((_0x242f33=this['syncRecord'])===null||_0x242f33===void 0x0?void 0x0:_0x242f33[_0x1e6e1f(0x140)])||'';}get[a131_0xaea315(0x10b)](){const _0x2b4232=a131_0xaea315;var _0xb57f7e;return((_0xb57f7e=this[_0x2b4232(0x13f)])===null||_0xb57f7e===void 0x0?void 0x0:_0xb57f7e[_0x2b4232(0x10b)])||'';}get[a131_0xaea315(0xe6)](){const _0x3a3989=a131_0xaea315;return this['syncRecord'][_0x3a3989(0x107)];}async['createCommit'](_0x57f5ab){const _0x5da3a8=a131_0xaea315;return this['salesforceGitSync'][_0x5da3a8(0x105)](_0x57f5ab,this[_0x5da3a8(0x140)]);}async[a131_0xaea315(0xfd)](_0x1c73e5){const _0x391dc1=a131_0xaea315;if(this[_0x391dc1(0x13f)]){const _0x4dc66a=await this[_0x391dc1(0xee)][_0x391dc1(0x128)](this[_0x391dc1(0x13f)]),_0x38a891=await this['salesforce'][_0x391dc1(0x129)](_0x4dc66a)['then'](_0x11d270=>typeof _0x11d270===_0x391dc1(0xf4)?JSON[_0x391dc1(0x12d)](_0x11d270):_0x11d270)[_0x391dc1(0x108)](()=>({}));if(_0x38a891[this[_0x391dc1(0xec)]['repositoryGit']]){if(_0x38a891[this['gitCommit'][_0x391dc1(0xe7)]][_0x391dc1(0x10c)]===_0x1c73e5)return!![];}return![];}return![];}async[a131_0xaea315(0x12a)](_0x1062bc){const _0x56d9df=a131_0xaea315;this[_0x56d9df(0x13f)]&&await this[_0x56d9df(0xee)][_0x56d9df(0x12a)](this[_0x56d9df(0x13f)],_0x1062bc);}[a131_0xaea315(0xf8)](){const _0x355a77=a131_0xaea315;return this[_0x355a77(0x13b)][_0x355a77(0x13c)](({fileName:_0x25a5a3})=>_0x25a5a3);}async[a131_0xaea315(0x114)](_0x19b5bf,_0x279c12,_0x5b25a8){const _0x32edf0=a131_0xaea315,_0x57d80d=await path_utils_1[_0x32edf0(0xf0)][_0x32edf0(0x118)](this['syncRecord'][_0x32edf0(0x107)],_0x19b5bf,_0x279c12,_0x5b25a8),_0x45b37d=components_utils_1[_0x32edf0(0x130)][_0x32edf0(0x132)](this[_0x32edf0(0x13b)],_0x19b5bf,_0x5b25a8,this['syncRecord'][_0x32edf0(0x107)]),_0x1676c8=factory_parser_1[_0x32edf0(0x141)]['create']({'recordType':this['syncRecord'][_0x32edf0(0x107)],'sourceDir':_0x279c12,'paths':_0x57d80d}),_0x7839a7=await _0x1676c8['execute'](),_0x33c9e2=[],_0x37eb1a=[];for(const _0x346cc1 of _0x7839a7){const _0x15fe5b=_0x45b37d[_0x32edf0(0x12e)](_0x4a48e3=>_0x4a48e3['name']===_0x346cc1['name']&&_0x4a48e3['type']===_0x346cc1[_0x32edf0(0x120)]);if(!_0x15fe5b){_0x33c9e2[_0x32edf0(0x10d)](_0x346cc1);continue;}_0x346cc1[_0x32edf0(0xfe)]!==_0x15fe5b[_0x32edf0(0xe9)]&&_0x37eb1a[_0x32edf0(0x10d)]({'meta':_0x15fe5b,'component':_0x346cc1}),_0x45b37d[_0x32edf0(0x116)](_0x45b37d[_0x32edf0(0xe8)](_0x15fe5b),0x1);}return{'inserted':_0x33c9e2,'modified':_0x37eb1a,'removed':_0x45b37d};}async['fetchRepositoryOrBranchData'](){const _0x478b9a=a131_0xaea315;this[_0x478b9a(0x13f)]=this[_0x478b9a(0xec)][_0x478b9a(0xea)]===_0x478b9a(0x123)?await this[_0x478b9a(0xee)][_0x478b9a(0xf1)](this[_0x478b9a(0xec)]['repository']):await this['salesforceSync']['getBranchRecordByName'](this[_0x478b9a(0xec)][_0x478b9a(0xea)]),this[_0x478b9a(0xeb)]=await this[_0x478b9a(0x11d)]['getComponentRecordTypes']();}async[a131_0xaea315(0x12f)](_0x30b768){const _0x91461d=a131_0xaea315;if(this['gitCommit'][_0x91461d(0x106)]||_0x30b768){this['componentsMetadata']=this[_0x91461d(0x10b)]?await this[_0x91461d(0x11d)]['fetchBranchComponents'](this[_0x91461d(0x10b)]):await this[_0x91461d(0x11d)]['fetchRepositoryComponents'](this[_0x91461d(0x140)]);return;}const _0x258e8b=components_utils_1[_0x91461d(0x130)][_0x91461d(0xff)](this['gitCommit']['fileNames'],this[_0x91461d(0x13f)][_0x91461d(0x107)]);this[_0x91461d(0x13b)]=[];while(_0x258e8b[_0x91461d(0x119)]){const _0x33e5f6=_0x258e8b['splice'](0x0,this[_0x91461d(0x122)]),_0x2589bc=this['branchId']?await this[_0x91461d(0x11d)][_0x91461d(0x134)](_0x33e5f6,this[_0x91461d(0x10b)]):await this[_0x91461d(0x11d)][_0x91461d(0x11a)](_0x33e5f6,this[_0x91461d(0x140)]);this[_0x91461d(0x13b)][_0x91461d(0x10d)](..._0x2589bc);}}async[a131_0xaea315(0x109)](_0x374bf5){const _0x36f63e=a131_0xaea315;this['branchId']?await this[_0x36f63e(0x137)]['patch'](constants_1[_0x36f63e(0xf5)],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x36f63e(0x133)]:_0x374bf5,[constants_1['FLOSUM_NAMESPACE']+_0x36f63e(0xfc)]:Date[_0x36f63e(0xe4)]()}):await this[_0x36f63e(0x137)][_0x36f63e(0x127)](constants_1[_0x36f63e(0x11b)],this['repositoryId'],{[constants_1[_0x36f63e(0xfb)]+_0x36f63e(0x133)]:_0x374bf5});}[a131_0xaea315(0x101)](_0x262f30){const _0x774637=a131_0xaea315;this[_0x774637(0xec)]=_0x262f30;}[a131_0xaea315(0xfa)](){return this['recordTypes'];}['getRepositoryId'](){const _0xfbed7b=a131_0xaea315;return this[_0xfbed7b(0x140)];}[a131_0xaea315(0x100)](){const _0x103a2a=a131_0xaea315;return this[_0x103a2a(0x10b)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a131_0xaea315(0x113),[salesforce_git_sync_service_1[a131_0xaea315(0xe5)],salesforce_rest_service_1[a131_0xaea315(0x104)],salesforce_sync_service_1[a131_0xaea315(0xf9)],salesforce_service_1[a131_0xaea315(0x139)]])],GitCommitService),exports[a131_0xaea315(0x124)]=GitCommitService;