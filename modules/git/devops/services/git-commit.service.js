const a131_0x3d80dc=a131_0x3079;(function(_0x37bf61,_0x1399c4){const _0x32fc98=a131_0x3079,_0x3f3161=_0x37bf61();while(!![]){try{const _0x5a957e=parseInt(_0x32fc98(0x1f3))/0x1+-parseInt(_0x32fc98(0x1e2))/0x2+parseInt(_0x32fc98(0x1fe))/0x3+-parseInt(_0x32fc98(0x1c0))/0x4+parseInt(_0x32fc98(0x1e3))/0x5+parseInt(_0x32fc98(0x1e1))/0x6+-parseInt(_0x32fc98(0x1dc))/0x7;if(_0x5a957e===_0x1399c4)break;else _0x3f3161['push'](_0x3f3161['shift']());}catch(_0x4d4a69){_0x3f3161['push'](_0x3f3161['shift']());}}}(a131_0x26b1,0x2be07));const a131_0x36a308=(function(){let _0x530caa=!![];return function(_0x2ea84f,_0x14d29c){const _0x1e14a8=_0x530caa?function(){const _0x44b3b7=a131_0x3079;if(_0x14d29c){const _0x2d718f=_0x14d29c[_0x44b3b7(0x210)](_0x2ea84f,arguments);return _0x14d29c=null,_0x2d718f;}}:function(){};return _0x530caa=![],_0x1e14a8;};}()),a131_0x151ccb=a131_0x36a308(this,function(){const _0x869db0=a131_0x3079;return a131_0x151ccb[_0x869db0(0x21c)]()[_0x869db0(0x1eb)]('(((.+)+)+)+$')['toString']()[_0x869db0(0x1c5)](a131_0x151ccb)[_0x869db0(0x1eb)](_0x869db0(0x1ee));});a131_0x151ccb();'use strict';var __decorate=this&&this[a131_0x3d80dc(0x1fd)]||function(_0x10ebd7,_0x54cb7f,_0x4ec809,_0x427b56){const _0x4b2372=a131_0x3d80dc;var _0x319be7=arguments[_0x4b2372(0x1f8)],_0x45602c=_0x319be7<0x3?_0x54cb7f:_0x427b56===null?_0x427b56=Object[_0x4b2372(0x1d4)](_0x54cb7f,_0x4ec809):_0x427b56,_0x21cb29;if(typeof Reflect===_0x4b2372(0x1be)&&typeof Reflect[_0x4b2372(0x1c2)]===_0x4b2372(0x1d5))_0x45602c=Reflect['decorate'](_0x10ebd7,_0x54cb7f,_0x4ec809,_0x427b56);else{for(var _0x4e7dbb=_0x10ebd7['length']-0x1;_0x4e7dbb>=0x0;_0x4e7dbb--)if(_0x21cb29=_0x10ebd7[_0x4e7dbb])_0x45602c=(_0x319be7<0x3?_0x21cb29(_0x45602c):_0x319be7>0x3?_0x21cb29(_0x54cb7f,_0x4ec809,_0x45602c):_0x21cb29(_0x54cb7f,_0x4ec809))||_0x45602c;}return _0x319be7>0x3&&_0x45602c&&Object[_0x4b2372(0x1bf)](_0x54cb7f,_0x4ec809,_0x45602c),_0x45602c;},__metadata=this&&this['__metadata']||function(_0x659a5a,_0x2ef445){const _0x361c67=a131_0x3d80dc;if(typeof Reflect===_0x361c67(0x1be)&&typeof Reflect['metadata']===_0x361c67(0x1d5))return Reflect[_0x361c67(0x1e0)](_0x659a5a,_0x2ef445);};Object[a131_0x3d80dc(0x1bf)](exports,a131_0x3d80dc(0x200),{'value':!![]}),exports[a131_0x3d80dc(0x1dd)]=void 0x0;function a131_0x26b1(){const _0x2ae5ac=['1125150LmKYBh','recordTypes','FactoryParser','map','../../salesforce/services/salesforce-git-sync.service','SalesforceRestService','getUnusedComponentsFilePaths','Synchronization_Status__c','search','fetchBranchComponents','updateStatus','(((.+)+)+)+$','Last_Updated_On__c','../../salesforce/services/salesforce-rest.service','branch','salesforceSync','83301NBatcd','readComponentPaths','fetchComponentsMetadata','repository','fetchRepositoryComponentsByFilenames','length','fetchBranchComponentsByFilenames','Service','fetchRepositoryComponents','SalesforceService','__decorate','890958LgYmNi','updateRemoteState','__esModule','name','ComponentsUtils','parse','salesforceRest','FLOSUM_REPOSITORY','getRepositoryRecordByName','salesforceGitSync','crc32','getRecordTypes','../../salesforce/services/salesforce.service','FLOSUM_BRANCH','type','splice','../../parsers/factory.parser','gitCommit','apply','SalesforceSyncService','salesforce','repositoryId','FLOSUM_GIT_NAMESPACE','push','then','repositoryGit','now','../utils/path.utils','indexOf','master','toString','lastCommit','FLOSUM_NAMESPACE','object','defineProperty','1084820CyLCxZ','patch','decorate','PathUtils','SalesforceGitSyncService','constructor','fileNames','checkSyncStatus','createCommit','TASKS_PER_TICK','fetchRepositoryOrBranchData','catch','../../../../constants','prepareComponentNamesForFetchMetadata','recordType','branchId','recordTypeName','design:paramtypes','crc','getBranchId','getOwnPropertyDescriptor','function','getRepositoryId','../utils/components.utils','getRemoteStateAttachmentId','execute','syncRecord','../../salesforce/services/salesforce-sync.service','1071301gcHqOF','GitCommitService','filterMetadataComponents','componentsMetadata','metadata','1829250fXduHI','612450aXafKk'];a131_0x26b1=function(){return _0x2ae5ac;};return a131_0x26b1();}function a131_0x3079(_0x3bbcef,_0x27be07){const _0x4aae60=a131_0x26b1();return a131_0x3079=function(_0x151ccb,_0x36a308){_0x151ccb=_0x151ccb-0x1bd;let _0x26b1d5=_0x4aae60[_0x151ccb];return _0x26b1d5;},a131_0x3079(_0x3bbcef,_0x27be07);}const constants_1=require(a131_0x3d80dc(0x1cc)),salesforce_git_sync_service_1=require(a131_0x3d80dc(0x1e7)),salesforce_rest_service_1=require(a131_0x3d80dc(0x1f0)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a131_0x3d80dc(0x1db)),salesforce_service_1=require(a131_0x3d80dc(0x20a)),factory_parser_1=require(a131_0x3d80dc(0x20e)),path_utils_1=require(a131_0x3d80dc(0x219)),components_utils_1=require(a131_0x3d80dc(0x1d7));let GitCommitService=class GitCommitService{constructor(_0xf6ec69,_0x18f308,_0x4c50d1,_0x29016a){const _0x363fc6=a131_0x3d80dc;this[_0x363fc6(0x207)]=_0xf6ec69,this[_0x363fc6(0x204)]=_0x18f308,this[_0x363fc6(0x1f2)]=_0x4c50d1,this[_0x363fc6(0x212)]=_0x29016a,this[_0x363fc6(0x1c9)]=0xc8;}get[a131_0x3d80dc(0x213)](){const _0x336e87=a131_0x3d80dc;var _0x2de859;return((_0x2de859=this[_0x336e87(0x1da)])===null||_0x2de859===void 0x0?void 0x0:_0x2de859[_0x336e87(0x213)])||'';}get[a131_0x3d80dc(0x1cf)](){const _0x2acbe1=a131_0x3d80dc;var _0x1a9462;return((_0x1a9462=this[_0x2acbe1(0x1da)])===null||_0x1a9462===void 0x0?void 0x0:_0x1a9462[_0x2acbe1(0x1cf)])||'';}get[a131_0x3d80dc(0x1ce)](){return this['syncRecord']['recordTypeName'];}async[a131_0x3d80dc(0x1c8)](_0x15ac30){const _0x3f8afd=a131_0x3d80dc;return this['salesforceGitSync'][_0x3f8afd(0x1c8)](_0x15ac30,this[_0x3f8afd(0x213)]);}async[a131_0x3d80dc(0x1c7)](_0x866909){const _0x25035b=a131_0x3d80dc;if(this[_0x25035b(0x1da)]){const _0x151b12=await this[_0x25035b(0x1f2)][_0x25035b(0x1d8)](this['syncRecord']),_0x595c23=await this[_0x25035b(0x212)]['retrieveAttachment'](_0x151b12)[_0x25035b(0x216)](_0x5bb8c9=>typeof _0x5bb8c9==='string'?JSON[_0x25035b(0x203)](_0x5bb8c9):_0x5bb8c9)[_0x25035b(0x1cb)](()=>({}));if(_0x595c23[this[_0x25035b(0x20f)][_0x25035b(0x217)]]){if(_0x595c23[this['gitCommit']['repositoryGit']][_0x25035b(0x21d)]===_0x866909)return!![];}return![];}return![];}async['updateRemoteState'](_0x239e21){const _0x50c2c1=a131_0x3d80dc;this[_0x50c2c1(0x1da)]&&await this[_0x50c2c1(0x1f2)][_0x50c2c1(0x1ff)](this[_0x50c2c1(0x1da)],_0x239e21);}[a131_0x3d80dc(0x1e9)](){const _0x2ab74f=a131_0x3d80dc;return this[_0x2ab74f(0x1df)][_0x2ab74f(0x1e6)](({fileName:_0x1778d1})=>_0x1778d1);}async['proceedFile'](_0x5442d,_0x10c73b,_0x1d79b9){const _0x3e0478=a131_0x3d80dc,_0x4114c9=await path_utils_1[_0x3e0478(0x1c3)][_0x3e0478(0x1f4)](this[_0x3e0478(0x1da)][_0x3e0478(0x1d0)],_0x5442d,_0x10c73b,_0x1d79b9),_0x5226bb=components_utils_1[_0x3e0478(0x202)][_0x3e0478(0x1de)](this[_0x3e0478(0x1df)],_0x5442d,_0x1d79b9,this[_0x3e0478(0x1da)][_0x3e0478(0x1d0)]),_0x1de1dd=factory_parser_1[_0x3e0478(0x1e5)]['create']({'recordType':this[_0x3e0478(0x1da)][_0x3e0478(0x1d0)],'sourceDir':_0x10c73b,'paths':_0x4114c9}),_0x1cea39=await _0x1de1dd[_0x3e0478(0x1d9)](),_0x4bc599=[],_0x582920=[];for(const _0x38935f of _0x1cea39){const _0x47804f=_0x5226bb['find'](_0xfb0fab=>_0xfb0fab[_0x3e0478(0x201)]===_0x38935f[_0x3e0478(0x201)]&&_0xfb0fab['type']===_0x38935f[_0x3e0478(0x20c)]);if(!_0x47804f){_0x4bc599[_0x3e0478(0x215)](_0x38935f);continue;}_0x38935f[_0x3e0478(0x1d2)]!==_0x47804f[_0x3e0478(0x208)]&&_0x582920['push']({'meta':_0x47804f,'component':_0x38935f}),_0x5226bb[_0x3e0478(0x20d)](_0x5226bb[_0x3e0478(0x21a)](_0x47804f),0x1);}return{'inserted':_0x4bc599,'modified':_0x582920,'removed':_0x5226bb};}async[a131_0x3d80dc(0x1ca)](){const _0x4b6f6f=a131_0x3d80dc;this[_0x4b6f6f(0x1da)]=this[_0x4b6f6f(0x20f)][_0x4b6f6f(0x1f1)]===_0x4b6f6f(0x21b)?await this['salesforceSync'][_0x4b6f6f(0x206)](this[_0x4b6f6f(0x20f)][_0x4b6f6f(0x1f6)]):await this['salesforceSync']['getBranchRecordByName'](this[_0x4b6f6f(0x20f)][_0x4b6f6f(0x1f1)]),this[_0x4b6f6f(0x1e4)]=await this[_0x4b6f6f(0x207)]['getComponentRecordTypes']();}async[a131_0x3d80dc(0x1f5)](_0x4990d7){const _0x182ae8=a131_0x3d80dc;if(this[_0x182ae8(0x20f)]['force']||_0x4990d7){this['componentsMetadata']=this[_0x182ae8(0x1cf)]?await this[_0x182ae8(0x207)][_0x182ae8(0x1ec)](this['branchId']):await this['salesforceGitSync'][_0x182ae8(0x1fb)](this[_0x182ae8(0x213)]);return;}const _0x17e07d=components_utils_1[_0x182ae8(0x202)][_0x182ae8(0x1cd)](this[_0x182ae8(0x20f)][_0x182ae8(0x1c6)],this['syncRecord'][_0x182ae8(0x1d0)]);this['componentsMetadata']=[];while(_0x17e07d[_0x182ae8(0x1f8)]){const _0x36479d=_0x17e07d[_0x182ae8(0x20d)](0x0,this[_0x182ae8(0x1c9)]),_0x44df15=this[_0x182ae8(0x1cf)]?await this[_0x182ae8(0x207)][_0x182ae8(0x1f9)](_0x36479d,this[_0x182ae8(0x1cf)]):await this[_0x182ae8(0x207)][_0x182ae8(0x1f7)](_0x36479d,this[_0x182ae8(0x213)]);this[_0x182ae8(0x1df)][_0x182ae8(0x215)](..._0x44df15);}}async[a131_0x3d80dc(0x1ed)](_0x56a122){const _0xcdbb31=a131_0x3d80dc;this[_0xcdbb31(0x1cf)]?await this['salesforceRest']['patch'](constants_1[_0xcdbb31(0x20b)],this[_0xcdbb31(0x1cf)],{[constants_1[_0xcdbb31(0x214)]+_0xcdbb31(0x1ea)]:_0x56a122,[constants_1[_0xcdbb31(0x1bd)]+_0xcdbb31(0x1ef)]:Date[_0xcdbb31(0x218)]()}):await this['salesforceRest'][_0xcdbb31(0x1c1)](constants_1[_0xcdbb31(0x205)],this['repositoryId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0xcdbb31(0x1ea)]:_0x56a122});}['setCommitDto'](_0x335e9b){const _0x470b3f=a131_0x3d80dc;this[_0x470b3f(0x20f)]=_0x335e9b;}[a131_0x3d80dc(0x209)](){const _0x1184ed=a131_0x3d80dc;return this[_0x1184ed(0x1e4)];}[a131_0x3d80dc(0x1d6)](){const _0x223ee7=a131_0x3d80dc;return this[_0x223ee7(0x213)];}[a131_0x3d80dc(0x1d3)](){const _0x434626=a131_0x3d80dc;return this[_0x434626(0x1cf)];}};GitCommitService=__decorate([(0x0,typedi_1[a131_0x3d80dc(0x1fa)])({'transient':!![]}),__metadata(a131_0x3d80dc(0x1d1),[salesforce_git_sync_service_1[a131_0x3d80dc(0x1c4)],salesforce_rest_service_1[a131_0x3d80dc(0x1e8)],salesforce_sync_service_1[a131_0x3d80dc(0x211)],salesforce_service_1[a131_0x3d80dc(0x1fc)]])],GitCommitService),exports['GitCommitService']=GitCommitService;