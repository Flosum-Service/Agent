const a129_0x16e560=a129_0x4576;(function(_0x3dbc0b,_0x13b627){const _0x5c960f=a129_0x4576,_0x268dc4=_0x3dbc0b();while(!![]){try{const _0x56ffe0=parseInt(_0x5c960f(0xff))/0x1*(parseInt(_0x5c960f(0xce))/0x2)+-parseInt(_0x5c960f(0xd9))/0x3*(parseInt(_0x5c960f(0xcb))/0x4)+-parseInt(_0x5c960f(0xbe))/0x5+-parseInt(_0x5c960f(0xd3))/0x6*(parseInt(_0x5c960f(0xb9))/0x7)+parseInt(_0x5c960f(0xcf))/0x8*(parseInt(_0x5c960f(0xfc))/0x9)+parseInt(_0x5c960f(0xe6))/0xa+parseInt(_0x5c960f(0x101))/0xb;if(_0x56ffe0===_0x13b627)break;else _0x268dc4['push'](_0x268dc4['shift']());}catch(_0x1fac13){_0x268dc4['push'](_0x268dc4['shift']());}}}(a129_0x35fc,0x8d44c));const a129_0x32e229=(function(){let _0x45e661=!![];return function(_0x461d9d,_0x3afb48){const _0x1ff6d2=_0x45e661?function(){const _0x23f2d9=a129_0x4576;if(_0x3afb48){const _0x3b9f74=_0x3afb48[_0x23f2d9(0x10a)](_0x461d9d,arguments);return _0x3afb48=null,_0x3b9f74;}}:function(){};return _0x45e661=![],_0x1ff6d2;};}()),a129_0x14f20f=a129_0x32e229(this,function(){const _0x5ce3fd=a129_0x4576;return a129_0x14f20f[_0x5ce3fd(0xbf)]()[_0x5ce3fd(0xab)](_0x5ce3fd(0xae))['toString']()[_0x5ce3fd(0xbb)](a129_0x14f20f)['search'](_0x5ce3fd(0xae));});a129_0x14f20f();'use strict';var __decorate=this&&this[a129_0x16e560(0xe2)]||function(_0x18e8d2,_0x2e0c10,_0x38a04f,_0x311a30){const _0x5cd569=a129_0x16e560;var _0x280b2d=arguments[_0x5cd569(0xf8)],_0x2af08d=_0x280b2d<0x3?_0x2e0c10:_0x311a30===null?_0x311a30=Object[_0x5cd569(0xec)](_0x2e0c10,_0x38a04f):_0x311a30,_0x6efe2b;if(typeof Reflect===_0x5cd569(0x107)&&typeof Reflect[_0x5cd569(0xb4)]===_0x5cd569(0x105))_0x2af08d=Reflect['decorate'](_0x18e8d2,_0x2e0c10,_0x38a04f,_0x311a30);else{for(var _0x410baa=_0x18e8d2[_0x5cd569(0xf8)]-0x1;_0x410baa>=0x0;_0x410baa--)if(_0x6efe2b=_0x18e8d2[_0x410baa])_0x2af08d=(_0x280b2d<0x3?_0x6efe2b(_0x2af08d):_0x280b2d>0x3?_0x6efe2b(_0x2e0c10,_0x38a04f,_0x2af08d):_0x6efe2b(_0x2e0c10,_0x38a04f))||_0x2af08d;}return _0x280b2d>0x3&&_0x2af08d&&Object[_0x5cd569(0xf4)](_0x2e0c10,_0x38a04f,_0x2af08d),_0x2af08d;},__metadata=this&&this['__metadata']||function(_0x4a56ce,_0x1ef345){const _0x2b0fc=a129_0x16e560;if(typeof Reflect==='object'&&typeof Reflect[_0x2b0fc(0xc8)]===_0x2b0fc(0x105))return Reflect[_0x2b0fc(0xc8)](_0x4a56ce,_0x1ef345);};Object['defineProperty'](exports,a129_0x16e560(0xf3),{'value':!![]}),exports[a129_0x16e560(0xf9)]=void 0x0;function a129_0x4576(_0x1bcbb4,_0x2738c6){const _0x300368=a129_0x35fc();return a129_0x4576=function(_0x14f20f,_0x32e229){_0x14f20f=_0x14f20f-0xab;let _0x35fcc5=_0x300368[_0x14f20f];return _0x35fcc5;},a129_0x4576(_0x1bcbb4,_0x2738c6);}const constants_1=require('../../../../constants'),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a129_0x16e560(0xc3)),typedi_1=require(a129_0x16e560(0xdf)),salesforce_sync_service_1=require(a129_0x16e560(0x106)),salesforce_service_1=require(a129_0x16e560(0xf0)),factory_parser_1=require(a129_0x16e560(0xe0)),path_utils_1=require(a129_0x16e560(0xb5)),components_utils_1=require('../utils/components.utils');function a129_0x35fc(){const _0x4b19e4=['fetchBranchComponentsByFilenames','force','decorate','../utils/path.utils','ComponentsUtils','repositoryId','checkSyncStatus','572600ntmyLe','type','constructor','string','recordTypes','1890395cbMQvc','toString','fetchComponentsMetadata','salesforceSync','proceedFile','../../salesforce/services/salesforce-rest.service','name','catch','recordTypeName','getRepositoryRecordByName','metadata','getRecordTypes','salesforceGitSync','1801460Jyeuav','branch','fetchRepositoryOrBranchData','78yRdhbx','344528CfknUl','Synchronization_Status__c','updateStatus','SalesforceRestService','18FzufvD','createCommit','fetchRepositoryComponentsByFilenames','push','Last_Updated_On__c','master','3DTuNhI','FLOSUM_GIT_NAMESPACE','getUnusedComponentsFilePaths','FLOSUM_REPOSITORY','SalesforceSyncService','crc32','typedi','../../parsers/factory.parser','now','__decorate','getRepositoryId','filterMetadataComponents','getComponentRecordTypes','1566630vQjmRO','retrieveAttachment','execute','TASKS_PER_TICK','design:paramtypes','fetchBranchComponents','getOwnPropertyDescriptor','salesforce','crc','repositoryGit','../../salesforce/services/salesforce.service','create','patch','__esModule','defineProperty','FactoryParser','gitCommit','branchId','length','GitCommitService','find','recordType','81mCArVd','readComponentPaths','indexOf','16429kcRFBK','syncRecord','5142412QuihEh','splice','SalesforceGitSyncService','FLOSUM_NAMESPACE','function','../../salesforce/services/salesforce-sync.service','object','prepareComponentNamesForFetchMetadata','componentsMetadata','apply','PathUtils','search','then','updateRemoteState','(((.+)+)+)+$','salesforceRest','getRemoteStateAttachmentId','Service'];a129_0x35fc=function(){return _0x4b19e4;};return a129_0x35fc();}let GitCommitService=class GitCommitService{constructor(_0x5674e9,_0x1fd953,_0x26c702,_0x330a54){const _0x496577=a129_0x16e560;this[_0x496577(0xca)]=_0x5674e9,this[_0x496577(0xaf)]=_0x1fd953,this['salesforceSync']=_0x26c702,this[_0x496577(0xed)]=_0x330a54,this[_0x496577(0xe9)]=0xc8;}get[a129_0x16e560(0xb7)](){const _0x125367=a129_0x16e560;var _0x515b03;return((_0x515b03=this[_0x125367(0x100)])===null||_0x515b03===void 0x0?void 0x0:_0x515b03[_0x125367(0xb7)])||'';}get[a129_0x16e560(0xf7)](){var _0xe17302;return((_0xe17302=this['syncRecord'])===null||_0xe17302===void 0x0?void 0x0:_0xe17302['branchId'])||'';}get[a129_0x16e560(0xfb)](){const _0x52783d=a129_0x16e560;return this[_0x52783d(0x100)][_0x52783d(0xc6)];}async[a129_0x16e560(0xd4)](_0xc323f8){const _0x48c50d=a129_0x16e560;return this[_0x48c50d(0xca)]['createCommit'](_0xc323f8,this[_0x48c50d(0xb7)]);}async[a129_0x16e560(0xb8)](_0x3d212f){const _0xcd7464=a129_0x16e560;if(this[_0xcd7464(0x100)]){const _0x42cc43=await this[_0xcd7464(0xc1)][_0xcd7464(0xb0)](this[_0xcd7464(0x100)]),_0x341bd5=await this[_0xcd7464(0xed)][_0xcd7464(0xe7)](_0x42cc43)[_0xcd7464(0xac)](_0x470354=>typeof _0x470354===_0xcd7464(0xbc)?JSON['parse'](_0x470354):_0x470354)[_0xcd7464(0xc5)](()=>({}));if(_0x341bd5[this[_0xcd7464(0xf6)][_0xcd7464(0xef)]]){if(_0x341bd5[this[_0xcd7464(0xf6)][_0xcd7464(0xef)]]['lastCommit']===_0x3d212f)return!![];}return![];}return![];}async[a129_0x16e560(0xad)](_0x1e7db3){const _0x2ec75c=a129_0x16e560;this[_0x2ec75c(0x100)]&&await this[_0x2ec75c(0xc1)][_0x2ec75c(0xad)](this['syncRecord'],_0x1e7db3);}[a129_0x16e560(0xdb)](){return this['componentsMetadata']['map'](({fileName:_0x53fe7b})=>_0x53fe7b);}async[a129_0x16e560(0xc2)](_0x5a223d,_0x5db006,_0x34983e){const _0x504288=a129_0x16e560,_0xaccf52=await path_utils_1[_0x504288(0x10b)][_0x504288(0xfd)](this[_0x504288(0x100)][_0x504288(0xc6)],_0x5a223d,_0x5db006,_0x34983e),_0x12ea76=components_utils_1[_0x504288(0xb6)][_0x504288(0xe4)](this[_0x504288(0x109)],_0x5a223d,_0x34983e,this['syncRecord'][_0x504288(0xc6)]),_0x444254=factory_parser_1[_0x504288(0xf5)][_0x504288(0xf1)]({'recordType':this[_0x504288(0x100)]['recordTypeName'],'sourceDir':_0x5db006,'paths':_0xaccf52}),_0x50c7c1=await _0x444254[_0x504288(0xe8)](),_0x1cb452=[],_0x281475=[];for(const _0x4ef496 of _0x50c7c1){const _0x1ef03c=_0x12ea76[_0x504288(0xfa)](_0x50772e=>_0x50772e[_0x504288(0xc4)]===_0x4ef496[_0x504288(0xc4)]&&_0x50772e[_0x504288(0xba)]===_0x4ef496['type']);if(!_0x1ef03c){_0x1cb452[_0x504288(0xd6)](_0x4ef496);continue;}_0x4ef496[_0x504288(0xee)]!==_0x1ef03c[_0x504288(0xde)]&&_0x281475[_0x504288(0xd6)]({'meta':_0x1ef03c,'component':_0x4ef496}),_0x12ea76[_0x504288(0x102)](_0x12ea76[_0x504288(0xfe)](_0x1ef03c),0x1);}return{'inserted':_0x1cb452,'modified':_0x281475,'removed':_0x12ea76};}async[a129_0x16e560(0xcd)](){const _0xb5014=a129_0x16e560;this[_0xb5014(0x100)]=this[_0xb5014(0xf6)][_0xb5014(0xcc)]===_0xb5014(0xd8)?await this['salesforceSync'][_0xb5014(0xc7)](this[_0xb5014(0xf6)]['repository']):await this[_0xb5014(0xc1)]['getBranchRecordByName'](this[_0xb5014(0xf6)]['branch']),this['recordTypes']=await this['salesforceGitSync'][_0xb5014(0xe5)]();}async[a129_0x16e560(0xc0)](_0x56118b){const _0x56bc7b=a129_0x16e560;if(this[_0x56bc7b(0xf6)][_0x56bc7b(0xb3)]||_0x56118b){this[_0x56bc7b(0x109)]=this[_0x56bc7b(0xf7)]?await this[_0x56bc7b(0xca)][_0x56bc7b(0xeb)](this[_0x56bc7b(0xf7)]):await this[_0x56bc7b(0xca)]['fetchRepositoryComponents'](this['repositoryId']);return;}const _0x21f478=components_utils_1[_0x56bc7b(0xb6)][_0x56bc7b(0x108)](this['gitCommit']['fileNames'],this['syncRecord']['recordTypeName']);this[_0x56bc7b(0x109)]=[];while(_0x21f478[_0x56bc7b(0xf8)]){const _0x4b5f2f=_0x21f478[_0x56bc7b(0x102)](0x0,this['TASKS_PER_TICK']),_0x1c03b7=this['branchId']?await this[_0x56bc7b(0xca)][_0x56bc7b(0xb2)](_0x4b5f2f,this[_0x56bc7b(0xf7)]):await this[_0x56bc7b(0xca)][_0x56bc7b(0xd5)](_0x4b5f2f,this[_0x56bc7b(0xb7)]);this[_0x56bc7b(0x109)]['push'](..._0x1c03b7);}}async[a129_0x16e560(0xd1)](_0x77f447){const _0xbec7b9=a129_0x16e560;this[_0xbec7b9(0xf7)]?await this[_0xbec7b9(0xaf)][_0xbec7b9(0xf2)](constants_1['FLOSUM_BRANCH'],this[_0xbec7b9(0xf7)],{[constants_1[_0xbec7b9(0xda)]+_0xbec7b9(0xd0)]:_0x77f447,[constants_1[_0xbec7b9(0x104)]+_0xbec7b9(0xd7)]:Date[_0xbec7b9(0xe1)]()}):await this['salesforceRest']['patch'](constants_1[_0xbec7b9(0xdc)],this['repositoryId'],{[constants_1[_0xbec7b9(0xda)]+_0xbec7b9(0xd0)]:_0x77f447});}['setCommitDto'](_0xb0c8b7){this['gitCommit']=_0xb0c8b7;}[a129_0x16e560(0xc9)](){const _0x2277d9=a129_0x16e560;return this[_0x2277d9(0xbd)];}[a129_0x16e560(0xe3)](){const _0x3e3ab0=a129_0x16e560;return this[_0x3e3ab0(0xb7)];}['getBranchId'](){return this['branchId'];}};GitCommitService=__decorate([(0x0,typedi_1[a129_0x16e560(0xb1)])({'transient':!![]}),__metadata(a129_0x16e560(0xea),[salesforce_git_sync_service_1[a129_0x16e560(0x103)],salesforce_rest_service_1[a129_0x16e560(0xd2)],salesforce_sync_service_1[a129_0x16e560(0xdd)],salesforce_service_1['SalesforceService']])],GitCommitService),exports['GitCommitService']=GitCommitService;