const a128_0x172bd2=a128_0x25ec;function a128_0x25ec(_0x1830b7,_0xffc366){const _0x1475ce=a128_0x3cd1();return a128_0x25ec=function(_0x8b8bdc,_0x30cd14){_0x8b8bdc=_0x8b8bdc-0xd8;let _0x3cd1fd=_0x1475ce[_0x8b8bdc];return _0x3cd1fd;},a128_0x25ec(_0x1830b7,_0xffc366);}function a128_0x3cd1(){const _0x3e7864=['getOwnPropertyDescriptor','../../salesforce/services/salesforce-sync.service','name','__esModule','__metadata','SalesforceRestService','getRemoteStateAttachmentId','apply','getRepositoryId','crc','create','Synchronization_Status__c','5DofShd','function','2IrnFTh','search','../utils/path.utils','ComponentsUtils','PathUtils','fetchRepositoryOrBranchData','checkSyncStatus','FLOSUM_GIT_NAMESPACE','SalesforceService','syncRecord','prepareComponentNamesForFetchMetadata','toString','retrieveAttachment','15ZwSOdp','metadata','patch','repository','6930189iXksmH','repositoryGit','constructor','getRepositoryRecordByName','45261lUsbxv','componentsMetadata','../../salesforce/services/salesforce-rest.service','parse','gitCommit','filterMetadataComponents','FactoryParser','recordType','211124nBzNFm','branch','fetchRepositoryComponentsByFilenames','SalesforceGitSyncService','getUnusedComponentsFilePaths','11NtJszF','TASKS_PER_TICK','object','updateRemoteState','FLOSUM_NAMESPACE','GitCommitService','createCommit','catch','../../parsers/factory.parser','496xufGeo','repositoryId','defineProperty','salesforceGitSync','salesforceSync','branchId','indexOf','crc32','../../salesforce/services/salesforce.service','recordTypes','setCommitDto','readComponentPaths','find','getRecordTypes','../../../../constants','getBranchId','8241080UVncLH','push','master','salesforceRest','map','fetchRepositoryComponents','fetchBranchComponents','length','recordTypeName','now','5546610dvRYwv','14139792idLStJ','Last_Updated_On__c','updateStatus','proceedFile','string','fetchBranchComponentsByFilenames','FLOSUM_BRANCH','fetchComponentsMetadata','__decorate','64861uWZlLn','splice','../../salesforce/services/salesforce-git-sync.service','type'];a128_0x3cd1=function(){return _0x3e7864;};return a128_0x3cd1();}(function(_0x4f4049,_0x3c4e0b){const _0x360a31=a128_0x25ec,_0x214dcb=_0x4f4049();while(!![]){try{const _0x45cc1f=parseInt(_0x360a31(0xe6))/0x1*(-parseInt(_0x360a31(0xf8))/0x2)+parseInt(_0x360a31(0x105))/0x3*(parseInt(_0x360a31(0x115))/0x4)+parseInt(_0x360a31(0xf6))/0x5*(-parseInt(_0x360a31(0xdc))/0x6)+-parseInt(_0x360a31(0x109))/0x7+parseInt(_0x360a31(0x123))/0x8*(parseInt(_0x360a31(0x10d))/0x9)+-parseInt(_0x360a31(0x133))/0xa*(-parseInt(_0x360a31(0x11a))/0xb)+parseInt(_0x360a31(0xdd))/0xc;if(_0x45cc1f===_0x3c4e0b)break;else _0x214dcb['push'](_0x214dcb['shift']());}catch(_0x31ec17){_0x214dcb['push'](_0x214dcb['shift']());}}}(a128_0x3cd1,0x92314));const a128_0x30cd14=(function(){let _0x5dd297=!![];return function(_0x4bb6f2,_0x37b329){const _0x49afd8=_0x5dd297?function(){const _0x11db68=a128_0x25ec;if(_0x37b329){const _0xc096bd=_0x37b329[_0x11db68(0xf1)](_0x4bb6f2,arguments);return _0x37b329=null,_0xc096bd;}}:function(){};return _0x5dd297=![],_0x49afd8;};}()),a128_0x8b8bdc=a128_0x30cd14(this,function(){const _0x45cd83=a128_0x25ec;return a128_0x8b8bdc[_0x45cd83(0x103)]()[_0x45cd83(0xf9)]('(((.+)+)+)+$')['toString']()[_0x45cd83(0x10b)](a128_0x8b8bdc)['search']('(((.+)+)+)+$');});a128_0x8b8bdc();'use strict';var __decorate=this&&this[a128_0x172bd2(0xe5)]||function(_0x1c7a69,_0x4309e1,_0x40e64b,_0x5b678e){const _0x1d3f16=a128_0x172bd2;var _0x52a97e=arguments['length'],_0x200496=_0x52a97e<0x3?_0x4309e1:_0x5b678e===null?_0x5b678e=Object[_0x1d3f16(0xea)](_0x4309e1,_0x40e64b):_0x5b678e,_0x6ac6ea;if(typeof Reflect===_0x1d3f16(0x11c)&&typeof Reflect['decorate']===_0x1d3f16(0xf7))_0x200496=Reflect['decorate'](_0x1c7a69,_0x4309e1,_0x40e64b,_0x5b678e);else{for(var _0x393f7f=_0x1c7a69[_0x1d3f16(0xd9)]-0x1;_0x393f7f>=0x0;_0x393f7f--)if(_0x6ac6ea=_0x1c7a69[_0x393f7f])_0x200496=(_0x52a97e<0x3?_0x6ac6ea(_0x200496):_0x52a97e>0x3?_0x6ac6ea(_0x4309e1,_0x40e64b,_0x200496):_0x6ac6ea(_0x4309e1,_0x40e64b))||_0x200496;}return _0x52a97e>0x3&&_0x200496&&Object[_0x1d3f16(0x125)](_0x4309e1,_0x40e64b,_0x200496),_0x200496;},__metadata=this&&this[a128_0x172bd2(0xee)]||function(_0x41b7e5,_0x58467b){const _0x12421b=a128_0x172bd2;if(typeof Reflect===_0x12421b(0x11c)&&typeof Reflect[_0x12421b(0x106)]===_0x12421b(0xf7))return Reflect[_0x12421b(0x106)](_0x41b7e5,_0x58467b);};Object[a128_0x172bd2(0x125)](exports,a128_0x172bd2(0xed),{'value':!![]}),exports[a128_0x172bd2(0x11f)]=void 0x0;const constants_1=require(a128_0x172bd2(0x131)),salesforce_git_sync_service_1=require(a128_0x172bd2(0xe8)),salesforce_rest_service_1=require(a128_0x172bd2(0x10f)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a128_0x172bd2(0xeb)),salesforce_service_1=require(a128_0x172bd2(0x12b)),factory_parser_1=require(a128_0x172bd2(0x122)),path_utils_1=require(a128_0x172bd2(0xfa)),components_utils_1=require('../utils/components.utils');let GitCommitService=class GitCommitService{constructor(_0x4b5df7,_0x3fb62,_0x3ba4e7,_0x46911a){const _0x5a7e5b=a128_0x172bd2;this[_0x5a7e5b(0x126)]=_0x4b5df7,this[_0x5a7e5b(0x136)]=_0x3fb62,this[_0x5a7e5b(0x127)]=_0x3ba4e7,this['salesforce']=_0x46911a,this[_0x5a7e5b(0x11b)]=0xc8;}get[a128_0x172bd2(0x124)](){const _0x4e3115=a128_0x172bd2;var _0x46ffee;return((_0x46ffee=this[_0x4e3115(0x101)])===null||_0x46ffee===void 0x0?void 0x0:_0x46ffee[_0x4e3115(0x124)])||'';}get[a128_0x172bd2(0x128)](){const _0x10c73=a128_0x172bd2;var _0xff2e4;return((_0xff2e4=this[_0x10c73(0x101)])===null||_0xff2e4===void 0x0?void 0x0:_0xff2e4[_0x10c73(0x128)])||'';}get[a128_0x172bd2(0x114)](){const _0xd4ce1d=a128_0x172bd2;return this[_0xd4ce1d(0x101)]['recordTypeName'];}async['createCommit'](_0x10b622){const _0x499cea=a128_0x172bd2;return this['salesforceGitSync'][_0x499cea(0x120)](_0x10b622,this[_0x499cea(0x124)]);}async[a128_0x172bd2(0xfe)](_0x56253a){const _0x5a5c5b=a128_0x172bd2;if(this[_0x5a5c5b(0x101)]){const _0x448ab8=await this[_0x5a5c5b(0x127)][_0x5a5c5b(0xf0)](this[_0x5a5c5b(0x101)]),_0xf538f0=await this['salesforce'][_0x5a5c5b(0x104)](_0x448ab8)['then'](_0x1868a8=>typeof _0x1868a8===_0x5a5c5b(0xe1)?JSON[_0x5a5c5b(0x110)](_0x1868a8):_0x1868a8)[_0x5a5c5b(0x121)](()=>({}));if(_0xf538f0[this[_0x5a5c5b(0x111)][_0x5a5c5b(0x10a)]]){if(_0xf538f0[this[_0x5a5c5b(0x111)]['repositoryGit']]['lastCommit']===_0x56253a)return!![];}return![];}return![];}async[a128_0x172bd2(0x11d)](_0x7103f0){const _0x49d6ff=a128_0x172bd2;this['syncRecord']&&await this[_0x49d6ff(0x127)][_0x49d6ff(0x11d)](this[_0x49d6ff(0x101)],_0x7103f0);}[a128_0x172bd2(0x119)](){const _0x4892d3=a128_0x172bd2;return this[_0x4892d3(0x10e)][_0x4892d3(0x137)](({fileName:_0x37e887})=>_0x37e887);}async[a128_0x172bd2(0xe0)](_0x383493,_0x322e85,_0x1fcee4){const _0x4f757c=a128_0x172bd2,_0x5663bf=await path_utils_1[_0x4f757c(0xfc)][_0x4f757c(0x12e)](this[_0x4f757c(0x101)][_0x4f757c(0xda)],_0x383493,_0x322e85,_0x1fcee4),_0x25eb59=components_utils_1[_0x4f757c(0xfb)][_0x4f757c(0x112)](this[_0x4f757c(0x10e)],_0x383493,_0x1fcee4,this[_0x4f757c(0x101)][_0x4f757c(0xda)]),_0x422be0=factory_parser_1[_0x4f757c(0x113)][_0x4f757c(0xf4)]({'recordType':this[_0x4f757c(0x101)]['recordTypeName'],'sourceDir':_0x322e85,'paths':_0x5663bf}),_0x3e60de=await _0x422be0['execute'](),_0x285942=[],_0x2f3514=[];for(const _0x27d59b of _0x3e60de){const _0x38f309=_0x25eb59[_0x4f757c(0x12f)](_0x5e5e91=>_0x5e5e91[_0x4f757c(0xec)]===_0x27d59b[_0x4f757c(0xec)]&&_0x5e5e91[_0x4f757c(0xe9)]===_0x27d59b[_0x4f757c(0xe9)]);if(!_0x38f309){_0x285942[_0x4f757c(0x134)](_0x27d59b);continue;}_0x27d59b[_0x4f757c(0xf3)]!==_0x38f309[_0x4f757c(0x12a)]&&_0x2f3514['push']({'meta':_0x38f309,'component':_0x27d59b}),_0x25eb59[_0x4f757c(0xe7)](_0x25eb59[_0x4f757c(0x129)](_0x38f309),0x1);}return{'inserted':_0x285942,'modified':_0x2f3514,'removed':_0x25eb59};}async[a128_0x172bd2(0xfd)](){const _0x5cc05c=a128_0x172bd2;this['syncRecord']=this['gitCommit'][_0x5cc05c(0x116)]===_0x5cc05c(0x135)?await this['salesforceSync'][_0x5cc05c(0x10c)](this[_0x5cc05c(0x111)][_0x5cc05c(0x108)]):await this[_0x5cc05c(0x127)]['getBranchRecordByName'](this[_0x5cc05c(0x111)][_0x5cc05c(0x116)]),this[_0x5cc05c(0x12c)]=await this['salesforceGitSync']['getComponentRecordTypes']();}async[a128_0x172bd2(0xe4)](_0x12d7a8){const _0x4c98e1=a128_0x172bd2;if(this['gitCommit']['force']||_0x12d7a8){this[_0x4c98e1(0x10e)]=this[_0x4c98e1(0x128)]?await this[_0x4c98e1(0x126)][_0x4c98e1(0xd8)](this[_0x4c98e1(0x128)]):await this[_0x4c98e1(0x126)][_0x4c98e1(0x138)](this[_0x4c98e1(0x124)]);return;}const _0x148bca=components_utils_1[_0x4c98e1(0xfb)][_0x4c98e1(0x102)](this[_0x4c98e1(0x111)]['fileNames'],this['syncRecord'][_0x4c98e1(0xda)]);this[_0x4c98e1(0x10e)]=[];while(_0x148bca['length']){const _0x315c36=_0x148bca[_0x4c98e1(0xe7)](0x0,this[_0x4c98e1(0x11b)]),_0x3aed72=this[_0x4c98e1(0x128)]?await this['salesforceGitSync'][_0x4c98e1(0xe2)](_0x315c36,this[_0x4c98e1(0x128)]):await this[_0x4c98e1(0x126)][_0x4c98e1(0x117)](_0x315c36,this['repositoryId']);this[_0x4c98e1(0x10e)][_0x4c98e1(0x134)](..._0x3aed72);}}async[a128_0x172bd2(0xdf)](_0x9a4d17){const _0x2a4dc8=a128_0x172bd2;this[_0x2a4dc8(0x128)]?await this[_0x2a4dc8(0x136)][_0x2a4dc8(0x107)](constants_1[_0x2a4dc8(0xe3)],this[_0x2a4dc8(0x128)],{[constants_1[_0x2a4dc8(0xff)]+_0x2a4dc8(0xf5)]:_0x9a4d17,[constants_1[_0x2a4dc8(0x11e)]+_0x2a4dc8(0xde)]:Date[_0x2a4dc8(0xdb)]()}):await this[_0x2a4dc8(0x136)][_0x2a4dc8(0x107)](constants_1['FLOSUM_REPOSITORY'],this[_0x2a4dc8(0x124)],{[constants_1[_0x2a4dc8(0xff)]+_0x2a4dc8(0xf5)]:_0x9a4d17});}[a128_0x172bd2(0x12d)](_0x54bc55){const _0xc6e5b3=a128_0x172bd2;this[_0xc6e5b3(0x111)]=_0x54bc55;}[a128_0x172bd2(0x130)](){return this['recordTypes'];}[a128_0x172bd2(0xf2)](){const _0x4f719d=a128_0x172bd2;return this[_0x4f719d(0x124)];}[a128_0x172bd2(0x132)](){const _0x4b9966=a128_0x172bd2;return this[_0x4b9966(0x128)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a128_0x172bd2(0x118)],salesforce_rest_service_1[a128_0x172bd2(0xef)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a128_0x172bd2(0x100)]])],GitCommitService),exports[a128_0x172bd2(0x11f)]=GitCommitService;