const a129_0x204a1d=a129_0x159d;(function(_0x57aa73,_0x2e47ca){const _0x5de82c=a129_0x159d,_0x2c6cd5=_0x57aa73();while(!![]){try{const _0x24b7e6=parseInt(_0x5de82c(0x1f8))/0x1+parseInt(_0x5de82c(0x1f3))/0x2+-parseInt(_0x5de82c(0x1dc))/0x3*(-parseInt(_0x5de82c(0x1f1))/0x4)+-parseInt(_0x5de82c(0x220))/0x5*(-parseInt(_0x5de82c(0x22a))/0x6)+-parseInt(_0x5de82c(0x21f))/0x7+-parseInt(_0x5de82c(0x1f4))/0x8+parseInt(_0x5de82c(0x203))/0x9*(-parseInt(_0x5de82c(0x222))/0xa);if(_0x24b7e6===_0x2e47ca)break;else _0x2c6cd5['push'](_0x2c6cd5['shift']());}catch(_0x3a8035){_0x2c6cd5['push'](_0x2c6cd5['shift']());}}}(a129_0x20aa,0x9756c));const a129_0x10b1d9=(function(){let _0x156f7f=!![];return function(_0x444732,_0x56e2b1){const _0x36b4e2=_0x156f7f?function(){if(_0x56e2b1){const _0x51b700=_0x56e2b1['apply'](_0x444732,arguments);return _0x56e2b1=null,_0x51b700;}}:function(){};return _0x156f7f=![],_0x36b4e2;};}()),a129_0x5d2165=a129_0x10b1d9(this,function(){const _0x138365=a129_0x159d;return a129_0x5d2165['toString']()['search'](_0x138365(0x1e1))[_0x138365(0x1e5)]()[_0x138365(0x21a)](a129_0x5d2165)['search'](_0x138365(0x1e1));});a129_0x5d2165();function a129_0x20aa(){const _0x2d3e5e=['splice','SalesforceGitSyncService','parse','branch','salesforceSync','crc32','SalesforceService','fetchRepositoryOrBranchData','execute','constructor','object','branchId','Synchronization_Status__c','crc','2539950GBCDSs','128050VzpLaI','proceedFile','1197590PAmrKX','__esModule','fetchBranchComponentsByFilenames','catch','recordTypes','then','map','SalesforceRestService','216InDiaH','updateRemoteState','length','recordType','getUnusedComponentsFilePaths','salesforceRest','filterMetadataComponents','defineProperty','FLOSUM_NAMESPACE','ComponentsUtils','7863vzbKPY','gitCommit','getRecordTypes','syncRecord','push','(((.+)+)+)+$','master','../utils/path.utils','getRemoteStateAttachmentId','toString','setCommitDto','updateStatus','getRepositoryRecordByName','prepareComponentNamesForFetchMetadata','getBranchId','getOwnPropertyDescriptor','repositoryGit','readComponentPaths','FLOSUM_REPOSITORY','fetchBranchComponents','../../../../constants','288aJBkqo','salesforce','125472mQBiYz','1961176MZFpKe','function','decorate','patch','653268iHHdSH','type','GitCommitService','recordTypeName','fetchRepositoryComponents','__decorate','metadata','salesforceGitSync','retrieveAttachment','../../salesforce/services/salesforce.service','fetchComponentsMetadata','45euRqGw','../../salesforce/services/salesforce-sync.service','getBranchRecordByName','Last_Updated_On__c','repository','checkSyncStatus','componentsMetadata','TASKS_PER_TICK','find','../../salesforce/services/salesforce-rest.service','FLOSUM_GIT_NAMESPACE','FLOSUM_BRANCH','repositoryId','createCommit'];a129_0x20aa=function(){return _0x2d3e5e;};return a129_0x20aa();}'use strict';function a129_0x159d(_0x4167a3,_0x4790c1){const _0x319bc8=a129_0x20aa();return a129_0x159d=function(_0x5d2165,_0x10b1d9){_0x5d2165=_0x5d2165-0x1dc;let _0x20aada=_0x319bc8[_0x5d2165];return _0x20aada;},a129_0x159d(_0x4167a3,_0x4790c1);}var __decorate=this&&this[a129_0x204a1d(0x1fd)]||function(_0x1c8cc1,_0x489992,_0x116fe4,_0x13234c){const _0x4e02ff=a129_0x204a1d;var _0xce8a21=arguments[_0x4e02ff(0x22c)],_0x2ffa31=_0xce8a21<0x3?_0x489992:_0x13234c===null?_0x13234c=Object[_0x4e02ff(0x1eb)](_0x489992,_0x116fe4):_0x13234c,_0x350f60;if(typeof Reflect===_0x4e02ff(0x21b)&&typeof Reflect[_0x4e02ff(0x1f6)]===_0x4e02ff(0x1f5))_0x2ffa31=Reflect['decorate'](_0x1c8cc1,_0x489992,_0x116fe4,_0x13234c);else{for(var _0x4fcb7b=_0x1c8cc1[_0x4e02ff(0x22c)]-0x1;_0x4fcb7b>=0x0;_0x4fcb7b--)if(_0x350f60=_0x1c8cc1[_0x4fcb7b])_0x2ffa31=(_0xce8a21<0x3?_0x350f60(_0x2ffa31):_0xce8a21>0x3?_0x350f60(_0x489992,_0x116fe4,_0x2ffa31):_0x350f60(_0x489992,_0x116fe4))||_0x2ffa31;}return _0xce8a21>0x3&&_0x2ffa31&&Object[_0x4e02ff(0x231)](_0x489992,_0x116fe4,_0x2ffa31),_0x2ffa31;},__metadata=this&&this['__metadata']||function(_0x232b44,_0x27caa7){const _0x3b6bbb=a129_0x204a1d;if(typeof Reflect===_0x3b6bbb(0x21b)&&typeof Reflect['metadata']===_0x3b6bbb(0x1f5))return Reflect[_0x3b6bbb(0x1fe)](_0x232b44,_0x27caa7);};Object[a129_0x204a1d(0x231)](exports,a129_0x204a1d(0x223),{'value':!![]}),exports[a129_0x204a1d(0x1fa)]=void 0x0;const constants_1=require(a129_0x204a1d(0x1f0)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a129_0x204a1d(0x20c)),typedi_1=require('typedi'),salesforce_sync_service_1=require(a129_0x204a1d(0x204)),salesforce_service_1=require(a129_0x204a1d(0x201)),factory_parser_1=require('../../parsers/factory.parser'),path_utils_1=require(a129_0x204a1d(0x1e3)),components_utils_1=require('../utils/components.utils');let GitCommitService=class GitCommitService{constructor(_0x40bc22,_0x4e6558,_0x44f59f,_0x45dcc0){const _0x49605b=a129_0x204a1d;this[_0x49605b(0x1ff)]=_0x40bc22,this[_0x49605b(0x22f)]=_0x4e6558,this[_0x49605b(0x215)]=_0x44f59f,this[_0x49605b(0x1f2)]=_0x45dcc0,this[_0x49605b(0x20a)]=0xc8;}get[a129_0x204a1d(0x20f)](){const _0x250fb9=a129_0x204a1d;var _0x55d290;return((_0x55d290=this['syncRecord'])===null||_0x55d290===void 0x0?void 0x0:_0x55d290[_0x250fb9(0x20f)])||'';}get[a129_0x204a1d(0x21c)](){const _0x2379a3=a129_0x204a1d;var _0x16c669;return((_0x16c669=this[_0x2379a3(0x1df)])===null||_0x16c669===void 0x0?void 0x0:_0x16c669[_0x2379a3(0x21c)])||'';}get[a129_0x204a1d(0x22d)](){const _0x3e1afe=a129_0x204a1d;return this[_0x3e1afe(0x1df)][_0x3e1afe(0x1fb)];}async['createCommit'](_0x127523){const _0x37342b=a129_0x204a1d;return this[_0x37342b(0x1ff)][_0x37342b(0x210)](_0x127523,this[_0x37342b(0x20f)]);}async[a129_0x204a1d(0x208)](_0x1db2b3){const _0x121d0e=a129_0x204a1d;if(this[_0x121d0e(0x1df)]){const _0x43251d=await this[_0x121d0e(0x215)][_0x121d0e(0x1e4)](this[_0x121d0e(0x1df)]),_0x59880d=await this[_0x121d0e(0x1f2)][_0x121d0e(0x200)](_0x43251d)[_0x121d0e(0x227)](_0x4bdfef=>typeof _0x4bdfef==='string'?JSON[_0x121d0e(0x213)](_0x4bdfef):_0x4bdfef)[_0x121d0e(0x225)](()=>({}));if(_0x59880d[this['gitCommit']['repositoryGit']]){if(_0x59880d[this[_0x121d0e(0x1dd)][_0x121d0e(0x1ec)]]['lastCommit']===_0x1db2b3)return!![];}return![];}return![];}async[a129_0x204a1d(0x22b)](_0x31595e){const _0x21cb38=a129_0x204a1d;this[_0x21cb38(0x1df)]&&await this[_0x21cb38(0x215)][_0x21cb38(0x22b)](this[_0x21cb38(0x1df)],_0x31595e);}[a129_0x204a1d(0x22e)](){const _0x8b6f84=a129_0x204a1d;return this[_0x8b6f84(0x209)][_0x8b6f84(0x228)](({fileName:_0x272be7})=>_0x272be7);}async[a129_0x204a1d(0x221)](_0x5091e8,_0x2e3b27,_0x3d50d4){const _0x4366e9=a129_0x204a1d,_0x305264=await path_utils_1['PathUtils'][_0x4366e9(0x1ed)](this['syncRecord'][_0x4366e9(0x1fb)],_0x5091e8,_0x2e3b27,_0x3d50d4),_0x4a8519=components_utils_1[_0x4366e9(0x233)][_0x4366e9(0x230)](this[_0x4366e9(0x209)],_0x5091e8,_0x3d50d4,this[_0x4366e9(0x1df)][_0x4366e9(0x1fb)]),_0x410fa2=factory_parser_1['FactoryParser']['create']({'recordType':this['syncRecord'][_0x4366e9(0x1fb)],'sourceDir':_0x2e3b27,'paths':_0x305264}),_0x180b0f=await _0x410fa2[_0x4366e9(0x219)](),_0x553e72=[],_0x2690e0=[];for(const _0x4a8995 of _0x180b0f){const _0x4b6ca6=_0x4a8519[_0x4366e9(0x20b)](_0x3203a9=>_0x3203a9['name']===_0x4a8995['name']&&_0x3203a9['type']===_0x4a8995[_0x4366e9(0x1f9)]);if(!_0x4b6ca6){_0x553e72[_0x4366e9(0x1e0)](_0x4a8995);continue;}_0x4a8995[_0x4366e9(0x21e)]!==_0x4b6ca6[_0x4366e9(0x216)]&&_0x2690e0[_0x4366e9(0x1e0)]({'meta':_0x4b6ca6,'component':_0x4a8995}),_0x4a8519[_0x4366e9(0x211)](_0x4a8519['indexOf'](_0x4b6ca6),0x1);}return{'inserted':_0x553e72,'modified':_0x2690e0,'removed':_0x4a8519};}async[a129_0x204a1d(0x218)](){const _0x4f257d=a129_0x204a1d;this[_0x4f257d(0x1df)]=this[_0x4f257d(0x1dd)][_0x4f257d(0x214)]===_0x4f257d(0x1e2)?await this[_0x4f257d(0x215)][_0x4f257d(0x1e8)](this['gitCommit'][_0x4f257d(0x207)]):await this[_0x4f257d(0x215)][_0x4f257d(0x205)](this['gitCommit'][_0x4f257d(0x214)]),this['recordTypes']=await this[_0x4f257d(0x1ff)]['getComponentRecordTypes']();}async[a129_0x204a1d(0x202)](_0x319c29){const _0x44ac6a=a129_0x204a1d;if(this[_0x44ac6a(0x1dd)]['force']||_0x319c29){this[_0x44ac6a(0x209)]=this[_0x44ac6a(0x21c)]?await this[_0x44ac6a(0x1ff)][_0x44ac6a(0x1ef)](this[_0x44ac6a(0x21c)]):await this[_0x44ac6a(0x1ff)][_0x44ac6a(0x1fc)](this[_0x44ac6a(0x20f)]);return;}const _0x3c6555=components_utils_1['ComponentsUtils'][_0x44ac6a(0x1e9)](this[_0x44ac6a(0x1dd)]['fileNames'],this[_0x44ac6a(0x1df)][_0x44ac6a(0x1fb)]);this[_0x44ac6a(0x209)]=[];while(_0x3c6555[_0x44ac6a(0x22c)]){const _0x1cc749=_0x3c6555[_0x44ac6a(0x211)](0x0,this[_0x44ac6a(0x20a)]),_0x3f394f=this[_0x44ac6a(0x21c)]?await this[_0x44ac6a(0x1ff)][_0x44ac6a(0x224)](_0x1cc749,this[_0x44ac6a(0x21c)]):await this[_0x44ac6a(0x1ff)]['fetchRepositoryComponentsByFilenames'](_0x1cc749,this['repositoryId']);this['componentsMetadata']['push'](..._0x3f394f);}}async[a129_0x204a1d(0x1e7)](_0x2b4234){const _0x23d776=a129_0x204a1d;this[_0x23d776(0x21c)]?await this[_0x23d776(0x22f)]['patch'](constants_1[_0x23d776(0x20e)],this[_0x23d776(0x21c)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x23d776(0x21d)]:_0x2b4234,[constants_1[_0x23d776(0x232)]+_0x23d776(0x206)]:Date['now']()}):await this[_0x23d776(0x22f)][_0x23d776(0x1f7)](constants_1[_0x23d776(0x1ee)],this['repositoryId'],{[constants_1[_0x23d776(0x20d)]+_0x23d776(0x21d)]:_0x2b4234});}[a129_0x204a1d(0x1e6)](_0x381b78){const _0x22cbde=a129_0x204a1d;this[_0x22cbde(0x1dd)]=_0x381b78;}[a129_0x204a1d(0x1de)](){const _0x3ae120=a129_0x204a1d;return this[_0x3ae120(0x226)];}['getRepositoryId'](){const _0x38121b=a129_0x204a1d;return this[_0x38121b(0x20f)];}[a129_0x204a1d(0x1ea)](){const _0x42c3fc=a129_0x204a1d;return this[_0x42c3fc(0x21c)];}};GitCommitService=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a129_0x204a1d(0x212)],salesforce_rest_service_1[a129_0x204a1d(0x229)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a129_0x204a1d(0x217)]])],GitCommitService),exports[a129_0x204a1d(0x1fa)]=GitCommitService;