const a127_0x5b89cd=a127_0x1aaa;(function(_0x68731f,_0xc322bc){const _0x351cb7=a127_0x1aaa,_0x1d465d=_0x68731f();while(!![]){try{const _0x3bc0f0=parseInt(_0x351cb7(0xae))/0x1+parseInt(_0x351cb7(0xd0))/0x2+-parseInt(_0x351cb7(0xc9))/0x3+parseInt(_0x351cb7(0xa4))/0x4+-parseInt(_0x351cb7(0xce))/0x5+parseInt(_0x351cb7(0xee))/0x6*(-parseInt(_0x351cb7(0xbe))/0x7)+-parseInt(_0x351cb7(0xb6))/0x8;if(_0x3bc0f0===_0xc322bc)break;else _0x1d465d['push'](_0x1d465d['shift']());}catch(_0x57e735){_0x1d465d['push'](_0x1d465d['shift']());}}}(a127_0x3029,0x1bdba));const a127_0x2e4593=(function(){let _0x3e6f0e=!![];return function(_0x3655ed,_0x3b1f5a){const _0x508c53=_0x3e6f0e?function(){if(_0x3b1f5a){const _0x5e4e94=_0x3b1f5a['apply'](_0x3655ed,arguments);return _0x3b1f5a=null,_0x5e4e94;}}:function(){};return _0x3e6f0e=![],_0x508c53;};}()),a127_0x50550e=a127_0x2e4593(this,function(){const _0x1dffa2=a127_0x1aaa;return a127_0x50550e[_0x1dffa2(0xef)]()[_0x1dffa2(0xc4)]('(((.+)+)+)+$')[_0x1dffa2(0xef)]()[_0x1dffa2(0xac)](a127_0x50550e)['search']('(((.+)+)+)+$');});function a127_0x1aaa(_0x2b37a0,_0x93bbc8){const _0x173bbf=a127_0x3029();return a127_0x1aaa=function(_0x50550e,_0x2e4593){_0x50550e=_0x50550e-0xa0;let _0x30295d=_0x173bbf[_0x50550e];return _0x30295d;},a127_0x1aaa(_0x2b37a0,_0x93bbc8);}a127_0x50550e();function a127_0x3029(){const _0x52fe2d=['ComponentsUtils','SalesforceSyncService','componentsMetadata','recordTypes','indexOf','../../../../constants','constructor','SalesforceGitSyncService','202424RLZCoL','string','function','getRecordTypes','salesforceRest','salesforce','Service','create','2481888fIfqwQ','FLOSUM_REPOSITORY','fileNames','repositoryId','getComponentRecordTypes','prepareComponentNamesForFetchMetadata','syncRecord','crc','7bIeGte','defineProperty','FLOSUM_GIT_NAMESPACE','fetchBranchComponentsByFilenames','object','fetchRepositoryComponentsByFilenames','search','catch','readComponentPaths','salesforceGitSync','recordTypeName','129084sNOWDq','parse','../../parsers/factory.parser','checkSyncStatus','proceedFile','101865xKzvFS','PathUtils','328682xlYcUg','gitCommit','../utils/components.utils','../utils/path.utils','FLOSUM_BRANCH','Synchronization_Status__c','__metadata','retrieveAttachment','getRepositoryId','map','fetchBranchComponents','branch','repositoryGit','name','repository','setCommitDto','metadata','splice','fetchRepositoryComponents','decorate','__decorate','GitCommitService','fetchComponentsMetadata','TASKS_PER_TICK','push','FLOSUM_NAMESPACE','getBranchRecordByName','type','../../salesforce/services/salesforce-git-sync.service','length','105438hpeXVd','toString','salesforceSync','../../salesforce/services/salesforce.service','branchId','createCommit','updateStatus','FactoryParser','SalesforceService','getUnusedComponentsFilePaths','crc32','then','force','filterMetadataComponents','patch','fetchRepositoryOrBranchData','updateRemoteState','recordType','554204oQxiFy','getRepositoryRecordByName'];a127_0x3029=function(){return _0x52fe2d;};return a127_0x3029();}'use strict';var __decorate=this&&this[a127_0x5b89cd(0xe4)]||function(_0x54d76d,_0x30c0c9,_0x43c863,_0x573346){const _0x1209b1=a127_0x5b89cd;var _0x2474d6=arguments['length'],_0xdaf11e=_0x2474d6<0x3?_0x30c0c9:_0x573346===null?_0x573346=Object['getOwnPropertyDescriptor'](_0x30c0c9,_0x43c863):_0x573346,_0x269ef1;if(typeof Reflect===_0x1209b1(0xc2)&&typeof Reflect['decorate']===_0x1209b1(0xb0))_0xdaf11e=Reflect[_0x1209b1(0xe3)](_0x54d76d,_0x30c0c9,_0x43c863,_0x573346);else{for(var _0x5d283=_0x54d76d['length']-0x1;_0x5d283>=0x0;_0x5d283--)if(_0x269ef1=_0x54d76d[_0x5d283])_0xdaf11e=(_0x2474d6<0x3?_0x269ef1(_0xdaf11e):_0x2474d6>0x3?_0x269ef1(_0x30c0c9,_0x43c863,_0xdaf11e):_0x269ef1(_0x30c0c9,_0x43c863))||_0xdaf11e;}return _0x2474d6>0x3&&_0xdaf11e&&Object[_0x1209b1(0xbf)](_0x30c0c9,_0x43c863,_0xdaf11e),_0xdaf11e;},__metadata=this&&this[a127_0x5b89cd(0xd6)]||function(_0x3c2157,_0xd52484){const _0x422be0=a127_0x5b89cd;if(typeof Reflect===_0x422be0(0xc2)&&typeof Reflect['metadata']===_0x422be0(0xb0))return Reflect[_0x422be0(0xe0)](_0x3c2157,_0xd52484);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a127_0x5b89cd(0xab)),salesforce_git_sync_service_1=require(a127_0x5b89cd(0xec)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require('typedi'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a127_0x5b89cd(0xf1)),factory_parser_1=require(a127_0x5b89cd(0xcb)),path_utils_1=require(a127_0x5b89cd(0xd3)),components_utils_1=require(a127_0x5b89cd(0xd2));let GitCommitService=class GitCommitService{constructor(_0x110b48,_0x566928,_0x4f1b3,_0x49c141){const _0x233f5a=a127_0x5b89cd;this[_0x233f5a(0xc7)]=_0x110b48,this[_0x233f5a(0xb2)]=_0x566928,this[_0x233f5a(0xf0)]=_0x4f1b3,this['salesforce']=_0x49c141,this[_0x233f5a(0xe7)]=0xc8;}get[a127_0x5b89cd(0xb9)](){const _0x5123e1=a127_0x5b89cd;var _0x3b4f3a;return((_0x3b4f3a=this[_0x5123e1(0xbc)])===null||_0x3b4f3a===void 0x0?void 0x0:_0x3b4f3a[_0x5123e1(0xb9)])||'';}get[a127_0x5b89cd(0xf2)](){const _0xdfe48=a127_0x5b89cd;var _0x597152;return((_0x597152=this[_0xdfe48(0xbc)])===null||_0x597152===void 0x0?void 0x0:_0x597152['branchId'])||'';}get[a127_0x5b89cd(0xa3)](){const _0x5d8834=a127_0x5b89cd;return this[_0x5d8834(0xbc)]['recordTypeName'];}async[a127_0x5b89cd(0xf3)](_0x2cee95){const _0x1e8980=a127_0x5b89cd;return this[_0x1e8980(0xc7)][_0x1e8980(0xf3)](_0x2cee95,this[_0x1e8980(0xb9)]);}async[a127_0x5b89cd(0xcc)](_0x52cf52){const _0x903ee3=a127_0x5b89cd;if(this[_0x903ee3(0xbc)]){const _0x140b7e=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x903ee3(0xbc)]),_0x4713d4=await this[_0x903ee3(0xb3)][_0x903ee3(0xd7)](_0x140b7e)[_0x903ee3(0xf9)](_0x230ef1=>typeof _0x230ef1===_0x903ee3(0xaf)?JSON[_0x903ee3(0xca)](_0x230ef1):_0x230ef1)[_0x903ee3(0xc5)](()=>({}));if(_0x4713d4[this[_0x903ee3(0xd1)][_0x903ee3(0xdc)]]){if(_0x4713d4[this[_0x903ee3(0xd1)][_0x903ee3(0xdc)]]['lastCommit']===_0x52cf52)return!![];}return![];}return![];}async[a127_0x5b89cd(0xa2)](_0x3883c7){const _0x55fa40=a127_0x5b89cd;this[_0x55fa40(0xbc)]&&await this['salesforceSync'][_0x55fa40(0xa2)](this[_0x55fa40(0xbc)],_0x3883c7);}[a127_0x5b89cd(0xf7)](){const _0x599434=a127_0x5b89cd;return this[_0x599434(0xa8)][_0x599434(0xd9)](({fileName:_0x11f3c6})=>_0x11f3c6);}async[a127_0x5b89cd(0xcd)](_0x4380b8,_0x111cf4,_0x5bbcac){const _0x343e84=a127_0x5b89cd,_0x455028=await path_utils_1[_0x343e84(0xcf)][_0x343e84(0xc6)](this[_0x343e84(0xbc)][_0x343e84(0xc8)],_0x4380b8,_0x111cf4,_0x5bbcac),_0xcba623=components_utils_1[_0x343e84(0xa6)][_0x343e84(0xfb)](this[_0x343e84(0xa8)],_0x4380b8,_0x5bbcac,this[_0x343e84(0xbc)]['recordTypeName']),_0x9049dc=factory_parser_1[_0x343e84(0xf5)][_0x343e84(0xb5)]({'recordType':this['syncRecord']['recordTypeName'],'sourceDir':_0x111cf4,'paths':_0x455028}),_0x4fcc8c=await _0x9049dc['execute'](),_0x55b022=[],_0x5175fd=[];for(const _0x3d380d of _0x4fcc8c){const _0x28d3fc=_0xcba623['find'](_0x4425b9=>_0x4425b9[_0x343e84(0xdd)]===_0x3d380d[_0x343e84(0xdd)]&&_0x4425b9[_0x343e84(0xeb)]===_0x3d380d[_0x343e84(0xeb)]);if(!_0x28d3fc){_0x55b022[_0x343e84(0xe8)](_0x3d380d);continue;}_0x3d380d[_0x343e84(0xbd)]!==_0x28d3fc[_0x343e84(0xf8)]&&_0x5175fd[_0x343e84(0xe8)]({'meta':_0x28d3fc,'component':_0x3d380d}),_0xcba623['splice'](_0xcba623[_0x343e84(0xaa)](_0x28d3fc),0x1);}return{'inserted':_0x55b022,'modified':_0x5175fd,'removed':_0xcba623};}async[a127_0x5b89cd(0xa1)](){const _0x153689=a127_0x5b89cd;this[_0x153689(0xbc)]=this[_0x153689(0xd1)][_0x153689(0xdb)]==='master'?await this[_0x153689(0xf0)][_0x153689(0xa5)](this[_0x153689(0xd1)][_0x153689(0xde)]):await this[_0x153689(0xf0)][_0x153689(0xea)](this[_0x153689(0xd1)][_0x153689(0xdb)]),this[_0x153689(0xa9)]=await this[_0x153689(0xc7)][_0x153689(0xba)]();}async[a127_0x5b89cd(0xe6)](_0x20876c){const _0x14f9e1=a127_0x5b89cd;if(this[_0x14f9e1(0xd1)][_0x14f9e1(0xfa)]||_0x20876c){this[_0x14f9e1(0xa8)]=this[_0x14f9e1(0xf2)]?await this[_0x14f9e1(0xc7)][_0x14f9e1(0xda)](this[_0x14f9e1(0xf2)]):await this[_0x14f9e1(0xc7)][_0x14f9e1(0xe2)](this['repositoryId']);return;}const _0x3710ff=components_utils_1[_0x14f9e1(0xa6)][_0x14f9e1(0xbb)](this[_0x14f9e1(0xd1)][_0x14f9e1(0xb8)],this[_0x14f9e1(0xbc)]['recordTypeName']);this[_0x14f9e1(0xa8)]=[];while(_0x3710ff[_0x14f9e1(0xed)]){const _0x436c0b=_0x3710ff[_0x14f9e1(0xe1)](0x0,this[_0x14f9e1(0xe7)]),_0x338c71=this[_0x14f9e1(0xf2)]?await this[_0x14f9e1(0xc7)][_0x14f9e1(0xc1)](_0x436c0b,this[_0x14f9e1(0xf2)]):await this[_0x14f9e1(0xc7)][_0x14f9e1(0xc3)](_0x436c0b,this[_0x14f9e1(0xb9)]);this[_0x14f9e1(0xa8)][_0x14f9e1(0xe8)](..._0x338c71);}}async[a127_0x5b89cd(0xf4)](_0x2020c1){const _0x3485b5=a127_0x5b89cd;this['branchId']?await this[_0x3485b5(0xb2)]['patch'](constants_1[_0x3485b5(0xd4)],this['branchId'],{[constants_1[_0x3485b5(0xc0)]+_0x3485b5(0xd5)]:_0x2020c1,[constants_1[_0x3485b5(0xe9)]+'Last_Updated_On__c']:Date['now']()}):await this[_0x3485b5(0xb2)][_0x3485b5(0xa0)](constants_1[_0x3485b5(0xb7)],this[_0x3485b5(0xb9)],{[constants_1[_0x3485b5(0xc0)]+_0x3485b5(0xd5)]:_0x2020c1});}[a127_0x5b89cd(0xdf)](_0x491768){const _0x16df8c=a127_0x5b89cd;this[_0x16df8c(0xd1)]=_0x491768;}[a127_0x5b89cd(0xb1)](){const _0x3edbb2=a127_0x5b89cd;return this[_0x3edbb2(0xa9)];}[a127_0x5b89cd(0xd8)](){return this['repositoryId'];}['getBranchId'](){const _0x49aa52=a127_0x5b89cd;return this[_0x49aa52(0xf2)];}};GitCommitService=__decorate([(0x0,typedi_1[a127_0x5b89cd(0xb4)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_git_sync_service_1[a127_0x5b89cd(0xad)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a127_0x5b89cd(0xa7)],salesforce_service_1[a127_0x5b89cd(0xf6)]])],GitCommitService),exports[a127_0x5b89cd(0xe5)]=GitCommitService;