function a129_0xe23f(_0x13dacf,_0x21adce){const _0x3c7456=a129_0x1353();return a129_0xe23f=function(_0x4dcaf9,_0x36bb40){_0x4dcaf9=_0x4dcaf9-0x72;let _0x1353f7=_0x3c7456[_0x4dcaf9];return _0x1353f7;},a129_0xe23f(_0x13dacf,_0x21adce);}const a129_0x1a4e8d=a129_0xe23f;(function(_0x4aec87,_0x8e011c){const _0x46bd8b=a129_0xe23f,_0x4e112e=_0x4aec87();while(!![]){try{const _0x24f319=-parseInt(_0x46bd8b(0x82))/0x1*(parseInt(_0x46bd8b(0x9c))/0x2)+-parseInt(_0x46bd8b(0x7c))/0x3*(parseInt(_0x46bd8b(0x9b))/0x4)+-parseInt(_0x46bd8b(0x8d))/0x5*(parseInt(_0x46bd8b(0xb5))/0x6)+-parseInt(_0x46bd8b(0xb8))/0x7+parseInt(_0x46bd8b(0xaa))/0x8*(parseInt(_0x46bd8b(0x96))/0x9)+-parseInt(_0x46bd8b(0x7f))/0xa+parseInt(_0x46bd8b(0x9a))/0xb;if(_0x24f319===_0x8e011c)break;else _0x4e112e['push'](_0x4e112e['shift']());}catch(_0x326f42){_0x4e112e['push'](_0x4e112e['shift']());}}}(a129_0x1353,0xc4d21));const a129_0x36bb40=(function(){let _0x262985=!![];return function(_0x9058d8,_0x1a267a){const _0x59f0d8=_0x262985?function(){const _0x1cb207=a129_0xe23f;if(_0x1a267a){const _0x250b25=_0x1a267a[_0x1cb207(0x7a)](_0x9058d8,arguments);return _0x1a267a=null,_0x250b25;}}:function(){};return _0x262985=![],_0x59f0d8;};}()),a129_0x4dcaf9=a129_0x36bb40(this,function(){const _0x4ce104=a129_0xe23f;return a129_0x4dcaf9[_0x4ce104(0xab)]()[_0x4ce104(0xcc)](_0x4ce104(0x7b))[_0x4ce104(0xab)]()['constructor'](a129_0x4dcaf9)[_0x4ce104(0xcc)](_0x4ce104(0x7b));});a129_0x4dcaf9();'use strict';var __decorate=this&&this[a129_0x1a4e8d(0xbb)]||function(_0x4c0d7f,_0x1ab418,_0x2ab4e8,_0x1ab5e0){const _0x58e46b=a129_0x1a4e8d;var _0x4c0636=arguments[_0x58e46b(0x95)],_0x3d6cb8=_0x4c0636<0x3?_0x1ab418:_0x1ab5e0===null?_0x1ab5e0=Object[_0x58e46b(0xb1)](_0x1ab418,_0x2ab4e8):_0x1ab5e0,_0x1c2c9b;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x58e46b(0x81))_0x3d6cb8=Reflect['decorate'](_0x4c0d7f,_0x1ab418,_0x2ab4e8,_0x1ab5e0);else{for(var _0x4005dd=_0x4c0d7f[_0x58e46b(0x95)]-0x1;_0x4005dd>=0x0;_0x4005dd--)if(_0x1c2c9b=_0x4c0d7f[_0x4005dd])_0x3d6cb8=(_0x4c0636<0x3?_0x1c2c9b(_0x3d6cb8):_0x4c0636>0x3?_0x1c2c9b(_0x1ab418,_0x2ab4e8,_0x3d6cb8):_0x1c2c9b(_0x1ab418,_0x2ab4e8))||_0x3d6cb8;}return _0x4c0636>0x3&&_0x3d6cb8&&Object['defineProperty'](_0x1ab418,_0x2ab4e8,_0x3d6cb8),_0x3d6cb8;},__metadata=this&&this[a129_0x1a4e8d(0x98)]||function(_0x3716a5,_0x40d9db){const _0x26c68a=a129_0x1a4e8d;if(typeof Reflect==='object'&&typeof Reflect[_0x26c68a(0xcd)]==='function')return Reflect[_0x26c68a(0xcd)](_0x3716a5,_0x40d9db);};Object[a129_0x1a4e8d(0x86)](exports,a129_0x1a4e8d(0xbe),{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a129_0x1a4e8d(0xb7)),salesforce_git_sync_service_1=require(a129_0x1a4e8d(0x8b)),salesforce_rest_service_1=require(a129_0x1a4e8d(0x74)),typedi_1=require(a129_0x1a4e8d(0x85)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a129_0x1a4e8d(0x94)),factory_parser_1=require(a129_0x1a4e8d(0xb3)),path_utils_1=require(a129_0x1a4e8d(0x91)),components_utils_1=require('../utils/components.utils');let GitCommitService=class GitCommitService{constructor(_0x25f707,_0x4bb87e,_0x49f750,_0x37e49e){const _0x251d1a=a129_0x1a4e8d;this[_0x251d1a(0xaf)]=_0x25f707,this[_0x251d1a(0x79)]=_0x4bb87e,this[_0x251d1a(0x78)]=_0x49f750,this['salesforce']=_0x37e49e,this['TASKS_PER_TICK']=0xc8;}get[a129_0x1a4e8d(0xa6)](){const _0x5b34ba=a129_0x1a4e8d;var _0x4212f3;return((_0x4212f3=this[_0x5b34ba(0x75)])===null||_0x4212f3===void 0x0?void 0x0:_0x4212f3[_0x5b34ba(0xa6)])||'';}get[a129_0x1a4e8d(0xa8)](){const _0x568261=a129_0x1a4e8d;var _0x3a5817;return((_0x3a5817=this[_0x568261(0x75)])===null||_0x3a5817===void 0x0?void 0x0:_0x3a5817[_0x568261(0xa8)])||'';}get[a129_0x1a4e8d(0x8c)](){const _0x36baef=a129_0x1a4e8d;return this[_0x36baef(0x75)]['recordTypeName'];}async[a129_0x1a4e8d(0xb6)](_0x296037){const _0x1b462b=a129_0x1a4e8d;return this[_0x1b462b(0xaf)]['createCommit'](_0x296037,this[_0x1b462b(0xa6)]);}async[a129_0x1a4e8d(0xa2)](_0xd6c0a6){const _0x40779a=a129_0x1a4e8d;if(this[_0x40779a(0x75)]){const _0x1f91bb=await this['salesforceSync'][_0x40779a(0xc7)](this['syncRecord']),_0x262cd9=await this[_0x40779a(0x89)]['retrieveAttachment'](_0x1f91bb)['then'](_0x5208b3=>typeof _0x5208b3==='string'?JSON[_0x40779a(0x93)](_0x5208b3):_0x5208b3)['catch'](()=>({}));if(_0x262cd9[this[_0x40779a(0x83)][_0x40779a(0xad)]]){if(_0x262cd9[this[_0x40779a(0x83)][_0x40779a(0xad)]][_0x40779a(0xc5)]===_0xd6c0a6)return!![];}return![];}return![];}async[a129_0x1a4e8d(0x73)](_0x2b7d44){const _0x1dd1db=a129_0x1a4e8d;this[_0x1dd1db(0x75)]&&await this['salesforceSync'][_0x1dd1db(0x73)](this[_0x1dd1db(0x75)],_0x2b7d44);}[a129_0x1a4e8d(0x7e)](){const _0x242b1=a129_0x1a4e8d;return this[_0x242b1(0xc1)][_0x242b1(0x88)](({fileName:_0x3db8ec})=>_0x3db8ec);}async[a129_0x1a4e8d(0xc2)](_0x29413f,_0x534efe,_0x1a204c){const _0x28e2ab=a129_0x1a4e8d,_0x2f0c47=await path_utils_1[_0x28e2ab(0x97)][_0x28e2ab(0xae)](this[_0x28e2ab(0x75)][_0x28e2ab(0xb4)],_0x29413f,_0x534efe,_0x1a204c),_0x5ba064=components_utils_1['ComponentsUtils'][_0x28e2ab(0xac)](this[_0x28e2ab(0xc1)],_0x29413f,_0x1a204c,this[_0x28e2ab(0x75)][_0x28e2ab(0xb4)]),_0x1f1b6b=factory_parser_1[_0x28e2ab(0x84)][_0x28e2ab(0xba)]({'recordType':this[_0x28e2ab(0x75)]['recordTypeName'],'sourceDir':_0x534efe,'paths':_0x2f0c47}),_0x412ac1=await _0x1f1b6b[_0x28e2ab(0xa5)](),_0x1b227f=[],_0xae383c=[];for(const _0x48a07a of _0x412ac1){const _0x5a39ca=_0x5ba064['find'](_0x3354f2=>_0x3354f2[_0x28e2ab(0xc6)]===_0x48a07a[_0x28e2ab(0xc6)]&&_0x3354f2['type']===_0x48a07a['type']);if(!_0x5a39ca){_0x1b227f['push'](_0x48a07a);continue;}_0x48a07a['crc']!==_0x5a39ca[_0x28e2ab(0x9d)]&&_0xae383c[_0x28e2ab(0x92)]({'meta':_0x5a39ca,'component':_0x48a07a}),_0x5ba064[_0x28e2ab(0xc9)](_0x5ba064[_0x28e2ab(0x8a)](_0x5a39ca),0x1);}return{'inserted':_0x1b227f,'modified':_0xae383c,'removed':_0x5ba064};}async[a129_0x1a4e8d(0xc0)](){const _0x47a41d=a129_0x1a4e8d;this[_0x47a41d(0x75)]=this[_0x47a41d(0x83)][_0x47a41d(0x8f)]==='master'?await this[_0x47a41d(0x78)]['getRepositoryRecordByName'](this[_0x47a41d(0x83)][_0x47a41d(0xa3)]):await this[_0x47a41d(0x78)][_0x47a41d(0x80)](this['gitCommit'][_0x47a41d(0x8f)]),this[_0x47a41d(0x7d)]=await this[_0x47a41d(0xaf)][_0x47a41d(0xb2)]();}async[a129_0x1a4e8d(0x72)](_0x3e1d1d){const _0xb02532=a129_0x1a4e8d;if(this[_0xb02532(0x83)][_0xb02532(0x76)]||_0x3e1d1d){this[_0xb02532(0xc1)]=this[_0xb02532(0xa8)]?await this['salesforceGitSync'][_0xb02532(0x90)](this[_0xb02532(0xa8)]):await this[_0xb02532(0xaf)][_0xb02532(0xcb)](this['repositoryId']);return;}const _0x39bd30=components_utils_1[_0xb02532(0xca)]['prepareComponentNamesForFetchMetadata'](this[_0xb02532(0x83)]['fileNames'],this['syncRecord'][_0xb02532(0xb4)]);this[_0xb02532(0xc1)]=[];while(_0x39bd30[_0xb02532(0x95)]){const _0x4c7e42=_0x39bd30[_0xb02532(0xc9)](0x0,this['TASKS_PER_TICK']),_0x4dad31=this[_0xb02532(0xa8)]?await this[_0xb02532(0xaf)][_0xb02532(0xb0)](_0x4c7e42,this[_0xb02532(0xa8)]):await this[_0xb02532(0xaf)][_0xb02532(0x8e)](_0x4c7e42,this['repositoryId']);this[_0xb02532(0xc1)][_0xb02532(0x92)](..._0x4dad31);}}async['updateStatus'](_0x36ccf6){const _0x5807f5=a129_0x1a4e8d;this[_0x5807f5(0xa8)]?await this[_0x5807f5(0x79)][_0x5807f5(0xbd)](constants_1[_0x5807f5(0xa4)],this[_0x5807f5(0xa8)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x5807f5(0x9e)]:_0x36ccf6,[constants_1[_0x5807f5(0x77)]+_0x5807f5(0xa0)]:Date[_0x5807f5(0xc4)]()}):await this[_0x5807f5(0x79)]['patch'](constants_1['FLOSUM_REPOSITORY'],this[_0x5807f5(0xa6)],{[constants_1[_0x5807f5(0xb9)]+_0x5807f5(0x9e)]:_0x36ccf6});}[a129_0x1a4e8d(0xa7)](_0x3858a1){this['gitCommit']=_0x3858a1;}[a129_0x1a4e8d(0xbc)](){const _0x5e1c7d=a129_0x1a4e8d;return this[_0x5e1c7d(0x7d)];}[a129_0x1a4e8d(0x9f)](){return this['repositoryId'];}[a129_0x1a4e8d(0xc3)](){const _0x5ee993=a129_0x1a4e8d;return this[_0x5ee993(0xa8)];}};GitCommitService=__decorate([(0x0,typedi_1[a129_0x1a4e8d(0xa1)])({'transient':!![]}),__metadata(a129_0x1a4e8d(0xbf),[salesforce_git_sync_service_1['SalesforceGitSyncService'],salesforce_rest_service_1[a129_0x1a4e8d(0x99)],salesforce_sync_service_1[a129_0x1a4e8d(0xc8)],salesforce_service_1[a129_0x1a4e8d(0xa9)]])],GitCommitService),exports[a129_0x1a4e8d(0x87)]=GitCommitService;function a129_0x1353(){const _0xc11ec3=['64woEyPO','toString','filterMetadataComponents','repositoryGit','readComponentPaths','salesforceGitSync','fetchBranchComponentsByFilenames','getOwnPropertyDescriptor','getComponentRecordTypes','../../parsers/factory.parser','recordTypeName','1411614sIoQdy','createCommit','../../../../constants','2877581EsZtGh','FLOSUM_GIT_NAMESPACE','create','__decorate','getRecordTypes','patch','__esModule','design:paramtypes','fetchRepositoryOrBranchData','componentsMetadata','proceedFile','getBranchId','now','lastCommit','name','getRemoteStateAttachmentId','SalesforceSyncService','splice','ComponentsUtils','fetchRepositoryComponents','search','metadata','fetchComponentsMetadata','updateRemoteState','../../salesforce/services/salesforce-rest.service','syncRecord','force','FLOSUM_NAMESPACE','salesforceSync','salesforceRest','apply','(((.+)+)+)+$','437679EwgtqM','recordTypes','getUnusedComponentsFilePaths','2243780iWpQzO','getBranchRecordByName','function','2TiUdjr','gitCommit','FactoryParser','typedi','defineProperty','GitCommitService','map','salesforce','indexOf','../../salesforce/services/salesforce-git-sync.service','recordType','10GaqIKW','fetchRepositoryComponentsByFilenames','branch','fetchBranchComponents','../utils/path.utils','push','parse','../../salesforce/services/salesforce.service','length','1443078KVIrhF','PathUtils','__metadata','SalesforceRestService','16853056fTTdGW','24CtspjR','27298cGcKOI','crc32','Synchronization_Status__c','getRepositoryId','Last_Updated_On__c','Service','checkSyncStatus','repository','FLOSUM_BRANCH','execute','repositoryId','setCommitDto','branchId','SalesforceService'];a129_0x1353=function(){return _0xc11ec3;};return a129_0x1353();}