const a66_0x3ce645=a66_0xeb39;(function(_0x4325f1,_0x3f1bbd){const _0x414c29=a66_0xeb39,_0x356fbd=_0x4325f1();while(!![]){try{const _0x3d5d84=parseInt(_0x414c29(0x232))/0x1*(parseInt(_0x414c29(0x20b))/0x2)+parseInt(_0x414c29(0x229))/0x3+parseInt(_0x414c29(0x20c))/0x4+parseInt(_0x414c29(0x1e5))/0x5*(-parseInt(_0x414c29(0x1f1))/0x6)+parseInt(_0x414c29(0x231))/0x7+parseInt(_0x414c29(0x216))/0x8+-parseInt(_0x414c29(0x212))/0x9;if(_0x3d5d84===_0x3f1bbd)break;else _0x356fbd['push'](_0x356fbd['shift']());}catch(_0x453ddf){_0x356fbd['push'](_0x356fbd['shift']());}}}(a66_0x3fc4,0xc10aa));const a66_0x5cac69=(function(){let _0x412914=!![];return function(_0x35db1b,_0x38a362){const _0x5b7e54=_0x412914?function(){const _0x6ce57a=a66_0xeb39;if(_0x38a362){const _0x2b8f6a=_0x38a362[_0x6ce57a(0x21c)](_0x35db1b,arguments);return _0x38a362=null,_0x2b8f6a;}}:function(){};return _0x412914=![],_0x5b7e54;};}()),a66_0x6b853a=a66_0x5cac69(this,function(){const _0x43e5ea=a66_0xeb39;return a66_0x6b853a['toString']()['search']('(((.+)+)+)+$')[_0x43e5ea(0x1f9)]()[_0x43e5ea(0x201)](a66_0x6b853a)[_0x43e5ea(0x222)](_0x43e5ea(0x224));});a66_0x6b853a();function a66_0xeb39(_0x1a134b,_0x349788){const _0x5e57fe=a66_0x3fc4();return a66_0xeb39=function(_0x6b853a,_0x5cac69){_0x6b853a=_0x6b853a-0x1df;let _0x3fc48c=_0x5e57fe[_0x6b853a];return _0x3fc48c;},a66_0xeb39(_0x1a134b,_0x349788);}function a66_0x3fc4(){const _0x34eacb=['(((.+)+)+)+$','gitCommit','__metadata','retrieveAttachment','TASKS_PER_TICK','2106639MxOXba','getRepositoryRecordByName','salesforce','Synchronization_Status__c','proceedFile','setCommitDto','repositoryId','string','6283060fnQVai','291731RlibPP','salesforceSync','typedi','MDApiParser','../../../../constants','SalesforceGitSyncService','fetchRepositoryComponentsByFilenames','filePath','SalesforceSyncService','3711955HmaIDS','design:paramtypes','syncRecord','metadata','getComponentRecordTypes','repository','salesforceGitSync','SalesforceService','fetchRepositoryComponents','isPathsEquals','fetchBranchComponentsByFilenames','filter','6IhlLwS','fetchRepositoryOrBranchData','fileNames','getOwnPropertyDescriptor','object','type','includes','recordTypes','toString','crc','splice','getRepositoryId','FLOSUM_GIT_NAMESPACE','SalesforceRestService','defineProperty','repositoryGit','constructor','FLOSUM_NAMESPACE','getRecordTypes','../../parsers/mdapi/parser','length','find','checkSyncStatus','componentsMetadata','updateRemoteState','map','4LCExsK','1233336onOyJw','salesforceRest','getBranchRecordByName','fetchComponentsMetadata','push','Last_Updated_On__c','9247482rvzIsP','branch','master','name','551984lNuEml','function','fileName','../../salesforce/services/salesforce-rest.service','branchId','GitCommitService','apply','then','lastCommit','patch','Service','createCommit','search','decorate'];a66_0x3fc4=function(){return _0x34eacb;};return a66_0x3fc4();}'use strict';var __decorate=this&&this['__decorate']||function(_0x3adc72,_0xea84e4,_0x3e0440,_0x49ddc2){const _0x30b62d=a66_0xeb39;var _0x4e93ef=arguments[_0x30b62d(0x205)],_0x512d5e=_0x4e93ef<0x3?_0xea84e4:_0x49ddc2===null?_0x49ddc2=Object[_0x30b62d(0x1f4)](_0xea84e4,_0x3e0440):_0x49ddc2,_0x146d6f;if(typeof Reflect==='object'&&typeof Reflect[_0x30b62d(0x223)]===_0x30b62d(0x217))_0x512d5e=Reflect[_0x30b62d(0x223)](_0x3adc72,_0xea84e4,_0x3e0440,_0x49ddc2);else{for(var _0x527f2e=_0x3adc72[_0x30b62d(0x205)]-0x1;_0x527f2e>=0x0;_0x527f2e--)if(_0x146d6f=_0x3adc72[_0x527f2e])_0x512d5e=(_0x4e93ef<0x3?_0x146d6f(_0x512d5e):_0x4e93ef>0x3?_0x146d6f(_0xea84e4,_0x3e0440,_0x512d5e):_0x146d6f(_0xea84e4,_0x3e0440))||_0x512d5e;}return _0x4e93ef>0x3&&_0x512d5e&&Object[_0x30b62d(0x1ff)](_0xea84e4,_0x3e0440,_0x512d5e),_0x512d5e;},__metadata=this&&this[a66_0x3ce645(0x226)]||function(_0x2533ea,_0x59e39c){const _0x5dcb41=a66_0x3ce645;if(typeof Reflect===_0x5dcb41(0x1f5)&&typeof Reflect[_0x5dcb41(0x1e8)]===_0x5dcb41(0x217))return Reflect['metadata'](_0x2533ea,_0x59e39c);};Object[a66_0x3ce645(0x1ff)](exports,'__esModule',{'value':!![]}),exports[a66_0x3ce645(0x21b)]=void 0x0;const constants_1=require(a66_0x3ce645(0x1e0)),parser_1=require(a66_0x3ce645(0x204)),salesforce_git_sync_service_1=require('../../salesforce/services/salesforce-git-sync.service'),salesforce_rest_service_1=require(a66_0x3ce645(0x219)),typedi_1=require(a66_0x3ce645(0x234)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_commit_utils_1=require('../utils/git-commit.utils');let GitCommitService=class GitCommitService{constructor(_0x4b6832,_0x24721a,_0x3ce7ce,_0x68c980){const _0x437d4c=a66_0x3ce645;this[_0x437d4c(0x1eb)]=_0x4b6832,this[_0x437d4c(0x20d)]=_0x24721a,this['salesforceSync']=_0x3ce7ce,this[_0x437d4c(0x22b)]=_0x68c980,this[_0x437d4c(0x228)]=0xc8;}get['repositoryId'](){const _0x560caf=a66_0x3ce645;var _0x3aee16;return((_0x3aee16=this[_0x560caf(0x1e7)])===null||_0x3aee16===void 0x0?void 0x0:_0x3aee16[_0x560caf(0x22f)])||'';}get[a66_0x3ce645(0x21a)](){var _0x2f6d6d;return((_0x2f6d6d=this['syncRecord'])===null||_0x2f6d6d===void 0x0?void 0x0:_0x2f6d6d['branchId'])||'';}async[a66_0x3ce645(0x221)](_0x24975){const _0x3386cc=a66_0x3ce645;return this['salesforceGitSync'][_0x3386cc(0x221)](_0x24975,this['repositoryId']);}async[a66_0x3ce645(0x207)](_0x30a58b){const _0x224713=a66_0x3ce645;if(this['syncRecord']){const _0x1f74e2=await this['salesforceSync']['getRemoteStateAttachmentId'](this['syncRecord']),_0x4a8fba=await this['salesforce'][_0x224713(0x227)](_0x1f74e2)[_0x224713(0x21d)](_0x48216e=>typeof _0x48216e===_0x224713(0x230)?JSON['parse'](_0x48216e):_0x48216e)['catch'](()=>({}));if(_0x4a8fba[this[_0x224713(0x225)]['repositoryGit']]){if(_0x4a8fba[this[_0x224713(0x225)][_0x224713(0x200)]][_0x224713(0x21e)]===_0x30a58b)return!![];}return![];}return![];}async[a66_0x3ce645(0x209)](_0x1d677e){const _0x210106=a66_0x3ce645;this[_0x210106(0x1e7)]&&await this[_0x210106(0x233)][_0x210106(0x209)](this[_0x210106(0x1e7)],_0x1d677e);}async[a66_0x3ce645(0x22d)](_0x604c28,_0x549feb,_0x577e9c){const _0x2dacf2=a66_0x3ce645,_0x40051f=this[_0x2dacf2(0x208)][_0x2dacf2(0x1f0)](_0x256ec0=>git_commit_utils_1[_0x2dacf2(0x1ee)](_0x256ec0[_0x2dacf2(0x218)],_0x604c28)),_0x2d1e41=[],_0x2c0237=[],_0x7ea047=[],_0x3750bc=new parser_1[(_0x2dacf2(0x1df))](_0x549feb,[_0x604c28],_0x577e9c),_0x754720=await _0x3750bc['parse'](),_0x41017a=_0x754720[_0x2dacf2(0x20a)](_0x2b83c5=>{const _0x4ca521=_0x2dacf2,_0x53f85b=_0x40051f[_0x4ca521(0x206)](_0x23bea6=>_0x23bea6[_0x4ca521(0x215)]===_0x2b83c5['name']&&_0x23bea6['type']===_0x2b83c5[_0x4ca521(0x1f6)]);if(!_0x53f85b){const _0x49b553={'crc32':_0x2b83c5['crc'],'fileName':_0x2b83c5[_0x4ca521(0x1e3)],'id':null,'version':0x1,'name':_0x2b83c5[_0x4ca521(0x215)],'type':_0x2b83c5[_0x4ca521(0x1f6)]};return this[_0x4ca521(0x208)][_0x4ca521(0x210)](_0x49b553),_0x40051f[_0x4ca521(0x210)](_0x49b553),_0x7ea047[_0x4ca521(0x210)](_0x49b553),_0x2c0237[_0x4ca521(0x210)](_0x2b83c5),null;}_0x7ea047['push'](_0x53f85b);if(_0x2b83c5[_0x4ca521(0x1fa)]===_0x53f85b['crc32'])return null;return{'component':_0x2b83c5,'meta':_0x53f85b};})[_0x2dacf2(0x1f0)](_0x11bb06=>!!_0x11bb06);_0x2d1e41[_0x2dacf2(0x210)](..._0x41017a);const _0x389ea1=_0x40051f[_0x2dacf2(0x1f0)](_0x3e77cb=>!_0x7ea047[_0x2dacf2(0x1f7)](_0x3e77cb));return this['componentsMetadata']=this[_0x2dacf2(0x208)][_0x2dacf2(0x1f0)](_0x5b8266=>!_0x389ea1['includes'](_0x5b8266)),{'inserted':_0x2c0237,'modified':_0x2d1e41,'removed':_0x389ea1[_0x2dacf2(0x20a)](({id:_0x283894,name:_0x348b75,type:_0x563a77})=>({'id':_0x283894,'name':_0x348b75,'type':_0x563a77}))};}async[a66_0x3ce645(0x1f2)](){const _0x479d9d=a66_0x3ce645;this[_0x479d9d(0x1e7)]=this[_0x479d9d(0x225)]['branch']===_0x479d9d(0x214)?await this[_0x479d9d(0x233)][_0x479d9d(0x22a)](this[_0x479d9d(0x225)][_0x479d9d(0x1ea)]):await this[_0x479d9d(0x233)][_0x479d9d(0x20e)](this[_0x479d9d(0x225)][_0x479d9d(0x213)]),this['recordTypes']=await this['salesforceGitSync'][_0x479d9d(0x1e9)]();}async[a66_0x3ce645(0x20f)](_0x2023ec){const _0x4f4786=a66_0x3ce645,_0x17f067=[...this['gitCommit'][_0x4f4786(0x1f3)]];if(this['gitCommit']['force']||_0x2023ec){this[_0x4f4786(0x208)]=this['branchId']?await this['salesforceGitSync']['fetchBranchComponents'](this[_0x4f4786(0x21a)]):await this[_0x4f4786(0x1eb)][_0x4f4786(0x1ed)](this['repositoryId']);return;}this[_0x4f4786(0x208)]=[];while(_0x17f067['length']){const _0x18fc95=_0x17f067[_0x4f4786(0x1fb)](0x0,this['TASKS_PER_TICK']),_0x5baa29=this[_0x4f4786(0x21a)]?await this[_0x4f4786(0x1eb)][_0x4f4786(0x1ef)](_0x18fc95,this[_0x4f4786(0x21a)]):await this[_0x4f4786(0x1eb)][_0x4f4786(0x1e2)](_0x18fc95,this[_0x4f4786(0x22f)]);this[_0x4f4786(0x208)][_0x4f4786(0x210)](..._0x5baa29);}}async['updateStatus'](_0x5cc101){const _0x4a9a05=a66_0x3ce645;this[_0x4a9a05(0x21a)]?await this[_0x4a9a05(0x20d)][_0x4a9a05(0x21f)](constants_1['FLOSUM_BRANCH'],this[_0x4a9a05(0x21a)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x4a9a05(0x22c)]:_0x5cc101,[constants_1[_0x4a9a05(0x202)]+_0x4a9a05(0x211)]:Date['now']()}):await this[_0x4a9a05(0x20d)]['patch'](constants_1['FLOSUM_REPOSITORY'],this[_0x4a9a05(0x22f)],{[constants_1[_0x4a9a05(0x1fd)]+_0x4a9a05(0x22c)]:_0x5cc101});}[a66_0x3ce645(0x22e)](_0x3dd8a4){this['gitCommit']=_0x3dd8a4;}[a66_0x3ce645(0x203)](){const _0x36644c=a66_0x3ce645;return this[_0x36644c(0x1f8)];}[a66_0x3ce645(0x1fc)](){const _0x205630=a66_0x3ce645;return this[_0x205630(0x22f)];}['getBranchId'](){const _0x5a969f=a66_0x3ce645;return this[_0x5a969f(0x21a)];}};GitCommitService=__decorate([typedi_1[a66_0x3ce645(0x220)]({'transient':!![]}),__metadata(a66_0x3ce645(0x1e6),[salesforce_git_sync_service_1[a66_0x3ce645(0x1e1)],salesforce_rest_service_1[a66_0x3ce645(0x1fe)],salesforce_sync_service_1[a66_0x3ce645(0x1e4)],salesforce_service_1[a66_0x3ce645(0x1ec)]])],GitCommitService),exports[a66_0x3ce645(0x21b)]=GitCommitService;