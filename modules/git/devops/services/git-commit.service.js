const a130_0x34891b=a130_0x2bfe;function a130_0x56d4(){const _0x5b2df6=['design:paramtypes','object','TASKS_PER_TICK','create','find','splice','../utils/components.utils','toString','getRemoteStateAttachmentId','../../../../constants','metadata','search','../../parsers/factory.parser','Service','PathUtils','4303888BzOhYK','repository','salesforceGitSync','type','decorate','../../salesforce/services/salesforce-sync.service','prepareComponentNamesForFetchMetadata','873cOETuj','execute','defineProperty','2676HMSMlI','lastCommit','(((.+)+)+)+$','componentsMetadata','GitCommitService','readComponentPaths','name','getComponentRecordTypes','Last_Updated_On__c','fetchRepositoryOrBranchData','catch','push','../../salesforce/services/salesforce-rest.service','branch','829230TVaOFH','string','salesforceRest','getRecordTypes','252754tpmMHr','17094yCuqDQ','ComponentsUtils','fetchBranchComponentsByFilenames','Synchronization_Status__c','__esModule','getRepositoryId','getOwnPropertyDescriptor','FLOSUM_NAMESPACE','__metadata','../../salesforce/services/salesforce-git-sync.service','fetchComponentsMetadata','master','fileNames','apply','fetchBranchComponents','SalesforceService','76220FUPxzk','FLOSUM_GIT_NAMESPACE','repositoryId','SalesforceSyncService','constructor','recordTypeName','indexOf','force','setCommitDto','__decorate','fetchRepositoryComponents','typedi','FactoryParser','salesforceSync','gitCommit','patch','map','createCommit','getUnusedComponentsFilePaths','checkSyncStatus','length','now','updateStatus','770442QVHMKz','function','syncRecord','getBranchId','branchId','updateRemoteState','repositoryGit','recordTypes','SalesforceRestService','../utils/path.utils','SalesforceGitSyncService'];a130_0x56d4=function(){return _0x5b2df6;};return a130_0x56d4();}(function(_0x490ad6,_0x74d74b){const _0x21d2b6=a130_0x2bfe,_0x4fafbb=_0x490ad6();while(!![]){try{const _0x50fb7d=parseInt(_0x21d2b6(0xfa))/0x1+-parseInt(_0x21d2b6(0x10b))/0x2+parseInt(_0x21d2b6(0x143))/0x3*(parseInt(_0x21d2b6(0x146))/0x4)+parseInt(_0x21d2b6(0xf6))/0x5+parseInt(_0x21d2b6(0x122))/0x6+parseInt(_0x21d2b6(0xfb))/0x7+-parseInt(_0x21d2b6(0x13c))/0x8;if(_0x50fb7d===_0x74d74b)break;else _0x4fafbb['push'](_0x4fafbb['shift']());}catch(_0x47cc11){_0x4fafbb['push'](_0x4fafbb['shift']());}}}(a130_0x56d4,0x29060));const a130_0x5a7331=(function(){let _0x39f6cf=!![];return function(_0xd9bfc5,_0x270b7d){const _0x1eb223=_0x39f6cf?function(){const _0x51c4fe=a130_0x2bfe;if(_0x270b7d){const _0x4a8eb5=_0x270b7d[_0x51c4fe(0x108)](_0xd9bfc5,arguments);return _0x270b7d=null,_0x4a8eb5;}}:function(){};return _0x39f6cf=![],_0x1eb223;};}()),a130_0x13309d=a130_0x5a7331(this,function(){const _0x1f258c=a130_0x2bfe;return a130_0x13309d[_0x1f258c(0x134)]()[_0x1f258c(0x138)](_0x1f258c(0xea))[_0x1f258c(0x134)]()[_0x1f258c(0x10f)](a130_0x13309d)[_0x1f258c(0x138)](_0x1f258c(0xea));});a130_0x13309d();'use strict';function a130_0x2bfe(_0x2e3cc2,_0x5d333b){const _0x4d3f19=a130_0x56d4();return a130_0x2bfe=function(_0x13309d,_0x5a7331){_0x13309d=_0x13309d-0xea;let _0x56d4d0=_0x4d3f19[_0x13309d];return _0x56d4d0;},a130_0x2bfe(_0x2e3cc2,_0x5d333b);}var __decorate=this&&this[a130_0x34891b(0x114)]||function(_0x57d74d,_0x4d390a,_0xc5278b,_0x4c1b00){const _0xb4be14=a130_0x34891b;var _0x59e3cf=arguments['length'],_0x31dadb=_0x59e3cf<0x3?_0x4d390a:_0x4c1b00===null?_0x4c1b00=Object[_0xb4be14(0x101)](_0x4d390a,_0xc5278b):_0x4c1b00,_0x42a6c4;if(typeof Reflect===_0xb4be14(0x12e)&&typeof Reflect[_0xb4be14(0x140)]===_0xb4be14(0x123))_0x31dadb=Reflect['decorate'](_0x57d74d,_0x4d390a,_0xc5278b,_0x4c1b00);else{for(var _0x319cfc=_0x57d74d[_0xb4be14(0x11f)]-0x1;_0x319cfc>=0x0;_0x319cfc--)if(_0x42a6c4=_0x57d74d[_0x319cfc])_0x31dadb=(_0x59e3cf<0x3?_0x42a6c4(_0x31dadb):_0x59e3cf>0x3?_0x42a6c4(_0x4d390a,_0xc5278b,_0x31dadb):_0x42a6c4(_0x4d390a,_0xc5278b))||_0x31dadb;}return _0x59e3cf>0x3&&_0x31dadb&&Object['defineProperty'](_0x4d390a,_0xc5278b,_0x31dadb),_0x31dadb;},__metadata=this&&this[a130_0x34891b(0x103)]||function(_0x3522a0,_0x1fbb30){const _0x4ff890=a130_0x34891b;if(typeof Reflect===_0x4ff890(0x12e)&&typeof Reflect[_0x4ff890(0x137)]===_0x4ff890(0x123))return Reflect[_0x4ff890(0x137)](_0x3522a0,_0x1fbb30);};Object[a130_0x34891b(0x145)](exports,a130_0x34891b(0xff),{'value':!![]}),exports[a130_0x34891b(0xec)]=void 0x0;const constants_1=require(a130_0x34891b(0x136)),salesforce_git_sync_service_1=require(a130_0x34891b(0x104)),salesforce_rest_service_1=require(a130_0x34891b(0xf4)),typedi_1=require(a130_0x34891b(0x116)),salesforce_sync_service_1=require(a130_0x34891b(0x141)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),factory_parser_1=require(a130_0x34891b(0x139)),path_utils_1=require(a130_0x34891b(0x12b)),components_utils_1=require(a130_0x34891b(0x133));let GitCommitService=class GitCommitService{constructor(_0x5ae65d,_0x35924d,_0x74ad7d,_0x55ac3c){const _0x3f5071=a130_0x34891b;this[_0x3f5071(0x13e)]=_0x5ae65d,this['salesforceRest']=_0x35924d,this[_0x3f5071(0x118)]=_0x74ad7d,this['salesforce']=_0x55ac3c,this[_0x3f5071(0x12f)]=0xc8;}get['repositoryId'](){const _0x45d015=a130_0x34891b;var _0x28d489;return((_0x28d489=this[_0x45d015(0x124)])===null||_0x28d489===void 0x0?void 0x0:_0x28d489[_0x45d015(0x10d)])||'';}get[a130_0x34891b(0x126)](){const _0x201e82=a130_0x34891b;var _0x256038;return((_0x256038=this[_0x201e82(0x124)])===null||_0x256038===void 0x0?void 0x0:_0x256038[_0x201e82(0x126)])||'';}get['recordType'](){const _0xbb4ff1=a130_0x34891b;return this[_0xbb4ff1(0x124)][_0xbb4ff1(0x110)];}async[a130_0x34891b(0x11c)](_0x52b115){const _0x5311f7=a130_0x34891b;return this[_0x5311f7(0x13e)]['createCommit'](_0x52b115,this[_0x5311f7(0x10d)]);}async[a130_0x34891b(0x11e)](_0x22a02b){const _0x41668a=a130_0x34891b;if(this[_0x41668a(0x124)]){const _0x855464=await this[_0x41668a(0x118)][_0x41668a(0x135)](this[_0x41668a(0x124)]),_0x4c93ae=await this['salesforce']['retrieveAttachment'](_0x855464)['then'](_0x64037a=>typeof _0x64037a===_0x41668a(0xf7)?JSON['parse'](_0x64037a):_0x64037a)[_0x41668a(0xf2)](()=>({}));if(_0x4c93ae[this['gitCommit'][_0x41668a(0x128)]]){if(_0x4c93ae[this['gitCommit'][_0x41668a(0x128)]][_0x41668a(0x147)]===_0x22a02b)return!![];}return![];}return![];}async[a130_0x34891b(0x127)](_0x5ddc0e){const _0x49ec5d=a130_0x34891b;this[_0x49ec5d(0x124)]&&await this[_0x49ec5d(0x118)]['updateRemoteState'](this[_0x49ec5d(0x124)],_0x5ddc0e);}[a130_0x34891b(0x11d)](){const _0x2c5496=a130_0x34891b;return this[_0x2c5496(0xeb)][_0x2c5496(0x11b)](({fileName:_0x5d0c24})=>_0x5d0c24);}async['proceedFile'](_0x364ec3,_0xf9aa10,_0x48fb51){const _0x3b4c03=a130_0x34891b,_0x2c50f0=await path_utils_1[_0x3b4c03(0x13b)][_0x3b4c03(0xed)](this['syncRecord']['recordTypeName'],_0x364ec3,_0xf9aa10,_0x48fb51),_0x18ddda=components_utils_1[_0x3b4c03(0xfc)]['filterMetadataComponents'](this[_0x3b4c03(0xeb)],_0x364ec3,_0x48fb51,this[_0x3b4c03(0x124)][_0x3b4c03(0x110)]),_0x47909a=factory_parser_1[_0x3b4c03(0x117)][_0x3b4c03(0x130)]({'recordType':this[_0x3b4c03(0x124)][_0x3b4c03(0x110)],'sourceDir':_0xf9aa10,'paths':_0x2c50f0}),_0x111b8c=await _0x47909a[_0x3b4c03(0x144)](),_0x485aae=[],_0x5853e8=[];for(const _0x3837b7 of _0x111b8c){const _0x4bd84f=_0x18ddda[_0x3b4c03(0x131)](_0x4a26cf=>_0x4a26cf['name']===_0x3837b7[_0x3b4c03(0xee)]&&_0x4a26cf[_0x3b4c03(0x13f)]===_0x3837b7[_0x3b4c03(0x13f)]);if(!_0x4bd84f){_0x485aae[_0x3b4c03(0xf3)](_0x3837b7);continue;}_0x3837b7['crc']!==_0x4bd84f['crc32']&&_0x5853e8[_0x3b4c03(0xf3)]({'meta':_0x4bd84f,'component':_0x3837b7}),_0x18ddda[_0x3b4c03(0x132)](_0x18ddda[_0x3b4c03(0x111)](_0x4bd84f),0x1);}return{'inserted':_0x485aae,'modified':_0x5853e8,'removed':_0x18ddda};}async[a130_0x34891b(0xf1)](){const _0x489f68=a130_0x34891b;this[_0x489f68(0x124)]=this[_0x489f68(0x119)]['branch']===_0x489f68(0x106)?await this[_0x489f68(0x118)]['getRepositoryRecordByName'](this[_0x489f68(0x119)][_0x489f68(0x13d)]):await this[_0x489f68(0x118)]['getBranchRecordByName'](this['gitCommit'][_0x489f68(0xf5)]),this[_0x489f68(0x129)]=await this['salesforceGitSync'][_0x489f68(0xef)]();}async[a130_0x34891b(0x105)](_0x54cd4a){const _0x330e34=a130_0x34891b;if(this['gitCommit'][_0x330e34(0x112)]||_0x54cd4a){this[_0x330e34(0xeb)]=this[_0x330e34(0x126)]?await this['salesforceGitSync'][_0x330e34(0x109)](this[_0x330e34(0x126)]):await this[_0x330e34(0x13e)][_0x330e34(0x115)](this[_0x330e34(0x10d)]);return;}const _0x375d5a=components_utils_1[_0x330e34(0xfc)][_0x330e34(0x142)](this['gitCommit'][_0x330e34(0x107)],this[_0x330e34(0x124)][_0x330e34(0x110)]);this['componentsMetadata']=[];while(_0x375d5a[_0x330e34(0x11f)]){const _0x54ea77=_0x375d5a[_0x330e34(0x132)](0x0,this[_0x330e34(0x12f)]),_0x149833=this[_0x330e34(0x126)]?await this[_0x330e34(0x13e)][_0x330e34(0xfd)](_0x54ea77,this[_0x330e34(0x126)]):await this[_0x330e34(0x13e)]['fetchRepositoryComponentsByFilenames'](_0x54ea77,this[_0x330e34(0x10d)]);this[_0x330e34(0xeb)][_0x330e34(0xf3)](..._0x149833);}}async[a130_0x34891b(0x121)](_0x31c10a){const _0x246680=a130_0x34891b;this[_0x246680(0x126)]?await this['salesforceRest'][_0x246680(0x11a)](constants_1['FLOSUM_BRANCH'],this[_0x246680(0x126)],{[constants_1[_0x246680(0x10c)]+_0x246680(0xfe)]:_0x31c10a,[constants_1[_0x246680(0x102)]+_0x246680(0xf0)]:Date[_0x246680(0x120)]()}):await this[_0x246680(0xf8)][_0x246680(0x11a)](constants_1['FLOSUM_REPOSITORY'],this[_0x246680(0x10d)],{[constants_1[_0x246680(0x10c)]+_0x246680(0xfe)]:_0x31c10a});}[a130_0x34891b(0x113)](_0x1ca262){const _0xd5dfc=a130_0x34891b;this[_0xd5dfc(0x119)]=_0x1ca262;}[a130_0x34891b(0xf9)](){return this['recordTypes'];}[a130_0x34891b(0x100)](){const _0x34967b=a130_0x34891b;return this[_0x34967b(0x10d)];}[a130_0x34891b(0x125)](){const _0x471422=a130_0x34891b;return this[_0x471422(0x126)];}};GitCommitService=__decorate([(0x0,typedi_1[a130_0x34891b(0x13a)])({'transient':!![]}),__metadata(a130_0x34891b(0x12d),[salesforce_git_sync_service_1[a130_0x34891b(0x12c)],salesforce_rest_service_1[a130_0x34891b(0x12a)],salesforce_sync_service_1[a130_0x34891b(0x10e)],salesforce_service_1[a130_0x34891b(0x10a)]])],GitCommitService),exports[a130_0x34891b(0xec)]=GitCommitService;